<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230001979A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230001979</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17778291</doc-number><date>20200115</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>B</section><class>62</class><subclass>D</subclass><main-group>5</main-group><subgroup>04</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>P</subclass><main-group>27</main-group><subgroup>08</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>B</section><class>62</class><subclass>D</subclass><main-group>5</main-group><subgroup>046</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>27</main-group><subgroup>08</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>B</section><class>62</class><subclass>D</subclass><main-group>5</main-group><subgroup>0487</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">CONTROL APPARATUS FOR AC ROTARY MACHINE AND ELECTRIC POWER STEERING APPARATUS</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Mitsubishi Electric Corporation</orgname><address><city>Tokyo</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>MORI</last-name><first-name>Tatsuya</first-name><address><city>Tokyo</city><country>JP</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>KUBO</last-name><first-name>Kenta</first-name><address><city>Tokyo</city><country>JP</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>IKI</last-name><first-name>Itaru</first-name><address><city>Tokyo</city><country>JP</country></address></addressbook></inventor><inventor sequence="03" designation="us-only"><addressbook><last-name>HIROTANI</last-name><first-name>Yu</first-name><address><city>Tokyo</city><country>JP</country></address></addressbook></inventor></inventors></us-parties><assignees><assignee><addressbook><orgname>Mitsubishi Electric Corporation</orgname><role>03</role><address><city>Tokyo</city><country>JP</country></address></addressbook></assignee></assignees><pct-or-regional-filing-data><document-id><country>WO</country><doc-number>PCT/JP2020/000942</doc-number><date>20200115</date></document-id><us-371c12-date><date>20220519</date></us-371c12-date></pct-or-regional-filing-data></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">To provide a control apparatus for AC rotary machine and an electric power steering apparatus which can reduce the error component of the current detection value close to the mechanical resonance period of AC rotary machine. A control apparatus for AC rotary machine detects currents which flow into three-phase windings at a current detection period which is a first natural number times of a carrier period; calculates current detection values, by performing a current addition processing which adds current detection values detected at this time, and current detection values detected before an addition period which is a second natural number times of the current detection period; and calculates the voltage command values of three-phase based on the current detection values after current addition processing, wherein the second natural number is set to a natural number that the addition period becomes the closest to the half period of the mechanical resonance period.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="83.65mm" wi="158.58mm" file="US20230001979A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="255.19mm" wi="135.47mm" orientation="landscape" file="US20230001979A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="79.67mm" wi="165.78mm" file="US20230001979A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="216.58mm" wi="166.37mm" orientation="landscape" file="US20230001979A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="176.70mm" wi="166.71mm" file="US20230001979A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="177.97mm" wi="166.29mm" file="US20230001979A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="218.19mm" wi="162.31mm" file="US20230001979A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="203.62mm" wi="167.72mm" orientation="landscape" file="US20230001979A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="121.67mm" wi="131.83mm" file="US20230001979A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="215.48mm" wi="155.28mm" file="US20230001979A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="220.56mm" wi="165.78mm" file="US20230001979A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00011" num="00011"><img id="EMI-D00011" he="224.71mm" wi="141.39mm" orientation="landscape" file="US20230001979A1-20230105-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00012" num="00012"><img id="EMI-D00012" he="221.57mm" wi="166.37mm" file="US20230001979A1-20230105-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00013" num="00013"><img id="EMI-D00013" he="232.16mm" wi="166.45mm" file="US20230001979A1-20230105-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00014" num="00014"><img id="EMI-D00014" he="244.94mm" wi="166.62mm" file="US20230001979A1-20230105-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00015" num="00015"><img id="EMI-D00015" he="239.61mm" wi="116.92mm" orientation="landscape" file="US20230001979A1-20230105-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00016" num="00016"><img id="EMI-D00016" he="242.91mm" wi="116.92mm" orientation="landscape" file="US20230001979A1-20230105-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00017" num="00017"><img id="EMI-D00017" he="158.33mm" wi="119.46mm" file="US20230001979A1-20230105-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00018" num="00018"><img id="EMI-D00018" he="211.41mm" wi="164.93mm" orientation="landscape" file="US20230001979A1-20230105-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">TECHNICAL FIELD</heading><p id="p-0002" num="0001">The present disclosure relates to a control apparatus for AC rotary machine and an electric power steering apparatus.</p><heading id="h-0002" level="1">BACKGROUND ART</heading><p id="p-0003" num="0002">As the conventional control apparatus for AC rotary machine and the electric power steering apparatus, the technology of the patent document 1 is known. In the patent document 1, current is detected based on the output signal of the resistance element for current detection connected in series to the negative electrode side switching device of the inverter. In the technology of the patent document 1, by detecting current at two or more fixed timings in the carrier period, current is obtained so that the error caused by switching noise is not included. And, as shown in FIG. 12, FIG. 13, FIG. 14, FIG. 15, FIG. 16, FIG. 23, FIG. 24, FIG. 25, and FIG. 26 of the patent document 1, the voltage command values of three-phase is offset so that the maximum value of the voltage command values of three-phase coincides with the half value Vdc/2 of the power source voltage.</p><heading id="h-0003" level="1">CITATION LIST</heading><heading id="h-0004" level="1">Patent Literature</heading><p id="p-0004" num="0000"><ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0003">Patent document 1: JP 6266161 B (claim 1, claim 2, FIG. 12)</li></ul></p><heading id="h-0005" level="1">SUMMARY OF INVENTION</heading><heading id="h-0006" level="1">Technical Problem</heading><p id="p-0005" num="0004">In the technology of the patent document 1, the error of current detection can be reduced. However, in the inverter in which the resistance element for current detection is connected in series to the negative electrode side switching device, if the voltage command values of three-phase are offset so that the maximum value of the voltage command values of three-phase coincides with the half value Vdc/2 of the power source voltage, the third order ripple component superimposed on the output torque of AC rotary machine becomes large. Accordingly, in order to reduce the error of current detection, while suppressing the increase in the third torque ripple component, it is necessary to develop a method different from the patent document 1.</p><p id="p-0006" num="0005">By the way, the error component of a frequency close to the mechanical resonance frequency of AC rotary machine out of various frequency included in the error component of the current detection value becomes a noise of AC rotary machine easily. Accordingly, especially, it is desired to reduce the error component of the resonance period included in the current detection value.</p><p id="p-0007" num="0006">Then, the purpose of the present disclosure is to provide a control apparatus for AC rotary machine and an electric power steering apparatus which can reduce the error component of the current detection value close to the mechanical resonance period of AC rotary machine.</p><heading id="h-0007" level="1">Solution to Problem</heading><p id="p-0008" num="0007">A control apparatus for AC rotary machine according to the present disclosure that controls an AC rotary machine which has three-phase windings, the control apparatus for AC rotary machine including:</p><p id="p-0009" num="0008">an inverter that is provided with three sets of series circuits in each of which a positive electrode side switching device connected to a positive electrode side of a DC power source and a negative electrode side switching device connected to a negative electrode side of the DC power source are connected in series and a connection node of series connection is connected to the winding of the corresponding phase, corresponding to respective phases of the three-phase;</p><p id="p-0010" num="0009">a current detection circuit that is provided with resistances connected in series to the negative electrode side switching devices of at least two phases; and</p><p id="p-0011" num="0010">a controller that calculates voltage command values of three-phase, and controls on/off the switching devices by comparing each of the voltage command values of three-phase with a carrier wave vibrating at a carrier period,</p><p id="p-0012" num="0011">wherein the controller detects currents flowing into the three-phase windings, based on an output signal of the current detection circuit, at a current detection period which is a first natural number times of the carrier period and at which the negative electrode side switching device is turned on; calculates current detection values after current addition processing, by performing a current addition processing which adds current detection values detected at this time, and current detection values detected before an addition period which is a second natural number times of the current detection period; and calculates the current command values of three-phase based on the current detection values after the current addition processing,</p><p id="p-0013" num="0012">wherein the second natural number is set to a natural number that the addition period becomes the closest to a half period of a mechanical resonance period of the AC rotary machine.</p><p id="p-0014" num="0013">An electric power steering apparatus according to the present disclosure including:</p><p id="p-0015" num="0014">the control apparatus for AC rotary machine;</p><p id="p-0016" num="0015">the AC rotary machine; and</p><p id="p-0017" num="0016">a driving force transmission mechanism that transmits a driving force of the AC rotary machine to a steering device of a vehicle,</p><p id="p-0018" num="0017">wherein the carrier period is set less than or equal to 60 microseconds, and</p><p id="p-0019" num="0018">wherein the mechanical resonance period of the AC rotary machine is within a range from 200 microseconds to 500 microseconds.</p><heading id="h-0008" level="1">Advantage of Invention</heading><p id="p-0020" num="0019">The phase of the component of the resonance period of the current detection value is reversed at the half period of the resonance period. Accordingly, the component of the resonance period of the current detection value can be canceled by adding the current detection value detected at this time and the current detection value detected before the half period of the resonance period. According to the control apparatus for AC rotary electric machine or the electric power steering apparatus of the present disclosure, the second natural number is set to a natural number that the addition period becomes the closest to the half period of the mechanical resonant period of the AC rotary machine. Accordingly, the component of the resonance period of the current detection value can be reduced by adding the current detection value detected at this time and the current detection value detected before the addition period. As a result, occurrence of the noise of AC rotary machine can be suppressed.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0009" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a schematic configuration diagram of the AC rotary machine and the controller for AC rotary machine according to Embodiment 1;</p><p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a hardware configuration diagram of the control device according to Embodiment 1;</p><p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a time chart which shows the behavior of the voltage command values of three-phase by the amplitude reduction modulation according to Embodiment 1;</p><p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a time chart which shows the behavior of the output torque by the amplitude reduction modulation according to the comparative example;</p><p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a time chart which shows the behavior of the output torque by the amplitude reduction modulation according to Embodiment 1;</p><p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a time chart explaining the PWM control behavior and the current detection timing according to Embodiment 1;</p><p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a time chart explaining the PWM control behavior and the current detection timing according to Embodiment 1;</p><p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a time chart for explaining the influence of ringing according to Embodiment 1;</p><p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a time chart explaining the PWM control behavior and the current detection timing when the influence of ringing occurs according to Embodiment 1;</p><p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a time chart which shows the control behavior when not performing the current addition processing according to the comparative example;</p><p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. <b>11</b></figref> is a figure showing the frequency characteristic of the noise of AC rotary machine according to Embodiment 1;</p><p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. <b>12</b></figref> is a time chart explaining the component of the resonance period included in the current detection value and the addition period according to Embodiment 1;</p><p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. <b>13</b></figref> is a block diagram of the current addition processing unit according to Embodiment 1;</p><p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. <b>14</b></figref> is a flowchart for explaining the processing of the current addition processing unit according to Embodiment 2;</p><p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. <b>15</b></figref> is a block diagram of the current addition processing unit according to Embodiment 2;</p><p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. <b>16</b></figref> is a time chart explaining the component of the resonance period included in the current detection value and the addition period according to Embodiment 3;</p><p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. <b>17</b></figref> is a block diagram of the current addition processing unit according to Embodiment 3;</p><p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. <b>18</b></figref> is a figure showing the transfer characteristic to the noise component of the current detection value according to the comparative example;</p><p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. <b>19</b></figref> is a figure showing the transfer characteristic to the noise component of the current detection value according to Embodiment 3;</p><p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. <b>20</b></figref> is a schematic configuration diagram of the electric power steering apparatus according to Embodiment 4; and</p><p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. <b>21</b></figref> is a time chart which shows the behavior of the voltage command values of three-phase by the amplitude reduction modulation according to other embodiments.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0010" level="1">DETAILED DESCRIPTION OF THE EMBODIMENTS</heading><heading id="h-0011" level="1">1. Embodiment 1</heading><p id="p-0042" num="0041">A control apparatus for AC rotary machine <b>10</b> (hereinafter, referred to simply as the control apparatus <b>10</b>) according to Embodiment 1 will be explained with reference to drawings. <figref idref="DRAWINGS">FIG. <b>1</b></figref> is a schematic configuration diagram of the AC rotary machine <b>1</b> and the control apparatus <b>10</b> according to the present embodiment.</p><heading id="h-0012" level="2">1-1. AC Rotary Machine <b>1</b></heading><p id="p-0043" num="0042">The AC rotary machine <b>1</b> is provided with three-phase windings Cu, Cv, Cw of U phase, V phase, and W phase. The AC rotary machine is provided with a stator and a rotor disposed on the radial-direction inner side of the stator. The three-phase windings Cu, Cv, Cw are wound around the stator. In the present embodiment, the AC rotary machine <b>1</b> is the permanent magnet type synchronous rotary machine in which the permanent magnet is provided in the rotor. The AC rotary machine <b>1</b> may be the field winding type synchronous rotary machine in which the field winding is provided in the rotor, or it may be the induction machine in which the permanent magnet is not provided in the rotor. The three-phase windings may be connected by star connection, or may be connected by delta connection.</p><p id="p-0044" num="0043">The rotor is provided with a rotation detection circuit <b>2</b> for detecting a rotational angle of the rotor. Resolver, encoder, or MR sensor is used for the rotation detection circuit <b>2</b>. An output signal of the rotation detection circuit <b>2</b> is inputted into the controller <b>6</b>.</p><heading id="h-0013" level="2">1-2. Inverter <b>4</b></heading><p id="p-0045" num="0044">The inverter <b>4</b> is provided with three sets of series circuits (leg) in each of which a positive electrode side switching device SP connected to a positive electrode side of the DC power source <b>3</b> and a negative electrode side switching device SN connected to a negative electrode side of the DC power source <b>3</b> are connected in series, corresponding to respective phase of three-phase. A connection node of two switching devices in the series circuit of each phase is connected to the winding of the corresponding phase.</p><p id="p-0046" num="0045">Specifically, in the series circuit of U phase, the positive electrode side switching device SPu of U phase and the negative electrode side switching device SNu of U phase are connected in series, and the connection node of two switching devices is connected to the winding Cu of U phase. In the series circuit of V phase, the positive electrode side switching device SPv of V phase and the negative electrode side switching device SNv of V phase are connected in series, and the connection node of two switching devices is connected to the winding Cv of V phase. In the series circuit of W phase, the positive electrode side switching device SPw of W phase and the negative electrode side switching device SNw of W phase are connected in series, and the connection node of two switching devices is connected to the winding Cw of W phase.</p><p id="p-0047" num="0046">IGBT (Insulated Gate Bipolar Transistor) in which a diode is connected in reversely parallel, MOSFET (Metal Oxide Semiconductor Field Effect Transistor), bipolar transistor in which a diode is connected in reversely parallel, or the like is used for the switching devices. A gate terminal of each switching device is connected to the controller <b>6</b> via a gate drive circuit and the like. The each switching device is turned on or turned off by the switching signals GPu to GNw outputted from the controller <b>6</b>.</p><p id="p-0048" num="0047">The DC power source <b>3</b> outputs a power source voltage Vdc to the inverter <b>4</b>. The DC power source <b>3</b> may be any apparatus which outputs power source voltage Vdc, such as a battery, a DC-DC converter, a diode rectifier, and a PWM rectifier. A voltage sensor which detects the power source voltage Vdc may be provided in the DC power source <b>3</b>. And, an output signal of the voltage sensor may be inputted into the control apparatus <b>10</b>. The control apparatus <b>10</b> may control using the detected power source voltage Vdc.</p><heading id="h-0014" level="2">1-3. Current Detection Circuit <b>5</b></heading><p id="p-0049" num="0048">A current detection circuit <b>5</b> that is provided with resistances connected in series to the negative electrode side switching devices of at least two phases is provided. In the present embodiment, the current detection circuit <b>5</b> detects currents which flows through the negative electrode side switching devices SNu, SNv, SNw of three-phase. The current detection circuit <b>5</b> is provided with shunt resistances <b>5</b><i>u</i>, <b>5</b><i>v</i>, <b>5</b><i>w </i>connected in series to the negative electrode side switching device of each phase. The shunt resistance <b>5</b><i>u </i>of U phase is connected in series to the negative electrode side of the negative electrode side switching device SNu of U phase, the shunt resistance <b>5</b><i>v </i>of V phase is connected in series to the negative electrode side of the negative electrode side switching device SNv of V phase, and the shunt resistance <b>5</b><i>w </i>of W phase is connected in series to the negative electrode side of the negative electrode side switching device SNw of W phase. A potential difference between both ends VRu, VRv, VRw of the shunt resistance <b>5</b><i>u</i>, <b>5</b><i>v</i>, <b>5</b><i>w </i>of each phase is inputted into the controller <b>6</b>.</p><p id="p-0050" num="0049">Each shunt resistance may be connected in series to the positive electrode side of the negative electrode side switching device. The current detection circuit <b>5</b> may detect the currents which flow through the negative electrode side switching devices of any two phases. In this case, by utilizing that a total value of the winding currents of three-phase Iu, Iv, Iw becomes 0, the controller <b>6</b> may calculate the current of one remaining phase, based on the current detection values of two phases. For example, the current detection circuit <b>5</b> may detect the currents Iur, Ivr of U phase and V phase, and the controller <b>6</b> may calculate the current Iwr of W phase by Iwr=&#x2212;Iur&#x2212;Ivr.</p><heading id="h-0015" level="2">1-4. Controller <b>6</b></heading><p id="p-0051" num="0050">The controller <b>6</b> controls the AC rotary machine <b>1</b> via the inverter <b>4</b>. As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the controller <b>6</b> is provided with a rotation detection unit <b>31</b>, a current detection unit <b>32</b>, a current coordinate conversion unit <b>33</b>, a current addition processing unit <b>34</b>, a current command value calculation unit <b>35</b>, a voltage command value calculation unit <b>36</b>, a PWM control unit <b>37</b>, and the like. Respective functions of the controller <b>6</b> are realized by processing circuits provided in the controller <b>6</b>. Specifically, as shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the controller <b>6</b> is provided, as processing circuits, with an arithmetic processor (computer) <b>90</b> such as a CPU (Central Processing Unit), storage apparatuses <b>91</b> which exchange data with the arithmetic processor <b>90</b>, an input circuit <b>92</b> which inputs external signals to the arithmetic processor <b>90</b>, an output circuit <b>93</b> which outputs signals from the arithmetic processor <b>90</b> to the outside, and the like.</p><p id="p-0052" num="0051">As the arithmetic processor <b>90</b>, ASIC (Application Specific Integrated Circuit), IC (Integrated Circuit), DSP (Digital Signal Processor), FPGA (Field Programmable Gate Array), various kinds of logical circuits, various kinds of signal processing circuits, and the like may be provided. As the arithmetic processor <b>90</b>, a plurality of the same type ones or the different type ones may be provided, and each processing may be shared and executed. As the storage apparatuses <b>91</b>, there are provided a RAM (Random Access Memory) which can read data and write data from the arithmetic processor <b>90</b>, a ROM (Read Only Memory) which can read data from the arithmetic processor <b>90</b>, and the like. The input circuit <b>92</b> is connected with various kinds of sensors and switches such as the rotation detection circuit <b>2</b> and the current detection sensor <b>5</b>, and is provided with A/D converter and the like for inputting output signals from the sensors and the switches to the arithmetic processor <b>90</b>. The output circuit <b>93</b> is connected with electric loads such as a gate drive circuit which drive on/off of the switching devices, and is provided with a driving circuit and the like for outputting a control signal from the computing processing unit <b>90</b>.</p><p id="p-0053" num="0052">Then, the arithmetic processor <b>90</b> runs software items (programs) stored in the storage apparatus <b>91</b> such as a ROM and collaborates with other hardware devices in the controller <b>6</b>, such as the storage apparatus <b>91</b>, the input circuit <b>92</b>, and the output circuit <b>93</b>, so that the respective functions of the control units <b>31</b> to <b>37</b> of <figref idref="DRAWINGS">FIG. <b>1</b></figref> provided in the controller <b>6</b> are realized. Setting data items such as a gain and a threshold value to be utilized in the control units <b>31</b> to <b>37</b> are stored, as part of software items (programs), in the storage apparatus <b>91</b> such as a ROM. Each function of the controller <b>6</b> will be described in detail below.</p><heading id="h-0016" level="2">&#x3c;Rotation Detection Unit <b>31</b>&#x3e;</heading><p id="p-0054" num="0053">The rotation detection unit <b>31</b> detects a magnetic pole position &#x3b8; (a rotational angle &#x3b8; of the rotor) and a rotational angle speed &#x3c9; of the rotor in an electrical angle. In the present embodiment, the rotation detection unit <b>31</b> detects the magnetic pole position &#x3b8; (the rotational angle &#x3b8;) and the rotational angle speed &#x3c9; of the rotor, based on the output signal of the rotation detection circuit <b>2</b>. The magnetic pole position is set in the direction of the N pole of the permanent magnet provided in the rotor. The rotation detection unit <b>31</b> may estimate the rotational angle (the magnetic pole position) without using the rotation sensor, based on current information which are obtained by superimposing a harmonic wave component on the current command value (so-called, sensorless system).</p><heading id="h-0017" level="2">&#x3c;Current Detection Unit <b>32</b>&#x3e;</heading><p id="p-0055" num="0054">The current detection unit <b>32</b> detects the currents Iur, Ivr, Iwr which flow into the three-phase windings, based on the output signal of the current detection circuit <b>5</b>. The current detection unit <b>32</b> divides the potential difference between both ends of the shunt resistance of each phase, by a resistance value of shunt resistance, and detects the current Iur, Ivr, Iwr of the winding of each phase.</p><p id="p-0056" num="0055">Since the current detection circuit <b>5</b> detects the current which flows through the negative electrode side switching device, the current detection unit <b>32</b> detects current at the timing when the negative electrode side switching device become ON. In the PWM control unit <b>37</b> described below, the negative electrode side switching device is turned on at every the carrier period Tc. Accordingly, the current detection unit <b>32</b> detects the currents Iur, Ivr, Iwr of the three-phase windings, based on the output signal of the current detection circuit <b>5</b>, at a current detection period TIdt (=A&#xd7;Tc) which is a first natural number A times of the carrier period Tc and at which the negative electrode side switching device is turned on. In the present embodiment, the current detection circuit <b>5</b> detects the currents at the timing when the carrier wave CA becomes the peak point of mountain of every the current detection period TIdt.</p><heading id="h-0018" level="2">&#x3c;Current Coordinate Conversion Unit <b>33</b>&#x3e;</heading><p id="p-0057" num="0056">The current coordinate conversion unit <b>33</b> converts the current detection values of the three-phase windings Iur, Ivr, Iwr into a current detection value of d-axis Idr and a current detection value of q-axis Iqr on a coordinate system of d-axis and q-axis at every current detection. The coordinate system of d-axis and q-axis is a two-axis rotating coordinate system which rotates synchronizing with the magnetic pole position of the rotor. The d-axis is defined in the direction of the magnetic pole position &#x3b8; (N pole), and the q-axis is defined in the direction advanced to the d-axis by 90 degrees in the electrical angle. Specifically, the current coordinate conversion unit <b>33</b> converts the current detection values of three-phase Iur, Ivr, Iwr into the current detection value of d-axis Idr and the current detection value of q-axis Iqr, by performing a three-phase/two-phase conversion and a rotating coordinate conversion based on the magnetic pole position &#x3b8;.</p><heading id="h-0019" level="2">&#x3c;Current Addition Processing Unit <b>34</b>&#x3e;</heading><p id="p-0058" num="0057">As described in detail later, the current addition processing unit <b>34</b> calculates current detection values after current addition processing, by performing a current addition processing to the current detection value at every current detection. In the present embodiment, the current addition processing unit <b>34</b> calculates current detection values of d-axis and q-axis after current addition processing Idr*, Iqr*, by performing the current addition processing to the current detection values of d-axis and q-axis Idr, Iqr.</p><heading id="h-0020" level="2">&#x3c;Current Command Value Calculation Unit <b>35</b>&#x3e;</heading><p id="p-0059" num="0058">The current command value calculation unit <b>35</b> calculates a current command value of d-axis Ido and a current command value of q-axis Iqo. In the present embodiment, the current command value calculation unit <b>35</b> calculates the current command values of d-axis and q-axis Ido, Iqo, based on a torque command value Tref, the power source voltage Vdc, the rotational angle speed &#x3c9;, and the like. According to well-known current vector control methods, such as the maximum torque/current control, the maximum torque voltage control, the magnetic flux weakening control, and the Id=0 control, the current command values of d-axis and q-axis Ido, Iqo are calculated. For example, when the Id=0 control is performed, the current command value of d-axis Ido is set to zero (Ido=0), and the current command value of q-axis Iqo is set to a value obtained by multiplying a conversion coefficient to the torque command value Tref. The torque command value Tref may be calculated in the controller <b>6</b>, and may be transmitted from an external controller.</p><heading id="h-0021" level="2">&#x3c;Voltage Command Value Calculation Unit <b>36</b>&#x3e;</heading><p id="p-0060" num="0059">The voltage command value calculation unit <b>36</b> changes the voltage command values of three-phase Vuo, Vvo, Vwo at every current detection so that current detection values approach the current command values. In the present embodiment, the voltage command value calculation unit <b>36</b> is provided with a dq-axis voltage command value calculation unit <b>361</b>, a voltage coordinate conversion unit <b>362</b>, and a modulation unit <b>363</b>.</p><p id="p-0061" num="0060">The dq-axis voltage command value calculation unit <b>361</b> performs a current feedback control that changes a voltage command value of d-axis Vdo and a voltage command value of q-axis Vqo by PI control or the like, so that the current detection value of d-axis after current addition processing Idr* approaches the current command value of d-axis Ido, and the current detection value of q-axis after current addition processing Iqr* approaches the current command value of q-axis Iqo. Feedforward control for non-interfering between the d-axis current and the q-axis current and the like may be performed.</p><p id="p-0062" num="0061">The voltage coordinate conversion unit <b>362</b> converts the voltage command values of dq-axis Vdo, Vqo into voltage command values of three-phase after coordinate conversion Vuoc, Vvoc, Vwoc, by performing a fixed coordinate conversion and a two-phase/three-phase conversion based on the rotational angle &#x3b8;. This voltage command values of three-phase after coordinate conversion Vuoc, Vvoc, Vwoc become sine waves.</p><p id="p-0063" num="0062">The modulation unit <b>363</b> calculates the final voltage command values of three-phase Vuo, Vvo, Vwo by adding modulation to the voltage command values of three-phase after coordinate conversion Vuoc, Vvoc, Vwoc of sine waves. The modulation unit <b>363</b> adds an amplitude reduction modulation which reduces the amplitudes of the voltage command values of three-phase, to the voltage command values of three-phase after coordinate conversion, while maintaining the line voltages of the voltage command values of three-phase.</p><p id="p-0064" num="0063">In the present embodiment, the modulation unit <b>363</b> adds the amplitude reduction modulation which offsets the voltage command values of three-phase equally so that an average value of the voltage command values of three-phase becomes less than a vibration center value of carrier wave CA. As shown in the next equation, the modulation unit <b>363</b> determines the minimum value Vmin of the voltage command values of three-phase after coordinate conversion Vuoc, Vvoc, Vwoc; calculates an offset voltage Voff by adding the half value of the power source voltage Vdc to the minimum value Vmin; and calculates the voltage command values of three-phase Vuo, Vvo, Vwo by subtracting the offset voltage Voff from the voltage command values of three-phase after coordinate conversion Vuoc, Vvoc, Vwoc.</p><p id="p-0065" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>V </i>min=MIN(<i>Vuoc,Vvoc,Vwoc</i>)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0066" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>V</i>off=0.5<i>&#xd7;Vdc+V </i>min<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0067" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Vuo=Vuoc&#x2212;V</i>off<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0068" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Vvo=Vvoc&#x2212;V</i>off<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0069" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Vwo=Vwoc&#x2212;V</i>off&#x2003;&#x2003;(1)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0070" num="0064">A behavior of the amplitude reduction modulation of the equation (1) is shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>. The voltage command values of three-phase after coordinate conversion Vuoc, Vvoc, Vwoc are shown in the upper row graph. The voltage command values of three-phase after coordinate conversion Vuoc, Vvoc, Vwoc exceed a range from &#x2212;Vdc/2 to +Vdc/2, and the voltage saturation occurs. On the other hand, in the voltage command values of three-phase after amplitude reduction modulation Vuo, Vvo, Vwo, the voltage command value of a phase whose voltage is the minimum is offset so as to coincide with &#x2212;Vdc/2, and occurrence of the voltage saturation can be prevented.</p><heading id="h-0022" level="2">&#x3c;Difference in Torque Fluctuation According to Modulation Method&#x3e;</heading><p id="p-0071" num="0065"><figref idref="DRAWINGS">FIG. <b>4</b></figref> shows a behavior of the output torque of the comparative example in which the voltage command value of a phase whose voltage is the maximum is offset so as to coincide with +Vdc/2 like the patent document 1. On the other hand, <figref idref="DRAWINGS">FIG. <b>5</b></figref> shows a behavior of the output torque of the present embodiment in which the voltage command value of a phase whose voltage is the minimum is offset so as to coincide with &#x2212;Vdc/2. In <figref idref="DRAWINGS">FIG. <b>4</b></figref> and <figref idref="DRAWINGS">FIG. <b>5</b></figref>, the upper row graph shows the voltage command values of three-phase after modulation Vuo, Vvo, Vwo. The middle graph shows the three-phase currents Iu, Iv, Iw which flow into three-phase winding. The lower row graph shows the output torque of AC rotary machine <b>1</b>.</p><p id="p-0072" num="0066">In the comparative example of <figref idref="DRAWINGS">FIG. <b>4</b></figref> and the present embodiment of <figref idref="DRAWINGS">FIG. <b>5</b></figref>, the third order ripple component is superimposed on the output torque. However, the amplitude of the third order ripple component of the comparative example of <figref idref="DRAWINGS">FIG. <b>4</b></figref> becomes about three times of the amplitude of the present embodiment. This is because, in the inverter in which the shunt resistance is connected in series to the negative electrode side switching device like the present embodiment, the voltage drop in the inverter when the negative electrode side switching device is turned on becomes larger than the voltage drop in the inverter when the positive electrode side switching device is turned on, and both become unbalance. Although detailed explanation is omitted, due to this unbalance, as a result, the amplitude of the third order ripple component becomes larger in the comparative example like the patent document 1. Accordingly, the modulation method of the present embodiment is desirable. However, as described later, in the modulation method of the present embodiment, there is the case where the on period of the negative electrode side switching device becomes short, and the current detection error due to ringing is caused. Accordingly, its countermeasure is taken by the current addition processing.</p><heading id="h-0023" level="2">&#x3c;PWM Control Unit <b>37</b>&#x3e;</heading><p id="p-0073" num="0067">The PWM control unit <b>37</b> controls on/off switching devices by comparing each of the voltage command values of three-phase Vuo, Vvo, Vwo and the carrier wave CA which vibrates at the carrier period Tc. The carrier wave CA is a triangular wave which vibrates centering on 0 at the carrier period Tc with the amplitude of half value Vdc/2 of the power source voltage.</p><p id="p-0074" num="0068">As shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, about each phase, the PWM control unit <b>37</b> turns on the switching signal GP of the positive electrode side switching device (in this example, 1) and turns on the positive electrode side switching device when carrier wave CA is less than voltage command value, and turns off the switching signal GP of the positive electrode side switching device (in this example, 0) and turns off the positive electrode side switching device when the carrier wave CA exceeds the voltage command value. On the other hand, about each phase, the PWM control unit <b>37</b> turns off the switching signal GN of the negative electrode side switching device (in this example, 0) and turns off the negative electrode side switching device when the carrier wave CA is less than voltage command value, and turns on the switching signal GN of the negative electrode side switching device (in this example, 1) and turns on the negative electrode side switching device when the carrier wave CA exceeds the voltage command value. About each phase, between the on period of the positive electrode side switching device and the on period of the negative electrode side switching device, the short circuit prevention period (dead time) which turns off both of the positive electrode side and the negative electrode side switching device may be provided.</p><p id="p-0075" num="0069">As shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, in the interval D centering on the peak point of mountain of the carrier wave CA, the negative electrode side switching signals GNu, GNv, GNw of all three-phases are turned on. In this interval D, the currents which flow into the three-phase windings can be detected by the current detection circuit <b>5</b>. In the present embodiment, as mentioned above, the current detection unit <b>32</b> detects the currents at the timing of the peak point of mountain of the carrier wave CA. In the example of <figref idref="DRAWINGS">FIG. <b>6</b></figref>, the first natural number A is set to 1, the current detection period TIdt is set to one time of the carrier period Tc, and the currents are detected at the peak point of mountain of all the carrier wave CA.</p><p id="p-0076" num="0070">Alternatively, as shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref>, the first natural number A is set to 2, the current detection period TIdt is set to two times of the carrier period Tc, and the currents may be detected at the peak point of mountain of every other carrier waves CA.</p><heading id="h-0024" level="2">&#x3c;Detection Error of Current Due to Ringing&#x3e;</heading><p id="p-0077" num="0071">As shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, immediately after turning on the switching device, the phenomenon called ringing in which current vibrates occurs. Ringing which occurred in any one phase also affects currents of other phases. For example, ringing occurs for several microseconds after turning on the switching device. As the voltage command value becomes large, the on period of the negative electrode side switching device becomes short. If the on period becomes shorter than the double value of the occurrence period of ringing, the detection timing of current overlaps with ringing and the detection error occurs in the current detection value of each phase.</p><p id="p-0078" num="0072">For example, in the example of <figref idref="DRAWINGS">FIG. <b>9</b></figref>, the voltage command value Vuo of U phase becomes a large value close to the half value Vdc/2 of the power source voltage. As a result, the on period of the negative electrode side switching signal GNu of U phase becomes short, and the detection error due to ringing occurs in the current detection value of U phase Iur. Also in the current detection values of other V phase and W phase Ivr, Iwr, the detection error occurs due to the influence of ringing of the current of U phase.</p><p id="p-0079" num="0073">When the on period of the negative electrode side switching device of any one phase is shorter than a preliminarily set threshold value (for example, 5 microseconds), the current detection unit <b>32</b> may calculate the current detection value of one phase in which the on period became shorter than the threshold value, based on the current detection value of other two phases. For example, when the on period of the negative electrode side switching signal GNu of U phase is shorter than the threshold value, the current detection value of U phase Iur may be calculated by Iur&#x2212;Ivr&#x2212;Iwr. In this case, since the detection error due to ringing occurs also in the current detection values of other two phases, the detection error due to ringing cannot be zero.</p><p id="p-0080" num="0074"><figref idref="DRAWINGS">FIG. <b>10</b></figref> shows the control behavior of the comparative example which does not perform the current addition processing by the current addition processing unit <b>34</b>. As the rotational angle speed increases, the amplitudes of the voltage command values of three-phase increase. Until the time t<b>01</b>, the amplitude maximum value of the voltage command values of three-phase is lower than the half value Vdc/2 of the power source voltage, the current detection error due to the influence of ringing does not occur, and the noise component is hardly generated in the current detection value of q-axis Iqr. From the time t<b>01</b> to the time t<b>02</b>, as the amplitude maximum values of the voltage command values of three-phase approaches the half value Vdc/2 of the power source voltage, the current detection error due to the influence of ringing increases gradually, and the noise component of the current detection value of q-axis Iqr increases gradually.</p><p id="p-0081" num="0075">After the time t<b>03</b>, in order to observe the generation behavior of noise, the increase in the rotational angle speed is stopped and the constant condition is set. The figure that expanded the predetermined period after the time t<b>03</b> is shown in the down side. As shown in this figure, the maximum value of the voltage command values of three-phase after modulation reaches the half value Vdc/2 of the power source voltage, the period when the on period of the negative electrode side switching device becomes short occurs, and the current detection error due to ringing occurs. As a result, the noise component of the current detection value of q-axis Iqr obtained by performing the coordinate conversion of the current detection values of three-phase becomes large. Although not shown, the noise component of the current detection value of d-axis Idr becomes large similarly.</p><p id="p-0082" num="0076">Then, if the current feedback control is performed using the current detection values of d-axis and q-axis Idr, Iqr on which the noise component is superimposed, a noise component is superimposed on the voltage command values of three-phase Vuo, Vvo, Vwo, and a ripple component is superimposed on the output torque of AC rotary machine <b>1</b>.</p><p id="p-0083" num="0077">The next (A) and (B) can be considered as countermeasures to this noise component of the current detection value due to ringing. (A) Lowering the response speed of the current feedback control of dq-axis, lowering the sensitivity to the noise component of the current detection values of d-axis and q-axis Idr, Iqr, and preventing the noise component from being superimposed on the voltage command values of three-phase. (B) As shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, in opposition to the present embodiment, adding the modulation which coincides the voltage command value of the maximum phase of the voltage command values of three-phase after coordinate conversion Vuoc, Vvoc, Vwoc with the half value Vdc/2 of the power source voltage.</p><p id="p-0084" num="0078">In the countermeasure (A), since the following performance of the current feedback control will be deteriorated if the response speed of the current feedback control is lowered, it cannot be selected. In the countermeasure (B), in the period when the voltage command values of three-phase coincides with Vdc/2, since the negative electrode side switching device always becomes OFF, ringing does not occur. However, as mentioned above, in the inverter in which the shunt resistance is connected in series to the negative electrode side switching device, since the third torque ripple component becomes large, it cannot be selected.</p><heading id="h-0025" level="2">&#x3c;Mechanical Resonance Period of AC Rotary Machine, and Noise Component of Current Detection Value&#x3e;</heading><p id="p-0085" num="0079">Accordingly, in the present embodiment, not the countermeasures (A) and (B) but the current addition processing of the current addition processing unit <b>34</b> is performed. <figref idref="DRAWINGS">FIG. <b>11</b></figref> shows the measurement result of sensitivity characteristic of the noise of AC rotary machine <b>1</b> with respect to the noise component of current. As the gain of vertical axis becomes large, the noise of AC rotary machine <b>1</b> becomes large with respect to the amplitude of the noise component of current. In this AC rotary machine <b>1</b>, the peak exists in vicinity of 2500 Hz. This is because the mechanical resonance frequency of the frame of AC rotary machine <b>1</b> is the vicinity of 2500 Hz (the resonance period Tr is 400 microseconds).</p><p id="p-0086" num="0080">The mechanical resonance of AC rotary machine <b>1</b> occurs in the frame of AC rotary machine <b>1</b>, or the power pack which integrated the AC rotary machine <b>1</b>, the inverter <b>4</b>, and the controller <b>6</b>, or the power apparatus which includes the frame or the power pack, and the gear mechanism, or the like.</p><p id="p-0087" num="0081">Out of various frequency included in the noise component of the current detection value, the noise component of the frequency close to the mechanical resonance frequency of AC rotary machine <b>1</b> becomes the noise of AC rotary machine <b>1</b> easily. Accordingly, it is desired to reduce the component of the mechanical resonance period Tr of AC rotary machine <b>1</b> included in the current detection value.</p><heading id="h-0026" level="2">&#x3c;Current Addition Processing&#x3e;</heading><p id="p-0088" num="0082">The principle of the current addition processing will be explained. <figref idref="DRAWINGS">FIG. <b>12</b></figref> shows the schematic waveform of the component of the resonance period Tr included in the current detection value. The phase of the component of the resonance period Tr of the current detection value is reversed at the half period Tr/2 of the resonance period. Accordingly, the component of the resonance period Tr of the current detection value can be canceled by adding the current detection value detected at this time and the current detection value detected before the half period Tr/2 of the resonance period.</p><p id="p-0089" num="0083">Then, the current addition processing unit <b>34</b> calculates current detection values after current addition processing, by performing the current addition processing which adds the current detection values detected at this time and the current detection values detected before the addition period Tadd (=B&#xd7;TIdt) which is a second natural number B times of the current detection period TIdt. The second natural number B is set to a natural number that the addition period Tadd becomes the closest to the half period Tr/2 of the mechanical resonance period of AC rotary machine <b>1</b>.</p><p id="p-0090" num="0084">Ideally, although the second natural number B may be set to a natural number that the addition period Tadd coincides with the half period Tr/2 of the resonance period, it is necessary to change the carrier period Tc if it does not coincide. As described above, if the second natural number B is set to a natural number that the addition period Tadd becomes the closest to the half period Tr/2 of the resonance period, according to the closeness between the addition period Tadd and the half period Tr/2 of the resonance period, the reduction effect of the component of the resonance period Tr of the current detection value can be obtained.</p><p id="p-0091" num="0085">In order to obtain the reduction effect, as shown in the next equation, the addition period Tadd may be set between 1/4 period of the resonance period Tr/4 and 3/4 period of the resonance period Trx3/4.</p><p id="p-0092" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Tr/</i>4<i>&#x3c;T</i>add&#x3c;<i>Tr&#xd7;</i>3/4&#x2003;&#x2003;(2)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0093" num="0086">For example, as shown in the next equation, if the resonance period Tr is 400 microseconds, the carrier period Tc is 50 microseconds, the first natural number A is 2, and the current detection period TIdt is 100 microseconds, the second natural number B is set to 2, and the addition period Tadd is set to 200 microseconds which coincide with the half period 200 microseconds of the resonance period. The addition period Tadd may not coincide with the half period Tr/2 of the resonance period.</p><p id="p-0094" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Tr=</i>400 microseconds<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0095" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Tc=</i>50 microseconds<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0096" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>TIdt=A&#xd7;Tc=</i>2&#xd7;50 microsecond=100 microseconds<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0097" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>T</i>add=<i>B&#xd7;TIdt=</i>2&#xd7;100 microsecond=200 microseconds&#x2003;&#x2003;(3)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0098" num="0087">In the present embodiment, the current addition processing unit <b>34</b> calculates current detection values of d-axis and q-axis after current addition processing Idr*, Iqr*, by performing the current addition processing which adds the current detection values of d-axis and q-axis Idr, Iqr calculated at this time current detection and the current detection values of d-axis and q-axis Idr, Iqr calculated at the current detection before the addition period Tadd, respectively.</p><p id="p-0099" num="0088">In the present embodiment, as shown in the next equation, the current addition processing unit <b>34</b> calculates an addition value of d-axis current SIdr, by adding the current detection value of d-axis Idr calculated at this time current detection and the current detection value of d-axis Idr calculated at the current detection before the addition period Tadd, and calculates the current detection value of d-axis after current addition processing Idr*, by multiplying 0.5 to the addition value of d-axis current SIdr. As shown in the next equation, the current addition processing unit <b>34</b> calculates an addition value of q-axis current SIqr, by adding the current detection value of q-axis Iqr calculated at this time current detection and the current detection value of q-axis Iqr calculated at the current detection before the addition period Tadd, and calculates the current detection value of q-axis after current addition processing Iqr*, by multiplying 0.5 to the addition value of q-axis current SIqr.</p><p id="p-0100" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>SIdr</i>(<i>t</i>)=<i>Idr</i>(<i>t</i>)+<i>Idr</i>(<i>t&#x2212;T</i>add)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0101" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Idr</i>*(<i>t</i>)=0.5<i>&#xd7;SIdr</i>(<i>t</i>)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0102" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>SIqr</i>(<i>t</i>)=<i>Iqr</i>(<i>t</i>)+<i>Iqr</i>(<i>t&#x2212;T</i>add)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0103" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Iqr</i>*(<i>t</i>)=0.5<i>&#xd7;SIqr</i>(<i>t</i>)&#x2003;&#x2003;(4)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0104" num="0089">Although the component of the double period of the addition period Tadd is canceled by the current addition processing, components other than the double period of the addition period Tadd double. Accordingly, by multiplying 0.5 to the addition value, the current detection values of d-axis and q-axis Idr*, Iqr* in which the component of the double period of the addition period Tadd set corresponding to the resonance period Tr was reduced can be calculated.</p><p id="p-0105" num="0090">In the present embodiment, as shown in <figref idref="DRAWINGS">FIG. <b>13</b></figref>, the current addition processing unit <b>34</b> is provided with a delay device of d-axis current <b>34</b><i>a</i>, an adder of d-axis current <b>34</b><i>b</i>, a gain multiplier of d-axis current <b>34</b><i>c</i>, a delay device of q-axis current <b>34</b><i>d</i>, an adder of q-axis current <b>34</b><i>e</i>, and a gain multiplier of q-axis current <b>34</b><i>f</i>. The current addition processing unit <b>34</b> is a discrete controller which operates every current detection period TIdt, and the calculation period is the current detection period TIdt.</p><p id="p-0106" num="0091">The current detection value of d-axis Idr detected at this time calculation period (the current detection period TIdt) is inputted into the delay device of d-axis current <b>34</b><i>a </i>and the adder of d-axis current <b>34</b><i>b</i>. The delay device of d-axis current <b>34</b><i>a </i>delays the inputted current detection value of d-axis Idr by the addition period Tadd and outputs. The delay device of d-axis current <b>34</b><i>a </i>is provided with delay devices of the second natural number B, and outputs the current detection value of d-axis Idr inputted before the calculation periods (current detection period TIdt) of the second natural number B, at this time calculation period. The adder of d-axis current <b>34</b><i>b </i>adds the current detection value of d-axis Idr detected at this time calculation period, and the current detection value of d-axis Idr outputted from the delay device of d-axis current <b>34</b><i>a </i>and detected before the addition period Tadd, and outputs the addition value of d-axis current SIdr. The gain multiplier of d-axis current <b>34</b><i>c </i>multiplies the gain 0.5 to the addition value of d-axis current SIdr, and outputs the current detection value of d-axis after current addition processing Idr*.</p><p id="p-0107" num="0092">The current detection value of q-axis Iqr detected at this time calculation period (the current detection period TIdt) is inputted into the delay device of q-axis current <b>34</b><i>d </i>and the adder of q-axis current <b>34</b><i>e</i>. The delay device of q-axis current <b>34</b><i>d </i>delays the inputted current detection value of q-axis Iqr by the addition period Tadd and outputs. The delay device of q-axis current <b>34</b><i>d </i>is provided with delay devices of the second natural number B, and outputs the current detection value of q-axis Iqr inputted before the calculation periods (current detection period TIdt) of the second natural number B, at this time calculation period. The adder of q-axis current <b>34</b><i>e </i>adds the current detection value of q-axis Iqr detected at this time calculation period, and the current detection value of q-axis Iqr outputted from the delay device of q-axis current <b>34</b><i>d </i>and detected before the addition period Tadd, and outputs the addition value of q-axis current SIqr. The gain multiplier of q-axis current <b>34</b><i>f </i>multiplies the gain 0.5 to the addition value of q-axis current SIqr, and outputs the current detection value of q-axis after current addition processing Iqr*.</p><heading id="h-0027" level="1">2. Embodiment 2</heading><p id="p-0108" num="0093">The control apparatus <b>10</b> according to Embodiment 2 will be explained. The explanation for constituent parts the same as those in Embodiment 1 will be omitted. The basic configuration of the AC rotary machine <b>1</b> and the control apparatus <b>10</b> according to the present embodiment is the same as that of Embodiment 1. Embodiment 2 is different from Embodiment 1 in processing of the current addition processing.</p><p id="p-0109" num="0094">In Embodiment 1, the current addition processing is always performed. However, in the present embodiment, only when it is necessary, the current addition processing is performed.</p><p id="p-0110" num="0095">The current addition processing unit <b>34</b> calculates the voltage command values of three-phase based on the current detection values after current addition processing, when the on period of the negative electrode side switching device of any phase in the carrier period Tc is less than a preliminarily set threshold value T_th; and calculates the voltage command values of three-phase based on the current detection value detected at this time, when the on period of the negative electrode side switching device of any phase in the carrier period Tc is not less than the threshold value T_th.</p><heading id="h-0028" level="2">&#x3c;Flowchart&#x3e;</heading><p id="p-0111" num="0096">For example, the current addition processing unit <b>34</b> is configured as the flowchart shown in <figref idref="DRAWINGS">FIG. <b>14</b></figref>. In the step S<b>21</b>, as shown in the next equation, the current addition processing unit <b>34</b> determines the minimum value Ton_min in the on periods T_Gnu, T_Gnv, T_Gnw of the negative electrode side switching devices of respective phases of three-phase in the carrier period Tc.</p><p id="p-0112" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>T</i>on_min=MIN(<i>T</i>_<i>Gnu,T</i>_<i>Gnv,T</i>_<i>Gnw</i>)&#x2003;&#x2003;(5)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0113" num="0097">For example, the current addition processing unit <b>34</b> calculates the on periods T_Gnu, T_Gnv, T_Gnw of the negative electrode side switching devices of respective phases, based on the voltage command values of three-phase Vuo, Vvo, Vwo, and the power source voltage Vdc.</p><p id="p-0114" num="0098">Then, in the step S<b>22</b>, the current addition processing unit <b>34</b> determines whether the minimum value Ton_min is less than the threshold value T_th, when it is less, it advances to the step S<b>23</b>, and when it is not less, it advances to the step S<b>24</b>. In the step S<b>23</b>, the current addition processing unit <b>34</b> outputs the current detection values of d-axis and q-axis after current addition processing Idr*, Iqr* calculated similar to Embodiment 1, to the voltage command value calculation unit <b>36</b>. On the other hand, in the step S<b>24</b>, the current addition processing unit <b>34</b> outputs the current detection values of d-axis and q-axis Idr, Iqr to which the current addition processing is not performed, to the voltage command value calculation unit <b>36</b>.</p><p id="p-0115" num="0099">For example, if the carrier period Tc is 50 microseconds, the threshold value T_th is set in a range from 1.5 microseconds to 9.5 microseconds.</p><p id="p-0116" num="0100">In this way, when the on period of the negative electrode side switching device of any one phase becomes shorter than the threshold value T_th and the possibility that ringing occurs at the current detection timing is high, the current addition processing is performed, the component of the resonance period Tr is reduced, and noise is reduced. On the other hand, when the on periods of the negative electrode side switching devices of all phases become longer than the threshold value T_th, the possibility that ringing occurs at the current detection timing is low, and the disturbance of the current detection value is small. Accordingly, the current addition processing adding the past current detection value is not performed, and the phase of the current detection value can be prevented from being delayed.</p><heading id="h-0029" level="2">&#x3c;Block Diagram&#x3e;</heading><p id="p-0117" num="0101">If the current addition processing unit <b>34</b> is shown by the block diagram, it will become as <figref idref="DRAWINGS">FIG. <b>15</b></figref>. The current addition processing unit <b>34</b> is provided with a switching determination device <b>34</b><i>g</i>, a switching device of d-axis current <b>34</b><i>h</i>, and a switching device of q-axis current <b>34</b><i>i</i>, in addition to the delay device of d-axis current <b>34</b><i>a </i>to the gain multiplier of q-axis current <b>34</b><i>f </i>shown in <figref idref="DRAWINGS">FIG. <b>13</b></figref>. Since the delay device of d-axis current <b>34</b><i>a </i>to the gain multiplier of q-axis current <b>34</b><i>f </i>are similar to Embodiment 1, explanation is omitted.</p><p id="p-0118" num="0102">The switching determination device <b>34</b><i>g </i>determines whether the on period of the negative electrode side switching device of any phase in the carrier period Tc is less than the threshold value T_th, by performing the processing similar to the step S<b>21</b> and the step S<b>22</b> of <figref idref="DRAWINGS">FIG. <b>14</b></figref>.</p><p id="p-0119" num="0103">When the switching determination device <b>34</b><i>g </i>determines that it is less than the threshold value T_th, the switching device of d-axis current <b>34</b><i>h </i>outputs the current detection value of d-axis after current addition processing Idr* outputted from the gain multiplier of d-axis current <b>34</b><i>c</i>. When the switching determination device <b>34</b><i>g </i>determines that it is not less than the threshold value T_th, the switching device of d-axis current <b>34</b><i>h </i>outputs the current detection value of d-axis Idr detected at this time calculation period. The output value of the switching device of d-axis current <b>34</b><i>h </i>is inputted into the voltage command value calculation unit <b>36</b>.</p><p id="p-0120" num="0104">When the switching determination device <b>34</b><i>g </i>determines that it is less than the threshold value T_th, the switching device of q-axis current <b>34</b><i>i </i>outputs the current detection value of q-axis after current addition processing Iqr* outputted from the gain multiplier of q-axis current <b>34</b><i>f</i>. When the switching determination device <b>34</b><i>g </i>determines that it is not less than the threshold value T_th, the switching device of q-axis current <b>34</b><i>i </i>outputs the current detection value of q-axis Iqr detected at this time calculation period. The output value of the switching device of q-axis current <b>34</b><i>i </i>is inputted into the voltage command value calculation unit <b>36</b>.</p><heading id="h-0030" level="1">3. Embodiment 3</heading><p id="p-0121" num="0105">The control apparatus <b>10</b> according to Embodiment 3 will be explained. The explanation for constituent parts the same as those in Embodiment 1 will be omitted. The basic configuration of the AC rotary machine <b>1</b> and the control apparatus <b>10</b> according to the present embodiment is the same as that of Embodiment 1. Embodiment 3 is different from Embodiment 1 in processing of the current addition processing.</p><p id="p-0122" num="0106">When the addition period Tadd does not coincide with the half period Tr/2 of the resonance period, the component of the resonance period Tr may not be sufficiently reduced from the current detection value, by the method of Embodiment 1. For example, <figref idref="DRAWINGS">FIG. <b>16</b></figref> shows the schematic waveform of the component of the resonance period Tr included in the current detection value. In this example, the mechanical resonance period Tr of AC rotary machine <b>1</b> is 330 microseconds, and the current detection period TIdt is 100 microseconds. The second natural number B is set to 2 so that the addition period Tadd becomes the closest to the half periods 165 microseconds of the resonance period. The addition period Tadd is set to 200 microseconds which is two times of the current detection period TIdt. The addition period Tadd does not coincide with the half period Tr/2 of the resonance period, and its difference is 35 microseconds and becomes large.</p><p id="p-0123" num="0107">Then, in the present embodiment, the current addition processing unit <b>34</b> calculates the current detection values after current addition processing, by performing a current addition processing which adds the current detection value detected at this time, the current detection value detected before the addition period Tadd, and the current detection value detected before an additional addition period Taddad which is a third natural number C times of the current detection period TIdt. The third natural number C is set to a natural number that the additional addition period Taddad becomes the second closest to the half period Tr/2 of the mechanical resonance period of AC rotary machine.</p><p id="p-0124" num="0108">In the example of <figref idref="DRAWINGS">FIG. <b>16</b></figref>, the third natural number C is set to 1 so that the additional addition period Taddad becomes the second closest to the half periods 165 microseconds of the resonance period, and the additional addition period Taddad is set to 100 microseconds which is one time of the current detection period TIdt.</p><p id="p-0125" num="0109">In this way, even if the addition period Tadd does not coincide with the half period Tr/2 of the resonance period, the half period Tr/2 of the resonance period can be interposed between the addition period Tadd and the additional addition period Taddad. By adding the current detection value detected before the addition period Tadd and the current detection value detected before the additional addition period Taddad, the component of the resonance period Tr of the current detection value can be canceled more effectively.</p><p id="p-0126" num="0110">In the present embodiment, as shown in the next equation, the current addition processing unit <b>34</b> calculates an addition value of d-axis current SIdr, by adding the current detection value of d-axis Idr calculated at this time current detection, the current detection value of d-axis Idr calculated at the current detection before the addition period Tadd, and a value obtained by multiplying a gain Kad to the current detection value of d-axis Idr calculated at the current detection before the additional addition period Taddad; and calculates the current detection value of d-axis after current addition processing Idr* by multiplying 1/(2+Kad) to the addition value of d-axis current SIdr. As shown in the next equation, the current addition processing unit <b>34</b> calculates the addition value of q-axis current SIqr, by adding the current detection value of q-axis Iqr calculated at this time current detection, the current detection value of q-axis Iqr calculated at the current detection before the addition period Tadd, and a value obtained by multiplying the gain Kad to the current detection value of q-axis Iqr calculated at the current detection before the additional addition period Taddad; and calculates the current detection value of q-axis after current addition processing Iqr* by multiplying 1/(2+Kad) to the addition value of q-axis current SIqr. The gain Kad is adjusted so that the cancellation effect becomes good.</p><p id="p-0127" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>SIdr</i>(<i>t</i>)=<i>Idr</i>(<i>t</i>)+<i>Idr</i>(<i>t&#x2212;T</i>add)+<i>Kad&#xd7;Idr</i>(<i>t&#x2212;Taddad</i>)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0128" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Idr</i>*(<i>t</i>)=1/(2<i>+Kad</i>)&#xd7;<i>SIdr</i>(<i>t</i>)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0129" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>SIqr</i>(<i>t</i>)=<i>Iqr</i>(<i>t</i>)+<i>Iqr</i>(<i>t&#x2212;T</i>add)+<i>Kad&#xd7;Iqr</i>(<i>t&#x2212;Taddad</i>)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0130" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Iqr</i>*(<i>t</i>)=1/(2<i>+Kad</i>)&#xd7;<i>SIqr</i>(<i>t</i>)&#x2003;&#x2003;(6)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0131" num="0111">In the present embodiment, as shown in <figref idref="DRAWINGS">FIG. <b>17</b></figref>, the current addition processing unit <b>34</b> is provided with a delay device of d-axis current <b>34</b><i>j</i>, an additional delay device of d-axis current <b>34</b><i>k</i>, a gain multiplier of d-axis additional delay device <b>341</b>, a first adder of d-axis current <b>34</b><i>m</i>, a second adder of d-axis current <b>34</b><i>n</i>, a gain multiplier of d-axis current <b>34</b><i>o</i>, a delay device of q-axis current <b>34</b><i>p</i>, an additional delay device of q-axis current <b>34</b><i>q</i>, a gain multiplier of q-axis additional delay device <b>34</b><i>r</i>, a first adder of q-axis current <b>34</b><i>s</i>, a second adder of q-axis current <b>34</b><i>t</i>, and a gain multiplier of q-axis current <b>34</b><i>u</i>. The current addition processing unit <b>34</b> is a discrete controller which operates every current detection period TIdt, and the calculation period is the current detection period TIdt.</p><p id="p-0132" num="0112">The current detection value of d-axis Idr detected at this time calculation period (the current detection period TIdt) is inputted into the delay device of d-axis current <b>34</b><i>j</i>, the additional delay device of d-axis current <b>34</b><i>k</i>, and the first adder of d-axis current <b>34</b><i>m</i>. The delay device of d-axis current <b>34</b><i>j </i>delays the inputted current detection value of d-axis Idr by the addition period Tadd and outputs. The delay device of d-axis current <b>34</b><i>j </i>is provided with delay devices of the second natural number B, and outputs the current detection value of d-axis Idr inputted before the calculation periods (current detection period TIdt) of the second natural number B, at this time calculation period. The additional delay device of d-axis current <b>34</b><i>k </i>delays the inputted current detection value of d-axis Idr by the additional addition period Taddad and outputs. The additional delay device of d-axis current <b>34</b><i>k </i>is provided with delay devices of the third natural number C, and outputs the current detection value of d-axis Idr inputted before the calculation periods (current detection period TIdt) of the third natural number C, at this time calculation period. The gain multiplier of d-axis additional delay device <b>341</b> multiplies the gain Kad to the output value of the additional delay device of d-axis current <b>34</b><i>k</i>. The second adder of d-axis current <b>34</b><i>n </i>adds the output value of the delay device of d-axis current <b>34</b><i>j</i>, and the output value of the gain multiplier of d-axis additional delay device <b>341</b>. The first adder of d-axis current <b>34</b><i>m </i>adds the current detection value of d-axis Idr detected at this time calculation period, and the output value of the second adder of d-axis current <b>34</b><i>n</i>, and outputs the addition value of d-axis current SIdr. The gain multiplier of d-axis current <b>34</b><i>o </i>multiplies the gain 1/(2+Kad) to the addition value of d-axis current SIdr, and outputs the current detection value of d-axis after current addition processing Idr*.</p><p id="p-0133" num="0113">The current detection value of q-axis Iqr detected at this time calculation period (the current detection period TIdt) is inputted into the delay device of q-axis current <b>34</b><i>p</i>, the additional delay device of q-axis current <b>34</b><i>q</i>, and the first adder of q-axis current <b>34</b><i>s</i>. The delay device of q-axis current <b>34</b><i>p </i>delays the inputted current detection value of q-axis Iqr by the addition period Tadd and outputs. The delay device of q-axis current <b>34</b><i>p </i>is provided with delay devices of the second natural number B, and outputs the current detection value of q-axis Iqr inputted before the calculation periods (current detection period TIdt) of the second natural number B at this time calculation period. The additional delay device of q-axis current <b>34</b><i>q </i>delays the inputted current detection value of q-axis Iqr by the additional addition period Taddad and outputs. The additional delay device of q-axis current <b>34</b><i>q </i>is provided with delay devices of the third natural number C, and outputs the current detection value of q-axis Iqr inputted before the calculation periods (current detection period TIdt) of the third natural number C, at this time calculation period. The gain multiplier of q-axis additional delay device <b>34</b><i>r </i>multiplies the gain Kad to the output value of the additional delay device of q-axis current <b>34</b><i>q</i>. The second adder of q-axis current <b>34</b><i>t </i>adds the output value of the delay device of q-axis current <b>34</b><i>p</i>, and the output value of the gain multiplier of q-axis additional delay device <b>34</b><i>r</i>. The first adder of q-axis current <b>34</b><i>s </i>adds the current detection value of q-axis Iqr detected at this time calculation period, and the output value of the second adder of q-axis current <b>34</b><i>t</i>, and outputs the addition value of q-axis current SIqr. The gain multiplier of q-axis current <b>34</b><i>u </i>multiplies the gain 1/(2+Kad) to the addition value of q-axis current SIqr, and outputs the current detection value of q-axis after current addition processing Iqr*.</p><heading id="h-0031" level="2">&#x3c;Reduction Effect of Noise&#x3e;</heading><p id="p-0134" num="0114">In the case of <figref idref="DRAWINGS">FIG. <b>16</b></figref> where the addition period Tadd does not coincide with the half period Tr/2 of the resonance period, the case where the gain Kad is set to 0 and the current detection value detected before the addition period Tadd is added, but the current detection value detected before the additional addition period Taddad is not added is explained. <figref idref="DRAWINGS">FIG. <b>18</b></figref> shows the transfer characteristic from the noise component included in the current detection value of q-axis Iqr to the noise component included in the q-axis current into which the actual winding currents of three-phase were converted on the coordinate system of d-axis and q-axis. The horizontal axis is a frequency of the noise component and the vertical axis is a gain. <figref idref="DRAWINGS">FIG. <b>18</b></figref> shows the transfer characteristic when performing the current addition processing of Kad=0, the transfer characteristic when not performing the current addition processing, and the transfer characteristic when not performing the current addition processing but decreasing the response speed of the current feedback control (the cutoff frequency is set to 1/10). When not decreasing the response speed, the cutoff frequency of the current feedback control is 600 Hz. When decreasing the response speed, the cutoff frequency of the current feedback control is 60 Hz. Since the current detection period TIdt is 100 microseconds, Nyquist frequency is 5000 Hz which is one half of the sampling frequency.</p><p id="p-0135" num="0115">At the frequency of 1200 Hz or higher, compared with the gain when not performing the current addition processing, the gain when performing the current addition processing of Kad=0 becomes lower, and the noise reduction performance is improved. At the frequency of 2500 Hz or higher, the gain when performing the current addition processing of Kad=0 is increasing from 0. At the frequency of 3000 Hz, although the gain when performing the current addition processing of Kad=0 becomes 0.03, the gain when decreasing the response speed of the current feedback control becomes about 0. Accordingly, the noise reduction performance when performing the current addition processing of Kad=0 is inferior to the noise reduction performance when decreasing the response speed of the current feedback control.</p><p id="p-0136" num="0116">The case where the gain Kad is set larger than 0 and the current detection value detected before the additional addition period Taddad is added in addition to the current detection value detected before the addition period Tadd is explained. <figref idref="DRAWINGS">FIG. <b>19</b></figref> shows the transfer characteristic when performing the current addition processing of Kad=0.25, the transfer characteristic when not performing the current addition processing, and the transfer characteristic when not performing the current addition processing but decreasing the response speed of the current feedback control (the cutoff frequency is set to 1/10).</p><p id="p-0137" num="0117">When performing the current addition processing of Kad=0.25, the increase in the gain can be suppressed at the frequency of 2500 Hz or higher. At the frequency of 3000 Hz, the gain becomes about 0, and the noise reduction performance equivalent to the case where the response speed of the current feedback control is decreased can be realized. Accordingly, even in the case where the addition period Tadd does not coincide with the half period Tr/2 of the resonance period, by adding the current detection value detected before the additional addition period Taddad which is the second closest to the half period Tr/2 of the resonance period, the reduction effect of the component of the resonance period Tr of the current detection value can be increased.</p><p id="p-0138" num="0118">If the gain Kad is set larger than 0.25, the noise reduction performance in the high frequency region is improved more than the transfer characteristic of <figref idref="DRAWINGS">FIG. <b>19</b></figref>, and if the gain Kad is set smaller than 0.25, the noise reduction performance in the low frequency region is improved more than the transfer characteristic of <figref idref="DRAWINGS">FIG. <b>19</b></figref>. Accordingly, the gain Kad may be adjusted according to the required noise reduction performance. Herein, although the cutoff frequency of the current feedback control is set to 600 Hz, it may be set less than or equal to the half of the resonance frequency. For example, if the resonance frequency is 3000 Hz (Tr=330 microseconds), the cutoff frequency should may be set less than or equal to 1500 Hz, and if the resonance frequency is 2500 Hz (Tr=400 microseconds), the cutoff frequency may be set less than or equal to 1250 Hz.</p><heading id="h-0032" level="1">4. Embodiment 4</heading><p id="p-0139" num="0119">The control apparatus <b>10</b> according to Embodiment 4 will be explained. The explanation for constituent parts the same as those in Embodiment 1 will be omitted. The basic configuration of the AC rotary machine <b>1</b> and the control apparatus <b>10</b> according to the present embodiment is the same as that of Embodiment 1. Embodiment 4 is different from Embodiment 1 in that the AC rotary machine <b>1</b> and the control apparatus <b>10</b> constitute an electric power steering apparatus <b>100</b>.</p><p id="p-0140" num="0120">In the above embodiments 1 to 3, application of the AC rotary machine <b>1</b> and the control apparatus <b>10</b> is not specified. In the present embodiment, the AC rotary machine <b>1</b> and the control apparatus constitute the electric power steering apparatus <b>100</b>. The electric power steering apparatus <b>100</b> is provided with the control apparatus for AC rotary machine <b>10</b>, the AC rotary machine <b>1</b>, and a driving force transmission mechanism <b>101</b> that transmits driving force of the AC rotary machine <b>1</b> to a steering device <b>102</b> of a vehicle.</p><p id="p-0141" num="0121"><figref idref="DRAWINGS">FIG. <b>20</b></figref> shows the schematic configuration diagram of the electric power steering apparatus <b>100</b> according to the present embodiment. The rotation axis of the rotor of the AC rotary machine <b>1</b> is connected with the steering device <b>102</b> of the wheels <b>103</b> via the driving force transmission mechanism <b>101</b>. For example, the electric power steering apparatus <b>100</b> is provided with a handle <b>104</b> that a driver rotates right and left, a shaft <b>105</b> that is connected with the handle <b>104</b> and transmits a steering wheel torque by the handle <b>104</b> to the steering device <b>102</b> of the wheels <b>103</b>, a torque sensor <b>106</b> that is mounted on the shaft <b>105</b> and detects a steering torque Ts by the handle <b>104</b>, and a driving force transmission mechanisms <b>101</b>, such as a worm gear mechanism, which connects the rotation axis of the AC rotary machine <b>1</b> with the shaft <b>105</b>. The output signal of the torque sensor <b>106</b> is inputted into the control apparatus <b>10</b> (the input circuit <b>92</b>).</p><p id="p-0142" num="0122">The current command value calculation unit <b>35</b> calculates a torque command value Tref, based on the steering torque Ts detected based on the output signal of the torque sensor <b>106</b>. Then, similar to Embodiment 1, the current command value calculation unit <b>35</b> calculates the current command values of d-axis and q-axis Ido, Iqo, based on the torque command value Tref, the power source voltage Vdc, the rotational angle speed &#x3c9;, and the like.</p><p id="p-0143" num="0123">The mechanical resonance of AC rotary machine <b>1</b> occurs in the frame of AC rotary machine <b>1</b>, or the power pack which integrated the AC rotary machine <b>1</b>, the inverter <b>4</b>, and the controller <b>6</b>, or the electric power steering apparatus <b>100</b> which includes the frame or the power pack, and the gear mechanism.</p><p id="p-0144" num="0124">For example, in the electric power steering apparatus <b>100</b>, the mechanical resonance period Tr of AC rotary machine <b>1</b> becomes in a range from 200 microseconds to 500 microseconds (the resonance frequency becomes in a range from 2 kHz to 5 kHz). Preferably, the resonance period Tr may become in a range from 300 microseconds to 400 microseconds (the resonance frequency may become in a range from 2.5 kHz to 3.3 kHz). In this case, the cutoff frequency of the current feedback control may be set in a range from 100 Hz to 1250 Hz. Preferably, the cutoff frequency may be set in a range from 200 Hz to 800 Hz. In this case, if the carrier period Tc is set less than or equal to 60 microseconds, the component of the resonance period Tr can be reduced well from the current detection value by the current addition processing, while maintaining the performance of the current feedback control, the noise generated from the AC rotary machine <b>1</b> can be reduced, and the electric power steering apparatus <b>100</b> with low noise can be obtained.</p><heading id="h-0033" level="1">Other Embodiments</heading><p id="p-0145" num="0125">Lastly, other embodiments of the present disclosure will be explained. Each of the configurations of embodiments to be explained below is not limited to be separately utilized but can be utilized in combination with the configurations of other embodiments as long as no discrepancy occurs.</p><p id="p-0146" num="0126">(1) In above-mentioned Embodiment 4, there was explained the case where the AC rotary machine <b>1</b> and the control apparatus <b>10</b> are used for the electric power steering apparatus <b>100</b>. However, the AC rotary machine <b>1</b> and the control apparatus <b>10</b> may be used for various kinds of applications, such as being used for the power device of wheel.</p><p id="p-0147" num="0127">(2) In above-mentioned Embodiment 2, there was explained the case where the current addition processing unit <b>34</b> switches and outputs the current detection values after current addition processing calculated by the current addition processing similar to Embodiment 1, and the current detection value detected at this time. However, the current addition processing unit <b>34</b> may switch and output the current detection values after current addition processing calculated by the current addition processing similar to Embodiment 3, and the current detection value detected at this time.</p><p id="p-0148" num="0128">(3) In each of the above-mentioned embodiments, there was explained the case where the modulation unit <b>363</b> adds the modulation explained using the equation (1). However, the modulation unit <b>363</b> may perform various kinds of modulation other than the equation (1) which causes the current detection error due to ringing. For example, as shown in the next equation, the modulation unit <b>363</b> may determine the minimum value Vmin and the maximum value Vmax among the voltage command values of three-phase after coordinate conversion Vuoc, Vvoc, Vwoc; calculate an offset voltage Voff by multiplying 0.5 to an addition value of the minimum value Vmin and the maximum value Vmax; and calculate the voltage command values of three-phase Vuo, Vvo, Vwo by subtracting the offset voltage Voff from the voltage command values of three-phase after coordinate conversion Vuoc, Vvoc, Vwoc.</p><p id="p-0149" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>V </i>min=MIN(<i>Vuoc,Vvoc,Vwoc</i>)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0150" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>V </i>max=MAX(<i>Vuoc,Vvoc,Vwoc</i>)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0151" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>V</i>off=0.5&#xd7;(<i>V </i>min+<i>V </i>max)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0152" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Vuo=Vuoc&#x2212;V</i>off<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0153" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Vvo=Vvoc&#x2212;V</i>off<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0154" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Vwo=Vwoc&#x2212;V</i>off&#x2003;&#x2003;(7)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0155" num="0129"><figref idref="DRAWINGS">FIG. <b>21</b></figref> shows the behavior of the amplitude reduction modulation of the equation (7). The voltage command values of three-phase after coordinate conversion Vuoc, Vvoc, Vwoc are shown in the upper row graph. The voltage command values of three-phase after coordinate conversion Vuoc, Vvoc, Vwoc exceed a range of &#x2212;Vdc/2 to +Vdc/2, and the voltage saturation occurs. On the other hand, the voltage command values of three-phase after amplitude reduction modulation Vuo, Vvo, Vwo are kept in the range from &#x2212;Vdc/2 to +Vdc/2, and the occurrence of voltage saturation can be prevented. Even if this kind modulation is performed, when the voltage command value approaches +Vdc/2 and the on period of the negative electrode side switching device becomes short, the current detection error is caused by ringing. Accordingly, by performing the current addition processing, the component of the resonance period Tr can be reduced from the current detection value, and the noise of AC rotary machine <b>1</b> can be reduced.</p><p id="p-0156" num="0130">(4) In each of the above-mentioned embodiments, there was explained the case where the current addition processing unit <b>34</b> performs the current addition processing to the current detection values of d-axis and q-axis Idr, Iqr. However, the current addition processing unit <b>34</b> may perform the current addition processing to the current detection values of three-phase Iur, Ivr, Iwr. For example, in the configuration corresponding to Embodiment 1, the current addition processing unit <b>34</b> calculates the current detection values of three-phase after current addition processing Iur*, Ivr*, Iwr*, by performing the current addition processing which adds the current detection values of three-phase Iur, Ivr, Iwr detected at this time current detection, and the current detection values of three-phase Iur, Ivr, Iwr detected at the current detection before the addition period Tadd, respectively. In the configuration corresponding to Embodiment 3, the current addition processing unit <b>34</b> calculates the current detection values of three-phase after current addition processing Iur*, Ivr*, Iwr*, by performing the current addition processing which adds the current detection values of three-phase Iur, Ivr, Iwr detected at this time current detection, the current detection values of three-phase Iur, Ivr, Iwr detected at the current detection before the addition period Tadd, and the current detection values of three-phase Iur, Ivr, Iwr detected at the current detection before the additional addition period Taddad. Current detection values of three-phase after current addition processing Iur*, Ivr*, and Iwr* are calculated. Then, the current coordinate conversion unit <b>33</b> converts the current detection values of three-phase after current addition processing Iur*, Ivr*, Iwr* into the current detection values of d-axis and q-axis after current addition processing Idr*, Iqr*, by performing the three-phase/two-phase conversion and the rotating coordinate conversion based on the magnetic pole position &#x3b8;, and outputs to the voltage command value calculation unit <b>36</b>.</p><p id="p-0157" num="0131">Although the present disclosure is described above in terms of various exemplary embodiments and implementations, it should be understood that the various features, aspects and functionality described in one or more of the individual embodiments are not limited in their applicability to the particular embodiment with which they are described, but instead can be applied, alone or in various combinations to one or more of the embodiments. It is therefore understood that numerous modifications which have not been exemplified can be devised without departing from the scope of the present disclosure. For example, at least one of the constituent components may be modified, added, or eliminated. At least one of the constituent components mentioned in at least one of the preferred embodiments may be selected and combined with the constituent components mentioned in another preferred embodiment.</p><heading id="h-0034" level="1">REFERENCE SIGNS LIST</heading><p id="p-0158" num="0132"><b>1</b> AC Rotary Machine, <b>3</b> DC power Source, <b>4</b> Inverter, <b>5</b> Current Detection Circuit, <b>6</b> Control apparatus <b>10</b> Control apparatus for AC Rotary Machine, <b>100</b> Electric Power Steering Apparatus, <b>101</b> Driving Force Transmission Mechanism, <b>102</b> Steering Apparatus, A First natural number, B Second natural number, C Third natural number, CA Carrier wave, TIdt Current detection period, T_th Threshold value, Tadd Addition period, Taddad Additional addition period, Tc Carrier period, Tr Resonance period, Vdc power source voltage</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A control apparatus for AC rotary machine that controls an AC rotary machine which has three-phase windings, the control apparatus for AC rotary machine comprising:<claim-text>an inverter that is provided with three sets of series circuits in each of which a positive electrode side switching device connected to a positive electrode side of a DC power source and a negative electrode side switching device connected to a negative electrode side of the DC power source are connected in series and a connection node of series connection is connected to the winding of the corresponding phase, corresponding to respective phases of the three-phase;</claim-text><claim-text>a current detection circuit that is provided with resistances connected in series to the negative electrode side switching devices of at least two phases; and</claim-text><claim-text>a controller that calculates voltage command values of three-phase, and controls on/off the switching devices by comparing each of the voltage command values of three-phase with a carrier wave vibrating at a carrier period,</claim-text><claim-text>wherein the controller detects currents flowing into the three-phase windings, based on an output signal of the current detection circuit, at a current detection period which is a first natural number times of the carrier period and at which the negative electrode side switching device is turned on; calculates current detection values after current addition processing, by performing a current addition processing which adds current detection values detected at this time, and current detection values detected before an addition period which is a second natural number times of the current detection period; and calculates the voltage command values of three-phase based on the current detection values after the current addition processing,</claim-text><claim-text>wherein the second natural number is set to a natural number that the addition period becomes the closest to a half period of a mechanical resonance period of the AC rotary machine.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The control apparatus for AC rotary machine according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,<claim-text>wherein, about each phase, the controller turns on the negative electrode side switching device, when the carrier wave exceeds the voltage command value, and turns off the negative electrode side switching device, when the carrier wave is less than the voltage command value;</claim-text><claim-text>and detects current at a timing of every the current detection period when the carrier wave becomes a peak point of mountain</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The control apparatus for AC rotary machine according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,<claim-text>wherein the controller, at every current detection timing, converts the current detection values of three-phase windings into current detection values of d-axis and q-axis on a coordinate system of d-axis and q-axis which rotates synchronizing with a magnetic pole position of a rotor of the AC rotary machine; calculates current detection values of d-axis and q-axis after current addition processing, by performing a current addition processing which adds the current detection values of d-axis and q-axis calculated at this time current detection timing, and the current detection values of d-axis and q-axis calculated at the current detection timing before the addition period, respectively; and calculates the voltage command values of three-phase, based on the current detection values of d-axis and q-axis after current addition processing.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The control apparatus for AC rotary machine according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,<claim-text>wherein the controller calculates current detection values after current addition processing, by performing a current addition processing which adds the current detection values detected at this time, the current detection values detected before the addition period, and the current detection values detected before an additional addition period which is a third natural number times of the current detection period,</claim-text><claim-text>wherein the third natural number is set to a natural number that the additional addition period becomes the second closest to the half period of the mechanical resonance period of the AC rotary machine.</claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The control apparatus for AC rotary machine according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,<claim-text>wherein, when an on period of the negative electrode side switching device of any phase in the carrier period is less than a preliminarily set threshold value, the controller calculates the voltage command values of three-phase based on the current detection values after current addition processing; and</claim-text><claim-text>when the on period of the negative electrode side switching device of any phase in the carrier period is not less than the threshold value, the controller calculates the voltage command values of three-phase based on the current detection value detected at this time.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The control apparatus for AC rotary machine according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,<claim-text>wherein the controller offsets the voltage command values of three-phase equally so that an average value of the voltage command values of three-phase becomes less than a vibration center value of the carrier wave, and controls on/off the switching devices by comparing each of the voltage command values of three-phase after offset and the carrier wave.</claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. An electric power steering apparatus comprising:<claim-text>the control apparatus for AC rotary machine according to <claim-ref idref="CLM-00001">claim 1</claim-ref>;</claim-text><claim-text>the AC rotary machine; and</claim-text><claim-text>a driving force transmission mechanism that transmits a driving force of the AC rotary machine to a steering device of a vehicle,</claim-text><claim-text>wherein the carrier period is set less than or equal to 60 microseconds, and</claim-text><claim-text>wherein the mechanical resonance period of the AC rotary machine is within a range from 200 microseconds to 500 microseconds.</claim-text></claim-text></claim></claims></us-patent-application>