<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006473A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006473</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17808383</doc-number><date>20220623</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>CN</country><doc-number>202110738543.3</doc-number><date>20210630</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>J</subclass><main-group>50</main-group><subgroup>10</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>J</subclass><main-group>7</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>J</subclass><main-group>50</main-group><subgroup>80</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>J</subclass><main-group>50</main-group><subgroup>40</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20160201</date></cpc-version-indicator><section>H</section><class>02</class><subclass>J</subclass><main-group>50</main-group><subgroup>10</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>J</subclass><main-group>7</main-group><subgroup>0047</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20160201</date></cpc-version-indicator><section>H</section><class>02</class><subclass>J</subclass><main-group>50</main-group><subgroup>80</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20160201</date></cpc-version-indicator><section>H</section><class>02</class><subclass>J</subclass><main-group>50</main-group><subgroup>40</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20200101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>J</subclass><main-group>2207</main-group><subgroup>20</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">WIRELESS CHARGING TRANSMITTER AND METHOD FOR CONTROLLING THE WIRELESS CHARGING TRANSMITTER</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>NXP USA, Inc.</orgname><address><city>Austin</city><state>TX</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Gao</last-name><first-name>Xiang</first-name><address><city>Shanghai</city><country>CN</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Wu</last-name><first-name>Chongli</first-name><address><city>Queen Creek</city><state>AZ</state><country>US</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>Jiang</last-name><first-name>Dengyu</first-name><address><city>Suzhou</city><country>CN</country></address></addressbook></inventor><inventor sequence="03" designation="us-only"><addressbook><last-name>Wang</last-name><first-name>Li</first-name><address><city>Suzhou</city><country>CN</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A wireless charging transmitter includes first and second input terminals for receiving an input voltage from a power source, a coil, an inverter having first and second inverter input terminals coupled to the first and second input terminals respectively, and first and second inverter output terminals for providing an output voltage to the coil. A control system is configured to monitor a voltage between the first and second input terminals, and control the inverter to adjust the output voltage, based on an offset between the monitored voltage and a target voltage, to at least partially compensate the offset. The wireless charging transmitter may further include an ideal diode coupled between one of the input terminals and the inverter.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="101.35mm" wi="158.75mm" file="US20230006473A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="258.23mm" wi="172.72mm" file="US20230006473A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="123.02mm" wi="171.53mm" file="US20230006473A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="266.53mm" wi="134.03mm" file="US20230006473A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="242.99mm" wi="188.04mm" file="US20230006473A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="209.21mm" wi="156.21mm" file="US20230006473A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">FIELD OF THE DISCLOSURE</heading><p id="p-0002" num="0001">The present disclosure relates to a wireless charging transmitter and a method for controlling the wireless charging transmitter. In particular, but not exclusively, it relates to a wireless charging transmitter comprising a control system for adjusting a current or voltage supplied to a power transmitter coil to at least partially compensate for fluctuations in a power source voltage.</p><heading id="h-0002" level="1">BACKGROUND OF THE DISCLOSURE</heading><p id="p-0003" num="0002">In automotive applications, a wireless charging transmitter is one type of device connected to the battery and is used to wirelessly transmit power from the wireless charging transmitter to a power receiving device. Other devices may also be connected to the battery. Wireless charging uses in-band ASK communication to send data from a power receiving device to the wireless charging transmitter. This data is a feedback signal for regulating the power delivery. The ASK method involves the power receiving device toggling its load to cause the current/voltage amplitude in the power transmitter coil to change, with the duration of the change representing the logic 1 or 0. ASK demodulation at the wireless charging transmitter is used to obtain the data from the detected change in the current/voltage amplitude at the power transmitter coil.</p><heading id="h-0003" level="1">SUMMARY OF THE DISCLOSURE</heading><p id="p-0004" num="0003">Aspects of the disclosure are set out in the accompanying claims. Combinations of features from the dependent claims may be combined with features of the independent claims as appropriate and not merely as explicitly set out in the claims.</p><p id="p-0005" num="0004">According to an aspect of the disclosure, there is provided a wireless charging transmitter comprising:</p><p id="p-0006" num="0005">first and second input terminals for receiving an input voltage from a power source;</p><p id="p-0007" num="0006">a coil;</p><p id="p-0008" num="0007">an inverter having first and second inverter input terminals coupled to the first and second input terminals respectively, and first and second inverter output terminals for providing an output voltage to the coil; and</p><p id="p-0009" num="0008">a control system configured to:<ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0000">    <ul id="ul0002" list-style="none">        <li id="ul0002-0001" num="0009">monitor a voltage between the first and second input terminals, and</li>        <li id="ul0002-0002" num="0010">control the inverter to adjust the inverter output voltage based on an offset between the monitored voltage and a target voltage, to at least partially compensate the offset between the monitored voltage and a target voltage.</li>    </ul>    </li></ul></p><p id="p-0010" num="0011">By including a control system configured to monitor a voltage between the first and second input terminals, and control the inverter to adjust the inverter output voltage based on an offset between the monitored voltage and a target voltage, to at least partially compensate the offset between the monitored voltage and a target voltage, an energy disturbance on the coil caused by a voltage ripple on the power source may be reduced or suppressed, improving stability of the charging process. A voltage ripple on the power source may be due to another device, such as another wireless charging transmitter or a DC/DC converter, being connected to the same power source.</p><p id="p-0011" num="0012">The target voltage may be an average value of the monitored voltage.</p><p id="p-0012" num="0013">The control system may be configured to determine the average value of the monitored voltage.</p><p id="p-0013" num="0014">The average value of the monitored voltage may be obtained using a moving filter.</p><p id="p-0014" num="0015">The moving filter may be implemented by a software algorithm or by hardware. For example, the moving filter may be implemented by external RC circuits.</p><p id="p-0015" num="0016">The control system may be configured to control the inverter by adjusting one of a duty cycle, phase shift or frequency of the inverter.</p><p id="p-0016" num="0017">The control system may be configured to control the inverter by adjusting one of a duty cycle, phase shift or frequency of the inverter by an amount that is determined by the offset between the monitored voltage and the target voltage.</p><p id="p-0017" num="0018">The control system may be configured to control the inverter by adjusting one of a duty cycle, phase shift or frequency of the inverter by a relative amount that is proportional to a relative offset between the monitored voltage and the target voltage.</p><p id="p-0018" num="0019">For example, the control system may control the inverter to cause a relative change in the duty cycle that is proportional to the relative offset between the monitored voltage and the target voltage. The constant of proportionality may be negative.</p><p id="p-0019" num="0020">The control system may be configured to determine a frequency of a ripple on the monitored voltage, and to monitor the voltage between the first and second input terminals at a sampling frequency greater than the frequency of the ripple.</p><p id="p-0020" num="0021">By monitoring the voltage between the first and second input terminals at a sampling frequency greater than the frequency of the ripple, compensation of the ripple may be improved.</p><p id="p-0021" num="0022">The control system may be further configured to:</p><p id="p-0022" num="0023">monitor a current in the coil, and</p><p id="p-0023" num="0024">control the inverter to adjust the output voltage to reduce an offset between the monitored current and a target current.</p><p id="p-0024" num="0025">This may further reduce or suppress an energy disturbance on the coil caused by a voltage ripple from another device sharing a common power source (e.g. another wireless charging transmitter, a DC/DC converter, or a switched-mode power supply), improving the stability of the charging process.</p><p id="p-0025" num="0026">The target current may be at least partially determined by a power control signal received from a device wirelessly receiving power from the wireless charging transmitter.</p><p id="p-0026" num="0027">The target current may be adjusted based on the offset between the monitored voltage and the target voltage to at least partially compensate the offset between the monitored voltage and the target voltage.</p><p id="p-0027" num="0028">In this way, adjustments to the target current based on the offset between the monitored voltage and the target voltage may be used to indirectly compensate the offset between the monitored voltage and the target voltage.</p><p id="p-0028" num="0029">The control system may comprise a proportional-integral (PI) controller configured to output a signal for controlling the inverter based on the offset between the monitored current and the target current.</p><p id="p-0029" num="0030">The coil current may effectively be monitored by monitoring the coil voltage, since they have similar waveforms.</p><p id="p-0030" num="0031">The wireless charging transmitter may be configured to receive a power control signal from a device wirelessly receiving power from the wireless charging transmitter, wherein the control system is configured to control the inverter to adjust the inverter output voltage to at least partially compensate the offset between the monitored voltage and the target voltage and/or to reduce the offset between the monitored current and the target current after receiving each said power control signal.</p><p id="p-0031" num="0032">The power control signal may be received as a modulation of the coil current or voltage. The power control signal may be an Amplitude-Shifted-Key (ASK) signal. The power control signal may be a Control Error Packet (CEP).</p><p id="p-0032" num="0033">The control system may be configured to temporarily stop controlling the inverter to adjust the inverter output voltage to reduce the offset between the monitored current and the target current during a period of time when a power control signal may be received.</p><p id="p-0033" num="0034">This avoids the control system controlling the inverter in response to changes in the coil current/voltage due to an ASK modulation.</p><p id="p-0034" num="0035">The wireless charging transmitter may further comprise:</p><p id="p-0035" num="0036">a diode device coupled between one of the first and second input terminals and a corresponding one of the first and second inverter input terminals.</p><p id="p-0036" num="0037">This may reduce or prevent an ASK signal received at the wireless charging transmitter from causing a disturbance at another device sharing a common power source with the wireless charging transmitter, by blocking the perturbation due to the ASK signal from reaching the voltage bus of the DC power source. As an example, this may reduce or prevent the wireless charging transmitter generating a ripple on the power source voltage which could interfere with ASK demodulation at another wireless charging transmitter sharing a common power source, thereby improving stability of a charging process at the other wireless charging transmitter.</p><p id="p-0037" num="0038">The diode device may be arranged to preferentially allow current to flow from the first input terminal to the first inverter input terminal, while blocking current from flowing in the reverse direction.</p><p id="p-0038" num="0039">The diode device may be an ideal diode.</p><p id="p-0039" num="0040">This may advantageously reduce power consumption.</p><p id="p-0040" num="0041">The ideal diode device may comprise a MOSFET and a controller for controlling the MOSFET.</p><p id="p-0041" num="0042">The controller may comprise a control chip or a control circuit comprising one or more transistors.</p><p id="p-0042" num="0043">The controller may be configured to drive the MOSFET ON when a voltage at an input of the ideal diode device is higher than a voltage at an output of the ideal diode device, the MOSFET being OFF otherwise.</p><p id="p-0043" num="0044">In this way, the ideal diode device acts to block a reverse current to the power source, thereby reducing back-flow of an ASK signal from the wireless charging transmitter to the power source.</p><p id="p-0044" num="0045">The diode device may be a normal diode, for example a Schottky diode.</p><p id="p-0045" num="0046">The wireless charging transmitter may further comprise a capacitor coupled in parallel with the inverter.</p><p id="p-0046" num="0047">This may be useful for providing hold-up time or improving voltage stability when the diode device is non-conducting. One end of the capacitor may be coupled to the diode device and the first or second inverter input terminal. The other end of the capacitor may be coupled to ground.</p><p id="p-0047" num="0048">The diode device may be coupled between the first input terminal and the first inverter input terminal. Alternatively, the diode device may be coupled between the second inverter input terminal and the second input terminal. That is, the diode device may be provided at either the high side or the low side.</p><p id="p-0048" num="0049">The wireless charging transmitter may be a single stage power transmitter.</p><p id="p-0049" num="0050">The inverter may be a full bridge inverter.</p><p id="p-0050" num="0051">The power source may be a battery.</p><p id="p-0051" num="0052">The wireless charging power transmitter may be configured to receive and demodulate data signals received as a modulation of the coil current or voltage.</p><p id="p-0052" num="0053">The control system may be implemented by a microcontroller unit (MCU).</p><p id="p-0053" num="0054">According to another aspect of the disclosure, there is provided a system comprising:</p><p id="p-0054" num="0055">a first wireless charging transmitter as defined above, and</p><p id="p-0055" num="0056">a further device,</p><p id="p-0056" num="0057">wherein the first wireless charging transmitter and the further device are arranged to receive power from the same power source.</p><p id="p-0057" num="0058">The further device may be a second wireless charging transmitter as defined above.</p><p id="p-0058" num="0059">The first wireless charging transmitter may further comprise a diode device coupled between one of the first and second input terminals and a corresponding one of the first and second inverter input terminals.</p><p id="p-0059" num="0060">The diode device of the first wireless charging transmitter may prevent an ASK signal received at the coil of the first wireless charging transmitter from back-propagating to the DC voltage bus of the common power source to interfere with an ASK signal received at the second wireless charging transmitter.</p><p id="p-0060" num="0061">According to another aspect of the disclosure, there is provided a method for controlling a wireless charging transmitter, the wireless charging transmitter comprising first and second input terminals for receiving an input voltage from a power source, a coil, an inverter coupled to the input terminals and configured to provide an output voltage to the coil, the method comprising:</p><p id="p-0061" num="0062">monitoring the input voltage, and</p><p id="p-0062" num="0063">controlling the inverter to adjust the output voltage, based on an offset between the monitored voltage and a target voltage, to at least partially compensate the offset.</p><p id="p-0063" num="0064">The method may further comprise:</p><p id="p-0064" num="0065">monitoring a current in the coil, and</p><p id="p-0065" num="0066">controlling the inverter to adjust the output voltage, to reduce an offset between the monitored current and a target current.</p><p id="p-0066" num="0067">According to another aspect of the disclosure, there is provided a wireless charging transmitter comprising:</p><p id="p-0067" num="0068">first and second input terminals for receiving an input voltage from a power source;</p><p id="p-0068" num="0069">a coil;</p><p id="p-0069" num="0070">an inverter having first and second inverter input terminals coupled to the first and second input terminals respectively, and first and second inverter output terminals for providing an output voltage to the coil; and</p><p id="p-0070" num="0071">a diode device coupled between one of the first and second input terminals and a corresponding one of the first and second inverter input terminals.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0071" num="0072">Example embodiments of the present disclosure will be described, by way of example only, with reference to the accompanying drawings in which like reference signs relate to like elements and in which:</p><p id="p-0072" num="0073"><figref idref="DRAWINGS">FIG. <b>1</b></figref> schematically illustrates a single power stage wireless charging transmitter;</p><p id="p-0073" num="0074"><figref idref="DRAWINGS">FIG. <b>2</b></figref> schematically illustrates a wireless charging transmitter according to an example embodiment of the present disclosure;</p><p id="p-0074" num="0075"><figref idref="DRAWINGS">FIG. <b>3</b></figref> schematically illustrates a wireless charging transmitter according to another example embodiment of the present disclosure;</p><p id="p-0075" num="0076"><figref idref="DRAWINGS">FIG. <b>4</b></figref> shows an example configuration of an ideal diode for use in a wireless charging transmitter according to an example embodiment of the present disclosure;</p><p id="p-0076" num="0077"><figref idref="DRAWINGS">FIG. <b>5</b></figref> shows another example configuration of an ideal diode for use in a wireless charging transmitter according to an example embodiment of the present disclosure;</p><p id="p-0077" num="0078"><figref idref="DRAWINGS">FIG. <b>6</b></figref> schematically illustrates an example control loop implemented by the control system of the wireless charging transmitter according to an example embodiment of the present disclosure;</p><p id="p-0078" num="0079"><figref idref="DRAWINGS">FIG. <b>7</b></figref> schematically illustrates another example control loop implemented by the control system of the wireless charging transmitter according to an example embodiment of the present disclosure;</p><p id="p-0079" num="0080"><figref idref="DRAWINGS">FIG. <b>8</b></figref> illustrates a control timing sequence for a wireless charging transmitter according to an example embodiment of the present disclosure; and</p><p id="p-0080" num="0081"><figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates a system comprising a wireless charging transmitter according to an example embodiment of the present disclosure.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">DETAILED DESCRIPTION</heading><p id="p-0081" num="0082"><figref idref="DRAWINGS">FIG. <b>1</b></figref> shows an example single power stage wireless charging transmitter <b>10</b> connected to a DC power source <b>50</b>, in the form of a battery, and arranged for wirelessly transmitting power to a power receiving device <b>60</b>. The wireless charging transmitter <b>10</b> comprises first and second input terminals <b>12</b>, <b>14</b> for receiving an input voltage from the power source <b>50</b>, a coil <b>20</b>, an inverter <b>30</b>, and a control system <b>40</b>. In <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the first and second input terminals <b>12</b>, <b>14</b> are coupled to the positive and negative terminals of the battery <b>50</b> respectively. The inverter <b>30</b>, in the form of a full bridge inverter, comprises first and second inverter input terminals <b>32</b>, <b>34</b>, coupled to the first and second input terminals <b>12</b>, <b>14</b> respectively, and first and second inverter output terminals <b>36</b>, <b>38</b>, for providing an output voltage to the coil <b>20</b>. The first inverter output terminal <b>36</b> is coupled to a first terminal <b>22</b> of the coil <b>20</b> via a first inductor <b>26</b> and a capacitor <b>27</b> connected in series between the first inverter output terminal <b>36</b> and the first coil terminal <b>22</b>. The second inverter output terminal <b>38</b> is coupled to a second terminal <b>24</b> of the coil <b>20</b> via a second inductor <b>28</b>. A second capacitor <b>29</b> is connected in parallel with the coil <b>20</b> and the first capacitor <b>27</b>, with one terminal of the second capacitor <b>29</b> connected between the first inductor <b>26</b> and the first capacitor <b>27</b>, and the other terminal of the second capacitor <b>29</b> connected between the second inductor <b>28</b> and the second terminal <b>24</b> of the coil <b>20</b>. The control system <b>40</b> is configured to control the inverter <b>30</b>, for example by controlling the duty cycle, phase and/or frequency of the inverter <b>30</b>, to provide the desired output voltage waveform to the coil <b>20</b>. The control system <b>40</b> also receives a signal <b>60</b> for sampling the current Icoil and/or voltage Vcoil of the coil <b>20</b>.</p><p id="p-0082" num="0083">Other devices may also be connected to the battery <b>50</b>, and the various power requirements and operating frequencies of these devices may lead to instantaneous changes in power consumption which can perturb the DC source voltage. The battery voltage may therefore be influenced by the working status of the various devices connected to the battery, such that an AC ripple may be generated on the battery voltage and thereby coupled to the power transmitter coil current/voltage of the wireless charging transmitter.</p><p id="p-0083" num="0084">An AC noise ripple on the DC power source voltage of a wireless charging transmitter, generated by other devices sharing the same DC power source, can be coupled onto the coil current/voltage causing interference with the in-band communication. This can result in an ASK communication error, potentially causing failure of the wireless charging. Although the DC-DC stage in dual-stage transmitters can help to reduce the ripple, many applications use single-stage transmitters which control power delivery using just frequency control or duty cycle control.</p><p id="p-0084" num="0085">As an example, when a DC/DC converter connected to the same battery as a wireless charging transmitter is operating, there may be some frequency DC/DC operation ripple coupled on the DC voltage bus. This may impact on the coil current/voltage of the wireless charging transmitter, causing the ASK demodulation to fail.</p><p id="p-0085" num="0086">As another example, when two or more wireless charging transmitters share the same DC power source, the ASK signal at one transmitter may back-flow to the DC voltage bus and interfere with the ASK signal at the other transmitter. For example, when a first wireless charging transmitter is operating, its ASK communication signal may be coupled onto the DC voltage bus, thereby impacting the coil current/voltage of the second wireless charging transmitter, causing the ASK demodulation to fail at the second wireless charging transmitter. The first wireless charging transmitter may be affected by the second wireless charging transmitter in the same way.</p><p id="p-0086" num="0087"><figref idref="DRAWINGS">FIG. <b>2</b></figref> shows a wireless charging transmitter <b>100</b> according to an example embodiment of the present disclosure. The wireless charging transmitter <b>100</b>, in the form of a single power stage wireless charging transmitter, is coupled to a DC power source <b>500</b>, in the form of a battery, and arranged for wirelessly transmitting power to a power receiving device <b>600</b>. The wireless charging transmitter <b>100</b> comprises first and second input terminals <b>112</b>, <b>114</b>, a coil <b>120</b>, an inverter <b>130</b>, and a control system <b>140</b>. In <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the first and second input terminals <b>112</b>, <b>114</b> are coupled to the positive and negative voltage bus respectively of the battery <b>500</b> for receiving power from the battery. The inverter <b>130</b>, in the form of a full bridge inverter, comprises first and second inverter input terminals <b>132</b>, <b>134</b>, coupled to the first and second input terminals <b>112</b>, <b>114</b> respectively, and first and second inverter output terminals <b>136</b>, <b>138</b>, for providing an output voltage to the coil <b>120</b>. The inverter <b>130</b> comprises transistors, schematically indicated as switches in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, controlled by pulse width modulation. The first inverter output terminal <b>136</b> is coupled to a first terminal <b>122</b> of the coil <b>120</b> via a first inductor <b>126</b> and a capacitor <b>127</b> connected in series between the first inverter output terminal <b>136</b> and the first coil terminal <b>122</b>. The second inverter output terminal <b>138</b> is coupled to a second terminal <b>124</b> of the coil <b>120</b> via a second inductor <b>128</b>. A second capacitor <b>129</b> is connected in parallel with the coil <b>120</b> and the first capacitor <b>127</b>, with one terminal of the second capacitor <b>129</b> connected between the first inductor <b>126</b> and the first capacitor <b>127</b>, and the other terminal of the second capacitor <b>129</b> connected between the second inductor <b>128</b> and the second terminal <b>124</b> of the coil <b>120</b>.</p><p id="p-0087" num="0088">The control system <b>140</b> is configured to control the inverter <b>130</b>, for example by controlling the duty cycle, phase and/or frequency of the inverter <b>130</b> by controlling the switching times of the transistors of the inverter <b>130</b>, to provide the desired output voltage waveform to the coil <b>120</b>. The control system <b>140</b> also receives a signal <b>150</b> for sampling the voltage Vin received by the wireless charging transmitter <b>100</b> from the power source <b>500</b>, and a signal <b>160</b> for sampling the current Icoil in the coil <b>120</b>. The signal <b>160</b> is used for control of the power transmitted from the wireless charging device <b>100</b> to the power receiving device <b>600</b>. The signal <b>150</b> and optionally the signal <b>160</b>, is used by the control system <b>140</b> for compensating a ripple or noise on the voltage Vin, as will be described in more detail in connection with <figref idref="DRAWINGS">FIGS. <b>6</b> to <b>8</b></figref>. The control system <b>140</b> may be implemented by a digital power control MCU (microcontroller unit).</p><p id="p-0088" num="0089">The wireless charging transmitter <b>100</b> further comprises a diode device <b>180</b> and a hold-up capacitor <b>190</b>. The diode device <b>180</b> is coupled in series between one of the first and second input terminals <b>112</b>, <b>114</b> and a corresponding one of the first and second inverter input terminals <b>132</b>, <b>134</b>. In the example shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the diode device <b>180</b> is coupled between the first input terminal <b>112</b> (in use, coupled to the positive terminal of the DC power source <b>500</b>) and the first inverter input terminal <b>132</b>. However, the diode device <b>180</b> is not limited to be provided on the high side and may alternatively be provide on the low side, as will be described below in connection with <figref idref="DRAWINGS">FIG. <b>3</b></figref>.</p><p id="p-0089" num="0090">The diode device <b>180</b> acts to prevent back-flow of the wireless charging ASK signal to the voltage bus of the DC power source <b>500</b>. The diode device <b>180</b> is arranged to preferentially allow current to flow from the first input terminal <b>112</b> to the first inverter input terminal <b>132</b>, while blocking current from flowing in the reverse direction. When the voltage at the inverter input terminal <b>132</b> is higher than the voltage Vin at the input terminal <b>112</b>, the diode device <b>180</b> is non-conducting, thereby blocking a reverse current and preventing an ASK modulation at the coil <b>120</b> from being coupled to the DC power source. This in turn prevents the ASK signal from the wireless charging transmitter <b>100</b> from backflowing to the DC voltage bus and interfering with the ASK demodulation effect at another wireless charging transmitter sharing the same power source <b>500</b>.</p><p id="p-0090" num="0091"><figref idref="DRAWINGS">FIG. <b>3</b></figref> shows a wireless charging transmitter <b>100</b>&#x2032; according to another example embodiment of the present disclosure. The wireless charging transmitter <b>100</b>&#x2032; of <figref idref="DRAWINGS">FIG. <b>3</b></figref> differs from the wireless charging transmitter <b>100</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref> in that the diode device <b>180</b>&#x2032; is provided on the low side rather than the high side. That is, in the example embodiment shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the diode device <b>180</b>&#x2032; is coupled between the second input terminal <b>114</b> (in use, coupled to the negative terminal of the DC power source <b>500</b>) and the second inverter input terminal <b>134</b>.</p><p id="p-0091" num="0092">The diode device <b>180</b>, <b>180</b>&#x2032; is preferably in the form of an ideal diode. This provides the advantage of reducing power consumption. However, a normal diode, for example a Schottky diode, may alternatively be used. With reference to <figref idref="DRAWINGS">FIGS. <b>4</b> and <b>5</b></figref>, an ideal diode <b>180</b><i>a</i>, <b>180</b><i>b </i>may be implemented using a MOSFET <b>182</b>, <b>182</b>&#x2032; integrated with a controller <b>184</b>, <b>184</b>&#x2032;. The controller <b>184</b>, <b>184</b>&#x2032; automatically detects the voltage Vin at the input <b>186</b>, <b>186</b>&#x2032; of the ideal diode <b>180</b><i>a</i>, <b>180</b><i>b </i>(i.e. the voltage Vbus received from the power source <b>500</b> at the input terminal <b>112</b>) and drives the MOSFET <b>182</b>, <b>182</b>&#x2032; ON while the voltage Vin at the ideal diode input <b>186</b>, <b>186</b>&#x2032; is higher than the voltage Vout at the ideal diode output <b>188</b>, <b>188</b>&#x2032; (i.e. at the inverter input terminal <b>132</b>). Otherwise the MOSFET <b>182</b>, <b>182</b>&#x2032; will be OFF. Thus an ASK ripple on the coil <b>120</b> will be blocked from the voltage bus of the DC power source <b>500</b>.</p><p id="p-0092" num="0093"><figref idref="DRAWINGS">FIG. <b>4</b></figref> shows an example configuration of an ideal diode <b>180</b><i>a </i>for use as the diode device <b>180</b> of the wireless charging transmitter <b>100</b>. The ideal diode <b>180</b><i>a </i>comprises a MOSFET <b>182</b> and a controller <b>184</b> in the form of a control chip U<b>14</b>. This implementation can greatly reduce power consumption compared to a normal diode. The control chip U<b>14</b> automatically detects the voltage Vin at the ideal diode input <b>186</b> (corresponding to the voltage Vbus at the input terminal <b>112</b> from the DC voltage bus) and drives the MOSFET <b>182</b> ON while the voltage Vin at the diode input <b>186</b> is higher than the voltage Vout at the ideal diode output <b>188</b> (i.e. the voltage provided to the inverter input terminal <b>132</b>). The ideal diode <b>180</b><i>a </i>shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref> may also be used in the wireless charging transmitter <b>100</b>&#x2032; of <figref idref="DRAWINGS">FIG. <b>3</b></figref>.</p><p id="p-0093" num="0094"><figref idref="DRAWINGS">FIG. <b>5</b></figref> shows another example configuration of an ideal diode <b>180</b><i>b </i>for use as the diode device <b>180</b> of the wireless charging transmitter <b>100</b>. The ideal diode <b>180</b><i>b </i>comprises a MOSFET Q<b>38</b>, <b>182</b>&#x2032; and a controller <b>184</b>&#x2032; in the form of a control circuit comprising transistors Q<b>39</b>A, Q<b>39</b>B, Q<b>1</b> and Q<b>2</b>. This implementation can greatly reduce power consumption compared to a normal diode. If the voltage Vin at the ideal diode input <b>186</b>&#x2032; (i.e. the voltage Vbus at the input terminal <b>112</b> from the DC voltage bus of the power source <b>500</b>) is higher than the voltage Vout at the ideal diode output <b>188</b>&#x2032; (i.e. the voltage provided to the inverter input terminal <b>132</b>), transistor Q<b>39</b>A will be ON, transistor Q<b>39</b>B will be OFF, transistor Q<b>2</b> in Q<b>40</b> will be ON, transistor Q<b>1</b> in Q<b>40</b> will be OFF, Q<b>40</b> OUT will be connected to GND, transistor Q<b>38</b> will be ON, and the input <b>186</b>&#x2032; of the ideal diode <b>180</b><i>b </i>will be connected to the output <b>188</b>&#x2032; of the ideal diode <b>180</b><i>b</i>. That is, the input terminal <b>112</b> of the wireless charging transmitter <b>100</b> will be connected to the inverter input terminal <b>132</b>, so that the voltage Vin is input to the inverter <b>130</b>. If the voltage Vin at the ideal diode input <b>186</b>&#x2032; is lower than the voltage Vout at the ideal diode output <b>188</b>&#x2032;, Q<b>39</b>A will be OFF, Q<b>39</b>B will be ON, Q<b>1</b> in Q<b>40</b> will be ON, Q<b>2</b> in Q<b>40</b> will be OFF, Q<b>40</b> OUT will connect to the ideal diode output <b>188</b>&#x2032;, Q<b>38</b> will be OFF, and the output <b>188</b>&#x2032; of the ideal diode <b>180</b><i>b </i>will be disconnected from the input <b>186</b>&#x2032; of the ideal diode <b>180</b><i>b</i>. That is, the input terminal <b>112</b> of the wireless charging transmitter <b>100</b> will be disconnected from the inverter input terminal <b>132</b>, to protect against reverse current. The ideal diode <b>180</b><i>b </i>shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref> may also be used in the wireless charging transmitter <b>100</b>&#x2032; of <figref idref="DRAWINGS">FIG. <b>3</b></figref>.</p><p id="p-0094" num="0095">As shown in <figref idref="DRAWINGS">FIGS. <b>2</b> and <b>3</b></figref>, the hold-up capacitor <b>190</b>, <b>190</b>&#x2032; is connected in parallel with the inverter <b>130</b>. In the example shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, one terminal of the hold-up capacitor <b>190</b> is connected between the diode device <b>180</b> and the inverter <b>130</b>, the other terminal of the hold-up capacitor <b>190</b> being connected to the ground. In the example shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, one terminal of the hold-up capacitor <b>190</b> is connected to a point between the diode device <b>180</b>&#x2032; and the inverter <b>130</b>, the other terminal of the hold-up capacitor <b>190</b> being connected to the input terminal <b>112</b> of the wireless charging transmitter <b>100</b>&#x2032;. The capacitance of the holdup capacitor <b>190</b> is selected to provide sufficient holdup time while Vbus, the voltage on the bus of the DC power source <b>500</b>, is lower than the voltage Vout input to the inverter <b>130</b>. The required capacitance of the hold-up capacitor <b>190</b> depends on the frequency of any voltage ripple on the input voltage Vin received from the power source <b>500</b>. For example, a 1 &#x3bc;F capacitance would be suitable for a 2 kHz ripple.</p><p id="p-0095" num="0096"><figref idref="DRAWINGS">FIG. <b>6</b></figref> schematically illustrates an example embodiment of a control loop <b>142</b> implemented by the control system <b>140</b> of the wireless charging transmitter <b>100</b>, <b>100</b>&#x2032; according to an example embodiment of the present disclosure. <figref idref="DRAWINGS">FIG. <b>6</b></figref> shows the following elements of the wireless charging transmitter system: the voltage Vin received by the wireless charging transmitter <b>100</b> from the power source <b>500</b>, the inverter <b>130</b>, the coil <b>120</b>,the control loop <b>142</b> implemented by the control system <b>140</b>, and the power receiving device <b>600</b> wirelessly receiving power from form the wireless charging transmitter <b>100</b>.</p><p id="p-0096" num="0097">The control system <b>140</b> is configured to monitor the voltage Vin received from the voltage source <b>500</b> at the input terminals <b>112</b>, <b>114</b>, and to control the inverter <b>130</b> to adjust the inverter output voltage based on an offset between the monitored voltage and a target voltage, to at least partially compensate the offset between the monitored voltage and the target voltage. For example, inverter <b>130</b> may be controlled to adjust the inverter output voltage in a sense opposite to the sense of the offset between the the monitored voltage and the target voltage. That is, if the monitored voltage increase, the inverter <b>130</b> may be controlled to decrease the inverter output voltage, and vice versa. In this example embodiment, the target voltage is an average value of the monitored voltage.</p><p id="p-0097" num="0098">The control system <b>140</b> receives a signal <b>150</b> for sampling the voltage Vin received by the wireless charging transmitter <b>100</b> from the power source <b>500</b>. The voltage Vin is sampled at a first sampling frequency <b>1</b>/T<b>1</b>, to obtain the latest value Vnew <b>170</b> of Vin. A moving filter <b>172</b> or moving window is used to determine an average value Vavg <b>174</b> of the input voltage Vin over N<b>1</b> cycles of the first sampling frequency. The moving filter <b>172</b> may be implemented by a software algorithm or by hardware such as external RC circuits. N<b>1</b> is selected to provide a value Vavg sufficiently smooth to use as a reference. The values Vnew <b>170</b> and Vavg <b>174</b> are then compared to obtain an offset <b>176</b>, in this example a relative offset (Vnew&#x2212;Vavg)/Vavg. The offset is then used to determine a compensation parameter Kp<b>1</b> <b>174</b>. For example the following formula may be used:</p><p id="p-0098" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Kp</i>1=(<i>V</i>new&#x2212;<i>V</i>avg)/<i>V</i>avg,<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0099" num="0099">That is, the first compensation parameter Kp<b>1</b> <b>174</b> is a relative offset of the monitored voltage Vnew from the target voltage Vavg.</p><p id="p-0100" num="0100">The control system <b>140</b> is also configured to monitor a current Icoil in the coil <b>120</b>, and to control the inverter <b>130</b> to adjust the inverter output to reduce an offset between the latest value Inew <b>180</b> of the monitored current Icoil and a target current Iset <b>184</b>. The target current Iset <b>184</b> is determined by a signal <b>182</b> received from the power receiving device <b>600</b>, in the form of a control error packet (CEP) received by in-band ASK communication method. The signal <b>182</b> may include a power increase or power decrease command for adjusting the power wirelessly transmitted from the coil <b>120</b> to the power receiving device <b>600</b>. The control system <b>140</b> also receives a signal <b>160</b> for monitoring the current Icoil in the coil <b>120</b>. The coil current Icoil <b>160</b> is detected at a special timing window at a second sampling frequency <b>1</b>/T<b>2</b>, to obtain the latest value Inew <b>180</b> of the coil current amplitude Icoil. Both Inew <b>180</b> and Iset <b>184</b> are sent to a coil current controller <b>186</b> comprising a PI controller (Proportional-Integral controller), which generates a compensation parameter Kp<b>2</b> <b>188</b>. Since the coil current Icoil and coil voltage Vcoil have similar waveforms, the coil voltage may alternatively be monitored instead of the coil current.</p><p id="p-0101" num="0101">The two parameters Kp<b>1</b> <b>178</b> and Kp<b>2</b> <b>188</b> are then input to a duty/phase/frequency controller <b>190</b> for outputting control signals to the inverter <b>130</b>. The inverter <b>130</b> may be controlled by adjusting one or more control parameters of the inverter <b>130</b> such as the phase, duty cycle, frequency, etc. The relative change of the one or more control parameters may be proportional to the relative offset of the monitored voltage from the target voltage. Taking the duty cycle as an example, the control logic <b>190</b> may adjust the duty cycle according to the formula:</p><p id="p-0102" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>Duty_new=(1&#x2212;<i>Kp</i>1)*Kp2*Duty_old,<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0103" num="0102">where Duty_old and Duty_new are the duty cycle respectively before and after adjustment.</p><p id="p-0104" num="0103">Corresponding expressions can be obtained for Alternatively, the control system <b>140</b> may control the inverter <b>130</b> by adjusting the phase shift or frequency of the inverter <b>130</b>. For example, by increasing duty or phase or decreasing operation frequency of the inverter <b>130</b>, the wireless charging transmitter <b>100</b> can provide increased power to the power receiving device <b>600</b> to compensate for a decrease in input voltage Vin.</p><p id="p-0105" num="0104">The control loop <b>142</b> implemented by the control system <b>140</b> thereby causes the coil current Icoil to track the target coil current Iset. The coil current controller <b>186</b> generates an optimum value of Kp<b>2</b> <b>188</b> to cause the latest coil current Inew <b>180</b> to track the target value Iset <b>184</b>.</p><p id="p-0106" num="0105"><figref idref="DRAWINGS">FIG. <b>7</b></figref> schematically illustrates another example embodiment of a control loop <b>142</b>&#x2032; implemented by the control system <b>140</b> of the wireless charging transmitter <b>100</b> according to an example embodiment of the present disclosure. Whereas the control loop <b>142</b> shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref> corresponds to a &#x2018;direct&#x2019; compensation loop, the control loop <b>142</b>&#x2032; shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref> corresponds to an &#x2018;indirect&#x2019; compensation loop. <figref idref="DRAWINGS">FIG. <b>7</b></figref> shows the following elements of the wireless charging transmitter system: the voltage Vin received by the wireless charging transmitter <b>100</b> from the power source <b>500</b>, the inverter <b>130</b>, the coil <b>120</b>,the control loop <b>142</b> implemented by the control system <b>140</b>, and the power receiving device <b>600</b> wirelessly receiving power from form the wireless charging transmitter <b>100</b>.</p><p id="p-0107" num="0106">The control system <b>140</b> is configured to monitor the voltage Vin received from the voltage source <b>500</b> at the input terminals <b>112</b>, <b>114</b>, and to control the inverter <b>130</b> to adjust the inverter output voltage based on an offset between the monitored voltage and a target voltage, to at least partially compensate the offset between the monitored voltage and the target voltage. In this example embodiment, the target voltage is an average value of the monitored voltage.</p><p id="p-0108" num="0107">The control system <b>140</b> receives a signal <b>150</b> for sampling the voltage Vin received by the wireless charging transmitter <b>100</b> from the power source <b>500</b>. The voltage Vin is sampled at a first sampling frequency <b>1</b>/T<b>1</b>, to obtain the latest value Vnew <b>170</b> of Vin. A moving filter <b>172</b> or moving window is used to determine an average value Vavg <b>174</b> of the input voltage Vin over N<b>1</b> cycles of the first sampling frequency <b>1</b>/T<b>1</b>. The moving filter <b>172</b> may be implemented by a software algorithm or by hardware such as external RC circuits. N<b>1</b> is selected to provide a value Vavg sufficiently smooth to use as a reference. The values Vnew <b>170</b> and Vavg <b>174</b> are then compared to obtain an offset <b>176</b>, for example Vnew&#x2212;Vavg.</p><p id="p-0109" num="0108">The control system <b>140</b> is also configured to monitor a current Icoil in the coil <b>120</b>, and to control the inverter <b>130</b> to adjust the inverter output to reduce an offset between the latest value Inew <b>180</b> of the monitored current Icoil and a target coil current Iset&#x2032; <b>184</b>&#x2032;. The control loop <b>142</b>&#x2032; of <figref idref="DRAWINGS">FIG. <b>7</b></figref> differs from the control loop <b>142</b> of <figref idref="DRAWINGS">FIG. <b>6</b></figref> in that the offset <b>176</b>, obtained by comparing the latest value of Vnew <b>170</b> of Vin and the target voltage Vavg <b>174</b>, is used to adjust the target coil current Iset&#x2032; <b>184</b>&#x2032;. The target coil current Iset&#x2032; <b>184</b>&#x2032; is initially determined by a signal <b>182</b> received from the power receiving device <b>600</b>, in the form of a control error packet (CEP) received by in-band ASK communication method. The signal <b>182</b> may include a power increase or power decrease command for adjusting the power wirelessly transmitted from the coil <b>120</b> to the power receiving device <b>600</b>. This target coil current Iset&#x2032; <b>184</b>&#x2032; is then adjusted based on the relative voltage offset <b>176</b>, for example by adjusting the target coil current Iset&#x2032; <b>184</b>&#x2032; by an amount proportional to the relative voltage offset <b>176</b>. The control system <b>140</b> also receives a signal <b>160</b> for monitoring the current Icoil in the coil <b>120</b>. The coil current Icoil <b>160</b> is detected at a special timing window at a second sampling frequency <b>1</b>/T<b>2</b>, to obtain the latest value Inew <b>180</b> of the coil current amplitude Icoil. Both Inew <b>180</b> and Iset&#x2032; <b>184</b>&#x2032; are sent to a coil current controller <b>186</b> comprising a PI controller (Proportional-Integral controller), which generates a compensation parameter Kp<b>2</b>&#x2032; <b>188</b>&#x2032;. Since the coil current Icoil and coil voltage Vcoil have similar waveforms, the coil voltage may alternatively be monitored instead of the coil current.</p><p id="p-0110" num="0109">The compensation parameter Kp<b>2</b>&#x2032; <b>188</b>&#x2032; is then input to a duty/phase/frequency controller <b>190</b>&#x2032; for outputting control signals to the inverter <b>130</b>. The inverter <b>130</b> may be controlled by adjusting one or more control parameters of the inverter <b>130</b> such as the phase, duty cycle, frequency, etc. The relative change of the one or more control parameters may be proportional to the relative offset of the monitored voltage from the target voltage. Taking the duty cycle as an example, the controller <b>190</b>&#x2032; may adjust the duty cycle according to the formula:</p><p id="p-0111" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>Duty_new=<i>Kp</i>2*Duty_old,<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0112" num="0110">where Duty_old and Duty_new are the duty cycle respectively before and after adjustment. Alternatively, the control system <b>140</b> may control the inverter <b>130</b> by adjusting the phase shift or frequency of the inverter <b>130</b>. For example, by increasing duty or phase or decreasing operation frequency of the inverter <b>130</b>, the wireless charging transmitter <b>100</b> can provide increased power to the power receiving device <b>600</b> to compensate for a decrease in input voltage Vin.</p><p id="p-0113" num="0111">The control loop <b>142</b>&#x2032; shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref> thereby causes the coil current Icoil to track the target coil current Iset&#x2032; <b>184</b>&#x2032;. The coil current controller <b>186</b> generates an optimum value of Kp<b>2</b>&#x2032; <b>188</b>&#x2032; to cause the latest coil current Inew <b>180</b> to track the target value Iset&#x2032; <b>184</b>&#x2032;.</p><p id="p-0114" num="0112">The sampling periods T<b>1</b> and T<b>2</b> may have fixed values, for example 20 &#x3bc;s and 500 &#x3bc;s respectively. However, the control system <b>140</b>, <b>140</b>&#x2032; may be configured to automatically detect a frequency of a ripple on the input voltage Vin and to select T<b>1</b> and T<b>2</b> accordingly. For example, the control system <b>140</b>, <b>140</b>&#x2032; may include an MCU, and a hardware comparator and zero crossing points may be provided for the MCU to detect the ripple frequency. The values of T<b>1</b>, T<b>2</b> and/or N<b>1</b> may then be selected based on the ripple frequency. Typically, the compensation frequency <b>1</b>/T<b>1</b> should be at least 10 times the input AC ripple frequency. For example, for an input ripple frequency of 2 kHz, the compensation frequency <b>1</b>/T<b>1</b> may be 20 kHz or higher. N<b>1</b> would then need to be at least <b>10</b> if the compensation frequency <b>1</b>/T<b>1</b> is 20 kHz in order to cover a full period of the ripple so as to obtain a smooth value for the average value. The control frequency <b>1</b>/T<b>2</b> for the coil current may be set at 1 kHz initially. If using the direct compensation loop shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, T<b>2</b> may remain a constant value. However, when using the indirect compensation loop shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref>, one strategy is to increase the control frequency <b>1</b>/T<b>2</b> to 10 times the AC ripple frequency.</p><p id="p-0115" num="0113">The control system <b>140</b>, <b>140</b>&#x2032; therefore operates to reduce the influence on the coil current/voltage of an AC ripple on the voltage Vin received from the power source <b>500</b>, thereby improving stability of the system. Without the control system <b>140</b>, <b>140</b>&#x2032;, a ripple on the input voltage Vin would cause the coil current/voltage to fluctuate. By adjusting one or more other parameters (duty cycle, phase, frequency) of the inverter <b>130</b>, it is possible to compensate the ripple on the input voltage Vin to keep the coil current/voltage stable. The control loop implemented by the control system <b>140</b>, <b>140</b>&#x2032; therefore has the effect of compensating any fluctuations or ripple in the input voltage so that the effect of this ripple on the coil current/voltage is reduced. In turn this reduces the likelihood of ASK demodulation resulting in errors or failure due to a ripple on the input voltage, thereby improving the stability of the charging by the wireless charging transmitter.</p><p id="p-0116" num="0114">The control loop <b>142</b>, <b>142</b>&#x2032; implemented by the control system <b>140</b> may not be operational for all times. For example, in some embodiments, the control loop <b>142</b>, <b>142</b>&#x2032; may only operate when the ripple amplitude is above a predetermined threshold.</p><p id="p-0117" num="0115"><figref idref="DRAWINGS">FIG. <b>8</b></figref> illustrates an example control timing sequence for the wireless charging transmitter <b>100</b>. There are two types of key communication packets in wireless charging systems: the control error packet (CEP) for power control and received power packet (RPP) for foreign object detection (FOD). The time periods labelled ASK (CEP) and ASK (RPP) indicate times during which these respective packets are received by the wireless charging transmitter <b>100</b> from a power receiving device <b>600</b> by ASK method. After the CEP has been received, the control system <b>140</b> enters Phase <b>1</b> (P<b>1</b>) during which a conventional wireless charging power control process is implemented. The control loop <b>140</b>, <b>140</b>&#x2032; will run during this time. Phase <b>1</b> (P<b>1</b>) is followed by Phase <b>2</b> (P<b>2</b>), which is a period of silent time during which no ASK communication signal is transmitted by the power receiving device <b>600</b> The control system <b>140</b> then enters phase <b>4</b> (P<b>4</b>) during which the control loop is paused to ensure that accurate power sample data is obtained for foreign object detection (FOD). Phase <b>4</b> (P<b>4</b>) is followed by Phase <b>3</b> (P<b>3</b>), which is a period of time during which the power receiving device <b>600</b> transmits a received power packet (RPP) by ASK communication method. When an ASK signal is being received, the coil current/voltage is influenced not only by any AC ripple coupled to the input voltage but also by the modulation signal generated by the power receiving device <b>500</b>. Therefore, in the &#x201c;direct compensation&#x201d; loop shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, only the Vin compensation loop is operational during this time. It is assumed that the loading, position, and other conditions of the charging system will remain constant during the Phase <b>3</b> (P<b>3</b>) period, and that an optimum value of Kp<b>2</b> was obtained during the Phase <b>1</b> (P<b>1</b>) period, such that the most recently generated Kp<b>2</b> value can be used throughout the Phase <b>3</b> (P<b>3</b>) period. Once the next RPP has been received, control system <b>140</b> enters Phase <b>2</b> (P<b>2</b>) again. When the power receiving device <b>600</b> transmits the next control error packet (CEP), the control system <b>140</b> enters Phase <b>3</b> (P<b>3</b>). For the direct compensation mode shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, the voltage compensation loop generating the compensation parameter Kp<b>1</b> operates during Phases <b>1</b> (P<b>1</b>), <b>2</b> (P<b>2</b>) and <b>3</b> (P<b>3</b>), while the coil current control loop (generating compensation parameter Kp<b>2</b>) operates only during Phase <b>1</b> (P<b>1</b>). For the indirect compensation mode shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref>, the coil current control loop (generating the compensation parameter Kp<b>2</b>&#x2032; and including the adjustment of the target coil current <b>184</b>&#x2032; based on the voltage offset <b>176</b>), operates during Phases <b>1</b> (P<b>1</b>), <b>2</b> (P<b>2</b>) and <b>3</b> (P<b>3</b>). In this way, the control system provides good dynamic performance in response to changing conditions.</p><p id="p-0118" num="0116">Typically, the data packets/CEP are received at intervals of 200 ms. The ASK packet itself costs about 20 ms. Therefore Phase <b>3</b> (P<b>3</b>) typically lasts around 30 ms. In the part of the timing sequence immediately preceding ASK(RPP), Phase <b>1</b> (P<b>1</b>) typically lasts around 10 ms, Phase <b>2</b> (P<b>2</b>) typically lasts around 155 ms, and Phase <b>4</b> (P<b>4</b>) typically lasts around 5 ms. In the part of the timing sequence immediately preceding ASK(CEP), Phase <b>2</b> (P<b>2</b>) typically lasts around 170 ms.</p><p id="p-0119" num="0117"><figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates a system <b>1000</b> comprising a wireless charging transmitter <b>100</b> according to an example embodiment of the present disclosure. The system <b>1000</b> comprises a first wireless charging transmitter <b>100</b>, a second wireless charging transmitter <b>100</b>, and another device <b>700</b>, for example a switched-mode power supply or a device comprising a DC/DC converter, each connected to the voltage bus of a DC power source <b>500</b> in the form of a battery.</p><p id="p-0120" num="0118">The battery voltage may be influenced by the working status (power consumption, operating frequency and so on) of the various devices connected to the battery <b>500</b>, such that an AC ripple or other instantaneous perturbations may be generated on the battery voltage and thereby coupled to the coil current/voltage of the first wireless charging transmitter <b>100</b>. However, the control system <b>140</b>, <b>140</b>&#x2032; of the wireless charging transmitter <b>100</b> described above compensates fluctuations or ripples in the input voltage, to reduce or eliminate coupling of the perturbations onto the coil current. In addition, the diode device <b>180</b>, <b>180</b>&#x2032; of the first wireless charging transmitter <b>100</b> reduces or eliminates coupling of an ASK signal from the first wireless charging transmitter <b>100</b> to the DC voltage bus and thus to the coil current/voltage of the second wireless charging transmitter <b>100</b> and vice versa. In this way, the likelihood of an ASK communication error at the wireless charging transmitter <b>100</b> is reduced.</p><p id="p-0121" num="0119">The diode device of the example described above may also be used in other embodiments independently of the control loop implemented by the control system.</p><p id="p-0122" num="0120">Although particular example embodiments of the disclosure have been described above, it will be appreciated than many modifications, including additions and/or substitutions, may be made within the scope of the appended claims.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A wireless charging transmitter, comprising:<claim-text>first and second input terminals for receiving an input voltage from a power source;</claim-text><claim-text>a coil;</claim-text><claim-text>an inverter having first and second inverter input terminals coupled to the first and second input terminals respectively, and first and second inverter output terminals for providing an output voltage to the coil; and</claim-text><claim-text>a control system configured to:<claim-text>monitor a voltage between the first and second input terminals, and</claim-text><claim-text>control the inverter to adjust the output voltage, based on an offset between the monitored voltage and a target voltage, to at least partially compensate the offset between the monitored voltage and the target voltage.</claim-text></claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the control system is further configured to determine the target voltage, wherein the target voltage is an average value of the monitored voltage.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the control system is configured to control the inverter by adjusting one of a duty cycle, phase shift or frequency of the inverter by an amount that is determined by the offset between the monitored voltage and the target voltage.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the control system is configured to determine a frequency of a ripple on the monitored voltage, and to monitor the voltage between the first and second input terminals at a sampling frequency greater than the frequency of the ripple.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the control system is further configured to:<claim-text>monitor a current in the coil, and</claim-text><claim-text>control the inverter to adjust the output voltage to reduce an offset between the monitored current and a target current.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the target current is adjusted based on the offset between the monitored voltage and the target voltage to at least partially compensate the offset between the monitored voltage and the target voltage.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the control system comprises a proportional-integral (PI) controller configured to output a signal for controlling the inverter based on the offset between the monitored current and the target current.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,<claim-text>wherein the wireless charging transmitter is configured to receive a power control signal from a device wirelessly receiving power from the wireless charging transmitter, wherein the control system is configured to control the inverter to adjust the inverter output voltage to at least partially compensate the offset between the monitored voltage and the target voltage and/or to reduce an offset between the monitored current and the target current after receiving each said power control signal.</claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:<claim-text>a diode device coupled between one of the first and second input terminals and a corresponding one of the first and second inverter input terminals.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the diode device is an ideal diode.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the ideal diode comprises a MOSFET and a controller for controlling the MOSFET.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising a capacitor coupled in parallel with the inverter.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the wireless charging transmitter is a single stage power transmitter.</claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. A system comprising:<claim-text>a first wireless charging transmitter according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,</claim-text><claim-text>a second wireless charging transmitter according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,</claim-text><claim-text>wherein the first and second wireless charging transmitters are arranged to receive power from the same power source.</claim-text></claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. A method for controlling a wireless charging transmitter, the wireless charging transmitter comprising first and second input terminals for receiving an input voltage from a power source, a coil, an inverter coupled to the input terminals and configured to provide an output voltage to the coil, the method comprising:<claim-text>monitoring the input voltage, and</claim-text><claim-text>controlling the inverter to adjust the output voltage, based on an offset between the monitored voltage and a target voltage, to at least partially compensate the offset.</claim-text></claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. A wireless charging transmitter comprising:<claim-text>first and second input terminals for receiving an input voltage from a power source;</claim-text><claim-text>a coil;</claim-text><claim-text>an inverter having first and second inverter input terminals coupled to the first and second input terminals respectively, and first and second inverter output terminals for providing an output voltage to the coil; and</claim-text><claim-text>a diode device coupled between one of the first and second input terminals and a corresponding one of the first and second inverter input terminals.</claim-text></claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The wireless charging transmitter of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the diode device is an ideal diode.</claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. The wireless charging transmitter according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the ideal diode comprises a MOSFET and a controller for controlling the MOSFET.</claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. The system of clam <b>14</b>, wherein the first wireless charging transmitter comprises a diode device coupled between one of the first and second input terminals and a corresponding one of the first and second inverter input terminals.</claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising:<claim-text>monitoring a current in the coil, and</claim-text><claim-text>controlling the inverter to adjust the output voltage, to reduce an offset between the monitored current and a target current.</claim-text></claim-text></claim></claims></us-patent-application>