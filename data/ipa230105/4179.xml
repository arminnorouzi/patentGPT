<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230004180A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230004180</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17365778</doc-number><date>20210701</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>05</class><subclass>F</subclass><main-group>1</main-group><subgroup>571</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>H</subclass><main-group>3</main-group><subgroup>20</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>H</subclass><main-group>3</main-group><subgroup>087</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>H</subclass><main-group>9</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>05</class><subclass>F</subclass><main-group>1</main-group><subgroup>571</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>H</subclass><main-group>3</main-group><subgroup>202</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>H</subclass><main-group>3</main-group><subgroup>087</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>H</subclass><main-group>9</main-group><subgroup>001</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">OVER VOLTAGE DETECTION AND PROTECTION</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>NXP USA, Inc.</orgname><address><city>Austin</city><state>TX</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>DELSHADPOUR</last-name><first-name>Siamak</first-name><address><city>Phoenix</city><state>AZ</state><country>US</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Dashtestani</last-name><first-name>Ahmad</first-name><address><city>Gilbert</city><state>AZ</state><country>US</country></address></addressbook></inventor></inventors></us-parties><assignees><assignee><orgname>NXP USA, Inc.</orgname><role>02</role></assignee></assignees></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">Various embodiments relate to a protection circuit, comprising: a pad configured to input an external voltage from a connector; a first circuit branch connected to the pad and configured to receive a fast ramp-up over voltage at the pad; a second circuit branch connected to the pad and configured to receive a ramp-up over voltage at the pad; a third circuit branch connected to the pad and configured to output an over voltage detection signal when an over voltage is received at the pad, wherein the third circuit branch includes a voltage divider with a variable resistor with a variable voltage node and an enable switch; and a logic circuit including an enabling transistor configured to control the variable resistor and the enable switch.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="112.01mm" wi="145.97mm" file="US20230004180A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="226.40mm" wi="157.23mm" file="US20230004180A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="227.92mm" wi="151.47mm" file="US20230004180A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="145.46mm" wi="148.00mm" file="US20230004180A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="232.24mm" wi="137.50mm" orientation="landscape" file="US20230004180A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="72.47mm" wi="143.00mm" file="US20230004180A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="233.43mm" wi="126.15mm" orientation="landscape" file="US20230004180A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">TECHNICAL FIELD</heading><p id="p-0002" num="0001">Various exemplary embodiments disclosed herein relate generally to systems and methods for over voltage detection/protection. This over voltage detection and protection.</p><heading id="h-0002" level="1">BACKGROUND</heading><p id="p-0003" num="0002">Circuits have a functional voltage that is used to power the circuit. Any voltage over this functional voltage may be considered an over voltage (OV). OV may lead to damage of the circuit. Circuits may include various elements and use various methods to protect against OV situations.</p><heading id="h-0003" level="1">SUMMARY</heading><p id="p-0004" num="0003">A summary of various exemplary embodiments is presented below. Some simplifications and omissions may be made in the following summary, which is intended to highlight and introduce some aspects of the various exemplary embodiments, but not to limit the scope of the invention. Detailed descriptions of an exemplary embodiment adequate to allow those of ordinary skill in the art to make and use the inventive concepts will follow in later sections.</p><p id="p-0005" num="0004">Various embodiments relate to a protection circuit, including: a pad configured to input an external voltage from a connector; a first circuit branch connected to the pad and configured to receive a fast ramp-up over voltage at the pad; a second circuit branch connected to the pad and configured to receive a ramp-up over voltage at the pad; a third circuit branch connected to the pad and configured to output an over voltage detection signal when an over voltage is received at the pad, wherein the third circuit branch includes a voltage divider with a variable resistor with a variable voltage node and an enable switch; and a logic circuit including an enabling transistor configured to control the variable resistor and the enable switch.</p><p id="p-0006" num="0005">Various embodiments are described, wherein the third branch includes a comparator configured to output the over voltage detection signal when the voltage received at the pad is over and over voltage threshold level.</p><p id="p-0007" num="0006">Various embodiments are described, wherein the enabling transistor enables the comparator when the voltage received at the pad is above an enabling threshold voltage level, wherein the enabling threshold voltage level is less than the over voltage threshold level.</p><p id="p-0008" num="0007">Various embodiments are described, wherein the protection circuit stays off in a first state to avoid current consumption of the comparator when the voltage at the pad is below the enabling threshold voltage level.</p><p id="p-0009" num="0008">Various embodiments are described, wherein the comparator outputs an over-voltage signal to shut down a switch configured to protect a circuit when the switch is in an on-mode.</p><p id="p-0010" num="0009">Various embodiments are described, wherein the comparator compares a reference voltage to the voltage at the variable voltage node.</p><p id="p-0011" num="0010">Various embodiments are described, wherein logic circuit receives an input and controls the variable resistor to control the variable voltage to control at what input external voltage the over voltage signal will be produced.</p><p id="p-0012" num="0011">Various embodiments are described, wherein when the enable switch is off, power is not supplied to transistors of the third branch.</p><p id="p-0013" num="0012">Various embodiments are described, wherein when a circuit to be protected is on and the pad voltage is below the over voltage level, a DC current of third circuit branch is zero.</p><p id="p-0014" num="0013">Various embodiments are described, wherein the logic circuit further includes a decoder connected to the enabling transistor, wherein the decoder is configured to produce output signals to control the variable resistor.</p><p id="p-0015" num="0014">Various embodiments are described, wherein the decoder has a plurality of inputs, the decoder has a plurality of outputs, and the decoder actives one of the plurality of outputs based upon the received plurality of inputs.</p><p id="p-0016" num="0015">Various embodiments are described, wherein the variable resistor further comprises: a plurality of resistors; and a plurality of transistors, wherein each of the plurality of transistors in connected in parallel with one of the plurality of resistors and each of the plurality transistors is connected to one of the plurality of outputs of the decoder.</p><p id="p-0017" num="0016">Various embodiments are described, wherein the first branch includes a pair of series connected capacitors.</p><p id="p-0018" num="0017">Various embodiments are described, wherein the third branch includes an extended drain transistor to protect internal circuitry of the protection circuit during an over voltage event.</p><p id="p-0019" num="0018">Various embodiments are described, wherein the third branch includes a plurality of cascoded transistors to protect internal circuitry of the protection circuit during an over voltage event.</p><p id="p-0020" num="0019">Various embodiments are described, comprising a plurality of series connected transistors to contribute to a threshold voltage of the first branch.</p><p id="p-0021" num="0020">Various embodiments are described, wherein the series-connected transistors are diode-connected transistors.</p><p id="p-0022" num="0021">Further various embodiments relate to a circuit to be protected from an over voltage, including: an input pad configured to receive an external voltage from a connector; an output configured to be coupled to the circuit to be protected; a switch coupled between the input pad and the output having a control input configured to open and close the switch; and protection circuit configured to control the switch, including: a first circuit branch connected to the input pad and configured to receive a fast ramp-up over voltage at the input pad; a second circuit branch connected to the input pad and configured to receive a ramp-up over voltage at the input pad; a third circuit branch connected to the input pad and configured to output an over voltage detection signal when an over voltage is received at the input pad, wherein the third circuit branch includes a voltage divider with a variable resistor with a variable voltage node and an enable switch; a logic circuit including an enabling transistor configured to control the variable resistor and the enable switch, wherein the over protection detection signal is connected to the control input of the switch.</p><p id="p-0023" num="0022">Various embodiments are described, wherein the third branch includes a comparator configured to output the over voltage detection signal when the voltage received at the pad is over an over voltage threshold level.</p><p id="p-0024" num="0023">Various embodiments are described, wherein the enabling transistor enables the comparator when the voltage received at the pad is above an enabling threshold voltage level, wherein the enabling threshold voltage level is less than the over voltage threshold level.</p><p id="p-0025" num="0024">Various embodiments are described, wherein the protection circuit stays off in a first state to avoid current consumption of the comparator when the voltage at the pad is below the enabling threshold voltage level.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0026" num="0025">In order to better understand various exemplary embodiments, reference is made to the accompanying drawings, wherein:</p><p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. <b>1</b></figref> illustrates a simple example of bi-directional repeater with a system supply of 1.8V and 3.3V domain;</p><p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates the voltage signals on the 3.3V V<sub>DD</sub>, USB2 pin, and the over voltage detection signal OV_det;</p><p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates a chip that includes the OV detection circuitry on a printed circuit board (PCB) with a connector;</p><p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. <b>4</b></figref>. Illustrates a traditional implementation of the OV detection circuit;</p><p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. <b>5</b></figref> illustrates another traditional implementation of the OV detection circuit;</p><p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. <b>6</b></figref> illustrates a block diagram of the OV detection circuit;</p><p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. <b>7</b></figref> illustrates a more detailed transistor level diagram of the OV detection circuit;</p><p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. <b>8</b></figref> illustrates the input and output voltages of the OV protection circuitry; and</p><p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates a high-voltage version of the OV detector circuit using high-voltage components;</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><p id="p-0036" num="0035">To facilitate understanding, identical reference numerals have been used to designate elements having substantially the same or similar structure and/or substantially the same or similar function.</p><heading id="h-0005" level="1">DETAILED DESCRIPTION</heading><p id="p-0037" num="0036">The description and drawings illustrate the principles of the invention. It will thus be appreciated that those skilled in the art will be able to devise various arrangements that, although not explicitly described or shown herein, embody the principles of the invention and are included within its scope. Furthermore, all examples recited herein are principally intended expressly to be for pedagogical purposes to aid the reader in understanding the principles of the invention and the concepts contributed by the inventor(s) to furthering the art and are to be construed as being without limitation to such specifically recited examples and conditions. Additionally, the term, &#x201c;or,&#x201d; as used herein, refers to a non-exclusive or (i.e., and/or), unless otherwise indicated (e.g., &#x201c;or else&#x201d; or &#x201c;or in the alternative&#x201d;). Also, the various embodiments described herein are not necessarily mutually exclusive, as some embodiments can be combined with one or more other embodiments to form new embodiments.</p><p id="p-0038" num="0037">When a device is connected to another device using a connector, there is the potential for over voltage (OV) situations to arise (this may happen due to insertion of wrong cable or wrong plugging in which shorts a low voltage pin to a high-voltage one). The OV may damage circuits in the device. Accordingly, OV protection circuits and methods have been developed.</p><p id="p-0039" num="0038">For example, an eUSB to USB2 repeater is a good example of connector facing pins getting shorted to higher voltage, such as V<sub>BUS</sub>, through the connector. Depending on the system, V<sub>BUS </sub>may be 5V or 20V (Type-C USBPD). Embodiments will be described that protect against shorts of V<sub>BUS </sub>or other pins or any other situation that lead to OV.</p><p id="p-0040" num="0039">A bi-directional form of a USB2 to eUSB repeater may include eUSB side pins in 1.2V domain while USB2 pins are in a 3.3V domain. In a connector any of the USB2 pins may be shorted to V<sub>BUS</sub>, which may be either 5V or 20V. This means that any of the devices connected to the pins need to tolerate a V<sub>BUS </sub>voltage of either 5V or 20V as shorting of the pins is possible.</p><p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. <b>1</b></figref> illustrates a simple example of bi-directional repeater with a system supply of 1.8V and 3.3V domain. A system supply <b>102</b> provides a 1.8V supply to a 1.8V pad <b>104</b> and a 3.3V supply to a 3.3V pad <b>114</b>. External capacitors <b>128</b> and <b>130</b> are connected to the pads <b>104</b> and <b>114</b> respectively. The bi-directional repeater <b>100</b> includes 1.8V domain (this may also be a different domain, e.g., 1.2V domain which is eUSB standard domain) circuits <b>106</b> and 3.3V domain circuits <b>116</b>. Output side of the transmit and input side of the receive drivers <b>110</b> and <b>108</b> may be in the 1.8V domain and are connected between eUSB pad <b>112</b> and USB2 pad <b>122</b>. Also, output side of the transmit and input side of the receive drivers <b>118</b> and <b>120</b> may be in the 3.3V domain and are connected between eUSB pad <b>112</b> and USB2 pad <b>122</b>. The USB2 pad <b>122</b> may be connected to a connector <b>126</b> that may include a V<sub>BUS </sub>pin providing 5V. Any of the circuits in the 1.8V domain or the 3.3V domain could be damaged if a short occurs with the V<sub>BUS </sub>pin occurs. If RX and TX circuits driving the USB2 connector facing pins are made of transistors which are 5V (or high-voltage) tolerant and are architected in a way that other devices which are connected to high voltage facing device are safe too, no issue arises. A problem arises when the external capacitors <b>128</b> and <b>130</b> is charged to higher voltage through transistors which are between the high voltage facing pin and the corresponding supply. Another problems is that other internal circuitries which are inside the chip itself may face this higher voltage and then the bi-directional repeater <b>100</b> fails.</p><p id="p-0042" num="0041">Even if bi-directional repeater <b>100</b> is implemented in a way that its devices are safe (e.g., they all are high voltage devices or have protection mechanism), if the voltage on the external capacitors <b>128</b> and <b>130</b> increases, devices in the 1.8V or 3.3V voltage domain may be damaged.</p><p id="p-0043" num="0042">An OV detection circuit <b>124</b> detects the higher voltage on the pin at pad <b>122</b> and shuts down the path from pin to supply (both 1.8V and 3.3V supplies) immediately. This path could be in the repeater case TX of the LS/FS or HS USB2, but is not limited to these blocks and may be applied in any other applicable path.</p><p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates the voltage signals on the 3.3V V<sub>DD</sub>, USB2 pin, and the over voltage detection signal OV_det. The 3.3V V<sub>DD </sub><b>205</b> is shown as a constant 3.3V signal. Then a 3.3V magnitude signal starts on the USB2 pin <b>210</b>. The signal on the USB2 pin <b>210</b> then starts to increase, and when a 4.4V threshold is exceeded, the OV_det signal indicates an overvoltage situation on the USB2 pin which rises to 5V. The OV_det signal then cause the OV protection circuitry to shunt the excess voltage to ground allowing the 3.3V signal to return to is proper 3.3V level. The dotted line for the 3.3V V<sub>DD </sub>signal shows what the voltage signal would be without OV protection.</p><p id="p-0045" num="0044">The same concept may be considered for V<sub>BUS</sub>=20V case which also needs a fast response time to shut down the corresponding path.</p><p id="p-0046" num="0045">Embodiments of a OV protection method and circuit will be described herein. These embodiments will include the following benefits: no leakage current on pin in functional voltage range; no current from supply in functional voltage range; fast response to over voltage condition; small area, low complexity, zero dc current (from pin and supplies) in normal condition; large resistive path to pin to avoid any considerable loading effect; and small parasitic cap impact to avoid USB2-HS performance degradation. Further, these embodiments do not affect the functionality during normal operation when the over voltage condition is not present. The OV detection circuit reacts fast during the over voltage condition and shuts down the required circuits to keep them safe if needed and cuts the resistive paths to supply to avoid any supply line lift up due to over voltage event on the pin.</p><p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates a chip that includes the OV detection circuitry on a printed circuit board (PCB) with a connector <b>330</b>. The chip may include a USB2 pad <b>310</b> coupled to the connector <b>330</b> and a eUSB pad <b>315</b>. The chip includes RX/TX <b>320</b> and <b>325</b>. The OV detection circuitry <b>305</b> is connected to the pad <b>310</b> and determines when a voltage on the pad is above an OV threshold and then generates the OV_det signal indicating the presents of an OV situation. This OV_det signal may be applied directly to the RX/TX <b>320</b> and <b>325</b> to shut them down if they were ON or may be sent to digital core that controls all analog blocks to be applied to RX/TX. While an eUSB/USB2 bidirectional repeater is used as an example, the OV detection circuit and method may be applied to other types of circuits.</p><p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. <b>4</b></figref>. Illustrates a traditional implementation of the OV detection circuit. The OV detection circuit <b>405</b> has one input connected to the pad <b>410</b>. The OV detection circuit <b>405</b> also receives a reference voltage V<sub>ref</sub>. The OV detection circuit <b>405</b> compares the voltage on the pad <b>410</b> with the reference voltage V<sub>ref </sub>and outputs a signal OV_det when the voltage on the pad <b>410</b> is greater than the reference voltage V<sub>ref</sub>. The OV_det signal may then be used by the circuit <b>420</b> to shut off certain parts of the circuit <b>420</b> and to shunt the over voltage to ground. <figref idref="DRAWINGS">FIG. <b>5</b></figref> illustrates another traditional implementation of the OV detection circuit. The implementation of <figref idref="DRAWINGS">FIG. <b>5</b></figref> is the same as that in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, but a voltage divider <b>535</b> is used to divide the voltage on the pad <b>410</b> down to a lower value that is then input into the OV detection circuit <b>405</b>. This approach may be used when the potential volage at the pad <b>410</b> is high which then is reduced down to a more manageable value to be input to the OV detection circuit <b>405</b>. One weakness of this circuit is it always takes some current from the pad which will be added to a pad current leakage which is preferred to be avoided.</p><p id="p-0049" num="0048">In these traditional implementations of the OV detect circuit, a fast comparator will be able to handle the job of protecting the circuitry. However, it will consume few hundred micro amps of current for a response time of few 10 s of ns. The surge or over voltage condition does not happen in normal conditions, so consuming a constant DC current all the time is not a desirable choice. Considering that more than one pin needs OV protection, the DC consumed current will be high, which is not good for low power applications.</p><p id="p-0050" num="0049">An embodiment of a OV detection circuit may use a threshold in order to reduce the power consumed by the OV detection circuit. The OV detection circuit remains off when a pin voltage is below a threshold level which makes the DC current of the OV detector zero. This threshold level may be slightly above the functional voltage of the pin. The OV detector quickly turns on when the pin voltage is above the threshold level which is 4V in this example (functional mode is up to 4V). This then enables a comparator in the OV detector to determine whether voltage is above the level which needs to be considered as high-voltage, in this example 4.5V. The output of the comparator will be the OV_det signal.</p><p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. <b>6</b></figref> illustrates a block diagram of the OV detection circuit. The OV detection circuit <b>600</b> includes a pad <b>602</b> that is connected to a pin providing an input signal and ground <b>608</b>. An always on fast path using capacitors <b>604</b> and <b>606</b> in series are connected between pad <b>602</b> and ground <b>608</b>.</p><p id="p-0052" num="0051">An always on high resistance path is also connected between the pad <b>602</b> and ground <b>609</b>. This path includes a resistor <b>610</b>, threshold circuit <b>612</b>, resistor <b>614</b>, and resistor <b>616</b> in series. Further a voltage clamp <b>620</b> is connected to a junction between the threshold circuit <b>612</b> and resistor <b>614</b> and ground <b>608</b>. This path will turn on when the voltage at pad <b>602</b> reaches the first threshold value discussed above (4V). Logic circuit <b>630</b> is connected between a junction of the resistors <b>614</b> and <b>616</b> and is also connected to a variable resistor <b>640</b> and an enable switch <b>670</b>. The logic circuit <b>630</b> sets the variable resistor <b>640</b> to a specific resistance which will allow for different threshold values to be used. The variable resistor <b>640</b> along with resistor <b>618</b> forms a voltage divider that scales the voltage on pad <b>602</b> that is then input into the protection circuit <b>650</b> that then connects to the comparator <b>660</b>. The protection circuit <b>650</b> keeps the comparator input at a safe level when the resistor divider branch is disabled. The logic circuit <b>630</b> also produces an enable signal that controls a switch <b>670</b> that enables and disables the comparator <b>660</b>. This switch <b>670</b> is what turns the comparator <b>660</b> on and off to reduce power consumption when the voltage on pad <b>602</b> is below a threshold value. The comparator <b>660</b> use either a 1.8V or 3.3V (or any other comment voltage supply level). This allows for low voltage components to be used for the comparator which may save area on the chip.</p><p id="p-0053" num="0052">The comparator <b>660</b> receives a voltage reference V<sub>ref </sub>that is compared to the input from the protection circuit <b>640</b>. This reference may be for example a voltage that corresponds to a 4.4V on the pad <b>602</b>. Accordingly, when the voltage from the protection circuit <b>650</b> exceeds that value, then the comparator will output a signal OV_det indicating an over voltage situation.</p><p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. <b>7</b></figref> illustrates a more detailed transistor level diagram of the OV detection circuit. The threshold circuit <b>612</b>, voltage clamp <b>620</b>, logic <b>630</b>, variable resistor <b>640</b>, protection circuit <b>650</b>, and comparator <b>660</b> are shown in more detail.</p><p id="p-0055" num="0054">The threshold circuit <b>612</b> may be implemented using a transistor M<sub>C1 </sub><b>717</b> that is controlled by a voltage V<sub>R </sub>through resistor R<sub>g1 </sub><b>714</b>. The voltage clamp <b>620</b> may be implemented as two diodes, where the diodes are formed by two transistors M<sub>D1 </sub><b>722</b> and M<sub>D2 </sub><b>724</b> connected in series.</p><p id="p-0056" num="0055">The logic circuit <b>630</b> may include a resistor R<sub>3 </sub><b>732</b>, a transistor M<sub>E </sub><b>736</b>, a buffer <b>734</b>, and a decoder <b>730</b>. The resistor R<sub>3 </sub><b>732</b> and transistor M<sub>E </sub><b>732</b> are connected in series between a 1.8V voltage supply and ground. The gate of the transistor M<sub>E </sub><b>736</b> is controlled by a voltage V<sub>Y </sub>at the node be between resistors R<sub>1 </sub><b>614</b> and R<sub>2 </sub><b>616</b>. When the voltage V<sub>Y </sub>is high enough it turns on the transistor M<sub>E </sub><b>736</b>. This causes the buffer <b>734</b> to then produce an enable signal. The enable signal controls the switch <b>670</b> that turns the comparator <b>660</b> on and off. The enable signal also enables a decoder <b>730</b> that in this case receives two input bits B<sub>1 </sub>and B<sub>2</sub>. The two input bits allow for four different values to be indicated. The decoder <b>730</b> has four different outputs, and one of the different outputs will be activated based upon the two input bits B<sub>1 </sub>and B<sub>2</sub>. While 2-bits is an example, more bits which is equal to have more threshold levels may be used as well.</p><p id="p-0057" num="0056">The variable resistor <b>640</b> may include four resistors R<sub>D1 </sub><b>741</b>, R<sub>D3 </sub><b>743</b>, R<sub>D3 </sub><b>743</b>, and R<sub>D4 </sub><b>744</b>. Each of the four resistors is connected in series with one of four transistors M<sub>1 </sub><b>731</b>, M<sub>2 </sub><b>732</b>, M<sub>3 </sub><b>733</b>, and M<sub>4 </sub><b>734</b>. Each of the gates of the four transistors M<sub>1 </sub><b>731</b>, M<sub>2 </sub><b>732</b>, M<sub>3 </sub><b>733</b>, and M<sub>4 </sub><b>734</b> is connected to one of the outputs of the decoder <b>730</b>. Thus, the output of the decoder selects a specific resistance value to be used as part of a voltage divider with resistor R<sub>D0 </sub><b>618</b> that results in there being different effective threshold values applied to the input values from the pad <b>602</b>.</p><p id="p-0058" num="0057">The protection circuity <b>650</b> may be implemented using a transistor M<sub>C2 </sub><b>752</b> controlled by a voltage V<sub>RG </sub>through a resistor R<sub>g2 </sub><b>754</b>.</p><p id="p-0059" num="0058">The comparator <b>662</b> may be implemented using a set of transistors <b>761</b>, <b>762</b>, <b>763</b>, and <b>764</b> to carry out the comparison of the inputs. The comparator <b>662</b> may also include an output stage that includes transistors <b>765</b> and <b>766</b> and resistors <b>767</b> and <b>768</b> as shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>.</p><p id="p-0060" num="0059">The operation of the OV protection circuit <b>700</b> will now be described. In the following description, the always on high resistive path is called branch 1 and the low resistance normally off path is called branch 2. Branches 1 and 2 are connected to the pad <b>602</b>. Further, the comparator <b>660</b> is connected to chip power supply, which is 1.8V in this example. The decoder <b>730</b> receives three input bits. One is an enable bit from the buffer <b>734</b>. The other two bits are the input data bits B<sub>1 </sub>and B<sub>2</sub>. Also the decoder <b>730</b> is a 2&#xd7;4 decoder, and the truth table for the decoder <b>730</b> may be as follows:</p><p id="p-0061" num="0000"><tables id="TABLE-US-00001" num="00001"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="4"><colspec colname="1" colwidth="21pt" align="center"/><colspec colname="2" colwidth="49pt" align="center"/><colspec colname="3" colwidth="77pt" align="center"/><colspec colname="4" colwidth="70pt" align="center"/><thead><row><entry namest="1" nameend="4" align="center" rowsep="1"/></row><row><entry>B<sub>2</sub>B<sub>1</sub></entry><entry>enable</entry><entry>V<sub>gate </sub>(M<sub>4</sub>, M<sub>3</sub>, M<sub>2</sub>, M<sub>1</sub>)</entry><entry>V<sub>pad </sub>Divide ratio</entry></row><row><entry namest="1" nameend="4" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry>XX</entry><entry>0</entry><entry>0000</entry><entry>1</entry></row><row><entry>00</entry><entry>1</entry><entry>0001</entry><entry>R<sub>D1</sub>/(R<sub>D1 </sub>+ R<sub>D0</sub>)</entry></row><row><entry>01</entry><entry>1</entry><entry>0010</entry><entry>R<sub>D2</sub>/(R<sub>D2 </sub>+ R<sub>D0</sub>)</entry></row><row><entry>10</entry><entry>1</entry><entry>0100</entry><entry>R<sub>D3</sub>/(R<sub>D3 </sub>+ R<sub>D0</sub>)</entry></row><row><entry>11</entry><entry>1</entry><entry>1000</entry><entry>R<sub>D4</sub>/(R<sub>D4 </sub>+ R<sub>D0</sub>)</entry></row><row><entry namest="1" nameend="4" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0062" num="0060">The DC behavior of the OP detection circuit will now be described. When V<sub>pin</sub>&#x3c;V<sub>Functional </sub>(where V<sub>pin </sub>is the voltage at pad <b>602</b> and V<sub>Functional </sub>is the first threshold value of 4V in this example), both branches, 1 and 2 are off, leakage current from the pad to OV detection circuit <b>700</b> is zero, enable=0, the comparator <b>660</b> is disabled, and the current from supply is zero as well.</p><p id="p-0063" num="0061">When V<sub>pin</sub>&#x3e;4V and V<sub>pin</sub>&#x3c;4.4V, the OV detection circuit <b>660</b> is activated and ready to react. The voltage V<sub>R </sub>at the gate of the transistor M<sub>C1 </sub><b>717</b> is connected to a 3.3V with a nominal range of 3.3 to 3.6 V</p><p id="p-0064" num="0062">When V<sub>pin</sub>&#x3e;V<sub>R</sub>+V<sub>th</sub>, branch 1 turns on. In this example, V<sub>th </sub>the threshold of one transistor which is, e.g., 0.7V so that V<sub>R</sub>+V<sub>th</sub>=3.3V+0.7=4V. The flow of current in branch 1 results in the diode connected transistors, M<sub>D1 </sub><b>722</b> and M<sub>D2 </sub><b>724</b>, to be ON and results in V<sub>X</sub>=2V<sub>D</sub>=2*0.7V=1.4V.</p><p id="p-0065" num="0063">This makes V<sub>Y</sub>=V<sub>X</sub>*(R<sub>2</sub>/R<sub>1</sub>+R<sub>2</sub>)=1V&#x3e;V<sub>th </sub>of transistor M<sub>E </sub><b>736</b> (where V<sub>X </sub>is the voltage at a node between resistors R<sub>1 </sub><b>614</b> and R<sub>2 </sub><b>616</b>). Note that R<sub>1 </sub>and R<sub>2 </sub>are selected to provide the 1.4 to 1 ratio. This makes enable=1, which enables output of decoder <b>660</b>, and the decoder <b>730</b> the has control bits of B<sub>2 </sub>and B<sub>1 </sub>to select different OV detection thresholds if needed. Depending on the B<sub>2</sub>B<sub>1 </sub>code value, one of the transistors M<sub>4 </sub><b>734</b>, M<sub>3 </sub><b>733</b>, M<sub>2 </sub><b>732</b>, or M<sub>1 </sub><b>731</b> is enabled so that the branch 2 path is enabled.</p><p id="p-0066" num="0064">Ignoring the R<sub>on </sub>of transistor M<sub>i</sub>, V<sub>C</sub>=Vpad* R<sub>Di</sub>/(R<sub>Di</sub>+R<sub>D0</sub>), where VC is the voltage at the node between the resistor R<sub>D0 </sub><b>618</b> and the variable resistor <b>640</b>. Assuming that V<sub>ref </sub>of comparator=1.2V, V<sub>RG </sub>and (R<sub>Di</sub>/(R<sub>Di</sub>+R<sub>D0</sub>) are selected in a way that provides a 4.4V to 1.2V ratio.</p><p id="p-0067" num="0065">When V<sub>pin</sub>&#x3e;4.4V during the watch period, the voltage at pad <b>602</b> leaks to branches 1 and 2 which is not an issue because this is above the functional voltage of the pin and the OV condition is expected. The resistance values R<sub>0</sub>, R<sub>1 </sub>and R<sub>2 </sub>may be large values, e.g., 250 k&#x3a9;+ while R<sub>Di </sub>are smaller values in the k&#x3a9; range for a fast reaction time of circuit. The comparator <b>660</b> is active and when the pad voltage goes above 4.4V, V<sub>C </sub>goes above 1.2V and comparator output indicates an over voltage condition.</p><p id="p-0068" num="0066">Transistor M<sub>C2 </sub><b>752</b> acts as a clamp for input signal of comparator <b>660</b>, and its input sees a clamped voltage of V<sub>RG</sub>&#x2212;V<sub>th </sub>below the transistor <b>763</b>, which is used as input transistor of comparator. The transistors <b>761</b>, <b>762</b>, <b>763</b>, and <b>764</b> may be transistors using a first gate insulating layer (GO1). The maximum GO1 device voltage should be 2.4V, so V<sub>RG,max</sub>=2.4V+V<sub>th</sub>=3.1V.</p><p id="p-0069" num="0067"><figref idref="DRAWINGS">FIG. <b>8</b></figref> illustrates the input and output voltages of the OV protection circuitry. When the input voltage <b>805</b> is above 3.6V, the enable signal <b>810</b> goes high, and the threshold based circuitry will turn ON and enable the comparator <b>660</b>. The comparator output <b>810</b> will go high when the input pad voltage <b>805</b> is above 4.4V. The comparator <b>660</b> adds some hysteresis to differentiate low-to-high and high-to-low transitions for noise immunity purpose to prevent fluctuation of the output. This is shown as a 4.2 s transition from the high to low condition <b>820</b>.</p><p id="p-0070" num="0068">If input pad voltage <b>805</b> goes up slowly, the diode/resistive path will handle the job, while in the case of a fast ramp-up or surge, two series capacitors <b>604</b> and <b>606</b> will act faster, and the transistor M<sub>E </sub><b>736</b> will be enabled, and the rest of circuits will be enabled afterwards.</p><p id="p-0071" num="0069"><figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates a 20V version of the OV detector circuit <b>900</b>. The OV detector circuit <b>900</b> is identical to the OV detector circuit <b>700</b> accept some of the transistors in the OV detector circuit <b>900</b> are now high power transistors. The high power transistors may be extended drain MOS transistors in order to tolerate higher voltage. This means that the drain may be used for connector side and source can be used for host side. Also, different transistors may tolerate different max voltages, so protection may be required for the different devices. In <figref idref="DRAWINGS">FIG. <b>10</b></figref>, transistors M<sub>C1 </sub><b>017</b>, M<sub>C2 </sub><b>954</b>, M<sub>1 </sub><b>931</b>, M<sub>2 </sub><b>932</b>, M<sub>3 </sub><b>933</b>, and M<sub>4 </sub><b>934</b> are high-voltage transistors.</p><p id="p-0072" num="0070">In another embodiment, the transistors M<sub>C1 </sub><b>917</b>, M<sub>C2 </sub><b>954</b>, M<sub>1 </sub><b>931</b>, M<sub>2 </sub><b>932</b>, M<sub>3 </sub><b>933</b>, and M<sub>4 </sub><b>934</b> may be replaced by a plurality of cascaded low power transistors with the proper bias voltages applied in order to accommodate higher voltage operation. The type and number of transistors are selected to accommodate the anticipated voltage. This cascading of low power transistors is described in U.S. Pat. No. 10,742,116, which is incorporated herein by reference for all purposes as if included herein.</p><p id="p-0073" num="0071">The embodiments described herein may be used for any kind of over voltage detection in a high speed or low speed applications. Detection level and speed may be adjusted by changing circuit components to address specific over voltage detection requirements. Detection accuracy may be improved by tightening the reference variation and trimming components if needed. The static current in normal operation in absence of surge or over voltage is zero. The consumed current in surge event is a function of pad voltage <b>602</b>, but the current consumption may be traded off with the required speed.</p><p id="p-0074" num="0072">It should be appreciated by those skilled in the art that any block diagrams herein represent conceptual views of illustrative circuitry embodying the principles of the invention.</p><p id="p-0075" num="0073">Although the various exemplary embodiments have been described in detail with particular reference to certain exemplary aspects thereof, it should be understood that the invention is capable of other embodiments and its details are capable of modifications in various obvious respects. As is readily apparent to those skilled in the art, variations and modifications can be affected while remaining within the spirit and scope of the invention. Accordingly, the foregoing disclosure, description, and figures are for illustrative purposes only and do not in any way limit the invention, which is defined only by the claims.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A protection circuit, comprising:<claim-text>a pad configured to input an external voltage from a connector;</claim-text><claim-text>a first circuit branch connected to the pad and configured to receive a fast ramp-up over voltage at the pad;</claim-text><claim-text>a second circuit branch connected to the pad and configured to receive a ramp-up over voltage at the pad;</claim-text><claim-text>a third circuit branch connected to the pad and configured to output an over voltage detection signal when an over voltage is received at the pad, wherein the third circuit branch includes a voltage divider with a variable resistor with a variable voltage node and an enable switch; and</claim-text><claim-text>a logic circuit including an enabling transistor configured to control the variable resistor and the enable switch.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The protection circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the third branch includes a comparator configured to output the over voltage detection signal when the voltage received at the pad is over and over voltage threshold level.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The protection circuit of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the enabling transistor enables the comparator when the voltage received at the pad is above an enabling threshold voltage level, wherein the enabling threshold voltage level is less than the over voltage threshold level.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The protection circuit of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the protection circuit stays off in a first state to avoid current consumption of the comparator when the voltage at the pad is below the enabling threshold voltage level.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The protection circuit of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the comparator outputs an over-voltage signal to shut down a switch configured to protect a circuit when the switch is in an on-mode.</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The protection circuit of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the comparator compares a reference voltage to the voltage at the variable voltage node.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The protection circuit of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein logic circuit receives an input and controls the variable resistor to control the variable voltage to control at what input external voltage the over voltage signal will be produced.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The protection circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein when the enable switch is off, power is not supplied to transistors of the third branch.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The protection circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein when a circuit to be protected is on and the pad voltage is below the over voltage level, a DC current of third circuit branch is zero.</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The protection circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the logic circuit further includes a decoder connected to the enabling transistor, wherein the decoder is configured to produce output signals to control the variable resistor.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The protection circuit of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein<claim-text>the decoder has a plurality of inputs,</claim-text><claim-text>the decoder has a plurality of outputs, and</claim-text><claim-text>the decoder actives one of the plurality of outputs based upon the received plurality of inputs.</claim-text></claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The protection circuit of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the variable resistor further comprises:<claim-text>a plurality of resistors; and</claim-text><claim-text>a plurality of transistors, wherein each of the plurality of transistors in connected in parallel with one of the plurality of resistors and each of the plurality transistors is connected to one of the plurality of outputs of the decoder.</claim-text></claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The protection circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first branch includes a pair of series connected capacitors.</claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The protection circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the third branch includes an extended drain transistor to protect internal circuitry of the protection circuit during an over voltage event.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The protection circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the third branch includes a plurality of cascoded transistors to protect internal circuitry of the protection circuit during an over voltage event.</claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The protection circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, comprising a plurality of series connected transistors to contribute to a threshold voltage of the first branch.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The protection circuit of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the series-connected transistors are diode-connected transistors.</claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. A circuit to be protected from an over voltage, comprising:<claim-text>an input pad configured to receive an external voltage from a connector;</claim-text><claim-text>an output configured to be coupled to the circuit to be protected;</claim-text><claim-text>a switch coupled between the input pad and the output having a control input configured to open and close the switch; and</claim-text><claim-text>protection circuit configured to control the switch, comprising:<claim-text>a first circuit branch connected to the input pad and configured to receive a fast ramp-up over voltage at the input pad;</claim-text><claim-text>a second circuit branch connected to the input pad and configured to receive a ramp-up over voltage at the input pad;</claim-text><claim-text>a third circuit branch connected to the input pad and configured to output an over voltage detection signal when an over voltage is received at the input pad, wherein the third circuit branch includes a voltage divider with a variable resistor with a variable voltage node and an enable switch;</claim-text><claim-text>a logic circuit including an enabling transistor configured to control the variable resistor and the enable switch,</claim-text><claim-text>wherein the over protection detection signal is connected to the control input of the switch.</claim-text></claim-text></claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. The circuit of <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein the third branch includes a comparator configured to output the over voltage detection signal when the voltage received at the pad is over an over voltage threshold level.</claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. The circuit of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the enabling transistor enables the comparator when the voltage received at the pad is above an enabling threshold voltage level, wherein the enabling threshold voltage level is less than the over voltage threshold level.</claim-text></claim><claim id="CLM-00021" num="00021"><claim-text><b>21</b>. The circuit of <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the protection circuit stays off in a first state to avoid current consumption of the comparator when the voltage at the pad is below the enabling threshold voltage level.</claim-text></claim></claims></us-patent-application>