<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006766A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006766</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17940209</doc-number><date>20220908</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>CN</country><doc-number>202010157877.7</doc-number><date>20200309</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>L</subclass><main-group>1</main-group><subgroup>00</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>L</subclass><main-group>7</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>1</main-group><subgroup>0045</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>7</main-group><subgroup>0075</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">Data Processing Method and Device</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>PCT/CN2020/132746</doc-number><date>20201130</date></document-id><parent-status>PENDING</parent-status></parent-doc><child-doc><document-id><country>US</country><doc-number>17940209</doc-number></document-id></child-doc></relation></continuation></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Huawei Technologies Co., Ltd.</orgname><address><city>Shenzhen</city><country>CN</country></address></addressbook><residence><country>CN</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Wu</last-name><first-name>Xuming</first-name><address><city>Wuhan</city><country>CN</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Nie</last-name><first-name>Shiwei</first-name><address><city>Dongguan</city><country>CN</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>Wang</last-name><first-name>Xu</first-name><address><city>Wuhan</city><country>CN</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A data processing method and a device, the method including determining, by an optical network unit, in a received data stream, after the optical network unit enters a pre-synchronization state, a position of a forward error correction (FEC) codeword boundary in the data stream based on a position of a physical synchronization sequence (Psync) field, performing an FEC codeword decoding check, where the Psync field is a field that matches a preset Psync, in the data stream, and entering, by the optical network unit, a synchronization state in response to an FEC codeword among N consecutive FEC codewords in the data stream passing the decoding check, where N is an integer greater than or equal to 1.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="68.24mm" wi="158.75mm" file="US20230006766A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="126.83mm" wi="149.35mm" file="US20230006766A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="209.72mm" wi="98.13mm" orientation="landscape" file="US20230006766A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="81.36mm" wi="154.60mm" file="US20230006766A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="211.41mm" wi="85.68mm" orientation="landscape" file="US20230006766A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="212.77mm" wi="89.24mm" orientation="landscape" file="US20230006766A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="209.38mm" wi="130.22mm" file="US20230006766A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="209.72mm" wi="153.59mm" orientation="landscape" file="US20230006766A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="209.55mm" wi="134.62mm" file="US20230006766A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="211.92mm" wi="144.10mm" orientation="landscape" file="US20230006766A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="43.69mm" wi="69.93mm" file="US20230006766A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading><p id="p-0002" num="0001">This application is a continuation of International Application No. PCT/CN2020/132746, filed on Nov. 30, 2020, which claims priority to Chinese Patent Application No. 202010157877.7, filed on Mar. 9, 2020. The disclosures of the aforementioned applications are hereby incorporated by reference in their entireties.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">TECHNICAL FIELD</heading><p id="p-0003" num="0002">This application relates to the field of data transmission technologies, and in particular, to a data processing method and a device.</p><heading id="h-0003" level="1">BACKGROUND</heading><p id="p-0004" num="0003">A passive optical network (PON) includes an optical line terminal (OLT) on a central office side, an optical network unit (ONU) or an optical network terminal (ONT) on a user side, and an optical distribution network (ODN). The OLT provides a network-side interface to a PON system, and is connected to one or more ODNs. The ONU or the ONT provides a user-side interface to the PON system, and is connected to the ODN. The ODN is a network including an optical fiber and a passive optical splitter, and is used to connect the OLT and the ONU (the OLT and the ONU are collectively represented by the ONU hereinafter) to distribute or reuse a data signal between the OLT and the ONU. In the PON, a direction from the OLT to the ONU is referred to as downstream, and a direction from the ONU to the OLT is referred to as upstream.</p><p id="p-0005" num="0004">In the PON system, when the OLT transmits downlink data to the ONU, the ONU usually needs to determine whether to enter a synchronization state. After the ONU enters the synchronization state, the ONU may parse data in a data frame. Currently, in a process of determining whether to enter the synchronization state, the ONU searches consecutive data streams for a specific synchronization sequence of a data frame header, and when finding the synchronization sequence and finding another synchronization sequence at an interval of a length of one data frame, may determine that the ONU can enter the synchronization state.</p><p id="p-0006" num="0005">However, because each data frame has only one specific sequence, and duration of each data frame is relatively long, it usually takes a relatively long time to find at least two synchronization sequences in the consecutive data streams. As a result, it takes a relatively long time to enter the synchronization state.</p><heading id="h-0004" level="1">SUMMARY</heading><p id="p-0007" num="0006">Embodiments of this application provide a data processing method and a device. The method includes whether to enter a pre-synchronization state is determined by verifying a physical synchronization sequence (Psync) and a superframe counter (SFC) in a data stream, after the pre-synchronization state is entered, a position of a forward error correction (FEC) codeword in the data stream is determined, and when the FEC codeword passes a decoding check, a synchronization state is entered. Because a plurality of FEC codewords are included between any two Psyncs in the data stream, whether to enter the synchronization state is determined by determining whether the FEC codeword passes decoding. Therefore, it can take a relatively short time to enter the synchronization state, and efficiency of entering the synchronization state can be improved.</p><p id="p-0008" num="0007">A first aspect of this application provides a data processing method. The method may be applied to an optical network unit that receives a downlink data frame. The method includes the following steps. After the optical network unit enters a pre-synchronization state, the optical network unit determines, in a data stream, a position of an FEC codeword boundary in the data stream based on a position of a Psync field, and performs an FEC codeword decoding check, and if an FEC codeword among N consecutive FEC codewords in the data stream passes the decoding check, the optical network unit enters a synchronization state, where N is an integer greater than or equal to 1. In other words, after the optical network unit enters the pre-synchronization state, because the position of the Psync and a position of the FEC codeword are relatively fixed, the optical network unit may determine a boundary position of the FEC codeword based on the Psync, to determine the FEC codeword in the data stream, and finally, the optical network unit performs the decoding check on the FEC codeword, and when the FEC codeword among the N consecutive FEC codewords in the data stream passes the decoding check, enters the synchronization state from the pre-synchronization state, thereby quickly entering the synchronization state.</p><p id="p-0009" num="0008">In this embodiment of this application, the optical network unit determines whether to enter the pre-synchronization state by verifying the Psync and an SFC in the data stream, determines the position of the FEC codeword in the data stream after entering the pre-synchronization state, and enters the synchronization state when the FEC codeword passes the decoding check. Because a plurality of FEC codewords are included between any two Psyncs in the data stream, whether to enter the synchronization state is determined by determining whether the FEC codeword passes decoding. Therefore, it can take a relatively short time to enter the synchronization state, and efficiency of entering the synchronization state can be improved.</p><p id="p-0010" num="0009">In a possible implementation, the method further includes the optical network unit searches the received data stream for the field that matches the preset Psync, if the optical network unit finds, in the data stream, the Psync field that matches the preset Psync, the optical network unit verifies whether a first field having a preset quantity of bits and located after the Psync field constitutes a valid SFC structure, and if the first field constitutes the valid SFC structure, the optical network unit enters the pre-synchronization state.</p><p id="p-0011" num="0010">In a possible implementation, after the optical network unit enters the pre-synchronization state and before the optical network unit enters the synchronization state, the method further includes the optical network unit determines, based on a position of the first field, an SFC field located after the first field in the data stream, and the optical network unit verifies the SFC field, where a verification result of the SFC field is that SFC verification succeeds. In other words, after the optical network unit enters the pre-synchronization state, in addition to performing the FEC codeword decoding check on the data stream, the optical network unit further needs to perform SFC verification, and after the FEC codeword decoding check is passed and the SFC verification succeeds, the optical network unit enters the synchronization state from the pre-synchronization state. Therefore, by further verifying whether the SFC field is valid, synchronization accuracy can be improved, and a probability of incorrect synchronization can be reduced.</p><p id="p-0012" num="0011">In a possible implementation, the method further includes if no FEC codeword among the N consecutive FEC codewords in the data stream passes the decoding check, the optical network unit returns to a search state from the pre-synchronization state, where N is an integer greater than or equal to 1. In other words, if no FEC codeword among the N consecutive FEC codewords in the data stream passes the decoding check, it may be considered that the optical network unit incorrectly enters the pre-synchronization state, and the optical network unit may return to the search state from the pre-synchronization state, and re-search for a matched Psync field and an SFC field.</p><p id="p-0013" num="0012">In a possible implementation, the method further includes after the optical network unit enters the synchronization state, if M consecutive FEC codewords in the data stream do not pass the decoding check, the optical network unit transitions from the synchronization state to a re-synchronization state, or if an FEC codeword among M consecutive FEC codewords in the data stream passes the decoding check, the optical network unit remains in the synchronization state, where M is an integer greater than or equal to 1. In other words, after the optical network unit enters the synchronization state, if none of the M consecutive FEC codewords in the data stream passes the decoding check, the optical network unit may incorrectly enter the synchronization state. Therefore, in this case, the optical network unit can enter the re-synchronization state to perform synchronization again, or if the FEC codeword among the M consecutive FEC codewords in the data stream passes the decoding check, the optical network unit may remain in the synchronization state.</p><p id="p-0014" num="0013">In a possible implementation, the method further includes after the optical network unit enters the re-synchronization state, if an FEC codeword among S consecutive FEC codewords in the data stream passes the decoding check, the optical network unit transitions from the re-synchronization state to the synchronization state, where S is an integer greater than or equal to 1. In other words, after the optical network unit enters the re-synchronization state, the optical network unit may determine whether to reenter the synchronization state by performing the decoding check on the FEC codewords in the data stream, thereby avoiding incorrectly exiting the synchronization state due to a bit error in the data stream.</p><p id="p-0015" num="0014">In a possible implementation, the method further includes after the optical network unit enters the re-synchronization state, if no FEC codeword among the S consecutive FEC codewords in the data stream passes the decoding check, the optical network unit transitions from the re-synchronization state to a search state.</p><p id="p-0016" num="0015">In a possible implementation, the method further includes the optical network unit decodes an FEC codeword in the data stream to obtain a decoded codeword payload, the optical network unit obtains a decoded Psync based on the decoded codeword payload, where the decoded Psync is located in the decoded codeword payload, if the decoded Psync matches the preset Psync, the optical network unit verifies whether a second field having a preset quantity of bits and located after the decoded Psync constitutes a valid SFC structure, and if the second field constitutes the valid SFC structure, the optical network unit enters the synchronization state from the pre-synchronization state, or remains in the synchronization state. In other words, when the Psync is located in the FEC codeword, after the optical network unit enters the pre-synchronization state, the optical network unit may further determine whether to enter the synchronization state by verifying the decoded Psync and verifying the SFC. This improves flexibility of solution implementation.</p><p id="p-0017" num="0016">In a possible implementation, the method further includes after the optical network unit enters the synchronization state, if a decoded Psync does not match the preset Psync or SFC verification fails, the optical network unit transitions from the synchronization state to a re-synchronization state, or if a decoded Psync matches the preset Psync and SFC verification succeeds, the optical network unit remains in the synchronization state.</p><p id="p-0018" num="0017">In a possible implementation, the method further includes after the optical network unit enters the re-synchronization state, for P consecutive data frames in the data stream, if a decoded Psync matches the preset Psync and SFC verification succeeds, the optical network unit transitions from the re-synchronization state to the synchronization state, where P is an integer greater than 1. In other words, after the optical network unit enters the re-synchronization state, if the decoded Psync is matched and the SFC verification succeeds, the optical network unit may transition from the re-synchronization state to the synchronization state.</p><p id="p-0019" num="0018">In a possible implementation, the method further includes after the optical network unit enters the re-synchronization state, for each of the P consecutive data frames in the data stream, if a decoded synchronization sequence does not match the preset Psync or SFC verification fails, the optical network unit transitions from the re-synchronization state to a search state. In other words, after the optical network unit enters the re-synchronization state, if no decoded Psync is matched or no SFC is verified successfully in a plurality of consecutive data frames in the data stream, the optical network unit transitions from the re-synchronization state to the search state.</p><p id="p-0020" num="0019">A second aspect of this application provides an optical network unit, including a processing unit, where the processing unit is configured to after entering a pre-synchronization state, determine, in a data stream, a position of an FEC codeword boundary in the data stream based on a position of a Psync field, and perform an FEC codeword decoding check, where the Psync field is a field that matches a preset Psync, in the data stream, and if an FEC codeword among N consecutive FEC codewords in the data stream passes the decoding check, enter a synchronization state, where N is an integer greater than or equal to 1.</p><p id="p-0021" num="0020">In a possible implementation, the processing unit is further configured to search the received data stream for the field that matches the preset Psync, if finding, in the data stream, the Psync field that matches the preset Psync, verify whether a first field having a preset quantity of bits and located after the Psync field constitutes a valid SFC structure, and if the first field constitutes the valid SFC structure, enter the pre-synchronization state.</p><p id="p-0022" num="0021">In a possible implementation, the processing unit is further configured to determine, based on a position of the first field, an SFC field located after the first field in the data stream, and verify the SFC field, where a verification result of the SFC field is that the SFC field constitutes the valid SFC structure.</p><p id="p-0023" num="0022">In a possible implementation, the processing unit is further configured to if no FEC codeword among the N consecutive FEC codewords in the data stream passes the decoding check, return to a search state from the pre-synchronization state, where N is an integer greater than or equal to 1.</p><p id="p-0024" num="0023">In a possible implementation, the processing unit is further configured to after entering the synchronization state, if M consecutive FEC codewords in the data stream do not pass the decoding check, transition from the synchronization state to a re-synchronization state, or if an FEC codeword among M consecutive FEC codewords in the data stream passes the decoding check, remain in the synchronization state, where M is an integer greater than or equal to 1.</p><p id="p-0025" num="0024">In a possible implementation, the processing unit is further configured to after entering the re-synchronization state, if an FEC codeword among S consecutive FEC codewords in the data stream passes the decoding check, transition from the re-synchronization state to the synchronization state, where S is an integer greater than or equal to 1.</p><p id="p-0026" num="0025">In a possible implementation, the processing unit is further configured to after entering the re-synchronization state, if no FEC codeword among the S consecutive FEC codewords in the data stream passes the decoding check, transition from the re-synchronization state to a search state.</p><p id="p-0027" num="0026">In a possible implementation, the processing unit is further configured to decode an FEC codeword in the data stream to obtain a decoded codeword payload, obtain a decoded Psync based on the decoded codeword payload, where the decoded Psync is located in the decoded codeword payload, if the decoded Psync matches the preset Psync, verify whether a second field having a preset quantity of bits and located after the decoded Psync constitutes a valid SFC structure, and if the second field constitutes the valid SFC structure, enter the synchronization state from the pre-synchronization state, or remain in the synchronization state.</p><p id="p-0028" num="0027">In a possible implementation, the processing unit is further configured to after entering the synchronization state, if a decoded Psync does not match the preset Psync or SFC verification fails, transition from the synchronization state to a re-synchronization state, or if a decoded Psync matches the preset Psync and SFC verification succeeds, remain in the synchronization state.</p><p id="p-0029" num="0028">In a possible implementation, the processing unit is further configured to after entering the re-synchronization state, for P consecutive data frames in the data stream, if a decoded Psync matches the preset Psync and SFC verification succeeds, transition from the re-synchronization state to the synchronization state, where P is an integer greater than 1.</p><p id="p-0030" num="0029">In a possible implementation, the processing unit is further configured to after entering the re-synchronization state, for each of the P consecutive data frames in the data stream, if a decoded synchronization sequence does not match the preset Psync or SFC verification fails, transition from the re-synchronization state to a search state.</p><p id="p-0031" num="0030">A third aspect of this application provides an optical network unit, including a processor and a memory, where the memory stores operation instructions, and the processor reads the operation instructions in the memory to implement the method according to any one of the first aspect.</p><p id="p-0032" num="0031">A fourth aspect of this application provides an optical network system, including an optical line terminal, an optical distribution network, and the optical network unit according to any one of the second aspect or the third aspect.</p><p id="p-0033" num="0032">A fifth aspect of this application provides a computer program product including instructions, where when the instructions are run on a computer, the computer is enabled to perform the method according to any one of the first aspect or the second aspect.</p><p id="p-0034" num="0033">A sixth aspect of this application provides a computer-readable storage medium including computer program instructions, where when the computer program instructions are run on a computer, the computer is enabled to perform the method according to any one of the first aspect or the second aspect.</p><p id="p-0035" num="0034">It may be understood that the optical network unit provided in the second aspect, the optical network unit provided in the third aspect, the optical network system provided in the fourth aspect, the computer program product provided in the fifth aspect, and the computer-readable storage medium provided in the sixth aspect are all configured to perform the corresponding method provided above. Therefore, for beneficial effects that can be achieved, refer to beneficial effects in the corresponding method provided above. Details are not described herein again.</p><p id="p-0036" num="0035">It can be learned from the foregoing technical solutions that the embodiments of this application have the following advantages.</p><p id="p-0037" num="0036">In the embodiments of this application, after the pre-synchronization state is entered, the position of the FEC codeword in the data stream is determined, and the synchronization state is entered when the FEC codeword passes the decoding check. Because a plurality of FEC codewords are included between any two Psyncs in the data stream, whether to enter the synchronization state is determined by determining whether the FEC codeword passes decoding. Therefore, it can take a relatively short time to enter the synchronization state, and efficiency of entering the synchronization state can be improved.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is an exemplary diagram of a network architecture of a passive optical network according to an embodiment of this application;</p><p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. <b>2</b>A</figref> is an exemplary schematic diagram of a structure of a downlink data frame according to an embodiment of this application;</p><p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. <b>2</b>B</figref> is another exemplary schematic diagram of a structure of a downlink data frame according to an embodiment of this application;</p><p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. <b>3</b>A</figref> is a schematic diagram of a structure of a downlink data frame according to an embodiment of this application;</p><p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. <b>3</b>B</figref> is a schematic diagram of another structure of a downlink data frame according to an embodiment of this application;</p><p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a schematic flowchart of a data processing method <b>400</b> according to an embodiment of this application;</p><p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a schematic diagram of a process in which an optical network unit performs a state transition according to an embodiment of this application;</p><p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a schematic flowchart of a data processing method <b>600</b> according to an embodiment of this application;</p><p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a schematic diagram of a process in which an optical network unit performs a state transition according to an embodiment of this application; and</p><p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a schematic diagram of a structure of an optical network unit <b>800</b> according to an embodiment of this application.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0006" level="1">DETAILED DESCRIPTION OF ILLUSTRATIVE EMBODIMENTS</heading><p id="p-0048" num="0047">To make objectives, technical solutions, and advantages of this application clearer, the following describes embodiments of this application with reference to accompanying drawings. It is clear that the described embodiments are merely some but not all of the embodiments of this application. A person of ordinary skill in the art may learn that, as a new application scenario emerges, the technical solutions provided in the embodiments of this application are also applicable to a similar technical problem.</p><p id="p-0049" num="0048">In the specification, claims, and the accompanying drawings of this application, the terms &#x201c;first&#x201d;, &#x201c;second&#x201d;, and the like are intended to distinguish similar objects but do not necessarily indicate a specific order or sequence. It should be understood that data termed in such a way is interchangeable in proper circumstances, so that the embodiments described herein can be implemented in other orders than the order illustrated or described herein. In addition, terms &#x201c;include&#x201d; and &#x201c;have&#x201d; and any variations thereof are intended to cover non-exclusive inclusions, for example, a process, method, system, product, or device including a series of steps or modules need not be limited to those clearly listed steps or modules, but may include other steps or modules that are not clearly listed or are inherent to these processes, methods, products, or devices. Naming or numbering of steps in this application does not mean that the steps in the method procedures need to be performed in a time/logical order indicated by the naming or numbering. An execution order of the steps in the procedures that have been named or numbered can be changed based on a technical objective to be achieved, as long as same or similar technical effects can be achieved. Division into units in this application is logical division and may be other division in an actual implementation. For example, a plurality of units may be combined or integrated into another system, or some features may be ignored or not performed. In addition, the displayed or discussed mutual couplings or direct couplings or communication connections may be implemented through some interfaces. The indirect couplings or communication connections between the units may be implemented in electronic or other similar forms. This is not limited in this application. In addition, units or subunits described as separate parts may or may not be physically separate, may or may not be physical units, or may be distributed into a plurality of circuit units. Some or all of the units may be selected based on actual requirements to achieve the objectives of the solutions of this application.</p><p id="p-0050" num="0049">With reference to <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the following first describes an example of a network architecture of a passive optical network to which a data processing method shown in this application is applied.</p><p id="p-0051" num="0050">As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the passive optical network <b>100</b> shown in this embodiment includes one or more optical line terminals (OLTs) <b>110</b>, an optical distribution network (ODN) <b>120</b>, and a plurality of optical network units (ONUs).</p><p id="p-0052" num="0051">The OLT no is connected to the plurality of ONUs in a point-to-multipoint manner by using the ODN <b>120</b>. In this embodiment, an example in which the passive optical network <b>100</b> includes one OLT <b>101</b> is used for description. A specific quantity of ONUs is not limited in this embodiment, provided that there are a plurality of ONUs. For example, the passive optical network shown in this embodiment includes n ONUs, that is, an ONU <b>1301</b>, an ONU <b>1302</b>, . . . , an ONU <b>130</b><i>n. </i></p><p id="p-0053" num="0052">To better describe a communication process of uplink and downlink service data shown in this application, a direction from the OLT no to the ONU shown in this application is defined as a downlink direction, and a direction from the ONU to the OLT <b>101</b> is defined as an uplink direction.</p><p id="p-0054" num="0053">The passive optical network may be a communications network that does not require any active component to implement communication between the OLT no and the ONU <b>1301</b>, the ONU <b>1302</b>, . . . , the ONU <b>130</b><i>n</i>. Specifically, communication between the OLT no and the ONU <b>1301</b>, the ONU <b>1302</b>, . . . , the ONU <b>130</b><i>n </i>may be implemented by using a passive optical component in the ODN <b>120</b>, where the passive optical component includes but is not limited to an optical splitter or a multiplexer.</p><p id="p-0055" num="0054">The OLT no is usually located in a central office (central office, CO). The OLT <b>110</b> may manage the ONU <b>1301</b>, the ONU <b>1302</b>, . . . , the ONU <b>130</b><i>n </i>in a unified manner. The OLT <b>110</b> may serve as a medium between the ONU <b>1301</b>, the ONU <b>1302</b>, . . . , the ONU <b>130</b><i>n </i>and an upper layer network. For example, in the downlink direction, the OLT no forwards data received from the upper layer network to the ONU <b>1301</b>, the ONU <b>1302</b>, . . . , the ONU <b>130</b><i>n </i>as downlink service data by using a downlink wavelength channel. For another example, in the uplink direction, the OLT no forwards uplink service data received from the ONU <b>1301</b>, the ONU <b>1302</b>, . . . , the ONU <b>130</b><i>n </i>to the upper layer network by using an uplink wavelength channel.</p><p id="p-0056" num="0055">The ODN <b>120</b> may be a data distribution system. The ODN <b>120</b> may include an optical fiber, an optical coupler, an optical splitter, an optical multiplexer, and/or other devices. In an embodiment, the optical fiber, the optical coupler, the optical splitter, the optical multiplexer, and/or the other devices may be passive optical components. Specifically, the optical fiber, the optical coupler, the optical splitter, the optical multiplexer, and/or the other devices may be components that distribute data signals between the OLT no and the ONU <b>1301</b>, the ONU <b>1302</b>, . . . , the ONU <b>130</b><i>n </i>without power supply support. In addition, in other embodiments, the ODN <b>120</b> may further include one or more processing devices, for example, an optical amplifier or a relay device. Specifically, the ODN <b>120</b> may extend from the OLT no to a plurality of ONUs such as the ONU <b>1301</b>, the ONU <b>1302</b>, . . . , the ONU <b>130</b><i>n</i>, but may also be configured as any other point-to-multipoint structure. This is not specifically limited in this embodiment.</p><p id="p-0057" num="0056">The ONU <b>1301</b>, the ONU <b>1302</b>, . . . , the ONU <b>130</b><i>n </i>may be disposed at user-side locations (for example, customer premises) in a distributed manner. The ONU <b>1301</b>, the ONU <b>1302</b>, . . . , the ONU <b>130</b><i>n </i>may be network devices configured to communicate with the OLT <b>110</b> and users. Specifically, the ONU <b>1301</b>, the ONU <b>1302</b>, . . . , the ONU <b>130</b><i>n </i>may serve as a medium between the OLT no and the users. For example, the ONU <b>1301</b>, the ONU <b>1302</b>, . . . , the ONU <b>130</b><i>n </i>may forward downlink service data received from the OLT no to the users, and forward data received from the users to the OLT no as uplink service data.</p><p id="p-0058" num="0057">Currently, in a PON system, when an OLT transmits downlink data to an ONU, the ONU usually needs to delimit a downlink data frame. After the ONU completes the downlink data frame delimitation, the ONU may parse the data in the data frame. A 10G PON system with a 10 Gbit/s downlink rate and a 2.5 Gbit/s or 10 Gbit/s uplink rate is used as an example. As shown in <figref idref="DRAWINGS">FIG. <b>2</b>A</figref>, in a 10G PON system, downlink data is usually in units of 125 microseconds, and data in every 125 microseconds constitutes one complete downlink data frame. There is a 24-byte downstream physical synchronization block (PSBd) in a header of the downlink data frame. As shown in <figref idref="DRAWINGS">FIG. <b>2</b>B</figref>, the PSBd includes a Psync, an SFC structure, and a passive optical network identifier (PON-ID).</p><p id="p-0059" num="0058">In a process of delimiting a downlink data frame, an ONU needs to search consecutive data streams for a Psync, and then verify, after finding the Psync, whether an SFC is correct. After both the Psync and the SFC are verified successfully, the ONU enters a pre-synchronization state. If the ONU finds a Psync and an SFC that recur at an interval of a length of one or more downlink data frames in a data stream, the ONU enters a synchronization state from the pre-synchronization state. In other words, the ONU can enter the synchronization state only when the ONU finds at least two PSBds in the consecutive data streams, and both Psyncs and SFCs in two PSBds are verified successfully. Apparently, because each data frame has only one PSBd, and duration of each data frame is fixed (for example, 125 microseconds), efficiency of a current frame delimitation manner is relatively low, and it needs to take a relatively long time to enter the synchronization state.</p><p id="p-0060" num="0059">In addition, in some PON systems with relatively high bit error rates (for example, a high-speed PON system), bit error rates of a Psync and an SFC are high, and once there is a bit error in the Psync or the SFC, it may be difficult for the ONU to find a matched Psync and SFC within a short time. Consequently, entering the synchronization state is postponed.</p><p id="p-0061" num="0060">In view of this, an embodiment of this application provides a data processing method. Whether to enter a pre-synchronization state is determined by verifying a Psync and an SFC in a data stream, after the pre-synchronization state is entered, a position of an FEC codeword in the data stream is determined, and when the FEC codeword passes a decoding check, a synchronization state is entered. Because a plurality of FEC codewords are included between any two Psyncs in the data stream, whether to enter the synchronization state is determined by determining whether the FEC codeword passes decoding. Therefore, it can take a relatively short time to enter the synchronization state, and efficiency of entering the synchronization state can be improved.</p><p id="p-0062" num="0061">It should be noted that the data processing method provided in this embodiment of this application may be applied to PON systems with various speeds, for example, a 10G PON system or a high-speed PON system. The high-speed PON system may be a 50G PON system or a higher-speed PON system. This is not specifically limited herein.</p><p id="p-0063" num="0062">The data processing method provided in this embodiment of this application may be applied to downlink data frame delimitation, that is, an ONU determines a boundary position in a downlink data frame. The data processing method may alternatively be applied to uplink data frame delimitation, that is, an OLT determines a boundary position in an uplink data frame. For ease of description, the following describes in detail the data processing method provided in this embodiment of this application by using an example in which the data processing method is applied to downlink data frame delimitation.</p><p id="p-0064" num="0063">In addition, the data processing method provided in this embodiment of this application may be applied to processing of downlink data of different frame structures. Specifically, a frame structure of downlink data may include the following two cases.</p><p id="p-0065" num="0064">1. A PSBd is not in an FEC Codeword.</p><p id="p-0066" num="0065">In a downlink data stream, the downlink data stream includes consecutive downlink data frames, and each downlink data frame includes a plurality of FEC codewords. A PSBd is located at a frame header position of each downlink data frame, and the PSBd is located outside an FEC codeword.</p><p id="p-0067" num="0066"><figref idref="DRAWINGS">FIG. <b>3</b>A</figref> is a schematic diagram of a structure of a downlink data frame according to an embodiment of this application. A downlink data frame <b>1</b> and a downlink data frame <b>2</b> are two consecutive downlink data frames. Both the downlink data frame <b>1</b> and the downlink data frame <b>2</b> include <b>300</b> FEC codewords (that is, an FEC codeword <b>1</b> to an FEC codeword <b>300</b>), and there is a PSBd at a frame header position of the downlink data frame, that is, the PSBd is located before a first FEC codeword, and the PSBd is not in the FEC codeword.</p><p id="p-0068" num="0067">2. A PSBd is in an FEC Codeword.</p><p id="p-0069" num="0068">In a downlink data stream, the downlink data stream includes consecutive downlink data frames, and each downlink data frame includes a plurality of FEC codewords. A PSBd is located at a frame header position of each downlink data frame, and the PSBd is located in a first FEC codeword of the downlink data frame.</p><p id="p-0070" num="0069"><figref idref="DRAWINGS">FIG. <b>3</b>B</figref> is a schematic diagram of another structure of a downlink data frame according to an embodiment of this application. A downlink data frame <b>1</b> and a downlink data frame <b>2</b> are two consecutive downlink data frames. Both the downlink data frame <b>1</b> and the downlink data frame <b>2</b> include <b>300</b> FEC codewords (that is, an FEC codeword <b>1</b> to an FEC codeword <b>300</b>), and a first FEC codeword of the downlink data frame includes one PSBd, that is, the PSBd is located in the first FEC codeword.</p><p id="p-0071" num="0070"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a schematic flowchart of a data processing method <b>400</b> according to an embodiment of this application. As shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the data processing method <b>400</b> provided in this embodiment of this application includes the following steps.</p><p id="p-0072" num="0071"><b>401</b>. An optical network unit searches a received data stream for a field that matches a preset Psync.</p><p id="p-0073" num="0072">After the optical network unit is started, the optical network unit enters a search state, that is, the optical network unit searches the received data stream for the field that matches the preset Psync. The preset Psync may be a preset specific sequence. In the data stream, the preset Psync is a specific sequence used to implement downlink data frame synchronization.</p><p id="p-0074" num="0073"><b>402</b>. If the optical network unit finds, in the data stream, the Psync field that matches the preset Psync, the optical network unit verifies whether a first field having a preset quantity of bits and located after the Psync field constitutes a valid SFC structure.</p><p id="p-0075" num="0074">If the optical network unit finds, in the data stream, a field that is the same as the preset Psync, it may be considered that the optical network unit finds, in the data stream, the Psync field that matches the preset Psync, and the optical network unit may continue to verify whether the first field located after the Psync field constitutes the valid SFC structure. The first field may be a field having the preset quantity of bits and located after the Psync field. For example, when an SFC is 64 bits, the first field may be, for example, a 64-bit field located after the Psync field. Simply, the quantity of bits of the first field is the same as a quantity of bits of the SFC.</p><p id="p-0076" num="0075"><b>403</b>. If the first field constitutes the valid SFC structure, the optical network unit enters a pre-synchronization state.</p><p id="p-0077" num="0076">If the first field located after the Psync field constitutes the valid SFC structure, it may be considered that the optical network unit finds a PSBd located at a frame header position of a downlink data frame, and the optical network unit may enter the pre-synchronization state. The pre-synchronization state is a state entered before the optical network unit enters a synchronization state. In the pre-synchronization state, the optical network unit may continue to perform further detection on the data stream, so that the optical network unit can transition from the pre-synchronization state to the synchronization state or return to the search state from the pre-synchronization state.</p><p id="p-0078" num="0077">Conversely, if the first field located after the Psync field does not constitute the valid SFC structure, it may be considered that the Psync field found by the optical network unit and matching the preset Psync is not a Psync in the PSBd, but may be caused by bit errors of other data in the downlink data stream, that is, due to bit errors, some data bits in the downlink data stream become a Psync field matching the preset Psync. Therefore, the optical network unit continues to perform step <b>401</b>, that is, continues to search for a field matching the preset Psync.</p><p id="p-0079" num="0078"><b>404</b>. After the optical network unit enters the pre-synchronization state, the optical network unit determines, in the data stream, a position of an FEC codeword boundary in the data stream based on a position of the Psync field, and performs an FEC codeword decoding check.</p><p id="p-0080" num="0079">In this embodiment, the PSBd is located at the frame header position of the data frame in the downlink data stream, and an FEC codeword is located after the PSBd. Therefore, after the Psync field in the PSBd is determined, the position of the FEC codeword boundary in the downlink data stream may be determined based on the position of the Psync field. For example, corresponding to the downlink data frame structure in <figref idref="DRAWINGS">FIG. <b>3</b>A</figref>, because a quantity of bits of the PSBd is fixed, an end position of the PSBd can be determined after the Psync field in the PSBd is determined. The end position of the PSBd is a start position of a first FEC codeword. Because a length of each FEC codeword in the downlink data frame (a quantity of data bits) is also fixed, a boundary position of each FEC codeword in the downlink data frame may also be determined based on the start position of the first FEC codeword.</p><p id="p-0081" num="0080">After the boundary position of the FEC codeword in the downlink data frame is determined, the decoding check may be performed on the FEC codeword located after the PSBd, that is, the FEC codeword is decoded by using a decoder. In addition, whether the FEC codeword can be successfully decoded is determined according to an instruction of the decoder. In the downlink data frame, the correct FEC codeword can be determined only after the boundary of the FEC codeword is correctly determined. In this case, the FEC codeword can be successfully decoded. If the boundary of the FEC codeword is incorrectly determined, the correct FEC codeword cannot be determined, and an incorrect FEC codeword usually fails to be decoded. Therefore, by determining whether the FEC codeword can be successfully decoded, whether the determined boundary position of the FEC codeword is correct can be determined. The boundary position of the FEC codeword is determined based on the PSBd. Therefore, by determining whether the FEC codeword can be successfully decoded, whether the found PSBd is a correct PSBd can be determined.</p><p id="p-0082" num="0081"><b>405</b>. If an FEC codeword among N consecutive FEC codewords in the data stream passes the decoding check, the optical network unit enters the synchronization state, where N is an integer greater than or equal to 1.</p><p id="p-0083" num="0082">It should be understood that, because a case in which a bit error occurs in an FEC codeword in a downlink data frame may exist, some FEC codewords may fail to pass the decoding check. For example, when bit errors occur in a plurality of data bits in the first FEC codeword after the PSBd, the first FEC codeword may fail to pass the decoding check. However, for the second FEC codeword after the PSBd, when no bit error occurs in data bits or bit errors occur only in few data bits, the second FEC codeword may pass the decoding check.</p><p id="p-0084" num="0083">Therefore, to avoid incorrectly determining that no correct PSBd is found due to a bit error in an FEC codeword, in this embodiment, whether to enter the synchronization state may be determined by determining whether any FEC codeword among the N consecutive FEC codewords in the downlink data stream passes the decoding check. If an FEC codeword among the N consecutive FEC codewords in the downlink data stream passes the decoding check, the optical network unit enters the synchronization state. For example, when N is 3, if an FEC codeword among three consecutive FEC codewords located after the PSBd in the downlink data stream passes the decoding check, the optical network unit enters the synchronization state. In other words, as long as any one of the first FEC codeword, the second FEC codeword, or the third FEC codeword located after the PSBd in the downlink data stream can pass the decoding check, the optical network unit can enter the synchronization state. Specifically, the optical network unit may enter the synchronization state after finding that an FEC codeword passes the decoding check, and does not need to wait to enter the synchronization state until the decoding check is performed on all the three FEC codewords and until it is found that an FEC codeword passes the decoding check. The synchronization state is a state in which the optical network unit performs normal data processing, that is, after entering the synchronization state, the optical network unit may parse the downlink data frame to obtain valid data transmitted in the downlink data frame.</p><p id="p-0085" num="0084">It should be understood that the downlink data stream is obtained after scramble (Scramble) processing is performed, that is, the downlink data stream is obtained after an operation is performed on an original signal (for example, the downlink data stream is obtained after an operation is performed on the original signal by using a polynomial). Therefore, before performing FEC decoding, the optical network unit needs to descramble (Descramble) data. In a descrambling process, the optical network unit needs to use data content in the SFC. The SFC field itself has an error correction capability. As long as a quantity of bit errors in the SFC field is less than 2 bits (bits), the SFC can be restored correctly and used for descrambling the downlink data frame. Therefore, before performing FEC decoding, the optical network unit may perform descrambling on the downlink data stream based on the first field, and then perform FEC decoding.</p><p id="p-0086" num="0085">In a possible implementation, the method <b>400</b> further includes if no FEC codeword among the N consecutive FEC codewords in the data stream passes the decoding check, the optical network unit returns to the search state from the pre-synchronization state, where N is an integer greater than or equal to 1. In other words, if no FEC codeword among the N consecutive FEC codewords in the data stream passes the decoding check, it may be considered that the optical network unit incorrectly enters the pre-synchronization state, and the optical network unit may return to the search state from the pre-synchronization state, and re-search for a matched Psync field and an SFC field.</p><p id="p-0087" num="0086">N is a preset value, and is specifically an integer greater than or equal to 1, for example, may be 3 or 4. A value of N may be specifically set based on an actual situation, and is not specifically limited herein.</p><p id="p-0088" num="0087">In this embodiment, the optical network unit determines whether to enter the pre-synchronization state by verifying the Psync and the SFC in the data stream, determines the position of the FEC codeword in the data stream after entering the pre-synchronization state, and enters the synchronization state when the FEC codeword passes the decoding check. Because a plurality of FEC codewords are included between any two Psyncs in the data stream, whether to enter the synchronization state is determined by determining whether the FEC codeword passes decoding. Therefore, it can take a relatively short time to enter the synchronization state, and efficiency of entering the synchronization state can be improved.</p><p id="p-0089" num="0088">In a possible implementation, after the optical network unit finds that the FEC codeword among the N consecutive FEC codewords in the data stream passes the decoding check, the method <b>400</b> further includes the optical network unit determines, based on a position of the first field, an SFC field located after the first field in the data stream, and the optical network unit verifies the SFC field, and if a verification result of the SFC field is that SFC verification succeeds, the optical network unit enters the synchronization state. Because a length of each data frame in the downlink data stream is fixed, and a position of an SFC structure in each downlink data frame is also fixed, after the first field is determined, the SFC field located after the first field may be determined based on the position of the first field and the length of the downlink data frame, that is, a position of a next SFC structure is determined.</p><p id="p-0090" num="0089">It should be noted that after the optical network unit verifies that the first field constitutes the valid SFC structure, the optical network unit locally stores an SFC value of the first field, and enters the pre-synchronization state. In this case, after the optical network unit enters the pre-synchronization state and before the optical network unit verifies the SFC field, the optical network unit performs an operation of adding 1 on the locally stored SFC value (in other words, adding 1 to the locally stored SFC value). Therefore, that the optical network unit verifies the SFC field specifically includes the optical network unit verifies whether the SFC field constitutes the valid SFC structure, and verifies whether an SFC value corresponding to the SFC field is equal to the locally stored SFC value. If the SFC field constitutes the valid SFC structure, and the SFC value corresponding to the SFC field is equal to the locally stored SFC value, it is determined that the verification result of the SFC field is that the SFC field constitutes the valid SFC structure.</p><p id="p-0091" num="0090">Simply, after the optical network unit enters the pre-synchronization state, in addition to performing the FEC codeword decoding check on the data stream, the optical network unit further needs to perform SFC verification, and after the FEC codeword decoding check is passed and the SFC verification succeeds, the optical network unit enters the synchronization state from the pre-synchronization state. Therefore, by further verifying the SFC field on a basis of the FEC codeword decoding check, synchronization accuracy can be improved and a probability of incorrect synchronization can be reduced.</p><p id="p-0092" num="0091">In a possible implementation, the method <b>400</b> further includes after the optical network unit enters the synchronization state, if none of M consecutive FEC codewords in the data stream passes the decoding check, the optical network unit transitions from the synchronization state to a re-synchronization state, where M is an integer greater than or equal to 1. In other words, after the optical network unit enters the synchronization state, if none of the M consecutive FEC codewords in the data stream passes the decoding check, the optical network unit may incorrectly enter the synchronization state. Therefore, in this case, the optical network unit can enter the re-synchronization state to perform synchronization again, that is, the re-synchronization state is a state used to perform synchronization again.</p><p id="p-0093" num="0092">Conversely, after the optical network unit enters the synchronization state, if an FEC codeword among any M consecutive FEC codewords in the data stream passes the decoding check, the optical network unit remains in the synchronization state.</p><p id="p-0094" num="0093">M is a preset value, and is specifically an integer greater than or equal to 1, for example, may be 3 or 4. A value of M may be specifically set based on an actual situation, and is not specifically limited herein. In a possible implementation, M may be equal to N.</p><p id="p-0095" num="0094">It should be noted that, in a conventional technology, an optical network unit determines whether to remain in a synchronization state by verifying a Psync and an SFC in a downlink data stream. When a bit error rate is relatively high, the Psync and the SFC are prone to verification failure due to bit errors. Consequently, the optical network unit is likely to exit the synchronization state. In this embodiment, whether to remain in the synchronization state is determined by determining whether an FEC codeword among a plurality of consecutive FEC codewords in the data stream passes the decoding check. This can reduce a probability of incorrectly exiting the synchronization state, and prevent the optical network unit from frequently exiting the synchronization state.</p><p id="p-0096" num="0095">In a possible implementation, if the optical network unit enters the re-synchronization state, the optical network unit may determine whether to return to the synchronization state from the re-synchronization state by continuing to perform the decoding check on the FEC codewords in the downlink data stream.</p><p id="p-0097" num="0096">Specifically, the method <b>400</b> further includes after the optical network unit enters the re-synchronization state, the optical network unit performs the decoding check on the FEC codewords in the downlink data stream, and if an FEC codeword among S consecutive FEC codewords in the downlink data stream passes the decoding check, the optical network unit transitions from the re-synchronization state to the synchronization state, where S is an integer greater than or equal to 1. In other words, after the optical network unit enters the re-synchronization state, the optical network unit may determine whether to reenter the synchronization state by performing the decoding check on the FEC codewords in the data stream, thereby avoiding incorrectly exiting the synchronization state due to a bit error in the data stream.</p><p id="p-0098" num="0097">S is a preset value, and is specifically an integer greater than or equal to 1, for example, may be 3 or 4. A value of S may be specifically set based on an actual situation, and is not specifically limited herein. In a possible implementation, S may be equal to N and/or M.</p><p id="p-0099" num="0098">In a possible implementation, the method further includes after the optical network unit enters the re-synchronization state, if no FEC codeword among the S consecutive FEC codewords in the data stream passes the decoding check, the optical network unit transitions from the re-synchronization state to the search state.</p><p id="p-0100" num="0099">In other words, after the optical network unit enters the re-synchronization state, the optical network unit may determine to return to the synchronization state or to transition to the search state by continuing to perform the decoding check on the FEC codewords.</p><p id="p-0101" num="0100">It may be understood that, after the optical network unit enters the synchronization state, if a bit error occurs in each of the M consecutive FEC codewords in the downlink data stream, the optical network unit may be caused to enter the re-synchronization state. In the re-synchronization state, the optical network unit may continue to perform the decoding check on the plurality of consecutive FEC codewords. If the FEC codeword decoding check is passed, it may be considered that the optical network unit incorrectly enters the re-synchronization state, therefore, the optical network unit returns to the synchronization state from the re-synchronization state. If the FEC codeword decoding check is not passed, it may be considered that the optical network unit incorrectly enters the synchronization state, therefore, the optical network unit transitions from the re-synchronization state to the search state. [owl] For ease of understanding, with reference to <figref idref="DRAWINGS">FIG. <b>5</b></figref>, the following describes in detail the data processing method provided in this embodiment. <figref idref="DRAWINGS">FIG. <b>5</b></figref> is a schematic diagram of a process in which an optical network unit performs a state transition according to an embodiment of this application.</p><p id="p-0102" num="0101"><b>501</b>. A Psync is matched and an SFC is valid.</p><p id="p-0103" num="0102">When the optical network unit is in a search state (hunt state), the optical network unit searches a downlink data stream for a Psync field that matches a preset Psync. After the optical network unit finds the Psync field that matches the preset Psync, the optical network unit verifies whether a field located after the Psync can constitute a valid SFC structure. If the field located after the Psync field can constitute the valid SFC structure, it represents that the Psync in the downlink data stream is matched and that the SFC structure is valid, and the optical network unit transitions from the search state to a pre-synchronization state (pre-sync state).</p><p id="p-0104" num="0103"><b>502</b>. An FEC codeword among N consecutive FEC codewords passes a decoding check, that is, the decoding check on at least one FEC codeword among the N consecutive FEC codewords succeeds.</p><p id="p-0105" num="0104">When the optical network unit is in the pre-synchronization state, the optical network unit determines a boundary position of an FEC codeword in the downlink data stream based on the Psync field, and then performs the decoding check on the FEC codeword. If the FEC codeword among the N consecutive FEC codewords in the downlink data stream passes the decoding check, the optical network unit transitions from the pre-synchronization state to a synchronization state (sync state). N is an integer greater than or equal to 1.</p><p id="p-0106" num="0105"><b>503</b>. No FEC codeword among the N consecutive FEC codewords passes the decoding check, that is, the decoding check on all the N consecutive FEC codewords fails.</p><p id="p-0107" num="0106">When the optical network unit is in the pre-synchronization state, the optical network unit determines the boundary position of the FEC codeword in the downlink data stream based on the Psync field, and then performs the decoding check on the FEC codeword. If no FEC codeword among the N consecutive FEC codewords in the downlink data stream passes the decoding check, the optical network unit returns to the search state from the pre-synchronization state.</p><p id="p-0108" num="0107"><b>504</b>. An FEC codeword among M consecutive FEC codewords passes the decoding check, that is, the decoding check on at least one FEC codeword among the M consecutive FEC codewords succeeds.</p><p id="p-0109" num="0108">When the optical network unit is in the synchronization state, the optical network unit continuously performs the decoding check on the FEC codewords in the downlink data stream. If the FEC codeword among the M consecutive FEC codewords in the downlink data stream passes the decoding check, the optical network unit remains in the synchronization state. M is an integer greater than or equal to 1.</p><p id="p-0110" num="0109"><b>505</b>. No FEC codeword among the M consecutive FEC codewords passes the decoding check, that is, the decoding check on all the M consecutive FEC codewords fails.</p><p id="p-0111" num="0110">When the optical network unit is in the synchronization state, the optical network unit continuously performs the decoding check on the FEC codewords in the downlink data stream. If no FEC codeword among the M consecutive FEC codewords in the downlink data stream passes the decoding check, the optical network unit transitions from the synchronization state to a re-synchronization state (re-sync state).</p><p id="p-0112" num="0111"><b>506</b>. An FEC codeword among S consecutive FEC codewords passes the decoding check, that is, the decoding check on at least one FEC codeword among the S consecutive FEC codewords succeeds.</p><p id="p-0113" num="0112">When the optical network unit is in the re-synchronization state, the optical network unit continuously performs the decoding check on the FEC codewords in the downlink data stream. If the FEC codeword among the S consecutive FEC codewords in the downlink data stream passes the decoding check, the optical network unit transitions from the re-synchronization state to the synchronization state. M is an integer greater than or equal to 1.</p><p id="p-0114" num="0113"><b>507</b>. The FEC codeword decoding check fails.</p><p id="p-0115" num="0114">When the optical network unit is in the re-synchronization state, the optical network unit continuously performs the decoding check on the FEC codewords in the downlink data stream. When the optical network unit detects that the FEC codeword decoding check in the downlink data stream fails, and a quantity of FEC codewords checked by the optical network unit does not reach S, the optical network unit remains in the re-synchronization state, and continues to perform the decoding check on a next FEC codeword in the downlink data stream.</p><p id="p-0116" num="0115"><b>508</b>. No FEC codeword among the S consecutive FEC codewords passes the decoding check, that is, the decoding check on none of the S consecutive FEC codewords succeeds.</p><p id="p-0117" num="0116">When the optical network unit is in the re-synchronization state, the optical network unit continuously performs the decoding check on the FEC codewords in the downlink data stream. If no FEC codeword among the S consecutive FEC codewords in the downlink data stream passes the decoding check, the optical network unit transitions from the re-synchronization state to the search state.</p><p id="p-0118" num="0117">All the foregoing embodiments may be applied to the downlink data frame structures shown in <figref idref="DRAWINGS">FIG. <b>3</b>A</figref> and <figref idref="DRAWINGS">FIG. <b>3</b>B</figref>. The following provides an embodiment of another data processing method for the downlink data frame structure shown in <figref idref="DRAWINGS">FIG. <b>3</b>B</figref>.</p><p id="p-0119" num="0118"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a schematic flowchart of a data processing method <b>600</b> according to an embodiment of this application. As shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, the data processing method <b>600</b> provided in this embodiment of this application includes the following steps.</p><p id="p-0120" num="0119"><b>601</b>. An optical network unit searches a received data stream for a field that matches a preset Psync.</p><p id="p-0121" num="0120">In this embodiment, step <b>601</b> is similar to the foregoing step <b>401</b>. For details, refer to the description of step <b>401</b>. Details are not described herein again.</p><p id="p-0122" num="0121"><b>602</b>. If the optical network unit finds, in the data stream, the Psync field that matches the preset Psync, the optical network unit verifies whether a first field having a preset quantity of bits and located after the Psync field constitutes a valid SFC structure.</p><p id="p-0123" num="0122">In this embodiment, step <b>602</b> is similar to the foregoing step <b>402</b>. For details, refer to the description of step <b>402</b>. Details are not described herein again.</p><p id="p-0124" num="0123"><b>603</b>. If the first field constitutes the valid SFC structure, the optical network unit enters a pre-synchronization state.</p><p id="p-0125" num="0124">In this embodiment, step <b>603</b> is similar to the foregoing step <b>403</b>. For details, refer to the description of step <b>403</b>. Details are not described herein again.</p><p id="p-0126" num="0125"><b>604</b>. After the optical network unit enters the pre-synchronization state, the optical network unit decodes an FEC codeword in the data stream, to obtain a decoded codeword payload.</p><p id="p-0127" num="0126">The decoded codeword payload refers to a valid data part of the FEC codeword obtained after the FEC codeword is decoded. It should be noted that, thanks to an error correction capability of the FEC codeword, when a bit error occurs in some data bits of the FEC codeword, for example, when a bit error occurs in one or two bits of data in the FEC codeword, the data bits in which the bit error occurs may be corrected in a decoding process of the FEC codeword. In this way, the bit error in the FEC codeword is corrected.</p><p id="p-0128" num="0127"><b>605</b>. The optical network unit obtains a decoded Psync based on the decoded codeword payload, where the decoded Psync is located in the decoded codeword payload.</p><p id="p-0129" num="0128">Because a PSBd is located in a first FEC codeword of a downlink data frame, after the FEC codeword is decoded to obtain the decoded codeword payload, the decoded Psync may be found based on the decoded codeword payload. Because decoding processing has been performed on the decoded Psync, and a data bit in which a bit error might occur in the Psync field has been corrected by an FEC decoder in the decoding process, a matching check is performed on the Psync, so that a matching success rate can be improved.</p><p id="p-0130" num="0129"><b>606</b>. If the decoded Psync matches the preset Psync, the optical network unit verifies whether a second field having a preset quantity of bits and located after the decoded Psync constitutes a valid SFC structure.</p><p id="p-0131" num="0130">After obtaining the decoded Psync, the optical network unit determines whether the decoded Psync matches the preset Psync. If the decoded Psync matches the preset Psync, the optical network unit continues to verify whether the second field having the preset quantity of bits and located after the decoded Psync constitutes the valid SFC structure. The second field may be a field having the preset quantity of bits and located after the decoded Psync field. For example, when an SFC is 64 bits, the second field may be, for example, a 64-bit field after the decoded Psync field. Simply, the quantity of bits of the second field is the same as a quantity of bits of the SFC.</p><p id="p-0132" num="0131"><b>607</b>. If the second field constitutes the valid SFC structure, the optical network unit enters a synchronization state from the pre-synchronization state.</p><p id="p-0133" num="0132">When the second field can constitute the valid SFC structure, the optical network unit enters the synchronization state from the pre-synchronization state.</p><p id="p-0134" num="0133">In this embodiment, whether to enter the pre-synchronization state is determined by verifying the Psync and the SFC in the data stream, and after the pre-synchronization state is entered, whether to enter the synchronization state is determined by verifying the decoded Psync and the SFC. Because bit error correction may be implemented for the decoded Psync in the decoding process, the matching success rate of the Psync can be improved. Therefore, a probability that the optical network unit enters the synchronization state from the pre-synchronization state is increased, and difficulty for the optical network unit to enter the synchronization state due to a Psync bit error is avoided.</p><p id="p-0135" num="0134">In a possible implementation, the method <b>600</b> further includes after the optical network unit enters the synchronization state, if a decoded Psync does not match the preset Psync or SFC verification fails, the optical network unit transitions from the synchronization state to a re-synchronization state, or if a decoded Psync matches the preset Psync and SFC verification succeeds, the optical network unit remains in the synchronization state.</p><p id="p-0136" num="0135">In other words, after the optical network unit enters the synchronization state, the optical network unit continuously verifies the decoded Psync and the SFC in the downlink data stream. When the decoded Psync does not match the preset Psync or the SFC verification fails, the optical network unit transitions from the synchronization state to the re-synchronization state. When the decoded Psync does not match the preset Psync and the SFC verification succeeds, the optical network unit remains in the synchronization state.</p><p id="p-0137" num="0136">In a possible implementation, the method <b>600</b> further includes after the optical network unit enters the re-synchronization state, for P consecutive data frames in the data stream, if a decoded Psync matches the preset Psync and SFC verification succeeds, the optical network unit transitions from the re-synchronization state to the synchronization state, where P is an integer greater than 1.</p><p id="p-0138" num="0137">In other words, after the optical network unit enters the re-synchronization state, the optical network unit verifies the decoded Psync and the SFC in the downlink data stream, and in a plurality of consecutive downlink data frames in the downlink data stream, if a decoded Psync in a downlink data frame is matched and SFC verification succeeds, the optical network unit may transition from the re-synchronization state to the synchronization state.</p><p id="p-0139" num="0138">In a possible implementation, the method <b>600</b> further includes after the optical network unit enters the re-synchronization state, for each of the P consecutive data frames in the data stream, if a decoded synchronization sequence does not match the preset Psync or SFC verification fails, the optical network unit transitions from the re-synchronization state to a search state.</p><p id="p-0140" num="0139">In other words, after the optical network unit enters the re-synchronization state, the optical network unit verifies the decoded Psync and the SFC in the downlink data stream, and in a plurality of consecutive downlink data frames in the downlink data stream, if a decoded Psync in each downlink data frame is not matched or SFC verification fails, the optical network unit transitions from the re-synchronization state to the search state.</p><p id="p-0141" num="0140">For ease of understanding, with reference to <figref idref="DRAWINGS">FIG. <b>7</b></figref>, the following describes in detail the data processing method provided in this embodiment. <figref idref="DRAWINGS">FIG. <b>7</b></figref> is a schematic diagram of a process in which an optical network unit performs a state transition according to an embodiment of this application. The state transition process performed by the optical network unit shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref> may be applied to a scenario in which a downlink data frame has the data frame structure shown in <figref idref="DRAWINGS">FIG. <b>3</b>B</figref>.</p><p id="p-0142" num="0141"><b>701</b>. A Psync is matched and an SFC is valid.</p><p id="p-0143" num="0142">When the optical network unit is in a search state (hunt state), the optical network unit searches a downlink data stream for a Psync field that matches a preset Psync. After the optical network unit finds the Psync field that matches the preset Psync, the optical network unit verifies whether a field located after the Psync can constitute a valid SFC structure. If the field located after the Psync field can constitute the valid SFC structure, it represents that the Psync in the downlink data stream is matched and that the SFC structure is valid, and the optical network unit transitions from the search state to a pre-synchronization state (pre-sync state).</p><p id="p-0144" num="0143"><b>702</b>. A decoded Psync is matched and an SFC is valid.</p><p id="p-0145" num="0144">When the optical network unit is in the pre-synchronization state, the optical network unit decodes an FEC codeword in the downlink data stream to obtain a decoded codeword payload, and obtains the decoded Psync based on the decoded codeword payload. After obtaining the decoded Psync, the optical network unit determines whether the decoded Psync matches the preset Psync. If the decoded Psync matches the preset Psync, the optical network unit continues to verify whether an SFC structure located after the decoded Psync is valid. When the decoded Psync matches the preset Psync and the SFC structure is valid, the optical network unit transitions from the pre-synchronization state to a synchronization state.</p><p id="p-0146" num="0145"><b>703</b>. Verification of the decoded Psync and/or the SFC fails.</p><p id="p-0147" num="0146">When the optical network unit is in the pre-synchronization state, the optical network unit decodes the FEC codeword in the downlink data stream to obtain the decoded codeword payload, and obtains the decoded Psync based on the decoded codeword payload. After obtaining the decoded Psync, the optical network unit determines whether the decoded Psync matches the preset Psync. If the decoded Psync matches the preset Psync, the optical network unit continues to verify whether the SFC structure located after the decoded Psync is valid. When the decoded Psync does not match the preset Psync, or the SFC structure is invalid (that is, verification of the decoded Psync and/or the SFC fails), the optical network unit returns to the search state from the pre-synchronization state.</p><p id="p-0148" num="0147"><b>704</b>. A decoded Psync is matched and an SFC is valid.</p><p id="p-0149" num="0148">When the optical network unit is in the synchronization state, the optical network unit continuously verifies the decoded Psync and the SFC in the downlink data stream. When the decoded Psync in the downlink data stream matches the preset Psync and the SFC structure is valid, the optical network unit remains in the synchronization state.</p><p id="p-0150" num="0149"><b>705</b>. Verification of the decoded Psync and/or the SFC fails.</p><p id="p-0151" num="0150">When the optical network unit is in the synchronization state, the optical network unit continuously verifies the decoded Psync and the SFC in the downlink data stream. When the decoded Psync in the downlink data stream does not match the preset Psync and/or the SFC structure is invalid, the optical network unit transitions from the synchronization state to a re-synchronization state.</p><p id="p-0152" num="0151"><b>706</b>. There is a decoded Psync in P consecutive data frames and SFC verification succeeds.</p><p id="p-0153" num="0152">When the optical network unit is in the re-synchronization state, the optical network unit continuously verifies the decoded Psync and the SFC in the downlink data stream. If a decoded Psync in one of the P consecutive downlink data frames in the downlink data stream is matched and SFC verification succeeds, the optical network unit may transition from the re-synchronization state to the synchronization state. P is an integer greater than or equal to 1.</p><p id="p-0154" num="0153"><b>707</b>. Verification of the decoded Psync and/or the SFC fails.</p><p id="p-0155" num="0154">When the optical network unit is in the re-synchronization state, the optical network unit verifies the decoded Psync and the SFC in the downlink data stream. When the optical network unit detects that verification of a decoded Psync and/or an SFC in a downlink data frame fails, and a quantity of downlink data frames checked by the optical network unit does not reach P, the optical network unit remains in the re-synchronization state, and continues to verify a decoded Psync and an SFC in a next downlink data frame in the downlink data stream.</p><p id="p-0156" num="0155"><b>708</b>. Verification of the decoded Psync and/or the SFC in the P consecutive data frames fails.</p><p id="p-0157" num="0156">When the optical network unit is in the re-synchronization state, the optical network unit verifies the decoded Psync and the SFC in the downlink data stream, and in a plurality of consecutive downlink data frames in the downlink data stream, if a decoded Psync in each downlink data frame is not matched or SFC verification fails, the optical network unit transitions from the re-synchronization state to the search state.</p><p id="p-0158" num="0157"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a schematic diagram of a structure of an optical network unit <b>800</b> according to an embodiment of this application. The optical network unit <b>800</b> is configured to perform the process performed by a data receive end in the foregoing method embodiment. For example, the optical network unit may be applied to an optical network unit receiving a downlink data frame, or may be applied to an optical line terminal receiving an uplink data frame. For details about a specific execution process and beneficial effects, refer to the foregoing method embodiment.</p><p id="p-0159" num="0158">An optical network unit <b>800</b> provided in an embodiment of this application includes a processing unit <b>801</b>. The processing unit <b>801</b> is configured to search a received data stream for a field that matches a preset Psync, if the Psync field that matches the preset Psync is found in the data stream, verify whether a first field having a preset quantity of bits and located after the Psync field constitutes a valid SFC structure, if the first field constitutes the valid SFC structure, enter a pre-synchronization state, after entering the pre-synchronization state, determine a position of a forward error correction FEC codeword boundary in the data stream based on a position of a Psync field, and perform an FEC codeword decoding check, and if an FEC codeword among N consecutive FEC codewords in the data stream passes the decoding check, enter a synchronization state, where N is an integer greater than or equal to 1.</p><p id="p-0160" num="0159">In a possible implementation, the processing unit <b>801</b> is further configured to determine, based on a position of the first field, an SFC field located after the first field in the data stream, and verify the SFC field, where a verification result of the SFC field is that the SFC field constitutes the valid SFC structure.</p><p id="p-0161" num="0160">In a possible implementation, the processing unit <b>801</b> is further configured to if no FEC codeword among the N consecutive FEC codewords in the data stream passes the decoding check, return to a search state from the pre-synchronization state, where N is an integer greater than or equal to 1.</p><p id="p-0162" num="0161">In a possible implementation, the processing unit <b>801</b> is further configured to after entering the synchronization state, if M consecutive FEC codewords in the data stream do not pass the decoding check, transition from the synchronization state to a re-synchronization state, or if an FEC codeword among M consecutive FEC codewords in the data stream passes the decoding check, remain in the synchronization state, where M is an integer greater than or equal to 1.</p><p id="p-0163" num="0162">In a possible implementation, the processing unit <b>801</b> is further configured to after entering the re-synchronization state, if an FEC codeword among S consecutive FEC codewords in the data stream passes the decoding check, transition from the re-synchronization state to the synchronization state, where S is an integer greater than or equal to 1.</p><p id="p-0164" num="0163">In a possible implementation, the processing unit <b>801</b> is further configured to after entering the re-synchronization state, if no FEC codeword among the S consecutive FEC codewords in the data stream passes the decoding check, transition from the re-synchronization state to a search state.</p><p id="p-0165" num="0164">In a possible implementation, the processing unit <b>801</b> is further configured to decode an FEC codeword in the data stream to obtain a decoded codeword payload, obtain a decoded Psync based on the decoded codeword payload, where the decoded Psync is located in the decoded codeword payload, if the decoded Psync matches the preset Psync, verify whether a second field having a preset quantity of bits and located after the decoded Psync constitutes a valid SFC structure, and if the second field constitutes the valid SFC structure, enter the synchronization state from the pre-synchronization state, or remain in the synchronization state.</p><p id="p-0166" num="0165">In a possible implementation, the processing unit <b>801</b> is further configured to after entering the synchronization state, if a decoded Psync does not match the preset Psync or SFC verification fails, transition from the synchronization state to a re-synchronization state, or if a decoded Psync matches the preset Psync and SFC verification succeeds, remain in the synchronization state.</p><p id="p-0167" num="0166">In a possible implementation, the processing unit <b>801</b> is further configured to after entering the re-synchronization state, for P consecutive data frames in the data stream, if a decoded Psync matches the preset Psync and SFC verification succeeds, transition from the re-synchronization state to the synchronization state, where P is an integer greater than 1.</p><p id="p-0168" num="0167">In a possible implementation, the processing unit <b>801</b> is further configured to after entering the re-synchronization state, for each of the P consecutive data frames in the data stream, if a decoded synchronization sequence does not match the preset Psync or SFC verification fails, transition from the re-synchronization state to a search state.</p><p id="p-0169" num="0168">A person skilled in the art may clearly understand that, for the purpose of convenient and brief description, for detailed working processes of the foregoing system, apparatuses, and units, refer to corresponding processes in the foregoing method embodiments. Details are not described herein again.</p><p id="p-0170" num="0169">In the several embodiments provided in this application, it should be understood that the disclosed system, apparatus, and method may be implemented in another manner. For example, the described apparatus embodiments are merely examples. For example, division into units is merely logical function division and may be other division during actual implementation. For example, a plurality of units or components may be combined or integrated into another system, or some features may be ignored or not performed. In addition, the displayed or discussed mutual couplings or direct couplings or communication connections may be implemented through some interfaces. The indirect couplings or communication connections between the apparatuses or units may be implemented in electronic, mechanical, or other forms.</p><p id="p-0171" num="0170">The units described as separate components may or may not be physically separate, and components displayed as units may or may not be physical units. To be specific, the components may be located at one position, or may be distributed on a plurality of network units. Some or all of the units may be selected based on actual requirements to achieve the objectives of the solutions of the embodiments.</p><p id="p-0172" num="0171">In addition, function units in the embodiments of this application may be integrated into one processing unit, or each of the units may exist alone physically, or two or more units may be integrated into one unit. The integrated unit may be implemented in a form of hardware, or may be implemented in a form of a software function unit.</p><p id="p-0173" num="0172">When the integrated unit is implemented in the form of the software function unit and sold or used as an independent product, the integrated unit may be stored in a computer-readable storage medium. Based on such an understanding, the technical solutions of this application essentially, or the part contributing to the conventional technology, or all or some of the technical solutions may be implemented in the form of a software product. The computer software product is stored in a storage medium and includes several instructions for instructing a computer device (which may be a personal computer, a server, or a network device) to perform all or some of the steps of the methods described in the embodiments of this application. The foregoing storage medium includes any medium that can store program code, such as a USB flash drive, a removable hard disk, a read-only memory, a random access memory, a magnetic disk, or an optical disc.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A data processing method, comprising:<claim-text>determining, by an optical network unit, in a received data stream, after the optical network unit enters a pre-synchronization state, a position of a forward error correction (FEC) codeword boundary in the data stream based on a position of a physical synchronization sequence (Psync) field;</claim-text><claim-text>performing an FEC codeword decoding check, wherein the Psync field is a field that matches a preset Psync, in the data stream; and</claim-text><claim-text>entering, by the optical network unit, a synchronization state in response to an FEC codeword among N consecutive FEC codewords in the data stream passing the decoding check, wherein N is an integer greater than or equal to 1.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The data processing method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:<claim-text>searching, by the optical network unit, the received data stream for the field that matches the preset Psync;</claim-text><claim-text>verifying, by the optical network unit, in response to the optical network unit finding, in the data stream, the Psync field that matches the preset Psync, whether a first field having a preset quantity of bits and located after the Psync field constitutes a valid superframe counter (SFC) structure; and</claim-text><claim-text>entering, by the optical network unit, the pre-synchronization state in response to the first field constituting the valid SFC structure.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The data processing method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising performing, after the optical network unit enters the pre-synchronization state and before the optical network unit enters the synchronization state:<claim-text>determining, by the optical network unit based on a position of the first field, an SFC field located after the first field in the data stream; and</claim-text><claim-text>verifying, by the optical network unit, the SFC field, wherein a verification result of the SFC field is that SFC verification succeeds.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The data processing method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:<claim-text>returning, by the optical network unit, in response to no FEC codeword among the N consecutive FEC codewords in the data stream passing the decoding check, to a search state from the pre-synchronization state, wherein N is an integer greater than or equal to 1.</claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The data processing method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising performing at least one of:<claim-text>transitioning, by the optical network unit, in response to M consecutive FEC codewords in the data stream not passing the decoding check, from the synchronization state to a re-synchronization state after the optical network unit enters the synchronization state; or</claim-text><claim-text>remaining, by the optical network unit, in response to an FEC codeword among M consecutive FEC codewords in the data stream passing the decoding check, in the synchronization state;</claim-text><claim-text>wherein M is an integer greater than or equal to 1.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The data processing method according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, further comprising:<claim-text>transitioning, by the optical network unit, after the optical network unit enters the re-synchronization state, and in response to an FEC codeword among S consecutive FEC codewords in the data stream passing the decoding check, from the re-synchronization state to the synchronization state, wherein S is an integer greater than or equal to 1.</claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The data processing method according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, further comprising:<claim-text>transitioning, by the optical network unit, after the optical network unit enters the re-synchronization state, and in response to no FEC codeword among the S consecutive FEC codewords in the data stream passing the decoding check, from the re-synchronization state to a search state.</claim-text></claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The data processing method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:<claim-text>decoding, by the optical network unit, an FEC codeword in the data stream to obtain a decoded codeword payload;</claim-text><claim-text>obtaining, by the optical network unit, a decoded Psync based on the decoded codeword payload, wherein the decoded Psync is located in the decoded codeword payload;</claim-text><claim-text>verifying, by the optical network unit, in response to the decoded Psync matching the preset Psync, whether a second field having a preset quantity of bits and located after the decoded Psync constitutes a valid SFC structure; and</claim-text><claim-text>performing, by the optical network unit, in response to the second field constituting the valid SFC structure, at least one of entering the synchronization state from the pre-synchronization state, or remaining in the synchronization state.</claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The data processing method according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising performing at least one of:<claim-text>transitioning, by the optical network unit, after the optical network unit enters the synchronization state, and in response to a decoded Psync not matching the preset Psync or SFC verification fails, from the synchronization state to a re-synchronization state; or</claim-text><claim-text>remaining, by the optical network unit, in response to a decoded Psync matching the preset Psync and SFC verification succeeding, in the synchronization state.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The data processing method according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising:<claim-text>transitioning, by the optical network unit, in response to a decoded Psync matching the preset Psync and SFC verification succeeding, from the re-synchronization state to the synchronization state after the optical network unit enters the re-synchronization state for P consecutive data frames in the data stream, wherein P is an integer greater than 1.</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. An optical network unit, comprising:<claim-text>a processor; and</claim-text><claim-text>a non-transitory computer readable medium storing a computer program for execution by the processor, the computer program including instructions to:<claim-text>determine, in a data stream, after entering a pre-synchronization state, a position of a forward error correction (FEC) codeword boundary in the data stream based on a position of a physical synchronization sequence (Psync) field;</claim-text><claim-text>perform an FEC codeword decoding check, wherein the Psync field is a field that matches a preset Psync, in the data stream; and</claim-text><claim-text>enter a synchronization state in response to an FEC codeword among N consecutive FEC codewords in the data stream passing the decoding check, wherein N is an integer greater than or equal to 1.</claim-text></claim-text></claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The optical network unit according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the computer program further includes instructions to:<claim-text>search the data stream for the field that matches the preset Psync;</claim-text><claim-text>verify, in response to finding, in the data stream, the Psync field matching the preset Psync, whether a first field having a preset quantity of bits and located after the Psync field constitutes a valid SFC structure; and</claim-text><claim-text>enter the pre-synchronization state in response to the first field constituting the valid SFC structure.</claim-text></claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The optical network unit according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the computer program further includes instructions to:<claim-text>determine, based on a position of the first field, an SFC field located after the first field in the data stream; and</claim-text><claim-text>verify the SFC field, wherein a verification result of the SFC field is that the SFC field constitutes the valid SFC structure.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The optical network unit according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the computer program further includes instructions to:<claim-text>return to a search state from the pre-synchronization state in response to no FEC codeword among the N consecutive FEC codewords in the data stream passing the decoding check, wherein N is an integer greater than or equal to 1.</claim-text></claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The optical network unit according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the computer program further includes instructions to perform at least one of:<claim-text>transition, in response to M consecutive FEC codewords in the data stream not passing the decoding check, from the synchronization state to a re-synchronization state after entering the synchronization state; or</claim-text><claim-text>remain in the synchronization state in response to an FEC codeword among M consecutive FEC codewords in the data stream passing the decoding check;</claim-text><claim-text>wherein M is an integer greater than or equal to 1.</claim-text></claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The optical network unit according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the computer program further includes instructions to:<claim-text>transition, in response to an FEC codeword among S consecutive FEC codewords in the data stream passing the decoding check, from the re-synchronization state to the synchronization state after entering the re-synchronization state, wherein S is an integer greater than or equal to 1.</claim-text></claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The optical network unit according to <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the computer program further includes instructions to:<claim-text>transition, in response to no FEC codeword among the S consecutive FEC codewords in the data stream passing the decoding check, from the re-synchronization state to a search state after entering the re-synchronization state.</claim-text></claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. The optical network unit according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the computer program further includes instructions to:<claim-text>decode an FEC codeword in the data stream to obtain a decoded codeword payload;</claim-text><claim-text>obtain a decoded Psync based on the decoded codeword payload, wherein the decoded Psync is located in the decoded codeword payload;</claim-text><claim-text>verify, in response to the decoded Psync matching the preset Psync, whether a second field having a preset quantity of bits and located after the decoded Psync constitutes a valid SFC structure; and</claim-text><claim-text>perform at least one of enter the synchronization state from the pre-synchronization state in response to the second field constituting the valid SFC structure, or remain in the synchronization state.</claim-text></claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. The optical network unit according to <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein the computer program further includes instructions to:<claim-text>transition, in response to at least one of a decoded Psync does not matching the preset Psync or SFC verification failing, from the synchronization state to a re-synchronization state after entering the synchronization state; or</claim-text><claim-text>remain in the synchronization state in response to a decoded Psync matching the preset Psync and SFC verification succeeding.</claim-text></claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. An optical network system, comprising:<claim-text>an optical line terminal;</claim-text><claim-text>an optical distribution network; and</claim-text><claim-text>an optical network unit, comprising:</claim-text><claim-text>a processor; and</claim-text><claim-text>a non-transitory computer readable medium storing a computer program for execution by the processor, the computer program including instructions to:<claim-text>determine, in a data stream, after entering a pre-synchronization state, a position of a forward error correction (FEC) codeword boundary in the data stream based on a position of a physical synchronization sequence (Psync) field;</claim-text><claim-text>perform an FEC codeword decoding check, wherein the Psync field is a field that matches a preset Psync, in the data stream; and</claim-text><claim-text>enter a synchronization state in response to an FEC codeword among N consecutive FEC codewords in the data stream passing the decoding check, wherein N is an integer greater than or equal to 1.</claim-text></claim-text></claim-text></claim></claims></us-patent-application>