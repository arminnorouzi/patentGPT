<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230003772A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230003772</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17940689</doc-number><date>20220908</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>JP</country><doc-number>2020-044630</doc-number><date>20200313</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>R</subclass><main-group>19</main-group><subgroup>00</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>R</subclass><main-group>19</main-group><subgroup>0092</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>05</class><subclass>H</subclass><main-group>9</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">DIAGNOSTIC DEVICE FOR PARTICLE ACCELERATOR, DIAGNOSTIC METHOD FOR PARTICLE ACCELERATOR, AND DIAGNOSTIC PROGRAM FOR PARTICLE ACCELERATOR</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>PCT/JP2021/008142</doc-number><date>20210303</date></document-id><parent-status>PENDING</parent-status></parent-doc><child-doc><document-id><country>US</country><doc-number>17940689</doc-number></document-id></child-doc></relation></continuation></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>TOSHIBA ENERGY SYSTEMS &#x26; SOLUTIONS CORPORATION</orgname><address><city>Kawasaki-shi</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>MATSUMOTO</last-name><first-name>Munemichi</first-name><address><city>Tokyo</city><country>JP</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>HANAWA</last-name><first-name>Katsushi</first-name><address><city>Tokyo</city><country>JP</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>MIZUSHIMA</last-name><first-name>Kota</first-name><address><city>Chiba</city><country>JP</country></address></addressbook></inventor><inventor sequence="03" designation="us-only"><addressbook><last-name>FURUKAWA</last-name><first-name>Takuji</first-name><address><city>Chiba</city><country>JP</country></address></addressbook></inventor></inventors></us-parties><assignees><assignee><addressbook><orgname>TOSHIBA ENERGY SYSTEMS &#x26; SOLUTIONS CORPORATION</orgname><role>03</role><address><city>Kawasaki-shi</city><country>JP</country></address></addressbook></assignee></assignees></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A particle-accelerator diagnostic technology capable of evaluating extraction efficiency of charged particles in a short cycle is provided.</p><p id="p-0002" num="0000">A diagnostic device for a particle accelerator includes: a first receiver configured to receive a first detection signal from a first detector that detects a first current value generated by movement of charged particles in a circular accelerator, the first detection signal being outputted as a signal corresponding to the first current value; a second receiver configured to receive a second detection signal from a second detector that detects a second current value generated by movement of charged particles extracted from the circular accelerator into a beam transport system, the second detection signal being outputted as a signal corresponding to the second current value; and a calculator configured to calculate an extraction efficiency of charged particles based on the first and second detection signals.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="215.31mm" wi="152.57mm" file="US20230003772A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="232.75mm" wi="154.60mm" file="US20230003772A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="206.93mm" wi="112.95mm" file="US20230003772A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="208.36mm" wi="140.63mm" file="US20230003772A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="231.31mm" wi="154.69mm" file="US20230003772A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="230.46mm" wi="152.65mm" file="US20230003772A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="194.23mm" wi="137.92mm" file="US20230003772A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">CROSS-REFRFRENCE TO RELATED APPLICATIONS</heading><p id="p-0003" num="0001">This application is a Continuation Application of No. PCT/JP2021/008142, filed on March 3,2021, and the PCT application is based upon and claims the benefit of priority from Japanese Patent Application No. 2020-044630, filed on Mar. 13,2020, the entire contents of which are incorporated herein by reference.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">TECHNICAL FIELD</heading><p id="p-0004" num="0002">Embodiments of the present invention relate to a diagnostic technique for a particle accelerator that performs slow extraction of charged particle beams.</p><heading id="h-0003" level="1">BACKGROUND</heading><p id="p-0005" num="0003">In recent years, research has been carried out to apply a charged particle beam, which are brought into a high-energy state by supplying charged particles (ions) to an accelerator and accelerating them, to a wide range of fields such as engineering and medicine. Currently, a widely used accelerator system is roughly composed of an ion source, a linear accelerator (i.e., linac), and a circular accelerator, and stepwisely accelerates charged particles in this order. When the charged particles orbiting in the circular accelerator reach a predetermined energy, an emission device is operated to extract the charged particle beam, traveling direction of which is changed from the orbit, into a beam transport system.</p><p id="p-0006" num="0004">Specifications of emission devices that extract a charged particle beam from a circular accelerator are classified into &#x201c;fast extraction&#x201d; and &#x201c;slow extraction&#x201d;. The &#x201c;fast extraction&#x201d; is a method of extracting all the groups (beams) of charged particles that orbit the circular accelerator within the time required for one orbit.</p><p id="p-0007" num="0005">The &#x201c;slow extraction&#x201d; is a method of extracting a beam of charged particles little by little while causing the charged particles to orbit in the circular accelerator. Thus, as compared with the case of the &#x201c;fast extraction&#x201d;, the charged particle beam to be obtained by the &#x201c;slow extraction&#x201d; can be gradually extracted from the circular accelerator over time.</p><p id="p-0008" num="0006">In this manner, the energy of the charged particle beam to be extracted into the beam transport system can be stepwisely changed by stepwisely accelerating the charged particle beam orbiting in the circular accelerator. Accordingly, in one acceleration cycle in the circular accelerator, charged particle beams of different energies (for example, hundreds of steps) can be extracted into the beam transport system.</p><heading id="h-0004" level="1">PRIOR ART DOCUMENT</heading><heading id="h-0005" level="1">Patent Document</heading><p id="p-0009" num="0000"><ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0007">[Patent Document 1] Japanese Patent No. 4873563</li></ul></p><heading id="h-0006" level="1">SUMMARY</heading><heading id="h-0007" level="1">Problems to be Solved by Invention</heading><p id="p-0010" num="0008">Regarding the loss of the charged particle beam accelerated by the circular accelerator until reaching the terminal equipment (e.g., an irradiator in a treatment room) of the beam transport system, this loss is demanded to be as low as possible. If the transport loss of the charged particle beam is large, there is a problem that the planned energy pattern cannot be executed to the end. Further, if the transport loss of the charged particle beam is large, there is a problem that the beam utilization efficiency is lowered.</p><p id="p-0011" num="0009">It is known that the extraction efficiency of such a charged particle beam changes depending on its energy value and can be improved by adjusting the exciting current of the electromagnet constituting the circular accelerator. In addition, the magnetic field of the electromagnet subtly changes with change in environment of the circular accelerator (cooling water temperature and room temperature), and thus, it is necessary to maintain a high extraction efficiency of charged particle beams by performing fine adjustment work.</p><p id="p-0012" num="0010">It is considered that the extraction efficiency of the charged particle beam varies in the order of 10<sup>&#x2212;5 </sup>seconds to 10<sup>&#x2212;1 </sup>seconds. Thus, in order to maintain a high beam extraction efficiency, it is desirable to control the exciting current of the electromagnet while acquiring a beam extraction efficiency in a unit time as close to real time as possible.</p><p id="p-0013" num="0011">In view of the above-described circumstances, an object of embodiments of the present invention is to provide particle-accelerator diagnostic technology that can evaluate an extraction efficiency of charged particles in a short cycle.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0008" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p-0014" num="0012"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram of a diagnostic device for a particle accelerator according to the first embodiment of the present invention.</p><p id="p-0015" num="0013"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a block diagram of a diagnostic device for a particle accelerator according to the second embodiment of the present invention.</p><p id="p-0016" num="0014"><figref idref="DRAWINGS">FIG. <b>3</b>A</figref> to <figref idref="DRAWINGS">FIG. <b>3</b>E</figref> are timing charts illustrating the operation of the diagnostic device for a particle accelerator according to the embodiment.</p><p id="p-0017" num="0015"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a block diagram of a diagnostic device for a particle accelerator according to the third embodiment of the present invention.</p><p id="p-0018" num="0016"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a block diagram of a diagnostic device for a particle accelerator according to the fourth embodiment of the present invention.</p><p id="p-0019" num="0017"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a flowchart illustrating a diagnostic method and a diagnostic program for a particle accelerator according to each embodiment.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0009" level="1">DETAILED DESCRIPTION</heading><heading id="h-0010" level="1">First Embodiment</heading><p id="p-0020" num="0018">Hereinafter, embodiments of the present invention will be described by referring to the accompanying drawings. <figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram of a diagnostic device <b>10</b>A for a particle accelerator according to the first embodiment of the present invention.</p><p id="p-0021" num="0019">The diagnostic device <b>10</b>A (<b>10</b>) for a particle accelerator includes: a first receiver <b>11</b> configured to receive a first detection signal S<b>1</b> from a first detector <b>28</b> that detects a first current value generated by movement of charged particles in a circular accelerator <b>20</b>; a second receiver <b>12</b> configured to receive a second detection signal S<b>2</b> from a second detector <b>55</b> that detects a second current value generated by movement of charged particles extracted from the circular accelerator <b>20</b> into a beam transport system <b>30</b>; and a calculator <b>40</b> configured to calculate an extraction efficiency Q of charged particles on the basis of the first detection signal S<b>1</b> and the second detection signals S<b>2</b>. Note that the first detection signal S<b>1</b> is outputted as a signal corresponding to the first current value and the second detection signal S<b>2</b> is outputted as a signal corresponding to the second current value.</p><p id="p-0022" num="0020">The calculator <b>40</b> includes a calculation unit <b>16</b>. The calculation unit <b>16</b> performs processing including differential processing on the first detection signal S<b>1</b> so as to obtain a first processing signal D, and calculates the extraction efficiency Q of the extracted charged particles on the basis of the first processing signal D and the second detection signal S<b>2</b> by calculating at least a ratio between them.</p><p id="p-0023" num="0021">The system of the particle accelerator includes an ion source <b>21</b>, a linac <b>22</b>, and the circular accelerator <b>20</b>, and stepwisely accelerates charged particles in this order. When the charged particles orbiting in the circular accelerator <b>20</b> reach a predetermined energy, an emitting device <b>29</b> is operated under the state where this energy is maintained, and the charged particle beam having been changed in traveling direction from the orbit is extracted into the beam transport system <b>30</b>.</p><p id="p-0024" num="0022">In this description, &#x201c;energy&#x201d; means &#x201c;kinetic energy per nucleon&#x201d;. A target particle accelerator to be diagnosed by the diagnostic device <b>10</b>A according to the present embodiment is an apparatus that includes at least the above-described linac (i.e., linear accelerator) <b>22</b>, the circular accelerator <b>20</b>, and the beam transport system <b>30</b>.</p><p id="p-0025" num="0023">Although aspects of the ion source <b>21</b> includes a laser-irradiation ion source in addition to a high-frequency (including microwave) irradiation ion source such as an ECR (Electron Cyclotron Resonance) ion source and a PIG (Penning Ionization Gauge) ion source, the ion source <b>21</b> is not limited to them.</p><p id="p-0026" num="0024">The linac <b>22</b> arranges a plurality of accelerating electric fields with opposite electric field components next to each other into a straight line, repeatedly inverts the electric field direction at a high frequency, and always accelerates the charged particles passing through the accelerating electric field in only one direction. The linac <b>22</b> accelerates the ions having been made incident from the ion source <b>21</b> to a predetermined energy and then emits the ions to the circular accelerator <b>20</b>.</p><p id="p-0027" num="0025">The circular accelerator <b>20</b> includes: a high-frequency acceleration cavity <b>25</b> configured to accelerate the charged particles having been made incident from the linac <b>22</b> by high-frequency power; a plurality of bending electromagnets <b>26</b> configured to generate magnetic fields that bend the orbit of charged particles; a plurality of quadrupole electromagnets <b>27</b> configured to generate a magnetic field that diverges and converges the orbiting charged particles and holds them in the orbit; a current detector (i.e., first detector) <b>28</b> configured to detect the current value of the beam of orbiting charged particles; and the emission device <b>29</b> configured to emit a beam of charged particles orbiting in the circular accelerator <b>20</b> to the beam transport system <b>30</b> little by little.</p><p id="p-0028" num="0026">The circular accelerator <b>20</b> of the above-described configuration can accelerate the beam of the charged particles made incident from the linac <b>22</b> at low energy to, finally, the upper limit energy which is 70% to 80% of the speed of light, while causing the beam to keep orbiting. The circular accelerator <b>20</b> can hold the energy of the beam of orbiting charged particles at any energy lower than this upper limit energy. A controller <b>23</b> controls the ion source <b>21</b>, the linac <b>22</b> and the circular accelerator <b>20</b> in conjunction with each other such that the beam of the charged particles is accelerated correctly.</p><p id="p-0029" num="0027">The beam transport system <b>30</b> includes: quadrupole electromagnets <b>27</b> for keeping the charged particles traveling straight in the orbit; and bending electromagnets <b>26</b> for bending the orbit of the charged particles, separately from the electromagnets <b>26</b> and <b>27</b> in the circular accelerator <b>20</b>. An irradiator <b>50</b> configured to irradiate a tumor of a patient <b>52</b> with the charged particle beam <b>51</b> as treatment is connected to the output stage of this beam transport system <b>30</b>. The irradiator <b>50</b> is only one aspect, and the facility to be connected to the output stage of the beam transport system <b>30</b> is not particularly limited.</p><p id="p-0030" num="0028">The specification of the emission device <b>29</b> adopted in the embodiment is the &#x201c;slow extraction&#x201d; in which a group (beam) of charged particles orbiting in the circular accelerator <b>20</b> is gradually extracted. The emission device <b>29</b> excites an emission electrode (not shown) on the basis of a control signal G inputted from the controller <b>23</b> so as to extract the beam transitioned to an unstable region from the circular accelerator <b>20</b> into the beam transport system <b>30</b>. The beam transport system <b>30</b> is provided with a second detector <b>55</b> that detects and monitors the current value (i.e., second current value) generated by the movement of charged particles passing through it.</p><p id="p-0031" num="0029">The first detection signal S<b>1</b> to be received by the first receiver <b>11</b> is a signal to be outputted from the first detector <b>28</b> provided in the circular accelerator <b>20</b> and corresponds to the current value (i.e., first current value) generated by the movement of orbiting charged particles. The principle of measuring the current value by the first detector <b>28</b> is to detect the magnetic field formed concentrically around the electric current by using Ampere's law. The first detector <b>28</b> outputs the first detection signal S<b>1</b> that is proportional to the first current value generated by the movement of orbiting charged particles.</p><p id="p-0032" num="0030">The calculation unit <b>16</b> outputs the first processing signal D that is obtained by performing processing including at least temporal differentiation on the first detection signal S<b>1</b>. When the beam is extracted from the circular accelerator <b>20</b> into the beam transport system <b>30</b> without loss, the first processing signal D corresponds to the ideal value of the second detection signal S<b>2</b> to be detected by the second detector <b>55</b>.</p><p id="p-0033" num="0031">The first detection signal S<b>1</b> representing the orbital current value of the circular accelerator <b>20</b> is proportional to the orbital frequency f of charged particles, and this orbital frequency f is proportional to the velocity of the charged particles. The decrease number A of charged particles orbiting in the circular accelerator <b>20</b> per unit time is represented by Expression 1 and corresponds to the first processing signal D. In Expression 1, the coefficient k is an amount to be determined depending on the nuclide of charged particles and is a coefficient for conversion from charge amount into number of particles. The &#x394;S<b>1</b> is the amount of change in the first detection signal S<b>1</b> in the period &#x394;t.</p><p id="p-0034" num="0032">Expression 1 decrease number of orbiting charged particles per unit time A=D&#xd7;K1</p><p id="p-0035" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>[<i>D=&#x394;S</i><b>1</b>/&#x394;<i>t,K</i>1=<i>k/f</i>]<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0036" num="0033">Although it is not shown, a noise filter configured to remove a noise component contained in the first detection signal S<b>1</b> is provided at the input stage of the processing in which the first detection signal S<b>1</b> is time-differentiated by the calculation unit <b>16</b>. An amplifier (not shown) configured to amplify the first detection signal S<b>1</b>, which is an analog signal, is also provided at the input stage of the above-described noise filter. Although the amplified first detection signal S<b>1</b> is processed by the noise filter and calculation unit <b>16</b> as an analog signal after that in some cases, the amplified first detection signal is converted into a digital signal and then is processed by the noise filter and the calculation unit <b>16</b> in some cases.</p><p id="p-0037" num="0034">The second detection signal S<b>2</b> to be received by the second receiver <b>12</b> is a signal to be outputted from the second detector <b>55</b> which is provided in the beam transport system <b>30</b>, and is a signal corresponding to the current value (i.e., second current value) generated by the movement of charged particles traveling straight. The principle of measuring the current value by the second detector <b>55</b> is to count the pulse signals generated by the ionized electrons when the charged particle beam passes through the gas. The number of counts of the pulse signals per unit time corresponds to the current value generated by the movement of charged particles passing through the beam transport system <b>30</b>.</p><p id="p-0038" num="0035">The second detector <b>55</b> generates a pulse signal having a frequency which is proportional to the current value of the passing charged particles, and outputs the count integrated value of the generated pulse signal per unit time as the second detection signal S<b>2</b>. As shown by Expression 2 below, the passing number B of charged particles traveling straight through the beam transport system <b>30</b> per unit time is obtained by multiplying the second detection signal S<b>2</b> and the second coefficient K<b>2</b>, which represents the number of charged particles per pulse.</p><p id="p-0039" num="0036">Expression 2</p><p id="p-0040" num="0037">passing number of charged particles traveling straight per unit time B=S<b>2</b>&#xd7;K<b>2</b></p><p id="p-0041" num="0038">The calculator <b>40</b> calculates the extraction efficiency Q of the charged particles by using Expression 3 below. Thus, the extraction efficiency Q has the ratio (S<b>2</b>/D) between the second detection signal S<b>2</b> and the first processing signal D as an element. Further, the extraction efficiency Q when the energy of the charged particles changes is obtained by multiplying the ratio (S<b>2</b>/D) between the second detection signal S<b>2</b> and the first processing signal D by the orbital frequency f and the constant (K<b>2</b>/k).</p><p id="p-0042" num="0039">Expression 3</p><p id="p-0043" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>extraction efficiency <i>Q=B/A=K</i><b>3</b><i>xS</i><b>2</b>/<i>D </i>[<i>K</i>3=<i>K</i>2/<i>K</i>1=<i>f&#xb7;K</i>2/<i>k</i>]<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0044" num="0040">Although the extraction efficiency Q of the beam fluctuates due to various factors, the extraction efficiency Q can be recovered by adjusting the magnetic field based on adjustment of the current value of the electromagnets that constitute the circular accelerator <b>20</b> and the beam transport system <b>30</b>. In particular, it can often be improved by adjusting the current pattern(s) of the quadrupole electromagnets <b>27</b> configured to converge the charged particle beam that orbits in the circular accelerator <b>20</b>.</p><heading id="h-0011" level="1">Second Embodiment</heading><p id="p-0045" num="0041">Next, the second embodiment of the present invention will be described by referring to <figref idref="DRAWINGS">FIG. <b>2</b></figref>. <figref idref="DRAWINGS">FIG. <b>2</b></figref> is a block diagram of a diagnostic device <b>10</b>B for a particle accelerator according to the second embodiment of the present invention. In <figref idref="DRAWINGS">FIG. <b>2</b></figref>, each component having the same configuration or function as those in <figref idref="DRAWINGS">FIG. <b>1</b></figref> is denoted by the same reference sign, and duplicate description is omitted.</p><p id="p-0046" num="0042">The calculator <b>40</b> of the diagnostic device <b>10</b>B (<b>10</b>) for a particle accelerator according to the second embodiment includes: a first conversion calculator <b>41</b> configured to multiply the first processing signal D by the first coefficient K<b>1</b> and to convert it into a first conversion value A, which represents the decrease number of charged particles orbiting in the circular accelerator <b>20</b> per unit time; and a second conversion calculator <b>42</b> configured to multiply the second detection signal S<b>2</b> by the second coefficient K<b>2</b> and to convert it into a second conversion value B, which represents the passing number of charged particles travelling straight through the beam transport system <b>30</b> per unit time. A division calculator <b>45</b> calculates the extraction efficiency Q by dividing the second conversion value B by the first conversion value A.</p><p id="p-0047" num="0043">As shown in Expression 1, the first conversion value A to be outputted from the first conversion calculator <b>41</b> is obtained by multiplying the first processing signal D inputted from the calculation unit <b>16</b> by the first coefficient K<b>1</b>. Since the first coefficient K<b>1</b> includes the orbital frequency f of the circular accelerator <b>20</b> in its element, when the energy of the orbiting charged particles changes, the first coefficient K<b>1</b> is also changed depending on this change in energy.</p><p id="p-0048" num="0044">As shown in Expression 2, the second conversion value B to be outputted from the second conversion calculator <b>42</b> is a value obtained by multiplying the second detection signal S<b>2</b> and the second coefficient K<b>2</b>. This second conversion value B represents the passing number of charged particles traveling straight through the beam transport system <b>30</b> per unit time, and the first conversion value A represents the decrease number of charged particles orbiting in the circular accelerator <b>20</b> per unit time. Thus, even when the energy of the charged particles orbiting in the circular accelerator <b>20</b> changes stepwisely, the ratio (B/A) between the second conversion value B and the first conversion value A represents the extraction efficiency Q.</p><p id="p-0049" num="0045"><figref idref="DRAWINGS">FIG. <b>3</b>A</figref> to <figref idref="DRAWINGS">FIG. <b>3</b>E</figref> are timing charts illustrating the operation of the diagnostic device for a particle accelerator according to the embodiment. A command signal is transmitted from the controller <b>23</b> (<figref idref="DRAWINGS">FIG. <b>1</b></figref>) to the ion source <b>21</b> at the timing shown in <figref idref="DRAWINGS">FIG. <b>3</b>A</figref>. Subsequently, the charged particles are outputted from the ion source <b>21</b> and accelerated by the linac <b>22</b>, and then the beam of the charged particles is supplied to the circular accelerator <b>20</b>.</p><p id="p-0050" num="0046"><figref idref="DRAWINGS">FIG. <b>3</b>B</figref> shows a profile of the exciting current to be applied to the bending electromagnets <b>26</b> from controller <b>23</b> (<figref idref="DRAWINGS">FIG. <b>1</b></figref>). Since the exciting current of each bending electromagnet <b>26</b> is a value uniquely determined so as to correspond to the energy of the orbiting charged particle, it may be considered that <figref idref="DRAWINGS">FIG. <b>3</b>B</figref> shows the profile of the energy of the charged particles orbiting in the circular accelerator <b>20</b>.</p><p id="p-0051" num="0047">Before the transmission of the command signal (<figref idref="DRAWINGS">FIG. <b>3</b>A</figref>), the circular accelerator <b>20</b> is set to an initial state that is appropriate for orbiting the charged particles having an incident energy E<sub>0 </sub>immediately after being supplied from the linac <b>22</b>. After the beam of the charged particles is made incident, the circular accelerator <b>20</b> changes the setting state in the direction of increasing the energy of the charged particles, and holds the setting state when the energy becomes stable at the predetermined energy E<sub>1</sub>.</p><p id="p-0052" num="0048"><figref idref="DRAWINGS">FIG. <b>3</b>C</figref> shows the period &#x394;t of the control signal G to be transmitted from the controller <b>23</b> (<figref idref="DRAWINGS">FIG. <b>1</b></figref>) to the emission device <b>29</b> under the state where the setting state of the circular accelerator <b>20</b> is held at the energy E<sub>1 </sub>(E<sub>2</sub>, or E<sub>3</sub>). In this manner, during the period &#x394;t in which the control signal G is transmitted to the emission device <b>29</b>, the beams of the charged particles orbiting in the circular accelerator <b>20</b> are gradually extracted into the beam transport system <b>30</b>.</p><p id="p-0053" num="0049"><figref idref="DRAWINGS">FIG. <b>3</b>D</figref> shows the profile of the first detection signal S<b>1</b> that indicates the current value of the beam of the charged particles orbiting in the circular accelerator <b>20</b> in the first detector <b>28</b> (<figref idref="DRAWINGS">FIG. <b>1</b></figref>). The calculation unit <b>16</b> performs temporal differentiation to output the change amount &#x394;S<b>1</b> of the first detection signal S<b>1</b> in the period &#x394;t, and outputs the first processing signal D.</p><p id="p-0054" num="0050"><figref idref="DRAWINGS">FIG. <b>3</b>E</figref> shows the profile of the second detection signal S<b>2</b> that indicates the count integration value of the pulse signal(s) generated by the charged particles traveling straight through the beam transport system <b>30</b> during the period &#x394;t in the second detector <b>55</b> (<figref idref="DRAWINGS">FIG. <b>1</b></figref>). At the timing when the first processing signal D and the second detection signal S<b>2</b> are obtained, the extraction efficiency Q is calculated by Expression 3. Further, under the state where the setting state of the energy E of the circular accelerator <b>20</b> stepwisely changed from E<sub>1 </sub>to E<sub>2 </sub>and to E<sub>3</sub>, the first processing signal D and the second detection signal S<b>2</b> are acquired, and the extraction efficiency Q is calculated by Expression 3 in which the orbital frequency f corresponding to the energy E is substituted.</p><p id="p-0055" num="0051">Although the period of differentiation and integration is matched to the beam extraction period &#x394;t in the beam transport system <b>30</b> for facilitating understanding in <figref idref="DRAWINGS">FIG. <b>3</b>A</figref> to <figref idref="DRAWINGS">FIG. <b>3</b>E</figref>, the period of differentiation and integration may be a further shorter period &#x394;t (for example, 100 ms, 10 ms, or 1 ms) within the beam extraction period.</p><p id="p-0056" num="0052">As the control signal G is transmitted to the emission device <b>29</b> and time elapses, the beam of charged particles orbiting in the circular accelerator <b>20</b> decreases or disappears. Thus, the setting state of the circular accelerator <b>20</b> is returned (i.e., decelerated) from the state of energy E<sub>1</sub>, E<sub>2</sub>, E<sub>3 </sub>to the state (i.e., initial setting) of the incident energy E<sub>0</sub>, the command signal is transmitted to the ion source <b>21</b> again (<figref idref="DRAWINGS">FIG. <b>3</b>A</figref>), and thereby, the extraction efficiency Q can be recalculated.</p><heading id="h-0012" level="1">Third Embodiment</heading><p id="p-0057" num="0053">Next, the third embodiment of the present invention will be described by referring to <figref idref="DRAWINGS">FIG. <b>4</b></figref>. <figref idref="DRAWINGS">FIG. <b>4</b></figref> is a block diagram of a diagnostic device <b>10</b>C for a particle accelerator according to the third embodiment of the present invention. In <figref idref="DRAWINGS">FIG. <b>4</b></figref>, each component having the same configuration or function as those in <figref idref="DRAWINGS">FIG. <b>1</b></figref> is denoted by the same reference sign, and duplicate description is omitted.</p><p id="p-0058" num="0054">The diagnostic device <b>10</b>C for a particle accelerator according to the third embodiment includes a selector <b>15</b> that selects one of the plurality of second detection signals S<b>2</b> (S<b>2</b><i>a</i>, S<b>2</b><i>b</i>) received from the respective second detectors <b>55</b> (<b>55</b><i>a</i>, <b>55</b><i>b</i>) provided in the beam transport system <b>30</b>. The second detection signal S<b>2</b> selected by the selector <b>15</b> is received by the second receiver <b>12</b>. The operation of the respective components of the third embodiment except the selector <b>15</b> is the same as the components of the first embodiment and the second embodiment.</p><p id="p-0059" num="0055">The second detection signal S<b>2</b><i>a </i>is outputted from the second detector <b>55</b><i>a </i>installed on the upstream side of the beam transport system <b>30</b>, and thus, the extraction efficiency Q calculated on the basis of the second detection signal S<b>2</b><i>a </i>reflects the beam loss immediately after being extracted from the circular accelerator <b>20</b> into the beam transport system <b>30</b>. The second detection signal S<b>2</b><i>b </i>is outputted from the second detector <b>55</b><i>b </i>installed on the downstream side of the beam transport system <b>30</b>, and the extraction efficiency Q calculated on the basis of the second detection signal S<b>2</b><i>b </i>also reflects the beam loss in the process of passing through the beam transport system <b>30</b>.</p><p id="p-0060" num="0056">One of the factors of the deterioration of extraction efficiency Q is that the electromagnet magnetic-field subtly changes due to change in environment such as the cooling water temperature and room temperature in the accelerator building. When the extraction efficiency Q calculated on the basis of the second detection signal S<b>2</b><i>a </i>deteriorates, the peripheral devices of the circular accelerator <b>20</b> and the control parameters are adjusted. When the extraction efficiency Q calculated on the basis of the second detection signal S<b>2</b><i>b </i>deteriorates, the peripheral devices of the beam transport system <b>30</b> and the control parameters are adjusted. In this manner, a plurality of extraction efficiencies Q are calculated on the basis of the second detection signals S<b>2</b> outputted from the respective second detectors <b>55</b> provided at different positions in the beam transport system <b>30</b>, which helps to determine the cause of the beam loss.</p><p id="p-0061" num="0057">Although the above-described embodiment shows the case where the beam transport system <b>30</b> is configured of one line, the beam transport system <b>30</b> is configured of branched lines in some cases. In such a case, disposition of the plurality of second detectors <b>55</b> facilitates the identification of which branch of the beam transport system <b>30</b> is responsible for the beam loss.</p><heading id="h-0013" level="1">Fourth Embodiment</heading><p id="p-0062" num="0058">Next, the fourth embodiment of the present invention will be described by referring to <figref idref="DRAWINGS">FIG. <b>5</b></figref>. <figref idref="DRAWINGS">FIG. <b>5</b></figref> is a block diagram of a diagnostic device <b>10</b>D for a particle accelerator according to the fourth embodiment of the present invention. In <figref idref="DRAWINGS">FIG. <b>5</b></figref>, each component having the same configuration or function as those in <figref idref="DRAWINGS">FIG. <b>1</b></figref> is denoted by the same reference sign, and duplicate description is omitted.</p><p id="p-0063" num="0059">The diagnostic device <b>10</b>D (<b>10</b>) for a particle accelerator according to the fourth embodiment further includes a determination unit <b>17</b> that determines whether or not to output an attention signal R of abnormality occurrence from an output unit <b>18</b> to at least one of the respective controllers <b>23</b> and <b>24</b> of the circular accelerator <b>20</b> and the beam transport system <b>30</b>. This attention signal R is inputted to the controller <b>23</b> and causes the circular accelerator <b>20</b> and/or the beam transport system <b>30</b> to perform predetermined actions. The operation of the respective components of the fourth embodiment except the determination unit <b>17</b> and the output unit <b>18</b> is the same as the components of the first embodiment and the second embodiment.</p><p id="p-0064" num="0060">When the extraction efficiency Q deteriorates beyond the permissible value, it is presumed that some abnormality has occurred in the circular accelerator <b>20</b> or the beam transport system <b>30</b>. When the attention signal R is outputted in the process of treating a patient with the irradiator <b>50</b>, in some cases, the operator is notified of it or the operation of the circular accelerator <b>20</b> and the beam transport system <b>30</b> is stopped urgently.</p><p id="p-0065" num="0061">Additionally or alternatively, when the attention signal R is outputted, a plurality of correction current patterns are inputted to the electromagnets <b>27</b> by the controller <b>23</b> such that a plurality of extraction efficiencies Q are calculated on the basis of the respective correction current patterns. As a result, the charged particle beam can be efficiently radiated by adopting the correction current pattern having the best extraction efficiency Q.</p><p id="p-0066" num="0062">A diagnostic method and a diagnostic program for a particle accelerator according to each embodiment will be described on the basis of the flowchart of <figref idref="DRAWINGS">FIG. <b>6</b></figref> by referring to <figref idref="DRAWINGS">FIG. <b>1</b></figref> as required.</p><p id="p-0067" num="0063">First, in the step S<b>11</b>, the charged particle beam orbiting in the circular accelerator <b>20</b> is stabilized at a predetermined energy E.</p><p id="p-0068" num="0064">In the next step S<b>12</b>, the charged particle beam is extracted from the circular accelerator <b>20</b> and is caused to pass straight through the beam transport system <b>30</b>.</p><p id="p-0069" num="0065">In the next step S<b>13</b>, the first detection signal S<b>1</b> corresponding to the first current value, which is generated by the movement of charged particles orbiting in the circular accelerator <b>20</b>, is received.</p><p id="p-0070" num="0066">In the next step S<b>14</b>, the first detection signal S<b>1</b> is time-differentiated and the first processing signal D is outputted.</p><p id="p-0071" num="0067">In the step <b>515</b>, the second detection signal S<b>2</b> corresponding to the second current value generated by the movement of charged particles, which are extracted from the circular accelerator <b>20</b> and travel straight through the beam transport system <b>30</b>, is received.</p><p id="p-0072" num="0068">In the next step S<b>16</b>, the ratio between the first processing signal D and the second detection signal S<b>2</b> is calculated, and the extraction efficiency Q of the charged particles is calculated.</p><p id="p-0073" num="0069">If the extraction efficiency Q does not exceed a predetermined threshold value (No in the step S<b>17</b>), the attention signal is outputted in the step S<b>18</b>. If the attention signal is outputted, the exciting current to be inputted into the electromagnets constituting the circular accelerator <b>20</b> or the beam transport system <b>30</b> is adjusted at the operator's discretion.</p><p id="p-0074" num="0070">If the extraction efficiency Q is larger than the threshold value (Yes in the step S<b>17</b>), the energy E of the charged particle beam orbiting in the circular accelerator <b>20</b> is updated (No in the step S<b>19</b>), and the flow from the steps S<b>11</b> to S<b>17</b> is repeated. If it is checked that the extraction efficiency Q is larger than the threshold value in all the energies E having been set (Yes in the step S<b>19</b>), the processing is completed.</p><p id="p-0075" num="0071">According to the diagnostic device for a particle accelerator in at least one embodiment described above, the extraction efficiency of the charged particle beam can be evaluated in a short cycle by calculating the ratio between the temporal differential value of the beam current value of the circular accelerator and the beam current value of the beam transport system.</p><p id="p-0076" num="0072">In each embodiment, it is sufficient if the decrease number of charged particles orbiting in the circular accelerator can be compared with the number of charged particles emitted into the beam transport system. Although the first detection signal is subjected to temporal differentiation in the above-described embodiments, the temporal differentiation is not an essential operation if it is configured such that the beam emission efficiency can be obtained on the basis of (i) change in first detection signal due to beam emission (i.e., decrease of charged particles in the circular accelerator) and (ii) the time corresponding to the emission timing of this beam (i.e., second detection signal at the timing when the emitted beam reaches the second detector <b>55</b>), for example.</p><p id="p-0077" num="0073">While certain embodiments have been described, these embodiments have been presented by way of example only, and are not intended to limit the scope of the inventions. These embodiments may be embodied in a variety of other forms, and various omissions, substitutions, and changes may be made without departing from the spirit of the inventions. These embodiments and their modifications are included in the accompanying claims and their equivalents as well as included in the scope and gist of the inventions.</p><p id="p-0078" num="0074">The above-described diagnostic device for a particle accelerator includes: a controller in which one or more processors such as a dedicated chip, an FPGA (Field Programmable Gate Array), a GPU (Graphics Processing Unit), and a CPU (Central Processing Unit) are highly integrated; a memory such as a ROM (Read Only Memory) and a RAM (Random Access Memory); an external storage device such as a HDD (Hard Disk Drive) and an SSD (Solid State Drive); a display; an input device such as a mouse and a keyboard; and a communication interface. The diagnostic device for a particle accelerator can be realized by general computer-based hardware configuration.</p><p id="p-0079" num="0075">The program to be executed by the diagnostic device for a particle accelerator may be provided in the form of being pre-embedded in a ROM or similar device. Additionally or alternatively, this program can be provided as an installable or executable file stored in a computer-readable storage medium such as a CD-ROM, a CD-R, a memory card, a DVD, and a flexible disk (FD).</p><p id="p-0080" num="0076">Moreover, the program to be executed by the diagnostic device for a particle accelerator according to the present embodiment may be stored in a computer connected to a network such as the Internet so as to be provided by being downloaded via the network. Furthermore, the diagnostic device for a particle accelerator can also be configured by interconnecting separate modules, which independently achieve the respective functions of the components, via a network or dedicated lines and combining these modules.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A diagnostic device for a particle accelerator comprising:<claim-text>a first receiver configured to receive a first detection signal from a first detector that detects a first current value generated by movement of charged particles in a circular accelerator, the first detection signal being outputted as a signal corresponding to the first current value;</claim-text><claim-text>a second receiver configured to receive a second detection signal from at least one second detector that detects a second current value generated by movement of charged particles extracted from the circular accelerator into a beam transport system, the second detection signal being outputted as a signal corresponding to the second current value; and</claim-text><claim-text>a calculator configured to calculate an extraction efficiency of extracted charged particles based on the first detection signal and the second detection signal.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The diagnostic device for a particle accelerator according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the calculator is configured to:<claim-text>acquire a first processing signal by performing processing including differentiation processing on the first detection signal; and</claim-text><claim-text>calculate the extraction efficiency of extracted charged particles based on the first processing signal and the second detection signal.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The diagnostic device for a particle accelerator according to <claim-ref idref="CLM-00002">claim 2</claim-ref>,<claim-text>wherein the calculator includes:<claim-text>a first conversion calculator configured to convert the first processing signal into a first conversion value by multiplying the first processing signal by a first coefficient, the first conversion value representing decrease number of the charged particles orbiting in the circular accelerator per unit time; and</claim-text><claim-text>a second conversion calculator configured to convert the second detection signal into a second conversion value by multiplying the second detection signal by a second coefficient, the second conversion value representing passing number of the charged particles travelling straight through the beam transport system per unit time, and</claim-text></claim-text><claim-text>wherein the calculator is configured to calculate the extraction efficiency by dividing the second conversion value by the first conversion value.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The diagnostic device for a particle accelerator according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the calculator is configured to calculate the extraction efficiency each time energy of the charged particles orbiting in the circular accelerator changes stepwisely.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The diagnostic device for a particle accelerator according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a selector, wherein:<claim-text>the at least one second detector comprises a plurality of second detectors provided in the beam transport system; and</claim-text><claim-text>the selector is configured to select any one of respective second detection signals received from the plurality of second detectors.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The diagnostic device for a particle accelerator according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a determination unit configured to determine whether to output an abnormality-occurrence attention-signal to a controller of at least one of the circular accelerator and the beam transport system or not, based on the extraction efficiency.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The diagnostic device for a particle accelerator according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the diagnostic device causes the controller to input a plurality of correction current patterns into an electromagnet and calculates a plurality of extraction efficiencies based on respective correction current patterns, when the abnormality-occurrence attention-signal is outputted.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. A diagnostic method for a particle accelerator comprising steps of:<claim-text>receiving a first detection signal from a first detector that detects a first current value generated by movement of charged particles in a circular accelerator, the first detection signal being outputted as a signal corresponding to the first current value;</claim-text><claim-text>receiving a second detection signal from a second detector that detects a second current value generated by movement of charged particles extracted from the circular accelerator into a beam transport system, the second detection signal being outputted as a signal corresponding to the second current value; and</claim-text><claim-text>calculating an extraction efficiency of extracted charged particles based on the first detection signal and the second detection signal.</claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. A diagnostic program for a particle accelerator that allows a computer to perform:<claim-text>a reception process of receiving a first detection signal from a first detector that detects a first current value generated by movement of charged particles in a circular accelerator, the first detection signal being outputted as a signal corresponding to the first current value;</claim-text><claim-text>another reception process of receiving a second detection signal from a second detector that detects a second current value generated by movement of charged particles extracted from the circular accelerator into a beam transport system, the second detection signal being outputted as a signal corresponding to the second current value; and</claim-text><claim-text>a calculation process of calculating an extraction efficiency of extracted charged particles based on the first detection signal and the second detection signal.</claim-text></claim-text></claim></claims></us-patent-application>