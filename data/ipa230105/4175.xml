<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230004176A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230004176</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17931083</doc-number><date>20220909</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>05</class><subclass>D</subclass><main-group>7</main-group><subgroup>06</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>F</section><class>16</class><subclass>K</subclass><main-group>37</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>M</subclass><main-group>3</main-group><subgroup>28</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>F</subclass><main-group>15</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>05</class><subclass>D</subclass><main-group>7</main-group><subgroup>0635</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>F</section><class>16</class><subclass>K</subclass><main-group>37</main-group><subgroup>005</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>M</subclass><main-group>3</main-group><subgroup>2876</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>F</subclass><main-group>15</main-group><subgroup>005</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">SYSTEMS AND METHODS FOR CALIBRATING AND TUNING A MASS FLOW CONTROLLER</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>16597781</doc-number><date>20191009</date></document-id><parent-status>PENDING</parent-status></parent-doc><child-doc><document-id><country>US</country><doc-number>17931083</doc-number></document-id></child-doc></relation></continuation><continuation-in-part><relation><parent-doc><document-id><country>US</country><doc-number>15907138</doc-number><date>20180227</date></document-id><parent-grant-document><document-id><country>US</country><doc-number>10983537</doc-number></document-id></parent-grant-document></parent-doc><child-doc><document-id><country>US</country><doc-number>16597781</doc-number></document-id></child-doc></relation></continuation-in-part><us-provisional-application><document-id><country>US</country><doc-number>62464251</doc-number><date>20170227</date></document-id></us-provisional-application></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>FLOW DEVICES AND SYSTEMS INC.</orgname><address><city>YORBA LINDA</city><state>CA</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Somani</last-name><first-name>Bhushan</first-name><address><city>Yorba Linda</city><state>CA</state><country>US</country></address></addressbook></inventor></inventors></us-parties><assignees><assignee><addressbook><orgname>FLOW DEVICES AND SYSTEMS INC.</orgname><role>02</role><address><city>YORBA LINDA</city><state>CA</state><country>US</country></address></addressbook></assignee></assignees></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A mass flow control apparatus and methods for calibrating and tuning the mass flow apparatus are provided. The mass flow apparatus can be calibrated by receiving a calibration input signal that provides one or more properties of a gas that is flowing through a main fluid flow path and performing one or more measurements, using one or more sensors, on the gas. The calibration includes determining a calibration parameter based on the results of the one or more measurements and the calibration input signal and adjusting a proportional valve, based on the calibration parameter, to adjust a flow rate, of the gas through the apparatus, to match a setpoint flow rate.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="105.07mm" wi="158.75mm" file="US20230004176A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="202.44mm" wi="159.09mm" orientation="landscape" file="US20230004176A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="202.44mm" wi="159.09mm" orientation="landscape" file="US20230004176A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="213.87mm" wi="121.50mm" orientation="landscape" file="US20230004176A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="200.66mm" wi="125.05mm" orientation="landscape" file="US20230004176A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="215.48mm" wi="141.31mm" orientation="landscape" file="US20230004176A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="219.96mm" wi="132.50mm" orientation="landscape" file="US20230004176A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="220.73mm" wi="159.77mm" orientation="landscape" file="US20230004176A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="217.85mm" wi="146.13mm" orientation="landscape" file="US20230004176A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="229.45mm" wi="160.36mm" orientation="landscape" file="US20230004176A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="231.39mm" wi="159.09mm" orientation="landscape" file="US20230004176A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00011" num="00011"><img id="EMI-D00011" he="231.06mm" wi="175.85mm" orientation="landscape" file="US20230004176A1-20230105-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00012" num="00012"><img id="EMI-D00012" he="219.12mm" wi="183.05mm" orientation="landscape" file="US20230004176A1-20230105-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00013" num="00013"><img id="EMI-D00013" he="215.56mm" wi="170.10mm" orientation="landscape" file="US20230004176A1-20230105-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00014" num="00014"><img id="EMI-D00014" he="125.56mm" wi="171.53mm" orientation="landscape" file="US20230004176A1-20230105-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00015" num="00015"><img id="EMI-D00015" he="242.57mm" wi="129.20mm" file="US20230004176A1-20230105-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00016" num="00016"><img id="EMI-D00016" he="233.85mm" wi="163.58mm" file="US20230004176A1-20230105-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00017" num="00017"><img id="EMI-D00017" he="99.23mm" wi="187.28mm" orientation="landscape" file="US20230004176A1-20230105-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00018" num="00018"><img id="EMI-D00018" he="220.13mm" wi="98.81mm" file="US20230004176A1-20230105-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00019" num="00019"><img id="EMI-D00019" he="187.96mm" wi="161.37mm" orientation="landscape" file="US20230004176A1-20230105-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">PRIORITY CLAIM TO RELATED APPLICATIONS</heading><p id="p-0002" num="0001">This application is a continuation of Non-Provisional application Ser. No. 16/597,781, filed Oct. 9, 2019, entitled as Systems And Methods For Calibrating And Tuning A Mass Flow Controller, which is a continuation-in-part of Non-Provisional application Ser. No. 15/907,138, now U.S. Pat. No. 10,983,537, filed Feb. 27, 2018, entitled as &#x201c;Systems and Methods for Flow Sensor Back Pressure Adjustment for Mass Flow Controller&#x201d;, which claimed the benefit of U.S. Provisional Patent Application No. 62/464,251, filed Feb. 27, 2017, entitled as &#x201c;Systems, Apparatus and Methods for Flow Sensor Back Pressure Adjustment for Mass Flow Control&#x201d;, each of which is incorporated herein by reference in its entirety.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">BACKGROUND</heading><p id="p-0003" num="0002">Mass flow controllers control the flow rate of a gas or liquid that flows through the mass flow controller. Controlling the flow rate of a gas can be challenging because the flow rate measurement is dependent on properties of the gas such as temperature, pressure and volume. Those properties inevitably change as the flow of the gas is restricted as the gas moves through the mass flow controller. To produce accurate measurements, a calibration is typically done under factory conditions for the various types of gases that the mass flow controller is likely to receive.</p><p id="p-0004" num="0003">Mass flow controllers are also typically tuned under factory conditions. The tuning of a mass flow controller determines how the mass flow controller adjusts a proportional valve to match the measured flow rate to a setpoint flow rate. An overly aggressive tuning may cause the mass flow controller to adjust the proportional valve too quickly and overshoot the setpoint flow rate. Different types and compositions of gases may require different tuning parameters. A change in tuning may be required when the mass flow controller is away from factory conditions. There is a need for a mass flow controller that can be calibrated and tuned in the field. There is also a need for a mass flow controller that can be easily configured in the field and can easily transmit data to users.</p><p id="p-0005" num="0004">Various embodiments relate to mass flow control apparatus. Mass flow controller may operate by modulating a fluid pressure. Fluid as used herein is intended to encompass materials which are in a gaseous phase because of specific combinations of pressure and temperature despite whether such materials are gaseous under everyday circumstances. Thus, fluids may include water vapor or boron trichloride (BCl<sub>3</sub>), for example, along with common gaseous materials such as silane (SiH<sub>4</sub>), argon, nitrogen, etc. The embodiments described below relate to determining the present flow conditions at a flow restriction in a fluid flow pathway to ascertain whether or not a chosen flow control algorithm is valid for those present conditions. At various times, a low fluid flow rate may be required while a silicon manufacturing chamber may also provide back pressure. Providing a low fluid flow rate in a backpressure environment may be challenging. Various embodiments described below are directed to addressing issues related to low flow conditions with back pressure from the upstream direction.</p><heading id="h-0003" level="1">SUMMARY</heading><p id="p-0006" num="0005">The present disclosure includes methods for calibrating a mass flow controller. In an exemplary embodiment, a method includes receiving a calibration input signal that provides one or more properties of a gas that is flowing through a main fluid flow path. The method includes performing one or more measurements, using one or more sensors, on the gas and determining a calibration parameter based on the results of the one or more measurements and the calibration input signal. The method includes adjusting a proportional valve, based on the calibration parameter, to adjust a flow rate, of the gas through the apparatus, to match a setpoint flow rate. The one or more measurements of the method may be one or more rate of decay measurements. The method may further include determining a measured volume based on the results of the one or more rate of decay measurements where the calibration input signal provides an actual volume of the gas and where the calibration parameter matches the measured volume to the actual volume. The shut-off valve may include an elastomer located between a shut off valve seat and shut off valve body components. The method may further include performing a subsequent rate of decay measurement, responsive to receiving a command, based on the calibration parameter. The method may further include determining a leak-by value based on the subsequent rate of decay measurement. The setpoint flow rate of the method may be received by a wireless antenna.</p><p id="p-0007" num="0006">In an exemplary embodiment, a mass flow control apparatus may include a main fluid flow path connected to a proportional valve and at least one sensor that measures a property of a gas in the flow path downstream to a flow restrictor. The apparatus includes a control module configured to receive a calibration input for a gas and calculate a rate of decay from a signal from the at least one sensor when the inlet valve is closed where the control module is further configured to calculate a calibration parameter based on the rate of decay and receive a setpoint flow rate. The control module is further configured to adjust the proportional valve, based on the calibration parameter, to adjust a flow rate, of the gas through the apparatus, to match the setpoint flow rate. The calibration input of the mass flow control apparatus may be an actual volume of the gas where the calibration parameter matches a measured volume, based on the rate of decay, to the actual volume of the gas. The calibration input of the mass flow control apparatus may be one or more values for actual flow performance where each of the one or more values for actual flow performance is given for a configuration point that is on the flow spectrum for the apparatus and the calibration parameter determines a measured flow rate, based on the rate of decay, and matches the measured flow rate to each of the one or more values for actual flow performance. The control module may be further configured to detect a deviation of accuracy based on the calibration parameter and set off an alarm to alert the user of the deviation where the alarm is further configured to transmit an alarm signal over a communication protocol. The mass flow control apparatus may further include an elastomer located between the shut off valve seat and shut off valve body components. The elastomer may be a corrosion resistant material selected from the group consisting of PCTFE, PTEE, TEFLON, or NYLON. The control module of the mass flow control apparatus may be further configured to calculate a leak-by value based on the rate of decay. The mass flow apparatus may further include a wireless antenna that can receive signals and transmit signals.</p><p id="p-0008" num="0007">Another general aspect is a method for tuning a mass flow control apparatus. The method includes providing a main fluid flow path connected to a proportional valve, an inlet valve connected to the main flow path, a shut off valve located downstream from the inlet valve and connected to the main flow path. The method includes receiving an input signal for a gas that is flowing through the main fluid flow path and adjusting the proportional valve, based on the input signal. The method includes determining a response to the flow rate after the adjustment of the proportional valve and determining a tuning parameter based on the response. The input signal may be received at one or more configuration points on the flow spectrum of the mass flow control apparatus. The input signal may be received by a wireless antenna. The shut-off valve may include an elastomer material at the seal of a valve seat and a valve body component. The method may further include performing a rate of decay measurement, responsive to receiving a command and determining a leak-by value based on the subsequent rate of decay measurement.</p><p id="p-0009" num="0008">In consideration of the foregoing applicant has invented a fluid mass flow control apparatus comprising three valves, a flow restriction, and provisions for determining three different fluid pressures and at least one temperature.</p><p id="p-0010" num="0009">In accordance with one embodiment, a mass flow control apparatus is provided that includes a control module configured to receive a first set point for delivering a fluid delivery to a tool, responsive to the control module receiving a second set point that is significantly lower than a first set point, a variable control valve located downstream from the flow restrictor and downstream from a first pressure sensor configured to constrict to reduce the flow of the fluid responsive to receiving the second set point. The mass flow controller apparatus further including solenoid type valve as a variable control valve. The variable control valve is configured to control the downstream pressure from the flow restrictor. A second pressure sensor located upstream from the variable control valve, the second pressure sensor configured to measure back pressure from the tool. The variable control valve constricts sufficiently to increase the pressure of the fluid from the flow restrictor to be higher than the measured back pressure from the tool and adjust the pressure to the flow restrictor such that the pressure drops across the flow restrictor to yield a flow rate that is equal to the second set point. A proportional control valve that is a solenoid valve to control the pressure to the flow restrictor and a shutoff valve including a solenoid valve to close the inlet supply to perform a rate of decay measurement operation.</p><p id="p-0011" num="0010">In another embodiment, a mass flow control apparatus is provided that includes a proportional valve upstream of a flow measurement portion, a pressure sensing element fluidly connected to determine a fluid pressure, downstream of the flow measurement portion and a dynamically adjustable variable valve downstream of both the flow measurement portion and the pressure sensing element connection. A solenoid valve to control pressure to a flow restrictor with a proportional control valve that is a solenoid valve to control the pressure to the flow restrictor. A shutoff valve comprises a solenoid valve to close the inlet supply to perform a rate of decay measurement operation. A pressure-based flow sensor including a fluid conduit with fluidly coupled pressure and temperature sensing provisions upstream of a known flow restriction. A thermal-based flow sensor includes fluid conduit with two spaced apart temperature responsive elements affixed to the exterior of the fluid conduit. The dynamically adjustable variable valve can be adjusted to any of at least two different amounts of openings. The dynamically adjustable variable valve can be continuously adjusted to a range of openings.</p><p id="p-0012" num="0011">In various embodiments, a mass flow control apparatus is provided that includes an inlet to a fluid pathway, a controllable shutoff valve, the controllable shutoff valve providing provisions for measuring a reference temperature (T<b>0</b>) and a reference pressure (P<b>0</b>) of a fluid contained within a reference volume of the fluid pathway, a proportional control valve, the proportional control valve providing provisions for measuring a first temperature (T<b>1</b>) and a first pressure (P<b>1</b>) of the fluid contained within the fluid pathway upstream of a flow restriction, the flow restriction providing provision for measuring a second pressure (P<b>2</b>) of the fluid contained within the fluid pathway downstream of the flow restriction, a variable valve; and an outlet from the fluid pathway. The flow restriction is chosen from group of an orifice, a nozzle, a porous sintered metal element or a laminar flow structures. A supervision function may choose an action from group of self-calibration process, change of system parameter or storage of results.</p><p id="p-0013" num="0012">In various embodiments, a method for a mass flow control apparatus is provided, including determining a fluid pressure downstream of a flow sensor, responding to the fluid pressure downstream and adjusting dynamically a variable valve downstream of the flow sensor to maintain desired operating conditions in the flow sensor; and maintaining and extending the useful operating range of the mass flow control apparatus. The method further including a flow verification capability. The flow verification capability including the steps of closing a shutoff valve to isolate a fluid pathway from an inlet while controlled mass flow continues through an outlet; making repeated measurements of a reference volume of a fluid pathway for a period of time, opening the shutoff valve to re-establish fluid pathway connection to the inlet, calculating a verified flow signal using pressure-volume-temperature methods; and providing a verified flow signal to a supervision function. The supervision function directs that a series of flow verification measurements be performed corresponding to different values of determined fluid pressures and fluid temperatures adjacent the flow restriction and determines a calibration curve for a discrete flow restriction based on the flow signals generated by the flow verification measurements.</p><p id="p-0014" num="0013">A mass flow control apparatus including a control module configured to receive a first set point flow rate for delivering a fluid delivery to a tool, responsive to the control module receiving a second set point that is significantly lower that a first set point flow rate: a variable control valve located downstream from a flow restrictor and downstream from a first pressure sensor, the variable control valve configured to constrict to adjust the pressure of the fluid responsive to receiving the second set point flow rate; and a proportional control valve located upstream from the flow restrictor to adjust the pressure to the flow restrictor. In some embodiments the variable control valve is a solenoid type valve. In various embodiments, the proportional control valve is a solenoid type valve. In various embodiments, the variable control valve is configured to control the pressure downstream from the flow restrictor responsive to receiving a significantly lower second set point; and wherein significantly lower is 5% of full scale fluid flow rate. In some embodiments, significantly lower would be at least one of 60%, 65%, 70%, 75%, 80%, 85%, 90% or 95% of the previously request set point flow rate.</p><p id="p-0015" num="0014">In various embodiments, the variable control valve constricts the fluid flow in the flow path sufficiently to increase the pressure of the fluid from the flow restrictor to be higher than a back pressure from the tool and the proportional control valve is configured to adjust the pressure to the flow restrictor such that the pressure drop across the flow restrictor yields a flow rate that is equal to the second set point. In various embodiments, a reference volume may be configured to verify the actual flow rate by closing the fluid flow using a shut off valve and measuring the pressure rate of decay in the reference volume and adjusting one or both of the variable control valve or the proportional control valve until the second set point flow rate is achieved. In some embodiments, the mass flow controller may use thermal-based flow sensor and a supervision function. The mass flow control may include a thermal-based flow sensor with a fluid conduit with two spaced apart temperature responsive elements affixed to the exterior of the fluid conduit. In some embodiments, a variable control valve can be adjusted to any of at least two different amounts of openings. In some embodiments, a variable control valve can be continuously adjusted to a range of openings. In some embodiments, a the variable control valve can be adjusted to a provide a complete shut-off position. In some embodiments, a shut-off valve upstream from a reference volume, wherein the reference volume is upstream from a flow restrictor, the shut-off valve configured to close the inlet supply to perform a rate of decay operation; and wherein the shut-off valve is a solenoid type valve. In some embodiments, a first pressure sensor is configured to measure fluid pressure (P<b>0</b>) and a first temperature sensor is configured to measure temperature (T<b>0</b>) of a reference volume downstream from the shutoff valve; a proportional control valve, the proportional control valve providing provisions for measuring a second temperature (T<b>1</b>) and a second pressure (P<b>1</b>) of the fluid contained within the fluid pathway upstream of a flow restriction; the flow restriction providing provision for measuring a third pressure (P<b>2</b>) of the fluid contained within the fluid pathway downstream of the flow restriction; and an outlet from the fluid pathway. In some embodiments, a shut-off valve upstream from a reference volume, the reference volume is upstream from a flow restrictor, the shut-off valve configured to close the inlet supply to perform a rate of decay operation; wherein the shut-off valve is a solenoid type valve, and a proportional control valve that is a solenoid valve to control the pressure to the flow restrictor. In some embodiments, the flow restrictor is chosen from group comprising of an orifice, a nozzle, a porous sintered metal element, a laminar flow structures or tubes.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>1</b>A</figref> is a schematic of a pressure-based flow controller.</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>1</b>B</figref> is a schematic of a thermal-based flow controller.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>2</b>A</figref> is a schematic of a mass flow controller with a proportional valve upstream of a flow measurement portion.</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>2</b>B</figref> is a schematic of a mass flow controller with a proportional valve downstream of a flow measurement portion.</p><p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. <b>2</b>C</figref> is a schematic of a mass flow controller that is capable of pressure monitoring downstream of a flow measurement portion.</p><p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a schematic of a mass flow controller that includes a pressure sensing element connection downstream of a flow measurement portion and a dynamically adjustable variable valve further downstream of the pressure sensing element.</p><p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a schematic of a mass flow controller that includes a flow verification capability while using a pressure-based flow sensor.</p><p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a schematic of a mass flow controller that includes a dynamically variable valve downstream of a flow measurement portion and a pressure sensing element connection further downstream of the variable valve.</p><p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a schematic of a mass flow controller that includes a flow verification capability while using a pressure-based flow sensor.</p><p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is an illustration showing portions of a complex fluid delivery system within a single large apparatus for processing semiconductor devices.</p><p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a schematic of a mass flow controller illustrating the components that may be used in an embodiment of the disclosed subject matter.</p><p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a schematic of a mass flow controller illustrating the components that may be used in an embodiment of the disclosed subject matter.</p><p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a schematic of a mass flow controller attached to a customer tool.</p><p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. <b>11</b></figref> is a cross-sectional view of the bottom portion of the mass flow controller.</p><p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. <b>12</b></figref> is a cross-sectional perspective view of the bottom portion of the mass flow controller.</p><p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. <b>13</b></figref> is a perspective view of a multitude of mass flow controllers that are connected by a manifold.</p><p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. <b>14</b></figref> is a flow diagram for a process of matching the metrology of the mass flow controller to the metrology of the customer tool.</p><p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. <b>15</b></figref> is a flow diagram for a process of tuning the mass flow controller in situ.</p><p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. <b>16</b></figref> is a block diagram of a computer system that may be implemented in the various embodiments of the control module computer.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">DETAILED DESCRIPTION</heading><p id="p-0035" num="0034">This invention is not limited in its application to the details of construction and the arrangement of components set forth in the following description or illustrated in the drawings. The invention is capable of other embodiments and of being practiced or of being carried out in various ways. Also, the phrasing and terminology used herein is for the purpose of description and should not be regarded as limiting. The use of &#x201c;including,&#x201d; &#x201c;comprising,&#x201d; or &#x201c;having,&#x201d; &#x201c;containing,&#x201d; &#x201c;involving,&#x201d; and variations thereof herein, is meant to encompass the items listed thereafter and equivalents thereof as well as additional items. The use of directional adjectives &#x201c;inner, &#x201c;outer,&#x201d; &#x201c;upper,&#x201d; &#x201c;lower,&#x201d; &#x201c;upstream&#x201d;, &#x201c;downstream&#x201d; and like terms, are meant to assist with understanding relative relationships among design elements and should not be construed as meaning an absolute direction in space nor regarded as limiting.</p><p id="p-0036" num="0035">Embodiments are directed to systems and methods for a mass flow controller for responding to a request for a large reduction in flow rate or a large step down in flow rate. For example, a semiconductor manufacturing recipe may require a drop from 500 cc flow rate to drop to 25 cc. The bleed down time or the amount of time a mass flow controls takes to provide the reduction should be fast. Embodiments are directed to providing a variable control valve located downstream from each of the following elements within a mass flow controller: fluid state sensing element (including reference volume, pressure sensor and temperature sensor), proportional valve, additional pressure and temperature sensors, flow restrictor and third pressure sensor. As will be discussed in greater detail below the variable control valve may be used to achieve faster step down response times. In some embodiments, the third pressure sensor may be located downstream from the variable valve and upstream from the fluid outlet. In various embodiments, upon receiving a signal to reduce the flow rate by 80%, 85%, 90% or 95% (greater than 80% or 90%) from the previous flow rate, the variable control value may be constricted thus increasing the pressure at the pressure sensor located closest to the variable control valve. Additionally, when the variable control valve is shutoff the inlet pressure may be increased and the pressure at other pressure sensors may show an increase.</p><p id="p-0037" num="0036">As described herein, by constricting the variable control valve the mass flow controller may be able to change its flow rate significantly while being able to conduct a rate of decay calculation. In some embodiments, the variable control valve may be a solenoid valve to control pressure to the flow restrictor (laminar flow element, orifice, hagen pouiselle tube) that may reduce cost of manufacturing. The variable valve that may be solenoid valve may act as a shutoff valve to perform a rate of decay operation to determine the flow rate. In various embodiments, the variable control valve may be a proportional control valve that is a solenoid to control the pressure to the flow restrictor and located upstream of the flow restrictor. The solenoid type proportional control valve may be used to close the inlet supply to perform a rate of decay operation.</p><p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. <b>1</b>A</figref> is a schematic of a pressure-based flow controller. A representative example of a pressure-based flow controller <b>100</b> (<figref idref="DRAWINGS">FIG. <b>1</b>A</figref>) includes fluid inlet <b>102</b>, a fluid conduit <b>104</b> (e.g., a bore in a larger body of material or the like), a pressure sensor <b>106</b>, a temperature sensor <b>108</b>, a flower restrictor <b>110</b>, a control module <b>112</b>, a flow signal (e.g., set point or flow rate indicator), a fluid outlet <b>116</b>.</p><p id="p-0039" num="0038">The fluid conduit <b>104</b> may be fluidly coupled to the pressure sensor <b>106</b> and temperature sensor <b>108</b> upstream of a known flow restrictor <b>110</b>. The pressure sensor <b>106</b> and temperature sensor <b>108</b> may be individual elements or function as a combined single unit element. The control module <b>112</b> may receive signal from and send signals to the temperature and pressure sensors (<b>106</b> and <b>108</b>). The control module <b>112</b> may control the flow restrictor <b>110</b> to achieve desired flow rate by adjusting the pressure and/or temperature to achieve a flow rate. The control module <b>112</b> may determine corresponding pressure and temperature conditions for a fluid moving through the conduit <b>104</b> whereby the mass flow rate may be calculated based upon characteristics of the known flow restriction provided by the flow restrictor <b>110</b>. The known flow restrictor <b>110</b> may be an orifice, nozzle, porous sintered metal element, or even a laminar flow structure such as a plurality of long narrow flow passageways. Knowledge of the pressure-temperature-flow characteristics of the flow restriction is often obtained by measurements made during a flow calibration process but other methods, such as direct measurement of mechanical dimensions, may also be feasible in some designs.</p><p id="p-0040" num="0039">The control module <b>112</b> may include circuitry to control the various elements shown in <figref idref="DRAWINGS">FIG. <b>1</b>A</figref>. The control module <b>112</b> may generate a flow rate signal <b>114</b> and provide excitation, sense, measure and calculate based on the received signals. In some embodiments, the control module <b>112</b> may receive a pressure measurement from the pressure sensor <b>106</b> and receive a temperature from the temperature sensor <b>108</b>. The control module <b>112</b> may adjust the flow restrictor <b>110</b> based on the desired set point received from an external system. The control module <b>112</b> may be configured to use the measured pressure to determine the actual flow rate based on historical calibration information for the system <b>100</b>. The pressure sensor <b>106</b> may generate a pressure P<b>1</b> and generate a signal that represents a pressure to the control module <b>112</b> that controls the flow restrictor <b>110</b>. The temperature sensor <b>108</b> may generate a temperature T<b>1</b> and generate a signal to the control module <b>112</b> that represents a temperature T<b>1</b> to the control module <b>150</b>. Next the gas/fluid may pass through a flow restrictor <b>110</b> to the outlet <b>116</b>.</p><p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. <b>1</b>B</figref> is a schematic of a thermal-based flow controller <b>150</b>. A representative example of a thermal-based flow sensor (<figref idref="DRAWINGS">FIG. <b>1</b>B</figref>) includes a fluid inlet valve <b>152</b>, a fluid conduit <b>154</b> (typically a capillary tube) with two spaced apart temperature responsive elements <b>156</b> and <b>158</b> (herein illustrated as resistance windings) affixed to the exterior of the fluid conduit. Electronic circuitry in the control module <b>154</b> provides excitation to the temperature responsive elements and senses chosen properties of the elements whereby heat transfer caused by a fluid moving through the conduit <b>154</b> may be measured and a corresponding mass flow calculated. A typical mass flow meter may additionally include a known laminar flow element (not shown) fluidly coupled in parallel with the thermal-based flow sensor whereby a proportionate fluid flow passes through the laminar flow element. The control module <b>164</b> may generate a flow signal <b>162</b> that is indicative of the flow rate of the fluid through the fluid conduit <b>154</b>.</p><p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. <b>2</b>A</figref> is a schematic of a mass flow controller <b>200</b> that includes a fluid inlet <b>202</b> at pressure P<b>0</b>, a fluid conduit <b>204</b>, a proportional valve <b>206</b>, a flow measurement module <b>208</b>, a flow control <b>210</b>, a fluid outlet <b>212</b>, and a flow set point <b>214</b>. The proportional valve <b>206</b> may be located upstream of a flow measurement module <b>208</b>. A representative mass flow controller <b>200</b> (MFC) may include a flow measurement module <b>208</b> and a proportional valve <b>206</b> upstream (<figref idref="DRAWINGS">FIG. <b>2</b>A</figref>) of the flow measurement module <b>208</b>, the upstream valve being actively modulated by a flow control module <b>210</b> (typically electronic circuitry) to adjust the fluid flow to match a desired flow set point.</p><p id="p-0043" num="0042">Referring to <figref idref="DRAWINGS">FIG. <b>2</b>B</figref>, <figref idref="DRAWINGS">FIG. <b>2</b>B</figref> illustrates a mass flow controller <b>220</b> that includes a fluid inlet <b>222</b>, a fluid conduit <b>224</b>, a flow measurement module <b>226</b>, a proportional valve <b>228</b>, a valve command <b>230</b>, a flow controller <b>232</b> and a flow set point <b>234</b>. The flow measurement module <b>226</b> may include a pressure sensor, a temperature sensor. The mass flow controller <b>220</b> may include a proportional valve <b>228</b> downstream (<figref idref="DRAWINGS">FIG. <b>2</b>B</figref>) of the flow measurement module <b>210</b>, the downstream valve <b>228</b> being actively modulated by a flow control module <b>232</b> (typically electronic circuitry) to adjust the fluid flow to match a desired flow set point <b>234</b>. The mass flow controller <b>220</b> arrangement with an upstream proportional valve <b>228</b> (<figref idref="DRAWINGS">FIG. <b>2</b>A</figref>) advantageously provides the flow measurement portion some isolation from deleterious effects of pressure transients at the fluid inlet <b>222</b>. In case of a thermal-based flow sensor (<figref idref="DRAWINGS">FIG. <b>1</b>B</figref>), the upstream proportional valve MFC arrangement (<figref idref="DRAWINGS">FIG. <b>2</b>A</figref>) may directly subject the flow sensor to very low fluid outlet pressures which may adversely change to nonlinear heat transfer caused by fluid moving through the conduit. The MFC arrangement with a downstream proportional valve <b>228</b> (<figref idref="DRAWINGS">FIG. <b>2</b>B</figref>) advantageously provides the flow measurement portion <b>226</b> some isolation from deleterious effects of low pressure and/or pressure transients at the fluid outlet <b>228</b>. However, such arrangement directly exposes the flow measurement portion <b>226</b> to the deleterious effects of pressure transients at the fluid inlet <b>222</b>. In case of a pressure-based flow sensor (e.g. <figref idref="DRAWINGS">FIG. <b>1</b>A</figref>), the downstream proportional valve arrangement (<figref idref="DRAWINGS">FIG. <b>2</b>B</figref>) possibly makes the pressure drop across the flow restriction sub-critical. The pressure at the downstream side of the flow measurement portion <b>248</b> may be monitored (<figref idref="DRAWINGS">FIG. <b>2</b>C</figref>) to determine whether a thermal-based flow measurement portion is operating in nonlinear conditions or whether a pressure-based flow measurement portion is operating in sub-critical conditions.</p><p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. <b>2</b>C</figref> is a schematic of a mass flow controller <b>240</b> that is capable of pressure monitoring downstream of a flow measurement portion. The mass flow controller <b>240</b> includes a fluid inlet <b>242</b>, a fluid conduit <b>244</b>, a proportional valve <b>246</b>, a flow measurement <b>248</b>, a pressure sensor <b>250</b>, a flow control module <b>252</b>, a valve command <b>254</b>, a flow set point <b>256</b> and a fluid outlet <b>258</b>. The pressure at the downstream side of the flow measurement portion <b>248</b> may be monitored (<figref idref="DRAWINGS">FIG. <b>2</b>C</figref>) to determine whether a thermal-based flow measurement portion is operating in nonlinear conditions or whether a pressure-based flow measurement portion <b>248</b> is operating in sub-critical conditions. The flow control module <b>252</b> may be configured to receive a flow set point <b>256</b> and send commands to the proportional valve <b>246</b>. Pressure sensor <b>250</b> generates a pressure signal <b>251</b> as an input to flow control <b>252</b>. The flow control <b>252</b> receives the pressure signal <b>251</b> and determines the flow rate and may adjust the proportional valve <b>246</b>.</p><p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a schematic of a mass flow controller <b>300</b> that includes a fluid inlet <b>302</b>, fluid conduit <b>304</b>, a proportional valve <b>306</b>, a flow measurement module <b>308</b>, a pressure sensor <b>310</b>, a variable valve <b>313</b>, a range decision module <b>314</b>, a flow control <b>316</b>, a flow set point <b>320</b> and a fluid outlet <b>322</b>. Mass flow controller <b>300</b> includes a pressure sensor <b>310</b> downstream of a flow measurement module <b>314</b> and a dynamically adjustable variable valve <b>312</b> further downstream of the pressure sensor <b>310</b>. An embodiment of the mass flow control controller <b>300</b> (<figref idref="DRAWINGS">FIG. <b>3</b></figref>) includes a proportional valve <b>306</b> upstream of a flow measurement module <b>308</b>, a pressure sensor <b>310</b> fluidly connected to determine a fluid pressure downstream of the flow measurement module <b>308</b>, and a dynamically adjustable variable valve <b>312</b> downstream of both the flow measurement module <b>308</b> and the pressure sensor <b>310</b>. The downstream pressure sensor <b>310</b> and variable valve <b>312</b> may be used with either a pressure-based or a thermal-based flow sensor. The variable valve <b>312</b> may be controllably adjusted (set) to any of at least two different amounts of opening (fluid conductance).</p><p id="p-0046" num="0045">The variable valve <b>312</b> may additionally provide a complete shut-off in a third adjustment condition (setting) although this capability is optional. The variable valve <b>312</b> may be of a type with a continuously adjustable range of openings. The pressure sensor <b>310</b> may be of any convenient type and may optionally further include fluid temperature measuring provisions such as a temperature sensor.</p><p id="p-0047" num="0046">An adjustment decision may be made, and opening of the variable valve <b>312</b> consequently adjusted, in response to a magnitude of the determined fluid pressure downstream of the flow measurement module <b>308</b> relative to a chosen threshold. The chosen threshold may be selected to ensure the flow measurement module <b>308</b> is subjected to at least a minimum (one half atmosphere, for example) determined downstream fluid pressure. Alternatively, in some embodiments, the chosen threshold may be selected to ensure the flow measurement portion is operating in a desired linear regime. The opening of the variable valve <b>310</b> may be held relatively constant, and specifically changed according to known limitations of the flow measurement module <b>308</b>, with intentional hysteresis caused by selecting a new chosen threshold contemporaneous with each specific change of opening. Yet another control scheme may dynamically modulate the adjustment of the variable valve <b>312</b> to maintain a relatively constant determined fluid pressure downstream of the flow measurement module <b>308</b>. In yet another embodiment, the flow controller <b>316</b> may use a control scheme to select the chosen threshold based at least in part upon the pressure drop across the flow measurement module <b>308</b>. In another embodiment, the flow controller <b>316</b> may use a control method to select the chosen threshold based at least in part on the change of pressure across the flow measurement module <b>308</b>. The proportional valve <b>306</b> and the variable valve <b>312</b> control the flow of the fluid through the mass flow controller <b>300</b>. The variable valve <b>312</b> may be used to help the mass flow controller <b>300</b> have a faster step-down response when reducing the flow by more than 50%. In other embodiments, the variable valve <b>312</b> may be used to help the mass flow controller <b>300</b> have a faster step up response when increasing the flow of the fluid by more than 50%.</p><p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a schematic of a mass flow controller <b>400</b> that includes a flow verification capability while using a pressure-based flow sensor. The mass flow controller <b>400</b> may comprise (in upstream to downstream flow sequence) a fluid inlet <b>402</b>, to a fluid pathway <b>404</b>, a controllable shutoff valve <b>406</b>, provisions for measuring a reference temperature <b>412</b> (T<b>0</b>) and a reference pressure <b>410</b> (P<b>0</b>) of a fluid contained within a reference volume <b>408</b> of the fluid conduit <b>404</b>, a proportional control valve <b>414</b>, provisions for measuring a first temperature <b>418</b> (T<b>1</b>) and a first pressure <b>416</b> (P<b>1</b>) of the fluid contained within the fluid pathway upstream of a flow restriction <b>420</b>, provisions for measuring a second pressure <b>422</b> (P<b>2</b>) of the fluid contained within the fluid pathway downstream of the flow restriction <b>420</b>, a variable valve <b>424</b>, and an outlet <b>426</b> from the fluid pathway <b>404</b>. Knowing the aggregate volume of fluid contained within the reference volume <b>408</b>, plus any directly connected fluid conduit <b>404</b> between the shutoff valve <b>406</b> and the proportional valve <b>414</b>, enables flow verification (self-calibration) of the embodiment mass flow controller <b>400</b>. Flow verification method includes closing the shutoff valve <b>406</b> to isolate the fluid conduit <b>404</b> from the inlet <b>402</b> while controlled mass flow continues through the outlet, making repeated measurements of the reference temperature <b>410</b> (T<b>0</b>) and the reference pressure <b>412</b> (P<b>0</b>) of the fluid contained within the reference volume <b>408</b> of the fluid conduit <b>404</b> for a period of time, opening the shutoff valve <b>406</b> to re-establish fluid pathway connection to the fluid inlet <b>402</b>, calculating a verified flow signal using pressure-volume-temperature (PVT, also known as Rate Of Fall, RoF) methods related to the aggregate volume of fluid, and providing the verified flow signal to a supervision function (control module <b>428</b>). The control module <b>428</b> may subsequently choose whether to enable additional self-calibration processes, change a system parameter, merely store the results, or take other actions. For example, the control module <b>428</b> may direct that a series of flow verification measurements be performed corresponding to different values of determined fluid pressures (P<b>1</b>, P<b>2</b>) and fluid temperature (T<b>1</b>) adjacent the flow restriction <b>420</b>. This series of flow verification measurements readily determines a calibration curve, for a discrete flow restriction, based at least in part upon the verified flow signals. It should be noted the control module <b>428</b> does not require any particular critical ratio (P<b>1</b>/P<b>2</b>) be maintained between the determined upstream (P<b>1</b>) and downstream (P<b>2</b>) pressures when a known calibration curve is obtained. The known calibration curve may be entirely empirical or conform to a theoretical model.</p><p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a schematic of a mass flow controller <b>500</b> that includes a dynamically variable valve downstream of a flow measurement module <b>508</b> and a pressure sensing element <b>512</b> further downstream of the variable valve <b>510</b>. Another embodiment of a mass flow controller <b>500</b> (<figref idref="DRAWINGS">FIG. <b>5</b></figref>) includes a proportional valve <b>506</b> upstream of a flow measurement portion <b>508</b>, a dynamically adjustable variable valve <b>510</b> downstream of the flow measurement portion, and a pressure sensing element fluidly connected to determine a fluid pressure downstream of the flow measurement portion and the adjustable variable valve. The downstream pressure sensing element <b>512</b> and variable valve <b>510</b> combination may be used with either a pressure-based or a thermal-based flow sensor. The variable valve <b>510</b> may be controllably adjusted (set) to any of at least two different amounts of opening (fluid conductance). The variable valve <b>510</b> may additionally provide complete shut-off in a third adjustment condition (setting) although this capability is optional. The variable valve <b>510</b> may be of a type with a continuously adjustable range of openings. The pressure sensing element <b>512</b> may be of any convenient type and may optionally further include fluid temperature measuring provisions. An adjustment decision may be made by the range decision <b>516</b>, and opening of the variable valve <b>510</b> consequently adjusted, in response to operating conditions of the apparatus as further explained below.</p><p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a schematic of a mass flow controller <b>600</b> that includes a flow verification capability while using a pressure-based flow sensor. In various embodiments, of a mass flow controller <b>600</b> may additionally include a flow verification capability (<figref idref="DRAWINGS">FIG. <b>6</b></figref>). The mass flow controller <b>600</b> includes (in upstream to downstream flow sequence) an inlet <b>602</b>, a fluid pathway <b>604</b>, a controllable shutoff valve <b>606</b>, provisions for measuring a reference temperature <b>612</b> (T<b>0</b>) and a reference pressure <b>610</b> (P<b>0</b>) of a fluid contained within a reference volume portion <b>608</b> of the fluid pathway <b>604</b>, a proportional control valve <b>814</b>, provisions for measuring a first temperature <b>618</b> (T<b>1</b>) and a first pressure <b>616</b> (P<b>1</b>) of the fluid contained within the fluid pathway upstream of a flow restriction <b>620</b>, the flow restriction <b>620</b>, a variable valve <b>622</b>, provisions for measuring a second pressure (second pressure sensor <b>624</b>) (P<b>2</b>). In various embodiments the second pressure sensor <b>624</b> may measure the fluid contained within the fluid pathway <b>604</b> downstream of the flow restriction <b>620</b> and the variable valve <b>622</b>, and an outlet from the fluid pathway <b>604</b>. Knowing the aggregate volume of fluid contained within the reference volume <b>608</b>, plus any directly connected fluid pathway portions between the shutoff valve <b>606</b> and the proportional valve <b>614</b>, enables flow verification (self-calibration) of another embodiment of the mass flow control apparatus. Flow verification involves closing the shutoff valve <b>606</b> to isolate the fluid pathway <b>604</b> from the inlet <b>602</b> while controlled mass flow continues through the outlet <b>626</b>, making repeated measurements of the reference temperature <b>612</b> (T<b>0</b>) and the reference pressure <b>610</b> (P<b>0</b>) of the fluid contained within the reference volume <b>608</b> of the fluid pathway <b>604</b> for a period of time, opening the shutoff valve <b>606</b> to re-establish fluid pathway connection to the inlet <b>602</b>, calculating a verified flow signal using pressure-volume-temperature (PVT, also known as Rate Of Fall, RoF) methods related to the aggregate volume of fluid, and providing the verified flow signal to a control module <b>605</b>. The control module <b>605</b> may subsequently choose whether to enable additional self-calibration processes, change a system parameter, merely store the results, or take other actions. For example, the control module <b>605</b> may direct that a specific valve command be presented to the variable valve <b>622</b> and a series of flow verification measurements performed corresponding to different values of determined fluid pressures (P<b>1</b>, P<b>2</b>) and fluid temperature (T<b>1</b>) adjacent the flow restriction <b>620</b> and variable valve <b>622</b>. This series of flow verification measurements readily determines a calibration curve, for a composite flow restriction comprising the original discrete flow restriction plus the partially open variable valve <b>622</b>, based at least in part upon the verified flow signals.</p><p id="p-0051" num="0050">In various embodiments, the control module <b>605</b> may relate to making an adjustment decision using a range decision <b>634</b>, and adjusting an opening of the variable valve <b>622</b> downstream of the flow measurement portion (reference volume <b>608</b>), in response to a magnitude of one or more determined fluid pressures relative to a chosen threshold. In particular, if the flowing fluid pressure drop across the flow restriction <b>620</b> and variable valve <b>622</b> (P<b>1</b>-P<b>2</b>) is less than a chosen threshold, then a revised valve command may be presented to the variable valve <b>622</b> causing the variable valve <b>622</b> to assume a less open more flow restricting condition. A flow verification measurement may then provide a verified flow signal for comparison with calculated mass flow (using P<b>1</b>, T<b>1</b>, P<b>2</b>) through the composite flow restriction (which is comprised of the discrete flow restriction <b>620</b> and the variable valve <b>622</b>) obtained by using a previously obtained calibration curve associated with the particular composite flow restriction <b>620</b>. If the verified flow signal and calculated mass flow are suitably close to identical (for example, 0.5%), then the variable valve may be considered as having returned to a known condition and the supervision function may affirm use of the previously obtained calibration curve with the particular composite flow restriction. It should be noted the control module does not require any particular critical ratio (P<b>1</b>/P<b>2</b>) be maintained between the determined upstream first (P<b>1</b>) and downstream second (P<b>2</b>) pressures when a known calibration curve has been obtained. The known calibration curve may be entirely empirical or conform to a theoretical model.</p><p id="p-0052" num="0051">In low flow and low set point applications additional advantages may be obtained from a variable valve <b>622</b> that is additionally able to provide complete shut-off in a third adjustment condition (setting). In any of the previously described embodiments a lower auto-shutoff threshold (for example, 0.25% of full-scale) may be provided to the flow control portion of a mass flow controller such that a set point request less than the auto-shutoff threshold causes the flow control portion to immediately command the proportional valve to its most flow restricting condition without need to obtain a calculated mass flow. Similarly, a variable valve capable of shutoff may be simultaneously commanded to close completely and thereby bring fluid flow to a very rapid halt. In the situation of embodiments (<figref idref="DRAWINGS">FIG. <b>3</b></figref> &#x26; <figref idref="DRAWINGS">FIG. <b>4</b></figref>) wherein the downstream second pressure (P<b>2</b>) is determined immediately adjacent to the discrete flow restriction, and upstream of the variable valve (described above), then a variable valve having a continuously adjustable range of openings may be advantageously used to control the pressure drop (P<b>1</b>-P<b>2</b>) across the flow restriction while the proportional valve is commanded into its most flow restricting or other convenient condition.</p><p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is an illustration showing portions of a complex fluid delivery system within a single large apparatus for processing semiconductor devices. Illustrated in <figref idref="DRAWINGS">FIG. <b>7</b></figref> is an abbreviated schematic illustrating portions of a complex fluid delivery system within a single large apparatus for processing semiconductor devices. A plurality of new embodiment mass flow controllers (of the type illustrated in <figref idref="DRAWINGS">FIG. <b>5</b></figref> &#x26; <figref idref="DRAWINGS">FIG. <b>6</b></figref>) may be used with a plurality of process gas species to feed reactants into a plurality of vacuum chambers. Such an apparatus is often referred to as a &#x201c;tool.&#x201d; As shown in the abbreviated schematic, a group (&#x201c;pallet&#x201d;) of mass flow controllers (MFC.K, MFC.L) enable the simultaneous combination of several different process gases (GAS.A, GAS.B) into a single manifold (MANIFOLD.X) which feeds a gas distribution structure (&#x201c;showerhead&#x201d;&#x2212;1) inside a vacuum chamber (CHAMBER.X). Insufficient conductance in some manifold plumbing (FEED.X) may result in the downstream pressure (Px<b>2</b>), of a particular group of mass flow controllers, becoming too high to maintain choked flow conditions within one or more mass flow controllers within the group. In an alternative scenario, the downstream pressure (Px<b>2</b>) within the manifold (MANIFOLD.X) may be so low the requisite operating conditions internal to a specific new embodiment mass flow controller (e.g. MFC.K) cannot be maintained as desired and the corresponding variable valve within the MFC adjusted as previously discussed. The pressure within the manifold may be monitored (Px<b>2</b>) and a corresponding signal provided to all mass flow controllers within the group (MFC.K, MFC.Q) as an alternative to each mass flow controller having a separate third pressure sensor. Individual mass flow controller adjustment decisions may then proceed based upon the shared third pressure sensor signal. Each individual new embodiment mass flow controller may contain a dedicated supervision function which determines a course of action or a supervision function may be associated with and shared among all new embodiment mass flow controllers comprising a specific pallet group of MFCs.</p><p id="p-0054" num="0053">A mass flow control apparatus comprising: a proportional valve upstream of a flow measurement portion, a pressure sensing element fluidly connected to determine a fluid pressure downstream of the flow measurement portion and a dynamically adjustable variable valve downstream of both the flow measurement portion and the pressure sensing element connection. Further the mass flow control apparatus comprising of a pressure-based flow sensor including a fluid conduit with fluidly coupled pressure and temperature sensing provisions upstream of a known flow restriction. Alternatively, the mass flow control apparatus includes a thermal-based flow sensor, which has fluid conduit with two spaced apart temperature responsive elements affixed to the exterior of the fluid conduit. Further the dynamically adjustable variable valve can be adjusted to any of at least two different amounts of openings, or continuously adjusted to a range of openings or adjusted to a provide a complete shut-off position.</p><p id="p-0055" num="0054">A mass flow control apparatus includes, an inlet to a fluid pathway; a controllable shutoff valve, the controllable shutoff valve providing provisions for measuring a reference temperature (T<b>0</b>) and a reference pressure (P<b>0</b>) of a fluid contained within a reference volume of the fluid pathway; a proportional control valve, the proportional control valve providing provisions for measuring a first temperature (T<b>1</b>) and a first pressure (P<b>1</b>) of the fluid contained within the fluid pathway upstream of a flow restriction; the flow restriction providing provision for measuring a second pressure (P<b>2</b>) of the fluid contained within the fluid pathway downstream of the flow restriction; a variable valve; and an outlet from the fluid pathway. The flow restriction is chosen from group comprising of an orifice, a nozzle, a porous sintered metal element or a laminar flow structures. Further the mass flow control apparatus includes a supervision function. The supervision function may choose an action from group comprising of self-calibration process, change of system parameter or storage of results.</p><p id="p-0056" num="0055">A mass flow control apparatus including a mass flow controller further which includes a proportional valve upstream of a flow measurement portion; a dynamically adjustable variable valve downstream of the flow measurement portion; a pressure sensing element fluidly connected to determine a fluid pressure downstream of the flow measurement portion and downstream of the variable valve. The mass flow control apparatus including the plurality of mass flow controllers; a plurality of gas species to feed reactants into a plurality of vacuum chambers.</p><p id="p-0057" num="0056">A mass flow control apparatus including an inlet to a fluid pathway; a controllable shutoff valve, the controllable shutoff valve providing provisions for measuring a reference temperature (T<b>0</b>) and a reference pressure (P<b>0</b>) of a fluid contained within a reference volume of the fluid pathway; a proportional control valve, the proportional control valve providing provisions for measuring a first temperature (T<b>1</b>) and a first pressure (P<b>1</b>) of the fluid contained within the fluid pathway upstream of a flow restriction; the flow restriction, a variable valve providing provision for measuring a second pressure (P<b>2</b>) of the fluid contained within the fluid pathway downstream of the flow restriction and downstream of the variable valve; and an outlet from the fluid pathway.</p><p id="p-0058" num="0057">A method for a mass flow control apparatus including determining a fluid pressure downstream of a flow sensor; responding to the fluid pressure downstream; and adjusting dynamically a variable valve downstream of the flow sensor to maintain desired operating conditions in the flow sensor; and maintaining and extending the useful operating range of the mass flow control apparatus. The method further includes a flow verification capability. The method further wherein the flow verification capability comprises the steps of: closing a shutoff valve to isolate a fluid pathway from an inlet while controlled mass flow continues through an outlet; making repeated measurements of a reference volume of a fluid pathway for a period of time; opening the shutoff valve to re-establish fluid pathway connection to the inlet; calculating a verified flow signal using pressure-volume-temperature methods; and providing a verified flow signal to a supervision function. Wherein the supervision function directs that a series of flow verification measurements be performed corresponding to different values of determined fluid pressures and fluid temperatures adjacent the flow restriction. Wherein the supervision function determines a calibration curve for a discrete flow restriction based on the flow signals generated by the flow verification measurements.</p><p id="p-0059" num="0058">Referring to <figref idref="DRAWINGS">FIG. <b>7</b></figref>, <figref idref="DRAWINGS">FIG. <b>7</b></figref> shows an apparatus <b>700</b> having a plurality of self-correcting mass flow controllers may be used with a plurality of gas species fed to a plurality of vacuum chambers <b>726</b>, <b>748</b>, and <b>764</b> for processing semiconductor devices within a single large apparatus often referred to as a &#x201c;tool.&#x201d; A group (&#x201c;pallet&#x201d;) of mass flow controllers (<b>720</b>, <b>732</b>, <b>742</b>, <b>754</b>, <b>758</b>, and <b>776</b>) allow the simultaneous combination of several different gases into a single manifold (<b>742</b>, <b>744</b>, and <b>760</b>) which feeds a gas distribution structure (&#x201c;showerhead&#x201d;) inside a vacuum chamber (<b>726</b>, <b>748</b> and <b>764</b>). Insufficient conductance in the manifold plumbing may result in the downstream pressure, of a particular group of mass flow controllers, becoming too high to maintain choked flow conditions within one or more mass flow controllers within the group. The pressure within the manifold may be monitored using pressure sensor <b>724</b>, pressure sensor <b>746</b> and pressure sensor <b>762</b> and a corresponding signal provided to all mass flow controllers within the group as an alternative to each mass flow controller having a separate third pressure sensor. Individual mass flow controller self-correction may then proceed based upon the shared third pressure sensor signal or according to commands emanating from the tool master control (a control system external to the control module of each mass flow controller).</p><p id="p-0060" num="0059"><figref idref="DRAWINGS">FIG. <b>7</b></figref> illustrates an apparatus <b>700</b> that includes various system including, a gas provider <b>702</b> and a gas provider <b>704</b>. The apparatus <b>700</b> has a plurality of valves, <b>706</b>, <b>708</b>, <b>710</b>, <b>712</b>, <b>718</b>, <b>730</b>, <b>740</b>, <b>752</b>, <b>756</b>, and <b>774</b>. The apparatus <b>700</b> includes one or more pressure sensors to determine the flow rate of the gases. The pressure sensors <b>714</b>, <b>716</b>, <b>724</b>, <b>746</b>, <b>762</b>, <b>770</b>, and <b>772</b> may be used to determine the pressure outside of the MFCs <b>720</b>, <b>732</b>, <b>742</b>, <b>754</b>, <b>758</b>, and <b>776</b>.</p><p id="p-0061" num="0060">Having thus described several aspects of at least one embodiment of this invention, it is to be appreciated various alterations, modifications, and improvements will readily occur to those skilled in the art. Such alterations, modifications, and improvements are intended to be part of this disclosure and are intended to be within the scope of the invention. Accordingly, the foregoing description and drawings are by way of example only.</p><p id="p-0062" num="0061">The disclosed subject matter describes a system and method for calibrating a mass flow controller that modulates the flow rate for a gas. The mass flow controller receives a calibrated volume input such that the internal calibration system of the mass flow controller aligns with the external metrology or external measurement system that is used as a reference for flow measurement. The mass flow controller may perform a rate of decay measurement on the calibrated volume of the gas to perform a volume measurement. The rate of decay measurement for the calibrated volume may be used to make an adjustment to the volume measurement to match the calibrated volume input. The mass flow controller may make the same adjustment on subsequent volume measurements for the same type of gas.</p><p id="p-0063" num="0062">The mass flow controller may receive an input for actual flow performance at various different configuration points on the flow spectrum of the mass flow controller. The flow spectrum may flow from as low as 0.25% to full scale at 100%. The mass flow controller may perform a rate of decay measurement to measure actual flow rate going out of the mass flow controller at the various different configuration points. The actual flow performance input may be used to make an adjustment to the rate of decay measurement to match the metrology or measurement system for each configuration point. The actual flow performance input could also be used to re-calculate the device's internal calibration curve or table or the method of calculating the control parameter used to control flow delivery for a received setpoint to the mass flow controller. The mass flow controller may make the same adjustment on subsequent measurements for the same type of gas at each configuration point.</p><p id="p-0064" num="0063">The mass flow controller may auto tune in situ by receiving input from the user on thresholds for response overshoot and overshoot flow requirements and adjusting its internal valve characterization, for example, changing its P, I, D values in a PID control mechanism while on the tool to meet the required input specification.</p><p id="p-0065" num="0064">The in situ rate of decay measurement may be used to detect deviations of accuracy from a desired flow rate. The mass flow controller may alert a user to the deviations by setting off an alarm. The user may configure alarm thresholds over any communication protocol such as DeviceNet, EtherCat, EtherNet, RS485, RS232, Profibus or various other digital communication methods. either through a wired communication platform or wireless methods.</p><p id="p-0066" num="0065">The user may communicate with the mass flow controller over a wireless communication protocol such as Bluetooth. The wireless communication allows for ease of configuration in the field and enables monitoring of signals from the flow controller such as flow, pressure, temperature, rate of decay flow rate, auto correction flow amount, gas, full scale and other such critical parameters key to the successful operation of the device.</p><p id="p-0067" num="0066">The mass flow controller makes use of an elastomer, corrosion resistant material such as PCTFE, PTFE, TEFLON, and NYLON between the valve seat and the valve body components. The elastomer allows for better valve shut off performance. The mass flow controller may have various shut off valve types including, but not limited to solenoid, piezo electric, and stepper motor. The elastomer seat and other elastomer components may improve the &#x201c;valve leak-by&#x201d; performance of the mass flow controller. The &#x201c;valve leak-by&#x201d; is the measure of gas that leaks through the valve when the valve is shut.</p><p id="p-0068" num="0067">The mass flow controller may measure &#x201c;valve leak-by&#x201d; by using the rate of decay measurement. A command may be sent to the mass flow controller to measure the &#x201c;valve leak-by&#x201d; by performing a rate of decay measurement.</p><p id="p-0069" num="0068">Referring to <figref idref="DRAWINGS">FIG. <b>8</b></figref>, <figref idref="DRAWINGS">FIG. <b>8</b></figref> is a schematic <b>800</b> of a mass flow controller <b>802</b> illustrating the components that may be used in an embodiment of the disclosed subject matter. The mass flow controller <b>802</b> adjusts the flow rate of a fluid that is flowing through a main fluid flow path <b>804</b> in the mass flow controller <b>802</b>. The fluid flowing through the mass flow controller <b>802</b> may be a gas or liquid. Fluid may be directed into the main fluid flow path <b>804</b> of the mass flow controller <b>802</b> through an inlet <b>806</b>. The mass flow controller <b>802</b> may have one or more inlets <b>806</b>. The fluid in the main fluid flow path <b>804</b> may be directed out of the mass flow controller through one or more outlets <b>808</b>. The mass flow controller <b>802</b> includes a control module <b>810</b>, a shut off valve <b>822</b>, a proportional valve <b>823</b>, one or more sensors <b>824</b>, and a flow restrictor <b>826</b>.</p><p id="p-0070" num="0069">The control module <b>810</b> processes information that is received and transmitted by the mass flow controller <b>802</b>. The control module <b>810</b> may send signals to the shut off valve <b>822</b> and proportional valve <b>823</b> to control the flow rate of fluid through the mass flow controller <b>802</b>. The control module <b>810</b> receives data from the one or more sensors <b>824</b> to determine the flow rate of fluid through the main fluid flow path <b>804</b>. The control module <b>810</b> may receive a setpoint flow rate and store it in memory. The control module <b>810</b> may determine the difference between the setpoint flow rate and the flow rate that was determined from the data from the one or more sensors <b>824</b>. Based on the difference in flow rates, the control module <b>810</b> may send signals to the proportional valve <b>823</b> to minimize the difference between the setpoint flow rate and the flow rate determined from the data from the one or more sensors <b>824</b>.</p><p id="p-0071" num="0070">The control module <b>810</b> includes a control module computer <b>812</b>, a wireless antenna <b>818</b>, and a communication interface <b>820</b>. The control module computer <b>812</b> stores data, performs calculations, determines the flow rate of the fluid in the main fluid flow path <b>804</b> based on the data from the one or more sensors <b>824</b>, determines a setting for the proportional valve <b>823</b>, and determines the state of the shut off valve <b>822</b>.</p><p id="p-0072" num="0071">The control module computer <b>812</b> determines the settings of the components of the mass flow controller <b>802</b> such as the shut off valve <b>822</b> and the proportional valve <b>823</b>. In addition to determining the component settings of the mass flow controller <b>802</b>, the control module computer <b>812</b> may produce output for the state of the mass flow controller. Output may include, but is not limited to: the current flow rate, the current calibration state, the current tuning state, and an alarm state. The control module computer <b>812</b> may set off an alarm in response to data that the control module computer collects from the mass flow controller <b>802</b>. Data that the control module collects may include data from the one or more sensors <b>824</b>. The control module computer may also receive signals from the wireless antenna <b>818</b> and the communication interface <b>820</b>.</p><p id="p-0073" num="0072">The control module computer <b>812</b> may calculate the flow rate of a fluid moving through the mass flow controller <b>802</b> based on the data from the one or more sensors <b>824</b>. The flow rate calculation for a gas may be performed based on the ideal gas law. The ideal gas law allows for the calculation of the number of moles of a gas if the pressure, temperature, and volume of the gas are known. The pressure, temperature, and volume of a gas flowing through the main fluid flow path <b>804</b> may be determined in various ways based on data from the one or more sensors <b>824</b>. Different compositions of gases will give slightly different data from the one or more sensors <b>824</b>. Therefore, a calibration must be performed for each composition of gas that flows through the mass flow controller <b>802</b>. In one embodiment, a rate of decay measurement may be performed to calibrate the mass flow controller by measuring the change in flow rate when the shut-off valve <b>822</b> is closed. In the rate of decay measurement, the shut-off valve <b>822</b> is closed upstream of the one or more sensors <b>824</b>. The one or more sensors <b>824</b> measure the change in the flow rate. Because the shut-off valve <b>822</b> is closed, it may be assumed, in the rate of decay measurement, that the flow rate goes to zero. A volume may be determined from the rate of decay measurement.</p><p id="p-0074" num="0073">The control module computer <b>812</b> includes a calibration component <b>814</b> and a tuning component <b>816</b>. The calibration component <b>812</b> performs calibrations for compositions of gas. The calibrations are necessary for the control module computer <b>812</b> to determine a precise flow rate for a given composition of gas. In one embodiment, the mass flow controller <b>802</b> may receive a calibrated volume input signal, which is transmitted to the calibration component, from a customer tool. The mass flow controller <b>802</b> may receive a volume of a composition of gas that coincides with the calibrated volume input signal. To calibrate, a rate of decay measurement is performed after the volume of the composition of gas is received by the mass flow controller <b>802</b>. The control module computer <b>812</b> determines a calculated volume of the composition of gas, based on the rate of decay measurement. The calibration component <b>812</b> may create a calibration parameter to adjust the calibration of the mass flow controller <b>802</b>, such that the calculated volume of the composition of gas is equal to the calibrated volume input signal. The calibration parameter may adjust the calibration of the mass flow controller <b>802</b> differently based on the flow rate and the composition of the gas. For that reason, the calibration parameter may be created based on multiple calibrated volume input signals. For each calibrated volume input signal, a rate of decay measurement is performed and the calibration parameter is updated. The mass flow controller <b>802</b> will share a common metrology with customer equipment after calibration. The calibration component <b>814</b> also allows for the mass flow controller <b>802</b> to be calibrated in the field.</p><p id="p-0075" num="0074">The tuning component <b>816</b> determines settings for the proportional valve <b>823</b>. The mass flow controller <b>802</b> matches the rate of fluid flow through the mass flow controller <b>802</b> to a setpoint flow rate. The tuning component <b>816</b> receives response overshoot and overshoot flow requirements and sets tuning parameters. Based on the tuning parameters, the tuning component <b>816</b> sends signals to adjust the internal valve characterization. The response overshoot and overshoot flow requirements dictate how the proportional valve <b>823</b> is adjusted based on the calculated flow rate and the setpoint flow rate. Overshoot occurs when the calculated flow rate oscillates around a setpoint flow rate. Ideally, the tuning parameters minimize overshoot. The tuning parameters may vary based on the composition of fluid and the flow rate of the fluid. Therefore, the tuning component <b>816</b> may receive different response overshoot and overshoot flow requirements based on the flow rate and based on the composition of gas.</p><p id="p-0076" num="0075">In one example of tuning parameters adjusting the internal valve characterization, the tuning component <b>816</b> may change the P,I,D values in a PID control mechanism. In a PID control mechanism, P stands for proportion and increases an adjustment based on the flow rate difference, which is the difference between the calculated flow rate and the setpoint flow rate. I stands for integral and represents the accumulated flow rate difference over time. D stands for derivative and represents the change in the flow rate difference over time. The adjustment to the proportional valve <b>823</b> is proportional to the sum of the P, I, and D values. The tuning parameters may set a weight to the P, I, and D values. For example, increasing the weight of the D value may have the effect of dampening the response of the proportional valve <b>823</b> adjustment. Additionally, the time to determine the I and D values may also be set by the tuning parameters. Like the calibration parameters, the ideal tuning parameters may change based on the flow rate and the gas composition. For that reason, the tuning parameters may be set at multiple flow rates for each gas composition. And like the calibration component <b>814</b>, a customer tool may be used to set the tuning parameters of the tuning component <b>816</b>.</p><p id="p-0077" num="0076">The wireless antenna <b>818</b> receives and transmits data by wireless communication. The calibrated volume input signal may be received by the wireless antenna <b>818</b>. Likewise, the response overshoot and overshoot flow requirements may be received by the wireless antenna <b>818</b>. The properties of fluids moving through the mass flow controller <b>802</b> may be transmitted by wireless antenna <b>818</b>, allowing for ease of use in the field. Properties, such as temperature, pressure, calculated flow rate, and rate of decay measurements may all be transmitted by the wireless antenna <b>818</b>. Processes in the mass flow controller <b>802</b> may be initiated via signals received by the wireless controller <b>818</b>. For example, a rate of decay measurement may be initiated by a signal received by the wireless antenna <b>818</b>.</p><p id="p-0078" num="0077">The communication interface <b>820</b> allows for data to be transmitted to and from the mass flow controller <b>802</b> over any communication protocol. For example, the calibrated volume input signal may be transmitted to the mass flow controller by the communication interface. Examples of communication protocols that may be implemented by the communication interface <b>820</b> include, but are not limited to DeviceNet, EtherCat, EtherNet, RS485, RS232, and Profibus. A user may set various settings through the communication interface <b>820</b>. For example, the setpoint flow rate may be set by transmitting date through the communications interface <b>820</b>.</p><p id="p-0079" num="0078">In another example, an alarm threshold may be set through the communication interface <b>820</b>. The alarm threshold may be any condition that sets off an alarm when the condition is satisfied. In one embodiment, the condition for an alarm threshold may be that the absolute value of a calibration parameter is greater than a set value. The absolute value of the calibration parameter would be an indication of working order for the mass flow controller <b>802</b>. In one implementation, the mass flow controller <b>802</b> periodically calibrates itself and sets off an alarm through the communication interface <b>820</b> if the absolute value of the calibration parameter is greater than an alarm threshold. In various embodiments, an alarm threshold is set to detect a deviation of accuracy based on a rate of decay measurement. In one example, the mass flow controller <b>802</b> may be configured to automatically perform rate of decay measurements at a periodic time interval. The alarm condition may be met when the rate of decay measurement deviates from an expected result by a minimum threshold.</p><p id="p-0080" num="0079">The shut-off valve <b>822</b> is a valve that can stop the flow of fluid through the main fluid flow path <b>804</b>. The shut-off valve <b>822</b> may be various valve types including, but not limited to solenoid, piezo electric, and stepper motor. In one embodiment, the shut-off valve <b>822</b> is separate from the proportional valve <b>823</b>. In various embodiments not shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, the shut-off valve <b>822</b> also serves as the proportional valve <b>823</b> and is used to control the flow of fluid through mass flow controller <b>802</b>.</p><p id="p-0081" num="0080">The shut-off valve <b>822</b> is operated for rate of decay measurements. For a rate of decay measurement, the shut-off valve <b>822</b> begins in the open position and allows fluid to flow through the main fluid flow path <b>804</b>. When a signal is given to begin a rate of decay measurement, the shut-off valve <b>822</b> is closed and data is collected from the one or more sensors <b>824</b> to determine the change in flow rate. A volume may be determined from a rate of decay measurement. The determined volume may be adjusted through a calibration parameter to match a calibrated volume input signal. The rate of decay measurement may also be used to measure &#x201c;valve leak-by.&#x201d; &#x201c;Valve leak-by&#x201d; is a measure of the amount of fluid that leaks through the shut-off valve <b>822</b> when it is closed. The control module computer <b>812</b> may be programmed to periodically measure &#x201c;valve leak-by&#x201d; by performing a rate of decay measurement. In one embodiment, an alarm threshold may be a set value of &#x201c;valve leak-by.&#x201d; If the &#x201c;valve leak-by&#x201d; is greater than the alarm threshold, the communication interface <b>820</b> may transmit an alarm signal to a user.</p><p id="p-0082" num="0081">To minimize &#x201c;valve leak-by&#x201d; the shut-off valve <b>822</b> may have an elastomer between the seat and body components of the shut-off valve <b>822</b>. The elastomer may be composed of various materials that exhibit viscous and elastic properties. In one embodiment, the elastomer is a corrosion resistant material such as PCTFE, PTFE, TEFLON, and NYLON. The elastomer, being elastic, forms a seal within the shut-off valve <b>822</b>, thus minimizing &#x201c;valve leak-by.&#x201d; In one embodiment, the valve disc is made of an elastomer material. The valve disc, made of elastomer material, forms a seal at the valve seat when the shut-off valve <b>822</b> is closed. The elastomer material may be more efficacious at closing the shut-off valve <b>822</b> than a hard metal material because small imperfections in the elastomer material do not prevent it from forming a perfect seal. The shut-off valve <b>822</b> with the elastomer material may also operate for a long period of time because the elastomer material is corrosion resistant.</p><p id="p-0083" num="0082">The one or more sensors <b>824</b> measure the physical properties of fluid in the main fluid flow path <b>804</b>. The one or more sensors <b>824</b> may measure the pressure of the fluid, the temperature of the fluid, or both. In one embodiment, a sensor measures the flow rate by diverting the main fluid flow path <b>804</b> into a parallel laminar flow path. The flow rate through the laminar flow path may be measured without significantly changing the flow rate of the fluid in the main fluid flow path <b>804</b>. The flow rate of fluid through the parallel laminar flow path is proportional to the flow rate of the fluid through the main fluid flow path <b>804</b>. Therefore, the flow rate of the fluid through the mass flow controller <b>802</b> may be ascertained by measuring the flow rate of fluid through the laminar flow path. The calibration component <b>814</b> may be used to adjust measurements of the flow rate made by the one or more sensors <b>824</b> to match the metrology of customer tools in the field. By matching the metrology in the field, the one or more sensors <b>824</b> in the mass flow controller <b>802</b> may provide measurements that are consistent across multiple devices.</p><p id="p-0084" num="0083">The proportional valve <b>823</b> may be adjusted to control the flow rate of fluid through the mass flow controller <b>802</b>. The proportional valve <b>823</b> may be an orifice or the like that is adjustable. Opening the orifice of the proportional valve <b>823</b> may allow increased flow of fluid through the orifice and have the effect of increasing the flow rate of fluid through the mass flow controller <b>802</b>. In one embodiment, the proportional valve <b>823</b> also serves as a shut-off valve <b>822</b>. In an exemplary embodiment shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the proportional valve <b>823</b> is downstream of the shut-off valve <b>822</b>.</p><p id="p-0085" num="0084">The flow restrictor <b>826</b> is an orifice that blocks the flow of fluid through the main fluid flow path <b>804</b> to make the fluid flow choked. Under choked flow conditions, the flow rate is independent of the pressure downstream. Under unchoked conditions, the flow rate becomes unpredictable because the proportional valve <b>823</b> does not have absolute control over the flow rate.</p><p id="p-0086" num="0085">Referring to <figref idref="DRAWINGS">FIG. <b>9</b></figref>, <figref idref="DRAWINGS">FIG. <b>9</b></figref> is a schematic <b>900</b> of a mass flow controller <b>902</b> illustrating the components that may be used in an embodiment of the disclosed subject matter. The mass flow controller <b>902</b> has a sensor on either side of the flow restrictor <b>824</b>. An upstream sensor <b>904</b> is upstream of the flow restrictor <b>824</b> in the main fluid flow path <b>804</b>. A downstream sensor <b>906</b> is downstream of the flow restrictor <b>824</b> in the main fluid flow path. The upstream sensor <b>904</b> may measure any property of the fluid including, but not limited to pressure, temperature, or both pressure and temperature.</p><p id="p-0087" num="0086">A ratio of pressure or temperature, measured at the upstream sensor <b>904</b>, to the pressure or temperature, measured by the downstream sensor <b>906</b>, may be calculated by the control module computer <b>812</b>. The ratio, at which flow though the flow restrictor transitions between choked flow and unchoked flow, is the critical ratio. The mass flow controller <b>902</b> may not be able to precisely maintain a flow rate under unchoked flow conditions. Likewise, the calculated flow rate may not be accurate under unchoked flow conditions. The critical ratio may be programmed into the control module computer <b>812</b> through the communication interface <b>820</b>. The critical ratio is different based on the composition of fluid that is passing through the mass flow controller <b>902</b>, so a different critical ratio may be programmed into the control module computer <b>812</b> for each composition of gas.</p><p id="p-0088" num="0087">Because the calculated flow rate may be inaccurate in unchoked conditions, the critical ratio may be determined by finding the ratio at which the calculated flow rate is inaccurate. A rate of decay measurement may be implemented at various flow rates to determine the critical ratio and the accuracy of the calculated flow rate. The mass flow controller may also receive a calibrated input signal and perform a rate of decay measurement, just like it does to calibrate, to determine the accuracy of the calculated flow rate at various ratios. Once the critical ratio is determined for a composition of gas, the critical ratio may be saved into the memory of the control module computer <b>812</b> for that composition of gas.</p><p id="p-0089" num="0088">The control module computer <b>812</b> may be configured to set off an alarm when the critical ratio is passed. The alarm threshold may be configured by the user over various communication protocols such as DeviceNet, EtherCat, EtherNet, RS485, RS232, Profibus, or any digital communication method. In one embodiment, the alarm threshold is set automatically by the control module computer <b>812</b>. Rate of decay measurements are performed at various flow rates to determine the flow rate at which the calculated flow rate is inaccurate. The control module computer <b>812</b> records the ratio at which the calculated flow rate becomes inaccurate and automatically configures an alarm. The alarm activates when the currently measured ratio of a property of the upstream sensor to a property of the downstream sensor passes the critical ratio.</p><p id="p-0090" num="0089">Referring to <figref idref="DRAWINGS">FIG. <b>10</b></figref>, <figref idref="DRAWINGS">FIG. <b>10</b></figref> is a schematic <b>1000</b> of a mass flow controller <b>802</b> attached to a customer tool <b>1002</b>. The customer tool sends the control module <b>810</b> a calibrated volume input signal. The customer tool <b>1002</b> concurrently delivers a volume of fluid to the inlet <b>806</b> of the mass flow controller <b>802</b>. The customer tool <b>1002</b> sends a signal to the control module <b>810</b> when the customer tool <b>1002</b> has completed delivery of the volume of fluid to the intel <b>806</b>.</p><p id="p-0091" num="0090">When the signal is received, the control module <b>810</b> sends a signal to close the shut-off valve <b>822</b> and begin a rate of decay measurement. Data from the one or more sensors <b>824</b> is collected during the rate of decay measurement. The rate of decay measurement is complete when the one or more sensors <b>824</b> detect that the flow rate is zero. Based on data collected from the one or more sensors <b>824</b>, the control module computer <b>812</b> calculates a volume of the fluid that was delivered by the customer tool <b>1002</b>. The calibration component <b>814</b> sets a calibration parameter to match the calculated volume to the calibrated volume input signal. The calibration parameter will perform the same adjustment on subsequent measurements. The subsequent measurements should agree with the measurements of the customer tool <b>1002</b>.</p><p id="p-0092" num="0091">The customer tool <b>1002</b> may send a calibrated volume input signal at multiple flow rates across the spectrum of the mass flow controller <b>802</b>. For example the customer tool <b>1002</b> may send a calibrated volume input signal at a 100% fully open proportional valve <b>823</b> and at incrementally more closed proportional valve <b>823</b> positions all the way down to a 0.25% open proportional valve <b>823</b>. Every time the customer tool <b>1002</b> sends a calibrated volume input signal, the customer tool also delivers a volume a fluid to the inlet <b>806</b> of the mass flow controller <b>802</b>. When the rate of decay measure is performed, the calibration component <b>814</b> may update the calibration parameter across the spectrum of the mass flow controller <b>802</b>, such that the measurements of the mass flow controller <b>802</b> match the measurements of the customer tool <b>1002</b>.</p><p id="p-0093" num="0092">The customer tool <b>1002</b> may send the control module <b>810</b> thresholds for response overshoot and overshoot flow requirements. The thresholds for response overshoot and overshoot flow requirements are used by the tuning component <b>816</b> to update the tuning parameter, which determines how the proportional valve <b>823</b> is adjusted to match the calculated flow rate to the setpoint flow rate. Like the calibration parameter, the tuning parameter may be configured across the spectrum of the mass flow controller <b>802</b>. A user may use the customer tool <b>1002</b> in the field to set the tuning parameter based on the needs of the user.</p><p id="p-0094" num="0093">Referring to <figref idref="DRAWINGS">FIG. <b>11</b></figref>, <figref idref="DRAWINGS">FIG. <b>11</b></figref> is a cross-sectional view <b>1100</b> of the bottom portion of the mass flow controller <b>802</b>. The mass flow controller <b>802</b> includes a valve body <b>1102</b>, an inlet <b>1106</b> and an outlet <b>1108</b>. The mass flow controller <b>802</b> may receive user input through the communication interface <b>820</b> or wireless antenna <b>818</b>. Likewise, the mass flow controller <b>802</b> may send data to a user through the communication interface <b>820</b> or the wireless antenna <b>818</b>.</p><p id="p-0095" num="0094">The main fluid flow path <b>804</b> begins at the inlet <b>1106</b> and exits at the outlet <b>1108</b>. A setpoint flow rate is set by the user. The calculated flow rate is determined from data that is collected by the one or more sensors <b>824</b>.</p><p id="p-0096" num="0095">The tuning parameter of the tuning component <b>816</b> determines how the proportional valve <b>823</b> is adjusted to match the calculated flow rate to the setpoint flow rate. A user may set the tuning parameter at various points on the spectrum of the mass flow controller <b>802</b> in the field. A signal is sent to operate the proportional valve <b>823</b> based on the tuning parameter.</p><p id="p-0097" num="0096">The valve body <b>1102</b> provides the structure of the proportional valve <b>823</b>. The inlet <b>1106</b> is an opening by which fluid may enter the main fluid flow path <b>804</b> of the mass flow controller <b>802</b>. The valve disc <b>1112</b> and valve seal <b>1114</b> may be made of a corrosion resistant elastomer material such as PCTFE, PTFE, TEFLON, or NYLON. The valve disc <b>1112</b> forms a seal with the valve seat <b>1116</b> when the proportional valve <b>823</b> is closed. The valve seal <b>1114</b> prevents fluid from leaking through the proportional valve <b>823</b> when the proportional valve <b>823</b> is closed.</p><p id="p-0098" num="0097">When the proportional valve <b>823</b> is open, fluid may pass through the mass flow controller <b>802</b> and out through the outlet <b>1108</b>. The valve disc <b>1112</b>, made out of elastomer, forms a better seal with the valve seat <b>1114</b> than harder materials. The elastomer, which is elastic, may shape itself to imperfections in the valve seat <b>1114</b>. The corrosion resistant properties of the valve disc <b>1112</b> allow the valve disc <b>1112</b> to operate for a longer period of time than other elastic materials.</p><p id="p-0099" num="0098">Referring to <figref idref="DRAWINGS">FIG. <b>12</b></figref>, <figref idref="DRAWINGS">FIG. <b>12</b></figref> is a cross-sectional perspective view <b>1200</b> of the bottom portion of the mass flow controller <b>802</b>. A valve disc <b>1202</b> fits over a valve seat <b>1204</b> to seal the proportional valve <b>823</b>. The valve disc <b>1202</b> may be lifted off the valve seat <b>1204</b> by various means, such as with an actuator, to open the proportional valve <b>823</b>. Like the valve disc <b>1202</b>, a valve seal <b>1206</b> in between the valve seat <b>1204</b> and a valve body <b>1208</b> may also be made of a corrosion resistant elastomer material such as PCTFE, PTFE, TEFLON, or NYLON.</p><p id="p-0100" num="0099">The corrosion resistant elastomer material of the valve seal <b>1206</b> and valve disc <b>1202</b> may prevent fluid from passing through imperfections in the proportional valve <b>823</b>. By preventing fluid from passing through imperfections, the valve seal <b>1206</b> and valve disc <b>1202</b> help prevent &#x201c;valve leak-by.&#x201d; &#x201c;Valve leak-by&#x201d; may interfere with the calibration and tuning parameters. A test for &#x201c;valve leak-by&#x201d; may be conducted by performing a rate of decay measurement. The rate of decay measurement entails closing the shut-off valve <b>822</b> and measuring the flow rate with the one or more sensors <b>824</b>.</p><p id="p-0101" num="0100">A user may measure &#x201c;valve leak-by&#x201d; by sending a command to the mass flow controller <b>802</b>. The command to measure &#x201c;valve-leak-by&#x201d; may be received by the wireless antenna <b>818</b> or the communication interface <b>820</b>. Likewise, the result of the rate of decay measurement for &#x201c;valve leak-by&#x201d; may be sent to a user via the wireless antenna <b>818</b> or communication interface <b>820</b>. The control module computer <b>812</b> may be configured to periodically test for &#x201c;valve leak-by.&#x201d; Based on the results of the periodic &#x201c;valve leak-by test,&#x201d; an alarm may be configured to alert a user if the result is beyond a threshold. Like other alarm threshold settings, the &#x201c;valve leak-by&#x201d; alarm setting may be configured over various communication protocols such as DeviceNet, EtherCat, EtherNet, RS485, RS232, and Profibus.</p><p id="p-0102" num="0101">The valve body <b>1208</b> may provide the structure for the main fluid flow path <b>804</b>. The valve seal <b>1206</b> prevents the leaking of fluid through the seam that runs between a valve seat <b>1204</b> and the valve body <b>1208</b>. The valve disc <b>1202</b> may cover the valve seat <b>1204</b> and prevent fluid from flowing through the mass flow controller <b>802</b> when the proportional valve <b>823</b> is closed.</p><p id="p-0103" num="0102">In various embodiments, the valve seal <b>1206</b> and valve disc <b>1202</b> may be shaped differently to function in various types of valves. The proportional valve <b>823</b> may be various valve types such as solenoid, piezo electric, stepper motor, and other valve types. The elastomer material for the valve seal <b>1206</b> and valve disc <b>1202</b> may improve the function for the various types of valves that the proportional valve <b>823</b> may be.</p><p id="p-0104" num="0103">Referring to <figref idref="DRAWINGS">FIG. <b>13</b></figref>, <figref idref="DRAWINGS">FIG. <b>13</b></figref> is a perspective view <b>1300</b> of a multitude of mass flow controllers <b>802</b> that are connected by a manifold. Mass flow controller <b>1302</b> is one of five mass flow controllers <b>802</b> shown in <figref idref="DRAWINGS">FIG. <b>13</b></figref>. As shown in <figref idref="DRAWINGS">FIG. <b>13</b></figref>, each mass flow controller <b>802</b> may have a communication interface connection <b>1308</b> and a power connection <b>1310</b>. The communication interface connection <b>1308</b> may facilitate the transmission of data between a user and the mass flow controller <b>802</b>. The communication interface connection <b>1308</b> may be connected to a customer tool <b>1002</b> that transmits data to match the customer metrology to the metrology of the mass flow controllers <b>802</b>.</p><p id="p-0105" num="0104">In one embodiment the mass flow controller <b>1302</b> and the three mass flow controllers <b>802</b> in line with mass flow controller <b>1302</b> accept fluid through an inlet and direct the fluid into a reference volume chamber <b>1306</b> where the fluid is mixed. The mixed fluid is directed from the reference volume chamber <b>1306</b> to mass flow controller <b>1304</b> where the flow rate of the mixed fluid is controlled as it is directed to the outlet <b>808</b> of mass flow controller <b>1304</b>. Each of the mass flow controllers <b>802</b> may be separately calibrated using a customer tool <b>1002</b>. In various embodiments, only one mass flow controller <b>802</b> is calibrated using a customer tool <b>1002</b> to match the metrology of the customer tool <b>1002</b> to the mass flow controller <b>802</b>. The mass flow controller <b>802</b> that was calibrated is then used to calibrate the other mass flow controllers <b>802</b> that receive the same gas composition by sending the mass flow controllers a calibrated input signal and directing a volume of gas that coincides with the calibrated input signal to the other mass flow controllers <b>802</b>. However, the other mass flow controllers <b>802</b> that receive a different gas composition would have to be separately calibrated by the customer tool <b>1002</b> because the calibration is dependent on the composition of gas.</p><p id="p-0106" num="0105">Similarly, a customer tool <b>1002</b> may be used to send the tuning parameters to each of the mass flow controllers <b>802</b>. In various embodiments, one mass flow controller <b>802</b> is tuned by the customer tool <b>1002</b>. The mass flow controller <b>802</b> that was tuned by the customer tool <b>1002</b> may be used to set the tuning parameters of the other mass flow controllers <b>802</b> that receive the same composition of gas. By using the mass flow controllers <b>802</b> to calibrate and tune one another, time and effort may be saved.</p><p id="p-0107" num="0106">Referring to <figref idref="DRAWINGS">FIG. <b>14</b></figref>, <figref idref="DRAWINGS">FIG. <b>14</b></figref> is a flow diagram <b>1400</b> for a process of matching the metrology of the mass flow controller <b>802</b> to the metrology of the customer tool <b>1002</b>. At step <b>1402</b>, the mass flow controller <b>802</b> may receive a calibration input signal that provides one or more properties of a gas that is flowing through a main fluid flow path <b>804</b>. The calibration input signal may be received by the customer tool <b>1002</b>. At the same time, the customer tool <b>1002</b> may direct a volume of the gas to the mass flow controller <b>802</b>, the goal of which is for the mass flow controller <b>802</b> to match the volume of the gas to the calibration input signal.</p><p id="p-0108" num="0107">At step <b>1404</b>, the mass flow controller <b>802</b> may perform one or more measurements, using one or more sensors, on the gas. The one of more sensors <b>824</b> of the mass flow controller <b>802</b> perform the measurements on the gas to determine the volume of the gas. The measurements may be various measurements that can be used to determine the volume of the gas. In various embodiments, the one or more sensors <b>824</b> measure the temperature of the gas as the gas is directed through a parallel laminar tube that is heated. The temperature measurement may be used to determine the flow rate of gas through the laminar tube, which in turn is used to determine the flow rate of the gas moving through the main fluid flow path <b>804</b>.</p><p id="p-0109" num="0108">At step <b>1406</b>, the mass flow controller <b>802</b> may determine a calibration parameter based on the results of the one or more measurements and the calibration input signal. The calibration parameter matches the measurement of the gas to a measurement in the calibration input signal. In one embodiment, the calibration parameter is a number that, when multiplied by the measurement, produces a measurement equal to a measurement transmitted by the calibration input signal. In various embodiments, the calibration parameter may be a linear regression that is based on multiple calibration input signals at different flow rates.</p><p id="p-0110" num="0109">At step <b>1408</b>, the mass flow controller may adjust a proportional valve <b>823</b>, based on the calibration parameter, to adjust a flow rate of the gas through the apparatus, to match a setpoint flow rate. The mass flow controller <b>802</b> may determine a flow rate of the gas based on measurements from the one or more sensors <b>824</b>. The flow rate will be operated on by the calibration parameter to match the determined flow rate to a metrology based on the calibration input signal. The proportional valve <b>823</b> may be adjusted based on the difference between the setpoint flow rate and the determined flow rate based on the calibration. In one embodiment, the proportional valve <b>823</b> is adjusted based on a P,I,D calculation.</p><p id="p-0111" num="0110">Referring to <figref idref="DRAWINGS">FIG. <b>15</b></figref>, <figref idref="DRAWINGS">FIG. <b>15</b></figref> is a flow diagram <b>1500</b> for a process of tuning the mass flow controller <b>802</b> in situ. The tuning process may need to be performed for every composition of gas that flows through the mass flow controller <b>802</b>. At step <b>1502</b>, the mass flow controller <b>802</b> may provide a main fluid flow path <b>804</b> connected to a proportional valve <b>823</b>, an inlet <b>106</b> connected to the main flow path <b>804</b>, a shut-off valve <b>822</b> located downstream from the inlet <b>806</b> and connected to the main flow path <b>804</b>. Gas may enter the mass flow controller <b>802</b> through the inlet <b>806</b> where the gas is directed through the main fluid flow path <b>804</b> through the shut-off valve <b>822</b> and proportional valve <b>823</b>.</p><p id="p-0112" num="0111">At step <b>1504</b>, the mass flow controller <b>802</b> may receive an input signal for a gas that is flowing through the main fluid flow path <b>804</b>. The input signal may be received from a customer tool <b>302</b> that is connected to the communication interface <b>820</b> of the mass flow controller <b>802</b>. The input signal may be a data point that causes the mass flow controller <b>802</b> to respond. In one embodiment, the input signal is a setpoint flow rate.</p><p id="p-0113" num="0112">At step <b>1506</b>, the mass flow controller <b>802</b> may adjust the proportional valve <b>823</b>, based on the input signal. In one embodiment, the proportional valve <b>823</b> is adjusted based on the difference between a setpoint flow rate that was set by the input signal and a calculated flow rate. In one example of the proportional valve <b>823</b> being adjusted based on the difference in flow rates, an adjustment is determined based on a PID control mechanism. Under the PID mechanism, the sum of the proportion of the difference, the integral of the difference over time, and the gradient of the difference over a period of time are added to determine the adjustment of the proportional valve <b>823</b>. A separate parameter may be set for each of the P, I, and D terms. The PID terms may be multiplied by their respective parameters.</p><p id="p-0114" num="0113">At step <b>1508</b>, the mass flow controller <b>802</b> may determine a response to the flow rate after the adjustment of the proportional valve <b>823</b>. The ideal response of the flow rate is for the flow rate to match the setpoint flow rate in a minimum amount of time. However, the flow rate may overshoot the setpoint flow rate if the proportional valve <b>823</b> adjusts too aggressively to match the setpoint flow rate. The overshoot may occur indefinitely in an oscillating pattern.</p><p id="p-0115" num="0114">At step <b>1510</b>, the mass flow controller <b>802</b> may determine a tuning parameter based on the response. In one embodiment, the tuning parameter is a set of PID parameters. In one example of setting PID parameters, a Ziegler-Nichols method is used. Under the Ziegler-Nichols method. The I and D parameters are set to zero. The P parameter is increased until the response starts to oscillate. The PID parameters are then determined based on the value of the P parameter that caused the oscillation and the period of the oscillation.</p><p id="p-0116" num="0115">Referring to <figref idref="DRAWINGS">FIG. <b>16</b></figref>, <figref idref="DRAWINGS">FIG. <b>16</b></figref> is a block diagram of a computer system <b>1600</b> that may be implemented in the various embodiments of the control module computer <b>812</b>. The computer system <b>1600</b> includes a bus <b>1602</b>, a processor <b>1604</b>, a memory <b>1606</b>, a storage <b>1608</b>, one or more flow sensors <b>1610</b>, and flow control components <b>1612</b>. The bus <b>1602</b> connects the various components of the computer system <b>1600</b> to one another. The bus <b>1602</b> may include various means of connecting the various components. The bus <b>1602</b> may connect the various components of a computer system <b>1600</b> by a serial link or a parallel link. The bus <b>1602</b> may employ different types of connections based on the components of the computer system <b>1600</b> that the bus <b>1602</b> is linking. For instance, the bus <b>1602</b> may employ a slower connection that links the flow control components <b>1612</b> to the memory <b>1606</b> than the faster connection of the processor <b>1604</b> to the memory <b>1606</b>.</p><p id="p-0117" num="0116">The processor <b>1604</b> performs computations based on data that is received via the bus <b>1602</b>. The processor <b>1604</b> may be connected to the memory <b>1606</b> by a very fast bus <b>1602</b> connection to facilitate fast computation. The processor may be various types of general purpose processor including, but not limited to a central processing unit (&#x201c;CPU&#x201d;), a graphics processing unit (&#x201c;GPU&#x201d;), a complex programmable logic device (&#x201c;CPLD&#x201d;), a field programmable gate array (&#x201c;FPGA&#x201d;) , or an application-specific integrated circuit (&#x201c;ASIC&#x201d;). The processor <b>1604</b> performs the various calculations that include, but are not limited to determining the flow rate, rate of decay measurement, &#x201c;valve leak-by&#x201d; measurement, calibration parameter, calibration adjustment, tuning parameter, tuning adjustment, proportional valve <b>823</b> adjustment, and shut-off valve <b>822</b> state. The calculations that are performed by the processor <b>1604</b> may be transmitted to the memory <b>1606</b>, where the results of the calculations of the processor <b>1604</b> are carried out.</p><p id="p-0118" num="0117">The memory <b>1606</b> stores the instructions that are carried out by the various components of the computer system <b>1600</b>. The memory <b>1606</b> transmits computations to the processor <b>1604</b> and receives the results of computations from the processor <b>1604</b>. The memory <b>1606</b> may be various types of main memory including, but not limited to random access memory (&#x201c;RAM&#x201d;) and read only memory (&#x201c;ROM&#x201d;). The results of computations from the processor <b>1604</b> that are received by the memory <b>1606</b> may be carried out by the memory <b>1606</b>. The memory <b>1606</b> may transmit signals through the bus <b>1602</b> to effect processes in the various components of the computer system <b>1600</b>. The memory <b>1606</b> may transmit data to the storage <b>1608</b> for long term keeping. A user may transmit data to the storage <b>1608</b> through the memory <b>1606</b> over any communication protocol such as DeviceNet, EtherCat, EtherNet, RS485, RS232, and Profibus.</p><p id="p-0119" num="0118">The storage <b>1608</b> can store, receive and transmit data via the bus <b>1602</b>. Typically, the storage <b>1608</b> receives and transmits data only to the memory <b>1606</b>. The storage <b>1608</b> may be various types of the computer storage that can retain data when the computer system <b>1600</b> is unpowered. Types of storage <b>1608</b> that can be used in the computer system <b>1600</b> include, but are not limited to, magnetic disk memory, optical disk memory, and flash memory. The storage <b>1608</b> may store various settings of the mass flow controller <b>802</b> including, but not limited to the alarm thresholds, calibration parameter, and tuning parameter. A different alarm threshold, calibration parameter, and tuning parameter may be stored for every different type of gas or composition of gas that may flow through the mass flow controller <b>802</b>. The storage <b>1608</b> may store data that is collected from the measurements of the one or more sensors <b>824</b>. Over time, long term data may be used to show the degradation, if any, in the one or more sensors <b>824</b> or other components of the mass flow controller <b>802</b>.</p><p id="p-0120" num="0119">The computer system <b>1600</b> accepts measurements from one or more flow sensors <b>1610</b>. The one or more flow sensors <b>1610</b> may measure any property of a gas or fluid that flows through the main fluid flow path <b>804</b>. The measured properties of the gas or fluid may be transmitted to the memory <b>1606</b> through the bus <b>1602</b>. The memory <b>1606</b>, together with the processor <b>1604</b>, may determine a flow rate of the gas or fluid based on the measured properties. In one embodiment, the amount of gas may be determined by the change in temperature as the gas is diverted through a parallel laminar tube in the sensor. The change in temperature is measured by the one or more flow sensors <b>1610</b>, which is transmitted through the bus <b>1602</b> to the memory <b>1606</b>. The memory <b>1606</b> sends computations to the processor <b>1604</b> to determine the flow rate of gas. The calibration parameter may be a part of the final calculation of the flow rate of gas. The calibration parameter adjusts of flow rate calculation to match a flow rate of a customer tool <b>302</b>. The calibration parameter may be stored in the storage <b>1608</b>.</p><p id="p-0121" num="0120">The computer system <b>1600</b> sends signals to one or more flow control components <b>1612</b>. The flow control components <b>1612</b>, include, but are not limited to the shut-off valve <b>822</b> and the proportional valve <b>823</b>. The shut-off valve <b>822</b> may be in an open or closed state. In the open state, the shut-off valve <b>822</b> allows a gas or fluid to flow through the mass flow controller <b>802</b>. In the closed state, the shut-off valve <b>822</b> prevents gas or fluid from entering the mass flow controller <b>802</b>. The gas or fluid already in the mass flow controller <b>802</b> may leave through the outlet <b>808</b>. When a rate of decay measurement is made, a signal is sent to close the shut-off valve <b>822</b> while the one or more flow sensors <b>1610</b> collect data as the fluid or gas leaves the mass flow controller <b>802</b>.</p><p id="p-0122" num="0121">The proportional valve <b>823</b> may receive signals from the computer system <b>1600</b> to adjust an opening in the proportional valve <b>823</b> that restricts the flow of gas or fluid through the proportional valve <b>823</b>. In one embodiment, the proportional valve <b>823</b> may be instructed to open based on various configuration points across the spectrum of the mass flow controller <b>802</b>. For example, the proportional valve <b>823</b> may be instructed to become fully 100% open while data is collected from the one or more flow sensors <b>1610</b> for one configuration point. The proportional valve <b>823</b> may be instructed to open to various other configuration points from as low as 0.25% open while data is collected from the one or more flow sensors <b>1610</b>. The data that is collected from the one or more flow sensors <b>1610</b> for the configuration points may be used to create a calibration parameter.</p><p id="p-0123" num="0122">The tuning parameter dictates how the proportional valve <b>823</b> is adjusted to match a calculated flow rate to a setpoint flow rate. The tuning parameter may be set by a customer tool <b>302</b>. The computer system may receive instructions from the customer tool <b>1002</b> to send signals to the proportional valve <b>823</b> to adjust the proportional valve <b>823</b> to various configuration points. The flow rate at the various configuration points is measured by the one or more flow sensors <b>1610</b>. The data is transmitted through the bus <b>1602</b> to the memory <b>1606</b> where the data is processed into a flow rate. The flow rate is sent to the customer tool <b>1002</b>, which determines a tuning parameter.</p><p id="p-0124" num="0123">Many variations may be made to the embodiments described herein. All variations are intended to be included within the scope of this disclosure. The description of the embodiments herein can be practiced in many ways. Any terminology used herein should not be construed as restricting the features or aspects of the disclosed subject matter. The scope should instead be construed in accordance with the appended claims.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A mass flow control apparatus, the apparatus comprising:<claim-text>a main fluid flow path connected to a proportional valve;</claim-text><claim-text>at least one sensor that measures a property of a gas in the main fluid flow path;</claim-text><claim-text>a control module configured to calculate a rate of decay from a signal from the at least one sensor when an inlet valve is closed;</claim-text><claim-text>the control module is further configured to receive a setpoint flow rate;</claim-text><claim-text>the control module is further configured to adjust the proportional valve to adjust a flow rate, of the gas through the apparatus, to match the setpoint flow rate;</claim-text><claim-text>the control module is further configured to determine a response to the flow rate after adjusting the proportional valve; and</claim-text><claim-text>the proportional valve comprises an elastomeric valve disc that is movable to seal the main fluid flow path when the proportional valve is closed.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The mass flow control apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the valve disc comprises PTFE.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The mass flow control apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising an elastomer located between a valve seat and valve body of the proportional valve.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The mass flow control apparatus of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the elastomeric valve disc is a corrosion resistant material selected from the group consisting of PCTFE, PTEE, TEFLON, and NYLON.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The mass flow control apparatus of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the control module is configured to calculate a leak-by value based on the rate of decay.</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The mass flow control apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the valve disc comprises PCTFE.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The mass flow control apparatus of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein a shape of elastomeric material of the valve disc comprises a solid cylinder.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The mass flow control apparatus of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein a shape of elastomeric material of the valve disc comprises a flat end.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The mass flow control apparatus of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the valve disc fits over a valve seat to close the proportional valve when the proportional valve is in a closed state.</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The mass flow control apparatus of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the valve disc makes contact with the valve seat at an end of the solid cylinder when the proportional valve is in a closed state.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The mass flow control apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the end of the solid cylinder forms a seal in the main fluid flow path when the proportional valve is in a closed state.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The mass flow control apparatus of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the flat end forms a seal in the main fluid flow path when the proportional valve is in a closed state.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The mass flow control apparatus of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the valve disc is moveable via an actuator.</claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. A mass flow control apparatus, the mass flow control apparatus comprising:<claim-text>a main fluid flow path connected to a proportional valve;</claim-text><claim-text>at least one sensor that measures a property of a gas in the main fluid flow path;</claim-text><claim-text>a control module configured to receive a setpoint flow rate;</claim-text><claim-text>the control module is further configured to adjust the proportional valve to adjust a flow rate, of the gas through the apparatus, to match the setpoint flow rate; and</claim-text><claim-text>the proportional valve comprises an elastomeric valve disc that is movable to seal the main fluid flow path when the proportional valve is closed.</claim-text></claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The mass flow control apparatus of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the valve disc comprises PTFE.</claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The mass flow control apparatus of <claim-ref idref="CLM-00014">claim 14</claim-ref>, further comprising an elastomer located between a valve seat and valve body of the proportional valve.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The mass flow control apparatus of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the elastomeric valve disc is a corrosion resistant material selected from the group consisting of PCTFE, PTEE, TEFLON, and NYLON.</claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. The mass flow control apparatus of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the valve disc comprises PCTFE;<claim-text>wherein a shape of elastomeric material of the valve disc comprises a solid cylinder; and</claim-text><claim-text>wherein the valve disc fits over a valve seat to close the proportional valve when the proportional valve is in a closed state.</claim-text></claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. The mass flow control apparatus of <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein the valve disc makes contact with the valve seat at an end of the solid cylinder when the proportional valve is in a closed state; and<claim-text>wherein the end of the solid cylinder forms a seal in the main fluid flow path when the proportional valve is in a closed state.</claim-text></claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. A mass flow control apparatus, the apparatus comprising:<claim-text>a main fluid flow path connected to a proportional valve;</claim-text><claim-text>at least one sensor that measures a property of a gas in the main fluid flow path;</claim-text><claim-text>a control module configured to calculate a rate of decay from a signal from the at least one sensor when an inlet valve is closed;</claim-text><claim-text>the control module is further configured to receive a setpoint flow rate;</claim-text><claim-text>the control module is further configured to adjust the proportional valve to adjust a flow rate, of the gas through the apparatus, to match the setpoint flow rate;</claim-text><claim-text>the proportional valve comprises an elastomeric valve disc that is movable to seal the main fluid flow path when the proportional valve is closed;</claim-text><claim-text>wherein a shape of elastomeric material of the valve disc comprises a solid cylinder; and</claim-text><claim-text>wherein the valve disc fits over a valve seat to close the proportional valve when the proportional valve is in a closed state.</claim-text></claim-text></claim></claims></us-patent-application>