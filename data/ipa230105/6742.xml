<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006743A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006743</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17941360</doc-number><date>20220909</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>RU</country><doc-number>RU2020110701</doc-number><date>20200313</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>B</subclass><main-group>10</main-group><subgroup>58</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>B</subclass><main-group>10</main-group><subgroup>58</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc></classifications-cpc><invention-title id="d2e61">SIGNAL PRE-COMPENSATION METHOD AND APPARATUS</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>PCT/CN2021/078629</doc-number><date>20210302</date></document-id><parent-status>PENDING</parent-status></parent-doc><child-doc><document-id><country>US</country><doc-number>17941360</doc-number></document-id></child-doc></relation></continuation></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="obligated-assignee"><addressbook><orgname>HUAWEI TECHNOLOGIES CO., LTD.</orgname><address><city>Shenzhen</city><country>CN</country></address></addressbook><residence><country>CN</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>DMITRY</last-name><first-name>Solovev</first-name><address><city>Moscow</city><country>RU</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>CHEN</last-name><first-name>Jie</first-name><address><city>Wuhan</city><country>CN</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>TIAN</last-name><first-name>Jiashen</first-name><address><city>Chengdu</city><country>CN</country></address></addressbook></inventor></inventors></us-parties><assignees><assignee><addressbook><orgname>HUAWEI TECHNOLOGIES CO., LTD.</orgname><role>03</role><address><city>Shenzhen</city><country>CN</country></address></addressbook></assignee></assignees></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A signal pre-compensation method is provided. In the method, at least one target frequency subband is determined from a plurality of frequency subbands of a first optical signal and an optical signal of the at least one target frequency subband in the first optical signal is demodulated based on the at least one target frequency subband. A first electrical signal is obtained after demodulation, and a pre-compensation parameter is updated based on the at least one target frequency subband, the first electrical signal, and a second electrical signal. Herein the pre-compensation parameter is used to perform signal pre-compensation on the second electrical signal, and the first optical signal is generated after the pre-compensation is performed on the second electrical signal.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="74.93mm" wi="158.75mm" file="US20230006743A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="215.73mm" wi="110.49mm" orientation="landscape" file="US20230006743A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="212.51mm" wi="131.83mm" orientation="landscape" file="US20230006743A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="102.36mm" wi="131.40mm" file="US20230006743A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="215.39mm" wi="106.17mm" orientation="landscape" file="US20230006743A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="120.65mm" wi="153.50mm" file="US20230006743A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="180.85mm" wi="142.92mm" file="US20230006743A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="63.50mm" wi="80.86mm" file="US20230006743A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading><p id="p-0002" num="0001">This application is a continuation of International Application No. PCT/CN2021/078629, filed on Mar. 2, 2021, which claims priority to Russian Patent Application No. RU2020110701, filed on Mar. 13, 2020. The disclosures of the aforementioned applications are hereby incorporated by reference in their entireties.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">TECHNICAL FIELD</heading><p id="p-0003" num="0002">This application relates to the communications field, and more specifically, to a signal pre-compensation method and apparatus.</p><heading id="h-0003" level="1">BACKGROUND</heading><p id="p-0004" num="0003">In a conventional optical communications system, as modulation format gradually evolves from quadrature phase shift keying (QPSK) to 64 quadrature amplitude modulation (QAM) or a modulation code pattern with a higher numeration system, and the transmission rate of the optical communications system also evolves from 30 gigabits per second (Gbps) to 100 Gbps, signal distortion caused by devices at the transmit end has more significant impact on information transmission.</p><p id="p-0005" num="0004">To resolve the foregoing problem, a digital pre-compensation (or digital pre-distortion) technology for the transmit end is proposed. Simply put, pre-distortion is artificially adding a characteristic that is opposite to the distortion at the transmit end in order to perform compensation.</p><p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a schematic diagram of a pre-compensation technology in a conventional optical communications system. As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, a receive end generates feedback information based on a received signal, and feeds back the feedback information to a transmit end, so that the transmit end updates (or calibrates) a pre-compensation parameter based on the feedback information.</p><p id="p-0007" num="0006">However, implementation of this solution depends on a remote feedback channel, and has particular requirements for both the performance and the rate of the feedback channel. For example, in a case of a long distance between the transmit end and the receive end, transmission of the feedback information has a transmission delay, and the delay postpones the updating of the pre-compensation parameter. In addition, when the performance of the feedback channel is poor, the transmission accuracy of the feedback information is affected, thereby affecting the accuracy of the pre-compensation parameter. Consequently, communication performance is degraded.</p><heading id="h-0004" level="1">SUMMARY</heading><p id="p-0008" num="0007">This application provides a signal pre-compensation method and apparatus, so as to improve communication performance.</p><p id="p-0009" num="0008">According to a first aspect, a signal pre-compensation method is provided, where the method is applied to an optical signal sending device, and includes: determining at least one target frequency subband from a plurality of frequency subbands, where the plurality of frequency subbands are frequency subbands in a frequency band of a first optical signal generated by the optical signal sending device; demodulating an optical signal of the at least one target frequency subband in the first optical signal based on the at least one target frequency subband, and obtaining a first electrical signal after demodulation; and updating a pre-compensation parameter based on the at least one target frequency subband, the first electrical signal, and a second electrical signal, where the pre-compensation parameter is used to perform signal pre-compensation on the second electrical signal, and the first optical signal is generated after the pre-compensation is performed on the second electrical signal.</p><p id="p-0010" num="0009">According to the solutions provided in this application, the optical signal sending device pre-compensates and modulates the second electrical signal to obtain a to-be-sent first optical signal, and demodulates the first optical signal to obtain the first electrical signal, so that the pre-compensation parameter used for pre-compensation can be updated based on the first electrical signal and the second electrical signal. To be specific, according to the method provided in this application, the updating of the pre-compensation parameter does not need to depend on feedback information from an optical signal receiving device, thereby reducing system configuration costs generated by configuring a feedback channel, shortening the delay of updating the pre-compensation parameter, improving the accuracy of pre-compensation processing, and further improving communication performance.</p><p id="p-0011" num="0010">In addition, according to the solutions provided in this application, demodulation of the first optical signal is demodulation of a part of the first optical signal carried on the target frequency subband, thereby lowering a requirement for a bandwidth of a demodulation device, making it easy to implement demodulation processing, and reducing the costs of the optical signal sending device. Therefore, practicality of this application is further improved.</p><p id="p-0012" num="0011">In this application, &#x201c;demodulating an optical signal of the at least one target frequency subband in the first optical signal&#x201d; may be understood as follows: An execution body (for example, a computing device or a processor) of the signal pre-compensation method sends information about the target frequency subband to a demodulation device that is configured in the optical signal sending device, so that the demodulation device can demodulate an optical signal carried on the target frequency subband.</p><p id="p-0013" num="0012">Alternatively, &#x201c;demodulating an optical signal of the at least one target frequency subband in the first optical signal&#x201d; may be understood as follows: The execution body of the signal pre-compensation method performs a related step of the demodulation.</p><p id="p-0014" num="0013">In other words, the demodulation device in the optical signal sending device and the execution body of the signal pre-compensation method in this application may be independently configured, or may be the same device. This is not particularly limited in this application.</p><p id="p-0015" num="0014">In addition, in this application, a pre-compensation device or module configured to perform the pre-compensation processing may be configured in the optical signal sending device, and an updated pre-compensation parameter may be sent to the pre-compensation device or module by the execution body of the signal pre-compensation method in this application.</p><p id="p-0016" num="0015">Alternatively, the pre-compensation processing may be performed by the execution body of the signal pre-compensation method in this application. This is not particularly limited in this application.</p><p id="p-0017" num="0016">Optionally, the demodulating an optical signal of the at least one target frequency subband in the first optical signal based on the at least one target frequency subband includes: generating at least one local oscillator signal based on the at least one target frequency subband, where the at least one target frequency subband is in a one-to-one correspondence with the at least one local oscillator signal, and a deviation between a center frequency of each local oscillator signal and a center frequency of a corresponding target frequency subband falls within a first preset range; and demodulating the first optical signal based on the at least one local oscillator signal and a first demodulation bandwidth, where the first demodulation bandwidth is greater than or equal to a frequency bandwidth of the target frequency subband.</p><p id="p-0018" num="0017">In this application, &#x201c;generating a local oscillator signal based on the target frequency subband&#x201d; may be understood as follows: The execution body (for example, a computing device or a processor) of the signal pre-compensation method sends the information about the target frequency subband to a local oscillator source that is configured in the optical signal sending device, so that the local oscillator source can generate a local oscillator signal related to the target frequency subband.</p><p id="p-0019" num="0018">Alternatively, &#x201c;generating a local oscillator signal based on the target frequency subband&#x201d; may be understood as follows: The execution body of the signal pre-compensation method performs a related step of generating the local oscillator signal.</p><p id="p-0020" num="0019">Optionally, the at least one target frequency subband is a plurality of target frequency subbands, the plurality of target frequency subbands are in a one-to-one correspondence with a plurality of first electrical signals, and each first electrical signal is obtained after an optical signal of a corresponding target frequency subband is demodulated.</p><p id="p-0021" num="0020">Optionally, the updating a pre-compensation parameter based on the at least one target frequency subband, the first electrical signal, and a second electrical signal includes: determining a first symbol subsequence from a symbol sequence of the second electrical signal based on the at least one target frequency subband, where a position of the first symbol subsequence in the symbol sequence of the second electrical signal is a first position, a position of the at least one target frequency subband in the plurality of frequency subbands is a second position, and a deviation between the first position and the second position falls within a second preset range; and updating the pre-compensation parameter based on the difference between the symbol sequence of the first electrical signal and the first symbol subsequence.</p><p id="p-0022" num="0021">Optionally, the updating the pre-compensation parameter based on the difference between the symbol sequence of the first electrical signal and the first symbol subsequence includes: determining a first weight based on the frequency band position of the at least one target frequency subband in the plurality of frequency subbands; and updating the pre-compensation parameter based on the first weight and the difference between the symbol sequence of the first electrical signal and the first symbol subsequence.</p><p id="p-0023" num="0022">Optionally, the plurality of frequency subbands have the same frequency bandwidth.</p><p id="p-0024" num="0023">Optionally, the at least one target frequency subband is a plurality of target frequency subbands, and the plurality of target frequency subbands are selected from the plurality of frequency subbands at an equal frequency band interval.</p><p id="p-0025" num="0024">Optionally, the frequency band interval is one frequency subband.</p><p id="p-0026" num="0025">According to a second aspect, a signal pre-compensation apparatus is provided, where the apparatus is used in an optical signal sending device, and includes: a determining unit, configured to determine at least one target frequency subband from a plurality of frequency subbands, where the plurality of frequency subbands are frequency subbands in a frequency band of a first optical signal generated by the optical signal sending device; a demodulation unit, configured to: demodulate an optical signal of the at least one target frequency subband in the first optical signal based on the at least one target frequency subband, and obtain a first electrical signal after demodulation; and a processing unit, configured to update a pre-compensation parameter based on the at least one target frequency subband, the first electrical signal, and a second electrical signal, where the pre-compensation parameter is used to perform signal pre-compensation on the second electrical signal, and the first optical signal is generated after the pre-compensation is performed on the second electrical signal.</p><p id="p-0027" num="0026">Optionally, the demodulation unit is configured to generate at least one local oscillator signal based on the at least one target frequency subband, where the at least one target frequency subband is in a one-to-one correspondence with the at least one local oscillator signal, and a deviation between a center frequency of each local oscillator signal and a center frequency of a corresponding target frequency subband falls within a first preset range, and is configured to demodulate the first optical signal based on the at least one local oscillator signal and a first demodulation bandwidth, where the first demodulation bandwidth is greater than or equal to a frequency bandwidth of the at least one target frequency subband.</p><p id="p-0028" num="0027">Optionally, the at least one target frequency subband is a plurality of target frequency subbands, the plurality of target frequency subbands are in a one-to-one correspondence with a plurality of first electrical signals, and each first electrical signal is obtained after an optical signal of a corresponding target frequency subband is demodulated.</p><p id="p-0029" num="0028">Optionally, the processing unit is configured to determine a first symbol subsequence from a symbol sequence of the second electrical signal based on the at least one target frequency subband, where a position of the first symbol subsequence in the symbol sequence of the second electrical signal is a first position, a position of the at least one target frequency subband in the plurality of frequency subbands is a second position, and a deviation between the first position and the second position falls within a second preset range, and is configured to update the pre-compensation parameter based on the difference between the symbol sequence of the first electrical signal and the first symbol subsequence.</p><p id="p-0030" num="0029">Optionally, the processing unit is configured to determine a first weight based on the frequency band position of the at least one target frequency subband in the plurality of frequency subbands, and is configured to update the pre-compensation parameter based on the first weight and the difference between the symbol sequence of the first electrical signal and the first symbol subsequence.</p><p id="p-0031" num="0030">Optionally, the plurality of frequency subbands have the same frequency bandwidth.</p><p id="p-0032" num="0031">Optionally, the at least one target frequency subband is a plurality of target frequency subbands, and the plurality of target frequency subbands are selected from the plurality of frequency subbands at an equal frequency band interval.</p><p id="p-0033" num="0032">Optionally, the frequency band interval is one frequency subband.</p><p id="p-0034" num="0033">According to a third aspect, a signal pre-compensation method is provided, where the method is applied to an optical signal sending device, and includes: demodulating a first optical signal, and obtaining a first electrical signal after demodulation; and updating a pre-compensation parameter based on the first electrical signal and a second electrical signal. The first optical signal is obtained after pre-compensation processing that is based on the pre-compensation parameter is performed on the second electrical signal.</p><p id="p-0035" num="0034">According to a fourth aspect, a signal pre-compensation apparatus is provided, where the apparatus is used in an optical signal sending device, and includes: a demodulation unit, configured to demodulate a first optical signal and obtain a first electrical signal after demodulation; and a processing unit, configured to update a pre-compensation parameter based on the first electrical signal and a second electrical signal. The first optical signal is obtained after pre-compensation processing that is based on the pre-compensation parameter is performed on the second electrical signal.</p><p id="p-0036" num="0035">According to the solutions provided in this application, the optical signal sending device pre-compensates and modulates the second electrical signal to obtain a to-be-sent first optical signal, and demodulates the first optical signal to obtain the first electrical signal, so that the pre-compensation parameter used for pre-compensation can be updated based on the first electrical signal and the second electrical signal. To be specific, according to the method provided in this application, the updating of the pre-compensation parameter does not need to depend on feedback information from an optical signal receiving device, thereby reducing system configuration costs generated by configuring a feedback channel, shortening the delay of updating the pre-compensation parameter, improving accuracy of pre-compensation processing, and further improving communication performance.</p><p id="p-0037" num="0036">According to a fifth aspect, a communications apparatus is provided and includes each module or unit configured to perform the method in any one of the first aspect or the possible implementations of the first aspect.</p><p id="p-0038" num="0037">According to a sixth aspect, a communications apparatus is provided, including modules or units configured to perform the method in the third aspect.</p><p id="p-0039" num="0038">According to a seventh aspect, a communications apparatus is provided, including a processor. The processor is coupled to a memory, and may be configured to perform the method in the first aspect or the third aspect and the possible implementations of the first aspect or the third aspect. Optionally, the communications apparatus further includes the memory. Optionally, the communications apparatus further includes a communications interface, and the processor is coupled to the communications interface.</p><p id="p-0040" num="0039">In an implementation, the communications apparatus is an optical signal sending apparatus. In this case, the communications interface may be a transceiver, or an input/output interface.</p><p id="p-0041" num="0040">In another implementation, the communications apparatus is a chip or a chip system.</p><p id="p-0042" num="0041">In this case, the communications interface may be an input/output interface, an interface circuit, an output circuit, an input circuit, a pin, a related circuit, or the like in the chip or the chip system. The processor may alternatively be embodied as a processing circuit or a logic circuit.</p><p id="p-0043" num="0042">According to an eighth aspect, a communications apparatus is provided, including an input circuit, an output circuit, and a processing circuit. The processing circuit is configured to receive a signal by using the input circuit and transmit a signal by using the output circuit, so that the method in any one of the first aspect or the third aspect and the possible implementations of the first aspect or the third aspect is implemented.</p><p id="p-0044" num="0043">In a specific implementation process, the communications apparatus may be a chip, the input circuit may be an input pin, the output circuit may be an output pin, and the processing circuit may be a transistor, a gate circuit, a trigger, various logic circuits, or the like. An input signal received by the input circuit may be received and input by, for example without limitation to, a receiver, and a signal output by the output circuit may be output to and transmitted by, for example without limitation to, a transmitter. The input circuit and the output circuit may be different circuits or may be the same circuit, and in this case, the circuit is used as the input circuit and the output circuit respectively at different moments. Specific implementations of the processor and the various circuits are not limited in embodiments of this application.</p><p id="p-0045" num="0044">According to a ninth aspect, a processing apparatus is provided, including a processor and a memory. The processor is configured to read instructions stored in the memory, and may receive the signal by using a receiver and transmit the signal by using a transmitter to perform the method in any one of the first aspect or the third aspect and the possible implementations of the first aspect or the third aspect.</p><p id="p-0046" num="0045">Optionally, there are one or more processors, and there are one or more memories.</p><p id="p-0047" num="0046">Optionally, the memory may be integrated with the processor, or the memory and the processor are separately disposed.</p><p id="p-0048" num="0047">In a specific implementation process, the memory may be a non-transitory memory, for example, a read-only memory (ROM). The memory and the processor may be integrated into the same chip, or may be separately disposed on different chips. A type of the memory and a manner of disposing the memory and the processor are not limited in embodiments of this application.</p><p id="p-0049" num="0048">It should be understood that a related data exchange process, for example, sending indication information, may be a process of outputting the indication information from the processor, and receiving capability information may be a process of receiving the input capability information by the processor. Specifically, data output by the processor may be output to the transmitter, and input data received by the processor may be from the receiver. The transmitter and the receiver may be collectively referred to as a transceiver.</p><p id="p-0050" num="0049">The processor in the ninth aspect may be a chip. The processor may be implemented by using hardware or software. When the processor is implemented by using hardware, the processor may be a logic circuit, an integrated circuit, or the like. When the processor is implemented by using software, the processor may be a general-purpose processor, and is implemented by reading software code stored in the memory. The memory may be integrated into the processor, or may exist independently outside the processor.</p><p id="p-0051" num="0050">According to a tenth aspect, a computer program product is provided. The computer program product includes a computer program (which may be alternatively referred to as code or instructions). When the computer program is run, a computer is enabled to perform the method in any one of the first aspect or the third aspect and the possible implementations of the first aspect or the third aspect.</p><p id="p-0052" num="0051">According to an eleventh aspect, a computer-readable medium is provided. The computer-readable medium stores a computer program (which may be alternatively referred to as code or instructions). When the computer program is run on a computer, the computer is enabled to perform the method in any one of the first aspect or the third aspect and the possible implementations of the first aspect or the third aspect.</p><p id="p-0053" num="0052">According to a twelfth aspect, a communications system is provided, including the foregoing optical signal sending device.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a schematic diagram of a pre-compensation technology in the conventional technology;</p><p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a schematic diagram of a structure of an optical signal sending device according to an embodiment of this application;</p><p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a schematic diagram of an example of a demodulation unit according to an embodiment of this application;</p><p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a schematic diagram of an example of a pre-compensation updating unit according to this application;</p><p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a schematic flowchart of a signal pre-compensation method according to an embodiment of this application;</p><p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a schematic diagram of an example of a target frequency subband according to an embodiment of this application;</p><p id="p-0060" num="0059"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a schematic block diagram of a signal pre-compensation apparatus according to an embodiment of this application; and</p><p id="p-0061" num="0060"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is another schematic block diagram of a signal pre-compensation apparatus according to an embodiment of this application.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0006" level="1">DESCRIPTION OF EMBODIMENTS</heading><p id="p-0062" num="0061">The following describes technical solutions of this application with reference to the accompanying drawings.</p><p id="p-0063" num="0062">The signal pre-compensation method according to embodiments of this application may be applied to an optical communications system, such as a coherent optical communications system or an optical communications system using intensity modulation with direct detection.</p><p id="p-0064" num="0063">The signal pre-compensation method in this application may be applied to an optical signal sending device. In the following embodiments, a sending device in the coherent optical communications system is used as an example for description. Coherent modulation and heterodyne detection technologies are mainly used in coherent optical communication. The so-called coherent modulation means that a to-be-transmitted signal is used to change a frequency, a phase, and an amplitude of an optical carrier, and therefore, an optical signal needs to have a definite frequency and phase. Laser is a type of coherent light. The so-called heterodyne detection means that a laser beam generated by a local oscillator and input signal light are mixed in an optical hybrid to obtain an intermediate frequency signal that changes according to the same rule as the signal light in terms of frequency, phase, and amplitude.</p><p id="p-0065" num="0064">Specifically, in the coherent optical communications system, the sending device modulates the signal to the optical carrier in an external modulation method for transmission. When signal light is transmitted to a receiving device, the signal light is first coherently coupled to a local oscillator optical signal and then detected by a balanced receiver. The coherent optical communication may be classified into heterodyne detection and homodyne detection based on a fact that a local oscillator light frequency is unequal or equal to a signal light frequency. For the heterodyne detection, after optical-to-electrical conversion is performed on the optical signal, an intermediate frequency signal is obtained, and then secondary demodulation is required to convert the intermediate frequency signal into a baseband signal. For the homodyne detection, the signal is converted into a baseband signal directly after the optical-to-electrical conversion without requiring the secondary demodulation, provided that the local oscillator light frequency needs to match the signal light frequency strictly, and phases of the local oscillator light and the signal light need to be locked.</p><p id="p-0066" num="0065"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a schematic diagram of a structure of a sending device (or an optical module in a sending device) according to this application.</p><p id="p-0067" num="0066">As shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, a sending device <b>100</b> includes a first modulation unit <b>110</b>, a pre-compensation unit <b>120</b>, a digital-to-analog conversion unit <b>130</b>, a second modulation unit <b>140</b>, a demodulation unit <b>150</b>, an analog-to-digital conversion unit <b>160</b>, and a pre-compensation parameter updating unit <b>170</b>.</p><p id="p-0068" num="0067">It should be understood that the units included in the sending device listed above are merely examples for description. This is not limited in this application. The sending device <b>100</b> in this application may include various units or modules used in optical signal generation and sending processes in the conventional technology.</p><p id="p-0069" num="0068">The following first describes a connection relationship of each module.</p><p id="p-0070" num="0069">An output port of the first modulation unit <b>110</b> is separately connected to a first input port of the pre-compensation unit <b>120</b> and a first input port of the pre-compensation parameter updating unit <b>170</b>. To be specific, a signal output from the output port of the first modulation unit <b>110</b> can be separately input to the first input port of the pre-compensation unit <b>120</b> and the first input port of the pre-compensation parameter updating unit <b>170</b>.</p><p id="p-0071" num="0070">As an example rather than a limitation, in this application, a splitter may be alternatively disposed. The splitter is configured to: split the signal output from the output port of the first modulation unit <b>110</b> into two signals, and input the two signals to the first input port of the pre-compensation unit <b>120</b> and the first input port of the pre-compensation parameter updating unit <b>170</b>, respectively.</p><p id="p-0072" num="0071">An output port of the pre-compensation unit <b>120</b> is connected to an input port of the digital-to-analog conversion unit <b>130</b>. To be specific, a signal output from the output port of the pre-compensation unit <b>120</b> can be input to the input port of the digital-to-analog conversion unit <b>130</b>.</p><p id="p-0073" num="0072">An output port of the digital-to-analog conversion unit <b>130</b> is connected to an input port of the second modulation unit <b>140</b>. To be specific, a signal output from the output port of the digital-to-analog conversion unit <b>130</b> can be input to the input port of the second modulation unit <b>140</b>.</p><p id="p-0074" num="0073">An output port of the second modulation unit <b>140</b> is connected to a first input port of the demodulation unit <b>150</b>. To be specific, a signal output from the output port of the second modulation unit <b>140</b> can be input to the first input port of the demodulation unit <b>150</b>.</p><p id="p-0075" num="0074">As an example rather than a limitation, in this application, the splitter may be alternatively disposed. The splitter is configured to split the signal output from the output port of the second modulation unit <b>140</b> into two signals. One signal is sent to a receiving device, and the other signal is input to the first input port of the demodulation unit <b>150</b>.</p><p id="p-0076" num="0075">An output port of the demodulation unit <b>150</b> is connected to an input port of the analog-to-digital conversion unit <b>160</b>. To be specific, a signal output from the output port of the demodulation unit <b>150</b> can be input to the input port of the analog-to-digital conversion unit <b>160</b>.</p><p id="p-0077" num="0076">An output port of the analog-to-digital conversion unit <b>160</b> is connected to a second input port of the pre-compensation parameter updating unit <b>170</b>. To be specific, a signal output from the output port of the analog-to-digital conversion unit <b>160</b> can be input to the second input port of the pre-compensation parameter updating unit <b>170</b>.</p><p id="p-0078" num="0077">A first output port of the pre-compensation parameter updating unit <b>170</b> is connected to a second input port of the pre-compensation unit <b>120</b>. To be specific, signaling or an instruction output from an output port of the pre-compensation parameter updating unit <b>170</b> can be input to the second input port of the pre-compensation unit <b>120</b>.</p><p id="p-0079" num="0078">A second output port of the pre-compensation parameter updating unit <b>170</b> is connected to a second input port of the demodulation unit <b>150</b>. To be specific, signaling or an instruction output from the second output port of the pre-compensation parameter updating unit <b>170</b> can be input to the second input port of the demodulation unit <b>150</b>.</p><p id="p-0080" num="0079">The following describes functions of the foregoing units.</p><p id="p-0081" num="0080">1. First Modulation Unit <b>110</b></p><p id="p-0082" num="0081">The first modulation unit <b>110</b> is configured to modulate an input signal (for example, a bit sequence) to generate an electrical signal (that is, an example of a second electrical signal, which is denoted as an electrical signal #A below for ease of understanding and description).</p><p id="p-0083" num="0082">The electrical signal #A may be alternatively understood as a symbol or a symbol sequence in time domain.</p><p id="p-0084" num="0083">As an example rather than a limitation, the bit sequence may be data output by an application layer entity of the sending device, such as a media access control layer (MAC) entity.</p><p id="p-0085" num="0084">As an example rather than a limitation, the first modulation unit <b>110</b> may perform processing based on, for example, quadrature amplitude modulation (QAM).</p><p id="p-0086" num="0085">It should be understood that the function of the first modulation unit <b>110</b> listed above is merely an example for description. This is not limited in this application. The first modulation unit <b>110</b> may also perform other processing for generating a time domain signal in the conventional technology, for example, shaping filter processing.</p><p id="p-0087" num="0086">2. Pre-Compensation Unit <b>120</b></p><p id="p-0088" num="0087">The pre-compensation unit <b>120</b> may include, for example, a digital pre-distorter (DPD), configured to perform pre-compensation processing, or pre-distortion (Digital Pre-Distortion) processing on the electrical signal #A.</p><p id="p-0089" num="0088">A principle of pre-distortion is that a pre-distortion element such as the DPD is cascaded with a power amplifier element (the power amplifier element may be an element in the second modulation unit <b>140</b> described above). A non-linear distortion function is embedded into a digital baseband signal processing domain. Distortion of the non-linear distortion function is comparable (&#x201c;equal&#x201d;) to distortion presented by an amplifier, but the non-linear distortion function is opposite to the distortion function of the amplifier. The combination of these two non-linear distortion functions can implement a highly linear system with less distortion. A challenge of a digital pre-distortion technology is that a distortion (that is, non-linearity) characteristic of the power amplifier element changes with time, temperature, and bias voltage, and varies from device to device. Therefore, although it is possible to determine a characteristic and design a correct pre-distortion algorithm for a device, it is not economically feasible to do so for each device. To correct the foregoing deviation, a parameter used by a pre-distortion algorithm may be updated (or corrected) in this application, and the process is subsequently described in detail with reference to the following description of a signal pre-compensation method <b>200</b>.</p><p id="p-0090" num="0089">It should be understood that the function and processing process of the pre-compensation unit <b>120</b> listed above are merely examples for description. This is not limited in this application. Various processes in which the pre-compensation unit <b>120</b> performs the pre-compensation processing based on a pre-compensation parameter in the conventional technology all fall within a protection scope of this application.</p><p id="p-0091" num="0090">3. Digital-to-Analog Conversion Unit <b>130</b></p><p id="p-0092" num="0091">The digital-to-analog conversion unit <b>130</b> is configured to perform digital-to-analog conversion on the electrical signal #A. This process may be similar to that in the conventional technology. To avoid repetition, detailed description thereof is omitted.</p><p id="p-0093" num="0092">4. Second Modulation Unit <b>140</b></p><p id="p-0094" num="0093">The second modulation unit <b>140</b> is configured to modulate a signal output from the digital-to-analog conversion unit <b>130</b> to generate an optical signal (that is, an example of a first optical signal, which is denoted as an optical signal #A below for ease of understanding and differentiation) to be sent to the receiving device.</p><p id="p-0095" num="0094">As an example rather than a limitation, the modulation may be coherent modulation. The coherent modulation is a modulation technology in which a to-be-transmitted signal is used to change a frequency, a phase, and an amplitude of a coherent optical carrier.</p><p id="p-0096" num="0095">For example, the second modulation unit <b>140</b> may include a Mach-Zehnder modulator (MZM). The MZM is two optical tributaries that divide input light into two equal signals, which separately enter a modulator. Materials used for the two optical tributaries are electro-optic materials whose refractive index changes with a magnitude of an externally applied electrical signal. Because a change of the refractive index of the optical tributary causes a change of a signal phase, when signals of the two tributaries are combined again at the output end of the modulator, a combined optical signal is an interference signal with varying intensities, and this is equivalent to converting a change of the electrical signal into a change of the optical signal, thereby implementing modulation of optical intensity. In short, the modulator may implement modulation of different sidebands by controlling a bias voltage of the modulator.</p><p id="p-0097" num="0096">It should be understood that the function of the second modulation unit <b>140</b> listed above is merely an example for description. This is not limited in this application. The second modulation unit <b>140</b> may also perform other processing for generating an optical signal in the conventional technology.</p><p id="p-0098" num="0097">5. Demodulation Unit <b>150</b></p><p id="p-0099" num="0098">The demodulation unit <b>150</b> is configured to demodulate the foregoing optical signal #A.</p><p id="p-0100" num="0099">As an example rather than a limitation, the demodulation may be coherent demodulation. The coherent demodulation, also referred to as synchronous detection, is applicable to demodulation of all linearly modulated signals. A key to implementing the coherent demodulation is that a receive end needs to restore a coherent carrier that is strictly synchronized with a modulated carrier.</p><p id="p-0101" num="0100">The coherent demodulation means inputting, by using a multiplier, a reference signal coherent with (in the same frequency and phase as) a carrier to be multiplied by the carrier.</p><p id="p-0102" num="0101">For example, after an original signal K is modulated with a carrier cos(&#x3c9;t+&#x3b8;), a signal Kcos(&#x3c9;t+&#x3b8;) is obtained.</p><p id="p-0103" num="0102">When a coherent (co-frequency and co-phase) reference signal cos(&#x3c9;t+&#x3b8;) is introduced during demodulation, it can be learned that:</p><p id="p-0104" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>K </i>cos(&#x3c9;<i>t</i>+&#x3b8;)cos(&#x3c9;<i>t</i>+&#x3b8;)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0105" num="0103">By using a product to sum formula, it can be learned that</p><p id="p-0106" num="0000"><maths id="MATH-US-00001" num="00001"><math overflow="scroll"> <mrow>  <mrow>   <mi>K</mi>   <mo>*</mo>   <mn>1</mn>   <mo>/</mo>   <mn>2</mn>   <mo>*</mo>   <mrow>    <mo>[</mo>    <mrow>     <mrow>      <mi>cos</mi>      <mo>&#x2061;</mo>      <mo>(</mo>      <mrow>       <mrow>        <mi>&#x3c9;</mi>        <mo>&#x2062;</mo>        <mi>t</mi>       </mrow>       <mo>+</mo>       <mi>&#x3b8;</mi>       <mo>+</mo>       <mrow>        <mi>&#x3c9;</mi>        <mo>&#x2062;</mo>        <mi>t</mi>       </mrow>       <mo>+</mo>       <mi>&#x3b8;</mi>      </mrow>      <mo>)</mo>     </mrow>     <mo>+</mo>     <mrow>      <mi>cos</mi>      <mo>&#x2061;</mo>      <mo>(</mo>      <mrow>       <mrow>        <mi>&#x3c9;</mi>        <mo>&#x2062;</mo>        <mi>t</mi>       </mrow>       <mo>+</mo>       <mi>&#x3b8;</mi>       <mo>-</mo>       <mrow>        <mi>&#x3c9;</mi>        <mo>&#x2062;</mo>        <mi>t</mi>       </mrow>       <mo>-</mo>       <mi>&#x3b8;</mi>      </mrow>      <mo>)</mo>     </mrow>    </mrow>    <mo>]</mo>   </mrow>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mi>K</mi>    <mo>*</mo>    <mn>1</mn>    <mo>/</mo>    <mn>2</mn>    <mo>*</mo>    <mrow>     <mo>[</mo>     <mrow>      <mrow>       <mi>cos</mi>       <mo>&#x2061;</mo>       <mo>(</mo>       <mrow>        <mrow>         <mn>2</mn>         <mo>&#x2062;</mo>         <mi>&#x3c9;</mi>         <mo>&#x2062;</mo>         <mi>t</mi>        </mrow>        <mo>+</mo>        <mrow>         <mn>2</mn>         <mo>&#x2062;</mo>         <mi>&#x3b8;</mi>        </mrow>       </mrow>       <mo>)</mo>      </mrow>      <mo>+</mo>      <mrow>       <mi>cos</mi>       <mo>&#x2061;</mo>       <mo>(</mo>       <mn>0</mn>       <mo>)</mo>      </mrow>     </mrow>     <mo>]</mo>    </mrow>   </mrow>   <mo>=</mo>   <mrow>    <mrow>     <mi>K</mi>     <mo>/</mo>     <mn>2</mn>     <mo>*</mo>     <mrow>      <mo>[</mo>      <mrow>       <mrow>        <mi>cos</mi>        <mo>&#x2061;</mo>        <mo>(</mo>        <mrow>         <mrow>          <mn>2</mn>          <mo>&#x2062;</mo>          <mi>&#x3c9;</mi>          <mo>&#x2062;</mo>          <mi>t</mi>         </mrow>         <mo>+</mo>         <mrow>          <mn>2</mn>          <mo>&#x2062;</mo>          <mi>&#x3b8;</mi>         </mrow>        </mrow>        <mo>)</mo>       </mrow>       <mo>+</mo>       <mn>1</mn>      </mrow>      <mo>]</mo>     </mrow>    </mrow>    <mo>=</mo>    <mrow>     <mrow>      <mi>K</mi>      <mo>/</mo>      <mn>2</mn>     </mrow>     <mo>+</mo>     <mrow>      <mi>K</mi>      <mo>/</mo>      <mn>2</mn>      <mo>&#x2062;</mo>      <mrow>       <mi>cos</mi>       <mo>&#x2061;</mo>       <mo>(</mo>       <mrow>        <mrow>         <mn>2</mn>         <mo>&#x2062;</mo>         <mi>&#x3c9;</mi>         <mo>&#x2062;</mo>         <mi>t</mi>        </mrow>        <mo>+</mo>        <mrow>         <mn>2</mn>         <mo>&#x2062;</mo>         <mi>&#x3b8;</mi>        </mrow>       </mrow>       <mo>)</mo>      </mrow>     </mrow>    </mrow>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0107" num="0104">A high-frequency signal cos(&#x3c9;t+&#x3b8;) is filtered out by using a low-pass filter, to obtain the original signal K.</p><p id="p-0108" num="0105">As shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, in this application, the demodulation unit <b>150</b> may include an integrated coherent receiver (ICR) and a local oscillator (LO).</p><p id="p-0109" num="0106">The local oscillator may also be referred to as a local oscillator source, and is configured to generate a local oscillator signal (that is, the foregoing reference signal).</p><p id="p-0110" num="0107">The ICR is configured to: combine the local oscillator signal with a to-be-demodulated optical signal and then perform optical-to-electrical conversion on the combination of the local oscillator signal and the to-be-demodulated optical signal in two differential photodetectors. Output of the local oscillator has polarization-multiplexed orthogonal polarization components with different optical frequencies.</p><p id="p-0111" num="0108">In this application, a frequency bandwidth of an optical signal demodulated by the ICR may be less than or equal to a frequency bandwidth of the foregoing optical signal #A. In other words, a part of the frequency band of the optical signal #A may be demodulated in the demodulation process of the ICR.</p><p id="p-0112" num="0109">In this application, the frequency band of the optical signal #A may be divided into a plurality of frequency subbands and the ICR may demodulate a signal on one frequency subband.</p><p id="p-0113" num="0110">Division of the plurality of frequency subbands may be performed by the pre-compensation parameter updating unit <b>170</b>, or may be performed by another software module, such as a frequency band division module. For example, the pre-compensation parameter updating unit <b>170</b> may determine a quantity of frequency subbands, a size of each frequency subband, or the like.</p><p id="p-0114" num="0111">Alternatively, a division manner of the plurality of frequency subbands may be specified by a communications system or a communications protocol. This is not particularly limited in this application.</p><p id="p-0115" num="0112">It should be noted that the sizes (or bandwidths) of any two frequency subbands in the plurality of frequency subbands may be the same. Alternatively, the plurality of frequency subbands may include at least two frequency subbands with different sizes. This is not particularly limited in this application.</p><p id="p-0116" num="0113">Assuming that a bandwidth of each frequency subband is X, and assuming that a bandwidth of the optical signal demodulated by the ICR is Y, Y is greater than or equal to X.</p><p id="p-0117" num="0114">For example, when an optical signal on a frequency subband #A is demodulated, the LO may generate a local oscillator signal whose center frequency is the same as or close to a center frequency of the frequency subband #A (that is, a center frequency deviation is within a preset range).</p><p id="p-0118" num="0115">In addition, because the bandwidth demodulated by the ICR is greater than or equal to a width of the frequency subband #A, the ICR can complete demodulation of the optical signal on the frequency subband #A based on the local oscillator signal.</p><p id="p-0119" num="0116">As an example rather than a limitation, in this application, when Y is greater than X, the demodulation unit <b>150</b> may further include a filter, to perform filtering processing on a demodulated signal, so that a frequency bandwidth of a signal after filtering processing is the same as or close to X.</p><p id="p-0120" num="0117">In this application, the pre-compensation parameter updating unit <b>170</b> may send, to the demodulation unit <b>150</b>, information (for example, a center frequency of a target frequency subband or a sequence number or an identifier of a target frequency subband in the plurality of frequency subbands) about a frequency subband (that is, the target frequency subband) that needs to be demodulated in the plurality of frequency subbands. In this way, the demodulation unit <b>150</b> may demodulate an optical signal in the target frequency subband according to an indication of the pre-compensation parameter updating unit <b>170</b>.</p><p id="p-0121" num="0118">There may be one or more target frequency subbands. This is not particularly limited in this application.</p><p id="p-0122" num="0119">In addition, the target frequency subband (for example, a quantity and a position of the target frequency subband) may be determined by the pre-compensation parameter updating unit <b>170</b>, may be executed by another software module, such as a frequency band selection module, or may be specified by the communications system or the communications protocol. This is not particularly limited in this application.</p><p id="p-0123" num="0120">In addition, when there are a plurality of target frequency subbands, the plurality of target frequency subbands may be selected from the plurality of frequency subbands at equal intervals. As an example rather than a limitation, the interval may include but is not limited to one frequency subband.</p><p id="p-0124" num="0121">For example, as shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, assuming that the plurality of frequency subbands are marked with sequence numbers in ascending order of frequencies, the target frequency subbands may be frequency subbands whose sequence numbers are 1, 3, 5, 7, 9, . . . .</p><p id="p-0125" num="0122">For ease of understanding, an electrical signal obtained after demodulating a signal on the frequency subband #A (that is, an example of the target frequency subband) is denoted as an electrical signal #B, and a process of processing the electrical signal #B is used as an example for description below.</p><p id="p-0126" num="0123">6. Analog-to-Digital Conversion Unit <b>160</b></p><p id="p-0127" num="0124">The analog-to-digital conversion unit <b>160</b> is configured to perform analog-to-digital conversion on the electrical signal #B to obtain an electrical signal #B&#x2032;. This process may be similar to that in the conventional technology. To avoid repetition, detailed description thereof is omitted.</p><p id="p-0128" num="0125">7. Pre-Compensation Parameter Updating Unit <b>170</b></p><p id="p-0129" num="0126">As shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the pre-compensation parameter updating unit <b>170</b> in this application may include a calculation unit and a selection unit.</p><p id="p-0130" num="0127">The selection unit of the pre-compensation parameter updating unit <b>170</b> is configured to: divide the frequency band of the optical signal #A into a plurality of frequency subbands, and select at least one target frequency subband from the plurality of frequency subbands. This process is similar to the frequency subband division process described in the demodulation process of the demodulation unit <b>150</b> described above. To avoid repetition, detailed description thereof is omitted herein.</p><p id="p-0131" num="0128">In addition, the selection unit of the pre-compensation parameter updating unit <b>170</b> may send information about each target frequency subband, for example, a center frequency of the target frequency subband or a sequence number of the target frequency subband, to the demodulation unit <b>150</b> (specifically, to the LO of the demodulation unit <b>150</b>) through the second output port.</p><p id="p-0132" num="0129">The calculation unit of the pre-compensation parameter updating unit <b>170</b> is configured to: obtain an electrical signal corresponding to each target frequency subband from the analog-to-digital conversion unit <b>160</b> through the second input port, obtain the electrical signal from the first modulation unit <b>110</b> through the first input port, and further update a pre-compensation parameter used by the pre-compensation module <b>120</b>.</p><p id="p-0133" num="0130">For ease of understanding, a process of updating an electrical signal corresponding to the frequency subband #A (that is, an example of the target frequency subband) is used as an example for description below.</p><p id="p-0134" num="0131">The calculation unit of the pre-compensation parameter updating unit <b>170</b> is configured to determine a symbol subsequence #C from the electrical signal #A (specifically, from a symbol sequence of the electrical signal #A) based on the frequency subband #A (that is, an example of the target frequency subband). If the electrical signal #A is converted from the time domain signal to a frequency domain signal (denoted as a frequency domain signal #D), assuming that a position of a frequency domain signal corresponding to the symbol subsequence #C in a frequency band of the frequency domain signal #D is a position #1 and assuming that a frequency domain position of the frequency subband #A in the frequency band of the optical signal #A is a position #2, a deviation (for example, a center frequency deviation) between the position #1 and the position #2 falls within a preset range.</p><p id="p-0135" num="0132">Then, the calculation unit of the pre-compensation parameter updating unit <b>170</b> may determine a deviation value (or a magnitude of deviation) between the symbol subsequence #C and a symbol sequence of the electrical signal #B&#x2032;, and the deviation value is denoted as a deviation value #A.</p><p id="p-0136" num="0133">Further, the calculation unit of the pre-compensation parameter updating unit <b>170</b> may update (or calibrate), based on the deviation value #A, the pre-compensation parameter used by the pre-compensation unit <b>120</b>.</p><p id="p-0137" num="0134">As an example rather than a limitation, as described above, there may be a plurality of target frequency subbands. In this case, the calculation unit of the pre-compensation parameter updating unit <b>170</b> may obtain a deviation corresponding to each target frequency subband based on a process similar to the foregoing process of processing the frequency subband #A. Deviations corresponding to the plurality of target frequency subbands may be concurrently computed, or may be computed for a plurality of times.</p><p id="p-0138" num="0135">For example, in the case of computation for a plurality of times, each time of computation corresponds to one time period, and each computation process corresponds to a process of processing one target frequency subband. The pre-compensation parameter updating unit <b>170</b> sends information about one target frequency subband to the demodulation unit <b>150</b> in one computation process (or in one time period), so as to obtain an electrical signal subject to demodulation and analog-to-digital conversion processing on the target frequency subband from the analog-to-digital conversion unit <b>160</b>. In addition, in the same computation process (or in the same time period), the pre-compensation parameter updating unit <b>170</b> determines a symbol sequence corresponding to the target frequency subband from the electrical signal from the first modulation unit <b>110</b> based on a target frequency subband processed in the time period, and further determine a deviation value corresponding to the target frequency subband.</p><p id="p-0139" num="0136">For example, in the case of concurrent computation, the pre-compensation parameter updating unit <b>170</b> obtains a plurality of electrical signals from the analog-to-digital conversion unit <b>160</b>, and the demodulation unit <b>150</b> may send a correspondence between the plurality of electrical signals and the plurality of target frequency subbands to the pre-compensation parameter updating unit <b>170</b>. For example, the plurality of electrical signals may be numbered (or sorted) based on a transmission sequence, and information about a target frequency subband corresponding to each electrical signal (for example, an identifier of the target frequency subband or a sequence number of the target frequency subband in the plurality of frequency subbands of the optical signal) is sequentially sent based on a transmission sequence of the electrical signals. In this way, the pre-compensation parameter updating unit <b>170</b> can determine the target frequency subband corresponding to each electrical signal based on the foregoing correspondence, and further determine a symbol sequence corresponding to the target frequency subband in the electrical signal from the first modulation unit <b>110</b> based on the target frequency subband corresponding to each electrical signal, thereby determining the deviation value corresponding to the target frequency subband.</p><p id="p-0140" num="0137">In this application, the pre-compensation parameter updating unit <b>170</b> may update the pre-compensation parameter based on an average (for example, an arithmetic mean or a weighted mean) of the foregoing deviation values.</p><p id="p-0141" num="0138">In addition, when the pre-compensation parameter is updated by using the weighted mean of the deviation values, a weight of each deviation may be determined based on a position of a target frequency subband corresponding to the deviation value.</p><p id="p-0142" num="0139">For example, a weight of the deviation value #A may be determined by the position #2.</p><p id="p-0143" num="0140">A correspondence between a weight of each deviation value and a position of the frequency subband may be determined based on an actual requirement or a manner such as an experiment. This is not particularly limited in this application.</p><p id="p-0144" num="0141"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a schematic flowchart of a process performed by the pre-compensation parameter updating unit <b>170</b>. As shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, in S<b>210</b>, the pre-compensation parameter updating unit <b>170</b> may (for example, through transmission by using an internal bus or the like) send an instruction #1 to the demodulation unit <b>150</b> (for example, the LO of the demodulation unit <b>150</b>), where the instruction #1 instructs the demodulation unit <b>150</b> to demodulate a part of the optical signal #A carried on the frequency subband #A.</p><p id="p-0145" num="0142">In S<b>220</b>, the pre-compensation parameter updating unit <b>170</b> obtains the foregoing signal #B&#x2032; from the analog-to-digital conversion unit <b>160</b>.</p><p id="p-0146" num="0143">In S<b>230</b>, the pre-compensation parameter updating unit <b>170</b> obtains the electrical signal #A from the first modulation unit <b>110</b>.</p><p id="p-0147" num="0144">In S<b>240</b>, the pre-compensation parameter updating unit <b>170</b> may obtain the foregoing symbol subsequence #C from the electrical signal #A based on the frequency subband #A (for example, a width and a position of the frequency subband #A).</p><p id="p-0148" num="0145">In S<b>250</b>, the pre-compensation parameter updating unit <b>170</b> may determine the deviation value between the symbol subsequence #C and a symbol sequence corresponding to the foregoing signal #B&#x2032;, that is, a deviation value corresponding to the frequency subband #A.</p><p id="p-0149" num="0146">Based on a similar process, the pre-compensation parameter updating unit <b>170</b> may determine a deviation value corresponding to each target frequency subband.</p><p id="p-0150" num="0147">In S<b>260</b>, the pre-compensation parameter updating unit <b>170</b> may update the pre-compensation parameter used by the pre-compensation unit <b>120</b>, based on the deviation value (for example, the average of the deviation values) corresponding to each target frequency subband.</p><p id="p-0151" num="0148">According to the solutions provided in this application, an optical signal sending device pre-compensates and modulates the second electrical signal to obtain a to-be-sent first optical signal, and demodulates the first optical signal to obtain a first electrical signal, so that the pre-compensation parameter used for pre-compensation can be updated based on the first electrical signal and the second electrical signal. To be specific, according to the method provided in this application, updating of the pre-compensation parameter does not need to depend on feedback information from an optical signal receiving device, thereby reducing system configuration costs generated by configuring a feedback channel, shortening a delay of updating the pre-compensation parameter, improving accuracy of pre-compensation processing, and further improving communication performance.</p><p id="p-0152" num="0149">In addition, according to the solutions provided in this application, demodulation of the first optical signal is demodulation of a part of the first optical signal carried on the target frequency subband, thereby lowering a requirement for the bandwidth of the demodulation device, making it easy to implement demodulation processing, and reducing the costs of the optical signal sending device. Therefore, the practicality of this application is further improved.</p><p id="p-0153" num="0150">It should be understood that, in the foregoing description, the solution for dividing a frequency band of the optical signal is listed. However, this is not limited in this application. When performance of a decoding unit can support demodulation of an entire bandwidth of the optical signal, the frequency band of the optical signal may not be divided.</p><p id="p-0154" num="0151"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a schematic block diagram of a signal pre-compensation apparatus <b>300</b> according to an embodiment of this application. The apparatus <b>300</b> includes a determining unit <b>310</b>, a demodulation unit <b>320</b>, and a processing unit <b>330</b>.</p><p id="p-0155" num="0152">The determining unit <b>310</b> is configured to determine at least one target frequency subband from a plurality of frequency subbands, where the plurality of frequency subbands are frequency subbands in a frequency band of a first optical signal generated by the optical signal sending device.</p><p id="p-0156" num="0153">The demodulation unit <b>320</b> is configured to: demodulate an optical signal of the at least one target frequency subband in the first optical signal based on the at least one target frequency subband, and obtain a first electrical signal after demodulation.</p><p id="p-0157" num="0154">The processing unit <b>330</b> is configured to update a pre-compensation parameter based on the at least one target frequency subband, the first electrical signal, and a second electrical signal, where the pre-compensation parameter is used to perform signal pre-compensation on the second electrical signal, and the first optical signal is generated after the pre-compensation is performed on the second electrical signal.</p><p id="p-0158" num="0155">Optionally, the demodulation unit is configured to generate at least one local oscillator signal based on the at least one target frequency subband, where the at least one target frequency subband is in a one-to-one correspondence with the at least one local oscillator signal, and a deviation between a center frequency of each local oscillator signal and a center frequency of a corresponding target frequency subband falls within a first preset range, and is configured to demodulate the first optical signal based on the at least one local oscillator signal and a first demodulation bandwidth, where the first demodulation bandwidth is greater than or equal to a frequency bandwidth of the target frequency subband.</p><p id="p-0159" num="0156">Optionally, the at least one target frequency subband is a plurality of target frequency subbands, the plurality of target frequency subbands are in a one-to-one correspondence with a plurality of first electrical signals, and each first electrical signal is obtained after an optical signal of a corresponding target frequency subband is demodulated.</p><p id="p-0160" num="0157">Optionally, the processing unit is configured to determine a first symbol subsequence from a symbol sequence of the second electrical signal based on the target frequency subband, where a deviation between the first position and the second position falls within a second preset range, the first position is a position of the first symbol subsequence in the symbol sequence of the second electrical signal, and the second position is determined based on a position of the target frequency subband in the plurality of frequency subbands, and is configured to update the pre-compensation parameter based on the difference between the symbol sequence of the first electrical signal and the first symbol subsequence.</p><p id="p-0161" num="0158">Optionally, the processing unit is configured to determine a first weight based on the frequency band position of the target frequency subband in the plurality of frequency subbands, and is configured to update the pre-compensation parameter based on the first weight and the difference between the symbol sequence of the first electrical signal and the first symbol subsequence.</p><p id="p-0162" num="0159">Optionally, the plurality of frequency subbands have the same frequency bandwidth.</p><p id="p-0163" num="0160">Optionally, the at least one target frequency subband is a plurality of target frequency subbands, and the plurality of target frequency subbands are selected from the plurality of frequency subbands at an equal frequency band interval.</p><p id="p-0164" num="0161">Optionally, the frequency band interval is one frequency subband.</p><p id="p-0165" num="0162">The determining unit <b>310</b> is configured to perform related processes of frequency subband division and target frequency subband selection and indication that are performed by the pre-compensation parameter updating unit <b>170</b> (for example, an action performed by a selection unit of the pre-compensation parameter updating unit <b>170</b>). To avoid repetition, detailed description thereof is omitted herein.</p><p id="p-0166" num="0163">The demodulation unit <b>320</b> is configured to perform a related process of optical signal demodulation performed by the demodulation unit <b>150</b>. To avoid repetition, detailed description thereof is omitted herein.</p><p id="p-0167" num="0164">The processing unit <b>330</b> is configured to perform a related process of calculating the deviation value and updating the pre-compensation parameter based on the deviation value (for example, an action performed by a calculation unit of the pre-compensation parameter updating unit <b>170</b>). To avoid repetition, detailed description thereof is omitted herein.</p><p id="p-0168" num="0165">As shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, an embodiment of this application further provides a communications apparatus <b>400</b>. The communications apparatus <b>400</b> includes a processor <b>410</b>. The processor <b>410</b> is coupled to a memory <b>420</b>. The memory <b>420</b> is configured to store a computer program or instructions and/or data. The processor <b>410</b> is configured to execute the computer program or instructions and/or data stored in the memory <b>420</b>, so that the method in the foregoing method embodiment is performed.</p><p id="p-0169" num="0166">Optionally, the communications apparatus <b>400</b> includes one or more processors <b>410</b>.</p><p id="p-0170" num="0167">Optionally, as shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, the communications apparatus <b>400</b> may further include a memory <b>420</b>.</p><p id="p-0171" num="0168">Optionally, the communications apparatus <b>400</b> may include one or more memories <b>420</b>.</p><p id="p-0172" num="0169">Optionally, the memory <b>420</b> may be integrated with or disposed separately from the processor <b>410</b>.</p><p id="p-0173" num="0170">Optionally, as shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, the wireless communications apparatus <b>400</b> may further include a transceiver <b>430</b>, and the transceiver <b>430</b> is configured to receive and/or send a signal. For example, the processor <b>410</b> is configured to control the transceiver <b>430</b> to receive and/or send a signal.</p><p id="p-0174" num="0171">In a solution, the communications apparatus <b>400</b> is configured to implement operations performed by units in a sending device in the foregoing method embodiment.</p><p id="p-0175" num="0172">For example, the processor <b>410</b> is configured to implement an operation related to the processing performed by the pre-compensation parameter updating unit <b>170</b> in the foregoing method embodiment.</p><p id="p-0176" num="0173">An embodiment of this application further provides a computer-readable storage medium. The computer-readable storage medium stores computer instructions that are used to implement the method performed by the sending device (for example, the pre-compensation parameter updating unit <b>170</b>) in the foregoing method embodiment.</p><p id="p-0177" num="0174">An embodiment of this application further provides a computer program product. When the computer program product is executed by a computer, the computer is enabled to implement the method performed by the sending device (for example, the pre-compensation parameter updating unit <b>170</b>) in the foregoing method embodiment.</p><p id="p-0178" num="0175">An embodiment of this application further provides a communications system. The communications system includes the sending device in the foregoing embodiments.</p><p id="p-0179" num="0176">In an example, the communications system includes the sending device and the receiving device in the foregoing embodiments.</p><p id="p-0180" num="0177">For explanations and beneficial effects of related content of any wireless communications apparatus provided above, refer to a corresponding method embodiment provided above. Details are not described herein again.</p><p id="p-0181" num="0178">In some embodiments of this application, the communications device may include a hardware layer, an operating system layer running above the hardware layer, and an application layer running above the operating system layer. The hardware layer may include hardware such as a central processing unit (CPU), a memory management unit (MMU), and a memory (which is also referred to as a main memory). An operating system of the operating system layer may be any one or more of computer operating systems implementing service processing by using a process, for example, a Linux operating system, a Unix operating system, an Android operating system, an iOS operating system, or a Windows operating system. The application layer may include applications such as a browser, an address book, word processing software, and instant messaging software.</p><p id="p-0182" num="0179">A specific structure of an execution body of the method provided in embodiments of this application is not specifically limited in embodiments of this application, provided that a program that records code of the method provided in embodiments of this application can be run to perform communication according to the method provided in embodiments of this application. For example, the execution body of the method provided in this embodiment of this application may be a terminal device or a satellite, or may be a functional module that is in the terminal device or the satellite and that can invoke and execute the program.</p><p id="p-0183" num="0180">Aspects or features in embodiments of this application may be implemented as a method, an apparatus, or a product that uses standard programming and/or engineering technologies. The term &#x201c;product&#x201d; used in this specification may cover a computer program that can be accessed from any computer-readable device, carrier, or medium. For example, a computer-readable medium may include but is not limited to: a magnetic storage device (for example, a hard disk, a floppy disk, or a magnetic tape), an optical disc (for example, a compact disc (CD) or a digital versatile disc (DVD)), a smart card, and a flash memory component (for example, an erasable programmable read-only memory (EPROM), a card, a stick, or a key drive).</p><p id="p-0184" num="0181">Various storage media described in this specification may represent one or more devices and/or other machine-readable media that are configured to store information. The term &#x201c;machine-readable media&#x201d; may include but is not limited to a radio channel and various other media that can store, include, and/or carry instructions and/or data.</p><p id="p-0185" num="0182">It should be understood that the processor mentioned in embodiments of this application may be a central processing unit (CPU), or the processor may be another general-purpose processor, a digital signal processor (DSP), an application-specific integrated circuit (ASIC), a field programmable gate array (FPGA), another programmable logic device, a discrete gate or transistor logic device, a discrete hardware component, or the like. The general-purpose processor may be a microprocessor, or the processor may be any conventional processor, or the like.</p><p id="p-0186" num="0183">It should further be understood that the memory in embodiments of this application may be a volatile memory or a nonvolatile memory, or may include a volatile memory and a nonvolatile memory. The nonvolatile memory may be a read-only memory (ROM), a programmable read-only memory (programmable ROM, PROM), an erasable programmable read-only memory (erasable PROM, EPROM), an electrically erasable programmable read-only memory (electrically EPROM, EEPROM), or a flash memory. The volatile memory may be a random access memory (RAM). For example, the RAM may be used as an external cache. As an example rather than a limitation, the RAM may include a plurality of the following forms: a static random access memory (static RAM, SRAM), a dynamic random access memory (dynamic RAM, DRAM), a synchronous dynamic random access memory (synchronous DRAM, SDRAM), a double data rate synchronous dynamic random access memory (double data rate SDRAM, DDR SDRAM), an enhanced synchronous dynamic random access memory (enhanced SDRAM, ESDRAM), a synchlink dynamic random access memory (synchlink DRAM, SLDRAM), and a direct rambus random access memory (direct rambus RAM, DR RAM).</p><p id="p-0187" num="0184">It should be noted that when the processor is a general-purpose processor, a DSP, an ASIC, an FPGA, another programmable logic device, a discrete gate or a transistor logic device, or a discrete hardware component, the memory (storage module) may be integrated into the processor.</p><p id="p-0188" num="0185">It should be further noted that the memories described in this specification are intended to include but are not limited to these memories and any memory of another proper type.</p><p id="p-0189" num="0186">A person of ordinary skill in the art may be aware that, in combination with the examples described in embodiments disclosed in this specification, units and algorithm steps may be implemented by electronic hardware or a combination of computer software and electronic hardware. Whether the functions are performed by hardware or software depends on particular applications and design constraint conditions of the technical solutions. A person skilled in the art may use different methods to implement the described functions for each particular application, but it should not be considered that the implementation goes beyond the scope of embodiments of this application.</p><p id="p-0190" num="0187">It may be clearly understood by a person skilled in the art that, for convenience and brevity of description, for a specific working process of the foregoing system, apparatus, and unit, refer to a corresponding process in the method embodiment. Details are not described herein again.</p><p id="p-0191" num="0188">In several embodiments provided in embodiments of this application, it should be understood that the disclosed system, apparatus, and method may be implemented in another manner. For example, the described apparatus embodiments are merely examples. For example, the division into units is merely logical function division and may be other division during actual implementation. For example, a plurality of units or components may be combined or integrated into another apparatus, or some features may be ignored or not performed. In addition, the displayed or discussed mutual couplings or direct couplings or communication connections may be implemented through some interfaces. The indirect couplings or communication connections between the apparatuses or units may be implemented in electrical, mechanical, or another form.</p><p id="p-0192" num="0189">The units described as separate parts may or may not be physically separate, and parts displayed as units may or may not be physical units, may be located in one position, or may be distributed on a plurality of network units. Some or all of the units may be selected based on an actual requirement to achieve the objectives of the solutions in embodiments.</p><p id="p-0193" num="0190">In addition, functional units in embodiments of this application may be integrated into one processing unit, or each of the units may exist alone physically, or two or more units are integrated into one unit.</p><p id="p-0194" num="0191">When the functions are implemented in the form of a software functional unit and sold or used as an independent product, the functions may be stored in a computer-readable storage medium. Based on such an understanding, the technical solutions of embodiments of this application essentially, or the part contributing to the prior art, or a part of the technical solutions may be implemented in a form of a software product. The software product is stored in a storage medium and includes several instructions for instructing a computer device (which may be a personal computer, a server, or a network device) to perform all or some of the steps of the methods described in embodiments of this application. The foregoing storage medium includes any medium that can store program code, such as a USB flash drive, a removable hard disk, a read-only memory (ROM), a random access memory (RAM), a magnetic disk, or an optical disc.</p><p id="p-0195" num="0192">The foregoing descriptions are merely specific implementations of this application, but are not intended to limit the protection scope of this application. Any variation or replacement readily figured out by a person skilled in the art within the technical scope disclosed in embodiments of this application shall fall within the protection scope of this application. Therefore, the protection scope of this application shall be subject to the protection scope of the claims.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-math idrefs="MATH-US-00001" nb-file="US20230006743A1-20230105-M00001.NB"><img id="EMI-M00001" he="9.91mm" wi="76.20mm" file="US20230006743A1-20230105-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A signal pre-compensation method, wherein the method is applied to an optical signal sending device, and comprises:<claim-text>determining at least one target frequency subband from a plurality of frequency subbands, wherein the plurality of frequency subbands are frequency subbands in a frequency band of a first optical signal generated by the optical signal sending device;</claim-text><claim-text>demodulating an optical signal of the at least one target frequency subband in the first optical signal based on the at least one target frequency subband, and obtaining a first electrical signal after demodulation;</claim-text><claim-text>updating a pre-compensation parameter based on the at least one target frequency subband, the first electrical signal, and a second electrical signal, wherein the pre-compensation parameter is used to perform signal pre-compensation on the second electrical signal; and</claim-text><claim-text>generating the first optical signal after the pre-compensation is performed on the second electrical signal.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the demodulating an optical signal of the at least one target frequency subband in the first optical signal based on the at least one target frequency subband comprises:<claim-text>generating at least one local oscillator signal based on the at least one target frequency subband, wherein the at least one target frequency subband is in a one-to-one correspondence with the at least one local oscillator signal, and a deviation between a center frequency of each local oscillator signal and a center frequency of a corresponding target frequency subband falls within a first preset range; and</claim-text><claim-text>demodulating the first optical signal based on the at least one local oscillator signal and a first demodulation bandwidth, wherein the first demodulation bandwidth is greater than or equal to a frequency bandwidth of the at least one target frequency subband.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one target frequency subband comprises a plurality of target frequency subbands, the plurality of target frequency subbands are in a one-to-one correspondence with a plurality of first electrical signals, and each first electrical signal is obtained after an optical signal of a corresponding target frequency subband is demodulated.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the updating a pre-compensation parameter based on the at least one target frequency subband, the first electrical signal, and a second electrical signal comprises:<claim-text>determining a first symbol subsequence from a symbol sequence of the second electrical signal based on the at least one target frequency subband, wherein a position of the first symbol subsequence in the symbol sequence of the second electrical signal is a first position, a position of the at least one target frequency subband in the plurality of frequency subbands is a second position, and a deviation between the first position and the second position falls within a second preset range; and</claim-text><claim-text>updating the pre-compensation parameter based on a difference between a symbol sequence of the first electrical signal and the first symbol subsequence.</claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the updating the pre-compensation parameter based on a difference between a symbol sequence of the first electrical signal and the first symbol subsequence comprises:<claim-text>determining a first weight based on the frequency band position of the at least one target frequency subband in the plurality of frequency subbands; and</claim-text><claim-text>updating the pre-compensation parameter based on the first weight and the difference between the symbol sequence of the first electrical signal and the first symbol subsequence.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the plurality of frequency subbands have a same frequency bandwidth.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one target frequency subband comprises a plurality of target frequency subbands, and the plurality of target frequency subbands are selected from the plurality of frequency subbands at an equal frequency band interval.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The method according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the frequency band interval is one frequency subband.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. A signal pre-compensation apparatus, comprising: a computing hardware; and<claim-text>a computer-readable storage medium including computer-executable instructions executed by the computing hardware to perform operations comprising:</claim-text><claim-text>determining at least one target frequency subband from a plurality of frequency subbands, wherein the plurality of frequency subbands are frequency subbands in a frequency band of the optical signal sending device;</claim-text><claim-text>demodulating an optical signal of the at least one target frequency subband in the first optical signal based on the at least one target frequency subband, and obtain a first electrical signal after demodulation;</claim-text><claim-text>updating a pre-compensation parameter based on the at least one target frequency subband, the first electrical signal, and a second electrical signal, wherein the pre-compensation parameter is used to perform signal pre-compensation on the second electrical signal; and</claim-text><claim-text>generating the first optical signal after the pre-compensation is performed on the second electrical signal.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The apparatus according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the computing hardware is configured with computer-executable instructions to perform operations such that the demodulating an optical signal of the at least one target frequency subband in the first optical signal based on the at least one target frequency subband comprises:<claim-text>generating at least one local oscillator signal based on the at least one target frequency subband, wherein the at least one target frequency subband is in a one-to-one correspondence with the at least one local oscillator signal, and a deviation between a center frequency of each local oscillator signal and a center frequency of a corresponding target frequency subband falls within a first preset range; and</claim-text><claim-text>demodulating the first optical signal based on the at least one local oscillator signal and a first demodulation bandwidth, wherein the first demodulation bandwidth is greater than or equal to a frequency bandwidth of the at least one target frequency subband.</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The apparatus according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the at least one target frequency subband comprises a plurality of frequency subbands, the plurality of target frequency subbands are in a one-to-one correspondence with a plurality of first electrical signals, and each first electrical signal is obtained after an optical signal of a corresponding target frequency subband is demodulated.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The apparatus according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the updating a pre-compensation parameter based on the at least one target frequency subband, the first electrical signal, and a second electrical signal comprises:<claim-text>determining a first symbol subsequence from a symbol sequence of the second electrical signal based on the at least one target frequency subband, wherein a position of the first symbol subsequence in the symbol sequence of the second electrical signal is a first position, a position of the at least one target frequency subband in the plurality of frequency subbands is a second position, and a deviation between the first position and the second position falls within a second preset range; and</claim-text><claim-text>updating the pre-compensation parameter based on a difference between a symbol sequence of the first electrical signal and the first symbol subsequence.</claim-text></claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The apparatus according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the updating the pre-compensation parameter based on a difference between a symbol sequence of the first electrical signal and the first symbol subsequence comprises:<claim-text>determining a first weight based on the frequency band position of the at least one target frequency subband in the plurality of frequency subbands; and</claim-text><claim-text>updating the pre-compensation parameter based on the first weight and the difference between the symbol sequence of the first electrical signal and the first symbol subsequence.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The apparatus according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the plurality of frequency subbands have a same frequency bandwidth.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The apparatus according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the at least one target frequency subband comprises a plurality of target frequency subbands, and the plurality of target frequency subbands are selected from the plurality of frequency subbands at an equal frequency band interval.</claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The apparatus according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the frequency band interval is one frequency subband.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The apparatus according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the signal pre-compensation apparatus is a chip.</claim-text></claim></claims></us-patent-application>