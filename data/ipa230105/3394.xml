<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230003395A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230003395</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17943239</doc-number><date>20220913</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20220101</date></ipc-version-indicator><classification-level>A</classification-level><section>F</section><class>24</class><subclass>D</subclass><main-group>17</main-group><subgroup>00</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>F</section><class>24</class><subclass>H</subclass><main-group>4</main-group><subgroup>04</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>F</section><class>24</class><subclass>D</subclass><main-group>17</main-group><subgroup>0068</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>F</section><class>24</class><subclass>H</subclass><main-group>4</main-group><subgroup>04</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">HEATING SYSTEM</invention-title><us-related-documents><division><relation><parent-doc><document-id><country>US</country><doc-number>16596634</doc-number><date>20191008</date></document-id><parent-grant-document><document-id><country>US</country><doc-number>11473785</doc-number></document-id></parent-grant-document></parent-doc><child-doc><document-id><country>US</country><doc-number>17943239</doc-number></document-id></child-doc></relation></division></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Intellihot, Inc.</orgname><address><city>Galesburg</city><state>IL</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Deivasigamani</last-name><first-name>Sridhar</first-name><address><city>Peoria</city><state>IL</state><country>US</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Akasam</last-name><first-name>Sivaprasad</first-name><address><city>Dunlap</city><state>IL</state><country>US</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A system for heating a first fluid flow from a first temperature to a second temperature, the system including a hot water supply line for receiving the first fluid flow at a first end and exhausting the first fluid flow at a second end; and a heating system including a heat engine, a thermal battery and a heat exchanger, wherein the thermal battery is configured to be replenished at a point of heat transfer by the heat engine and the hot water supply line is configured to receive heat from the thermal battery via the heat exchanger to elevate the temperature of the first fluid flow from the first temperature to the second temperature.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="130.64mm" wi="158.33mm" file="US20230003395A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="230.04mm" wi="160.36mm" file="US20230003395A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="151.05mm" wi="159.43mm" file="US20230003395A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="149.61mm" wi="159.43mm" file="US20230003395A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="127.34mm" wi="127.76mm" file="US20230003395A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="228.26mm" wi="156.80mm" orientation="landscape" file="US20230003395A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">PRIORITY CLAIM AND RELATED APPLICATIONS</heading><p id="p-0002" num="0001">This divisional application claims the benefit of priority from non-provisional application U.S. Ser. No. 16/596,634 filed Oct. 8, 2019. Said application is incorporated by reference in its entirety.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading><p id="p-0003" num="0002">1. The Field of the Invention</p><p id="p-0004" num="0003">The present invention relates to a domestic water heating system. More specifically, the present invention is directed to a domestic water heating system free from the potential of Legionella proliferation and a domestic water heating system that is not directly powered by a fossil fuel.</p><p id="p-0005" num="0004">2. Background Art</p><p id="p-0006" num="0005">Various fossil fuel phase-out initiatives have been made in the heating industry and mandates have been increasingly devised and implemented to phase out the direct or indirect use of fossil fuel in heat production for domestic and/or industrial uses. Attempts have been made to heat domestic water with alternative means, e.g., with the use of heat pumps whose operations are primarily driven using electricity in the form of pump or compressor operations. Supplemental electric heating elements may also be employed to aid a fossil fuel-free domestic water heating systems in meeting heating demands. However, the need to meet heating demands have driven designers to return to tanked solutions which bring back the disadvantages associated with such solutions, one of disadvantages being the availability of stagnant domestic water that is disposed at suitable temperature for Legionella proliferation when hot water demands are small over extended periods. Two examples of tanked solutions are included below where in each domestic hot water is supplied directly from a tank:</p><p id="p-0007" num="0006">U.S. Pat. Pub. No. 20190128565 of Pugh et al. (hereinafter Pugh) discloses a heat pump water heater has a tank, a heat source, and a heat pump system. The heat pump system has a refrigerant path, at least a portion of which is in thermal communication with the water tank volume so that heat transfers from refrigerant to the water tank volume. A fan causes air to flow through a housing, and another portion of the refrigerant path includes an evaporator in the housing. The fan is within the housing and may further be within a second housing. The first housing may comprise a baffle to direct air flow. The fan may be a variable speed fan in communication with a controller, so that the controller controls the fan speed depending on a temperature of the refrigerant.</p><p id="p-0008" num="0007">U.S. Pat. Pub. No. 20100209084 of Nelson et al. (hereinafter Nelson) discloses a heat pump water heater and systems and methods for its control. The systems are configured to heat water within a water storage tank of a heat pump water heater wherein a controller within the system is operatively connected to a plurality of heat sources including at least one electric heating element and a heat pump and sensors in order to selectively energize one of the plurality of heat sources. The controller is configured to process data representative of the temperature of water within the tank near the top of the water storage tank, and rate of water flowing out of the water storage tank, in order to automatically selectively energize the heat sources. The selection of heat sources by the controller is determined by a mode of operation selected by the user and the data processed by the controller in view of the selected mode of operation.</p><p id="p-0009" num="0008">Each of Pugh and Nelson discloses the use of a large thermal storage tank that accommodates demands of hot water. As each of Pugh and Nelson's tanks holds a significant amount of water to anticipate demands, there is no guaranty that all portions of the heated water in the tank will exit the tank and be replaced with fresh cold or unheated water. If insufficiently used and the water held in the tank is not consumed or replaced over a long period of time, Legionella can proliferate and the next user/s can be exposed to a heightened level of Legionella risk.</p><p id="p-0010" num="0009">There exists a need for a thermal battery-equipped domestic water heating system that is free from Legionella risks plaguing tanked domestic water heating systems.</p><heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading><p id="p-0011" num="0010">In accordance with the present invention, there is provided a system for heating a first fluid flow from a first temperature to a second temperature, the system including:<ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0000">    <ul id="ul0002" list-style="none">        <li id="ul0002-0001" num="0011">(a) a hot water supply line for receiving the first fluid flow at a first end and exhausting the first fluid flow at a second end; and</li>        <li id="ul0002-0002" num="0012">(b) a heating system including:        <ul id="ul0003" list-style="none">            <li id="ul0003-0001" num="0013">(i) a heat engine;</li>            <li id="ul0003-0002" num="0014">(ii) a thermal battery; and</li>            <li id="ul0003-0003" num="0015">(iii) a heat exchanger,</li>        </ul>        </li>        <li id="ul0002-0003" num="0016">wherein the thermal battery is configured to be replenished at a point of heat transfer by the heat engine and the hot water supply line is configured to receive heat from the thermal battery via the heat exchanger to elevate the temperature of the first fluid flow from the first temperature to the second temperature.</li>    </ul>    </li></ul></p><p id="p-0012" num="0017">In one embodiment, the heat engine includes a heat pump. In another embodiment, the heat engine includes a solar thermal collector. In another embodiment, the heat engine includes an electrically-powered heater. In one embodiment, the heat exchanger includes a plate type heat exchanger. In one embodiment, the thermal battery includes a tank configured to receive a second fluid flow. In one embodiment, the second fluid flow is a water flow or a glycol flow. In one embodiment, the thermal battery further includes a closed loop fluid conductor for circulating the second fluid flow that is configured to cause transfer of heat from the thermal battery to the first fluid flow at a heat transfer rate via the heat exchanger and a variable speed pump interposed within the closed loop conductor wherein the variable speed pump is configured to effect heat transfer at the heat transfer rate based on a demand of the first fluid flow by varying the flowrate of the second fluid flow. In one embodiment, the point of heat transfer includes a coil thermally adapted to the tank. The heat engine includes a heat pump and the coil is configured to receive a third fluid flow from the heat pump for heating the second fluid flow. In one embodiment, the fluid flow includes an unheated fluid flow and a recirculation of at least a portion of the fluid flow. In one embodiment, the system further includes a second heat exchanger configured to cause heat transfer between the heat engine and the unheated fluid flow. In one embodiment, the second heat exchanger includes a plate type heat exchanger.</p><p id="p-0013" num="0018">In accordance with the present invention, there is further provided a system for heating a first fluid flow from a first temperature to a second temperature, the system including:<ul id="ul0004" list-style="none">    <li id="ul0004-0001" num="0000">    <ul id="ul0005" list-style="none">        <li id="ul0005-0001" num="0019">(a) a hot water supply line for receiving the first fluid flow at a first end and exhausting the first fluid flow at a second end;</li>        <li id="ul0005-0002" num="0020">(b) a heating system including:        <ul id="ul0006" list-style="none">            <li id="ul0006-0001" num="0021">(i) a heat engine; and</li>            <li id="ul0006-0002" num="0022">(ii) a thermal battery; and</li>        </ul>        </li>        <li id="ul0005-0003" num="0023">(c) a heat exchanger,</li>        <li id="ul0005-0004" num="0024">wherein the hot water supply line, the heat engine and the thermal battery are configured to be thermally coupled in the heat exchanger, the hot water supply line is configured to be receive heat from at least one of the heat engine and the thermal battery to elevate the temperature of the first fluid flow from the first temperature to the second temperature and the thermal battery is configured to be replenished by the heat engine.</li>    </ul>    </li></ul></p><p id="p-0014" num="0025">In accordance with the present invention, there is further provided a method for setting the setpoint temperature of a fluid stored in a thermal battery of a system for heating a first fluid flow from a first temperature to a second temperature, wherein the system further includes a hot water supply line for receiving the first fluid flow at a first end and exhausting the first fluid flow at a second end; a heating system including a heat engine; a heat exchanger; a flow meter configured for detecting a flowrate through the hot water supply line, a temperature sensor configured for sensing the temperature of the contents of the thermal battery, the thermal battery further includes a closed loop fluid conductor for circulating a second fluid flow that is configured to cause transfer of heat from the thermal battery to the first fluid flow at a heat transfer rate via the heat exchanger and a flow modifier interposed within the closed loop conductor wherein the flow modifier is configured to effect heat transfer at a heat transfer rate by varying the flowrate of the second fluid flow; and a controller operably connected to at least the flow meter, the temperature sensor and the flow modifier, wherein the thermal battery is configured to be replenished at a point of heat transfer by the heat engine and the hot water supply line is configured to receive heat from the thermal battery via the heat exchanger to elevate the temperature of the first fluid flow from the first temperature to the second temperature, the method including using the controller for:<ul id="ul0007" list-style="none">    <li id="ul0007-0001" num="0000">    <ul id="ul0008" list-style="none">        <li id="ul0008-0001" num="0026">(a) determining at least one event from flowrate data of the flow meter over a time period of a plurality of days, the event including a time span of a day in which the flowrate remains below or at a threshold value over the time span of a day within each day of the plurality of days;</li>        <li id="ul0008-0002" num="0027">(b) determining overlaps of each event to another one of the events of all days within the time period; and</li>        <li id="ul0008-0003" num="0028">(c) determining a frequency of the overlaps of each event over the time period and if the frequency exceeds a frequency threshold, executing a counteraction pair including a first action and a second action in opposition to the first action during a time span corresponding to each event, wherein the first action is executed at the start of the time span corresponding to each event, the second action is executed at the end of the time span corresponding to each event within a new time period.</li>    </ul>    </li></ul></p><p id="p-0015" num="0029">In one embodiment, the counteraction pair includes:<ul id="ul0009" list-style="none">    <li id="ul0009-0001" num="0000">    <ul id="ul0010" list-style="none">        <li id="ul0010-0001" num="0030">(a) lowering the setpoint temperature of the contents of the thermal battery to a lower setpoint temperature and using the flow modifier to control the contents of the thermal battery to the lower setpoint temperature; and</li>        <li id="ul0010-0002" num="0031">(b) raising the temperature setpoint of the contents of the thermal battery to a higher setpoint temperature and using the flow modifier to control the contents of the thermal battery to the higher setpoint temperature.</li>    </ul>    </li></ul></p><p id="p-0016" num="0032">An object of the present invention is to provide a domestic water heating system in which Legionella is incapable of surviving and/or thriving as water supply is not stored prior to its use.</p><p id="p-0017" num="0033">Another object of the present invention is to provide a domestic water heating system that is not directly powered using a fossil fuel.</p><p id="p-0018" num="0034">Another object of the present invention is to provide a domestic water heating system that is capable of storing thermal energy obtained via a heat pump and used only when a demand exists.</p><p id="p-0019" num="0035">Whereas there may be many embodiments of the present invention, each embodiment may meet one or more of the foregoing recited objects in any combination. It is not intended that each embodiment will necessarily meet each objective. Thus, having broadly outlined the more important features of the present invention in order that the detailed description thereof may be better understood, and that the present contribution to the art may be better appreciated, there are, of course, additional features of the present invention that will be described herein and will form a part of the subject matter of this specification.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0020" num="0036">In order that the manner in which the above-recited and other advantages and objects of the invention are obtained, a more particular description of the invention briefly described above will be rendered by reference to specific embodiments thereof which are illustrated in the appended drawings. Understanding that these drawings depict only typical embodiments of the invention and are not therefore to be considered to be limiting of its scope, the invention will be described and explained with additional specificity and detail through the use of the accompanying drawings in which:</p><p id="p-0021" num="0037"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a diagram depicting a traditional heat pump heating system.</p><p id="p-0022" num="0038"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a diagram depicting one embodiment of a heat pump heating system.</p><p id="p-0023" num="0039"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a diagram depicting another embodiment of a heat pump heating system.</p><p id="p-0024" num="0040"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a diagram depicting yet another embodiment of a heat pump heating system.</p><p id="p-0025" num="0041"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a diagram depicting fluid flows inside one embodiment of a three-fluid flow plate type heat exchanger as shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>.</p><p id="p-0026" num="0042"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a chart depicting a sample of the flowrates measured at point C of a water heater for a time span of twelve hours at a large hot water user location (e.g., hotel).</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">PARTS LIST</heading><p id="p-0027" num="0000"><ul id="ul0011" list-style="none">    <li id="ul0011-0001" num="0000">    <ul id="ul0012" list-style="none">        <li id="ul0012-0001" num="0043"><b>2</b>&#x2014;heating system</li>        <li id="ul0012-0002" num="0044"><b>4</b>&#x2014;heat engine</li>        <li id="ul0012-0003" num="0045"><b>6</b>&#x2014;thermal battery</li>        <li id="ul0012-0004" num="0046"><b>8</b>&#x2014;heat exchanger</li>        <li id="ul0012-0005" num="0047"><b>10</b>&#x2014;hot water supply line</li>        <li id="ul0012-0006" num="0048"><b>12</b>&#x2014;output of solar thermal collector</li>        <li id="ul0012-0007" num="0049"><b>14</b>&#x2014;output of electrically-powered heater</li>        <li id="ul0012-0008" num="0050"><b>16</b>&#x2014;tank</li>        <li id="ul0012-0009" num="0051"><b>18</b>&#x2014;coil</li>        <li id="ul0012-0010" num="0052"><b>20</b>&#x2014;heat exchanger</li>        <li id="ul0012-0011" num="0053"><b>22</b>&#x2014;unheated flow</li>        <li id="ul0012-0012" num="0054"><b>24</b>&#x2014;recirculated flow</li>        <li id="ul0012-0013" num="0055"><b>26</b>&#x2014;pump</li>        <li id="ul0012-0014" num="0056"><b>28</b>&#x2014;pump</li>        <li id="ul0012-0015" num="0057"><b>30</b>&#x2014;expansion valve</li>        <li id="ul0012-0016" num="0058"><b>32</b>&#x2014;evaporator fan</li>        <li id="ul0012-0017" num="0059"><b>34</b>&#x2014;evaporator</li>        <li id="ul0012-0018" num="0060"><b>36</b>&#x2014;compressor</li>        <li id="ul0012-0019" num="0061"><b>38</b>&#x2014;wall</li>        <li id="ul0012-0020" num="0062"><b>40</b>&#x2014;fill valve</li>        <li id="ul0012-0021" num="0063"><b>42</b>&#x2014;housing</li>        <li id="ul0012-0022" num="0064"><b>44</b>&#x2014;flapper</li>        <li id="ul0012-0023" num="0065"><b>46</b>&#x2014;heat exchanger</li>        <li id="ul0012-0024" num="0066"><b>48</b>&#x2014;inlet of refrigerant flow of heat pump into heat exchanger</li>        <li id="ul0012-0025" num="0067"><b>50</b>&#x2014;outlet of refrigerant flow of heat pump leaving heat exchanger</li>        <li id="ul0012-0026" num="0068"><b>52</b>&#x2014;inlet of domestic water flow into heat exchanger</li>        <li id="ul0012-0027" num="0069"><b>54</b>&#x2014;outlet of domestic water flow leaving heat exchanger</li>        <li id="ul0012-0028" num="0070"><b>56</b>&#x2014;inlet of closed loop conductor fluid of thermal battery into heat exchanger</li>        <li id="ul0012-0029" num="0071"><b>58</b>&#x2014;outlet of closed loop conductor fluid of thermal battery leaving heat exchanger</li>        <li id="ul0012-0030" num="0072"><b>60</b>&#x2014;heat transfer plate</li>        <li id="ul0012-0031" num="0073"><b>62</b>&#x2014;modulating valve</li>        <li id="ul0012-0032" num="0074"><b>64</b>&#x2014;period in which only external recirculation is active</li>        <li id="ul0012-0033" num="0075"><b>66</b>&#x2014;flowrate spikes</li>        <li id="ul0012-0034" num="0076"><b>68</b>&#x2014;flow meter</li>    </ul>    </li></ul></p><heading id="h-0006" level="1">PARTICULAR ADVANTAGES OF THE INVENTION</heading><p id="p-0028" num="0077">The present system provides a domestic hot water supply that is not stored before its use, thereby eliminating the possibility of Legionella proliferation. Further, the present system provides a domestic hot water supply that does not require direct consumption of fossil fuel, thereby limiting the addition to the carbon footprint due to the use of the present system. The present system provides a mechanism for modulating the rate of heat transfer from a thermal battery to a flow to be heated.</p><heading id="h-0007" level="1">DETAILED DESCRIPTION OF A PREFERRED EMBODIMENT</heading><p id="p-0029" num="0078">The term &#x201c;about&#x201d; is used herein to mean approximately, roughly, around, or in the region of. When the term &#x201c;about&#x201d; is used in conjunction with a numerical range, it modifies that range by extending the boundaries above and below the numerical values set forth. In general, the term &#x201c;about&#x201d; is used herein to modify a numerical value above and below the stated value by a variance of 20 percent up or down (higher or lower).</p><p id="p-0030" num="0079"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a diagram depicting a traditional heat pump heating system <b>2</b>. A tank is used not only to store energy gathered with a heat pump but also to provide hot water by heating an unheated water supply with the energy received and stored by the fluid in the tank. As the contents of the tank <b>16</b> is kept at a temperature meeting the needs of hot water users, e.g., significantly below 70 degrees C. (158 degrees F.), i.e., the temperature at which Legionellosis is killed but significantly above 20 degrees C. (68 degrees F.), the risk of Legionella exists in heating systems which store water at this temperature range due to the potential for the lack of a hot water demand, causing the heated water to stagnate in the tank. Below 20 degrees C. (68 degrees F.), Legionellosis survives but dormant. Therefore, if domestic water is stored in a tank for an extended period of time, e.g., 6 hours or more, at a temperature where Legionellosis can survive and/or thrive, a user of the hot water output of the tank can potentially be exposed to Legionella. The contents of tank <b>16</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref> are heated with two heat sources. A first heat source is provided by a heat pump connected to a coil <b>18</b> to form a closed loop where the coil <b>18</b> is wrapped around and in thermal contacting engagement with the tank <b>16</b>. Here, the heat pump is shown used to harness energy from air inside a building as air is drawn from the interior of a building and expelled back into the interior of the building. The heat pump is a flow line having an expansion valve <b>30</b>, an evaporator fan <b>32</b> and an evaporator <b>34</b> functionally coupled to the evaporator fan <b>32</b> and a compressor <b>36</b>. Disposed within the closed loop is refrigerant, e.g., R410A. When heating of the contents of the tank <b>16</b> is desired, both the compressor <b>16</b> and evaporator fan <b>32</b> are turned on. The compressor <b>36</b> compresses and pushes the refrigerant in the direction indicated. The temperature of the refrigerant flow increases upon compression by the compressor <b>36</b>. As the compressed refrigerant flows through the coil <b>18</b>, heat transfer occurs from the refrigerant to the contents of the tank <b>16</b> and the temperature of the refrigerant drops before reaching the expansion valve <b>30</b>. The refrigerant temperature drops further after passing the expansion valve <b>30</b>. The compressor <b>36</b> continues to increase the pressure and temperature of the refrigerant flow until it reaches the coil or condenser where heat transfer occurs from the refrigerant to the contents of the tank <b>16</b>. As hot water is demanded, unheated water flow <b>22</b> enters the tank <b>16</b> from an external source and readily heated water exits the tank <b>16</b> to service the demand. If a demand continues to exist to a level that the entire contents of the tank <b>16</b> are replaced by new and unheated incoming water from the external source within, e.g., about 6 hours, the risk of Legionella survival and proliferation is kept to a minimum. However, if no demand exists for an extended period of time, e.g., over about 6 hours, the heated contents become a Legionella risk. In some cases, an additional heating source, e.g., an electric heater, is used. The electric heater is disposed in the tank <b>16</b>, heating directly the contents of the tank <b>16</b>. In the ensuing figures, the present invention, which serves to address this risk, will be discussed. <figref idref="DRAWINGS">FIG. <b>2</b></figref> is a diagram depicting one embodiment of a heat pump heating system <b>2</b>. It shall be noted in the present heating system <b>2</b> that a heat engine <b>4</b>, e.g., a heat pump, is used to heat the contents of a thermal battery <b>6</b>, e.g., a tank <b>16</b> containing a fluid, e.g., water or glycol, and a closed loop flow path having its flowrate controlled via a pump <b>28</b>, etc. It shall also be noted that the thermal battery <b>6</b> is fluidly decoupled from the unheated flow <b>22</b> which is heated to result in a hot water flow in the hot water supply line <b>10</b>. Therefore a fluid other than water, e.g., glycol, may be used as the thermal battery does not directly provide potable fluid to the user. The thermal battery <b>6</b> is configured to be replenished by a heat engine <b>4</b>, e.g., a heat pump connected to a coil <b>18</b> that harnesses thermal energy from a space. In this embodiment, the unheated flow <b>22</b> is heated by means of two heat exchangers <b>8</b>, <b>20</b>. Heat exchanger <b>8</b>, e.g., a plate type heat exchanger, thermally couples the closed loop flow path of the thermal battery <b>6</b> with the unheated flow <b>22</b> path. Heat exchanger <b>20</b>, e.g., a plate type heat exchanger, thermally couples the heat pump <b>4</b> with the unheated flow <b>22</b>. In use, the heat that has been stored or being stored in the tank <b>16</b> is transferred to the unheated flow <b>22</b>, raising its temperature to a suitable temperature, e.g., 120 degrees F., at the hot water supply line <b>10</b> with the flowrate through which obtained using a flow meter <b>68</b>. In one embodiment, an external recirculation of the heated flow is urged by pump <b>26</b> in the hot water supply line <b>10</b> to ensure that hot water can be provided at points of use, e.g., showers, when demanded. If the recirculated flow <b>24</b> is effected, the return flow is merged with the freshly heated flow post heat exchanger <b>20</b>. It shall be noted that domestic water heating is accomplished in a flow path that is fluidly segregated from the contents of the tank <b>16</b>. When hot water is requested, hot water is supplied through the hot water supply line <b>10</b>. Unheated flow <b>22</b> passes through heat exchanger <b>20</b> before merging with the recirculated flow <b>24</b> to pass through heat exchanger <b>8</b>. Although the recirculated flow <b>24</b> is disposed at a temperature lower than the effluent of heat exchanger <b>8</b> due to heat loss along the recirculated flow path, it is still disposed at a temperature higher than the unheated flow <b>22</b>. Heat transfer between two flows is proportional to the difference in temperature of the two flows. Therefore, by coupling the output of a heat pump (post compressor <b>36</b> and prior to the coil <b>18</b>) and the unheated flow <b>22</b>, flows with the maximum difference in temperature are thermally coupled for maximum heat transfer rate in a heat exchanger. In one embodiment, pump <b>28</b> is a variable speed pump configured to effect heat transfer at a heat transfer rate, from the closed loop flow of the thermal battery <b>6</b> to the flow which eventually becomes the hot water supply line <b>10</b> based on the demand at the points of use, by varying, e.g., the fluid flowrate in the closed loop conductor of the thermal battery <b>6</b>. The availability of this variable speed pump allows the modulation of heat transfer to the domestic water flow such that it can be controlled to the setpoint temperature, e.g., 120 degrees F. of the heating system <b>2</b> without relying solely on the supplemental heating elements which supply outputs <b>12</b>, <b>14</b>. The speed of pump <b>28</b> is generally increased to cycle the fluid in the closed loop conductor at a higher rate to increase the heat transfer rate from the fluid in the closed loop conductor to the unheated flow <b>22</b>. When a hot water demand is very small, e.g., 0.5 Gallons Per Minute (GPM), the variable speed pump may not be capable of operating at a speed setting sufficiently low to match the very small demand as there is a lower speed limit to the variable speed pump. If the variable speed pump <b>28</b> is run at its minimum speed and the fluid of the thermal battery <b>6</b> is disposed at, e.g., about 200 degrees F. (lower than a desired thermal battery fluid temperature of, e.g., about 205 degrees F.) to match the very small demand, the system may not be able to provide hot water at a desired temperature. By disposing a modulating valve <b>62</b> on the same fluid conductor the variable speed pump is disposed, the modulating valve <b>62</b> will be capable of restricting or lowering the flowrate in the closed loop conductor of the thermal battery <b>6</b> without requiring the thermal battery fluid temperature to be dropped from the normal setting of, e.g., about 205 degrees F. In servicing demands outside of the very small demand, the modulating valve <b>62</b> would be disposed in its fully open position. In one embodiment, a constant speed pump is used instead of a variable speed pump as the flowrate of the closed loop flow can be controlled using the modulating valve <b>62</b>. In one embodiment, modulating valve <b>62</b> is unnecessary as the variable speed pump can already generate a closed loop flow flowrate required. Collectively, either a variable speed pump or a combination of a pump (fixed or variable speed) and a valve can be considered a flow modifier as it is capable of altering the flowrate of the flow the flow modifier controls.</p><p id="p-0031" num="0080">In one embodiment, an output of a solar thermal collector <b>12</b> is used to increase the total heat transfer rate to the thermal battery <b>6</b>. In another embodiment, an output of an electrically-powered heater <b>14</b> is used to increase the total heat transfer rate to the thermal battery <b>6</b>. Such supplemental heating is critical when the heating system <b>2</b> is incapable of relying solely upon the heat engine <b>4</b> to meet the hot water flowrate demanded. The air drawn by the evaporator fan <b>32</b> is guided by a housing <b>42</b> which splits into two channels, one of which is directed into an indoor environment and the other one into an outdoor environment. The air inlet source can also be chosen from either the interior or exterior of the building in which the present heating system is disposed. As air is drawn by the evaporator fan <b>32</b>, e.g., from either the interior or exterior of a building, toward the evaporator <b>34</b>, heat is transferred via the evaporator <b>34</b> to the refrigerant flow in the heat engine <b>4</b> which continues to be drawn by the compressor <b>36</b>. A flapper <b>44</b> is used for selecting whether the indoor or outdoor air is drawn into the housing <b>42</b> and directed out of the housing <b>42</b>. Each flapper <b>44</b> is pivoted at one end and used for blocking one of the two paths (indoor and outdoor) such that air flow can occur in the path that is unblocked. For instance, during winter months, the flapper <b>44</b> at the inlet end may be disposed in a position to allow air flow from the outdoor environment and the flapper <b>44</b> at the outlet end may be disposed in a position to allow flow into the outdoor environment. During summer months, the flapper <b>44</b> at the inlet end may be disposed in a position to allow flow from the indoor environment and the flapper <b>44</b> at the outlet end may be disposed in a position to allow flow into the indoor environment.</p><p id="p-0032" num="0081">The tank <b>16</b> may be filled with water or another fluid with suitable specific heat. In one embodiment, the fluid is water. In another embodiment, glycol is used. If freezing risk is high due to the potential exposure of the heating system <b>2</b> to below-freezing temperatures, glycol may be used. Otherwise, water is a preferred medium as it is readily available. If water is used as the heat storage medium in the thermal battery <b>6</b>, the tank <b>16</b> and its closed loop conductor can initially be filled using a portion of the unheated flow <b>22</b>. This step needs to be performed only at the time of installation of the heating system <b>2</b>. In doing this, a fluid conductor is used to connect the unheated flow <b>22</b> and the closed loop conductor of the thermal battery <b>6</b>. A fill valve <b>40</b> disposed in this fluid conductor is actuated such that the tank <b>16</b> and its closed loop conductor are completely filled before the valve shuts off automatically. A manually-controlled valve may also be used.</p><p id="p-0033" num="0082">It can be summarized that, in order to heat a domestic water flow from a first temperature to a second temperature, the present system includes a hot water supply line for receiving the first fluid flow at a first end and exhausting the first fluid flow at a second end and a heating system. The heating system includes a heat engine, a thermal battery and a heat exchanger. The thermal battery is configured to be replenished at a point of heat transfer by the heat engine and the hot water supply line is configured to receive heat from the thermal battery via the heat exchanger to elevate the temperature of the first fluid flow from the first temperature to the second temperature.</p><p id="p-0034" num="0083">In one embodiment, the size of the tank <b>16</b> is configured to hold about 80 gallons with the temperature of the fluid in the tank <b>16</b> disposed at about 205 degrees F. The unheated flow is disposed at about 40 degrees F. and its temperature is to be raised to about 140 degrees F. At a heat pump output of about 12 kW and the supplemental heating elements (heating elements powered, e.g., by solar thermal collector and/or electric power) of about 12 kW, hot water can be provided continuously at a flowrate of about 1.6 GPM. A complete charge of the thermal battery <b>6</b> can provide a supply of hot water of about 232 gallons.</p><p id="p-0035" num="0084"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a diagram depicting another embodiment of a heat pump heating system <b>2</b>. Here, only one heat exchanger <b>8</b> is used. Both unheated flow <b>22</b> and recirculation flow <b>24</b> merge prior to arriving at the heat exchanger <b>8</b>. If the storage capacity of the thermal battery <b>6</b> is sufficiently large and capable of meeting a continuous demand, this embodiment of the heat pump heating system <b>2</b> is preferable as it is simpler, does not require a second heat exchanger and therefore can be provided at a lower procurement and maintenance costs.</p><p id="p-0036" num="0085"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a diagram depicting yet another embodiment of a heat pump heating system. In this embodiment, again, the hot water supply line <b>10</b> is fluidly decoupled from the thermal battery <b>6</b> and the heat engine <b>4</b>. A heat exchanger <b>46</b>, e.g., three-fluid plate type heat exchanger can be used to cause heat transfer from the refrigerant of the heat engine <b>4</b> to the domestic water flow in the hot water supply line <b>10</b>, heat transfer from the fluid stored in the thermal battery <b>6</b> to the domestic water flow in the hot water supply line <b>10</b> or heat transfer from the refrigerant of the heat engine <b>4</b> to the fluid stored in the thermal battery <b>6</b>. It shall be noted that, in this embodiment, heat transfer can occur from the refrigerant of the heat engine <b>4</b> to the fluid stored in the thermal battery <b>6</b> without disposing a coil around the tank <b>16</b> and heat transfer can occur from the fluid stored in the thermal battery <b>6</b> to at least a portion of the domestic water flow in the hot water supply line <b>10</b> without requiring a second heat exchanger.</p><p id="p-0037" num="0086"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a diagram depicting fluid flows inside one embodiment of a three-fluid flow plate type heat exchanger <b>46</b> as shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>. The cells delineated by the heat transfer plates <b>60</b> are arranged in the following flow patterns: Refrigerant-Domestic Water-Thermal Battery Fluid-Refrigerant-Domestic Water-Thermal Battery Fluid. There is a separate sub-inlet for each of the two cells for each of the flows. For instance, there is an inlet <b>48</b> for the refrigerant flow of the heat pump that splits into two sub-inlets each into one of two cells of the heat exchanger <b>46</b>. Similarly, each of the sub-outlets of the refrigerant flow is combined to form a flow through the outlet <b>50</b> of the refrigerant flow of heat pump upon leaving the heat exchanger <b>46</b>. There is an inlet <b>52</b> for the domestic water that splits into two sub-inlets into two cells of the heat exchanger <b>46</b>. Similarly, each of the sub-outlets of the domestic water flow is combined to form a flow through the outlet <b>54</b> of the domestic water flow upon leaving the heat exchanger <b>46</b>. There is an inlet <b>56</b> for the thermal battery fluid flow that splits into two sub-inlets into two cells of the heat exchanger <b>46</b>. Similarly, each of the sub-outlets of the thermal battery fluid flow is combined to form a flow through the outlet <b>58</b> of the thermal battery fluid flow upon leaving the heat exchanger <b>46</b>. In one embodiment, in order for heat transfer to occur from the refrigerant flow to the domestic water flow, the refrigerant flow is disposed at about 120 degrees F. and pump <b>28</b> is disposed in the off position. Note that both the refrigerant sub-flows are capable of transferring heat to the domestic water sub-flows as these flows are disposed adjacent one another. In one embodiment, in order for heat transfer to occur from the thermal battery fluid flow to the domestic water flow, pump <b>28</b> is disposed in the on position and compressor <b>36</b> is disposed in the off position. Again, note that both the thermal battery fluid sub-flows are capable of transferring heat to the domestic water sub-flows as these flows are disposed adjacent one another. In one embodiment, in order for heat transfer to occur from the refrigerant flow to the thermal battery fluid flow, the compressor <b>36</b> is disposed in the on position and the refrigerant flow is disposed at about 120 degrees F. It shall be noted that in a traditional plate type configuration, i.e., the heat transfer plates <b>60</b> are all disposed in a parallel configuration, only one pair of sub-flows of the refrigerant and the thermal battery fluid is disposed adjacent one another and the domestic water sub-flows are not fully thermally decoupled from either a refrigerant or thermal battery fluid sub-flow. In one embodiment not shown, in order to enhance heat transfer, the number of sets of sub-flows, and therefore the number of heat transfer plates <b>60</b>, can be increased such that the surface areas of the various flows are increased.</p><p id="p-0038" num="0087">In an effort to provide a heating system with higher efficiencies, the thermal battery <b>6</b> would not always be maintained at about 205 degrees F. as the higher the thermal battery fluid temperature is, the standby losses will be higher. In one embodiment, the setpoint temperature of the contents of the thermal battery or a flow within the closed loop conductor can be lowered to a lower setpoint temperature, e.g., 195 degrees F. and a flow modifier is used for controlling the contents of the thermal battery to the lower setpoint temperature. Historical data may be collected and analyzed over a period of time to determine whether the thermal battery fluid temperature may be dropped without negatively impacting the capability of the thermal battery in servicing hot water demands. <figref idref="DRAWINGS">FIG. <b>6</b></figref> is a chart depicting a sample of the flowrates measured at point A (see any one of <figref idref="DRAWINGS">FIGS. <b>2</b>-<b>4</b></figref>) of a heating system, e.g., by using flow meter <b>68</b>, for a time span of twenty-four hours at a large establishment, e.g., hotel with many hot water users. The time spans in which only external recirculation is active are labelled <b>64</b> as this is a period where the flowrate is observed to be at its minimum at about 3 GPM. These time spans are determined to be time spans in which an event where only external recirculation is active based on the flowrate readings being minimum and sustained over at least a long period of time, i.e., from about 12 AM to about 6:29 AM and again from about 8:25 PM to about 11:39 PM, i.e., over 30 minutes. During these time spans, there are demands at points of use. It shall be noted that, with the exception of several flowrate spikes <b>66</b> over these long periods of time, i.e., over 60 minutes each, the minimum non-zero flowrate has been rather steady. In one embodiment, flowrate spikes are not factored into the consideration or determination of a minimum non-zero flowrate as such spikes typically last momentarily and responding to such spikes will be counterproductive as the spikes are short-lived or sparing demands or usage. In one embodiment, an increase in demand is considered short-lived if the increase lasts under 10 seconds. Unless, in the highly unlikely event that hot water demands are constantly requested during the 12-hour span, the minimum flow at 3 GPM can be considered a result of external recirculation. In one embodiment, without considering the flowrate spikes, when the flowrate is twice as large as the minimum flow, pump <b>26</b> is turned off as the total demand is considered sufficiently large to already effectuate external recirculation. When the flowrate drops below 1.5 times the minimum flow, pump <b>26</b> is turned back on to cause external recirculation again. The act of lowering the setpoint temperature setpoint (by an amount) of a heating device or a thermal battery is called setting back the setpoint temperature by the amount. The present system may be programmed to progressively provide a setback of the setpoint temperature of a flow within the closed loop conductor. For example, a first amount of setback of, e.g., 5 degrees F., can be effectuated for the first week upon detecting the pattern indicating that the setpoint temperature of a flow within the closed loop conductor can be adjusted to conserve energy. If this pattern persists in the first week, the setback can be set even larger in the second week, e.g., 10 degrees, if again, no demands are requested during the period in which the setpoint temperature of a flow within the closed loop conductor is set back in the first week. This adjustment continues until the setpoint temperature of a flow within the closed loop conductor is deemed too low for providing suitable hot water when a demand is requested.</p><p id="p-0039" num="0088">In one embodiment, each time span of a day used is at least about 60 minutes. In other words, in order for a flowrate pattern to be considered significant in the day, the duration within which this flowrate pattern occurs has to be at least about 60 minutes. The use of such a time span of a day removes fluctuations due to factors unrelated to an external recirculation.</p><p id="p-0040" num="0089">In one embodiment, the time period is about one week. By having observed the flowrate at point A of a water heater for a week, the hot water consumption pattern can be established for both weekend days and weekdays.</p><p id="p-0041" num="0090">In one embodiment, each overlap used is at least about 30 minutes out of the time span of a day where a flowrate pattern indicating external recirculation only that lasts for at least about 60 minutes in duration has been previously identified. For instance, if the duration 12 AM-4 AM Monday of one week has been identified as a time span where no demand exists and 12:30 AM-5:30 PM Tuesday of the same week has also been identified as a time span where no demand exists, the overlap would be from 12:30 AM-4 AM, which is greater than 30 minutes. In one embodiment, the frequency threshold is about three. In other words, if applied to the same example here, another overlap of at least 30 minutes from another day (for a total of three) within the same week will confirm the overlapped time span of a specific flowrate pattern where subsequent one or more actions will be taken to react to this flowrate pattern. By only reacting to a pattern established within a substantial time span, excessive changes in the setpoint temperature of a flow within the closed loop conductor can be avoided, removing the potential that pump <b>28</b> is turning on and off excessively frequently or that pump <b>28</b> is modulated excessively frequently or that valve <b>62</b> is modulated excessively frequently, in attempting to meet the setpoint temperature of a flow within the closed loop conductor, which not only will not result in significant energy savings but will cause excessive wear and tear in pump <b>28</b> and valve <b>62</b>.</p><p id="p-0042" num="0091">As a summary, disclosed herein is a method for setting the setpoint temperature of a fluid stored in a thermal battery of a system for heating a first fluid flow from a first temperature to a second temperature. The system further includes a hot water supply line for receiving the first fluid flow at a first end and exhausting the first fluid flow at a second end; a heating system including a heat engine; a heat exchanger; a flow meter configured for detecting a flowrate through the hot water supply line, a temperature sensor configured for sensing the temperature of the contents of the thermal battery. The thermal battery further includes a closed loop fluid conductor for circulating a second fluid flow that is configured to cause transfer of heat from the thermal battery to the first fluid flow at a heat transfer rate via the heat exchanger and a flow modifier interposed within the closed loop conductor wherein the flow modifier is configured to effect heat transfer at a heat transfer rate by varying the flowrate of the second fluid flow; and a controller operably connected to at least the flow meter, the temperature sensor and the flow modifier. The thermal battery is configured to be replenished at a point of heat transfer by the heat engine and the hot water supply line is configured to receive heat from the thermal battery via the heat exchanger to elevate the temperature of the first fluid flow from the first temperature to the second temperature. The method includes using the controller for:<ul id="ul0013" list-style="none">    <li id="ul0013-0001" num="0000">    <ul id="ul0014" list-style="none">        <li id="ul0014-0001" num="0092">(a) determining at least one event from flowrate data of the flow meter over a time period of a plurality of days, e.g., 7 days or a week, the event including a time span of a day in which the flowrate remains below or at a threshold value over the time span of a day within each day of the plurality of days;</li>        <li id="ul0014-0002" num="0093">(b) determining overlaps of each event to another one of the events of all days within the time period. It is possible that there can be multiple time spans within a day where flowrate remains below or at the threshold value. Therefore the number of events can be greater than one in a day; and</li>        <li id="ul0014-0003" num="0094">(c) determining a frequency of the overlaps of each event over the time period and if the frequency exceeds a frequency threshold, executing a counteraction pair including a first action and a second action in opposition to the first action during a time span corresponding to each event, wherein the first action is executed at the start of the time span corresponding to each event, the second action is executed at the end of the time span corresponding to each event within a new time period.</li>    </ul>    </li></ul></p><p id="p-0043" num="0095">In one embodiment, the counteraction pair includes:<ul id="ul0015" list-style="none">    <li id="ul0015-0001" num="0000">    <ul id="ul0016" list-style="none">        <li id="ul0016-0001" num="0096">(a) lowering the setpoint temperature of the contents of the thermal battery to a lower setpoint temperature and using the flow modifier to control the contents of the thermal battery to the lower setpoint temperature; and</li>        <li id="ul0016-0002" num="0097">(b) raising the temperature setpoint of the contents of the thermal battery to a higher setpoint temperature and using the flow modifier to control the contents of the thermal battery to the higher setpoint temperature.</li>    </ul>    </li></ul></p><p id="p-0044" num="0098">The detailed description refers to the accompanying drawings that show, by way of illustration, specific aspects and embodiments in which the present disclosed embodiments may be practiced. These embodiments are described in sufficient detail to enable those skilled in the art to practice aspects of the present invention. Other embodiments may be utilized, and changes may be made without departing from the scope of the disclosed embodiments. The various embodiments can be combined with one or more other embodiments to form new embodiments. The detailed description is, therefore, not to be taken in a limiting sense, and the scope of the present invention is defined only by the appended claims, with the full scope of equivalents to which they may be entitled. It will be appreciated by those of ordinary skill in the art that any arrangement that is calculated to achieve the same purpose may be substituted for the specific embodiments shown. This application is intended to cover any adaptations or variations of embodiments of the present invention. It is to be understood that the above description is intended to be illustrative, and not restrictive, and that the phraseology or terminology employed herein is for the purpose of description and not of limitation. Combinations of the above embodiments and other embodiments will be apparent to those of skill in the art upon studying the above description. The scope of the present disclosed embodiments includes any other applications in which embodiments of the above structures and fabrication methods are used. The scope of the embodiments should be determined with reference to the appended claims, along with the full scope of equivalents to which such claims are entitled.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed herein is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method for setting the setpoint temperature of a fluid stored in a thermal battery of a system for heating a first fluid flow from a first temperature to a second temperature, wherein the system further comprises a supply line for receiving the first fluid flow at a first end and exhausting the first fluid flow at a second end; a heating system comprising a heat engine; a heat exchanger; a flow meter configured for detecting a flowrate through the supply line, a temperature sensor configured for sensing the temperature of the contents of the thermal battery, the thermal battery further comprises a closed loop fluid conductor for circulating a second fluid flow that is configured to cause transfer of heat from the thermal battery to the first fluid flow at a heat transfer rate via the heat exchanger and a flow modifier interposed within the closed loop conductor wherein the flow modifier is configured to effect heat transfer at a heat transfer rate by varying the flowrate of the second fluid flow; and a controller operably connected to at least the flow meter, the temperature sensor and the flow modifier, wherein the thermal battery is configured to be replenished at a point of heat transfer by the heat engine and the supply line is configured to receive heat from the thermal battery via the heat exchanger to elevate the temperature of the first fluid flow from the first temperature to the second temperature, said method comprising using the controller for:<claim-text>(a) determining at least one event from flowrate data of the flow meter over a time period of a plurality of days, said event comprising a time span of a day in which the flowrate remains below or at a threshold value over said time span of a day within each day of said plurality of days;</claim-text><claim-text>(b) determining overlaps of said each event to another one of said each event of all days within said time period; and</claim-text><claim-text>(c) determining a frequency of the overlaps of said each event over said time period and if the frequency exceeds a frequency threshold, executing a counteraction pair including a first action and a second action in opposition to the first action during a time span corresponding to said each event, wherein said first action is executed at the start of said time span corresponding to said each event, said second action is executed at the end of said time span corresponding to said each event within a new time period.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said counteraction pair comprises:<claim-text>(a) lowering the setpoint temperature of the contents of the thermal battery to a lower setpoint temperature and using the flow modifier to control the contents of the thermal battery to the lower setpoint temperature; and</claim-text><claim-text>(b) raising the temperature setpoint of the contents of the thermal battery to a higher setpoint temperature and using the flow modifier to control the contents of the thermal battery to the higher setpoint temperature.</claim-text></claim-text></claim></claims></us-patent-application>