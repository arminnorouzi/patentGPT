<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230004182A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230004182</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17699454</doc-number><date>20220321</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>CN</country><doc-number>202110732915.1</doc-number><date>20210630</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>05</class><subclass>F</subclass><main-group>1</main-group><subgroup>66</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>M</subclass><main-group>3</main-group><subgroup>158</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>05</class><subclass>F</subclass><main-group>1</main-group><subgroup>66</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>M</subclass><main-group>3</main-group><subgroup>1582</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">POWER MANAGEMENT CIRCUIT WITH CONSTANT TIME CONTROL AND ASSOCIATED OPERATING METHODS</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Chengdu Monolithic Power Systems Co., Ltd.</orgname><address><city>Chengdu</city><country>CN</country></address></addressbook><residence><country>CN</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Xu</last-name><first-name>Min</first-name><address><city>Hangzhou</city><country>CN</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">An integrated circuit for a power management circuit is provided. The integrated circuit has a power input pin, a system output pin for providing an output voltage, a switching node pin coupled to a battery through an inductor, a ground pin, a first switch coupled between the system output pin and the switching node pin, a second switch coupled between the switching node pin and the ground pin, and a control circuit. The control circuit controls the first switch and second switch to operate in a buck mode or a boost mode. The first switch is turned OFF for a constant time, and the second switch is turned ON for the constant time.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="111.17mm" wi="158.75mm" file="US20230004182A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="108.71mm" wi="166.12mm" file="US20230004182A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="127.59mm" wi="161.37mm" file="US20230004182A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="188.47mm" wi="163.66mm" file="US20230004182A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="226.40mm" wi="127.00mm" orientation="landscape" file="US20230004182A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="191.52mm" wi="111.34mm" file="US20230004182A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="186.44mm" wi="123.27mm" orientation="landscape" file="US20230004182A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="141.65mm" wi="114.13mm" orientation="landscape" file="US20230004182A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="220.98mm" wi="156.80mm" file="US20230004182A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATION</heading><p id="p-0002" num="0001">This application claims the benefit of CN application No. 202110732915.1 filed on Jun. 30, 2021 and incorporated herein by reference.</p><heading id="h-0002" level="1">TECHNICAL FIELD</heading><p id="p-0003" num="0002">This disclosure relates generally to electrical circuit, and more particularly but not exclusively relates to an integrated circuit used in a power management circuit and associated operating methods.</p><heading id="h-0003" level="1">BACKGROUND</heading><p id="p-0004" num="0003"><figref idref="DRAWINGS">FIG. <b>1</b></figref> schematically illustrates a prior power management system <b>10</b>, which is suitable for applications such as a power bank, a headset with blue tooth and so on. When the power management system <b>10</b> is connected to a power source VS, the power source VS is used to supply a system load RL along a first electrical pathway <b>151</b> through a switch Q<b>3</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>. Meantime, the power source VS is also used to charge a battery BATT with a charging current along a second electrical pathway <b>152</b>. When the power source VS is not available and disconnects from the power management system <b>10</b>, the battery BATT will supply the system load RL along a third electrical pathway <b>153</b>.</p><p id="p-0005" num="0004">When the power management system <b>10</b> is connected to the power source VS and the system load RL increases, the power source VS will reduce the charging current to charge the battery BATT, to meet the system load requirement. If the system load RL continue to increase so that the power requirement of the system load RL exceeds the power ability of the power source VS, the power source VS as well as the batter BATT will supply power to the system load RL along both the second electrical pathway <b>152</b> and the third electrical pathway <b>153</b>. And thus there is a need for a bi-directional operating circuit between the power source VS and the battery BATT, and the bi-directional operating circuit can both support the charging electrical pathway <b>152</b> from the power source VS to the battery BATT and the discharging electrical pathway <b>153</b> from the battery BATT to the system load RL.</p><p id="p-0006" num="0005">As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, a bi-directional switching circuit <b>20</b> having an inductor L<b>1</b>, a first switch Q<b>1</b> and a second switch Q<b>2</b>, is coupled between the power source VS and the battery BATT. The switch Q<b>3</b> is coupled between the power source VS and the bi-directional switching circuit <b>20</b>, and is a normally on transistor when the power source VS is available. When the power source VS is configured to charge the battery BATT, the inductor L<b>1</b>, the first switch Q<b>1</b> and the second switch Q<b>2</b> construct a buck circuit and the bi-directional switching circuit <b>20</b> operates in a buck mode. When the battery BATT discharges to supply the system load RL, the inductor L<b>1</b>, the first switch Q<b>1</b> and the second switch Q<b>2</b> construct a boost circuit and the bi-directional switching circuit <b>20</b> operates in a boost mode. However, during the transition from the buck mode to the boost mode, the battery BATT starts to discharge from being charged, the power supplied to the system load RL will be interrupted, and may cause the power failure.</p><heading id="h-0004" level="1">SUMMARY</heading><p id="p-0007" num="0006">In accomplishing the above and other objects, there has been provided an integrated circuit for a power management circuit having an external inductor and a rechargeable battery. The integrated circuit comprises a power input pin, a system output pin to output an output voltage, a switching mode pin coupled to the battery through the inductor, a ground pin, a first switch, a second switch and a control circuit. The first switch has a first terminal, a second terminal and a control terminal, wherein the first terminal is coupled to the system output pin, the second terminal is coupled to the switching node pin, and the control terminal is driven by a first driving signal. The second switch has a first terminal, a second terminal and a control terminal, wherein the first terminal is coupled to the switching node pin, the second terminal is coupled to the ground pin, and the control terminal is driven by a second driving signal. The control circuit is configured to control the first switch and the second switch to operate in a buck mode or a boost mode, and wherein the first switch is turned OFF for a constant time, and the second switch is turned ON for the constant time.</p><p id="p-0008" num="0007">There also has been provided a method of operating a power management circuit having a first pin, a second pin, a third pin, a fourth pin, a first switch coupled between the second pin and the third pin, a second switch coupled between the third pin and the fourth pin, an external inductor coupled between the third pin and a rechargeable battery. The method comprises: selecting a minimum value among a plurality of feedback control signals as a feedback control signal, providing a first current sensing signal by sensing a current flowing through the inductor, providing a second current sensing signal by adding a DC offset voltage on to the first current sensing signal, comparing the selected feedback control signal with the second current sensing signal and providing a first comparison signal, generating a constant time control signal with a constant time based on the first comparison signal, providing a first control signal and a second control signal based on the first comparison signal and the constant time control signal, and configuring the first switch and the second switch to operate in a buck mode or a boost mode, respectively controlling the OFF-time of the first switch and the ON-time of the second switch to be the constant time.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0009" num="0008">The following detailed description of various embodiments of the present invention can best be understood when read in conjunction with the following drawings, in which the features are not necessarily drawn to scale but rather are drawn as to best illustrate the pertinent features.</p><p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. <b>1</b></figref> illustrates a prior power management system <b>10</b>.</p><p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. <b>2</b></figref> schematically illustrates a power management circuit <b>100</b> with an integrated circuit according to an embodiment of the present invention.</p><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>3</b></figref> schematically illustrates a power management circuit <b>100</b>A with an integrated circuit according to another embodiment of the present invention.</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrates a switch controller <b>110</b>B of the integrated circuit according to an embodiment of the present invention.</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>5</b></figref> illustrates a working waveform of the integrated circuit in the buck mode according to an embodiment of the present invention.</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>6</b></figref> illustrates a working waveform of the integrated circuit in the boost mode according to another embodiment of the present invention.</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>7</b></figref> illustrates a working waveform of the integrated circuit during the transition between the buck mode and the boost mode according to an embodiment of the present invention.</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>8</b></figref> illustrates a working waveform of the integrated circuit during the transition between the buck mode and the boost mode according to another embodiment of the present invention.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates a flow chart of a method <b>700</b> for operating an integrated circuit shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> according to one embodiment of the present invention.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0006" level="1">DETAILED DESCRIPTION</heading><p id="p-0019" num="0018">Various embodiments of the present invention will now be described. In the following description, some specific details, such as example circuits and example values for these circuit components, are included to provide a thorough understanding of the embodiments. One skilled in the relevant art will recognize, however, that the present invention can be practiced without one or more specific details, or with other methods, components, materials, etc. In other instances, well-known structures, materials, processes or operations are not shown or described in detail to avoid obscuring aspects of the present invention.</p><p id="p-0020" num="0019">Throughout the specification and claims, the term &#x201c;coupled,&#x201d; as used herein, is defined as directly or indirectly connected in an electrical or non-electrical manner. The terms &#x201c;a,&#x201d; &#x201c;an,&#x201d; and &#x201c;the&#x201d; include plural reference, and the term &#x201c;in&#x201d; includes &#x201c;in&#x201d; and &#x201c;on&#x201d;. The phrase &#x201c;in one embodiment,&#x201d; as used herein does not necessarily refer to the same embodiment, although it may. The term &#x201c;or&#x201d; is an inclusive &#x201c;or&#x201d; operator, and is equivalent to the term &#x201c;and/or&#x201d; herein, unless the context clearly dictates otherwise. The term &#x201c;based on&#x201d; is not exclusive and allows for being based on additional factors not described, unless the context clearly dictates otherwise. The term &#x201c;circuit&#x201d; means at least either a single component or a multiplicity of components, either active and/or passive, that are coupled together to provide a desired function. The term &#x201c;signal&#x201d; means at least one current, voltage, charge, temperature, data, or other signal. Those skilled in the art should understand that the meanings of the terms identified above do not necessarily limit the terms, but merely provide illustrative examples for the terms.</p><p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. <b>2</b></figref> schematically illustrates a power management circuit <b>100</b> with an integrated circuit according to an embodiment of the present invention. As shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the power management circuit <b>100</b> comprises an integrated circuit, an inductor L, a rechargeable battery BATT, an output capacitor Co, and supplies power for a system load RL. The integrated circuit comprises a power input pin Vin, a system output pin Vout, a switching node pin SW, a ground pin GND, a first switch Q<b>1</b>, a second switch Q<b>2</b>, a blocking switch Q<b>3</b> for limiting an input current and a control circuit.</p><p id="p-0022" num="0021">The power input pin Vin is coupled to an external power source VS. The system output pin Vout is coupled to the system load RL for outputting an output voltage VOUT. The integrated circuit is configured to convert an input voltage VIN from the power source VS into the output voltage VOUT through the blocking switch Q<b>3</b> and supplies power to the system load RL.</p><p id="p-0023" num="0022">The first switch Q<b>1</b> has a first terminal, a second terminal and a control terminal, wherein the first terminal is coupled to the system output pin Vout, the second terminal is coupled to the switching node pin SW, and the control terminal is driven by a first driving signal DRV<b>1</b>. The second switch Q<b>2</b> has a first terminal, a second terminal and a control terminal, wherein the first terminal is coupled to the switching node pin SW, the second terminal is coupled to the ground pin GND, and the control terminal is driven by a second driving signal DRV<b>2</b>. The blocking switch Q<b>3</b> is coupled between the power input pin Vin and the system output pin Vout, and keeps normally on when the power source VS is available.</p><p id="p-0024" num="0023">As shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the inductor L has a first terminal and a second terminal, wherein the first terminal is coupled a common node of the first switch Q<b>1</b> and the second switch Q<b>2</b>, i.e., the switching node pin SW. The second terminal of the inductor L is coupled to a positive terminal of the battery BATT, and a negative terminal of the battery BATT is coupled to the ground. In the example shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the integrate circuit and the inductor L can construct a forward buck circuit or a reverse boost circuit, to supply the system load RL. The control circuit controls the first switch Q<b>1</b> and the second switch Q<b>2</b> to work complementarily, to operate in a buck mode or a boost mode. Wherein an OFF-time of the first switch Q<b>1</b> is a constant time tcosnt, and the ON-time of the first switch Q<b>2</b> is also the constant time tcosnt. In one embodiment, the integrated circuit works in a forced current continuous mode (CCM).</p><p id="p-0025" num="0024">As shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the control circuit of the integrated circuit comprises a switch controller <b>110</b> and a power stage <b>120</b>. The switch controller <b>110</b> is configured to receive a plurality of feedback control signals and a first current sensing signal IL<b>1</b> indicative of a current flowing through the inductor L. Based on the plurality of feedback control signals and the first current sensing signal IL<b>1</b>, the switch controller <b>110</b> provides a first control signal CTRL<b>1</b> and a second control signal CTRL<b>2</b> to the power stage <b>120</b>. The power stage <b>120</b> comprises a first driving circuit and a second driving circuit. The first driving circuit is configured to provide a first driving signal DRV<b>1</b> to control the first switch Q<b>1</b> based on the first control signal CTRL<b>1</b>. The second driving circuit is configured to provide a second driving signal DRV<b>2</b> to the second switch Q<b>2</b> based on the second control signal CTRL<b>2</b>. The first driving signal DRV<b>1</b> and the second driving signal DRV<b>2</b> are complementary signals. In other words, when the first driving signal DRV<b>1</b> is high level, the second driving signal DRV<b>2</b> is low level, when the first driving signal DRV<b>1</b> is low level, the second driving signal DRV<b>2</b> is high level.</p><p id="p-0026" num="0025">In the forward buck mode, the first switch Q<b>1</b> is turned on in response to the first driving signal DRV<b>1</b> with high level, and the second switch Q<b>2</b> is turned off in response to the second driving signal DRV<b>2</b> with low level. On the contrary, in the reverse boost mode, the first switch Q<b>1</b> is turned OFF in response to the first driving signal DRV<b>1</b> with low level, and the second switch Q<b>2</b> is turned ON in response to the second driving signal DRV<b>2</b> with high level.</p><p id="p-0027" num="0026">In one embodiment, the switch controller <b>110</b> comprises a plurality of feedback control circuits. Different feedback control circuits perform different feedback detection and loop regulation, which can provide different feedback control signals, respectively. In detail, each feedback control circuit receives a corresponding feedback signal and a corresponding reference signal and provides a corresponding feedback control signal at a corresponding output terminal based on a difference between the corresponding feedback signal and the corresponding reference signal. The plurality of feedback signals at least comprise an output voltage feedback signal FBVOUT indicative of the output voltage VOUT at the system output pin Vout, and an input current feedback signal FBIIN indicative of the input current Iin flowing into the power input pin Vin. In other embodiments, the plurality of feedback signals further comprise a temperature feedback signal indicative the temperature of the power management circuit <b>100</b>, an input voltage feedback signal, a battery voltage feedback signal, a charging current feedback signal and other battery status signal during the charging.</p><p id="p-0028" num="0027">According to an embodiment of the present invention, a feature of the present invention is that the control circuit of the integrated circuit only generates one constant time tconst, which is the constant off time of the first switch Q<b>1</b>, and meantime, is also the constant on time of the second switch Q<b>2</b>.</p><p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. <b>3</b></figref> schematically illustrates a power management circuit <b>100</b>A with an integrated circuit according to another embodiment of the present invention. As shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the power management circuit <b>100</b>A comprises an integrated circuit, an inductor L, a rechargeable battery BATT and an output capacitor Co. The power management circuit <b>100</b>A supplies power for a system load RL.</p><p id="p-0030" num="0029">In the example shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the integrated circuit comprises a power input pin Vin, a system output pin Vout, a switching node pin SW, a ground pin GND, a first switch Q<b>1</b>, a second switch Q<b>2</b>, a blocking switch Q<b>3</b> for limiting an input current and a control circuit.</p><p id="p-0031" num="0030">Compared with the power management circuit <b>100</b>, the power management circuit <b>100</b>A shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> further comprises a current sensing resistor Rs. The current sensing resistor Rs is coupled between a second terminal of the inductor L and the battery BATT, and is configured to sense a charging current to charge the battery BATT in the forward buck mode and the sense a discharging current from the battery BATT to the load in the reverse boost mode.</p><p id="p-0032" num="0031">In one embodiment, compared with the integrated circuit shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the integrated circuit shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> further comprises a first current sensing pin CS<b>1</b> and a second current sensing pin CS<b>2</b>. The current sensing resistor Rs is coupled between the first current sensing pin CS<b>1</b> and the second current sensing pin CS<b>2</b>. A current sensing circuit <b>101</b> is coupled to the two terminals of the current sensing resistor Rs through the two current sensing pins CS<b>1</b> and CS<b>2</b>, and is configured to provide a first current sensing signal IL<b>1</b> at an output terminal by sensing a bi-directional current that flows through the current sensing resistor Rs. A person of ordinary skill in the art should know that in other embodiments, the current sensing circuit <b>101</b> may have different circuit configurations while having the same or similar function. The control circuit comprises a switch controller <b>110</b>A and a power stage <b>120</b>A.</p><p id="p-0033" num="0032">In the example shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the switch controller <b>110</b>A comprises the current sensing circuit <b>101</b> mentioned above, the plurality of feedback control circuits <b>102</b>, a selection circuit <b>103</b>, an offset generator <b>104</b>, a first comparison circuit <b>105</b>, a constant time generator <b>106</b> and a logic circuit <b>107</b>.</p><p id="p-0034" num="0033">In the example shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the plurality of feedback control circuits at least comprise an output voltage feedback control circuit <b>102</b>-<b>1</b> and an input current feedback control circuit <b>102</b>-<b>2</b>. The output voltage feedback control circuit <b>102</b>-<b>1</b> receives an output voltage feedback signal FBVOUT, and provides an output voltage feedback control signal Vcomp<b>1</b> based on the difference between the output voltage feedback signal FBVOUT and an output voltage reference signal REFVOUT. The input current feedback control circuit <b>102</b>-<b>2</b> receives an input current feedback signal FBVIN, and provides an input current feedback control signal Vcomp<b>2</b> based on the difference between the input current feedback signal FBIIN and an input current reference signal VREFIIN.</p><p id="p-0035" num="0034">The selection circuit <b>102</b> is coupled to the plurality of the feedback control circuits <b>102</b> and receives the plurality of the feedback control signals. In the example shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the selection circuit <b>103</b> selects a minimum value of the output voltage feedback control signal Vcomp<b>1</b> and the input current feedback control signal Vcomp<b>2</b> as a selected feedback control signal VCOMP. The offset generator <b>104</b> is configured receive the first current sensing signal IL<b>1</b>, and provides a DC offset voltage VOFFSET and a second current sensing signal IL<b>2</b> by adding the DC offset voltage VOFFSET on to the first current sensing signal IL<b>1</b>. In one embodiment, the valley of the second current sensing signal IL<b>2</b> is always higher than 0, by setting the appropriate DC offset voltage VOFFSET.</p><p id="p-0036" num="0035">The first comparison circuit <b>105</b> is configured to compare the feedback control signal VCOMP with the second current sensing signal IL<b>2</b> and provide a first comparison signal CMP<b>1</b> at an output terminal based on the comparison. The firs comparison circuit <b>105</b> comprises a comparator CP<b>1</b>. The constant time generator <b>106</b> is coupled to the output terminal of the first comparison circuit <b>105</b> to receive the first comparison signal CMP<b>1</b> and is configured to provide a constant time control signal TC having the constant time tconst. The logic circuit <b>107</b> is configure to generate the first control signal CTRL<b>1</b> and the second control signal CTRL<b>2</b> based on the first comparison signal CMP<b>1</b> and the constant time control signal TC.</p><p id="p-0037" num="0036">The power stage <b>120</b>A comprises a first driving circuit <b>108</b> and a second driving circuit <b>109</b>. The first control signal CTRL<b>1</b> and the second control signal CTRL<b>2</b> are provided to the first driving circuit <b>108</b> and the second driving circuit <b>109</b>, respectively. The first driving circuit <b>108</b> is configured to provide a first driving signal DRV<b>1</b> to the control terminal of the first switch Q<b>1</b>, based on the first control signal CTRL<b>1</b>. The second driving circuit <b>109</b> is configured to provide a second driving signal DRV<b>2</b> to the control terminal of the second switch Q<b>2</b>, based on the second control signal CTRL<b>2</b>. Generally, the first driving signal DRV<b>1</b> and the second driving signal DRV<b>2</b> are complementary. In one embodiment, the first driving circuit <b>108</b> comprises a dead time control circuit to provide an optimally minimized dead time without running into shoot-through conditions.</p><p id="p-0038" num="0037">In applications, an external power source VS is configured to provide a continuous and stable output voltage VOUT, to supply the system load RL. At the same time, the power source VS is configured to charge the battery BATT, and the current flowing through the inductor L is a positive charging current, and thus the battery voltage VBATT continues to increase. In one embodiment, the battery voltage VBATT can be fully charged (e.g., 4.2V) from being fully discharged (e.g., 3V).</p><p id="p-0039" num="0038">The system load RL can be supplied by the power source VS without interruption, as long as the input current flowing through the blocking switch Q<b>3</b> from the power input pin Vin does not reach the input current threshold. When the system load RL increases to exceed the power ability of the power source VS, the input current Iin starts to increase. Accordingly, the input current feedback signal FBIIN also increases. If the input current Iin increases to exceed the input current threshold, the blocking switch Q<b>3</b> is configured to operate in a linear regulating mode. And then the input current feedback control signal Vcomp<b>2</b> will decrease to be less than the output voltage feedback control signal Vcomp<b>1</b>. The selection circuit <b>103</b> reselects the input current feedback control signal Vcomp<b>1</b> as the feedback control signal VCOMP. That means the input current Iin will dominate the loop control instead of the output voltage VOUT. The integrated circuit automatically enters the reverse boost mode and exits from the forward buck mode. The battery BATT discharges and provide supplement power for the system load RL, and thus reducing the supplying burden of the power source VS. The current flowing through the inductor L will be a negative discharging current.</p><p id="p-0040" num="0039">In addition, if the power source VS is un-plugged suddenly, the output voltage VOUT will decrease, and the output voltage feedback signal FBVOUT also decreases. When the output voltage VOUT decreases to an ULVO threshold, the output voltage feedback control signal Vcomp<b>1</b> also starts to decrease. The selection circuit <b>103</b> reselect the lower output voltage feedback control signal Vcomp<b>1</b> as the feedback control signal VCOMP, and the current flowing through the inductor L will change the direction, the integrated circuit enters into the reverse boost mode. The battery BATT is configured as a supplementary power source to supply the system load RL. As mentioned above, the battery voltage VBATT varies between 3V&#x2dc;4.2V, and the battery BATT is configured to discharge the power to the system load RL, the current flowing through the inductor L is a negative discharging current.</p><p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrates a switch controller <b>110</b>B of the integrated circuit according to an embodiment of the present invention. In the example shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the switch controller <b>110</b>B comprises a plurality of feedback control circuits <b>102</b>B, a selection circuit <b>103</b>B, a first comparison circuit <b>105</b>B, a constant time generator <b>106</b>B and a logic circuit <b>107</b>B.</p><p id="p-0042" num="0041">As shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the plurality of feedback control circuit <b>102</b>B further comprises a charging current feedback control circuit <b>102</b>-<b>3</b> and a battery voltage feedback control circuit <b>102</b>-<b>4</b>, other than the output voltage feedback control circuit <b>102</b>-<b>1</b> and the input current feedback control circuit <b>102</b>-<b>2</b> discussed above. The charging current feedback control circuit <b>102</b>-<b>3</b> receives a charging current feedback signal FBICHG, and provides a charging current feedback control signal Vcomp<b>3</b> at an output terminal based on the difference between the charging current feedback signal FBICHG and a charging current reference signal REFICHG. The battery voltage feedback control circuit <b>102</b>-<b>4</b> receives a battery voltage feedback signal FBVBATT, and provides a battery voltage feedback control signal Vcomp<b>4</b> at an output terminal based on the difference between the battery voltage feedback signal FBVBATT and a battery voltage reference signal REFVBATT. The selection circuit <b>103</b>B selects a minimum value among the output voltage feedback control signal Vcomp<b>1</b>, the input current feedback control signal Vcomp<b>2</b>, the charging current feedback control signal Vcomp<b>3</b> and the battery voltage feedback control signal Vcomp<b>4</b> as the selected feedback control signal VCOMP. The selection circuit <b>103</b>B provides the feedback control signal VCOMP at an output terminal.</p><p id="p-0043" num="0042">The first comparison circuit comprises a comparator CP<b>1</b>. The comparator CP<b>1</b> has a non-inverting terminal, an inverting terminal and an output terminal, wherein the non-inverting terminal is configured to receive the second current sensing signal IL<b>2</b>, and the inverting terminal is configured to receive the feedback control signal VCOMP, and provides a first comparison signal CMP<b>1</b> at the output terminal based on the comparison result.</p><p id="p-0044" num="0043">In the example shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the constant time generator <b>106</b>B comprises a current source IS, a discharge switch Q<b>4</b>, a capacitor CX and a comparator CP<b>2</b>. The current source IS has an input terminal configured to receive a supply voltage VDD and an output terminal. The capacitor CX has a first terminal and a second terminal, wherein the first terminal is coupled to the output terminal of the current source IS, and the second terminal is coupled to ground or the ground pin. The discharge switch Q<b>4</b> has a first terminal, a second terminal and a control terminal, wherein the first terminal is coupled to the output terminal of the current source IS, the second terminal is coupled to ground, and the control terminal is coupled to the output terminal of the first comparison circuit <b>105</b>B to receive the first comparison signal CMP<b>1</b>. The comparator CP<b>2</b> has a non-inverting terminal, an inverting terminal and an output terminal, wherein the non-inverting terminal is coupled to the first terminal of the capacitor CX, and the inverting terminal is configured to receive a DC reference voltage VDC, and provides the constant time control signal TC at the output terminal based on the comparison result.</p><p id="p-0045" num="0044">In operation, when the first comparison signal CMP<b>1</b> is high level, the first switch Q<b>1</b> is turned OFF, the discharge switch Q<b>4</b> is turned ON to discharge the capacitor CX. The voltage at the first terminal of the capacitor CX will decrease to approach the reference ground voltage. The comparator CP<b>2</b> compares the voltage at the first terminal of the capacitor CX with the DC reference voltage VDC. When the voltage of the first terminal of the capacitor CX is less than the DC reference voltage VDC, the comparator CP<b>2</b> provides the constant time control signal TC with low level. Subsequently, the discharge switch Q<b>4</b> is turned ON, and the current source IS is allowed to charge the capacitor CX, when the voltage across the capacitor CX increases to reach the DC reference voltage VDC, the comparator CP<b>2</b> provides the constant time control signal TC with high level. In this configuration, the capacitance of the capacitor CX and/or the time when the capacitor CX is charged to reach the DC reference voltage VDC, which can be used to build the constant time tconst.</p><p id="p-0046" num="0045">Referring still to <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the logic circuit <b>107</b>B comprises a flip-flop FF<b>1</b>. The flip-flop FF<b>1</b> has a set terminal, a reset terminal, an output terminal and a reverse output terminal. Wherein the set terminal is coupled to the constant time control circuit <b>106</b>B to receive the constant time control signal TC, the reset terminal is coupled to the output terminal of the first comparison circuit <b>105</b>B to receive the first comparison signal CMP<b>1</b>. The flip-flop FF<b>1</b> provides the first control signal CTRL<b>1</b> at the output terminal and the second control signal CTRL<b>2</b> at the reverse output terminal. As shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the constant time control signal TC with high level can trigger the turning-OFF of the first switch Q<b>1</b> and the turning-ON of the second switch Q<b>2</b>.</p><p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. <b>5</b></figref> illustrates a working waveform of the integrated circuit in the buck mode according to an embodiment of the present invention. In the example shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, the first switch Q<b>1</b> is a main switch, the second switch Q<b>2</b> is controlled to follow the action of the first switch Q<b>1</b>. As shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, at time t<b>0</b>, the first switch Q<b>1</b> is turned ON, and the second switch Q<b>2</b> is turned OFF, the current flowing through the inductor starts to increase and is configured as the charging current to charge the battery BATT, and the second current sensing signal IL<b>2</b> also increases until time t<b>1</b>. At time t<b>1</b>, the second current sensing signal IL<b>2</b> increase to cross the feedback control signal VCOMP, the first switch Q<b>1</b> is turned OFF, and the second switch Q<b>2</b> is turned ON. The OFF-time of the first switch Q<b>1</b> is controlled to be the constant time tconst, which is determined by the constant time control signal TC provided by the constant time control circuit <b>105</b>. Correspondingly, the ON-time of the second switch Q<b>2</b> is also controlled to be the constant time tconst. And thus at time t<b>2</b>, the OFF-time of the first switch Q<b>1</b> ends, the first switch Q<b>1</b> is turned ON again. The second switch Q<b>2</b> is turned OFF accordingly. The operation mentioned above is repeated to make the integrated circuit to work in the forward buck mode, wherein the first switch Q<b>1</b> and the second switch Q<b>2</b> are turned ON alternatively, to charge the battery BATT.</p><p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. <b>6</b></figref> illustrates a working waveform of the integrated circuit in the boost mode according to another embodiment of the present invention. In the example shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, the second switch Q<b>2</b> is the main power switch, the first switch Q<b>1</b> is controlled to follow the action of the second switch Q<b>2</b>. As shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, at time ta, the second switch Q<b>2</b> is turned ON, and the first switch Q<b>1</b> is turned OFF, the current flowing through the inductor is negative and starts to decrease, the second current sensing signal IL<b>2</b> also decreases. At the same time, the constant time control circuit <b>105</b> start to time for the constant time tconst until time tb. At time tb, the second switch Q<b>2</b> is turned OFF after the constant ON-time tconst, and the first switch Q<b>1</b> is turned ON after the constant OFF-time tconst. After time tb, the current flowing through the inductor L starts to increase reversely, until the second current sensing signal increases to reach the feedback control signal VCOMP. At time tc, the second switch Q<b>2</b> is turned ON again, then the first switch Q<b>1</b> is turned OFF again. The operation mention above is repeated to make the integrated circuit to operate in the reverse boost mode, and the second switch Q<b>2</b> and the first switch Q<b>1</b> is turned OFF alternatively. It should be noted that, in the buck mode shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref> and the boost mode shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, the selected feedback control signal VCOMP is different and it is from different feedback control circuits. Several of the details of the embodiments described below with reference to <figref idref="DRAWINGS">FIG. <b>7</b></figref> and <figref idref="DRAWINGS">FIG. <b>8</b></figref>.</p><p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. <b>7</b></figref> illustrates a working waveform of the integrated circuit during the transition between the buck mode and the boost mode according to an embodiment of the present invention. As shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref>, wherein Iin represents the input current flowing into the power input pin of the integrated circuit, IL<b>1</b> represents the first current sensing signal, and VOUT represents the output voltage provided to the system load RL.</p><p id="p-0050" num="0049">Before time t<b>11</b>, the power source VS is configured to provide a continuous 5V output voltage VOUT to the system load RL. At the same time, the first current sensing signal IL<b>1</b> is positive, and the integrated circuit controls the first switch Q<b>1</b> and the second switch Q<b>2</b> to operate in the buck mode. The power source VS is configured to provide the charging current to charge the battery BATT.</p><p id="p-0051" num="0050">At time t<b>11</b>, the system load RL increases suddenly, the input current Iin increases to exceed a preset value, and the input current feedback control signal Vcomp<b>1</b> starts to decrease, and then the input current feedback control signal Vcomp<b>2</b> is selected to be the feedback control signal VCOMP, to perform the loop control. The current flowing through the inductor L becomes negative and the integrated circuit switches automatically to enter the boost mode from the buck mode. In the boost mode, the input current feedback control signal Vcomp<b>1</b> is configured to regulate the input current Iin. At time t<b>12</b>, the system load RL decreases, the input current Iin starts to decrease. Then the input current feedback control signal Vcomp<b>2</b> increases and exists the loop control. The current flowing through the inductor L becomes positive, and the integrated circuit automatically enters the buck mode from the boost mode.</p><p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. <b>8</b></figref> illustrates a working waveform of the integrated circuit during the transition between the buck mode and the boost mode according to another embodiment of the present invention. As shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, wherein Iin represents the input current, IL<b>1</b> represents the first current sensing signal, and VOUT represents the output voltage. Before t<b>11</b>, the power source VS is configured to provide the continuous 5V output voltage VOUT to the system load RL. The first current sensing signal IL<b>1</b> is positive, and the integrated circuit controls the first switch Q<b>1</b> and the second switch Q<b>2</b> to operate in the buck mode. The power source VS is configured to provide the charging current to charge the battery BATT.</p><p id="p-0053" num="0052">At time t<b>21</b>, the power source VS is unplugged suddenly, the output voltage VOUT starts to decrease. When the output voltage VOUT decrease to a threshold (e.g., 4.8V), the output voltage feedback control signal Vcomp<b>1</b> starts to decrease and is selected by the selection circuit <b>105</b> to be the feedback control signal VCOMP, to perform the loop control. The integrated circuit automatically enters the boost mode from the buck mode, the battery BATT is configured to discharge for supplying power to the system load RL. The current flowing through the inductor L changes the direction, the output voltage VOUT is regulated to approach 4.8V. At time t<b>22</b>, the power source VS is plugged and available again. The power source VS is configured to supply the system load RL with 5V output voltage VOUT and charge the battery BATT. The output voltage feedback control signal Vcomp<b>1</b> increases and exists the loop control. The current flowing through the inductor L becomes positive, and the integrated circuit automatically enters the buck mode from the boost mode.</p><p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates a flow chart of a method <b>700</b> for operating an integrated circuit shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> according to one embodiment of the present invention. The integrated circuit has a power input pin, a system output pin, a switching node pin, a ground pin, a first switch, a second switch and an external inductor. The first switch is coupled between the system output pin and the switching node pin. The second switch is coupled between the switching node pin and the ground pin. The external inductor is coupled between the system node pin and a rechargeable battery. As shown in <figref idref="DRAWINGS">FIG. <b>9</b></figref>, the method <b>700</b> comprises steps <b>701</b>-<b>707</b>.</p><p id="p-0055" num="0054">At step <b>701</b>, a minimum value among a plurality of feedback control signals is selected as a selected feedback control signal.</p><p id="p-0056" num="0055">In one embodiment, the plurality of feedback control circuits are configured to provide the plurality of feedback control signals. Each of feedback control circuits is configured to receive a corresponding feedback signal and a corresponding reference signal and provide a corresponding feedback control signal at a corresponding output terminal based on a difference between the corresponding feedback signal and the corresponding reference signal. In one embodiment, an input current feedback control signal is provided based an input current flowing into the power input pin of the integrated circuit and an input current reference signal.</p><p id="p-0057" num="0056">At step <b>702</b>, a first current sensing signal is provided by sensing a current flowing through the inductor.</p><p id="p-0058" num="0057">At step <b>703</b>, a second current sensing signal is provided by adding a DC offset voltage on to the first current sensing signal. In one embodiment, the valley of the second current sensing signal is higher than 0.</p><p id="p-0059" num="0058">At step <b>704</b>, the selected feedback control signal is compared with the second current sensing signal, and a first comparison signal is provided based on the comparison result.</p><p id="p-0060" num="0059">At step <b>705</b>, a constant time control signal with a constant time tconst is generated based on the first comparison signal.</p><p id="p-0061" num="0060">At step <b>706</b>, a first control signal and a second control signal are provided based on the first comparison signal and the constant time control signal.</p><p id="p-0062" num="0061">In one embodiment, in the buck mode, the first switch is turned OFF based on the first comparison signal, and is turned ON based on the constant time control signal. In the boost mode, the constant time control signal is configured to turn ON the second switch, and the first comparison signal is configured to turn OFF the second switch.</p><p id="p-0063" num="0062">At step <b>707</b>, the first switch and the second switch are controlled complementarily to operate in the buck mode or the boost mode, and the OFF-time of the first switch and the ON-time of the second switch are both controlled to be the constant time tconst.</p><p id="p-0064" num="0063">In one embodiment, the method <b>700</b> further comprises generating a first driving signal and a second driving signal based on the first control signal and the second control signal, and setting a dead time between the first driving signal and the second driving signal.</p><p id="p-0065" num="0064">In this document, relational terms such as first and second, and the like may be used solely to distinguish one entity or action from another entity or action without necessarily requiring or implying any actual such relationship or order between such entities or actions. Numerical ordinals such as &#x201c;first,&#x201d; &#x201c;second,&#x201d; etc. simply denote different singles of a plurality and do not imply any order or sequence unless specifically defined by the claim language. The sequence of the text in any of the claims does not imply that process steps must be performed in a temporal or logical order according to such sequence unless it is specifically defined by the language of the claim. The process steps may be interchanged in any order without departing from the scope of the invention as long as such an interchange does not contradict the claim language and is not logically nonsensical.</p><p id="p-0066" num="0065">Obviously many modifications and variations of the present invention are possible in light of the above teachings. It is therefore to be understood that within the scope of the appended claims the invention may be practiced otherwise than as specifically described. It should be understood, of course, the foregoing disclosure relates only to a preferred embodiment (or embodiments) of the invention and that numerous modifications may be made therein without departing from the spirit and the scope of the invention as set forth in the appended claims. Various modifications are contemplated and they obviously will be resorted to by those skilled in the art without departing from the spirit and the scope of the invention as hereinafter defined by the appended claims as only a preferred embodiment(s) thereof has been disclosed.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. An integrated circuit for a power management circuit having an external inductor and a rechargeable battery, the integrated circuit comprising:<claim-text>a power input pin;</claim-text><claim-text>a system output pin configured to output an output voltage to a load;</claim-text><claim-text>a switching mode pin coupled to the battery through the inductor;</claim-text><claim-text>a ground pin;</claim-text><claim-text>a first switch having a first terminal, a second terminal and a control terminal, wherein the first terminal is coupled to the system output pin, the second terminal is coupled to the switching node pin, and the control terminal is driven by a first driving signal;</claim-text><claim-text>a second switch having a first terminal, a second terminal and a control terminal, wherein the first terminal is coupled to the switching node pin, the second terminal is coupled to the ground pin, and the control terminal is driven by a second driving signal; and</claim-text><claim-text>a control circuit configured to control the first switch and the second switch to operate in a buck mode or a boost mode, and wherein the first switch is turned OFF for a constant time, and the second switch is turned ON for the constant time.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the control circuit comprises:<claim-text>a switch controller configured to generate a first control signal and a second control signal based on a plurality of feedback control signals and a first current sensing signal indicative of a current flowing through the inductor;</claim-text><claim-text>a first driving circuit configured to provide the first driving signal to the first switch based on the first control signal; and</claim-text><claim-text>a second driving circuit configured to provide the second driving signal to the second switch based on the second control signal.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The integrated circuit of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the switch controller comprises:<claim-text>a plurality of feedback control circuits configured to provide the plurality of feedback control signals, wherein each of the plurality of feedback control circuits is configured to receive a corresponding feedback signal and a corresponding reference signal and provide a corresponding feedback control signal at a corresponding output terminal based on a difference between the corresponding feedback signal and the corresponding reference signal;</claim-text><claim-text>a selection circuit configured to receive the plurality of feedback control signals and select a minimum value among the feedback control signals as a feedback control signal;</claim-text><claim-text>an offset voltage generator configured receive the first current sensing signal and provide a DC offset voltage and a second current sensing signal, wherein the second current sensing signal is generated by adding the DC offset voltage on to the first current sensing signal;</claim-text><claim-text>a first comparison circuit configured to compare the feedback control signal to the second current sensing signal and provide a first comparison signal at an output terminal;</claim-text><claim-text>a constant time generator coupled to the output terminal of the first comparison circuit to receive the first comparison signal and configured to provide a constant time control signal having the constant time; and</claim-text><claim-text>a logic circuit configure to generate the first control signal and the second control signal based on the first comparison signal and the constant time control signal.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The integrated circuit of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the valley of the second current sensing signal is higher than zero.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The integrated circuit of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the constant time generator comprises:<claim-text>a current source having an input terminal configured to receive a supply voltage and an output terminal;</claim-text><claim-text>a first capacitor having a first terminal and a second terminal, wherein the first terminal is coupled to the output terminal of the current source, and the second terminal is coupled to the ground pin;</claim-text><claim-text>a discharge switch having a first terminal, a second terminal and a control terminal, wherein the first terminal is coupled to the output terminal of the current source, the second terminal is coupled to the ground pin, and the control terminal is coupled to the first comparison circuit to receive the first comparison signal; and</claim-text><claim-text>a second comparison circuit configured to compare a voltage at the first terminal of the first capacitor with a reference voltage and provide the constant time control signal.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The integrated circuit of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the logic circuit comprises:<claim-text>a flip-flop having a set terminal, a reset terminal, an output terminal and a reverse output terminal, wherein the set terminal is coupled to the constant time generator to receive the constant time control signal, the reset terminal is coupled to the first comparison circuit to receive the first comparison signal, the flip-flop provides the first control signal at the output terminal and the second control signal at the reversing output terminal.</claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The integrated circuit of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the first driving circuit and the second driving circuit both comprise a dead time control circuit.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. A power management circuit, comprising:<claim-text>a power input pin coupled a power source to receive an input voltage;</claim-text><claim-text>a system output pin configured to output an output voltage to a load;</claim-text><claim-text>a switching mode pin coupled to a rechargeable battery through an inductor;</claim-text><claim-text>a ground pin;</claim-text><claim-text>a first switch having a first terminal, a second terminal and a control terminal, wherein the first terminal is coupled to the system output pin, the second terminal is coupled to the switching node pin, and the control terminal is driven by a first driving signal;</claim-text><claim-text>a second switch having a first terminal, a second terminal and a control terminal, wherein the first terminal is coupled to the switching node pin, the second terminal is coupled to the ground pin, and the control terminal is driven by a second driving signal; and</claim-text><claim-text>a control circuit configured to control the first switch and the second switch to operate in a buck mode or a boost mode, and wherein the first switch is turned OFF for a constant time, and the second switch is turned ON for the constant time.</claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The power management circuit of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the control circuit comprises:<claim-text>a switch controller configured to generate a first control signal and a second control signal based on a plurality of feedback control signals and a first current sensing signal indicative of a current flowing through the inductor;</claim-text><claim-text>a first driving circuit configured to provide the first driving signal to the first switch based on the first control signal; and</claim-text><claim-text>a second driving circuit configured to provide the second driving signal to the second switch based on the second control signal.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The power management circuit of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the switch controller comprises:<claim-text>a plurality of feedback control circuits configured to provide the plurality of feedback control signals, wherein each of feedback control circuits is configured to receive a corresponding feedback signal and a corresponding reference signal and provide a corresponding feedback control signal at a corresponding output terminal based on a difference between the corresponding feedback signal and the corresponding reference signal;</claim-text><claim-text>a selection circuit configured to receive the plurality of feedback control signals and select a minimum value among the feedback control signals as a feedback control signal;</claim-text><claim-text>an offset generator configured receive the first current sensing signal and provide a second current sensing signal, wherein the second current sensing signal is provided by adding an DC offset voltage on to the first current sensing signal;</claim-text><claim-text>a first comparison circuit configured to compare the selected feedback control signal to the second current sensing signal and provide a first comparison signal at an output terminal;</claim-text><claim-text>a constant time generator coupled to the output terminal of the first comparison circuit to receive the first comparison signal and configured to provide a constant time control signal having the constant time; and</claim-text><claim-text>a logic circuit configure to generate the first control signal and the second control signal based on the first comparison signal and the constant time control signal.</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The power management circuit of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the valley of the second current sensing signal is higher than 0.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The power management circuit of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the constant time generator comprises:<claim-text>a current source having an input terminal configured to receive a supply voltage and an output terminal;</claim-text><claim-text>a first capacitor having a first terminal and a second terminal, wherein the first terminal is coupled to the output terminal of the current source, and the second terminal is coupled to the ground pin;</claim-text><claim-text>a discharge switch having a first terminal, a second terminal and an output terminal, wherein the first terminal is coupled to the output terminal of the current source, the second terminal is coupled to the ground pin, and the control terminal is coupled to the first comparison circuit to receive the first comparison signal; and</claim-text><claim-text>a second comparison circuit configured to compare a voltage at the first terminal of the first capacitor with a reference voltage and provide the constant time control signal.</claim-text></claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The power management circuit of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the logic circuit comprises:<claim-text>a flip-flop having a set terminal, a reset terminal, an output terminal and a reverse output terminal, wherein the set terminal is coupled to the constant time generator to receive the constant time control signal, the reset terminal is coupled to the first comparison circuit to receive the first comparison signal, the flip-flop provides the first control signal at the output terminal and the second control signal at the reverse output terminal.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The power management circuit of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the first driving circuit and the second driving circuit both comprise a dead time control circuit.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. A method of operating a power management circuit having a first pin, a second pin, a third pin, a fourth pin, a first switch coupled between the second pin and the third pin, a second switch coupled between the third pin and the fourth pin, an external inductor coupled between the third pin and a rechargeable battery, wherein the method comprising:<claim-text>selecting a minimum value among a plurality of feedback control signals as a feedback control signal;</claim-text><claim-text>providing a first current sensing signal by sensing a current flowing through the inductor;</claim-text><claim-text>providing a second current sensing signal by adding a DC offset voltage on to the first current sensing signal;</claim-text><claim-text>comparing the selected feedback control signal with the second current sensing signal and providing a first comparison signal;</claim-text><claim-text>generating a constant time control signal with a constant time based on the first comparison signal;</claim-text><claim-text>providing a first control signal and a second control signal based on the first comparison signal and the constant time control signal; and</claim-text><claim-text>configuring the first switch and the second switch to operate in a buck mode or a boost mode, respectively controlling the OFF-time of the first switch and the ON-time of the second switch to be the constant time.</claim-text></claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising:<claim-text>generating a first driving signal and a second driving signal based on the first control signal and the second control signal; and</claim-text><claim-text>setting a dead time between the first driving signal and the second driving signal.</claim-text></claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising:<claim-text>providing an input current feedback control signal based on an input current flowing into the first pin of the integrated circuit; and</claim-text><claim-text>providing an output voltage feedback control signal base on a voltage at the second pin of the integrated circuit.</claim-text></claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein in the buck mode, engaging the first comparison signal to control the turning-off of the first switch and engaging the constant time control signal to control the turning-on of the first switch.</claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein in the boost mode, engaging the constant time control signal to control the turning-on of the second switch and engaging the first comparison signal to control the turning-off of the second switch.</claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the valley of the second current sensing signal is higher than zero.</claim-text></claim></claims></us-patent-application>