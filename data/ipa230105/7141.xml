<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230007142A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230007142</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17940453</doc-number><date>20220908</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>JP</country><doc-number>2020-200659</doc-number><date>20201203</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>1</main-group><subgroup>32</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>1</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>1</main-group><subgroup>32267</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>1</main-group><subgroup>00352</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>1</main-group><subgroup>00249</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>1</main-group><subgroup>00129</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">IMAGE INSPECTION APPARATUS AND MISALIGNMENT MEASUREMENT METHOD</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>17527349</doc-number><date>20211116</date></document-id><parent-grant-document><document-id><country>US</country><doc-number>11477341</doc-number></document-id></parent-grant-document></parent-doc><child-doc><document-id><country>US</country><doc-number>17940453</doc-number></document-id></child-doc></relation></continuation></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only"><addressbook><orgname>KONICA MINOLTA, INC.</orgname><address><city>Tokyo</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>NOMURA</last-name><first-name>Shoichi</first-name><address><city>Machida-shi</city><country>JP</country></address></addressbook></inventor></inventors></us-parties><assignees><assignee><addressbook><orgname>KONICA MINOLTA, INC.</orgname><role>03</role><address><city>Tokyo</city><country>JP</country></address></addressbook></assignee></assignees></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">An image inspection apparatus includes a first reader and a second reader that acquire read images by respectively reading one side and the other side of a sheet having an image printed thereon, a first background material and a second background material provided at positions as the backgrounds of the sheet in reading by the first reader and the second reader respectively, and a hardware processor that acquires sheet outline information from the read images and measures misalignment of the image with respect to the sheet based on the acquired sheet outline information. The hardware processor acquires read images with the first background material and the second background material having different densities, and acquires sheet outline information of one read image by estimating the sheet outline information of the one read image based on sheet outline information of the other of the read images.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="100.08mm" wi="158.75mm" file="US20230007142A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="223.01mm" wi="141.39mm" orientation="landscape" file="US20230007142A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="199.22mm" wi="147.49mm" file="US20230007142A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="223.69mm" wi="152.57mm" file="US20230007142A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="234.87mm" wi="153.25mm" file="US20230007142A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="107.87mm" wi="113.11mm" file="US20230007142A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="230.72mm" wi="151.81mm" orientation="landscape" file="US20230007142A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="220.81mm" wi="144.36mm" orientation="landscape" file="US20230007142A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="105.83mm" wi="149.27mm" file="US20230007142A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="228.43mm" wi="154.52mm" orientation="landscape" file="US20230007142A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading><p id="p-0002" num="0001">The entire disclosure of Japanese Patent Application No. 2020-200659 filed on Dec. 3, 2020 is incorporated herein by reference in its entirety.</p><heading id="h-0002" level="1">BACKGROUND</heading><heading id="h-0003" level="1">Technological Field</heading><p id="p-0003" num="0002">The present invention relates to an image inspection apparatus and a misalignment measurement method.</p><heading id="h-0004" level="1">Description of the Related Art</heading><p id="p-0004" num="0003">As a means of adding values to printed materials, an image forming apparatus that uses a fifth color toner in addition to the usual YMCK color materials (toner in electrophotography; hereinafter referred to as &#x201c;toner&#x201d;) is known. In particular, printing using white toner is increasing, and black sheets are effective sheets to bring out the effect of white toner.</p><p id="p-0005" num="0004">In order to adjust the deviation of the image position with respect to the sheet in the image forming apparatus, for example, small marks (images for position measurement, called Tombo) that do not affect the image content are printed at the four corners of the sheet, and distances between the sheet outline (sheet edges) and the marks are measured by reading the positions with a reader. This technology is known to adjust the position of the image to the sheet (image position adjustment) during printing. Generally, the background material of the reader is black to make it easier to read white sheet, so it is difficult to read the sheet outline of black sheet. Therefore, there are some devices that can switch the density of the background material appropriately according to the sheet used for printing. For example, JP 2020-57902 A describes a background material that can switch between multiple background colors, and switches the color of the background material appropriately according to the color of the sheet. Also, JP H11-266343 A discloses a method of constructing a texture pattern on the background material capable of identifying the sheet.</p><heading id="h-0005" level="1">SUMMARY</heading><p id="p-0006" num="0005">There is also an adjustment method for image position adjustment (called real-time image position adjustment) in which, for example, a mark is printed on each of the four corners of the sheet in a job (print job) (at the position where the sheet will be separated from the image content when it is cut in the post-process), the position of the sheet outline and the mark are read by a reader and the distance between them is measured, and based on the measurement results, fluctuations in image position during a job is suppressed. In this case, the sheet may be conveyed and printed from different sheet trays for each page in a single job, for example, there may be a job where one sheet tray is for white sheet and the other for black sheet. In this case, if the sheet color is frequently switched from one page to another, the technology of JP 2020-57902 A has a problem that it becomes difficult to control the switching of the background material. Therefore, the background material is fixed to either white or black during the job, but if the density of the sheet and the background material are similar, the possibility of errors such as errors in reading the sheet outline increases. As a result, for example, when the system is used in combination with a control that updates the image position adjustment value during a printing job to detect sudden misalignment (positional deviation) of image during the job and eliminate the printed material concerned or resolve the image misalignment, the system excessively detects image misalignment on pages where the density of the sheet and the background material are similar. As a result, there are problems such as excessive sheet loss and variations in adjustment values during the job, resulting in unstable image positions.</p><p id="p-0007" num="0006">The background material described in JP H11-266343 A does not have the above-mentioned problem, but the extraction of the sheet outline is complicated. Furthermore, though the printed image may be inspected or breakdown of the image forming apparatus may be diagnosed or predicted on the basis of the read image by the reader, the technology described in JP H11-266343 A has the problem that the texture of the background material becomes transparent when the sheet is thin and makes the background material transparent.</p><p id="p-0008" num="0007">The present invention was made in consideration of these issues, and aims to enable easy and reliable acquisition of sheet outline information without switching the background material during a job.</p><p id="p-0009" num="0008">To achieve at least one of the abovementioned objects, according to an aspect of the present invention, an image inspection apparatus reflecting one aspect of the present invention is an image inspection apparatus including: a first reader that acquires a first read image by reading one side of a sheet so as to include a background, the sheet having an image printed thereon; a first background material that is provided at a position which serves as the background of the sheet in reading of the sheet by the first reader; a second reader that acquires a second read image by reading the other side of the sheet so as to include a background; a second background material that is provided at a position which serves as the background of the sheet in reading of the sheet by the second reader; and a hardware processor that acquires sheet outline information of the sheet from the first read image and the second read image, and measures misalignment of the image with respect to the sheet based on the acquired sheet outline information, wherein the hardware processor acquires a first read image and a second read image by causing each of the first background material and the second background material to have a different density, and acquires sheet outline information of one read image that is one of the first read image and the second read image by performing estimation of estimating the sheet outline information of the one read image based on sheet outline information of the other of the first read image and the second read image.</p><p id="p-0010" num="0009">To achieve at least one of the abovementioned objects, according to another aspect of the present invention, a misalignment measurement method reflecting one aspect of the present invention is a misalignment measurement method in an image inspection apparatus, the method including acquiring a first read image and a second read image by causing each of a first background material and a second background material to have a different density, and acquiring sheet outline information of one read image which is one of the first read image and the second read image by estimating the sheet outline information of the one read image based on sheet outline information of the other of the first read image and the second read image, wherein the image inspection apparatus includes: a first reader that acquires the first read image by reading one side of a sheet having an image printed thereon so as to include a background; the first background material that is provided at a position which serves as the background of the sheet in reading the sheet by the first reader; a second reader that acquires the second read image by reading the other side of the sheet so as to include a background; and the second background material that is provided at a position which serves as the background of the sheet in reading the sheet by the second reader, and the image inspection apparatus acquires the sheet outline information of the sheet from each of the first read image and the second read image, and measures misalignment of the image with respect to the sheet based on the acquired sheet outline information.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0006" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0011" num="0010">The advantages and features provided by one or more embodiments of the invention will become more fully understood from the detailed description given hereinafter and the appended drawings which are given by way of illustration only, and thus are not intended as a definition of the limits of the present invention, and wherein:</p><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram showing the configuration of an image forming apparatus;</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>2</b>A</figref> is a view showing an example of a read image when white sheet is used as the sheet for printing and black is used as the background material;</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>2</b>B</figref> is a view showing an example of a read image when white sheet is used as the sheet for printing and white is used as the background material;</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>3</b>A</figref> is a view showing an example of a read image when black sheet is used as the sheet for printing and white is used as the background material;</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>3</b>B</figref> is a view showing an example of a read image when black sheet is used as the sheet for printing and black is used as the background material;</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a flowchart showing the flow of reading position correction processing executed by the controller in <figref idref="DRAWINGS">FIG. <b>1</b></figref>;</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a diagram to illustrate the correction values calculated by the reading position correction processing;</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a flowchart showing the flow of printing processing executed by the controller in <figref idref="DRAWINGS">FIG. <b>1</b></figref>;</p><p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a figure showing an example of position adjustment marks used in preliminary adjustment;</p><p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. <b>8</b>A</figref> is a view showing the range of adjustment values and adjustment images for each adjustment item of vertical magnification, horizontal magnification, vertical image shift, and horizontal image shift;</p><p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. <b>8</b>B</figref> is a view showing the range of adjustment values and adjustment images for each adjustment item of rotation, skew, vertical trapezoid, horizontal trapezoid, curvature, and curvature position;</p><p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a view showing an example of a calibration chart; and</p><p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is an example of a configuration in which the image forming apparatus and an image inspection apparatus are separate units.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0007" level="1">DETAILED DESCRIPTION OF EMBODIMENTS</heading><p id="p-0025" num="0024">Hereinafter, one or more embodiments of the present invention will be described in detail with reference to the drawings. However, the scope of the invention is not limited to the disclosed embodiments or the illustrated examples.</p><p id="p-0026" num="0025">[Configuration of Image Forming Apparatus]</p><p id="p-0027" num="0026">First, the configuration of an image forming apparatus <b>100</b> in an embodiment of the present invention will be described.</p><p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. <b>1</b></figref> shows the main configuration of the image forming apparatus <b>100</b>.</p><p id="p-0029" num="0028">As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the image forming apparatus <b>100</b> includes a controller <b>101</b>, a communication unit <b>102</b>, an operation display unit <b>103</b>, a storage <b>104</b>, a sheet feeding unit <b>105</b>, a conveyance unit <b>106</b>, an image former <b>150</b>, a fixing unit <b>160</b>, a reading unit <b>170</b>, a colorimeter <b>180</b>, an image analyzer <b>190</b>, and the like.</p><p id="p-0030" num="0029">The controller <b>101</b> is equipped with a CPU (Central Processing Unit), ROM (Read Only Memoiy), RAM (Random Access Memory), etc. The CPU of the controller <b>101</b> reads a program according to the processing contents from the ROM, expands it to the RAM, and centrally controls the operation of each part of the image forming apparatus <b>100</b> in cooperation with the expanded program.</p><p id="p-0031" num="0030">The communication unit <b>102</b> is configured by including a communication control card such as a LAN (Local Area Network) card, for example, and is used to transfer various data to and from external devices connected to a communication network such as a LAN or WAN (Wide Area Network).</p><p id="p-0032" num="0031">The operation display unit <b>103</b> has a display <b>103</b><i>a</i>, such as a liquid crystal display or organic EL display, and an input interface <b>103</b><i>b </i>configured by including various operation keys, a touch panel superimposed on the screen of the display <b>103</b><i>a</i>, and a numeric keypad. The operation display unit <b>103</b> displays various information in the display <b>103</b><i>a</i>, and also converts the user's input operations to the input interface <b>103</b><i>b </i>into operation signals, which are output to the controller <b>101</b>.</p><p id="p-0033" num="0032">The storage <b>104</b> is composed of, for example, a non-volatile semiconductor memory (so-called flash memory), a hard disk drive, or the like. The storage <b>104</b> stores various data including various setting information for the image forming apparatus <b>100</b>, job information (setting information of a job and image data of the job), and the like. The job setting information includes information on the sheet trays <b>105</b><i>a </i>to <b>105</b><i>c </i>for each page used in the job, the color and size of the sheet, the sheet type, the total number of printed sheets, and information on adjustment functions performed simultaneously or in conjunction with the job. The storage <b>104</b> also stores information on the sheet set in the sheet trays <b>105</b><i>a </i>to <b>105</b><i>c </i>(size, color, type, etc.). The storage <b>104</b> also stores adjustment values for each adjustment item of image position adjustment (front and back adjustment values, respectively), reading position correction values to be described later, and the like.</p><p id="p-0034" num="0033">The sheet feeding unit <b>105</b> feeds sheets stored in the sheet trays <b>105</b><i>a </i>to <b>105</b><i>c </i>according to instructions from the controller <b>101</b>.</p><p id="p-0035" num="0034">The conveyance unit <b>106</b> has a sheet feed path and a plurality of conveyance roller pairs such as resist roller pairs, and conveys the sheet fed from the sheet feeding unit <b>105</b> in the image forming apparatus <b>100</b>. The conveyance unit <b>106</b> has a reversing path <b>106</b><i>a</i>, and can reverse the front and back of the sheet and convey it to the image former <b>150</b>. The conveyance unit <b>106</b> has a sheet discharge path <b>106</b><i>b </i>for discharging the printed matter and a sheet waste path <b>106</b><i>c </i>for discharging waste sheet.</p><p id="p-0036" num="0035">The image former <b>150</b> prints an image on the sheet based on the job setting information and the image data to generate the printed matter. In this embodiment, the image former <b>150</b> has an image forming unit for each color of Y (yellow), M (magenta), C (cyan), K (black), and S (specific color; white in this embodiment), and is capable of printing using white toner in addition to images using normal Y, M, C, and K toner.</p><p id="p-0037" num="0036">The fixing unit <b>160</b> fixes the toner image printed on the sheet with heat and pressure.</p><p id="p-0038" num="0037">In <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the image former <b>150</b> is illustrated as an image former of the so-called electrophotographic method, but the printing method is not limited thereto, and the image former <b>150</b> may be an image former of other printing methods such as, for example, the inkjet method.</p><p id="p-0039" num="0038">The reading unit <b>170</b> reads the printed matter printed by the image former <b>150</b> and fixed by the fixing unit <b>160</b>, acquires the read image data (read image), and outputs it to the image analyzer <b>190</b>. The reading unit <b>170</b> is configured, for example, by a color scanner or the like. The reading unit <b>170</b> is located downstream of the image former <b>150</b> and the fixing unit <b>160</b>, and is configured to read images during sheet conveyance.</p><p id="p-0040" num="0039">The reading unit <b>170</b> consists of a reader <b>170</b><i>a </i>(first reader) that reads an image on one side of the sheet to obtain a read image (first read image), and a reader <b>170</b><i>b </i>(second reader) that reads an image on the other side of the sheet to obtain a read image (second read image). The reader <b>170</b><i>a </i>and the reader <b>170</b><i>b </i>are respectively provided with a background material <b>171</b><i>a </i>(first background material) and a background material <b>171</b><i>b </i>(second background material) at opposite positions across the sheet feed path. Each of the background materials <b>171</b><i>a </i>and <b>171</b><i>b</i>, for example, has two surfaces (black surface <b>1711</b> and white surface <b>1712</b>) with different densities (colors), as shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, and can be rotated by a drive source not shown in the figure to switch the background surface (the surface facing the corresponding reader) to black or white when reading the sheet.</p><p id="p-0041" num="0040">The reading size by the reading unit <b>170</b> is larger than the sheet size, and it is configured to be able to read a wider area than the sheet size, including the sheet outline and the area of the background material in the vicinity.</p><p id="p-0042" num="0041">In addition, a colorimeter <b>180</b> is provided downstream in the sheet conveyance direction of the reading unit <b>170</b>. The colorimeter <b>180</b> is composed of a spectrophotometer or the like, and is capable of high-precision color measurement. The colorimeter <b>180</b> has a background material <b>181</b> across the sheet feed path. The background material <b>181</b> is composed of, for example, white color.</p><p id="p-0043" num="0042">The image analyzer <b>190</b> analyzes the read images output by the reading unit <b>170</b>, calculates the amount of misalignment with respect to the sheet of the image (image contents) printed on each of the surface and the back of the sheet, the adjustment value of the misalignment, the adjustment value of the color of the images, and the like, and outputs the results to the controller <b>101</b>. The image analyzer <b>190</b> is realized, for example, by cooperation between the CPU of the controller <b>101</b> and a program stored in ROM.</p><p id="p-0044" num="0043">The controller <b>101</b>, the reading unit <b>170</b>, and the image analyzer <b>190</b> constitute the image inspection apparatus of the present invention, which reads a sheet having an image printed thereon and acquires read images, acquires sheet outline information from the acquired read images, and measures misalignment of the printed image based on the acquired sheet outline information. Also, the controller <b>101</b> and the image analyzer <b>190</b> constitute a measurement unit of the present invention.</p><p id="p-0045" num="0044">[Operation of Image Forming Apparatus]</p><p id="p-0046" num="0045">Next, the operation in the image forming apparatus <b>100</b> will be described.</p><p id="p-0047" num="0046">As described above, in the case where the backgrounds (background surfaces of the background materials <b>171</b><i>a </i>and <b>171</b><i>b</i>) of the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b </i>when reading the sheet are both fixed to the black surface <b>1711</b> or the white surface <b>1712</b>, the sheet outline may not be read depending on the density of the sheet used for printing. On the other hand, it may be difficult to control the switching of the background surfaces of background material <b>171</b><i>a </i>and background material <b>171</b><i>b </i>according to the density of the sheet used for each page in a job. Therefore, in the present embodiment, when executing a job, the background material <b>171</b><i>a </i>and the background material <b>171</b><i>b </i>are controlled by the controller <b>101</b> so that their densities (referring to the densities of the background surfaces) are different, i.e., the background surface of one background material is the black surface <b>1711</b> and the background surface of the other background material is the white surface <b>1712</b>. However, in this case, depending on the density of the sheet, the sheet outline may not be read by the reader <b>170</b><i>a </i>or the reader <b>170</b><i>b. </i></p><p id="p-0048" num="0047">For example, when a white sheet is used as the sheet for printing, the sheet outline (indicated by the dotted line) is clear in the read image of the reader whose background surface is set to the black surface <b>1711</b>, as shown in <figref idref="DRAWINGS">FIG. <b>2</b>A</figref>, but in the read image of the reader whose background surface is set to the white surface <b>1712</b>, as shown in <figref idref="DRAWINGS">FIG. <b>2</b>B</figref>, the sheet outline is not clear because the density difference between the background and the sheet outline (indicated by the dotted line) is small.</p><p id="p-0049" num="0048">On the other hand, when a black sheet is used as the sheet for printing, the sheet outline (indicated by the dotted line) is clear in the read image of the reader whose background surface is set to the white surface <b>1712</b>, as shown in <figref idref="DRAWINGS">FIG. <b>3</b>A</figref>, but the sheet outline is not clear in the read image of the reader whose background surface is set to the black surface <b>1711</b>, as shown in <figref idref="DRAWINGS">FIG. <b>3</b>B</figref> because the density difference between the background and the sheet outline (indicated by the dotted line) is small.</p><p id="p-0050" num="0049">Therefore, in this embodiment, the reading result of the sheet outline by one reader is estimated and acquired based on the reading result of the sheet outline of the other reader.</p><p id="p-0051" num="0050">Here, since the distance between the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b </i>is narrow and the sheet-through path is simple, it can be predicted that the sheet that has passed through the reader <b>170</b><i>a </i>will maintain its state and pass through the reader <b>170</b><i>b </i>after a certain time. Also, since the sheet outlines read by the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b </i>are obtained by reading the same sheet with almost no interval between them, it can be regarded that the same sheet outline was read (in fact, the sheet outline of the reader <b>170</b><i>a </i>and the sheet outline of the reader <b>170</b><i>b </i>are mirror images of each other).</p><p id="p-0052" num="0051">Therefore, when it is difficult (or impossible) to extract the sheet outline information from the read image read by one of the readers <b>170</b><i>a </i>and <b>170</b><i>b</i>, the sheet read by the other reader is considered to have passed through the one of the readers at a certain interval, and the coordinates of each vertex of the sheet outline information obtained from the read image of the other reader are converted to the position of the mirror image, and the outline connecting the converted vertices is shifted based on the difference in the reading positions of the sheet in the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b</i>, and is estimated to be the sheet outline information read by the one reader.</p><p id="p-0053" num="0052">In this case, it is necessary to know precisely the difference in the position of the sheet outline with respect to the reading area of the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b</i>. Specifically, it is necessary to know the shift amount in the sheet feed direction (&#x394;y) and the shift amount in the sheet feed crossing direction (&#x394;x) of the sheet outline in the read image of the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b</i>. This can be determined from the results of correctly measuring the sheet outline information from the read images of both the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b</i>. Furthermore, it is desirable that the magnification difference between the two readers is also ascertained and converting is made similarly. Since the sheet-feed characteristics vary depending on the sheet characteristics, it is desirable to obtain and store in the storage <b>104</b> the above-mentioned &#x394;x and &#x394;y for each sheet type.</p><p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a flowchart showing the flow of the reading position correction processing for calculating, as correction values, the shift amount&#x394;y in the sheet feed direction and the shift amount&#x394;x in the sheet feed crossing direction of the sheet outline in the read images acquired by reading the same sheet with the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b</i>. The reading position correction processing is performed by cooperation between the CPU of the controller <b>101</b> and the program stored in the ROM.</p><p id="p-0055" num="0054">First, the controller <b>101</b> feeds, from the sheet feeding unit <b>105</b>, a sheet on which the sheet outline is easily read by both the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b </i>(Step S<b>1</b>).</p><p id="p-0056" num="0055">In step S<b>1</b>, a gray sheet having a density difference from both the black surface <b>1711</b> and the white surface <b>1712</b> may be fed from the sheet feeding unit <b>105</b> so that the sheet outline can be easily read by both the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b</i>. Alternatively, the background surface of both the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b </i>may be set to the black surface <b>1711</b> and a white sheet may be fed. Or, the background surface of both the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b </i>may be set to the white surface <b>1712</b> and a black sheet may be fed.</p><p id="p-0057" num="0056">Next, the controller <b>101</b> causes both the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b </i>to read the fed sheet and acquire read images (Step S<b>2</b>).</p><p id="p-0058" num="0057">Next, the controller <b>101</b> extracts the sheet outline information from each read image of the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b </i>(Step S<b>3</b>).</p><p id="p-0059" num="0058">For example, searching is performed from each end of the read image, and the edge whose density difference from the end of the read image is a predetermined value or more is extracted as the sheet outline information.</p><p id="p-0060" num="0059">Then, the controller <b>101</b> calculates the shift amount &#x394;y in the sheet feed direction and the shift amount&#x394;x in the sheet feed crossing direction of the sheet outline information in the read images of the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b </i>as correction values and stores them in the storage <b>104</b> (Step S<b>4</b>), and ends the reading position correction processing.</p><p id="p-0061" num="0060">In step S<b>4</b>, for example, as shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, the controller <b>101</b> calculates the distance&#x394;<b>1</b> between the end E<b>1</b> in the sheet feed direction of the read image acquired by one reader and the end E<b>2</b> in the sheet feed direction of the sheet outline information extracted from the read image, and the distance &#x394;<b>2</b> between the end E<b>3</b> in the sheet feed direction of the image obtained by performing mirror image processing to the read image acquired by the other reader and the end E<b>4</b> in the sheet feed direction of the sheet outline information extracted from the read image to which the mirror image processing was performed. Then, &#x394;<b>1</b>-&#x394;<b>2</b> is calculated as the shift amount &#x394;y in the sheet feed direction. The controller <b>101</b> also calculates the shift amount &#x394;x in the sheet feed crossing direction between the sheet outline information extracted from the read image acquired by one reader and the sheet outline information extracted from the image obtained by performing mirror image processing to the read image acquired by the other reader.</p><p id="p-0062" num="0061">Although the above explanation assumes that mirror image processing is performed, it is sufficient to know the positional relationship between the edges (sides) of the corresponding sheet outlines in the two read images, and it is not necessary to perform mirror image processing. In step S<b>4</b>, the shift amount &#x394;x and &#x394;y are calculated, but the correction values for magnification and slope may be calculated in the same way.</p><p id="p-0063" num="0062">Since the interval between the readers <b>170</b><i>a </i>and <b>170</b><i>b </i>is short, once the correction values are obtained for one sheet, the correction values can be diverted to other sheets, but it is preferable to measure for each sheet size and type (fine paper, coated paper, etc.) and store them in the storage <b>104</b>.</p><p id="p-0064" num="0063">In addition, the controller <b>101</b> measures the densities of the background and the sheet from the read images acquired from both the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b </i>(i.e., read images of both sides) by the image analyzer <b>190</b> during the job. When the difference in density between the background and the sheet in both read images is greater than a predetermined value (i.e., when sheet outline information can be extracted from the read images of both the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b</i>), the above shift amounts &#x394;x and &#x394;y may be automatically calculated, and the correction values that have already been calculated and stored in the storage <b>104</b> may be updated. The shift amounts &#x394;x and &#x394;y calculated in the past may be accumulated and stored in the storage <b>104</b> or RAM, and the average values of the accumulated shift amounts &#x394;x and &#x394;y may be stored in the storage <b>104</b> as the correction values.</p><p id="p-0065" num="0064">Next, the operation of the image forming apparatus <b>100</b> when printing based on the job is actually performed will be described.</p><p id="p-0066" num="0065"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a flowchart showing the flow of the printing processing executed by the controller <b>101</b>. The printing processing shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref> is executed by the cooperation of the CPU of the controller <b>101</b> and the program stored in the RAM when the job is selected and the start of printing is instructed.</p><p id="p-0067" num="0066">First, the controller <b>101</b> performs preliminary adjustment of the image positions on the front and back sides, respectively (Step S<b>11</b>).</p><p id="p-0068" num="0067">The preliminary adjustment is an image position adjustment performed prior to printing based on the job so that a printout with the image printed at the correct position on the sheet is obtained from the beginning of printing. This image position adjustment performed prior to printing based on the job may be performed for sheet trays having sheets replaced at least at timings immediately after replacement of sheets in sheet trays <b>105</b><i>a </i>to <b>105</b><i>c </i>and prior to the execution of the job, and need not be performed prior to the execution of every job.</p><p id="p-0069" num="0068">In the preliminary adjustment, first, the image former <b>150</b> prints the position adjustment marks (called Tombo) T<b>1</b> to T<b>4</b> shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref> on the front and back sides of the sheet by placing the position adjustment marks on inner sides of the four edges (sides) of the sheet of the type used for printing of the job by a preset distance (e.g., 10 mm from the sheet edge). The printed matter is read by the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b</i>, and each of the obtained read images is analyzed by the image analyzer <b>190</b> to extract the sheet outline and to obtain the positional relationship (distance) between the sheet edge and the position adjustment mark T<b>1</b> to T<b>4</b>. Then, for each of the front and back sides, the image analyzer <b>190</b> calculates the adjustment values of the plurality of adjustment items so that the distance between the sheet edge and the position adjustment mark T<b>1</b> to T<b>4</b> (the position adjustment mark facing each sheet edge) becomes a predetermined distance, and stores them in the storage <b>104</b>.</p><p id="p-0070" num="0069">Here, depending on the color of the sheet to be adjusted, the controller <b>101</b> sets the background surfaces of the background materials <b>171</b><i>a </i>and <b>171</b><i>b </i>facing the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b</i>, respectively, to the black surface <b>1711</b> or the white surface <b>1712</b> before reading. For example, in the case of white sheet, the black surface <b>1711</b> is set as the background surface, and in the case of black sheet, the white surface <b>1712</b> is set as the background surface. In the case of other sheet colors, the black surface <b>1711</b> or the white surface <b>1712</b>, whichever is easier to read or more readable (e.g., whichever has a larger density difference from the sheet) is selected as the background surface. In the case of black sheet, as for the color tone of the mark to be printed on the sheet, it is preferable to use a color material that can be easily distinguished from the sheet, such as white toner or white ink. Also, in step S<b>11</b>, a background surface of a same color may be set for the background materials <b>171</b><i>a </i>and <b>171</b><i>b. </i></p><p id="p-0071" num="0070">In order to improve the measurement accuracy and stability, the preliminary adjustment may be repeated multiple times. In addition, a plurality of printed matters with the above-mentioned position adjustment marks T<b>1</b> to T<b>4</b> may be printed, adjustment values may be calculated for each of the printed matters, and the average values thereof may be used.</p><p id="p-0072" num="0071">The adjustment items to be calculated in the image position adjustment including the preliminary adjustment include the vertical and horizontal magnifications, the vertical and horizontal image shifts, the rotation, the skew, the vertical trapezoid, the horizontal trapezoid, the curvature, and the curvature position. The adjustment values for these adjustment items can be obtained independently. Among the above adjustment items, the image positions of the four corners can be adjusted by adjusting the magnifications, image shifts, rotation, skew, vertical trapezoid, and horizontal trapezoid adjustment items. In addition, the curvature and curvature position are used to adjust image distortion, and by using these items together, more advanced image position adjustment is possible.</p><p id="p-0073" num="0072"><figref idref="DRAWINGS">FIG. <b>8</b>A</figref> shows the range of adjustment values and adjustment image for each of the following adjustment items: vertical magnification, horizontal magnification, vertical image shift, and horizontal image shift. <figref idref="DRAWINGS">FIG. <b>8</b>B</figref> shows the range of adjustment values and adjustment image for each of the following adjustment items: rotation, skew, vertical trapezoid, horizontal trapezoid, curvature, and curvature position. The thick arrow A in <figref idref="DRAWINGS">FIG. <b>8</b>A</figref> and <figref idref="DRAWINGS">FIG. <b>8</b>B</figref> indicates the sheet conveyance direction, the solid line indicates the sheet, the dotted line indicates the target image position, the hatch indicates the current image position, and the thin arrow indicates the direction in which the image moves due to the adjustment. As for the image shift in <figref idref="DRAWINGS">FIG. <b>8</b>A</figref>, since it is difficult to see both the current image position and the target image position when both of them are shown, the current image position and the target image position are shown as the same and only the direction in which the image moves due to the adjustment is shown in the figure. In <figref idref="DRAWINGS">FIG. <b>8</b>B</figref>, the solid line indicating the sheet is omitted.</p><p id="p-0074" num="0073">In this embodiment, the preliminary adjustment is described as automatically acquiring the adjustment value for each adjustment item shown in <figref idref="DRAWINGS">FIGS. <b>8</b>A and <b>8</b>B</figref> by reading the sheet on which the position adjustment marks T<b>1</b> to T<b>4</b> are printed with the reading unit <b>170</b> and analyzing the obtained read image with the image analyzer <b>190</b>. However, it is also possible to acquire the value for each adjustment item by accepting, from the operation display unit <b>103</b>, the input of the adjustment value for each adjustment item determined by the user visually observing the sheet on which the position adjustment marks T<b>1</b> to T<b>4</b> are printed.</p><p id="p-0075" num="0074">In the preliminary adjustment of step S<b>11</b>, color adjustment (calibration and output sheet density adjustment) as well as image position adjustment may be performed.</p><p id="p-0076" num="0075">Calibration during printing is performed, for example, to adjust the color tone of the finished product to be equivalent to that of offset printing with ink when printing is performed with electrophotographic toner based on image data created for printing with offset printing ink. For example, a calibration chart (single-sided chart) consisting of a plurality of patches with predetermined combinations of tone values, as shown in <figref idref="DRAWINGS">FIG. <b>9</b></figref>, is printed on a sheet, and by measuring the printing results, a so-called color profile is created to adjust the color tone of the printed image. In printing based on the job, the color tone of the printed image is managed by applying the created color profile. There are many existing methods for managing the color tone, but they all assume that the patches on the calibration chart are read correctly. Therefore, a dedicated colorimeter <b>180</b>, which can obtain correct readings (reading values), is placed near the reading unit <b>170</b> (in this case, the reader <b>170</b><i>b</i>). The patch P<b>1</b> is read by the colorimeter <b>180</b> and the reader <b>170</b><i>b</i>, which reads the printing surface during one side printing, and a conversion formula is calculated to convert the readings of the reader <b>170</b><i>b </i>into the readings of the colorimeter <b>180</b>. In addition, the patches P<b>2</b>, which contain more various tone values, are read by the reader <b>170</b><i>b</i>, and based on these measured values and the conversion formula described above, calibration is performed, a color profile is generated, and stored in the storage <b>104</b>.</p><p id="p-0077" num="0076">In this calibration, it is important that the surface of the background material <b>181</b> facing the colorimeter <b>180</b> and the background surface of the background material <b>171</b><i>b </i>are white and coincide with each other. Therefore, the controller <b>101</b> performs the above calibration with the color of the background surface of the background material <b>171</b><i>b </i>set to white.</p><p id="p-0078" num="0077">The color management of electrophotographic printed matter is usually controlled by the toner amount of the toner image transferred onto the intermediate transfer belt, which is detected by an image sensor installed to face the intermediate transfer belt. However, in this case, the actual printed results will vary depending on the transfer efficiency when the toner image is transferred to the sheet and the quality of the toner and color appearance on the sheet. Therefore, for more accurate color management, there is a method of reading the image printed on the sheet with the reading unit <b>170</b> and managing the color of the printed matter based on the tone values. This is called output sheet density adjustment.</p><p id="p-0079" num="0078">The output sheet density adjustment is carried out in the following three steps.</p><heading id="h-0008" level="2">&#x3c;Step A&#x3e;</heading><p id="p-0080" num="0079">First, as in the calibration described above, the same color patch (patch P<b>1</b>) on the calibration chart is read by the colorimeter <b>180</b> and the reader <b>170</b><i>b</i>, and the readings are compared to generate a conversion formula for converting the readings of the reader <b>170</b><i>b </i>into the readings of the colorimeter <b>180</b>.</p><heading id="h-0009" level="2">&#x3c;Step B&#x3e;</heading><p id="p-0081" num="0080">Using the conversion formula of Step A, the reading results of patch P<b>2</b> of the calibration chart by the reader <b>170</b><i>b </i>is converted, and a tone conversion table (or a spatial LUT (look-up table) with a similar effect) is created based on the measurement results obtained. This is the color management state before the job starts.</p><heading id="h-0010" level="2">&#x3c;Step C&#x3e;</heading><p id="p-0082" num="0081">During execution of the job, a color patch for inspection is printed on the periphery of the image (cut-off area) on the sheet, or an area that can be used for color inspection is designated in the image (image content) to be printed by the job. The color patch for inspection or the designated area is read by the reader <b>170</b><i>b</i>, and the process conditions at the time of printing and the tone conversion characteristics of the printed image are changed (tone conversion table or spatial LUT is changed) to reduce the variation of the reading result, and color tone management is performed.</p><p id="p-0083" num="0082">In step S<b>11</b> of <figref idref="DRAWINGS">FIG. <b>6</b></figref>, step A to step B are performed in the case where output sheet density adjustment is performed, and step C is performed during the job.</p><p id="p-0084" num="0083">The goal of output sheet density adjustment is to maintain the current color tone (e.g., to suppress changes in color tone during a job), regardless of the current color tone. For this reason, the background surface of the background material <b>171</b><i>b </i>may be white or black, but it is a requirement that the same one is always used from Step A to Step C. In Step C, during a duplex printing job, an area of image content may be specified to calculate the variation of the reading result, and if the background color of the background material <b>171</b><i>b </i>is white, the image on the back side may be captured and become noise. In general, since a white sheet is often used, it is preferable to cause the background material <b>171</b><i>b </i>of the reader <b>170</b><i>b</i>, which is used for both single-sided and duplex printing (to read the printed surface (front) of one side printing), to be black to facilitate reading the outline of the white sheet. Therefore, when implementing output sheet density adjustment, it is preferable to set the background surface of the background material <b>171</b><i>b </i>to black and the background surface of the background material <b>171</b><i>a </i>to white.</p><p id="p-0085" num="0084">Next, the controller <b>101</b> controls the density composition of the background materials <b>171</b><i>a </i>and <b>171</b><i>b</i>, and sets one background surface to the black surface <b>1711</b> and the other to the white surface <b>1712</b> (step S<b>12</b>).</p><p id="p-0086" num="0085">For example, in step S<b>12</b>, the background surface of the background material <b>171</b><i>a </i>may be set to black and the background surface of the background material <b>171</b><i>b </i>may be set to white, or vice versa.</p><p id="p-0087" num="0086">For example, a color surface (e.g., black surface <b>1711</b>) having a large density difference from the sheet color (e.g., white) that accounts for a larger number of printed sheets can be set for the background material (background material <b>171</b><i>b </i>in this embodiment) facing the reader (reader <b>170</b><i>b </i>in this embodiment) that faces the printing surface of one side printing.</p><p id="p-0088" num="0087">Furthermore, for example, the density of the background surface of the sheet of the background material <b>171</b><i>a </i>and the background material <b>171</b><i>b </i>may be controlled according to the adjustment function which measures the image positional shift (misalignment) on each of the sheets at the time of the job and which is performed simultaneously or in conjunction with the job.</p><p id="p-0089" num="0088">For example, when implementing the output sheet density adjustment, the background surface of the background material <b>171</b><i>b </i>facing the reader <b>170</b><i>b </i>that reads the printed surface during one side printing is set to black and the other background surface is set to white, as described above.</p><p id="p-0090" num="0089">When calibration with the colorimeter <b>180</b> is used together, the background surface of the background material <b>171</b><i>b </i>facing the reader <b>170</b><i>b </i>that reads the printed surface during one side printing is set to white and the other to black, in accordance with the time of implementing the calibration.</p><p id="p-0091" num="0090">For example, the density of the background surfaces of the background materials <b>171</b><i>a </i>and <b>171</b><i>b </i>may be controlled based on the configuration of the sheet set in the sheet tray used in the job among the sheets set in the sheet trays <b>105</b><i>a </i>to <b>105</b><i>c. </i></p><p id="p-0092" num="0091">For example, a sensor for measuring the sheet color may be provided in the image forming apparatus <b>100</b> (e.g., in each sheet tray), and the density of the background surfaces of the background materials <b>171</b><i>a</i>, <b>171</b><i>b </i>may be controlled based on the measurement results of the sensor in the sheet tray used in the job. Instead of the above sensor, the sheet color (e.g., the density converted from each RGB tone value) may be measured using the tone values of the images read by the readers <b>170</b><i>a </i>and <b>170</b><i>b</i>. Also, the density composition of the background surfaces of the background materials <b>171</b><i>a </i>and <b>171</b><i>b </i>may be controlled based on the specification of the density composition of the background materials <b>171</b><i>a </i>and <b>171</b><i>b </i>by the user from the input interface <b>103</b><i>b. </i></p><p id="p-0093" num="0092">Since all the sheets set in the sheet trays <b>105</b><i>a </i>to <b>105</b><i>c </i>may be the same, the controller <b>101</b> may control the density composition of the background surfaces of the background materials <b>171</b><i>a </i>and <b>171</b><i>b </i>so that they have different densities (white or black) from each other when the difference in density between the sheets set in the plurality of sheet trays used in the job among the sheet trays <b>105</b><i>a </i>to <b>105</b><i>c </i>is large (larger than a predetermined threshold). On the other hand, for example, if all the sheets set in the sheet trays <b>105</b><i>a </i>to <b>105</b><i>c </i>are white, both the background material <b>171</b><i>a </i>and the background material <b>171</b><i>b </i>may be set to black. In addition, when the difference in density between the sheets set in the plurality of sheet trays used in the job among the sheet trays <b>105</b><i>a </i>to <b>105</b><i>c </i>is large (larger than a predetermined threshold), the controller <b>101</b> can display a message on the display <b>103</b><i>a </i>prompting the user to set the density of the background surface of each of the background material <b>171</b><i>a </i>and the background material <b>171</b><i>b </i>to a different density.</p><p id="p-0094" num="0093">Next, the controller <b>101</b> acquires the reading position correction value between the reader <b>170</b><i>a </i>and the reader <b>170</b><i>b </i>from the storage <b>104</b> (step S<b>13</b>).</p><p id="p-0095" num="0094">Next, the controller <b>101</b> starts printing based on the job (Step S<b>14</b>) and performs printing for one sheet (Step S<b>15</b>).</p><p id="p-0096" num="0095">In Step S<b>15</b>, the controller <b>101</b> first applies image processing (e.g., rasterization processing, color conversion using a color profile stored in the storage <b>104</b>, processing based on a tone conversion table, etc.) to the image data to be printed. Next, the controller <b>101</b> controls the image former <b>150</b> and the conveyance unit <b>106</b>, etc. to print, on the sheet, the image having the image content based on the image data in the printing area on the sheet and having the image with the position adjustment marks T<b>11</b> to T<b>14</b> (see <figref idref="DRAWINGS">FIG. <b>2</b></figref>) added to the margins of the sheet (a predetermined distance from the edge of the sheet), and to fix the image to the sheet by the fixing unit <b>160</b>. At this time, the position of the image to be printed on the sheet is adjusted based on the adjustment value of each adjustment item stored in the storage <b>104</b>. In the case of duplex printing, the controller <b>101</b> controls the conveyance unit <b>106</b> and the image former <b>150</b> to perform duplex printing.</p><p id="p-0097" num="0096">Next, the controller <b>101</b> causes the reading unit <b>170</b> to read the printed sheet (printed matter) and obtain read images including the sheet outlines and the background materials (step S<b>16</b>).</p><p id="p-0098" num="0097">Here, the read images are obtained in tone values of R, G, and B. The read image from the reader <b>170</b><i>a </i>and the read image from the reader <b>170</b><i>b </i>are acquired.</p><p id="p-0099" num="0098">Next, the controller <b>101</b> causes the image analyzer <b>190</b> to perform analysis to determine whether the density difference between the density of the sheet and the density of the background (background material) in either one of the two acquired read images is smaller than a predetermined value (step S<b>17</b>).</p><p id="p-0100" num="0099">For example, since the background material should have been read at the end of the read image, the tone value at the end of the read image (the average of the tone values around the end) is acquired as the density of the background. For example, when calculating the reading position correction value, the distance from the end of the read image to the sheet outline, etc., is acquired, and the tone value (average value) at the point where the distance from the end is slightly farther than the acquired distance is acquired as the sheet density. Then, by comparing the acquired tone values, the density difference between the sheet density and the background density is calculated. The predetermined value to be used in step S<b>17</b> is a value obtained experimentally or empirically such that the extraction of sheet outline information may fail if the density difference is smaller than the predetermined value.</p><p id="p-0101" num="0100">One of the background surfaces of the background material <b>171</b><i>a </i>and the background material <b>171</b><i>b </i>is set to black and the other to white, which eliminates the possibility that the difference between the density of the sheet and the density of the background is smaller than the predetermined value in both of the two read images and the possibility that the sheet outline information cannot be extracted.</p><p id="p-0102" num="0101">Here, the optical density based on reflectance may be used as the density, but in this embodiment, the tone value output from the reading unit <b>170</b> (the tone value of the read image) is used as the density. Specifically, among the tone values of the three channels (R, G, and B) of the read image, the tone value of the channel in which the difference between the tone value of the background (background material) and the tone value of the sheet is the largest is used as the density.</p><p id="p-0103" num="0102">If it is determined that the density difference between the density of the sheet and the density of the background material in both of the two read images is a predetermined value or greater (step S<b>17</b>; NO), the controller <b>101</b> causes the image analyzer <b>190</b> to perform the process of extracting the sheet outline information from the two read images (step S<b>18</b>).</p><p id="p-0104" num="0103">For example, a search is performed from the ends of the four sides of the read images, and when the edge with a density difference from each end that is a predetermined value or more is detected, the information of the detected edge is extracted as sheet outline information. Even in the case where the density difference between the sheet density and the background density is determined to be the predetermined value or more, there may be cases where the calculation of the density difference fails, for example, when the density difference between the sheet density and the background density is incorrectly calculated from within the image content. In this case, the sheet outline information may not be extracted.</p><p id="p-0105" num="0104">Next, the controller <b>101</b> determines whether or not the sheet outline information has been extracted from the two read images (Step S<b>19</b>).</p><p id="p-0106" num="0105">If it is determined that the sheet outline information has been extracted from the two read images (Step S<b>19</b>; YES), the controller <b>101</b> shifts to Step S<b>21</b>.</p><p id="p-0107" num="0106">On the other hand, when it is determined in step S<b>17</b> that the density difference between the density of the sheet and the density of the background in one of the read images is smaller than a predetermined value (step S<b>17</b>; YES), or when it is determined in step S<b>19</b> that the sheet outline information of one of the read images has not been extracted (step S<b>19</b>; NO), the controller <b>101</b> uses the image analyzer <b>190</b> to acquire the sheet outline information of the read image for which the density difference between the density of the sheet and the density of the background is smaller or for which the sheet outline information was not extracted, by estimating it based on the sheet outline information of the other read image (Step S<b>20</b>), and then moves to Step S<b>21</b>.</p><p id="p-0108" num="0107">In Step S<b>20</b>, for example, the coordinates of each vertex of the sheet outline information of the other read image are converted to the position of the mirror image and further shifted byAx andAy to estimate the sheet outline information of the one read image (the one read image with the smaller difference in density between the density of the sheet and the density of the background material or the one read image for which the sheet outline information was not extracted). The correction values &#x394;x and &#x394;y are based on the sheet size and type.</p><p id="p-0109" num="0108">In step S<b>21</b>, the controller <b>101</b> measures the misalignment amount of the image with respect to the sheet using the extracted or estimated sheet outline information (step S<b>21</b>).</p><p id="p-0110" num="0109">For example, the controller <b>101</b> causes the image analyzer <b>190</b> to acquire the distances between the four sheet edges of the sheet outline and the corresponding position adjustment marks T<b>11</b> to T<b>14</b>. Then, the misalignment amount of the image with respect to the sheet is measured based on the acquired distances.</p><p id="p-0111" num="0110">Next, the controller <b>101</b> implements a process based on the misalignment amount (Step S<b>22</b>).</p><p id="p-0112" num="0111">For example, if the misalignment amount exceeds a predetermined threshold, the sheet read in step S<b>16</b> is output from the sheet waste path <b>106</b><i>c </i>as a waste sheet. If the misalignment amount is equal to or less than the predetermined threshold, the sheet read in step S<b>16</b> is output from the sheet discharge path <b>106</b><i>b </i>for printed matter.</p><p id="p-0113" num="0112">Based on the calculated misalignment amount, the adjustment value of each adjustment item for the image position to be acquired may be calculated and updated.</p><p id="p-0114" num="0113">When the output sheet density adjustment is performed, for example, based on the color of a predetermined area of the read image, the process conditions for printing and the tone conversion curve are changed.</p><p id="p-0115" num="0114">Next, the controller <b>101</b> determines whether printing of all sheets has been completed or not, and if it is determined that printing of all sheets has not been completed (step S<b>23</b>; NO), it returns to step S<b>15</b> and executes the processes of step S<b>15</b> to step S<b>22</b> for the next sheet.</p><p id="p-0116" num="0115">When it is determined that printing of all sheets has been completed (Step S<b>23</b>; YES), the controller <b>101</b> ends the printing processing.</p><p id="p-0117" num="0116">In the above printing processing, the estimation of the sheet outline information is performed when the density difference between the sheet and the background in the read image is smaller than a predetermined value. However, for example, the sheet outline information may be always estimated and the first sheet outline information candidate based on the estimation and the second sheet outline information candidate based on the actual measurement extracted from the read image may be compared so that the second sheet outline information candidate is adopted as the sheet outline information if the difference between the candidates is smaller than a predetermined value and the first sheet outline information candidate is adopted as the sheet outline information if the difference is large, which is determined that the actual measurement is wrong.</p><p id="p-0118" num="0117">In the above-described printing processing, the case where position adjustment marks are printed and the misalignment amount of the image with respect to the sheet is measured based on the distance between the position adjustment marks and the sheet outline, but the method of measuring the misalignment amount is not limited thereto. For example, the controller <b>101</b> may predict, based on the image data of the job, the printing result when the image based on the image data is printed on the sheet to be used for printing, generate an image representing the printing image as the comparison image information, and calculate the misalignment amount on the basis of the positional relationship between the image content and the sheet outline in the generated comparison image information and the positional relationship between the image content and the sheet outline in the read image obtained by reading the print result of actually printing the image based on the image data of the job on the sheet with the reading unit <b>170</b>.</p><p id="p-0119" num="0118">As explained above, according to the image forming apparatus <b>100</b>, the controller <b>101</b> acquires two read images by causing the background material <b>171</b><i>a </i>and the background material <b>171</b><i>b </i>to have different densities, and acquires the sheet outline information from one of the acquired read images by estimating the sheet outline information on the basis of the sheet outline information of the other of the acquired read images.</p><p id="p-0120" num="0119">Therefore, even if the sheet outline information cannot be extracted from the read image taken from one of the readers <b>170</b><i>a </i>and <b>170</b><i>b</i>, the sheet outline information can be extracted from the other of the readers <b>170</b><i>a </i>and <b>170</b><i>b </i>since the background material <b>171</b><i>a </i>and the background material <b>171</b><i>b </i>are configured with different densities. Since the sheet outline information of the one of the readers <b>170</b><i>a </i>and <b>170</b><i>b </i>is estimated from the sheet outline information extracted from the read image of the other of the readers <b>170</b><i>a </i>and <b>170</b><i>b</i>, it is possible to easily and reliably acquire the sheet outline information without switching the background material during a job.</p><p id="p-0121" num="0120">The description in the above embodiment is a preferred example of the image forming apparatus of the present invention, and the present invention is not limited thereto.</p><p id="p-0122" num="0121">The above embodiment takes, as an example, a case where the image inspection apparatus of the present invention, which obtains sheet outline information from a read image obtained by reading a sheet having an image printed thereon and measures misalignment of the printed image based on the obtained sheet outline information, is integrally configured with the image forming apparatus <b>100</b> (incorporated in the image forming apparatus <b>100</b>). However, the image inspection apparatus of the present invention may be configured to be separate from the image forming apparatus.</p><p id="p-0123" num="0122"><figref idref="DRAWINGS">FIG. <b>10</b></figref> shows an example of a configuration in which the image forming apparatus (image forming apparatus <b>1</b>) and the image inspection apparatus (image inspection apparatus <b>2</b>) are configured separately. As shown in <figref idref="DRAWINGS">FIG. <b>10</b></figref>, the image inspection apparatus <b>2</b> is configured with a controller <b>201</b>, a communication unit <b>202</b>, a display <b>203</b><i>a</i>, an input interface <b>203</b><i>b</i>, a storage <b>204</b>, a conveyance unit <b>206</b>, and the like, in addition to the reading unit <b>170</b>, the colorimeter <b>180</b>, and the image analyzer <b>190</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>.</p><p id="p-0124" num="0123">As shown in <figref idref="DRAWINGS">FIG. <b>10</b></figref>, the image inspection apparatus <b>2</b> transfers a sheet one by one from a sheet bundle P of sheets (printed matters) on which an image has been printed by the image forming apparatus <b>1</b> to the reading unit <b>170</b>, and implements reading of the sheet on which the image has been printed. At that time, the controller <b>201</b> receives the necessary information among the job information (job setting information) used for printing in the image forming apparatus <b>1</b> from the image forming apparatus <b>1</b> via the communication unit <b>202</b> and stores the information in the storage <b>204</b>, in time for analysis of the read images by the image analyzer <b>190</b> prior to or during the measurement of misalignment based on the read images. The controller <b>201</b> performs image analysis of the read images acquired by the reading unit <b>170</b> by the image analyzer <b>190</b> based on the received job information, and measures the misalignment amount using the same method as in the above embodiment (the method described in steps S<b>17</b> to S<b>22</b> of <figref idref="DRAWINGS">FIG. <b>6</b></figref>). The job information includes multiple pieces of information necessary for measuring the misalignment, such as information on the sheet trays <b>105</b><i>a </i>to <b>105</b><i>c </i>used in the job of the image forming apparatus <b>1</b>, attributes such as the color, size, and sheet type of the sheet loaded in each of the sheet trays, the total number of printed sheets, and information on adjustment functions performed simultaneously or in conjunction with the job. The control of the density composition of the background materials <b>171</b><i>a </i>and <b>171</b><i>b </i>during image reading and the analysis control is the same as that of the image inspection apparatus incorporated in the image forming apparatus <b>100</b> described in the above embodiment, but since printing has already been completed, here control is performed to determine the good or bad printing result based on the measured misalignment amount, and discharge the defective print to the sheet discharge path <b>206</b><i>c </i>as a &#x201c;waste sheet&#x201d;. In addition, since it is necessary to reprint the print result that has been rejected as the waste sheet, reprint job information is generated for reprinting. The reprint job information may include an adjustment amount for correcting, for example, image misalignment, based on the factors of defective printing.</p><p id="p-0125" num="0124">In <figref idref="DRAWINGS">FIG. <b>10</b></figref>, the image inspection apparatus <b>2</b> conveys, to the reading unit <b>170</b>, the sheets one by one from the sheet bundle P of sheets (printed matters) on which images have been printed by the image forming apparatus <b>1</b>, to perform reading of the sheets on which images have been printed and analysis of the read images, etc. However, it is also possible to directly and sequentially convey the sheets on which images have been printed by the image forming apparatus <b>1</b> to the reading unit <b>170</b> to perform reading of the sheets on which images have been printed and analysis of the read images, etc.</p><p id="p-0126" num="0125">In addition, when density is used in the above embodiment, color may be used instead of density.</p><p id="p-0127" num="0126">The above description discloses an example of using a non-volatile semiconductor memory or hard disk as a computer readable medium storing a program for executing each processing, but the present invention is not limited to this example. As other computer readable media, it is also possible to apply portable recording media such as CD-ROM. A carrier wave may also be applied as a medium for providing program data via a communication line.</p><p id="p-0128" num="0127">In addition, the detailed configuration and detailed operation of each component forming the image inspection apparatus can be changed as necessary without departing from the scope of the invention.</p><p id="p-0129" num="0128">Although embodiments of the present invention have been described and illustrated in detail, the disclosed embodiments are made for purposes of illustration and example only and not limitation. The scope of the present invention should be interpreted by terms of the appended claims.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. An image inspection apparatus comprising:<claim-text>a first reader that acquires a first read image by reading one side of a sheet so as to include a background, the sheet having an image printed thereon;</claim-text><claim-text>a first background material that is provided at a position which serves as the background of the sheet in reading of the sheet by the first reader;</claim-text><claim-text>a second reader that acquires a second read image by reading the other side of the sheet so as to include a background;</claim-text><claim-text>a second background material that is provided at a position which serves as the background of the sheet in reading of the sheet by the second reader; and</claim-text><claim-text>a hardware processor that acquires sheet outline information of the sheet from the first read image and the second read image, and measures misalignment of the image with respect to the sheet based on the acquired sheet outline information, wherein</claim-text><claim-text>the hardware processor acquires a first read image and a second read image by causing each of the first background material and the second background material to have a different density, and acquires sheet outline information of one read image that is one of the first read image and the second read image by performing estimation of estimating the sheet outline information of the one read image based on sheet outline information of the other of the first read image and the second read image.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The image inspection apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the hardware processor performs the estimation in response to failure to extract the sheet outline information from the one of the first read image and the second read image.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The image inspection apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the hardware processor performs the estimation in response to a difference between a density of the sheet and a density of the background of the sheet being smaller than a predetermined value in the one of the first read image and the second read image.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The image inspection apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a tone value of the first read image or the second read image is used as the density.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The image inspection apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the hardware processor performs the estimation based on difference information between sheet outline information that is extracted from a first read image and sheet outline information that is extracted from a second read image, the first read image and the second read image being acquired by causing the first background material and the second background material to have a same density and reading both sides of the sheet with the first reader and the second reader.</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The image inspection apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the hardware processor performs the estimation based on accumulative information accumulating difference information between sheet outline information that is extracted from a first read image and sheet outline information that is extracted from a second read image, the first read image and the second read image being acquired by reading both sides of the sheet with the first reader and the second reader in a past.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The image inspection apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein<claim-text>the hardware processor compares a first sheet outline information candidate that is acquired for the one read image and that is based on the estimation with a second sheet outline information candidate that is extracted from the one read image and that is not based on the estimation, and</claim-text><claim-text>the hardware processor adopts the second sheet outline information candidate as the sheet outline information of the one read image in response to a difference between the first sheet outline information candidate and the second sheet outline information candidate being smaller than a predetermined value, and adopts the first sheet outline information candidate as the sheet outline information of the one read image in response to the difference being the predetermined value or more.</claim-text></claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The image inspection apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the hardware processor controls a density composition of the first background material and the second background material.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The image inspection apparatus according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising an input interface capable of specifying the density composition of the first background material and the second background material, wherein<claim-text>the hardware processor controls the density composition of the first background material and the second background material based on specification by the input interface.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The image inspection apparatus according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein<claim-text>the hardware processor measures the misalignment of the image with respect to the sheet for each sheet on which an image has been printed with an image forming apparatus by execution of a print job, and</claim-text><claim-text>the hardware processor controls the density composition of the first background material and the second background material according to an adjustment function that is performed simultaneously or in conjunction with the print job.</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The image inspection apparatus according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the hardware processor causes one of the first background material and the second background material to be black and causes the other of the first background material and the second background material to be white in performing output sheet density adjustment, the one of the first background material and the second background material facing a reader that reads a printed side in one-side printing.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The image inspection apparatus according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the hardware processor causes one of the first background material and the second background material to be white and causes the other of the first background material and the second background material to be black in performing calibration by a colorimeter, the one of the first background material and the second background material facing a reader that reads a printed side in one-side printing.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The image inspection apparatus according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein<claim-text>the hardware processor measures the misalignment of the image with respect to the sheet for each sheet on which an image has been printed with an image forming apparatus by execution of a print job, and</claim-text><claim-text>the hardware processor controls the density composition of the first background material and the second background material based on a configuration of a sheet that is set in a sheet tray used in the print job in the image forming apparatus.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The image inspection apparatus according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the hardware processor performs control to cause each of the first background material and the second background material to have the different density in response to a density difference of sheets exceeding a threshold that is determined in advance, the sheets being set in multiple sheet trays used in the print job in the image forming apparatus.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The image inspection apparatus according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the hardware processor causes a display to display a message prompting an operator to cause each of the first background material and the second background material to have the different density in response to a density difference of sheets exceeding a threshold that is determined in advance, the sheets being set in multiple sheet trays used in the print job in the image forming apparatus.</claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The image inspection apparatus according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the hardware processor controls the density composition of the first background material and the second background material based on a color measurement result of the sheet that is set in the sheet tray used in the print job by a sensor capable of measuring a color of a sheet set in each sheet tray in the image forming apparatus.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. A misalignment measurement method in an image inspection apparatus, the method comprising acquiring a first read image and a second read image by causing each of a first background material and a second background material to have a different density, and acquiring sheet outline information of one read image which is one of the first read image and the second read image by estimating the sheet outline information of the one read image based on sheet outline information of the other of the first read image and the second read image, wherein<claim-text>the image inspection apparatus includes:<claim-text>a first reader that acquires the first read image by reading one side of a sheet having an image printed thereon so as to include a background;</claim-text><claim-text>the first background material that is provided at a position which serves as the background of the sheet in reading the sheet by the first reader;</claim-text><claim-text>a second reader that acquires the second read image by reading the other side of the sheet so as to include a background; and</claim-text><claim-text>the second background material that is provided at a position which serves as the background of the sheet in reading the sheet by the second reader, and</claim-text></claim-text><claim-text>the image inspection apparatus acquires the sheet outline information of the sheet from each of the first read image and the second read image, and measures misalignment of the image with respect to the sheet based on the acquired sheet outline information.</claim-text></claim-text></claim></claims></us-patent-application>