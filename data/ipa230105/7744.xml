<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230007745A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230007745</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17942190</doc-number><date>20220912</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>325</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>J</subclass><main-group>7</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>J</subclass><main-group>7</main-group><subgroup>35</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>10</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>50</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>375</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>56</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>37</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20200101</date></cpc-version-indicator><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>325</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>J</subclass><main-group>7</main-group><subgroup>0024</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>J</subclass><main-group>7</main-group><subgroup>35</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20200101</date></cpc-version-indicator><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>10</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20200101</date></cpc-version-indicator><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>50</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20200101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>J</subclass><main-group>7</main-group><subgroup>00032</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20200101</date></cpc-version-indicator><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>375</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20200101</date></cpc-version-indicator><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>56</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20200101</date></cpc-version-indicator><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20200101</date></cpc-version-indicator><section>H</section><class>05</class><subclass>B</subclass><main-group>45</main-group><subgroup>37</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>F</section><class>21</class><subclass>S</subclass><main-group>6</main-group><subgroup>003</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">ADAPTABLE RECHARGING AND LIGHTING STATION AND METHODS OF USING THE SAME</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>17688872</doc-number><date>20220307</date></document-id><parent-status>PENDING</parent-status></parent-doc><child-doc><document-id><country>US</country><doc-number>17942190</doc-number></document-id></child-doc></relation></continuation><continuation><relation><parent-doc><document-id><country>US</country><doc-number>17163417</doc-number><date>20210130</date></document-id><parent-grant-document><document-id><country>US</country><doc-number>11272595</doc-number></document-id></parent-grant-document></parent-doc><child-doc><document-id><country>US</country><doc-number>17688872</doc-number></document-id></child-doc></relation></continuation><continuation><relation><parent-doc><document-id><country>US</country><doc-number>15019910</doc-number><date>20160209</date></document-id><parent-grant-document><document-id><country>US</country><doc-number>10910833</doc-number></document-id></parent-grant-document></parent-doc><child-doc><document-id><country>US</country><doc-number>17163417</doc-number></document-id></child-doc></relation></continuation><continuation><relation><parent-doc><document-id><country>US</country><doc-number>15006097</doc-number><date>20160125</date></document-id><parent-grant-document><document-id><country>US</country><doc-number>10784680</doc-number></document-id></parent-grant-document></parent-doc><child-doc><document-id><country>US</country><doc-number>15019910</doc-number></document-id></child-doc></relation></continuation><us-provisional-application><document-id><country>US</country><doc-number>62106857</doc-number><date>20150123</date></document-id></us-provisional-application></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Elevate Technologies Corporation</orgname><address><city>Fresno</city><state>CA</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Ellenberger</last-name><first-name>John C.</first-name><address><city>Fresno</city><state>CA</state><country>US</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">The present invention includes self-contained, rechargeable power systems for areas having unreliable electrical grids or no electrical grid at all, and methods related thereto. The system may include one or more solar panels of various sizes to provide an off-grid power generation source, battery receivers for receiving batteries of various chemistries, and a control circuitry that is operable to detect the voltage and/or current output of the batteries that are installed in the system to determine their specific battery chemistry and then adjust the charge algorithm of the batteries to optimize both the charge capacity and the cycle life of the batteries. The control circuitry may also be operable to switch configurations of the solar panels and/or the batteries to optimize performance of the system. The system may be operable to power one or more light emitters and/or external electronic devices connected through the system by a charge port.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="173.91mm" wi="151.55mm" file="US20230007745A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="150.28mm" wi="147.15mm" orientation="landscape" file="US20230007745A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="172.30mm" wi="159.26mm" file="US20230007745A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="163.15mm" wi="156.72mm" file="US20230007745A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="220.47mm" wi="131.74mm" orientation="landscape" file="US20230007745A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="146.56mm" wi="154.18mm" file="US20230007745A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="206.16mm" wi="159.09mm" orientation="landscape" file="US20230007745A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="219.03mm" wi="135.89mm" orientation="landscape" file="US20230007745A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="184.57mm" wi="140.97mm" orientation="landscape" file="US20230007745A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="180.59mm" wi="133.77mm" orientation="landscape" file="US20230007745A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00011" num="00011"><img id="EMI-D00011" he="216.83mm" wi="160.02mm" file="US20230007745A1-20230105-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00012" num="00012"><img id="EMI-D00012" he="158.58mm" wi="155.70mm" file="US20230007745A1-20230105-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00013" num="00013"><img id="EMI-D00013" he="72.22mm" wi="88.56mm" file="US20230007745A1-20230105-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00014" num="00014"><img id="EMI-D00014" he="222.50mm" wi="116.76mm" orientation="landscape" file="US20230007745A1-20230105-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00015" num="00015"><img id="EMI-D00015" he="205.91mm" wi="119.72mm" orientation="landscape" file="US20230007745A1-20230105-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">FIELD OF THE INVENTION</heading><p id="p-0002" num="0001">The present invention relates to a charging and lighting station, and more particularly to a solar power/recharging station for powering lights and external electronic devices, and recharging batteries and rechargeable devices, and methods of using and operating the same.</p><heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading><p id="p-0003" num="0002">Devices that utilize rechargeable batteries and solar panels for charging the batteries are useful in underdeveloped and developing countries and in remote areas where there is no reliable electric power grid system available. Alternative power sources for lighting, powering, and recharging devices are needed more than ever because of the modern proliferation and reliance upon electronic devices for communication.</p><p id="p-0004" num="0003">Such systems typically have set, inflexible designs that include only a specific solar panel or set of solar panels and a specifically designed battery or a specific type of battery. The designers of such systems often constrain the design, making it easier to implement. Thus, the purchaser or user of such systems typically has no options for expanding, changing, or adjusting such systems. Such systems typically have a specific, custom solar panel. This allows the designer to dictate the exact voltage and current input to the circuit. However, this eliminates choice and upgradeability for the consumer. For instance, to control the cost of the product a designer may choose to provide a low power solar panel with the product, which works well in regions of the world with high incidence of solar radiation. If that product is sold where cloud cover is common or there are other causes of low solar radiation, the custom solar panel will not produce enough energy to properly power the unit. And because the solar panel is custom to that specific product, adding another solar panel to the product or changing the panel to a higher power solar panel to increase the power input to the circuit is often not an option for the consumer.</p><p id="p-0005" num="0004">Such systems or products are also often designed around one battery type, requiring the purchaser to replace the batteries with the same type of batteries as needed. Some products will accept third party primary (non-rechargeable) or secondary (rechargeable) batteries of standard sizes that can be purchased from various sources. However, the user of the system or product may be confused because of there may be several different battery chemistries available within the same battery package size (e.g., AA, AAA, D, etc.). Consequently, systems limited to a single battery chemistry create a risk that the user will install batteries having chemistries that are incompatible with the system, which may result in system malfunction. Malfunctions can occur by installing batteries having a voltage that is too high or too low for the design of the system. Malfunctions can also occur if the product is designed to recharge secondary batteries, but primary batteries are improperly installed. In addition, the wrong type of secondary batteries (with the wrong chemistry) can damage the unit when they are installed because the system will apply its standard charging algorithm, which may be incompatible with the battery chemistry. A purchaser may even install several different types of batteries within the same unit, compounding these same issues. Thus, when the designer constrains the design to one specific battery type, the risk of product failure due to installation of the wrong battery type is then transferred to the purchaser, who is likely unaware of the risk.</p><p id="p-0006" num="0005">Other manufacturers may eliminate the risk that the user will install the wrong batteries by designing a custom battery pack that is unique to the product. The custom battery pack may or may not be replaceable. If the battery pack is not replaceable, the product is unfortunately discarded when the batteries no longer function, which results in waste of materials and costs. In other cases, the product may be designed to allow for the replacement of the custom battery pack when the battery pack no longer functions. Because custom battery packs are arranged and installed in the product in specific configurations and the product is not designed to charge one battery at a time, but rather the entire custom battery pack, the batteries are charged in an unbalanced and inefficient manner that results in a relatively short battery life for the custom battery packs and forces the consumer to purchase a new custom battery pack after relatively few charge-discharge cycles (referred to as &#x201c;cycle life&#x201d;). Typically, the custom battery packs are only available through the manufacturer who sells the custom replacement batteries to the consumer, or through 3<sup>rd </sup>party vendors selling knock-offs that are often inferior and/or unreliable.</p><p id="p-0007" num="0006">Consumers may not understand that all batteries (primary and secondary, and custom battery packs) fail over time. Because it is often not obvious to the consumer how to replace the batteries, the product is just set aside or thrown away, which may result in the consumer faulting the designer with creating a &#x201c;cheap&#x201d; product. For the consumer that understands that all batteries will eventually fail, there are other disadvantages to this design method. The need for a manufacturer or authorized agent to replace the batteries can put an undue hardship on the consumer, especially those in remote areas which have the greatest need for battery-powered products. Also, &#x201c;custom&#x201d; battery packs eliminate or reduce the likelihood of competition for the supply of replacement batteries for the manufacturer's product, likely resulting in higher costs for the replacement battery and the product.</p><p id="p-0008" num="0007">The battery design choices made by the product manufacturers are driven by the power requirements of the device, the battery chemistries that are currently available, the risk of damage to the particular product that would result from installation of the wrong battery type, and other factors. Once the manufacturer determines the appropriate battery type, required current, and required voltage, the designer then devises a way for the batteries to be installed in the product. The batteries will be configured in series, or parallel, or perhaps a combination of both. Due to the constrained design, the batteries will always be installed in the same arrangement so that the proper voltage and current are achieved for the product. As already noted, the designer will often choose to provide a custom battery pack with the configuration determined at the factory, and so that they cannot be changed by the consumer.</p><p id="p-0009" num="0008">The battery configuration chosen by the manufacturer may be optimized based on its discharge and charging characteristics. Since the battery's longevity depends on the output current, one battery configuration may be best for charging life of the battery pack. But based on the input power being used to charge the batteries, a different configuration may be best for charging. Since the user cannot be relied upon to change the physical configuration of the batteries based on the batteries being used to supply power versus when the batteries are being charged, the designer is forced to compromise one for the other when setting a single battery configuration.</p><p id="p-0010" num="0009">There are many different battery chemistries available to device manufacturers, For example, the AA and the size-compatible <b>14500</b> battery packages may be made to utilize primary, such as zinc-carbon (dry cell), zinc-chloride, alkaline, or lithium chemistry; or a secondary chemistry, such as NiCd, nickle-metal hydride (NiMH), NiZn, LiFePo<sub>4</sub>, or lithium ion chemistry. The different chemistries all have different strengths and weaknesses, and all have different monetary prices to the purchaser. Of the secondary type, different chemistries yield different amounts of recharge cycles (the literature reports anywhere from 200 recharge cycles to 2000 recharge cycles, depending on the chemistry). Also, different chemistries yield different output voltages, ranging from 1.2V nom to 3.7V nom. Different chemistries may also be best used with different discharge rates (the literature reports recommended discharge rates anywhere from 80 mA to 500 mA). In addition, as a battery is used to provide current, its voltage drops overtime in a way that is uniquely characteristic to its chemistry. Because of the variations in the characteristics of the different chemistries, it is standard practice for designers to first choose a specific battery chemistry in order to simplify the product design. Once the designer has determined the battery chemistry, the number of battery cells and their configuration (series, which adds voltage, or parallel, which adds current) must be selected, taking into account the overall range of voltage through the entire discharge curve of the particular battery type. These factors must be balanced with expected life of the battery and cost of the battery. These design choices result in a specific and constrained design. Often, the chosen design does not satisfy the preferences of all consumers, and thus may alienate a certain portion of the market.</p><p id="p-0011" num="0010">There are particular markets in which the availability of power sources, including batteries, is limited and presents a significant economic burden to the local population. Solar power has been promoted as a potential power source for these underserved regions, but power storage for use in dark and night conditions is necessary to provide a consistent power source for such regions. Systems that are limited to specific battery chemistries can present a problem for the populations in these remote areas because batteries may be relatively scarce and the specific battery type required by the system may not be available. Thus, there is a need for systems that are able to accommodate multiple power and battery options.</p><heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading><p id="p-0012" num="0011">The present invention includes devices that provide power for lighting and charging batteries and/or other electronic devices that can accommodate and utilize multiple power sources. More specifically, the present invention relates to a customizable system that may include one or more lamps and one or more charging ports for external electronic devices that utilize solar and/or battery power, where the system includes control circuitry that is operable to do one or more of the following: (1) identify the type of battery installed in the system, (2) switch between parallel and series configurations of batteries during charging based on the power available from a power source (e.g., solar panels), (3) switch between parallel and series configurations of batteries during discharging based on the chemistry of the batteries and the load on the system, (4) switch between power sources (e.g., from batteries to solar panels) for powering lights and/or charging an external electronic device, (5) switch between charging and discharging of one or more batteries installed therein based on the output of solar panels in the system and a load connected to the system, and (6) switch between series and parallel configurations of the solar panels to optimize voltage and current outputs for particular use (e.g., charging batteries and/or powering a load, such as a mobile phone), and methods of using the same. The invention is particularly suitable for use in remote locations and underdeveloped locations where there is no power grid system or the existing power grid system is unreliable.</p><p id="p-0013" num="0012">Embodiments of the present invention may combine solar power, lights, batteries, one or more electronic control circuitries, and microprocessor firmware in a novel lighting system that gives the consumer considerable choice and customizability in the use of the product while maximizing the life to the system and minimizing the overall cost of ownership of the system. The elements of the system can be mixed and matched depending on the user's preferences. For example, the system may include multiple lamps, one or more solar panels of various sizes (3 W, 5 W, 10 W, etc.), and rechargeable batteries of a particular size (e.g., AA/14500), but of variable chemistry (e.g., the system is designed such that it can accommodate multiple battery chemistries, such as NiCd, nickle-metal hydride [NiMH], NiZn, LiFePo<sub>4</sub>, or lithium ion chemistry). The system is operable to accommodate multiple battery chemistries because the firmware of the system is operable to (1) test and identify the type of batteries installed in the system based on the voltage output of the batteries, (2) adjust the configuration of the batteries between series and parallel based on the output voltage of the batteries or the voltage and current available to charge the batteries, and (3) apply a charging algorithm to the batteries that is adapted and optimized to the particular chemistry of the installed batteries. The system may be particularly useful in third world or lesser developed markets where power grids are absent or unreliable. The system provides a relatively inexpensive and self-charging light source and charging station.</p><p id="p-0014" num="0013">The present invention avoids design constraints that manufacturers have accepted in the past, particularly with respect to battery requirements and solar panel requirements. The charging and power system of the present invention may accept both primary (non-rechargeable) and secondary (rechargeable) batteries of the correct size (14500 package). The chemical class (e.g., NiCd, nickle-metal hydride [NiMH], NiZn, LiFePo<sub>4</sub>, lithium ion chemistry, etc.) of the installed batteries are identified by the microprocessor using a series of tests of electrical characteristics (e.g., voltage) of the batteries. The microprocessor may have firmware logic enabling it to analyze voltage readings from one or more configurations (e.g., series, parallel, and other specialized configurations) and other sensor readings (e.g., temperature sensor readings) sensors that are conductively connected to the batteries at one or more positions and/or are in proximity to the batteries. The battery class detection methods may allow the microprocessor to automatically adjust the configuration of multiple batteries installed in the system between series and parallel arrangements to optimize the battery discharge for powering the lighting elements connected to the system and, in some cases, powering one or more charging ports for external electronic devices. Embodiments of the present invention may also optimize the recharging of the installed batteries, in some cases while powering a USB charge port, based on power output from one or more solar panel(s). This invention also allows the user to power the system by installing primary batteries (which the system will recognize and not charge) or a mixed group of batteries of different chemistries (e.g., a alkaline battery in combination with NiMH batteries). This capability allows the user to power the system regardless of what kind of batteries are available to the purchaser. However, in such situations the batteries may only be used for lighting and charging electronics, and cannot be recharged.</p><p id="p-0015" num="0014">To prevent damage to the system, the embodiments of the present invention may include safeguards to protect the device from the installation of various battery types (e.g., from a voltage surge from the installation of relatively high voltage batteries, such as Li ion batteries) or mixed battery types, while still allowing operation of the lamp and charging of external electronic devices that may be electronically connected to a charge port in the system. The electronics and firmware are designed in a manner that allows the system to analyze the voltage and current characteristics of the batteries in order to determine the type of batteries (the battery chemistry) of the installed batteries. Thus, the system may automatically discern the type of chemistry of the batteries that are installed to determine whether the batteries can be charged, and, if so, what specific charge algorithm should be used for charging the installed batteries. In this manner, the system may optimize the usable life of the installed batteries.</p><p id="p-0016" num="0015">Additionally, the system's capability to identify the specific battery chemistry of the installed batteries allows the system to balance charge the specific battery type. Balance charging avoids the differential charging that results from charging batteries in series or parallel configurations. When multiple batteries are charged together, if their internal resistance is not precisely matched to one another, the battery with the lowest internal resistance accepts more current than the other batteries and therefore will charge faster than the other batteries. Over time, the differences between the batteries' charges can become large and the total charge of the group of batteries may be diminished. Balance charging, or charging one battery at a time to its full potential, avoids this issue. The present system is operable to balance charge a single battery installed in a battery receiver of the system (e.g., one battery slot of a plurality of battery slots in the system). The system is operable to recognize that a single battery has been installed and is operable to measure the individual voltage (or current) produced by the battery. The battery receivers may be configured into parallel configuration during the balance charge operation, allowing the single battery to be charged (e.g., if the battery receivers were configured in series, no complete circuit would be formed and no balance charging would be possible).</p><p id="p-0017" num="0016">The system may include firmware and at least one microprocessor electronically connected and arranged such that the power generated by the one or more solar panels of the system can be monitored and allocated to optimize the performance of the system, including powering lighting elements in the system and charging external electronic devices. The electronic circuitry, firmware, and microprocessor of the present invention may control the solar power generated by the one or more solar panels, the power allocated to the lighting source, the charging and discharging of the batteries (which may be of varying chemistry), and the charging of an attached external electronic device in a novel way to create a home lighting and charging system that gives the consumer a flexible and consistent system that can power lamps (and other devices) and charge in various off-the-grid environments and situations. The system also provides substantial customizability in the components of the system to allow the user to adjust the system to his needs within the environmental, market, and economic constraints of a particular location.</p><p id="p-0018" num="0017">As mentioned above, embodiments of the present invention may use solar panels as a power generation source. Certain semiconducting materials exhibit the photovoltaic (PV) effect of converting photons from the sun into the flow of electrons for use in electrical systems. PV materials may be configured in such a way as to create solar panels for the generation of electricity from solar radiation. The current and voltage generated by solar panel technologies are related to each other, but their relationship is highly non-linear. Thus, creating an operation point in which concomitantly generated current and voltage provides a maximum power point of operation (Power=generated voltage*generated current at that voltage) may provide for more efficient power generation. For instance, solar panels that are designed to charge 12V batteries have a maximum power point of approximately 17V. At 17V, a panel capable of producing 10 W will produce 0.59 A (17V*0.588 A=10 W). When the panel is not supplying any current (open circuit) the panel will produce 21.6V, but the power output is 0.0 W due to no current. When the panel produces its maximum current of 0.68 A, the voltage drops to a very low value, approximately 3V, thus producing only 2 W. Thus, it is desirable for the designer to provide a means to operate the panel at its maximum power point (MPP) whenever possible. <figref idref="DRAWINGS">FIG. <b>1</b></figref> provides a graph of current-voltage curves for a 12V, 10 W solar panel at several temperatures (25&#xb0; C., 50&#xb0; C., and 75&#xb0; C.). The current-voltage curves of <figref idref="DRAWINGS">FIG. <b>1</b></figref> demonstrate both the MPP of solar panels at a given light level (standard test conditions: irradiance at AM 1.5, 1 kw/m<sup>2</sup>) and the flexibility for harvesting current and voltage from the solar panel. For example, if more current is needed, more current can be drawn at the expense of a lower voltage. Such adjustments may be useful in non-optimal solar conditions. Under low light conditions, there may be insufficient current provided at the MPP to run lights and/or charge attached, external devices, and it may be advantageous to draw more current and lower voltage (e.g., move from the MPP to the left side of the current-voltage curve).</p><p id="p-0019" num="0018">The system may include one or more solar panels that can be used to generate power for charging the batteries installed in the system, to run the lighting elements (e.g., LEDs) of the system and other devices (e.g., USB compatible devices), to charge a device (e.g., a mobile phone) connected to a USB port, to charge secondary batteries installed in the system, or combinations thereof. The firmware allows the microprocessor to automatically recognize the power available from attached solar panels and optimize the battery configuration (e.g., parallel or series), the solar power configuration (e.g., parallel or series), and/or the charge algorithm for optimum performance (e.g., the amperage applied to the batteries) based on the dynamically changing output of the solar panel (which varies depending on season of the year, weather, and environmental conditions: clouds, low-light conditions, etc.).</p><p id="p-0020" num="0019">In some embodiments, the system may also include firmware and electronics capable of automatically adjusting the electronic arrangement of multiple solar panels (e.g., between series and parallel) and the output voltage to optimize the voltage available for charging of batteries installed in the system and the power supplied to devices connected to the system. While it is not required that multiple solar panels be installed in the system, the system is capable of connecting to multiple solar panels and manipulating the electronic configuration of the solar panels. The system may include a solar panel control logic circuit operable to switch a plurality of solar panels from parallel to series configuration and vice versa in response to a number of conditions in the system. For example, if there is a change in light conditions (e.g., the available sunlight is diminished due to an increase in cloud cover), the configuration of the solar panels may be changed from a parallel configuration to a series configuration in order to increase the total voltage produced by the solar panels. The solar panel control logic circuit may reverse the configuration back to a parallel arrangement if the solar conditions improve. Additionally, the solar panel control logic circuit may change the configuration of the solar panels from parallel to series if there are multiple simultaneous demands on the power generated by the solar panels, such as an external device (e.g., a mobile phone) plugged into a USB port of the system for charging while installed batteries are being charged. In response to the multiple demands on the system, the solar panel control logic circuit may configure the solar panels in a series configuration. The solar panel control logic may change the configuration of the solar panels in response to signals from the control processor of the system, which monitors voltage demands created by various elements in the system (such as the lighting elements, the batteries, and any connected external devices) through circuit connections to these elements, and analyzes the voltage demands created by these elements and signals the solar panel control logic to change the configuration of the solar panels between series and parallel based on the analyzed voltage and current demands.</p><p id="p-0021" num="0020">In addition, this product allows the consumer to choose solar panels that best fit their needs, based on size, price, and performance, and for customization at the user's convenience. For example, the user may choose a smaller solar panel initially when the system is purchased based on the lower cost of the solar panel, and in the future may purchase a larger panel or an additional small panel when funds are available to increase the power available to the system. When changes are made to the system (e.g., one or more solar panels are added), the system automatically recognizes the power available from attached solar panel(s) and optimizes the battery and/or panel configuration (series or parallel) and charge algorithm for optimum performance based on the dynamically changing output of the solar panel. Also, the system may recognize fluctuations in the power output of the solar panel(s) that may result from solar conditions (e.g., changes in sunlight due to overcast conditions), and adjust the battery and/or solar panel configuration and charge algorithm to balance and optimize the output of the system (lighting and charging of electronic devices) and the charging of the batteries. If the solar panel(s) cannot produce enough current at its maximum power point to provide power for lighting and/or charging an attached electronic device, the unit will adjust its configuration to draw maximum current, and then automatically adjust the configuration again when the maximum power point can be maintained.</p><p id="p-0022" num="0021">The system may use various kinds of lighting elements for providing light to the user, and may include multiple light emitters of the same or different kind. In some embodiments, the system may be limited to light emitting diodes (LED) as a light source. A light emitting diode draws a specific amount of current at a given voltage, where the higher the available supply of voltage, the more current the LED draws. The amount of light that an LED produces is a direct function of the amount of current going through it, yielding a relation to the voltage that is being supplied to it. When operated from battery power, the discharge curve of the battery needs to be accounted for; the more the battery discharges, the lower its voltage, and thus decreasing the amount of current going through the LED, and thus decreasing the amount of light that is produced by the LED. In addition, the life expectancy of a LED is determined by the amount of current going through the LED. If the current is below a certain threshold, the LED will last tens of thousands of hours. If the threshold is violated, the life the LED will be diminished. Also, LEDs have maximum current limitations, thus the amount of voltage that is supplied to them should be controlled in order to avoid damage to the LED.</p><p id="p-0023" num="0022">For the foregoing reasons, it is advantageous to monitor and control the amount of current and voltage supplied to an LED. Pulse width modulation (PWM) may be employed to maintain constant current through a relatively broad range of supply voltages. The firmware may control the PWM of the power source that powers LED lamp, where the power source may be the batteries, the solar panel operating at its maximum power point, or from low wattage solar panels operating at the LED operating voltage. For example, when the unit is connected to one or more solar panels and the power provided by the solar panel(s) is sufficient to power the LED lamp, the batteries may be electrically isolated from the lamp so that lamp is operated from solar panel and not from batteries to save the batteries' charges. PWM can be used to maintain the average current going through the LED within a closed loop feedback system by adjusting the duty cycle of high-speed pulses of voltage. The average current over a period of many pulse cycles is calculated and maintained by the processor. However, the applied current is maintained below peak current of the LED, even if that peak is for a very short duration in the PWM cycle.</p><p id="p-0024" num="0023">The solar panel may power the lighting elements (e.g., LED) directly, or through a step-down (buck) converter to step down the voltage and step up current. The solar panel may directly power the LED lamp if the solar panel's output is within the operating voltage of the LED. However, if the voltage of the solar panels is beyond the limit for the LED lamp set by the controller, the controller will isolate the solar panel(s) from the LED lamp(s) and power will be provided to the LED lamp(s) through a step-down convertor. In some embodiments, the controller firmware can determine the output of the solar panel and utilize MOSFET switching to change the power supply of the LED lamp from being directly from the solar panel(s) to being indirectly from the solar panels through the step-down converter.</p><p id="p-0025" num="0024">The firmware may also direct that more current and less voltage is drawn from the solar panel. For instance, if the solar panel cannot produce enough current at its maximum power point to power the LED, the unit will adjust its configuration to draw maximum current, and then automatically adjust the configuration again when the maximum power point can be maintained (e.g., there is sufficient sunlight). To do so, the firmware controls MOSFET switching to isolate the circuitry load from the solar panel to allow the solar panel to recover to no-load voltage, and then configure circuitry to draw power from the solar panel at its maximum power point.</p><p id="p-0026" num="0025">The electronics industry has developed standards for charging multiple device types using universal serial bus (USB) connections without requiring serial bus communications. Thus, items such as cellphones can be charged via the same connector as is used for serial communication. USB standards require 5.0V nominal voltage for the charging operation with varying degrees of supply current based on the specific standard and country for which the device is designed. Embodiments of the present invention may include one or more USB charge ports for charging external electronic devices. Various electronic devices are compatible with USB charge ports via a USB cable (e.g., Standard A USB, Standard B USB, Mini A USB, Mini B USB, Micro A USB, Micro B USB, Micro AB USB, 30-pin Apple device ports, 8-pin Apple device ports, UC-E6 plug, Nokia Pop-Port, HTC ExtMicro USB port, etc.). However, some devices (e.g., older cell mobile phone technologies, computers, etc.) may not be USB compatible or the user of the system may not have a USB adapter cable available for an external device. Thus, in some implementations, the system may alternatively or additionally include power outlets and charge ports of various designs (e.g., 12V vehicle charger, etc.).</p><p id="p-0027" num="0026">Embodiments of the present invention may include a battery compartment that accepts multiple batteries (e.g., three, four, etc.) of a certain size (e.g., AA/14500 batteries). The system may be able to identify and accommodate rechargeable batteries of different chemistries (e.g., NiMH batteries, NiCad batteries, Li-Ion or LiFePO4 batteries). The invention may accomplish the identification of the batteries through a machine state coding firmware algorithm in combination with battery switching logic that allows the installed batteries to be switch between parallel and series configurations according to signals from the control. The battery switching logic may utilize P type and N type MOSFETs for its switching function. For example, a firmware algorithm may include multiple voltage measurements of the batteries in series, parallel, and other arrangements (e.g., partial parallel arrangement) that allow the processor to determine the total voltage of the batteries in series, the voltage of the batteries in parallel, and other voltage measurements (e.g., measuring the voltage of the batteries through a reverse body diode of a normally open MOSFETs to determine whether they are all of the same chemistry type). The battery switching logic allows for the configuration of the batteries for the various voltage measurements needed to perform the battery identification tests. The battery switching logic may use MOSFET switching to change the configurations of the batteries. The voltage measurements and firmware algorithm together execute what amounts to a battery identification protocol that can determine the particular chemistry of the installed batteries: e.g., whether they are lithium ion batteries versus NiMH batteries (even though the output voltage of one lithium based battery can equal the output voltage of three NiMH batteries). Once the chemistry of the batteries is identified, the firmware may apply a charging algorithm for the installed batteries that is optimized for the charging profile of the particular battery chemistry.</p><p id="p-0028" num="0027">Different batteries require different charge algorithms. For example, some battery chemistries require a preparatory or slow charge, then an accelerated charge rate, then a very low trickle or maintenance charge. Other types require a constant current until a specific voltage is reached, and then a specific time at a constant voltage. The ability to identify the specific chemistry of the battery allows the user to operate the system with batteries having different chemistries, giving the user flexibility if the availability of rechargeable batteries is limited (e.g., there is only one type of battery available). The system may extend or maximize the life of the chosen batteries by identifying the type of chemistry of the installed batteries and then using the specific charge algorithm that optimizes the life of the battery. The system also allows for balance charging of specific battery types, as mentioned above.</p><p id="p-0029" num="0028">The firmware may also allow the processor to identify whether batteries having different chemistries (e.g., installing 2 NiCad and 1 LiFePO4 batteries) have been installed in the battery compartment together. To determine when batteries of different chemistries are improperly installed, the microprocessor may compare the voltage of batteries in series compared to 3&#xd7; voltage in parallel (fault if series is greater or less than 3&#xd7; parallel, +/&#x2212;0.3V). Another method that may be used to determine whether batteries of mixed chemistry are simultaneously installed is to measure voltage output of the batteries in a partial parallel configuration in which both normally open (NO) and normally closed (NC) transistors used to switch the batteries between series and parallel configurations are in the open condition, allowing voltage to pass through the transistors only through body diodes associated with each. If the voltage difference measured using this method is less than a predetermined value (e.g., 0.4V) the system may determine that the batteries are of mixed chemistry. The system will not charge the batteries if it detects mixed chemistry batteries in the battery compartment, as to not damage the batteries, but may draw power from the batteries to allow the lighting element(s) to provide light, for as long as the batteries can supply enough power.</p><p id="p-0030" num="0029">The firmware algorithm and MOSFET switching can also determine when primary batteries (non-chargeable batteries) are installed based on battery voltage and battery temperature, allowing for operation of the lamp while preventing the charging of the primary batteries. The temperature of the batteries may be monitored by the microprocessor when a voltage is applied to the batteries (e.g., using a thermistor located near the battery compartment). If the temperature rises beyond a predetermined threshold, the microprocessor will classify the installed batteries as primary batteries and no charging will be applied to the batteries.</p><p id="p-0031" num="0030">The system may also include specific circuitry to prevent excessive inrush current while batteries are being installed, allowing for installation of multiple batteries in any order, and to prevent excessive inrush current while batteries are switched from parallel to series and series to parallel.</p><p id="p-0032" num="0031">In some embodiments, the system also automatically adjusts through the use of firmware logic and electronics the configuration of multiple batteries and/or attached power devices (e.g., solar panels) to optimize (1) the battery discharge for powering LED lights and, in some instances, a USB charge port, (2) the battery charging based on the power output available from one or more solar panel(s), and (3) solar panel powering of the LED or the USB port when the batteries are fully charged. The optimization may result in longer charging time for the batteries if, e.g., the solar panel has a low output (e.g., a 3 W panel or the panel is in low-light conditions) and the charging algorithm is accordingly changed (e.g., lower amperage is applied to charge the batteries), or if the solar panel is simultaneously powering the LED light(s) and charging the batteries. For the latter situation, the system may use PWM operation to power the LED light(s) operation and may compensate for a drop in power to the LED light(s) due to simultaneous battery charging (or light conditions) and may extend the pulse width to obtain the required current to achieve the desired brightness of the LED lamp. In some embodiments, and without limitation, the system may restrict the operation of the LEDs during battery charging in a reduced power mode (e.g., the solar panel power output is reduced due to cloud cover or other conditions). There is a possibility of high voltage spikes going to the LEDs in such situations (e.g., a cloud cover passes), and because of the very sensitive nature of LEDs to over-voltage, this protection may prolong the life of the LEDs and reduce the risk of failure of the system.</p><p id="p-0033" num="0032">The above-described objects, advantages and features of the invention, together with the organization and manner of operation thereof, will become apparent from the following detailed description when taken in conjunction with the accompanying drawings, wherein like elements have like numerals throughout the several drawings described herein. Further benefits and other advantages of the present invention will become readily apparent from the detailed description of the preferred embodiments.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a graph demonstrating power (current-voltage) curves for a for a 12V, 10 W solar panel at several temperatures (25&#xb0; C., 50&#xb0; C., and 75&#xb0; C.).</p><p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a graph demonstrating the applied current and voltage profiles of lithium ion battery during a charging operation.</p><p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is an exemplary embodiment of a lighting/recharging system according to the present invention.</p><p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is another exemplary embodiment of a lighting/recharging system according to the present invention.</p><p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a generalized system layout of the electronic components of a lighting/recharging system according to an embodiment of the present invention.</p><p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a generalized layout of the electronic components of a battery switching circuit according to an embodiment of the present invention.</p><p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is another exemplary embodiment of a lighting/recharging system according to the present invention.</p><p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a generalized system layout of electronic components of a lighting/recharging system according to another embodiment of the present invention.</p><p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a generalized layout of the electronic components of a battery switching circuit according to another embodiment of the present invention.</p><p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a generalized layout of the electronic components of a power device switching circuit according to an embodiment of the present invention.</p><p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. <b>11</b></figref> is a view of a first portion of an exemplary control circuit of an embodiment of the present invention</p><p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. <b>12</b></figref> is a view of a second portion of an exemplary control circuit of an embodiment of the present invention.</p><p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. <b>13</b></figref> is a view of an exemplary circuit connecting LED lamps to an exemplary control circuit of the present invention.</p><p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. <b>14</b></figref> is a table showing performance data for batteries of different chemistries under various conditions utilized within a system of the present invention. Different configurations (e.g., series or parallel) may be utilized by the system of the present invention to change the power applied to the batteries, and the power drawn from the batteries.</p><p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. <b>15</b></figref> is a graphical view of exemplary voltage measurements taken with various system configurations, which may be used to determine the type of batteries that are installed in an exemplary system of the present invention.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">DETAILED DESCRIPTION</heading><p id="p-0049" num="0048">Reference will now be made in detail to certain embodiments of the invention, examples of which are illustrated in the accompanying drawings. While the invention will be described in reference to these embodiments, it will be understood that they are not intended to limit the invention. To the contrary, the invention is intended to cover alternatives, modifications, and equivalents that are included within the spirit and scope of the invention. In the following disclosure, specific details are given to provide a thorough understanding of the invention. However, it will be apparent to one skilled in the art that the present invention may be practiced without all of the specific details provided.</p><p id="p-0050" num="0049">The present invention concerns novel lighting and charging system that may be used in areas that have an unreliable or absent electrical power grid. The system may include inter alia one or more electric power generation devices or &#x201c;power devices&#x201d; (e.g., solar panels, thermoelectric generators, etc.), one or more light emitters (e.g., LED lights), a battery compartment or connectors for receiving and/or connecting one or more batteries (e.g., AA/14500 size batteries, 12V batteries, etc., which may be of various chemistries), one or more ports for charging external electronic devices (e.g., mobile phones, etc.), and microprocessor firmware and series-parallel switching circuitry connecting the batteries and/or the power generation devices. The firmware and series-parallel switching circuits of the batteries and/or the power generation devices may allow the system to (1) accept batteries of different chemistries and utilize the batteries to run one or more light emitters connected to the system and/or charge and external electronic device connected to the system, (2) automatically identify the battery chemistry of batteries installed in the system and adjust a charge algorithm for the batteries, (3) determine whether the batteries installed in the system are of mixed chemistry (e.g., multiple battery types installed in the system simultaneously), (4) automatically adjust the configuration of multiple batteries between series and parallel to optimize the battery discharge for powering the LED lights, and, in some cases, powering a USB charge port directly from the multiple batteries, (5) automatically optimize the battery charging, in some cases, while powering a USB charge port based on power output from one or more power generation devices, (6) switching power sources (e.g., between power generation devices and batteries) for external electronic devices plugged into the system and/or the light emitters, based on, e.g., the output of the one or more power generation devices, (7) automatically recognize the dynamically changing power available from attached power generation devices, (8) automatically adjust the configuration of multiple batteries between series and parallel configurations to optimize the battery charging based on the dynamically changing power available from attached power generation devices (e.g., solar panels), and (9) automatically adjust the voltage supplied by the one or more power generation devices to the one or more light emitters and/or an external electronic device depending on the current/voltage balance needed for the light emitters and/or external electronic device, among other beneficial functions.</p><p id="p-0051" num="0050">The presently disclosed system may allow the user to operate the product by installing sets of different types of secondary (rechargeable) batteries based on the purchaser's individual needs and the availability of replacement batteries. To prevent damage from incorrect battery types being installed, this invention includes safeguards to protect the device from incorrect batteries types, while still allowing operation of the lamp even with incorrect types being installed. In addition, the life expectancy of the chosen batteries are maximized for each battery chemistry by the unit automatically discerning the type of chemistry that was installed and then using the specific charge algorithm that optimizes the life of the battery. For example, using a series of voltage measurements taken from a series of configurations of the batteries, the microprocessor may determine that lithium ion batteries are attached to the battery connectors (e.g., installed in a battery compartment) and classify the installed batteries as lithium ion and store the classification in a memory unit. The microprocessor may continue to take voltage readings from the batteries to determine their state of discharge, and determine when charging is required. For example, a charging operation may be initiated at a pre-determined threshold of charge depletion (e.g., a threshold between about 20% and 80% depletion, such as about 20% depletion, about 30% depletion, about 40% depletion, about 50%, etc.). The amount of voltage and current supplied to the batteries during the charging operation will be determined by the battery charging logic of the microprocessor, which takes into account the state of charge depletion of the batteries, the power available from the power generation device(s) connected to the system, and the charging algorithm of the particular chemical class of the installed batteries. When the microprocessor determines that a charging operation is necessary, the microprocessor will apply current and voltage to the batteries according to a charging algorithm specific to the classification (e.g., the lithium ion chemistry) of the installed batteries, including bulk, absorption, and float charging phases. As an example, <figref idref="DRAWINGS">FIG. <b>1</b></figref> provides a graph of a charging profile of a lithium ion battery, including the bulk, absorption, and float charging phases. Charging profiles for other battery chemistries (e.g., NiMH, NiCd, lead acid, gel, LiFePO<sub>4</sub>, etc.) are known to those skilled in the art, and thus one of ordinary skill in the art.</p><p id="p-0052" num="0051">The present system also allows for balance charging of a single battery of a specific battery type according to a charging algorithm of the installed battery (e.g., one battery slot of a plurality of battery slots in the system). Balance charging, or charging one battery at a time to its full potential, allows the battery to be charged to its full capacity (whereas when batteries are charged simultaneously the internal resistance of the batteries may vary, resulting differential charging of the batteries). The system is operable to recognize that a single battery has been installed, switch the battery receivers into parallel configuration (e.g., if the battery receivers were configured in series, no complete circuit would be formed and no balance charging would be possible), and then measure the individual voltage (or current) produced by the battery (e.g., a voltage over about 3.6 V indicates a Li-ion battery, a voltage between about 3.6 V and about 1.4 V may indicate a LiFePO<sub>4 </sub>battery, and a voltage of about 1.4 V may indicate a NiMH battery). Once the battery type is identified, the microprocessor will apply the charging algorithm specific to the particular battery type to thereby charge the battery to its full capacity.</p><p id="p-0053" num="0052">In some embodiments, the presently disclosed system allows the user to choose which size of solar panel best fits their needs (e.g., based on price, performance, etc.) and allows for future upgrade of the system to produce more power by allowing the installation of additional and/or larger solar panels. The system may automatically recognize the power available from attached solar panels and optimize the battery configuration and/or a battery charging algorithm for optimum performance based on the dynamically changing output of the solar panel. If the solar panel cannot produce enough current at its maximum power point to power an attached external device and/or light emitter, the unit may adjust its configuration to draw maximum current, and then automatically adjust the configuration again when the maximum power point can be maintained.</p><p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. <b>3</b></figref> provides a view of some of the exemplary elements of a system according an embodiment of the present invention. The exemplary system <b>100</b> may include a controller <b>101</b>, a solar panel <b>102</b>, at least one battery <b>103</b>, a table lamp <b>104</b>, a wall or ceiling lamp <b>105</b>, and a charging port for an external electronic device <b>106</b><i>a </i>(e.g., a mobile phone). The controller <b>101</b> may be in electronic communication with the other elements of the system, and may include a microprocessor having firmware logic capable of (1) monitoring the power (voltage and current) produced by the solar panel <b>102</b>, (2) monitoring the power (voltage and current) available in the battery <b>103</b>, (3) performing voltage test operations to determine the type of chemistry of the attached one or more battery(ies) <b>103</b>, and (4) controlling and adjusting the current and voltage supplied to the lamps <b>104</b> and <b>105</b> and the external mobile device <b>106</b><i>a </i>and the one or more batteries <b>103</b> during a charging operation according to a charging algorithm. The system <b>100</b> is a customizable system to which various elements may be added (e.g., additional solar panels) and from which elements can be removed (e.g., one of the lamps may be removed).</p><p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. <b>4</b></figref> provides a view of some of the exemplary elements of a second example combination of elements. The exemplary system <b>200</b> may include a base <b>201</b> that houses controller, one or more solar panels <b>202</b>, a lamp <b>203</b>, and one or more charging port(s) <b>204</b> for electronic device(s) <b>204</b><i>a</i>. The base <b>201</b> may contain a battery receiver (e.g., a compartment) for accepting batteries of a particular size (e.g., AA/14500 size batteries, etc.), which may accept both primary and secondary batteries of the particular size. The controller may be in electronic communication with the other elements of the system (the solar panel <b>202</b>, the lamp <b>203</b>, and the charging port <b>204</b>), and may include a microprocessor having firmware logic capable of (1) monitoring the power (voltage and current) produced by the one or more solar panel(s) <b>202</b>, (2) monitoring the power (voltage and current) available in the one or more batteries, (3) performing voltage test operations to determine the type of chemistry of the installed batteries, (4) controlling and adjusting the current and voltage supplied to the lamp <b>203</b> and the external mobile device <b>204</b><i>a </i>and the one or more batteries during a charging operation according to a charging algorithm. Once the microprocessor has identified the battery chemistry of the one or more batteries installed in the system, it is operable to classify the batteries according to their voltage and select a charge algorithm to apply to the batteries during a charging operation that accommodates the particular battery chemistry. If batteries of mixed chemistries or primary batteries are installed in the compartment, the microprocessor may prevent the batteries from being charged and just use the power available from the batteries until they are drained. The system <b>200</b> is a customizable system to which various elements may be added (e.g., additional solar panels) and from which elements can be removed (e.g., one of the lamps may be removed).</p><p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. <b>5</b></figref> provides a diagram overview of the electronic system of a lighting/charging system <b>500</b> according to an embodiment of the present invention. The system <b>500</b> includes a controller unit <b>501</b> in which a microprocessor <b>502</b> and most of the operative electronics of the system may be housed, a solar input <b>530</b>, one or more USB output for powering external electronic devices (e.g., a mobile phone), and a lamp circuit for receiving and powering one or more lamps (e.g., LED lamps). The microprocessor <b>502</b> may be manufactured with firmware logic that receives inputs (voltage and current signals) from a number of points in the electronics of the system. The microprocessor <b>502</b> may include firmware logic that receives signals from a battery circuit <b>503</b> providing voltage readings from one or more batteries installed in battery receivers (BR<sub>1</sub>, BR<sub>2 </sub>. . . BR<sub>n</sub>) in the battery circuit <b>503</b>. The microprocessor may take multiple voltage readings from the battery receivers with the batteries in various configurations (e.g., parallel, series, and open circuit configuration in which current is able to flow through body diodes only, etc.). The microprocessor may also be electronically connected to the transistors within the battery circuit that allows the microprocessor to switch the condition of the transistors (e.g, MOSFETs) within the battery circuit <b>503</b> to thereby switch the configuration of the one or more batteries in the battery circuit between parallel, series, and other configurations. The microprocessor includes battery switching/identification logic firmware <b>502</b><i>b </i>that enables the microprocessor to switch the configurations of the batteries and determine the type of battery installed in the system based on the voltage readings taken within the battery circuit when the one or more batteries are in the different configurations. Once the microprocessor identifies and classifies the type of batteries that are installed in the battery receivers, the microprocessor stores the battery identification in a memory <b>502</b><i>a. </i></p><p id="p-0057" num="0056">The microprocessor <b>502</b> may also include a battery charging logic <b>502</b><i>c</i>. The battery charging logic may interpret voltage readings from the installed batteries in view of prior classification of the batteries to determine when a charging operation to recharge the installed batteries should be performed. The battery charging logic <b>502</b><i>c </i>may then apply a charging algorithm to the installed batteries that is selected based on the classification of the installed batteries stored in the memory <b>502</b><i>a</i>. The voltage of the installed batteries and current levels going through the installed batteries are monitored during the charging operation, and once the voltage readings from the battery reach a termination threshold set in the battery charging logic <b>502</b><i>c</i>, the batteries will have reached full charge, and the charging operation is terminated.</p><p id="p-0058" num="0057">During charging operation, the microprocessor may apply current to the batteries through pulse width modulation (PWM) in order to control the average current applied to the batteries during the charging operation. As shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, PWM is utilized to regulate current being supplied to the batteries whether charge is being supplied directly from the external power device(s) (e.g., solar panels) or through a voltage step-down (buck) converter <b>510</b>. The current supplied to the batteries during a charging operation is variable depending on (1) the classification of the installed batteries and (2) the phase (such as bulk, absorption, or float) of the charging operation. Additionally, the direct source of the current (the power device or buck converter) may change depending on the charging phase and the amount of current provided by the power device(s). For example, during bulk phase charging when relatively high current is required and when the power device can supply ample current, such as when a solar panel is operating at the maximum power point (MPP), the power may be suppled through the buck converter <b>510</b>, but when conditions occur that reduce the amount of power from power device (such as clouds covering the solar panel), the power may be supplied directly from the power device to harvest the maximum amount of energy.</p><p id="p-0059" num="0058">The microprocessor <b>502</b> may be in electronic communication with one or more transistors (e.g., MOSFETs) in the power switching circuit <b>531</b>. The power switching circuit may include one or more transistors (e.g., MOSFET, BJT, etc.) and other electronic devices (e.g., Schottky diodes, etc.) to (1) prevent current inrush into the batteries of other sensitive components of the system, (2) provide current and voltage signals to the microprocessor, and (3) allow the microprocessor to control the routing of current to different points within the controller <b>501</b> based on (1) the amount of power supplied by the external power device(s), (2) whether the batteries are in a charging operation, and (3) the other power demands of the circuit (e.g., lighting and/or USB device charging). The power switching circuit <b>531</b> may route power from the power device(s) to the buck converter <b>510</b> or battery circuit <b>503</b> as directed by the microprocessor <b>502</b>.</p><p id="p-0060" num="0059">The controller <b>502</b> may include a low-dropout regulator <b>504</b> that is connected to both the battery circuit <b>503</b> and the power switching circuit <b>531</b> and provides power to the microprocessor at a predetermined value (e.g., 2.5 V) when power is supplied to the controller <b>501</b> by either the external power device(s) or installed batteries.</p><p id="p-0061" num="0060">The buck converter <b>510</b> supplies power to the USB system and the lamp circuit <b>550</b> at a stepped-down, pre-determined voltage (e.g., 5V). The USB system includes a current limiting power switch that supplies current and voltage to one or more USB plugs in the USB system at the predetermined USB standard voltage and current. The current to the lamp circuit is regulated by the microprocessor <b>502</b> through PWM, as shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>. The lamp circuit <b>550</b> must be maintained below a maximum current to prevent damage to the light emitters (e.g., LEDs) electrically connected to the lamp circuit.</p><p id="p-0062" num="0061">The battery circuit of the present invention (e.g., <b>503</b> in <figref idref="DRAWINGS">FIG. <b>5</b></figref>) may have a design that allows the configuration of the batteries to switched between series, parallel, and other configuration in order to allow the system (1) to run voltage tests in various configurations to determine the type of battery(ies) installed in the system, (2) to allow the system to perform various charging algorithms on the installed batteries (e.g., balance charging, charging multiple batteries of the same type at once), (3) to adapt to the power available from the power devices during a charging operation (e.g., switching to a series configuration when lower power is provided by solar panels due to light conditions), and (4) to adapt to power demands on the system (e.g., lighting and/or USB charging demands).</p><p id="p-0063" num="0062">Without limiting the invention, <figref idref="DRAWINGS">FIG. <b>6</b></figref> provides a generalized example of a battery circuit <b>600</b> according to an embodiment of the present invention. The battery circuit <b>600</b> includes three batteries B<sub>1</sub>, B<sub>2</sub>, and B<sub>3 </sub>that are in electronic communication with six transistors (e.g., MOSFETs) that are operable to switch the battery configuration between series, parallel, and other configurations at the direction of the microprocessor &#x3bc;P. It is to be understood that the battery circuit is generalized and that it may include various other devices and that there may be additional devices and circuitry between the transistors and the microprocessor &#x3bc;P. The transistors may include two normally closed transistors NC<sub>1 </sub>and NC<sub>2 </sub>that conduct under default conditions, placing the batteries in a series configuration, and four normally open transistors NO<sub>1</sub>, NO<sub>2</sub>, NO<sub>3</sub>, and NO<sub>4 </sub>that are open and do not conduct under default conditions. The normally closed transistors may be switched to an open condition together by the microprocessor &#x3bc;P by a first set of signals. The normally open transistors may be switched to a closed condition together by the microprocessor &#x3bc;P by a second set signals after the normally closed transistors are switch to open by the first set of signals. The result of the first and second sets of signals is that the battery circuit is placed in the parallel configuration, placing the batteries in parallel.</p><p id="p-0064" num="0063">The battery circuit also includes sensors therein in electronic communication with the microprocessor &#x3bc;P that enable the microprocessor to measure voltages and/or currents within the battery circuit when the battery circuit is in various configurations. For example, the battery circuit <b>600</b> includes voltage sensor <b>601</b> at the positive end of the battery circuit and voltage circuit <b>602</b> at the negative end of the circuit, each of which transmit voltage data to the microprocessor &#x3bc;P. The battery circuit <b>600</b> may include additional sensors at additional positions to measure voltage and/or current. Battery identification logic of the microprocessor &#x3bc;P may analyze the data provided by the voltage sensors <b>601</b> and <b>602</b> (and/or other sensors in the battery circuit) when the batteries are in series, parallel, and other configurations in order to determine (1) how many batteries are installed in the battery circuit, (2) whether the batteries are of the same type or mixed chemistry, and/or (3) the particular type of battery(ies) that have been installed.</p><p id="p-0065" num="0064">For example, and without limitation, the battery identification logic may run up to three tests when one or more batteries are installed in the battery receivers of the battery circuit. Firstly, when a battery is installed, its voltage may be measured by one or more voltage sensors in the battery circuit. If that voltage is then raised by at least a certain amount (e.g., 1.1V), the unit then discerns that a second battery has been installed. If that voltage is then raised again by at least a certain amount (e.g. 1.1V) then the unit knows that a third battery has been installed. Based on the counting of the amount of batteries and their total voltage (the default configuration of the circuit may be in series), the unit determines the type of battery. Available battery types, may be NiMH (1.2V nominal), or non-rechargeable Alkaline (1.5V nominal) or mixed chemistry, or LFP (3.2 V nominal) or Li-Ion (3.7 V nominal). Because three LFP batteries at nominal voltage can be the same voltage as two fully charged Li-ion batteries in combination with one fully charged NiMH battery, all in series, the battery identification logic performs additional tests to differentiate between different battery chemistries.</p><p id="p-0066" num="0065">If the battery identification logic determines that there are three batteries, the microprocessor records in memory the total voltage of the three batteries in series. If the battery identification logic determines that the total voltage of the three batteries is higher than a pre-determined threshold (e.g., 4.29V, the maximum limit for three fully charged NiMH batteries in series) then the microprocessor may send a first set of signals that signal the NC<sub>1 </sub>and NC<sub>2 </sub>transistors to open. Both the normally closed and the normally open transistors of the battery circuit are open after the first set of signals is sent and the NC<sub>1 </sub>and NC<sub>2 </sub>transistors are opened, while the normally open transistors have not been closed. This condition may be referred to herein as &#x201c;partial parallel&#x201d; configuration. In the partial parallel configuration, the circuit may be completed through reverse body diodes in the normally open transistors (e.g., MOSFETs), which typically cause a drop in measured voltage (e.g., a drop of about 0.5 V) of the batteries, and the resulting voltage is analyzed by the battery identification logic and recorded in the memory of the microprocessor. Subsequently, the microprocessor may send a second set of signals to the normally open transistors NO<sub>1</sub>, NO<sub>2</sub>, NO<sub>3</sub>, and NO<sub>4 </sub>to their gates and close the transistors, causing the battery circuit <b>600</b> to be in full parallel configuration. The battery identification logic analyzes the resulting voltage of the battery circuit <b>600</b> in the parallel configuration and the voltage data is recorded in the memory of the microprocessor.</p><p id="p-0067" num="0066">Once the voltage data is taken in the series, partial parallel, and parallel battery circuit configurations, the battery identification logic of the microprocessor then completes a first test by comparing the series voltage to the fully parallel voltage. If the voltage in series is three times larger (+/&#x2212;0.3V) than the measured voltage in full parallel configuration, then all three batteries are of the same type and they are recorded as lithium based, and the classification is recorded in the memory of the microprocessor (in this example a 3&#xd7; comparison is used because there are three batteries, in other embodiments, the series parallel comparison may use a different comparison standard, and the +/&#x2212;0.3V is used because of the measurement accuracy of this embodiment, in other embodiments, the acceptable voltage tolerance may be different). If the calculation results in a different of outside of the +/&#x2212;0.3 V tolerance, the batteries are classified as mixed chemistry.</p><p id="p-0068" num="0067">Additional tests are subsequently performed because of possibilities that the installed batteries are actually a combination of charged and depleted LFP and Li-ion batteries that can pass the first test above. A second test may be performed using data recorded in the partial parallel configuration. The voltage of the three installed batteries tend to equal one another in the partial parallel configuration, but because the voltage measurements taken in the partial parallel configuration are taken through the reverse body diodes of the normally open transistors, the average voltage drop of the installed batteries is significantly less than the pre-determined value (e.g., 0.5 V) expected for charged batteries of the same chemistry when batteries of different individual voltages are installed. If the difference between the measured voltages of the installed batteries in the partial parallel configuration and the fully parallel configuration is greater than or equal to a pre-determined threshold (e.g., about 0.4V), the batteries are determined by the battery identification logic to be of the same type and classed as Li based. If the difference is less than the pre-determined threshold, the batteries are classified as mixed chemistry. The classification of the batteries is recorded in the memory of the microprocessor (in other embodiments the 0.4V may differ based on the actual MOSFET transistors that are used).</p><p id="p-0069" num="0068">When the battery identification logic classifies the installed batteries as mixed chemistry, the battery switching logic configures the battery circuit <b>600</b> in series. Additionally, the microprocessor may configure the power switching circuit to route the power produced by the batteries through the buck converter, and power may be provided to the lamp circuit through the buck converter to avoid any damage to light emitters (e.g., LED lamps) that may be connected to the lamp circuit. Additionally, the microprocessor may configure the power switching circuit to route any power produced by the power devices to the low-dropout regulator and the buck converter, and disconnect the battery circuit from any direct connection to the power devices to prevent damage to the installed mixed chemistry batteries.</p><p id="p-0070" num="0069">When the batteries are classified as Li-based, the type of lithium battery is determined by the battery identification logic through analysis of the total voltage of the installed batteries (Li ion batteries have higher voltage than LiFePO<sub>4 </sub>batteries). However, because depleted Li-ion batteries can have the same voltage as charged LiFePO<sub>4 </sub>batteries, another test may be performed during charging to determine whether the installed batteries are Li-ion or LiFePO<sub>4 </sub>batteries. Li-ion batteries have a much faster rise in voltage over a given time (dV/dT) when the voltage of the batteries is 3.5 V, in comparison to LiFePO<sub>4 </sub>batteries when their voltage is approximately 3.5. Thus, if the batteries are classified as LFP, and during charging the dV/dT of the battery at 3.5V matches that of Li-Ion, then the batteries are automatically re-classed as Li-Ion, yielding no damage to the batteries and allowing them to be fully charged.</p><p id="p-0071" num="0070">The voltage of NiMH and primary (e.g., alkaline) batteries are also similar and tests of voltages of the installed batteries in multiple battery configurations may not reveal whether the installed batteries are primary, NiMH, or a mixture of both. Thus, the battery identification logic also monitors one or more temperature sensor (see, e.g., a thermistor&#x2014;see the T sensor in <figref idref="DRAWINGS">FIG. <b>5</b></figref>) located at or near the battery receivers. If depleted non-rechargeable primary batteries are installed and are classified as NiMH, when a charging operation begins, the primary batteries will immediately heat up to a temperature above a pre-determined threshold, thus triggering the temperature sensor(s), which transmit a signal to the battery identification logic. The battery identification logic subsequent classifies the batteries as primary/mixed chemistry, and the microprocessor sends signals to the power switching circuit to terminate the charging operation.</p><p id="p-0072" num="0071">The battery circuits of the present invention may also be utilized to balance charge the installed batteries individually. Due to possibly differing internal resistance in secondary batteries (Li ion, LiFePO<sub>4</sub>, etc.) of the same chemistry installed in the battery receivers, the installed secondary batteries may take charge at different rates. Because these batteries can be charged thousands of times, the difference in charging rates between the batteries may over time lead to one or two of the batteries being significantly undercharged after the charging operation, thus limiting the total amount of charge that can be held by the installed batteries. To prevent or correct unbalanced charging of the installed batteries, a balance charging operation may be performed by the microprocessor and battery circuit. The balance charging operation is accomplished by charging one battery at a time. In some embodiments, and without limitation, the balance charge operation may be initiated by the user of the system by installing a single battery into a first battery receiver. As discussed above, when one battery is installed into a battery receiver its voltage is measured. When an external power is supplied to the battery circuit during a charging operation, the unit will try to charge the battery. But since the other two battery holders do not have batteries in them, no current will pass through the battery and therefore no current or voltage will be sensed by the microprocessor at the negative end of the battery circuit. In such cases (where a battery voltage is measured at a battery receiver, but no current flows to the negative terminal of the battery circuit), the battery switching logic will change the circuit configuration to full parallel to allow current to flow through the installed battery and to the negative end of the battery circuit. The battery identification logic is then enabled to identify the type of battery through voltage and the dV/dT measurements as described above.</p><p id="p-0073" num="0072">In addition to providing novel benefits for charging of installed batteries, the battery circuit, microprocessor firmware, and additional electronic devices of various embodiments of the present invention also provide benefits in managing the discharge of installed batteries and management of power supplies to the lamp circuit and USB charging system. The configuration of the batteries are controlled by the battery discharge switching logic based on the amount of voltage and current available from the batteries and the power demands on the system (e.g., powering one or more lamps connected to the lamp circuit, and/or one or more external electronic devices plugged into the USB charging system). The configuration of the batteries depends on the type of batteries installed in the system. For example, if NiMH batteries are installed, the batteries are maintained in the default series configuration because of the relatively low voltage and current provided by the NiMH batteries. If Li-ion batteries are installed in the system, the microprocessor may sense the high voltage provided by the batteries in series and the battery discharge switching logic may direct the battery circuit to reconfigure the installed batteries in parallel thus maximizing the amount of time that the batteries can power the lighting elements because of reduced current draw from each battery. Additionally, Li-ion batteries may be switched to series so the power supplied by the batteries may be supplied to the USB charging circuit through the buck converter and to the lamp circuit through the buck converter in order to regulate the supplied current.</p><p id="p-0074" num="0073">In other embodiments of the invention, and without limitation, both the installed power generation units (e.g., solar panels) and the installed batteries may be controlled by the microprocessor to be switched between series and parallel configurations to adapt to the fluctuations in the power supplied by the power generation devices (e.g., fluctuations due to solar conditions) during a charging operation or for powering a lamp circuit or external electronic devices connected to the system, and to adapt the power available from the batteries, e.g., for maximizing the operation time of the lamp circuit or to support multiple simultaneous power demands on the system (e.g., charging an external electronic device through the USB charging system while providing power to the lamp circuit for running one or more lamps connected to the lamp circuit).</p><p id="p-0075" num="0074">Without limiting the invention, <figref idref="DRAWINGS">FIG. <b>7</b></figref> provides an example charging/lighting system <b>700</b> overview. The system <b>700</b> includes a controller system <b>701</b>, a series/parallel switching circuit <b>702</b> for the power generation devices (solar panels), one or more installed power generation devices <b>703</b> a series/parallel switching circuit <b>704</b> for the installed batteries, one or more installed batteries <b>705</b>, one or more lamps <b>706</b>, and one or more USB ports <b>707</b>. The controller <b>701</b> may include a microprocessor as discussed above having firmware programming that includes solar panel switching logic, in addition to battery identification logic, battery charging logic, and battery discharging, as discussed herein. The controller system <b>701</b> may additionally have a similar collection of devices therein for routing power to the microprocessor, the USB charging circuit, and the lamp circuit.</p><p id="p-0076" num="0075"><figref idref="DRAWINGS">FIG. <b>8</b></figref> provides a diagram overview of the electronic system of a lighting/charging system <b>800</b> according to an embodiment of the present invention. The system <b>800</b> includes a controller unit <b>801</b> in which a microprocessor <b>802</b> and most of the operative electronics of the system may be housed, a power generation device receiver <b>830</b> in electronic communication with the one or more power devices (<b>890</b>, <b>891</b>, and <b>892</b>), a power device switching circuit <b>831</b>, a USB charging system <b>860</b> that may include one or more USB inputs for powering external electronic devices (e.g., a mobile phone), a lamp circuit <b>850</b> for receiving and powering one or more lamps (e.g., LED lamps), and a battery switching circuit <b>803</b>. The controller <b>801</b> includes a microprocessor <b>802</b> that may be manufactured with firmware logic that receives inputs (voltage and current signals) from a number of points in the electronics of the system. The microprocessor <b>802</b> may include firmware logic that receives signals from the battery switching circuit <b>803</b> providing voltage readings from one or more batteries installed in battery receivers (BR<sub>81</sub>, BR<sub>82</sub>, and BR<sub>83</sub>) in the battery switching circuit <b>803</b>. The microprocessor may take multiple voltage readings from the battery receivers with the batteries in various configurations (e.g., parallel, series, and open circuit configuration in which current is able to flow through body diodes only, etc.) to determine the chemistry of the batteries installed in the battery receivers, as previously discussed herein. The microprocessor <b>802</b> may also include firmware logic that receives signals the power generation device switching circuit <b>831</b>, providing voltage and current readings to determine the amount of power available from the attached power generation devices at a given time. The microprocessor <b>802</b> may be electronically connected to the transistors within the power device switching circuit and the battery switching circuit, allowing the microprocessor <b>802</b> to switch the condition of the transistors (e.g, MOSFETs) within the power device and battery switching circuits to thereby switch the configuration of the installed power generation units and the installed batteries between parallel and series. The microprocessor <b>802</b> may also be in electronic communication with series circuit sensor <b>831</b><i>a </i>and parallel circuit sensor <b>831</b><i>b</i>, which provide current and/or voltage data from the power generating devices when they are in series and parallel configurations, respectively. The microprocessor includes battery identification logic firmware <b>802</b><i>b</i>, battery charging logic firmware <b>802</b><i>c</i>, battery discharging logic firmware <b>802</b><i>d</i>, and solar panel switching logic <b>802</b><i>e </i>that enables the microprocessor to:<ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0000">    <ul id="ul0002" list-style="none">        <li id="ul0002-0001" num="0076">a. switch the configurations of the batteries between series and parallel in response to changes in the voltage and current provided by the power generation devices;</li>        <li id="ul0002-0002" num="0077">b. switch the configuration of the batteries between series and parallel in response to changes in the power demands of the lamp circuit and the USB charging circuit;</li>        <li id="ul0002-0003" num="0078">c. determine the type of battery installed in the system based on the voltage readings taken within the battery circuit when the one or more batteries are in different configurations;</li>        <li id="ul0002-0004" num="0079">d. determine the voltage and current available from the attached power generation devices; and</li>        <li id="ul0002-0005" num="0080">e. switch the configuration of the power generation devices between series and parallel based on the power demands of the system, including battery charging, the lamp circuit, and the USB charging circuit and based on instantaneous voltage and current output of the power generations devices.</li>    </ul>    </li></ul></p><p id="p-0077" num="0081">Once the microprocessor identifies and classifies the type of batteries that are installed in the battery receivers, the microprocessor stores the battery identification in a memory <b>802</b><i>a</i>. The battery charging logic <b>802</b><i>c </i>may interpret voltage readings from the installed batteries in view of the classification of the batteries to determine when a charging operation to recharge the installed batteries should be performed. The battery charging logic <b>802</b><i>c </i>may then apply a charging algorithm to the installed batteries that is selected based on the classification of the installed batteries stored in the memory <b>802</b><i>a</i>. The voltage of and the supplied current to the installed batteries is monitored during the charging operation, and once the voltage readings from the battery reach a termination threshold set in the battery charging logic <b>802</b><i>c</i>, the batteries will have reached full charge, and the charging operation is terminated.</p><p id="p-0078" num="0082">During charging operation, the microprocessor may apply current to the batteries through pulse width modulation (PWM) in order to control the average current applied to the batteries during the charging operation (e.g., when the power generating devices are in parallel configuration). As shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, PWM may be utilized to regulate current being supplied to the batteries depending on the series or parallel configuration of the external power device(s) (e.g., solar panels) and the phase of the battery charging operation (e.g. absorption). In some embodiments, and without limitation, a voltage step-down (buck) converter may be utilized to step down voltage supplied by the power generation devices, as in the system shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>. In other embodiments, the system <b>800</b> may be designed to receive multiple 12 V batteries and 12 V solar panels as the power generation source. In such embodiments, a buck converter is not necessary to step down voltage between the solar panels and batteries. A buck converter <b>810</b> may be used to step down voltage between the batteries and the USB charging circuit <b>860</b>, and in some embodiments the between the batteries and the lamp circuit. In other embodiments (e.g., in embodiments that utilize higher voltage 12V batteries), an additional higher voltage buck converter <b>870</b> (e.g., 12 V step-down) may be used to step down voltage between the batteries and the lamp circuit <b>850</b> and between the batteries and a lower voltage buck converter <b>810</b> (e.g., 5 V step-down).</p><p id="p-0079" num="0083">The current supplied to the batteries during a charging operation is variable depending on (1) the classification of the installed batteries and (2) the phase (bulk, absorption, or float) of the charging operation. Additionally, the direct source of the current (the power device or buck converter) may change depending on the charging phase, the amount of current provided by the power device(s). In embodiments in which 12 V solar panels and 12V batteries are utilized, the solar panels and batteries may be matched in their configurations (series or parallel). When power supplied by the solar panels is sufficiently high to charge the batteries (e.g., at or near maximum power point during bulk phase charging) the solar panels and the batteries may be in parallel configuration. In the case that the solar panels cannot supply sufficient voltage to sustain the voltage and current requirements of the charging algorithm applied to the batteries, the microprocessor may (1) direct the power generation device switching circuit <b>830</b> to the series configuration, and (2) direct the battery switching circuit <b>840</b> to the series configuration. During bulk phase, the power supplied by the solar panels can be supplied to the batteries without the need for modulation. Once the absorption phase of the charging algorithm begins, the microprocessor applies pulse width modulation to modulate the current (e.g., reduce the current level) according to the charge algorithm applied by the battery charging logic.</p><p id="p-0080" num="0084">In order to control switching of the switching circuits <b>831</b> and <b>803</b>, the microprocessor <b>802</b> may be in electronic communication with one or more transistors (e.g., MOSFETs, BJT, etc.) in the switching circuits <b>831</b> and <b>803</b>. The power switching circuit <b>831</b> may include transistors and other electronic devices (e.g., Schottky diodes, etc.) to (1) prevent current inrush, overvoltage, and other possible damaging conditions from reaching the batteries of other sensitive components of the system, (2) provide current and voltage signals to the microprocessor, and (3) allow the microprocessor to control the routing of current to different points within the controller <b>801</b> based on (1) the amount of power supplied by the external power device(s), (2) whether the batteries are in a charging operation, and (3) the other power demands of the circuit (e.g., lighting and/or USB device charging). The power switching circuit <b>831</b> may route power from the power device(s) to the battery switching circuit <b>803</b> as directed by the microprocessor <b>802</b>. In some embodiments (e.g., those that include higher voltage panels and batteries, such 12 V panels and 12 V batteries), the power switching circuit <b>831</b> and the battery switching circuit <b>803</b> may include over-voltage and reverse polarity protection circuits for both the connection to the power generation device switching circuit and the battery switching circuit. These protection circuits are to prevent damage to the sensitive components of the system (e.g., the microprocessor and other electronics) that may result from surges in voltage and installation error resulting in reverse polarity of the batteries or power generation devices. The components and design of such protection circuits are familiar to those skilled in the art.</p><p id="p-0081" num="0085">The controller <b>801</b> may include one or more current monitoring devices for monitoring current provided by the power devices in both the series and parallel configurations. For example, the controller <b>801</b> may include a current monitoring device <b>831</b><i>a </i>that connects to the output of the current generation device switching circuit <b>831</b> when the power generation devices are in series configuration, and a second current monitoring device <b>831</b><i>b </i>that connects to the output of the current generation device switching circuit <b>830</b> when the power generation devices are in parallel configuration. The current monitoring devices may send signals to the microprocessor regarding the current level supplied by the power devices. For example, the current monitoring device may send a signal to the microprocessor when the power devices are in the parallel configuration drop below a threshold required to charge installed batteries (e.g., during a bulk phase). The power device switching logic firmware may then direct the power device switching circuit to switch the power devices to the series configuration.</p><p id="p-0082" num="0086">The controller <b>801</b> may include a low-dropout regulator <b>804</b> that is connected to both the battery switching circuit <b>840</b> and the power switching circuit <b>831</b> and provides power to the microprocessor at a predetermined value (e.g., 2.5 V) when power is supplied to the controller <b>801</b> by either the external power device(s) or installed batteries. In other embodiments, the power switching circuit may be in electronic communication with the buck converter, and the buck converter may provide power to the microprocessor (e.g., 5 V).</p><p id="p-0083" num="0087">The buck converter <b>810</b> supplies power to the USB system and the lamp circuit <b>850</b> at a stepped-down, pre-determined voltage (e.g., 5V). The USB system includes a current limiting power switch that supplies current and voltage to one or more USB plugs in the USB system at the predetermined USB standard voltage and current. The current to the lamp circuit is regulated by the microprocessor <b>802</b> through PWM, as shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>. Power may also be supplied to the lamp circuit <b>850</b> from the power device switching circuit <b>831</b> when the power generating devices are in the series configuration. The lamp circuit <b>850</b> must be maintained below a maximum current to prevent damage to the light emitters (e.g., LEDs) electrically connected to the lamp circuit. In some embodiments, and without limitation, the buck converter may also supply power to the microprocessor. In such in embodiments, the low-dropout regulator may be omitted.</p><p id="p-0084" num="0088">The battery switching circuit <b>803</b> may have a design that allows the configuration of the batteries to switched between series, parallel, and other configuration in order to allow the system (1) to run voltage tests in various configurations to determine the type of battery(ies) installed in the system, (2) to allow the system to perform various charging algorithms on the installed batteries (e.g., balance charging, charging multiple batteries of the same type at once), (3) to adapt to the power available from the power devices during a charging operation (e.g., switching to a series configuration when lower power is provided by solar panels due to light conditions), and (4) to adapt to power demands on the system (e.g., lighting and/or USB charging demands).</p><p id="p-0085" num="0089"><figref idref="DRAWINGS">FIG. <b>9</b></figref> shows an example battery switching circuit <b>900</b> that may be utilized in a charging/lighting system like that shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>. The battery switching circuit <b>900</b> provides a generalized example battery circuit <b>900</b> according to an embodiment of the present invention. The battery circuit <b>900</b> includes three batteries B<sub>91</sub>, B<sub>92</sub>, and B<sub>93 </sub>that are in electronic communication with six transistors (e.g., MOSFETs) that are operable to switch the battery configuration between series, parallel, and other configurations at the direction of the microprocessor &#x3bc;P. It is to be understood that the battery circuit is generalized and that it may include various other devices and that there may be additional devices and circuitry between the transistors and the microprocessor. The transistors include five normally open transistors NO<sub>91</sub>, NO<sub>92</sub>, NO<sub>93</sub>, NO<sub>94</sub>, and NO<sub>95 </sub>that do not conduct under default conditions, and five normally closed transistors NC<sub>91</sub>, NC<sub>92</sub>, NC<sub>93</sub>, NC<sub>94</sub>, and NC<sub>95 </sub>that are closed and conduct under default conditions, placing the batteries in parallel configuration under default conditions. The normally closed transistors may be switched to an open condition by the microprocessor by a first signal provided through output 1 of battery controller <b>901</b>. The normally open transistors may then be switched to a closed condition by the microprocessor by a second signal provided through output 2 of battery controller <b>901</b> after the normally closed transistors are switched to open by the first signal. The result of the first and second of signals is that the battery circuit is placed in the series configuration.</p><p id="p-0086" num="0090">The battery switching circuit may also include sensors therein in electronic communication with the microprocessor that enable the microprocessor to measure voltages and/or currents within the battery circuit when the battery circuit is in various configurations. For example, the battery circuit <b>900</b> may include voltage sensor <b>902</b> at the output connection <b>903</b> of the battery circuit, which transmits voltage data to the microprocessor. The battery circuit <b>900</b> may include additional sensors at additional positions to measure voltage and/or current. Battery identification logic of the microprocessor may analyze the data provided by the one or more voltage sensors (and/or other sensors in the battery circuit) when the batteries are in series, parallel, and other configurations in order to determine (1) how many batteries are installed in the battery circuit, (2) whether the batteries are of the same type or mixed chemistry, and/or (3) the particular type of battery(ies) that have been installed.</p><p id="p-0087" num="0091">The solar panel switching circuit may be designed similarly to the battery circuit shown in <figref idref="DRAWINGS">FIG. <b>9</b></figref>, with some differences. <figref idref="DRAWINGS">FIG. <b>10</b></figref> shows an example power device switching circuit <b>1000</b> that may be utilized in a charging/lighting system like that shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>. The power device switching circuit <b>1000</b> provides a generalized example power device (e.g., solar panel) switching circuit according to an embodiment of the present invention. The power device circuit <b>1000</b> includes three power device (solar panel) receivers R<sub>1</sub>, R<sub>2</sub>, and R<sub>3 </sub>that are in electronic communication with transistors (e.g., MOSFETs) that are operable to switch the power device configuration between series and parallel configurations at the direction of the microprocessor. It is to be understood that the power device circuit <b>1000</b> is generalized and that it may include various other devices and that there may be additional devices and circuitry between the transistors and the microprocessor. The transistors include six normally open transistors NO<sub>11</sub>, NO<sub>12</sub>, NO<sub>13</sub>, NO<sub>14</sub>, NO<sub>15</sub>, and NO<sub>16 </sub>that do not conduct under default conditions, and five normally closed transistors NC<sub>11</sub>, NC<sub>12</sub>, NC<sub>13</sub>, NC<sub>14</sub>, and NC<sub>15 </sub>that are closed and conduct under default conditions, placing the power devices in parallel configuration under default conditions. The normally closed transistors may be switched to an open condition by the microprocessor by a first signal provided through output 1 of power device controller <b>1001</b>. The normally open transistors may then be switched to a closed condition by the microprocessor by a second signal provided through output 2 of power device controller <b>1001</b> after the normally closed transistors are switched to open by the first signal. The result of the first and second of signals is that the power devices are placed in the series configuration.</p><p id="p-0088" num="0092">The power device switching circuit may also include sensors therein in electronic communication with the microprocessor that enable the microprocessor to measure voltages and/or currents within the power device circuit when the power circuit is in various configurations. For example, the power device circuit <b>1000</b> may include voltage sensor <b>1002</b> at the output connection <b>1003</b> of the power circuit, which transmits voltage data to the microprocessor. The power device circuit <b>1000</b> may include additional sensors at additional positions to measure voltage and/or current. The power device switching logic of the microprocessor may be operable to analyze the voltage and current data supplied by the sensors in the power device circuit to switch the configuration of the power devices between series and parallel. For example, when the voltage and/or current provided by the power devices in parallel configuration drops below a pre-determined for operating the concurrent power demand on the system, the power device switching logic direct the power device switching circuit to reconfigure the power devices from parallel to series configuration.</p><p id="p-0089" num="0093">The diagrams provided in <figref idref="DRAWINGS">FIGS. <b>3</b>-<b>10</b></figref> and the accompanying discussion present generalized overviews of embodiments of the present invention. A specific example of a lighting and charging system according to an embodiment of the present invention is provided below. It is to be understood that the specific example is not the only embodiment of the invention, and that one of ordinary skill in the art would be enabled by the disclosure provided herein to practice other embodiments of the system.</p><p id="p-0090" num="0094"><figref idref="DRAWINGS">FIGS. <b>11</b>-<b>12</b></figref> and the accompanying description provide a detailed example of an exemplary system, including the specific components and electronics thereof. It is to be understood that the electronics described below may be included in systems of other embodiments (e.g., as shown in <figref idref="DRAWINGS">FIGS. <b>3</b>-<b>10</b></figref>), and provide the functionalities described above.</p><p id="p-0091" num="0095">As shown in the schematics in <figref idref="DRAWINGS">FIGS. <b>11</b>-<b>12</b></figref>, an exemplary controller may include a microcontroller IC<b>1</b> may have multiple analog inputs to monitor voltages throughout the circuit, digital outputs to set specific circuit configurations based on the monitored voltages of an attached solar panel and batteries, outputs capable of pulse width modulation to control battery charging and LED light operation, capacitive touch sensing inputs for control of the LED light output, and firmware that utilizes machine state firmware theory. The pin functions are as follows:<ul id="ul0003" list-style="none">    <li id="ul0003-0001" num="0000">    <ul id="ul0004" list-style="none">        <li id="ul0004-0001" num="0096">Pin <b>1</b>&#x2014;programming the microcontroller</li>        <li id="ul0004-0002" num="0097">Pin <b>2</b>&#x2014;measuring the voltage across the temperature sensing thermistor VR<b>2</b> through a voltage divider</li>        <li id="ul0004-0003" num="0098">Pin <b>3</b>&#x2014;measuring the voltage across R<b>21</b> to determine the battery charge current</li>        <li id="ul0004-0004" num="0099">Pin <b>4</b>&#x2014;measuring the voltage of Pin <b>4</b> on U<b>3</b> to determine if current is being drawn by the USB charge port</li>        <li id="ul0004-0005" num="0100">Pin <b>5</b>&#x2014;measuring the voltage across the temperature sensing thermistor VR<b>1</b> through a voltage divider</li>        <li id="ul0004-0006" num="0101">Pin <b>6</b>&#x2014;output to illuminate status LED <b>3</b> (green)</li>        <li id="ul0004-0007" num="0102">Pin <b>7</b>&#x2014;measuring the voltage across R<b>30</b> to determine the LED lamp current</li>        <li id="ul0004-0008" num="0103">Pin <b>8</b>&#x2014;ground connection</li>        <li id="ul0004-0009" num="0104">Pin <b>9</b>&#x2014;output to illuminate status LED <b>1</b> (red)</li>        <li id="ul0004-0010" num="0105">Pin <b>10</b>&#x2014;output to illuminate status LED <b>2</b> (yellow)</li>        <li id="ul0004-0011" num="0106">Pin <b>11</b>&#x2014;output to NPN switching transistor Q<b>5</b> to close P-Channel MOSFET Q<b>3</b></li>        <li id="ul0004-0012" num="0107">Pin <b>12</b>&#x2014;PWM output to N-Channel MOSFET Q<b>11</b> to control the average current to the LED lamp</li>        <li id="ul0004-0013" num="0108">Pin <b>13</b>&#x2014;PWM output to NPN switching transistor Q<b>7</b> to close and open P-Channel MOSFET Q<b>8</b> to control the average current to the batteries for charging</li>        <li id="ul0004-0014" num="0109">Pin <b>14</b>&#x2014;output to NPN switching transistor Q<b>6</b> to close P-Channel MOSFETs Q<b>4</b> and Q<b>10</b> as a bi-directional switch</li>        <li id="ul0004-0015" num="0110">Pin <b>15</b>&#x2014;output to NPN switching transistor Q<b>9</b> to close P-Channel MOSFET Q<b>18</b> to open P-Channel MOSFETs Q<b>14</b> and Q<b>17</b> to switch the battery configuration from series to partial parallel and vice versa</li>        <li id="ul0004-0016" num="0111">Pin <b>16</b>&#x2014;output to close N-Channel MOSFETs Q<b>12</b> and Q<b>15</b> and to NPN switching transistor Q<b>19</b> to close P-Channel MOSFETS Q<b>13</b> and Q<b>16</b> to switch the battery configuration from partial parallel to fully parallel and vice versa</li>        <li id="ul0004-0017" num="0112">Pin <b>17</b>&#x2014;output to turn on the DC-DC non-synchronous step-down (buck) converter U<b>1</b></li>        <li id="ul0004-0018" num="0113">Pin <b>18</b>&#x2014;output to NPN switching transistor Q<b>2</b> to close P-Channel MOSFET Q<b>1</b></li>        <li id="ul0004-0019" num="0114">Pin <b>19</b>&#x2014;ground connection</li>        <li id="ul0004-0020" num="0115">Pin <b>20</b>&#x2014;power connection</li>        <li id="ul0004-0021" num="0116">Pin <b>21</b>&#x2014;measuring voltage of solar input (via voltage divider to not overstress port)</li>        <li id="ul0004-0022" num="0117">Pin <b>22</b>&#x2014;measuring of voltage of batteries at positive terminal of battery holder B<b>1</b> (via voltage divider to not overstress port)</li>        <li id="ul0004-0023" num="0118">Pin <b>23</b>&#x2014;capacitive switch <b>1</b> sensing (off)</li>        <li id="ul0004-0024" num="0119">Pin <b>24</b>&#x2014;capacitive switch <b>2</b> sensing (low)</li>        <li id="ul0004-0025" num="0120">Pin <b>25</b>&#x2014;capacitive switch <b>3</b> sensing (medium)</li>        <li id="ul0004-0026" num="0121">Pin <b>26</b>&#x2014;capacitive switch <b>4</b> sensing (high)</li>        <li id="ul0004-0027" num="0122">Pin <b>27</b>&#x2014;programming the microcontroller</li>        <li id="ul0004-0028" num="0123">Pin <b>28</b>&#x2014;programming the microcontroller</li>    </ul>    </li></ul></p><p id="p-0092" num="0124">The system circuitry may include a stepdown (buck) converter U<b>1</b> (e.g., a DC-DC non-synchronous step-down converter) and related circuitry that may provide a power conversion function, converting relatively high voltage and relatively low current into 5V with relatively high current for stepping down the voltage for use in the one or more charging ports (e.g., USB port) of the system. The step-down converter may provide the power required for the charging port and the charging of one or more installed batteries (under certain conditions), and for running the one or more lamps (e.g., LED lamps) for the lighting purposes (under certain conditions), all while isolating the solar panel from the circuit load. The isolation of the solar panel from the load may allow the solar panel to operate near its maximum power point, rather than the solar panel being forced to operate at the voltage of the circuitry load as dictated by Kirchhoff's Voltage Law. For example, with the step-down converter U<b>1</b> in place, the system may allow the attached solar panel capable of operating at a MPP of 17V and 0.59 A to maintain the MPP (assuming solar conditions are adequate to support the MPP) and deliver power at 5V with a current capability of approximately 2.0 A to a charging port.</p><p id="p-0093" num="0125">The step-down converter may draw power from either power generation source such as a solar panel, or from the installed batteries to provide optimum performance for the consumer. When step-down converter U<b>1</b> draws power from the batteries, transistor Q<b>1</b> (e.g., a MOSFET transistor) remains open so that if a solar panel is plugged into the system, the current will not immediately rush through the batteries or the lamp. Although transistor Q<b>1</b> may include a reverse body diode that allows power to conduct from the installed batteries to step-down converter U<b>1</b>, the voltage drop through transistor Q<b>1</b> creates too much loss; therefore, the voltage from the three batteries may be supplied to the step-down converter U<b>1</b> through a low VF Schottkey diode D<b>5</b>. The step-down converter U<b>1</b> may be turned on and off by the microcontroller IC<b>1</b>, based on different operating voltages in the circuit that the microcontroller IC<b>1</b> may monitor (e.g., the voltage provided by the one or more solar panels, and the voltage provided by the one or more installed batteries).</p><p id="p-0094" num="0126">The system may also include a voltage regulator U<b>2</b> (e.g., a low-dropout voltage regulator) and related circuitry that may provide a controlled power level (e.g., 2.5V) to the microcontroller IC<b>1</b>. Powering the microcontroller at 2.5V may allow the microcontroller IC<b>1</b> to draw power from multiple sources ranging from one or more fully charged or depleted batteries, and/or sources that provide higher voltages, such as solar panels. When voltage regulator U<b>2</b> draws power from the installed batteries, transistor Q<b>1</b> remains open such that if one or more solar panels are plugged into the controller, the current will not immediately rush through the installed batteries or the one or more lamps. The voltage from the installed batteries may be supplied to the voltage regulator U<b>2</b> while the transistor Q<b>1</b> is open through the Schottkey diode D<b>5</b>. The voltage regulator U<b>2</b> may also provide a reference voltage (e.g., set at 2.5V) for the microcontroller IC<b>1</b> to use in its analog measurement of specific voltage levels in the circuit with a higher resolution compared to higher input voltages (e.g., 5V).</p><p id="p-0095" num="0127">The system may include multiple status lights or other indicators and related circuitry to provide cues to the user about the status of the system. As shown in <figref idref="DRAWINGS">FIG. <b>11</b></figref>, the system may include LED <b>1</b>, LED <b>2</b>, and LED <b>3</b>, which may each have a different color (e.g., red, yellow, and green, respectively) and may provide feedback to the user regarding battery charge levels (green), status of input power for an external power source such as a solar power (yellow), and to let the user know if a fault has occurred with the external power source or with the installed batteries (red).</p><p id="p-0096" num="0128">The system may include a USB dedicated charging port controller and current limiting power switch U<b>3</b> and related circuitry, which may provide auto-detection of USB data line voltages and automatically provide the correct electrical signature on the data lines to charge compliant devices among multiple dedicated charging schemes. The USB dedicated charging port controller and current limiting power switch U<b>3</b> may also provide a current limiting function so as to charge the USB compliant device from a power input of an external source such as a solar panel or from the internally installed batteries. The microcontroller IC<b>1</b> may monitor the draw of current by an attached external electronic device through the charging port. The system may configure the batteries (e.g., LFP or Li-Ion batteries) in series to produce a higher voltage when the system is charging an external electronic device (and, optionally, simultaneously powering the LED light(s)), and switch the configuration of the batteries to parallel once the microcontroller IC<b>1</b> senses that the external electronic device is no longer drawing current (the parallel configuration is more appropriate for powering the LED light(s) alone). In some embodiments, and without limitation, the microcontroller IC<b>1</b> may control the current limiting function of the charging port controller and current limiting power switch U<b>3</b> such that a limited amount of current is drawn by an external device attached to the USB charging port when power is needed for other functions; e.g., the operation of the one or more lamps and charging the installed batteries.</p><p id="p-0097" num="0129">The system may also include a battery compartment or holder for housing and electrically connecting the installed batteries to the system. <figref idref="DRAWINGS">FIG. <b>12</b></figref> provides a schematic of an exemplary circuitry associated with the battery compartment for housing and electrically connected installed batteries. The compartment may include three independent holders for batteries B<b>1</b>, B<b>2</b>, and B<b>3</b>, or may be one holder but with each battery terminal being independent of all other terminals, thus not forcing the batteries into either serial or parallel configurations.</p><p id="p-0098" num="0130">The controller may include transistors in electronic communication with the battery compartment and installed batteries that can be used to change the configuration of the installed batteries (e.g., from series to parallel and vice versa) depending on a number of factors. Those factors include the power available from attached one or more solar panels (which varies depending on weather and environmental conditions: clouds, low-light conditions, etc.), the power available from the installed batteries, and the current load on the system (e.g., the one or more lamps and/or an external electronic device). For accurate measurement of the battery voltage, the measurement the microcontroller IC<b>1</b> may measure the voltage of the batteries when the batteries are neither providing power nor being charged (no load or charge). To do so, the battery measurement may be timed with the pulse width modulation (PWM) timing of the power supply to one or more LED lamps and/or any external electronic devices being powered or charged by the system so that measurement is made during the time when no current is being supplied to LED lamp(s) or the external electronic device(s). Similarly, the battery voltage measurement is always timed with the PWM timing of the battery charge so that the measurement is made during the time when no current is being supplied to the batteries.</p><p id="p-0099" num="0131">The microcontroller IC<b>1</b> may change the configuration of the installed batteries to place them in series or in parallel without the batteries being physically moved by changing the state (open or closed) of one or more transistors (e.g., MOSFETs) located in the control circuitry associated with the battery compartment. For example, and without limitation, the system includes transistors Q<b>14</b> and Q<b>17</b> (e.g., P-Channel MOSFETs) that may be closed (with transistors Q<b>12</b>, Q <b>13</b>, Q <b>15</b>, and Q<b>16</b> being in the open condition) to place the batteries installed in holders B<b>1</b>, B<b>2</b>, and B<b>3</b> in a series configuration. The drain of transistor Q<b>14</b> may be connected to the negative terminal of battery holder B<b>1</b>, and the source of transistor Q<b>14</b> may be connected to the positive terminal of battery holder B<b>2</b>. In addition, the drain of transistor Q<b>17</b> may be connected to the negative terminal of battery holder B<b>2</b> and the source of transistor Q<b>17</b> may be connected to the positive terminal of battery holder B<b>3</b>. The gates of Q<b>14</b> and Q<b>17</b> may be connected to ground through resistors R<b>34</b> and R<b>12</b> such that as the batteries are being installed in battery holders B<b>1</b>, B<b>2</b>, and B<b>3</b>, the gate to source voltage may be maximized to cause the two transistors Q<b>14</b> and Q<b>17</b> to be closed. When the batteries are installed in holders B<b>1</b>, B<b>2</b>, and B<b>3</b>, transistors Q<b>14</b> and Q<b>17</b> are in the normally closed switch configuration because of the gate connection to ground and the three batteries are connected in series with no output from the microcontroller.</p><p id="p-0100" num="0132">Transistors Q<b>13</b> and Q<b>16</b> (e.g., P-Channel MOSFETs) in the circuitry associated with the battery compartment may have their respective drains connected to the negative terminals of battery holders B<b>1</b> and B<b>2</b>, (via transistors Q<b>14</b> and Q<b>17</b> when they are closed) their sources may be both connected to the positive terminal of battery holder B<b>1</b>, and their gates may be connected to the positive terminal of battery holder B<b>1</b> (when no current is passing through transistor Q<b>19</b>). In this arrangement, the gate to source voltage of both transistors Q<b>13</b> and Q<b>16</b> is near zero and both transistors Q<b>13</b> and Q<b>16</b> are normally open such that with no output from the microcontroller there is no shorting of the negative terminals of battery holders B<b>1</b> and B<b>2</b> to the positive terminal of battery holder B<b>1</b>.</p><p id="p-0101" num="0133">Transistors Q<b>12</b> and Q<b>15</b> (e.g., N-Channel MOSFETs) in the circuitry associated with the battery compartment may have their respective drains connected to the positive terminals of battery holders B<b>2</b> and B<b>3</b> (via Q<b>14</b> and Q<b>17</b> when they are closed) and may have their sources both connected to the negative terminal of battery holder B<b>3</b>. Both transistors Q<b>12</b> and Q<b>15</b> may have their gates connected to ground via Pin <b>16</b> of the microcontroller IC<b>1</b> so the voltage between the gate and source of each of the transistors Q<b>12</b> and Q<b>15</b> is near zero and both transistors Q<b>12</b> and Q<b>15</b> are normally open so that with no output from the microcontroller IC<b>1</b> there may be no shorting of positive terminal of battery holder B<b>2</b> and B<b>3</b> to the negative terminal of B<b>3</b>.</p><p id="p-0102" num="0134">Each of the transistors associated with the battery compartment (Q<b>12</b>, Q<b>13</b>, Q<b>14</b>, Q<b>15</b>, Q<b>16</b> and Q<b>17</b>) may include an internal body diode that is oriented in a manner to allow a limited flow of current through the transistor when the transistor is open. For example, with no external power being supplied to the circuitry associated with the battery compartment, there is a positive voltage at the positive terminal of B<b>1</b> when a battery is installed in the holder B<b>1</b>, and a circuit is completed through the source of transistor Q<b>12</b> via the associated body diode. In such a scenario, even though there are no batteries installed in holders B<b>2</b> and B<b>3</b>, a circuit is completed and power is supplied to the voltage regulator U<b>2</b>. If the voltage of the installed battery is high enough, the microcontroller IC<b>1</b> will turn on. The body diode of transistor Q<b>12</b> reduces the voltage provided by the battery (e.g., by about 0.5V), and the voltage measurement of the battery will consequently be approximately 0.5V below the actual value. The voltage drop-off may be useful for checking for mixed chemistry battery combinations, as discussed below. Similarly, if a battery is installed in battery holder B<b>2</b> (without batteries being installed in holders B<b>1</b> and B<b>3</b>) the source of transistor Q<b>13</b> may be connected to the positive terminal of holder B<b>1</b> and the source of transistor Q<b>15</b> may be connected negative terminal of holder B<b>3</b>, such that a circuit is completed through the body diodes of transistors Q<b>13</b> and Q<b>15</b> and power is again supplied to the voltage regulator U<b>2</b>. Also, if the battery voltage is high enough, the microcontroller IC<b>1</b> will turn on. Similarly, if a battery is installed in battery holder B<b>3</b> (without batteries being installed in holders B<b>1</b> and B<b>2</b>), the source of transistor Q<b>16</b> being connected to the positive terminal of holder B<b>1</b>, a circuit is completed through the body diode of transistor Q<b>16</b> and once again power is supplied to the voltage regulator U<b>2</b>. As a result, the consumer of this product is not forced to install the battery in a particular order, making the product more user-friendly. Because transistors Q<b>14</b> and Q<b>17</b> are to be normally closed when batteries are installed as controlled by a voltage difference between the gate and source of each device, and because batteries being installed can be as low as 0.7V in their depleted state, the gate to source threshold voltage of the devices must be sufficiently low to active the device at 0.7V and still be able to handle the voltage difference between the source and drain and the requisite currents of the product.</p><p id="p-0103" num="0135">For parallel configuration, the order of how the transistors are switched is important so as not to connect the negative terminals of the battery holders directly to the positive terminals of the battery holders, which would cause short circuits. When the batteries are to be place in parallel configuration, first the transistors Q<b>14</b> and Q<b>17</b> (e.g., P-Channel MOSFETs) need to be switched open. The microcontroller IC<b>1</b> may provide a voltage (and therefore current) from pin <b>15</b> (RC<b>4</b>) to the base of the transistor Q<b>9</b> (e.g., an NPN switching transistor) which allows current to pass through the transistor Q<b>9</b> and thus bring the potential of its collector to nearly equal the potential of its emitter, which is connected to ground. This may in turn drop the potential of the gate of transistor Q<b>18</b> (e.g., a P-Channel MOSFET) so that there is large enough voltage between the gate and source of transistor Q<b>18</b> to make the switch close, thus raising the potential of the gates of transistors Q<b>14</b> and Q<b>17</b>. Once the potential of the gates of transistors Q<b>14</b> and Q<b>17</b> is raised, the voltage between the gates and sources of these two devices is reduced so that the switches are open and the batteries installed in holders B<b>1</b>, B<b>2</b>, and B<b>3</b> may be disconnected from one another.</p><p id="p-0104" num="0136">The gate of transistor Q<b>18</b> may be connected to the collector of transistor Q<b>9</b> through a voltage divider so that the gate to source voltage limit of the device is not violated. Because of the specific orientation of transistors Q<b>12</b>, Q<b>13</b>, Q<b>15</b> and Q<b>16</b>, a circuit may be complete through the body diodes of the those devices so that the batteries are still providing power to voltage regulator U<b>2</b> and thus power to the microcontroller IC<b>1</b> so that the system is still operational. Because of the fast switching of the transistors Q<b>14</b> and Q<b>17</b> (e.g., P-Channel MOSFETs), the voltage change in the circuit can be almost instantaneous and an RC circuit made up of capacitor C<b>11</b> and resistors R<b>41</b> and R<b>34</b> (and sometimes resistor R<b>12</b>), which described below in further detail, may operate to slow the change in voltage levels in the circuitry associated with the battery compartment. Consequently, the microcontroller IC<b>1</b> may pause the switching process (e.g., momentarily make no further changes to the conditions of the transistors) for several milliseconds (e.g., about 8 ms to about 150 ms, or any value therein) to allow the voltages in the circuit to stabilize before initiating further switching in the transistor in the circuitry associated with the battery compartment.</p><p id="p-0105" num="0137">After the requisite pause, another output from the microcontroller IC<b>1</b> from pin <b>16</b> (RC<b>5</b>) may be activated that simultaneously supplies voltage to transistor Q<b>15</b> and Q<b>12</b> (e.g., N-Channel MOSFETs) to close them and connect the negative terminals of battery holders B<b>1</b> and B<b>2</b> to the negative terminal of B<b>3</b>. The output from the microcontroller IC<b>1</b> may also supply a voltage (and therefore current) to the base of transistor Q<b>19</b> (e.g., NPN switching transistor), which may allow current to pass through the transistor Q<b>19</b> to bring the potential of the collector thereof to nearly equal the potential of the emitter thereof, which is connected to ground. This in turn may drop the potential of the gate of transistors Q<b>13</b> and Q<b>16</b> (e.g., P-Channel MOSFETs) so that there may be a large enough voltage between the gate and source of the two transistors Q<b>13</b> and Q<b>16</b> to close them thereby connect the positive terminals of battery holders B<b>2</b> and B<b>3</b> to the positive terminal of battery holder B<b>1</b> and place the batteries in parallel to one another. The gates of transistors Q<b>13</b> and Q<b>16</b> may be connected to the collector of transistor Q<b>19</b> through a voltage divider so that the gate to source voltage limit of these devices is not violated. Because the microcontroller IC<b>1</b> may be powered at 2.5V (setting its output levels at 2.5V), the transistors Q<b>12</b> and Q<b>15</b> (e.g., N-Channel MOSFETs) must have a low enough gate to source threshold voltage to allow the devices to fully turn on with a gate potential of 2.5V, while being able to meet all the other circuit voltage and current requirements. Batteries that are depleted to a voltage output as low as 0.7V may be installed in the circuit, and the gate to source threshold voltage of the transistors Q<b>13</b> and Q<b>16</b> may be sufficiently low to activate the device at 0.7V and yet be able to handle the voltage difference between the source and drain and the requisite currents of the product.</p><p id="p-0106" num="0138">The system may also be capable of switching the installed batteries from a parallel configuration to a series configuration. The above described process for switching the battery configuration from series to parallel may be performed in opposite order (in reverse) to place the batteries in series configuration. The microcontroller IC<b>1</b> may cease the voltage output to transistors Q<b>12</b>, Q<b>15</b> and Q<b>19</b> to turn them off, and, after the requisite time delay (e.g., about 8 ms to about 180 ms, or any value therein), the output from the microcontroller IC<b>1</b> to transistor Q<b>9</b> may be turned off, restoring the circuit to a series configuration.</p><p id="p-0107" num="0139">Several of the transistors in the present system may be MOSFETs, which have very fast switch times. Thus, as batteries are being installed, or as the batteries are being switched between series and parallel and back again, there may be instantaneous changes in voltage due to the switching or connection of the battery terminals to the battery holder terminals, which may cause an instantaneous surge of current through transistors Q<b>14</b> and/or Q<b>17</b>, depending on which battery holder is receiving a battery. To compensate for the potential current surges, capacitor C<b>11</b> and resistors R<b>41</b> and R<b>34</b>, (and sometimes resistor R<b>12</b>) may be used to create an RC circuit that slows the change in voltage between the gate and source of transistors Q<b>14</b> and Q<b>17</b> to regulate the current going through the body of the transistors (e.g., MOSFET) and prevent damage to the transistors. When the circuit is in series configuration, resistor R<b>12</b> may be connected to ground and included in the RC circuit. When the batteries are in parallel configuration, transistor Q<b>18</b> is closed and pin <b>1</b> of resistor R<b>12</b> may be at the same potential as the positive terminal of battery holder B<b>1</b>. Resistor R<b>12</b> may be sized to limit the amount of leakage current going through it in this parallel condition of the batteries, and may no longer part of the RC circuit. The transition time from parallel to series may be less than the transition time from series to parallel, and the RC circuit is designed to assure current is properly limited for the series-to-parallel transitions and when individual batteries are installed.</p><p id="p-0108" num="0140">The system of the present invention may be operable to charge the batteries installed in holders B<b>1</b>, B<b>2</b>, and B<b>3</b> in either series or parallel configurations. The microcontroller IC<b>1</b> may monitor the current going through the batteries. A very low value resistor R<b>21</b> may be located between the negative terminal of the battery holder B<b>3</b> and ground (when in series configuration) and between the negative terminal of battery holders B<b>1</b> and B<b>2</b> and B<b>3</b> and ground (when in parallel configuration). The microcontroller IC<b>1</b> may monitor the potential at the positive side of resistor R<b>21</b> as current passes through it (after having gone through the batteries) and then translates that potential into a current reading. The microcontroller IC<b>1</b> calculates both peak current and average current going through resistor R<b>21</b>. The average amount of current passing through the batteries is controlled via a pulse width modulation (PWM) process by the microcontroller IC<b>1</b> providing specific time based pulses of voltage to the base of transistor Q<b>7</b> (e.g., an NPN switching transistor), which allows current to pass through the transistor Q<b>7</b> and bring the potential of the collector to nearly equal the potential of the emitter, which is connected to ground. This in turn drops the potential of the gate of transistor Q<b>8</b> (e.g., a P-Channel MOSFET) such that there is large enough voltage between the gate and source of transistor Q<b>8</b> to activate it and allow it to conduct and allow current to pass through the batteries. The gate of transistor Q<b>8</b> is connected to the collector of transistor Q<b>7</b> through a voltage divider so that the gate to source voltage limit of the transistor Q<b>8</b> is not violated. The source of Q<b>8</b> is connected to the input power of the solar panel through transistor Q<b>1</b> (e.g., a P-Channel MOSFET), or is connected to the output of the step-down converter U<b>1</b> through a combination of transistors Q<b>3</b>, Q<b>4</b> and Q<b>10</b> (e.g., MOSFETs).</p><p id="p-0109" num="0141">Because the installed batteries should not be charged when over a certain temperature threshold, one or more thermistor temperature sensors, such as VR<b>1</b> and VR<b>2</b>, may be placed at various locations, such as near the positive terminals of battery holders B<b>1</b> and B<b>3</b>. If one or more thermistor temperature sensors (e.g., VR<b>1</b> and VR<b>2</b>) measure a temperature above a predetermined threshold, battery charging will be inhibited until the unit cools.</p><p id="p-0110" num="0142">The system may provide power for one or more light sources (e.g., one or more LED lamps). The microcontroller IC<b>1</b> may actively monitor the current going through the LED lamps. An exemplary LED lamp circuit is shown in <figref idref="DRAWINGS">FIG. <b>13</b></figref>. The exemplary lamp circuit includes a connector CON<b>1</b> for electronically connecting to connector CON<b>2</b> shown in <figref idref="DRAWINGS">FIG. <b>11</b></figref>. The LED lamp circuit may be placed within a housing designed for sitting on a flat surface and/or attachment to a wall or ceiling, for being anchored in the soil, trees, rock crevices, or other natural anchoring points, etc. The connectors CON<b>1</b> and CON<b>2</b> may be standard LED connectors. A low value resistor R<b>30</b> (e.g., a resistor having a resistance of about 0.2 ohm) may be located between the negative terminal of connector CON<b>2</b>, which provides power to the LED lamps LED<b>1</b> and LED<b>2</b> through connector CON<b>1</b> as shown in <figref idref="DRAWINGS">FIG. <b>13</b></figref> and ground. The microcontroller IC<b>1</b> may monitor the potential at the positive side of resistor R<b>30</b> as current passes through it after having gone through LED<b>1</b> and LED<b>2</b>. The microcontroller IC<b>1</b> may then translate that potential into a current reading. The average amount of current passing through the LED<b>1</b> and LED<b>2</b> is controlled via a pulse width modulation (PWM) process by the microcontroller IC<b>1</b>. The microcontroller IC<b>1</b> may provide specific time based pulses of voltage to the gate of transistor Q<b>11</b> (e.g., a N-Channel MOSFET), which may raise the potential of the gate of the transistor Q<b>11</b> such that there is a large enough voltage between the gate and source of transistor Q<b>11</b> to allow transistor Q<b>11</b> to conduct current and allow current to pass through LED<b>1</b> and LED<b>2</b>. The positive terminal of connector CON<b>2</b> is connected to the input power of the solar panel through transistors Q<b>1</b> and Q<b>3</b> (e.g., P-Channel MOSFETs), or is connected to the output of the step-down converter U<b>1</b> through a combination of transistors Q<b>4</b> and Q<b>10</b> (e.g., P-Channel MOSFETs), as discussed further below. When the power for the LED <b>1</b> and LED <b>2</b> is provided by solar power through the step-down converter U<b>1</b> and the installed batteries are fully charged, transistors Q<b>3</b> and Q<b>8</b> may be in the open state so that power cannot come from the installed batteries, preventing the batteries from being depleted during the lamp operation.</p><p id="p-0111" num="0143">The light output of LED<b>1</b> and LED<b>2</b> lamp may be varied by the microcontroller IC<b>1</b> using PWM process to control the average current going through LED<b>1</b> and LED<b>2</b>. The microcontroller IC<b>1</b> may utilize capacitive touch sensing pads S<b>1</b>, S<b>2</b>, S<b>3</b>, and S<b>4</b> to control the current passed through LED<b>1</b> and LED<b>2</b>. The LED lamp typically may be operated at a minimum of 2.8V to achieve full luminosity of the LED<b>1</b> and LED<b>2</b>. Because LEDs are susceptible to over current due to their inherently low internal resistance, the LEDs also have a maximum voltage in which they can operate (e.g., 4.6V). When the LED lamp is powered through step-down converter U<b>1</b>, which provides 5V in order to supply the requisite voltage for the charge port (e.g., a USB port), the voltage needs be reduced so as not to provide too much current to the LED<b>1</b> and LED<b>2</b>. A low value resistor R<b>11</b> may be used to step down the voltage provided by step-down converter U<b>1</b> to LED<b>1</b> and LED<b>2</b>. When power is coming from the installed batteries in parallel configuration (with transistors Q<b>4</b> and Q<b>10</b> in the open condition and transistors Q<b>8</b> and Q<b>3</b> in the closed condition) the voltage provided by the batteries may not rise above about 4.2V, and thus a step-down resistor may not be necessary. When the installed batteries are in a series configuration and the total voltage provided by the batteries is less than about 5.25V (e.g., no load is applied and the installed batteries are of mixed chemistry or Alkaline batteries) step-down converter U<b>1</b> may remain in an off condition, transistors Q<b>4</b> and Q<b>10</b> may be in an open condition, and transistors Q<b>8</b> and Q<b>3</b> may be in a closed condition, allowing the batteries to provide power to the LED lamp. Under such system conditions, power from the installed batteries may be supplied to LED<b>1</b> and LED<b>2</b> without overpowering the LEDs because the total voltage supplied by the installed batteries sag under load. If when the batteries are in series and the total voltage of the batteries is about 5.25V or more (e.g., no load applied and the installed batteries are of mixed chemistry), transistor Q<b>3</b> may in an open condition, transistor Q<b>8</b> may be in a closed condition, and power will go from the batteries through Schottky diode D<b>5</b> to power step-down converter U<b>1</b>. In addition, transistors Q<b>4</b> and Q<b>10</b> may be closed so that energy from step-down converter U<b>1</b> can be supplied to the lamp LEDs. In this configuration, transistor Q<b>1</b> remains closed so that if a solar panel is plugged in, the voltage from the solar panel is not allowed to reach LED<b>1</b> or LED <b>2</b>, nor feed through transistors Q<b>4</b> and Q<b>10</b> and thus reach the charging port controller and current limiting power switch U<b>3</b>, which may have a maximum voltage input of about 6V.</p><p id="p-0112" num="0144">The arrangement of transistors Q<b>4</b> and Q<b>10</b> (e.g., P-Channel MOSFETs) in the controller circuitry may create a bi-directional circuit switch due to their sources being connected to one another and having opposing body diodes such that when both switches are open, no current may be passed through the combination in either direction. The transistors Q<b>4</b> and Q<b>10</b> may be switched by output from the microcontroller IC<b>1</b> providing voltage (and therefore current) to the base of the transistor Q<b>6</b> (e.g., an NPN switching transistor), which allows current to pass through the transistor Q<b>6</b> and thus bring the potential of the collector to nearly equal the potential of the emitter, which is connected to ground. This in turn drops the potential of the gate of the transistors Q<b>4</b> and Q<b>10</b> (e.g., a P-Channel MOSFETs) such that there is large enough voltage (due to voltage leakage through the reverse body diodes) between the gate and source of each of transistors Q<b>4</b> and Q<b>10</b> to close the bi-directional switch. The gates of transistors Q<b>4</b> and Q<b>10</b> are connected to the collector of transistor Q<b>6</b> through a voltage divider so that the gate to source voltage limit of the transistors Q<b>4</b> and Q<b>10</b> is not violated. Similarly, transistor Q<b>1</b> (e.g., a P-Channel MOSFET) is switched by voltage control from the microcontroller IC<b>1</b> supplied to the base of transistor Q<b>2</b> (e.g., an NPN switching transistor). The gate of transistor Q<b>1</b> may be connected to the collector of transistor Q<b>2</b> through a voltage divider so that the gate to source voltage limit of transistor Q<b>1</b> is not violated.</p><p id="p-0113" num="0145">The system includes at least one connector configured to electronically connect with a solar panel, such that the solar panel can provide power to the system. For example, and without limitation, the power generated by the solar panel may be provided to the circuit though connector CON<b>1</b> shown in <figref idref="DRAWINGS">FIG. <b>11</b></figref> with some overvoltage protection provided by overvoltage protector diode D<b>3</b> and transient voltage suppressor D<b>2</b>. The system may include a low VF Schottkey barrier diode D<b>1</b> in electronic connection with the connector CON<b>1</b> to provide reverse input voltage protection and to protect the solar panel from receiving power from the batteries of the unit at night or in other low-light conditions. To allow for easy selection of solar panels, this invention may be compatible with standard 12V solar panels, and can withstand the open circuit voltage supplied by 12V solar panels of 22V. However, it is to be understood that lower voltage solar panels can also be used. In addition, any DC power source having a voltage in the range of about 6V to about 22V (or any value therein) may be used to power the product.</p><p id="p-0114" num="0146">Operation of the Exemplary Embodiment</p><p id="p-0115" num="0147">Embodiments of the present invention may be operable to both identify and utilize batteries of different chemistries that are installed into the battery compartment of the system. In some embodiments, and without limitation, the battery compartment may be configured for a certain standard sized battery. However, in other embodiments, the battery compartment may be configured to receive batteries of multiple sizes or the system may include more than on battery compartment, each of which may accept batteries of a different size. The system may accept batteries of multiple different chemistries in the required size(s) to allow the user to utilize the types of batteries that are available to him (which may be limited in remote or underdeveloped areas). The present system may utilize primary batteries, such as zinc-carbon (dry cell), zinc-chloride, alkaline, or lithium chemistry; or a secondary batteries, such as LiFePo<sub>4</sub>, NiCd, nickle-metal hydride (NiMH), NiZn, or lithium ion chemistry. Other embodiments may include other available battery types such as lead-acid, or yet to be developed chemistries.</p><p id="p-0116" num="0148">Lithium iron phosphate (LiFePo<sub>4</sub>, also known as LFP) batteries are commonly available in the 14500-package size (almost identical to AA) which has nominal voltage of 3.2V, or lithium-ion (Li-Ion) batteries, also in the 14500-package size which have a nominal voltage of 3.7V. LED lamps typically requires a minimum of 2.8V to achieve full luminosity of the LEDs. Either of these kinds of batteries will work well when in parallel configuration, providing the correct voltage to operate the LED lamp. Both battery types are rechargeable for thousands of cycles giving them substantial longevity. However, they are too expensive for some consumers.</p><p id="p-0117" num="0149">Nickle Metal Hydride (NiMH) batteries are another type of secondary battery that may be used with the present system that is commonly available in AA battery size. This type of battery has a nominal voltage is 1.2V. In order to provide enough voltage to drive the LED lamp, three NiMH batteries may be configured in series (e.g., three NiMH batteries in series, four would exceed the maximum operable voltage of LEDs [4.6V]). NiMH batteries are well suited for powering LED lamps based on their voltage output, power stored as measured in mAHr, and relatively low price. The charge storage capacity (and thus charge cycle) is comparable to LFP and Li-Ion batteries. However, though they are more price accessible than the LFP or Li-Ion batteries, they can only take approximately 200 recharges before they lose the ability to hold a full charge and need to be replaced.</p><p id="p-0118" num="0150">Conventional systems are unable to distinguish between batteries of different chemistries. Embodiments of the present invention are operable to switch between parallel and serial configurations based on the type of battery installed in the battery compartment. <figref idref="DRAWINGS">FIG. <b>14</b></figref> is a table providing battery data (e.g., voltage output, charging characteristics, etc.) for a few different battery types when installed in the system (it should be noted that the system is not limited to the three battery types shown in <figref idref="DRAWINGS">FIG. <b>14</b></figref>, and that <figref idref="DRAWINGS">FIG. <b>14</b></figref> provides only a sample of data that may utilized in programming the system of the present invention). The microcontroller IC<b>1</b> may be programed to alter the configuration of the batteries and the load of the system in order to maximize the useful power available from the batteries and maximize the life and charge cycle of the batteries based on such performance data for the batteries within the system as shown in <figref idref="DRAWINGS">FIG. <b>14</b></figref>. When a battery is installed, the controller is able to measure its voltage. If that voltage is then raised above a certain threshold (e.g., 1.1V), the microcontroller IC<b>1</b> may then discern that a second battery has been installed. If that voltage is then raised again above a certain threshold then the microcontroller IC<b>1</b> may discern that a third battery has been installed. Based on the counting of the amount of batteries and their total voltage (with the default configuration of the circuit in series), the unit may determine the type of battery based on the number of batteries and the total voltage provided. Because three LFP batteries at nominal voltage can be the same voltage as two fully charged Li-Ion batteries in combination with one fully charged NiMH battery, all in series, the system may be operable to take several additional measurements and performs several additional tests to more accurately determine the chemistry of the installed batteries.</p><p id="p-0119" num="0151">The microprocessor IC<b>1</b> may record the total voltage of the three batteries installed in the compartment while they are in the series configuration. If this voltage is higher than 4.29V, (the maximum limit for three fully charged NiMH batteries in series) then the unit turns on the first output RC<b>4</b> from the microcontroller IC<b>1</b> so that transistors Q<b>14</b> and Q<b>17</b> are in the open condition. The circuit is now in partial parallel configuration because transistors Q<b>12</b>, Q<b>13</b>, Q<b>15</b>, and Q<b>16</b> are also in the open condition and the circuit is completed through the reverse body diodes of transistors Q<b>12</b>, Q<b>13</b>, Q<b>15</b>, and Q<b>16</b>, which typically cause a 0.5V drop in measured voltage of the batteries. The resulting voltage of the batteries in this configuration may be then recorded. Subsequently, the microprocessor IC<b>1</b> may turn on the second output RC<b>5</b> from the microcontroller IC<b>1</b> so that transistors Q<b>12</b>, Q<b>13</b>, Q<b>15</b>, and Q<b>16</b> are in the closed condition, causing the circuit to be in full parallel configuration and the resulting voltage of the batteries in this configuration may be recorded.</p><p id="p-0120" num="0152">The microcontroller IC<b>1</b> may then complete a first test by comparing the series voltage to the fully parallel voltage. If the voltage in series is 3 times larger (plus or minus a tolerance, such as +/&#x2212;0.3V) than the measured voltage in full parallel configuration, then all three batteries are of the same type and they are recorded as lithium based. If the calculation is outside of the +/&#x2212;0.3V tolerance then the batteries are classified as mixed chemistry. Because there are combinations of charged and depleted LFP and Li-Ion batteries that may pass the first test above, a second test may be performed. When taking the battery measurement in the partial parallel configuration, the voltage of the three batteries tend to equal one another, but because the measurement is through the reverse body diodes of transistors Q<b>12</b>, Q<b>13</b>, Q<b>15</b> and Q<b>16</b>, the average voltage drop of 0.5V is much less when batteries of different individual voltages are installed. Thus, if the difference between the measured voltage of the batteries in the partial parallel configuration and in the fully parallel configuration is greater than or equal to about 0.4V, the batteries may be determined to be of the same type and classed as Li based. If the difference is less than about 0.4V, the batteries may be classified as mixed chemistry.</p><p id="p-0121" num="0153"><figref idref="DRAWINGS">FIG. <b>15</b></figref> provides an illustration of an exemplary set of voltage measurements taken from installed batteries by the microcontroller IC<b>1</b>. <figref idref="DRAWINGS">FIG. <b>15</b></figref> also points out the points at which the inrush current protection provided by transistor Q<b>1</b> is utilized.</p><p id="p-0122" num="0154">When the batteries are classed as mixed chemistry, the battery configuration may then be placed in series, the step-down converter U<b>1</b> may be turned on, and transistors Q<b>4</b> and Q<b>10</b> may be closed, and the unit will properly operate the LED lamp. However, transistors Q<b>8</b> and Q<b>3</b> may be open and no charging of the batteries will be allowed in order to prevent the damaging of the mixed chemistry batteries. In addition, transistor Q<b>1</b> remains open such that if a solar panel is plugged in, the current will not immediately rush through the batteries. The system is operable to provide the voltage from the mixed chemistry batteries in series through the step-down converter U<b>1</b> through the low VF Schottkey diode D<b>5</b> to power the LED lamp without the risk of damaging the batteries or the system.</p><p id="p-0123" num="0155">When lithium-based batteries are installed in the battery compartment, the type of lithium battery may be determined by measuring the voltage of the batteries. Initially, the IC<b>1</b> may classify the batteries as LFP batteries based on the voltage measurements of the batteries in series, partial parallel, and parallel configurations. However, because depleted Li-Ion batteries can have the same voltage as charged LFP batteries, the microcontroller IC<b>1</b> may conduct another test during charging of the batteries to differentiate the kind of Li-based batteries. Li-Ion batteries have a much faster rise in voltage in a given time (dV/dT) when the voltage of the batteries is about 3.5V, than do LFP batteries when their voltage is approximately 3.5V. Thus, if the batteries are initially classified as LFP, and during charging the dV/dT of the battery at 3.5V matches that of Li-Ion, then the microcontroller IC<b>1</b> may automatically re-classify the installed batteries are as Li-Ion without damage to the batteries. The microcontroller IC<b>1</b> may adjust the charging algorithm of the batteries to allow them to be fully charged.</p><p id="p-0124" num="0156">In another example of a secondary test, if depleted non-rechargeable alkaline batteries are installed and are classified as NiMH, when charging begins, the batteries will immediately heat up, thus triggering the thermistor temperature sensors and the charging will be terminated.</p><p id="p-0125" num="0157">The system of the present invention may also be operable to adjust a charging algorithm of the installed batteries to accommodate differences in charging rates of batteries of the same chemistry. Due to differing internal resistance in installed batteries of the same type (e.g., LFP batteries, Li-ion batteries, etc.), the installed batteries may take charge at different rates. Because secondary batteries can be recharged up to thousands of times, the difference in charge between batteries of the same kind may become significant after repeated recharging. Without any adjustment to the charging algorithm, one or more of the installed batteries may be left undercharged, thus limiting the collective charge life of the installed batteries and reducing the operation time of the lamp for a single recharge cycle.</p><p id="p-0126" num="0158">To correct this issue, the system of the present invention may balance charge the installed batteries by charging one battery at a time. When one battery is installed its voltage is measured. Depending on the voltage of the battery, it could be classified as NiMH and the circuit will stay in the default series configuration. When external power is supplied, the unit will try to charge the battery. However, since the other two battery holders do not have batteries in them, and because of the direction of the reverse body diodes in transistors Q<b>12</b>, Q<b>13</b>, Q<b>15</b>, and Q<b>16</b>, no current will pass through the battery and therefore no current will flow through resistor R<b>21</b>. The microcontroller IC<b>1</b> may then change the circuit configuration to full parallel and as current flows through resistor R<b>21</b>, the type of battery will be reclassified to the appropriate type (e.g., LFP or Li-Ion) based on the batteries voltage and the dV/dT measurements taken as described above.</p><p id="p-0127" num="0159">Switching the batteries between series and parallel configurations yields many benefits that allow the product to be both user-friendly, and to operate in optimum ways under many external factors. The first is adaptability to various battery types and battery longevity when powering the LED lamp. For example, due to the different voltage characteristics of the various battery types available on the market, the system must be able to adapt the configuration of the batteries in order to maximize the length of the discharge period of the installed batteries. For example, since the system can operate with three AA NiMH batteries, each at 1.2V nominal voltage, the batteries should be in series to properly power to LED lamp. In this configuration, the lamp may run on high for at least 4 hours when the batteries are fully charged. However, if Li-Ion batteries are installed and remain in the series configuration, due to their high total voltage (11.1V nominal) the power may be passed through the step-down converter U<b>1</b> to convert the voltage provided by the batteries to 5V. When the lamp LEDs are powered through the step-down converter U<b>1</b>, the peak current through the LEDs may be about 1.75 A. Thus, the current provided by the batteries to the step-down converter U<b>1</b> may be about 790 mA (1.75 A*5V/11.1V). At this discharge rate, the Li-Ion batteries will only supply power to the LED lamp for about 1 hour. However, when the Li-Ion batteries are in the parallel configuration, not only is the input voltage to the lamp LED dropped from approximately 5V to approximately 3.7V (on average) but each of the three batteries supplies one-third of the total current and the current supplied by each battery may be reduced from about 790 mA to about 420 mA. The longevity of the batteries is highly dependent on it discharge rate, and a reduction in the discharge current to about 410 mA may extend the time the batteries are able to power the LED lamp to about 2.5 hours, increasing the charge cycle life of the batteries by a factor of about 2.5.</p><p id="p-0128" num="0160">As a further example, if LFP batteries are installed and remain in the series configuration, due to their high total voltage (9.6V nominal) the power may pass through the step-down converter U<b>1</b> to convert the power to 5V to power the LED lamp. When the lamp LEDs are powered with the step-down converter U<b>1</b>, the peak current through the LEDs may be about 1.75 A. Thus, the current provided by the batteries to the step-down converter U<b>1</b> may be about 910 mA (1.75 A*5V/9.6V). At this discharge rate, the LFP batteries may only power the LED lamp for 1.5 hours. However, when the LFP batteries are in the parallel configuration, not only may the input voltage to the lamp LED dropped from approximately 5V to 3.2V (on average) but each of the three batteries supplies one-third of the total current and so the current supplied by each battery may be reduced from about 910 mA to about 240 mA. Due to the dependence of the longevity of the battery on the discharge rate, when the discharge current is reduced to about 240 mA, the batteries are able to power to LED lamp for 4.0 hours, increasing the charge cycle life of the batteries by a factor of about 2.7. This invention therefore provides measurable advantages to the consumer by allowing the consumer to utilize the batteries that are available to him and/or the batteries that best fits his needs, without having to endure short discharge period.</p><p id="p-0129" num="0161">As noted above, when there is solar panel plugged into the unit of sufficient power, the step-down converter U<b>1</b> will be turned on and will supply power to a USB dedicated charging port U<b>3</b>. Three lithium-based batteries, when configured in series, may supply enough voltage to power the step-down buck converter U<b>1</b> and therefore the USB dedicated charging port U<b>3</b>. The system also allows an external electronic device to be charged through the charging port by the batteries alone. The microcontroller IC<b>1</b> normally monitors the battery configuration and load on the circuit and does not allow an external electronic device to be charged when there is not sufficient power provided by the solar panels. However, the system includes a switching mechanism that allows the consumer to override the settings made by the microcontroller IC<b>1</b> and configure lithium-based batteries into series. The consumer can switch the battery configuration to series by momentarily touching the off switch S<b>1</b> and the low switch S<b>2</b> simultaneously. When this is done the circuit will change to series configuration, with transistors Q<b>1</b> and Q<b>3</b> in the open condition, transistor Q<b>8</b> in the closed condition, and step-down converter U<b>1</b> turned on. To allow the simultaneous operation of the LED lamp (even though it will operate for a shortened duration as described above), transistors Q<b>4</b> and Q<b>10</b> may be in the closed condition. In this configuration, an external electronic device can be charged directly from the three lithium-based batteries when solar power is not available. When the USB charge port U<b>3</b> is no longer charging, or when solar power is available, the microcontroller IC<b>1</b> will stop the manually configured operation and again automatically control the circuit.</p><p id="p-0130" num="0162">The present invention is also operable to balance the voltage and current applied to the batteries during charging from the solar panels when there is sufficient light for the solar panels to generate power based on the type of the installed batteries and the instantaneous power produced by the solar panels. As previously discussed, solar panels produce certain levels of current at certain voltages based on their size (measured in watts) and the amount of incident solar radiation that they receive. The relation between voltage and current are defined for each size of solar panel. At the MPP, solar panels produce a maximum amount of power (combination of voltage and current). The system optimizes the charging of batteries by automatically configuring the batteries in series or parallel and by automatically routing the power from the solar panel through the step-down converter U<b>1</b> or by routing the power from the solar panel through Q<b>1</b> to the batteries, depending on the particular chemistry of the installed batteries and the power available from the solar panel(s).</p><p id="p-0131" num="0163">In one example, and without limitation, three NiMH batteries may be installed in the system, which need to be in series configuration in order to provide sufficient power to the LED lamp to a sufficient level. Series configuration is also ideal for NiMH battery charging. Thus, NiMH batteries may be maintained in series configuration whether they are being charged or they are powering the LED lamp or charging an external electronic device. If the three NiMH batteries were electrically connected to the solar panel, the solar panel output voltage may be equal to the battery voltage (under Kirchhoff s Voltage Law). For three NiMH batteries in series, the nominal voltage would be about 3.6V. However, 3.6V is substantially lower than the voltage of the MPP for standard 12V solar panels and at that voltage level, not all of the power that the solar panel can supply can be utilized by the system.</p><p id="p-0132" num="0164">In order to avoid such inefficiencies, the microcontroller IC<b>1</b> of the present system monitors the input voltage of the solar panel and the peak current and average current going through the batteries during charging. Under default conditions, the microcontroller IC<b>1</b> will open transistor Q<b>1</b>, turn on step-down converter U<b>1</b>, close transistors Q<b>4</b>, Q<b>10</b>, and Q<b>3</b>, and will use transistor Q<b>8</b> to provide pulse width modulation control of the current through the NiMH batteries. Based on the no-load voltage of the three batteries in series, the microcontroller IC<b>1</b> will charge the batteries in the preferred method for NiMH batteries: e.g., a slow charge averaging about 300 mA for an initial period of about 15 min, then a fast charge with a peak current of about 750 mA and an average current of about 560 mA until a voltage of about 4.29V is reached indicating the batteries are fully charged, then perform a maintenance charge averaging about 200 mA for a period of about 45 minutes. Because this operation may be done through step-down converter U<b>1</b>, the current being supplied by the solar panel only needs to be about 220 mA (750 mA*5V/17V) and thus a 5 W or larger solar panel can be used to charge the batteries. The time required for this operation may be about 4.5 hours. During this operation, indicator light LED<b>2</b> may be on (e.g., continuously) to indicate that there is ample solar power.</p><p id="p-0133" num="0165">If the available light diminishes (e.g., a cloud moves over the solar panel), the power output will fall. Also, the consumer may not be able to afford a 5 W solar panel and may wish to purchase a smaller and therefore less expensive 3 W solar panel. Under such conditions, the circuit in its default configuration will not be able to charge the batteries because the output voltage of the solar panel will drop to near short-circuit conditions and therefore there will not supply enough voltage to turn on the step-down converter UL If the circuit was left in this configuration, no charging would occur and valuable energy from the sun would be wasted.</p><p id="p-0134" num="0166">Embodiments of the present invention compensate for such conditions. The microcontroller IC<b>1</b> monitors the current and voltage of different points in the circuit, and when it senses that there is a solar panel attached to the product, but that the solar panel cannot produce enough power to turn on step-down converter U<b>1</b>, the microcontroller IC<b>1</b> will turn off the step-down converter U<b>1</b>, open transistors Q<b>4</b>, Q<b>10</b>, and Q<b>3</b> and will close transistor Q<b>1</b>. Now the solar panel is feeding current directly to the batteries, at the battery voltage (as explained by Kirchhoff s Voltage Law) via pulse width modulation through transistor Q<b>8</b>. As a result, power can be drawn from underpowered or small solar panels to charge the installed batteries. The charge time will increase due to the lower current going through the batteries, but the circuit automatically adjusts for this by concurrently measuring the resulting voltage of the batteries. During these conditions an indicator light may indicate the particular charging mode. For example, and without limitation, LED<b>2</b> may blink on and off to show that diminished power is available.</p><p id="p-0135" num="0167">The microcontroller IC<b>1</b> can also switch back to running the power provided by the solar panel through the step-down converter when conditions are appropriate. The microcontroller IC<b>1</b> repeatedly measures the average and peak current, and if the 5 W or larger solar panel that was covered by clouds starts to produce sufficiently high levels of current because the cloud is no longer shading the solar panel, the microcontroller will automatically open transistor Q<b>1</b>, which will stop current from being drawn from the solar panel and its voltage will instantaneously recover to open circuit voltage of approximately 22V. The microcontroller IC<b>1</b> will then sense ample voltage and may turn on step-down converter U<b>1</b>, close transistors Q<b>4</b>, Q<b>10</b>, and Q<b>3</b>, and operation of the solar panel at the MPP may be restored. To prevent hysteresis, this operation may be cycled no more than once during a designated time period (e.g., a time frame in a range of about 10 to about 100 seconds, such as every 12 seconds or any value or range of values in that range).</p><p id="p-0136" num="0168">When LFP batteries are installed, by default the batteries are configured in parallel because it is the optimum configuration for operating the LED lamp. Like NiMH batteries, the default condition for charging LFP batteries may be through the step-down converter U<b>1</b>. The microcontroller IC<b>1</b> may classify the batteries as LFP, and it may charge the batteries in a constant current manner until the no-load voltage of the batteries reaches about 3.6V, and it may then charge the LFP batteries under constant voltage of about 3.6V for a period of about 45 min. In a constant current mode, the ideal average current for LFP batteries is about 265 mA per battery, with a peak current of about 380 mA in a pulse width modulation process. Since the batteries are in parallel, the total current going through the batteries is at an average of about 795 mA and at a peak of about 1140 mA. With these currents, three LFP batteries may be fully charged within about 3 hours. To provide this much current while the solar panel is operating at its MPP, the solar panel needs to be of the 10 W size or larger. If the solar panel is not this large, or if it becomes covered by clouds, the microcontroller IC<b>1</b> will automatically recognize the drop deficiency in power and reconfigure the circuit to compensate for the deficiency.</p><p id="p-0137" num="0169">As the microcontroller IC<b>1</b> monitors the current and voltage of different points in the circuit, and it senses that there is a solar panel attached to the product, but that the solar panel cannot produce enough power to turn on the step-down converter U<b>1</b>, the microcontroller IC<b>1</b> will turn off the step-down converter U<b>1</b>, open transistors Q<b>4</b>, Q<b>10</b>, and Q<b>3</b>, will reconfigure the three LFP batteries into series configuration, and will close transistor Q<b>1</b>. Under these conditions, instead of the current being divided into 3 parts to charge LFP three batteries, all of the current will go through the batteries in series, and the batteries may be charged in about 3 hours with a 5 W solar panel and in about 3.8 hours with a 3 W solar panel. According to Kirchhoff's Voltage Law, the solar panel when applying current directly through the batteries in series will be operating at the voltage of the three batteries in series and by pulse width modulation through transistor Q<b>8</b>, the batteries will be properly charged. During this mode of operation, an indicator light or other indicator device may provide an indicator to notify the user of the current functional mode. For example, LED <b>2</b> may blink on and off to show that diminished power is available. Under the above conditions, if the batteries had been left in the parallel configuration it may have taken about 8 hours to fully charge three LFP batteries with a 5 W solar panel (due the current being divided by the three batteries). Similarly, it would have taken 10 or more hours to fully charge three LFP batteries with a 3 W solar panel. However, the system of the present invention may be able to switch the battery configuration between parallel and series in order to reduce the charge time for LFP batteries. In order to protect the LED lamp from overvoltage (due the solar panel operating at near 10 volts), the operation of the lamp may not be allowed in this configuration.</p><p id="p-0138" num="0170">As the LFP batteries are being charged in the series configuration, when the microcontroller IC<b>1</b> senses that there is sufficient voltage and current, the microcontroller IC<b>1</b> may automatically open transistor Q<b>1</b> which will stop current from being drawn from the solar panel to reset and its voltage will instantaneously recover to open circuit voltage of approximately 22V. The microcontroller IC<b>1</b> may then sense ample voltage provided by the solar panel and will turn on step-down converter U<b>1</b>, close transistors Q<b>4</b>, Q<b>10</b>, and Q<b>3</b>, change the battery configuration to parallel, and restore the solar panel to MPP operation. When the circuit is restored to this configuration, the operation of the lamp may be allowed. To prevent hysteresis, this operation may be cycled no more than once during a designated time period (e.g., a time frame in a range of about 10 to about 100 seconds, such as every 12 seconds or any value or range of values in that range).</p><p id="p-0139" num="0171">In another example in which Li-Ion batteries are installed, by system default the batteries are configured in parallel as this configuration may be optimal for operating the LED lamp. Like LFP batteries, the system default configuration for charging Li-Ion batteries is through the step-down converter U<b>1</b>. Since the microcontroller IC<b>1</b> may identify and classify the batteries as Li-Ion, it will charge the batteries in their preferred method of constant current until the no-load voltage of the batteries reaches about 4.2V, and then under constant voltage of about 4.2V for about 45 min. In the constant current mode, the ideal average current for Li-Ion batteries is about 230 mA per battery, with a peak current of about 256 mA in a pulse width modulation process. Since the batteries are in parallel, the total current going through the batteries is an average of about 690 mA and a peak of about 770 mA. Applying the above charging protocol, the system will fully charge three Li-Ion batteries within about 2.25 hours. In order to provide this much current while the solar panel is operating at its MPP, the solar panel should be a 5 W panel or larger. If the solar panel is not sufficiently large, or if it covered by clouds, the system will automatically compensate for the shortfall.</p><p id="p-0140" num="0172">The microcontroller IC<b>1</b> monitors the current and voltage of different points in the circuit, and when it senses that there is a solar panel attached to the product, but that the solar panel cannot produce enough power to turn on step-down converter U<b>1</b>, the microcontroller will turn off U<b>1</b>, open transistors Q<b>4</b>, Q<b>10</b>, and Q<b>3</b>, will reconfigure the three Li-Ion batteries into series configuration, and will close transistor Q<b>1</b>. Under these conditions, instead of the current being divided into 3 parts to charge three batteries, all of the current will go through the batteries in series. According to Kirchhoff s Voltage Law, the solar panel will be operating at the voltage of the three batteries in series and by pulse width modulation through transistor Q<b>8</b>, and the batteries may be fully charged. If the batteries were left in the parallel configuration under the above conditions, it would take around 6.5 hours to fully charge three LFP batteries with a 3 W solar panel (due the current being divided by the three batteries). But because the system is able to change the battery configuration between parallel and series, the three LFP batteries will charge in about 2.5 hours with a 3 W solar panel. In order to protect the LED lamp from overvoltage (due the solar panel operating at near 10 volts), the operation of the lamp may not be allowed in this configuration. Also, during these conditions an indicator light may indicate the particular charging mode. For example, and without limitation, LED<b>2</b> may blink on and off to show that diminished power is available.</p><p id="p-0141" num="0173">As the Li-Ion batteries are being charged in the series configuration, the microcontroller IC<b>1</b> continues to monitor the voltage and current at various points in the system circuitry. If the microcontroller IC<b>1</b> senses that the solar panel is providing sufficient power to charge the batteries in parallel, it will automatically open transistor Q<b>1</b>, which will stop current from being drawn from the solar panel to reset the solar panel, and its voltage will instantaneously recover to an open circuit voltage of approximately 22V. The microcontroller IC<b>1</b> will then sense ample voltage and will turn on step-down converter U<b>1</b>, close transistors Q<b>4</b>, Q<b>10</b>, and Q<b>3</b>, change the battery configuration to parallel, and the solar panel may be restored MPP operation. To prevent hysteresis, this operation may be cycled no more than once during a designated time period (e.g., a time frame in a range of about 10 to about 100 seconds, such as every 12 seconds or any value or range of values in that range). When the circuit is restored to the parallel configuration, operation of the lamp may once again be allowed.</p><p id="p-0142" num="0174">It should be noted that if the three LFP or Li-Ion batteries were in a series configuration and a 10 W or larger solar panel was installed, and transistor Q<b>1</b> is closed, the peak current through the batteries would be too high and would damage the batteries. Also, when balance charging LFP and Li-Ion batteries, the battery configuration is always in parallel configuration as noted above.</p><p id="p-0143" num="0175">Of special note, when the less popular NiCad secondary batteries are installed, because of their similarity to NiMH batteries in their voltage and preferred charge methods, they are treated identical to NiMH batteries.</p><p id="p-0144" num="0176">The present invention concerns self-contained, rechargeable power systems for areas having unreliable electric power grid systems or no electric power grid system at all, and methods related thereto. The power systems may include one or more solar panels of various sizes to provide an off-grid power generation source, a compartment for receiving batteries of various chemistries, a load, and a control circuitry that is operable to detect the voltage output of the batteries that are installed in the system to determine their specific battery chemistry and then adjust the charge algorithm of the batteries to optimize both the charge capacity and the cycle life of the batteries. The load may be one or more light emitters and/or one or more external electronic devices connected through the system by a charge port. Unlike in conventional portable or solar power charging and lighting technologies, the control circuitry in the systems of the present invention may monitors the power provided by the power generation source, the charge of the batteries, and the required current for running the load, and based on the various data, the control circuitry may adjust the current and voltage individually applied to the load and the batteries and adjust the amount of current drawn from the power generation source.</p><p id="p-0145" num="0177">The systems of the present invention may also be highly customizable. As the consumer wishes to perform several functions at the same time, such as charge batteries and charge USB compatible devices and operate the lamp at the simultaneously, this invention allows the consumer to upgrade their solar panel to larger sizes or adding additional solar panels of the same size to facilitate multiple and various levels of operation. In all cases, the invention monitors the available power and optimizes the performance as described above, prioritizing first with battery charging, then the addition of external device charging, then the addition of lamp operation. Thus, this invention provides optimum performance for the consumer while allowing the consumer to choose a smaller and therefore lower cost solar panel, or larger and therefore more powerful solar panels to handle more operations.</p><p id="p-0146" num="0178">The foregoing descriptions of specific embodiments of the present invention have been presented for purposes of illustration and description. They are not intended to be exhaustive or to limit the invention to the precise forms disclosed, and many modifications and variations are possible in light of the above teaching. The embodiments were chosen and described in order to best explain the principles of the invention and its practical application, to thereby enable others skilled in the art to best utilize the invention and various embodiments with various modifications as are suited to the particular use contemplated.</p><p id="p-0147" num="0179">It is to be understood that variations and modifications of the present invention may be made without departing from the scope thereof. It is to be appreciated that the features disclosed herein may be used different combinations and permutations with each other, all falling within the scope of the present invention.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-01-46" num="01-46"><claim-text><b>1</b>-<b>46</b>. (canceled)</claim-text></claim><claim id="CLM-00047" num="00047"><claim-text><b>47</b>. A method of charging a battery, comprising:<claim-text>a. electrically connecting at least one battery to an electronic charging system;</claim-text><claim-text>b. taking at least one measurement of a voltage output of said at least one battery;</claim-text><claim-text>c. identifying a battery chemistry of said at least one battery based on the at least one measurement of voltage output taken from said at least one battery;</claim-text><claim-text>d. selecting a charge algorithm from a plurality of charge algorithms for charging said at least one battery based on said battery chemistry of said at least one battery, wherein said electronic system includes a processing unit having an internal memory in which said plurality of charge algorithms are stored and from which said plurality of charge algorithms are retrievable; and</claim-text><claim-text>e. charging said at least one battery according to said charge algorithm.</claim-text></claim-text></claim><claim id="CLM-00048" num="00048"><claim-text><b>48</b>. (canceled)</claim-text></claim><claim id="CLM-00049" num="00049"><claim-text><b>49</b>. (canceled)</claim-text></claim><claim id="CLM-00050" num="00050"><claim-text><b>50</b>. (canceled)</claim-text></claim><claim id="CLM-00051" num="00051"><claim-text><b>51</b>. The method of <claim-ref idref="CLM-00050">claim 50</claim-ref>, wherein said electronic system is operable to apply balanced charging to said at least one battery.</claim-text></claim><claim id="CLM-52-91" num="52-91"><claim-text><b>52</b>-<b>91</b>. (canceled)</claim-text></claim><claim id="CLM-00092" num="00092"><claim-text><b>92</b>. The method of <claim-ref idref="CLM-00047">claim 47</claim-ref>, further comprising a power source controller circuitry operable to receive power from a plurality of power sources.</claim-text></claim><claim id="CLM-00093" num="00093"><claim-text><b>93</b>. The method of <claim-ref idref="CLM-00092">claim 92</claim-ref>, wherein said processing unit is operable to measure an electrical characteristic of said plurality of power sources and direct said power source controller circuitry to switch between parallel and series connections between said plurality of power sources during a charging process of said at least one battery based upon at least one of said electrical characteristic of said plurality of power sources, a variable voltage level required for charging said at least one battery, and variable load voltage resulting from the connection of one or more additional devices in electrical communication with said at least one battery.</claim-text></claim><claim id="CLM-00094" num="00094"><claim-text><b>94</b>. The method of <claim-ref idref="CLM-00092">claim 92</claim-ref>, wherein said plurality of power sources comprises a plurality of power sources that each produce a variable amount of power.</claim-text></claim><claim id="CLM-00095" num="00095"><claim-text><b>95</b>. The method of <claim-ref idref="CLM-00092">claim 92</claim-ref>, wherein said processing unit monitors electrical characteristics at a plurality of points in the power source controller circuitry, including said voltages produced by said plurality of power sources.</claim-text></claim><claim id="CLM-00096" num="00096"><claim-text><b>96</b>. The method of <claim-ref idref="CLM-00047">claim 47</claim-ref> wherein said electronic system is operable to connect primary and secondary batteries.</claim-text></claim><claim id="CLM-00097" num="00097"><claim-text><b>97</b>. The method of <claim-ref idref="CLM-00092">claim 92</claim-ref>, wherein said electronic system is operable to determine the battery chemistry of primary and secondary batteries.</claim-text></claim><claim id="CLM-00098" num="00098"><claim-text><b>98</b>. A method for applying battery charging parameters, comprising:<claim-text>a. determining a battery chemistry of at least one battery connected to an electronic system operable to charge batteries of varying chemistries;</claim-text><claim-text>b. selecting a charge algorithm from a plurality of charge algorithms for charging said plurality of batteries based on said battery chemistry of said plurality of batteries, wherein said electronic system includes a processing unit operable to access said charge algorithm from said plurality of charge algorithms stored in an internal memory of said electronic system; and</claim-text><claim-text>c. charging said battery according to said charge algorithm.</claim-text></claim-text></claim><claim id="CLM-00099" num="00099"><claim-text><b>99</b>. The method of <claim-ref idref="CLM-00098">claim 98</claim-ref>, determining the battery chemistry of battery includes measuring at least one electrical characteristic of said battery.</claim-text></claim><claim id="CLM-00100" num="00100"><claim-text><b>100</b>. The method of <claim-ref idref="CLM-00098">claim 98</claim-ref>, wherein said electronic system is operable to apply balanced charging to said at least one battery.</claim-text></claim><claim id="CLM-00101" num="00101"><claim-text><b>101</b>. The method of <claim-ref idref="CLM-00098">claim 98</claim-ref>, wherein said electronic system is operable to draw power from primary and secondary batteries.</claim-text></claim><claim id="CLM-00102" num="00102"><claim-text><b>102</b>. The method of <claim-ref idref="CLM-00098">claim 98</claim-ref>, wherein said electronic system is operable to simultaneously accept a combination of primary and secondary batteries in a receiver, and draw current from said batteries without damage to said batteries or said system.</claim-text></claim><claim id="CLM-00103" num="00103"><claim-text><b>103</b>. The method of <claim-ref idref="CLM-00098">claim 98</claim-ref>, further comprising a power source controller circuitry operable to receive power from a plurality of power sources.</claim-text></claim><claim id="CLM-00104" num="00104"><claim-text><b>104</b>. The method of <claim-ref idref="CLM-00103">claim 103</claim-ref>, wherein said processing unit is operable to measure an electrical characteristic of said plurality of power sources and direct said power source controller circuitry to switch between parallel and series connections between said plurality of power sources during a charging process of said at least one battery based upon at least one of said electrical characteristic of said plurality of power sources, a variable voltage level required for charging said at least one battery, and variable load voltage resulting from the connection of one or more additional devices in electrical communication with said at least one battery.</claim-text></claim><claim id="CLM-00105" num="00105"><claim-text><b>105</b>. The method of <claim-ref idref="CLM-00103">claim 103</claim-ref>, wherein said plurality of power sources comprises a plurality of power sources that each produce a variable amount of power.</claim-text></claim><claim id="CLM-00106" num="00106"><claim-text><b>106</b>. A method of determining and applying battery charging parameters, comprising:<claim-text>a. taking measurements of at least one electrical characteristic of at least one battery;</claim-text><claim-text>b. identifying the battery chemistry of said at least one battery, wherein said system includes a processing unit operable to compare said measurements of said at least on electrical characteristic and identify a battery chemistry based on the measurements; and</claim-text><claim-text>c. said processing unit selecting a charge algorithm for charging said at least one battery from a plurality of charge algorithms in a memory in electronic communication with said processing unit based on said battery chemistry of said at least one battery.</claim-text></claim-text></claim><claim id="CLM-00107" num="00107"><claim-text><b>107</b>. The method of <claim-ref idref="CLM-00106">claim 106</claim-ref>, further comprising charging said at least one battery according to said charge algorithm.</claim-text></claim><claim id="CLM-00108" num="00108"><claim-text><b>108</b>. The method of <claim-ref idref="CLM-00106">claim 106</claim-ref>, wherein said electronic system is operable to determine the battery chemistry of primary and secondary batteries.</claim-text></claim><claim id="CLM-00109" num="00109"><claim-text><b>109</b>. The method of <claim-ref idref="CLM-00098">claim 98</claim-ref>, further comprising a power source controller circuitry operable to receive power from a plurality of power sources, wherein said processing unit is operable to measure an electrical characteristic of said plurality of power sources and direct said power source controller circuitry to switch between parallel and series connections between said plurality of power sources during a charging process of said at least one battery based upon at least one of said electrical characteristic of said plurality of power sources, a variable voltage level required for charging said at least one battery, and variable load voltage resulting from the connection of one or more additional devices in electrical communication with said at least one battery.</claim-text></claim></claims></us-patent-application>