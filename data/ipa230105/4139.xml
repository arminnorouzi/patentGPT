<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230004140A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230004140</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17784450</doc-number><date>20201211</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>JP</country><doc-number>2019-225809</doc-number><date>20191213</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>05</class><subclass>B</subclass><main-group>19</main-group><subgroup>4097</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>05</class><subclass>B</subclass><main-group>19</main-group><subgroup>4097</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>05</class><subclass>B</subclass><main-group>2219</main-group><subgroup>36342</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">TOOL PATH GENERATION METHOD, TOOL PATH GENERATION DEVICE, AND MACHINE TOOL CONTROL DEVICE</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>MAKINO MILLING MACHINE CO., LTD.</orgname><address><city>Tokyo</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>YASUKOCHI</last-name><first-name>Jiro</first-name><address><city>Kanagawa</city><country>JP</country></address></addressbook></inventor></inventors></us-parties><assignees><assignee><addressbook><orgname>MAKINO MILLING MACHINE CO., LTD.</orgname><role>03</role><address><city>Tokyo</city><country>JP</country></address></addressbook></assignee></assignees><pct-or-regional-filing-data><document-id><country>WO</country><doc-number>PCT/JP2020/046385</doc-number><date>20201211</date></document-id><us-371c12-date><date>20220610</date></us-371c12-date></pct-or-regional-filing-data></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">Provided is a tool path generation method for generating a tool path (Tp), along which a workpiece is machined as a tool (T) moves over a tool movement curved surface (So) generated along a work surface of the workpiece. In this method: a scanning policy is set, which is a rule for establishing a path along which the tool is to move over the tool movement curved surface (So); a dividing line (Cd) is disposed on the tool movement curved surface (So); and the location of an intersection of the dividing line and a trajectory of the tool moving over the tool movement curved surface is calculated on the basis of the scanning policy. A tool path is generated, the path being represented by a movement command for curve interpolation using a curve that passes through the location of the intersection.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="118.70mm" wi="158.75mm" file="US20230004140A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="205.82mm" wi="148.34mm" orientation="landscape" file="US20230004140A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="211.67mm" wi="149.94mm" file="US20230004140A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="230.89mm" wi="153.16mm" file="US20230004140A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="227.67mm" wi="90.25mm" file="US20230004140A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="230.29mm" wi="136.57mm" file="US20230004140A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="129.71mm" wi="137.24mm" file="US20230004140A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="187.79mm" wi="149.01mm" file="US20230004140A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="230.38mm" wi="106.85mm" file="US20230004140A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="187.11mm" wi="131.57mm" file="US20230004140A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="189.40mm" wi="132.08mm" orientation="landscape" file="US20230004140A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">FIELD</heading><p id="p-0002" num="0001">The present invention relates to a tool path generation method and tool path generation device for generating a curve command with which steps which can occur between adjacent tool paths can be suppressed and a high-quality machined surface can be achieved, as well as a controller for a machine tool in which the tool path generation device is incorporated.</p><heading id="h-0002" level="1">BACKGROUND</heading><p id="p-0003" num="0002">In order to generate a tool path, in CAM (computer-aided manufacturing), a curve serving as a tool path is generated along a curved surface offset from the surface of the model shape, which is the ultimate shape of the workpiece generated by CAD (computer-aided design). Since this curve is a high-order mathematical expression, it is conventionally fit to a straight line, an arc, a low-order mathematical curve, etc., to facilitate handling. However, in order to prevent an increase in data capacity due to such fitting, approximation within the margin of error is required. For example, Patent Literature <b>1</b> describes, in the numerical controller of a machine tool, a tool path generation method which generates a smooth tool path by fitting and smoothing a tool path given by command points to a NURBS curve.</p><heading id="h-0003" level="1">CITATION LIST</heading><heading id="h-0004" level="1">Patent Literature</heading><p id="p-0004" num="0000"><ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0003">[PTL 1] Japanese Unexamined Patent Publication (Kokai) No. 08-305430</li></ul></p><heading id="h-0005" level="1">SUMMARY</heading><heading id="h-0006" level="1">Technical Problem</heading><p id="p-0005" num="0004">However, since the tool path generation method described in Patent Literature 1 does not take into consideration information of adjacent tool paths, there may be steps due to errors between adjacent tool paths, whereby there is a problem in that the quality of the machined surface is degraded.</p><p id="p-0006" num="0005">The present invention aims to solve such problems of the prior art, and an object thereof is to minimize or eliminate steps between adjacent tool paths.</p><heading id="h-0007" level="1">Solution to Problem</heading><p id="p-0007" num="0006">In order to achieve the object described above, according to the present invention, there is provided a tool path generation method for generating a tool path for machining a workpiece while a tool moves on a tool movement curved surface generated along a surface of the workpiece to be machined, the method comprising the steps of setting a scanning policy which is a rule for determining a path on the tool movement curved surface along which the tool moves, arranging dividing lines on the tool movement curved surface, calculating positions of intersections between a trajectory when the tool moves on the tool movement curved surface based on the scanning policy and the dividing lines, and generating a tool path represented by movement commands which is curve-fit to a curve passing through the positions of the intersections.</p><p id="p-0008" num="0007">Further, according to the present invention, there is provided a device for generating a tool path which is a movement path of a tool along a workpiece for machining the workpiece by moving the tool and the workpiece, which faces the tool, relative to each other, the device comprising a tool movement curved surface generation unit configured to generate a tool movement curved surface along a surface of the workpiece to be machined, a machining pattern selection unit configured to select a machining pattern for machining the workpiece, a dividing line generation unit configured to generate dividing lines along the tool movement curved surface, and a calculation unit configured to project the machining pattern selected by the machining pattern selection unit onto the surface to be machined, calculate positions of intersections between a trajectory when the tool moves on the tool movement curved surface and the dividing lines, and generate a tool path represented by movement commands which is curve-fit to a curve passing through the positions of the intersections.</p><p id="p-0009" num="0008">Further, according to the present invention, there is provided a controller for a machine tool comprising the tool path generation device described above.</p><heading id="h-0008" level="1">Advantageous Effects of Invention</heading><p id="p-0010" num="0009">According to the present invention, since one machining area is divided into a plurality of curved surfaces by the dividing lines and smoothed so that the connecting points of the curve are located on the dividing lines between the curved surfaces, envelope inflation in a direction transverse to the tool path is reduced, whereby a smooth machined surface can be obtained.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0009" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram of a tool path generation device according to an embodiment of the present invention.</p><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a view showing a scanning machining path.</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a view in which the machining path of <figref idref="DRAWINGS">FIG. <b>2</b></figref> is projected onto a plane orthogonal to the center axis of the tool.</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a view showing an equal-height contour machining path.</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a view showing a radial machining path.</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a view showing an offset curved surface in the case in which the tool is a ball end mill.</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a view showing an offset curved surface in the case in which the tool is a bull nose end mill.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a view showing an offset curved surface in the case in which the tool is a square end mill.</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a view showing triangular dividing lines.</p><p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a view showing dividing lines consisting of parallel lines.</p><p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. <b>11</b></figref> is a view showing lattice-like dividing lines.</p><p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. <b>12</b></figref> is a view showing a scanning policy in which a machining path is projected toward an offset curved surface in the direction of the center axis of a tool.</p><p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. <b>13</b></figref> is a view detailing the method for determining intersections in the case in which the normal of the curved surface is oriented in the pick feed direction.</p><p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. <b>14</b></figref> is a view detailing the method for determining intersections in the case in which the normal of the curved surface is oriented in the pick feed direction.</p><p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. <b>15</b></figref> is a view detailing a tool path generated by a tool path generation device according to a preferred embodiment of the present invention.</p><p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. <b>16</b></figref> is a view detailing a tool path generated according to the prior art.</p><p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. <b>17</b></figref> is a block diagram of a controller of a machine tool comprising the tool path generation device of the present invention.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0010" level="1">DESCRIPTION OF EMBODIMENTS</heading><p id="p-0028" num="0027">The preferred embodiments of the present invention will be described below with reference to the attached drawings.</p><p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram of a tool path generation device <b>10</b> according to an embodiment of the present invention. The tool path generation device <b>10</b> comprises, as primary constituent elements, a machining area setting unit <b>12</b>, a tool movement curved surface generation unit <b>14</b>, a machining pattern selection unit <b>16</b>, a dividing line generation unit <b>18</b>, a calculation unit <b>20</b>, and a storage unit <b>22</b>. The tool path generation device <b>10</b> can be composed of a computer comprising a CPU (central processing unit), a memory device such as RAM (random access memory) or ROM (read-only memory), a storage device such as an HDD (hard disk drive) or SSD (solid-state drive), input/output ports, and bidirectional busses connecting these components to each other, as well as associated software.</p><p id="p-0030" num="0029">Various types of data necessary for generating tool paths are stored in the storage unit <b>22</b>. The types of data stored in the storage unit <b>22</b> include, for example, data related to tools (tool data) such as tool management numbers, tool and tool holder dimensions and shapes, and tool materials, data related to machining conditions (machining condition data) such as feed speed, tool rotation speed, pick feed amount, presence/absence of coolant, machining patterns, area division data for dividing the surface to be machined into a plurality of machining areas, basic data for selecting the optimum tool for machining a certain machined surface, and data related to materials (material data) such as material type, hardness, tensile strength, and elastic modulus. Note that the storage unit <b>22</b> may be accessed from the input device <b>32</b> so that the operator can modify the data stored in the storage unit <b>22</b> or input new data.</p><p id="p-0031" num="0030">The machining area setting unit <b>12</b> receives model shape data from a model shape supply device <b>30</b>. The model shape data is data representing the shape of the workpiece to be machined, and in particular, the shape of a workpiece for which finishing machining is completed. The model shape supply device <b>30</b> can typically be a CAD device. When the model shape data is stored in a computer or database, such as when a past product is produced again, the model shape supply device <b>30</b> can be a computer or a database in which model shape data is stored.</p><p id="p-0032" num="0031">The machining area setting unit <b>12</b> divides the surface of the workpiece to be machined (to be machined surface) into a plurality of machining areas based on the model shape data received from the model shape supply device <b>30</b> and the data stored in the storage unit <b>22</b>. More specifically, the machining area setting unit <b>12</b> recognizes the shape of the surface of the workpiece to be machined from the model shape data, and based on area division data stored in the storage unit <b>22</b> and the recognized shape of the surface to be machined, divides the surface to be machined into a plurality of machining areas using the curvature, inclination angle, depth, etc., of the surface to be machined as surface parameters.</p><p id="p-0033" num="0032">The tool movement curved surface generation unit <b>14</b> generates a tool movement curved surface for each of the machining areas set by the machining area setting unit <b>12</b>. An optimal example of the tool movement curved surface is the offset curved surface So (<figref idref="DRAWINGS">FIGS. <b>2</b> to <b>4</b></figref>). The offset curved surface So is a curved surface encompassing a set of positions where the center point Ot of a tool T is arranged during machining, or a curved surface along which the center point Ot of the tool T moves in the machined area in order to form a machined surface Sm. The tool movement curved surface is not limited to the offset curved surface So. For example, if the size of the tool can be ignored, the machined surface Sm can be specified as the tool movement curved surface.</p><p id="p-0034" num="0033">When the tool T is a milling tool, the center point Ot of the tool T is a position retracted from the tip surface toward the shank along the center axis O of the tool T by the radius R of the corner portion of the tool T, i.e., the arc-shaped outer peripheral portion at the tip of the tool T. For example, as shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, when the tool T is a ball end mill, the center of the ball tip is the center point Ot of the tool T. When the tool T is a bull nose ball end mill, as shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the center point Ot of the tool T is a position retracted from the tip surface toward the shank side along the center axis O by the radius R of the corner part of the tool T, and as shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, when the tool T is a square end mill, the position where the tip surface of the tool T and the center axis O intersect is the center point Ot of the tool T. The position of the center point Ot of the tool T is stored as tool data in the storage unit <b>22</b>.</p><p id="p-0035" num="0034">In the present embodiment, the tool movement curved surface generation unit <b>14</b> generates the offset curved surface So as the tool movement curved surface for each of the machining areas set by the machining area setting unit <b>12</b> based on model shape data and data related to the position of the center point Ot of the tool T.</p><p id="p-0036" num="0035">The machining pattern selection unit <b>16</b> selects the optimum tool and machining pattern for machining the machining area corresponding to each surface parameter of the machining area, and sets machining conditions such as feed rate, tool rotation speed, and pick feed amount. <figref idref="DRAWINGS">FIGS. <b>5</b> to <b>8</b></figref> show examples of machining patterns. <figref idref="DRAWINGS">FIG. <b>5</b></figref> shows a scanning path, and <figref idref="DRAWINGS">FIG. <b>6</b></figref> is a view in which the machining path of <figref idref="DRAWINGS">FIG. <b>5</b></figref> is projected onto a plane orthogonal to the center axis O of the tool T. According to the scanning machining path, the tool T, for example, a ball end mill, is linearly fed in one direction along the cutting feed direction Dmf to cut the workpiece, the tool T is pick-fed in the pick feed direction Dp, the workpiece is then machined while feeding the tool T in the opposite direction along the cutting feed direction Dmf, and this is repeated to machine the surface of the workpiece to be machined.</p><p id="p-0037" num="0036">Furthermore, <figref idref="DRAWINGS">FIG. <b>7</b></figref> shows an equal-height contour machining path, and <figref idref="DRAWINGS">FIG. <b>8</b></figref> shows an example of a radial machining path centered on a point O. These machining patterns are stored in the storage unit <b>22</b> so that the machining pattern corresponding to the surface parameters such as the curvature, the inclination angle, and the depth of the machining region, can be selected reflecting the accumulated know-how. Furthermore, the machining patterns shown are examples and are not intended to limit the present invention.</p><p id="p-0038" num="0037">The dividing line generation unit <b>18</b> generates dividing lines consisting of a plurality of curves extending along the tool movement curved surface. In the present embodiment, the dividing line generation unit <b>18</b> generates dividing lines Cd on the offset curved surface So. The dividing lines Cd can be generated by, for example, as shown in <figref idref="DRAWINGS">FIG. <b>9</b></figref>, arranging a large number of generatrixes P along the offset curved surface So and connecting the generatrixes P with curves along the offset curved surface so as to form non-Euclidian geometric shapes, such as triangles in <figref idref="DRAWINGS">FIG. <b>9</b></figref>. Because they are drawn on a curved surface, they are not triangles in the strict sense, but rather are pseudo-triangles in which three vertices (the generatrixes P) are connected by the shortest path along a curved surface (the offset curved surface So), or pseudo-triangles in which a triangle drawn on a certain plane is projected onto the offset curved surface So. The Delaunay triangulation method may be used to generate the triangular dividing lines Cd.</p><p id="p-0039" num="0038">The dividing lines Cd are not limited to the triangular shapes shown in <figref idref="DRAWINGS">FIG. <b>9</b></figref>, but parallel lines (<figref idref="DRAWINGS">FIG. <b>10</b></figref>) or a lattice (<figref idref="DRAWINGS">FIG. <b>11</b></figref>) may be used. The parallel dividing lines Cd are pseudo parallel lines passing through two generatrixes P along the offset curved surface So, and the dividing lines Cd on a lattice form a pseudo lattice in which the number of vertices (generatrixes P) is increased to four points. The dividing lines Cd may be defined by a curve obtained by projecting a plurality of triangles, rectangles, and parallel lines arranged on a plane facing the offset curved surface So onto the offset curved surface So.</p><p id="p-0040" num="0039">Furthermore, as shown in <figref idref="DRAWINGS">FIG. <b>13</b></figref>, in the vicinity of the highest point of the curved surface, the curve C, which is the trajectory of the center point Ot of the tool T when the tool T moves on the offset curved surface So based on the scanning policy, may not intersect with a dividing line Cd. In that case, as shown in <figref idref="DRAWINGS">FIG. <b>14</b></figref>, the highest point Pe of the curved surface is obtained, and a curve C&#x2032; which passes through the highest point Pe along the curved surface is created. For example, when the highest point of the curved surface is included inside a triangle, a process of dividing this triangle into two triangles by a curve C&#x2032; passing through the highest point Pe can be performed.</p><p id="p-0041" num="0040">The calculation unit <b>20</b> calculates the positions of the intersections Pi between the curve C, which is the trajectory of the center point Ot of the tool T when the tool T moves on the offset curved surface So based on the scanning policy, and the dividing lines Cd. The scanning policy can be, for example, a plurality of X-Z planes intersecting the offset curved surface So. In the present example, the positions of the intersections Pi between the X-Z planes and the dividing lines Cd on the offset curved surface So are obtained by calculation. Alternatively, as the scanning policy, as shown in <figref idref="DRAWINGS">FIG. <b>12</b></figref>, the machining path selected by the machining pattern selection unit <b>16</b> may be projected toward the offset curved surface So in the direction of the center axis O of the tool T, and the intersections Pi between the projected curves C and the dividing lines Cd may be obtained. Alternatively, X-Y planes may be used as the scanning policy. In this case, the intersections Pi between the contour machining path of <figref idref="DRAWINGS">FIG. <b>4</b></figref> and the dividing lines Cd are obtained. The scanning policy may project a three-dimensional curve C along the boundary lines between the machining areas or the surfaces of the workpiece to be machined onto the offset curved surface So.</p><p id="p-0042" num="0041">The calculation unit <b>20</b> then calculates the intersections Pi between the curve C generated in this manner and the dividing lines Cd, and smooths the sequence of points along the curve C given by the intersections Pi using a technique such as Bezier curves, B-spline curves, NURBS curves, simple averaging, and weighted averaging. For example, the calculation unit <b>20</b> can obtain the tangent vectors Vt of the curve C at the intersections Pi, and use the tangent vectors Vt to perform interpolation and smoothing by means of the NURBS curve connecting the intersections Pi. The calculation unit <b>20</b> then generates a tool path Tp (<figref idref="DRAWINGS">FIG. <b>15</b></figref>) represented by movement commands based on the smoothed curve. The tool path Tp represented by movement commands generated in this manner can be output to the controller <b>100</b> of the machine tool.</p><p id="p-0043" num="0042">For example, in a conventional tool path generation method in which a tool path is generated using a spline curve such as NURBS, even if each tool path Tp has no path error at the connection points and the curvature changes continuously, as shown in <figref idref="DRAWINGS">FIG. <b>16</b></figref>, the envelope may not be smooth in the transverse direction of the tool path Tp, and specifically, steps may be formed between adjacent tool paths Tp, whereby a smooth machined surface may not be obtained. In connection thereto, according to the present embodiment, since one machining area is divided into a plurality of curved surfaces by the dividing lines Cd and smoothed so that the connection points (intersection points Pi) of the curve C are located on the dividing lines Cd between the curved surfaces, as shown in <figref idref="DRAWINGS">FIG. <b>15</b></figref>, envelope inflation in a direction transverse to the tool path Tp becomes smaller, whereby a smooth machined surface can be obtained.</p><p id="p-0044" num="0043">Though the tool path generation device <b>10</b> described above can be configured as a CAM device independent of the controller of the machine tool, it may be configured as a part of the controller, as shown in <figref idref="DRAWINGS">FIG. <b>17</b></figref>. In <figref idref="DRAWINGS">FIG. <b>17</b></figref>, the controller <b>100</b> comprises, as primary structures, a tool path generation unit <b>102</b> having the same structure as the tool path generation device <b>10</b> of <figref idref="DRAWINGS">FIG. <b>1</b></figref>, a reading and interpretation unit <b>104</b>, an interpolation calculation unit <b>106</b>, and a servo control unit <b>108</b>.</p><p id="p-0045" num="0044">The reading and interpretation unit <b>104</b> reads the tool path (machining program) represented by movement commands from the tool path generation unit <b>102</b>. The reading and interpretation unit <b>104</b> transmits the movement commands to the interpolation calculation unit <b>106</b>. The interpolation calculation unit <b>106</b> calculates position command values for each interpolation cycle. For example, the interpolation calculation unit <b>106</b> calculates the movement amount for each time interval set based on the movement commands. The interpolation calculation unit <b>106</b> transmits the position command values to the servo control unit <b>108</b>. The servo control unit <b>108</b> calculates the movement amount in each feed axis, such as the X axis and the Y axis, based on the position command values, and drives each axis servomotor of the machine tool <b>110</b>.</p><p id="p-0046" num="0045">The machine tool <b>110</b> can be a vertical or horizontal machining center which machines a workpiece (not illustrated), wherein a rotary tool such as a ball end mill is mounted on the tip of a spindle (not illustrated) and the spindle is relatively moved in the three orthogonal X, Y, and Z axis directions relative to the workpiece, which is affixed to a table (not illustrated) so as to face the rotary tool.</p><heading id="h-0011" level="1">DESCRIPTION OF REFERENCE SIGNS</heading><p id="p-0047" num="0000"><ul id="ul0002" list-style="none">    <li id="ul0002-0001" num="0046"><b>10</b> Tool Path Generation Device</li>    <li id="ul0002-0002" num="0047"><b>12</b> Machining Area Setting Unit</li>    <li id="ul0002-0003" num="0048"><b>14</b> Tool Movement Curved Surface Generation Unit</li>    <li id="ul0002-0004" num="0049"><b>16</b> Machining Pattern Selection Unit</li>    <li id="ul0002-0005" num="0050"><b>18</b> Dividing Line Generation Unit</li>    <li id="ul0002-0006" num="0051"><b>20</b> Calculation Unit</li>    <li id="ul0002-0007" num="0052"><b>22</b> Storage Unit</li>    <li id="ul0002-0008" num="0053"><b>30</b> Model Shape Supply Device</li>    <li id="ul0002-0009" num="0054"><b>32</b> Input Device</li>    <li id="ul0002-0010" num="0055"><b>100</b> Controller</li>    <li id="ul0002-0011" num="0056"><b>102</b> Tool Path Generation Unit</li>    <li id="ul0002-0012" num="0057"><b>104</b> Reading And Interpretation Unit</li>    <li id="ul0002-0013" num="0058"><b>106</b> Interpolation Calculation Unit</li>    <li id="ul0002-0014" num="0059"><b>108</b> Servo Control Unit</li>    <li id="ul0002-0015" num="0060"><b>110</b> Machine Tool</li></ul></p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A tool path generation method for generating a tool path for machining a workpiece while a tool moves on a tool movement curved surface generated along a surface of the workpiece to be machined, the method comprising the steps of:<claim-text>setting a scanning policy which is a rule for determining a path on the tool movement curved surface along which the tool moves,</claim-text><claim-text>arranging dividing lines on the tool movement curved surface,</claim-text><claim-text>calculating positions of intersections between a trajectory when the tool moves on the tool movement curved surface based on the scanning policy and the dividing lines, and</claim-text><claim-text>generating a tool path represented by movement commands which is curve-fit to a curve passing through the positions of the intersections.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The tool path generation method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the dividing lines are generated so that a large number of generatrixes are arranged on the tool movement curved surface and the generatrixes are connected by a curve along the tool movement curved surface to form triangles.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The tool path generation method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the dividing lines are generated so that a large number of generatrixes are arranged on the tool movement curved surface and the generatrixes are connected by a curve along the tool movement curved surface to form rectangles.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The tool path generation method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the dividing lines are defined by a curve obtained by projecting a plurality of parallel lines extending on a plane facing the curved surface onto the curved surface.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. A device for generating a tool path which is a movement path of a tool with respect to a workpiece for machining the workpiece by moving the tool and the workpiece, which faces the tool, relative to each other, the device comprising:<claim-text>a tool movement curved surface generation unit configured to generate a tool movement curved surface along a surface of the workpiece to be machined,</claim-text><claim-text>a machining pattern selection unit configured to select a machining pattern which defines a scanning policy for determining a path along which the tool moves,</claim-text><claim-text>a dividing line generation unit configured to generate dividing lines along the tool movement curved surface, and</claim-text><claim-text>a calculation unit configured to project the machining pattern selected by the machining pattern selection unit onto the tool movement curved surface, calculate positions of intersections between a trajectory when the tool moves on the tool movement curved surface and the dividing lines, and generate a tool path represented by movement commands which is curve-fit to a curve passing through the positions of the intersections.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The tool path device according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the dividing lines are generated so that a large number of generatrixes are arranged on the tool movement curved surface and the generatrixes are connected by a curve along the tool movement curved surface to form triangles.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. A controller for a machine tool comprising the tool path generation device according to <claim-ref idref="CLM-00005">claim 5</claim-ref>.</claim-text></claim></claims></us-patent-application>