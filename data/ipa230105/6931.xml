<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006932A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006932</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17365785</doc-number><date>20210701</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>L</subclass><main-group>12</main-group><subgroup>803</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>L</subclass><main-group>12</main-group><subgroup>927</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>L</subclass><main-group>12</main-group><subgroup>801</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>L</subclass><main-group>12</main-group><subgroup>46</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>47</main-group><subgroup>125</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>47</main-group><subgroup>806</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>47</main-group><subgroup>193</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>12</main-group><subgroup>4633</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">MULTICAST ROUTING THROUGH MULTI-TIER EDGE GATEWAYS</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="obligated-assignee"><addressbook><orgname>VMware, Inc.</orgname><address><city>Palo Alto</city><state>CA</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>KARUNAKARAN</last-name><first-name>Senthilkumar</first-name><address><city>Santa Clara</city><state>CA</state><country>US</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>RAMAN</last-name><first-name>Chidambareswaran</first-name><address><city>Campbell</city><state>CA</state><country>US</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>SELVARAJ</last-name><first-name>Meenakshi Sundaram</first-name><address><city>Pleasanton</city><state>CA</state><country>US</country></address></addressbook></inventor><inventor sequence="03" designation="us-only"><addressbook><last-name>MATHEW</last-name><first-name>Subin Cyriac</first-name><address><city>San Jose</city><state>CA</state><country>US</country></address></addressbook></inventor><inventor sequence="04" designation="us-only"><addressbook><last-name>TAN</last-name><first-name>Stephen</first-name><address><city>San Jose</city><state>CA</state><country>US</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A method of transmitting multicast traffic to workloads of tenants communicating over overlay networks provisioned on top of a physical network includes the steps of: detecting the multicast traffic; determining that the multicast traffic is bound for workloads of a first tenant and workloads of a second tenant; encapsulating one instance of the multicast traffic using a Layer 2 (L2) over Layer 3 (L3) encapsulation protocol to generate encapsulated traffic, wherein the encapsulated traffic includes an identifier of a first backplane network corresponding to the first tenant and an identifier of a second backplane network corresponding to the second tenant in a header portion of each packet of the encapsulated traffic; and transmitting, to a first host computing device, the encapsulated traffic with the identifiers of the first and second overlay networks.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="105.33mm" wi="158.75mm" file="US20230006932A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="241.81mm" wi="168.99mm" orientation="landscape" file="US20230006932A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="232.41mm" wi="140.21mm" orientation="landscape" file="US20230006932A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="206.76mm" wi="164.68mm" file="US20230006932A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="222.76mm" wi="127.68mm" orientation="landscape" file="US20230006932A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="225.81mm" wi="164.68mm" file="US20230006932A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">BACKGROUND</heading><p id="p-0002" num="0001">In a software-defined networking (SDN) environment, a multi-tier edge computing device, referred to herein as an &#x201c;edge services gateway&#x201d; (ESG), may act as a gateway between a physical network, e.g., a wide area network (WAN), and tenants of a software-defined datacenter (SDDC). Such tenants may be using, e.g., logical Layer 2 (L2) networks on top of a physical Layer 3 (L3) network, e.g., an internet protocol (IP) network. Packets transmitted across the logical L2 networks may be encapsulated according to an encapsulation protocol such as Geneve or Virtual Extensible LAN (VXLAN). In such an environment, the ESG may act as a source of multicast traffic by receiving traffic from the WAN and transmitting copies of the traffic to one or more host computing devices of the tenants. Such traffic is referred to as north-south traffic. On the other hand, a workload (e.g., virtual machine (VM), container, etc.) of one of the tenants may act as the source of multicast traffic by transmitting multicast traffic to the ESG, and the ESG may forward the traffic to one or more host computing devices in the same SDN environment. Such traffic is referred to as east-west traffic.</p><p id="p-0003" num="0002">With both north-south and east-west traffic, the number of copies the ESG must transmit is dependent on the number of tenants with workloads the traffic is bound for. The ESG must transmit at least one copy of the traffic for each such tenant. However, packet replication is resource intensive and consumes limited downlink bandwidth of the ESG as well as additional uplink bandwidths of the host computing devices that run multiple tenant workloads. As a result, multicast traffic that is bound for workloads of a large number of tenants may experience high latency. A method for scaling up the throughput of multi-tiered ESGs to avoid high latency of multicast traffic is needed.</p><heading id="h-0002" level="1">SUMMARY</heading><p id="p-0004" num="0003">Multicast traffic is forwarded to workloads of tenants communicating over overlay networks by detecting the multicast traffic and determining that the multicast traffic is bound for workloads of a first tenant and workloads of a second tenant, wherein the workloads of the first tenant communicate using a first overlay network and the workloads of the second tenant communicate using a second overlay network. One instance of the multicast traffic is encapsulated using an L2-over-L3 encapsulation protocol, and an identifier of a first backplane network corresponding to the first tenant and an identifier of a second backplane network corresponding to the second tenant are inserted into a header portion of the encapsulated traffic. The encapsulated traffic is then sent to a first host computing device which can then replicate the multicast traffic for the two tenants based on the inserted header information.</p><p id="p-0005" num="0004">Further embodiments include a non-transitory computer-readable storage medium comprising instructions that cause a computer system to carry out the above method, as well as a computer system configured to carry out the above method.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram of an SDDC including logical components for transmitting multicast traffic to VMs of a group of tenants, according to embodiments.</p><p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a simplified block diagram of multicast traffic in which type, length, and value fields are inserted into header fields of the traffic, according to embodiments.</p><p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. <b>3</b>A</figref> is a block diagram illustrating an example of transmitting north-south multicast traffic to VMs of a group of tenants, according to embodiments.</p><p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. <b>3</b>B</figref> is a flow diagram illustrating generalized steps carried out by a group of hosts to carry out a method of transmitting north-south multicast traffic to VMs of a group of tenants, according to embodiments.</p><p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. <b>4</b>A</figref> is a block diagram illustrating an example of transmitting east-west multicast traffic to VMs of a group of tenants, according to embodiments.</p><p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. <b>4</b>B</figref> is a flow diagram illustrating generalized steps carried out by a group of hosts to carry out a method of transmitting east-west multicast traffic to VMs of a group of tenants, according to embodiments.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0004" level="1">DETAILED DESCRIPTION</heading><p id="p-0012" num="0011">Techniques for scaling overlay multicast routing throughput on multi-tier ESGs is described. The techniques are performed in an SDDC having a logical (i.e., overlay) network platform. The logical network platform includes physical servers (&#x201c;hosts&#x201d;). Each host includes a virtualization layer, executing on a host hardware platform, which supports execution of VMs. A virtualization management server manages the hosts, the virtualization layers, and the VMs executing thereon.</p><p id="p-0013" num="0012">An SDN layer of the SDDC may include a network manager and associated controllers, as well as software distributed among the virtualization layers of the hosts. In embodiments, one or more hosts comprise edge transport nodes that provide for ingress and egress of network traffic between the hosts and an external network (e.g., the public Internet or another WAN). Logical network services executing on the edge transport nodes include ESGs, which can be subdivided into tiers (e.g., Tier-0 gateways and Tier-1 gateways). Network traffic between the hosts and between the hosts and edge transport nodes traverses logical networks that are provisioned on top of a physical network. In embodiments, the logical networks provide L2-over-L3 tunnels through the physical network. Encapsulated L2-over-L3 traffic traverses a dedicated virtual local area network (VLAN) of the physical network. In alternate embodiments, a dedicated physical network, distinct from a physical network carrying management and/or other types of information such as storage, may be provided for overlay network traffic.</p><p id="p-0014" num="0013">The SDDC may support logical L2 networks for multiple tenants. Each tenant includes a set of resources (e.g., VMs, logical L2 networks, and services) that is logically isolated from those of other tenants. In embodiments, an ESG routes IP multicast traffic for VMs of multiple tenants over corresponding logical L2 networks. One way to route multicast traffic is to transmit multiple copies of the multicast traffic, one for each tenant, from an ESG to a replicator host (e.g., a designated host for a tenant's multicast traffic). The virtualization layer in the replicator host then replicates and disperses copies of the multicast traffic to VMs of the tenant's logical L2 networks therein. The replicator host also forwards multiple copies of the multicast traffic to other hosts, one copy for each tenant.</p><p id="p-0015" num="0014">Techniques described herein improve upon this process by transmitting only a single copy of the multicast traffic between the edge transport node and the replicator host, and between the replicator host and each other host. The techniques include inserting virtual network identifiers (VNIs) in a header portion of the encapsulated traffic, each VNI unique to a &#x201c;backplane&#x201d; logical network of a tenant with workloads for which the multicast traffic is bound. The virtualization layer in the replicator host parses the header portion to determine which backplane VNIs the encapsulated traffic corresponds to.</p><p id="p-0016" num="0015">Based on the determined backplane VNIs, the virtualization layer routes the multicast traffic to the appropriate VMs on the associated tenants' logical L2 networks. Backplane logical networks will be discussed further below in conjunction with <figref idref="DRAWINGS">FIG. <b>1</b></figref>. The virtualization layer in the replicator host also forwards the encapsulated traffic to other hosts downstream, whose virtualization layers perform the same process of parsing the header portion and distributing the multicast traffic to the appropriate VMs. The described techniques substantially reduce network traffic and in turn conserve network resources, particularly as the number of tenants increases. These and further aspects of the techniques are described below with respect to the drawings.</p><p id="p-0017" num="0016">Although embodiments discussed herein refer to VMs, it will be apparent that the invention may be used to provide tunnel-encapsulated traffic to other types of virtual workloads such as Kubernetes containers. Furthermore, this invention may be used to provide such traffic to nonvirtualized workloads. For example, if control agents and virtual switches are added to VMs, a network control system may directly apply SDN overlay networks and policies to the VMs without accessing the underlying hypervisors. Similarly, a control agent and virtual switch may be added to a host to apply an SDN overlay network and policies to a nonvirtualized workload therein. The application of SDN overlay networks and polices to VMs without accessing the underlying hypervisors is disclosed in U.S. Pat. No. 10,367,757, filed Aug. 31, 2016, the entire contents of which are incorporated herein by reference.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram of an SDDC <b>100</b> including logical components for transmitting multicast traffic to VMs of a group of tenants 1, 2, and 3. SDDC <b>100</b> includes a host <b>110</b>, replicator host <b>140</b>, and other hosts <b>170</b>, which are connected by a physical IP network <b>104</b>. SDDC <b>100</b> further includes a management VLAN <b>106</b> and a transport VLAN <b>108</b> provisioned on top of physical network <b>104</b>. Management VLAN <b>106</b> is an overlay network that enables virtualization services for hosts <b>110</b>, <b>140</b>, and <b>170</b> such as configuring storage and networking resources of SDDC <b>100</b>. Transport VLAN <b>108</b> is an overlay network that isolates encapsulated traffic of physical network <b>104</b> from non-encapsulated traffic of physical network <b>104</b>. The encapsulated traffic of transport VLAN <b>108</b> employs L2-over-L3 encapsulation into logical L2 networks of tenants 1-3.</p><p id="p-0019" num="0018">Hosts <b>110</b>, <b>140</b>, and <b>170</b> may be physical computer servers constructed on server grade hardware platforms <b>126</b> such as x86 architecture platforms (not shown in hosts <b>140</b> and <b>170</b>). Each hardware platform <b>126</b> includes one or more central processing units (CPUs) <b>128</b>, system memory such as random-access memory (RAM) <b>130</b>, optional local storage <b>132</b> such as one or more hard disk drives (HDDs) or solid-state drives (SSDs), and one or more network interface cards (NICs) <b>134</b>. CPU(s) <b>128</b> are configured to execute instructions, for example, executable instructions that perform one or more operations described herein, which may be stored in RAM <b>130</b>. Local storage <b>132</b> in hosts <b>110</b>, <b>140</b>, and <b>170</b> may also optionally be aggregated and provisioned as a virtual storage area network (vSAN). NIC(s) <b>134</b> enable hosts <b>110</b>, <b>140</b>, and <b>170</b> to communicate with other devices over physical network <b>104</b>.</p><p id="p-0020" num="0019">Host <b>110</b> includes an edge transport node <b>112</b> and hypervisor <b>122</b>. Hypervisor <b>122</b> is a virtualization layer that provides software abstraction of hardware resources to VMs executing on host <b>110</b>. Hypervisor <b>122</b> includes a virtual tunnel endpoint (VTEP) <b>124</b> used for communicating over transport VLAN <b>108</b>. For example, VTEP <b>124</b> may provide L2-over-L3 tunneling services for encapsulating egress packets from host <b>110</b> and decapsulating ingress packets to host <b>110</b>.</p><p id="p-0021" num="0020">Edge transport node <b>112</b> is a virtual server that manages the transmission and encapsulation of egress packets and internal routing of ingress packets. In the example of <figref idref="DRAWINGS">FIG. <b>1</b></figref>, edge transport node <b>112</b> comprises multiple tiers of logical entities, including a Tier-0 logical router (LR) <b>114</b> and Tier-1 LRs <b>116</b>, <b>118</b>, and <b>120</b>. Tier-0 LR <b>114</b> is a gateway between a WAN <b>102</b> and Tier-1 LRs <b>116</b>-<b>118</b>. Tier-1 LRs <b>116</b>, <b>118</b>, and <b>120</b> are gateways between Tier-0 LR <b>114</b> and logical L2 networks of tenants 1, 2, and 3, respectively. Although <figref idref="DRAWINGS">FIG. <b>1</b></figref> shows a single edge transport node <b>112</b> having multiple tiers of LRs, it is also possible that each LR can be implemented in a different transport node.</p><p id="p-0022" num="0021">Each LR contains a distributed router (DR) (not shown in host <b>110</b>) that is also distributed across replicator host <b>140</b> and other hosts <b>170</b>. Each tenant's VMs connect to the DRs to transmit and receive multicast traffic over the tenant's logical L2 networks. At host <b>110</b>, Tier-0 LR <b>114</b> routes traffic to Tier-1 LRs <b>116</b>-<b>120</b>, and the DRs of Tier-1 LRs <b>116</b>-<b>120</b> route traffic to VMs through logical switches (not shown) implemented by the hypervisors on respective hosts. The implementation of such DRs is further described in U.S. Pat. No. 10,003,534, filed Jan. 31, 2017, the entire contents of which are incorporated herein by reference.</p><p id="p-0023" num="0022">Each LR also contains a service router (SR) (not shown) implemented in host <b>110</b>. An SR is configured to provide services such as network address translation (NAT) that are not distributed. For each LR, the associated DR and SR within host <b>110</b> communicate over a &#x201c;backplane&#x201d; logical network. As used herein, the VNI assigned to such a backplane logical network is referred to as an LR's backplane VNI. When tier-0 LR <b>114</b> detects multicast traffic, the backplane VNIs of LRs connected to logical L2 networks for which the multicast traffic is bound can be learned. For example, such information can be learned from &#x201c;join&#x201d; requests received from VMs interested in joining a multicast group. The DRs connected to the VMs may forward such join requests to SRs over backplane logical networks to provide the information to edge transport node <b>112</b>. This information can also be learned from a control plane (not shown).</p><p id="p-0024" num="0023">Replicator host <b>140</b> includes a hypervisor <b>150</b> for supporting VMs <b>142</b>, <b>144</b>, and <b>146</b> of tenants 1, 2, and 3, respectively. Hypervisor <b>150</b> includes a VTEP <b>160</b> for communicating over transport VLAN <b>108</b>. Hypervisor <b>150</b> also includes a Tier-0 DR <b>152</b> and Tier-1 DRs <b>154</b>, <b>156</b>, and <b>158</b> for replicating traffic and connecting to VMs of tenants 1-3 on replicator host <b>140</b>. Tier-0 DR <b>152</b> is a logical component of Tier-0 LR <b>114</b>, and Tier-1 DRs <b>154</b>, <b>156</b>, and <b>158</b> are logical components of Tier-1 LRs <b>116</b>, <b>118</b>, and <b>120</b>, respectively.</p><p id="p-0025" num="0024">In embodiments, Tier-0 LR <b>114</b> and Tier-1 LRs <b>116</b>-<b>120</b> transmit traffic to replicator host <b>140</b> by instructing VTEP <b>124</b> to encapsulate the traffic with header information including the IP and media access control (MAC) addresses of VTEP <b>124</b> as source addresses and the IP and MAC addresses of VTEP <b>160</b> as destination addresses. VTEP <b>124</b> then transmits the encapsulated traffic to VTEP <b>160</b> over physical network <b>104</b>, VTEP <b>160</b> decapsulates the traffic, and the decapsulated traffic is routed to VMs on replicator host <b>140</b> for which the decapsulated traffic is bound. Similarly, VTEP <b>160</b> transmits traffic to VTEP <b>124</b> over physical network <b>104</b>, VTEP <b>124</b> decapsulates the traffic, and the decapsulated traffic is routed to Tier-0 LR <b>114</b> or to one of Tier-1 LRs <b>116</b>-<b>120</b>. In embodiments, the VTEPs use an L2-over-L3 encapsulation protocol, such as Geneve. As used herein, logical L2 networks for which traffic is bound are referred to as &#x201c;interested&#x201d; logical networks, and VMs on such interested logical networks are referred to as &#x201c;interested&#x201d; VMs.</p><p id="p-0026" num="0025">In the embodiment shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, edge transport node <b>112</b> transmits multicast traffic to the VMs of tenants 1-3 by offloading the replication function to host <b>140</b>. In addition to providing copies of multicast traffic to VMs <b>142</b>-<b>146</b>, replicator host <b>140</b> replicates and forwards the multicast traffic to other hosts <b>170</b>. Such offloading of replication of multicast traffic reduces network congestion at host <b>110</b>. However, in other embodiments, host <b>110</b> may transmit copies of multicast traffic directly to other hosts <b>170</b> without offloading replication. Additionally, for simplicity of illustration, in the example of <figref idref="DRAWINGS">FIG. <b>1</b></figref>, Tier-1 LRs <b>116</b>-<b>120</b> each select replicator host <b>140</b> for replicating and forwarding multicast traffic to other hosts <b>170</b>. However, Tier-1 LRs <b>116</b>-<b>120</b> may each select a different host for replicating and forwarding multicast traffic based on factors such as the load on the different hosts. Offloading of replication and forwarding of multicast traffic is disclosed in U.S. patent application Ser. No. 16/662,400, filed Oct. 24, 2019, published Apr. 29, 2021 as US 2021/0126866, the entire contents of which are incorporated herein by reference.</p><p id="p-0027" num="0026">Other hosts <b>170</b> each include a hypervisor <b>180</b> for supporting VMs of tenants 1-3, including VMs <b>172</b> and <b>174</b> of tenants 1 and 2, respectively. Each hypervisor <b>180</b> includes a VTEP <b>190</b> for communicating over transport VLAN <b>108</b>. Each hypervisor <b>180</b> also includes a Tier-0 DR <b>182</b> and Tier-1 DRs <b>184</b>, <b>186</b>, and <b>188</b> for replicating traffic and connecting to VMs of tenants 1-3 on other hosts <b>170</b>. Tier-0 DR <b>182</b> is a logical component of Tier-0 LR <b>114</b>, and Tier-1 DRs <b>184</b>, <b>186</b>, and <b>188</b> are logical components of Tier-1 LRs <b>116</b>, <b>118</b>, and <b>120</b>, respectively. In embodiments, VTEP <b>160</b> forwards copies of traffic to other hosts <b>170</b>, VTEPs <b>190</b> decapsulate the traffic, and the decapsulated traffic is routed to interested VMs on other hosts <b>170</b>.</p><p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a simplified block diagram of multicast traffic in which type, length, and value (TLV) fields may be inserted into header fields of the traffic, according to embodiments. Multicast traffic includes a payload and other header fields indicating, e.g., source and destination IP addresses and source and destination MAC addresses. In embodiments, TLV fields are inserted to specify a list of backplane VNIs of LRs connected to interested logical networks. With tunneling protocols such as Geneve that provide option fields, the TLV fields may be inserted into such option fields. With other tunneling protocols that do not provide such option fields, the TLV fields may instead be inserted into reserved fields.</p><p id="p-0029" num="0028">The entry of the &#x201c;type of values&#x201d; field indicates that the &#x201c;values&#x201d; field contains a replication list of backplane VNIs. The entry of the &#x201c;length of values&#x201d; field specifies, e.g., the total length of the &#x201c;values&#x201d; field. The &#x201c;values&#x201d; field stores a list of backplane VNIs, which may be encoded. The assignment and storage of backplane VNIs in TLV fields will be discussed further below in conjunction with <figref idref="DRAWINGS">FIG. <b>4</b>A</figref>.</p><p id="p-0030" num="0029">When replicator host <b>140</b> or other hosts <b>170</b> receive encapsulated traffic, the virtualization layers therein first parse TLV headers to determine which backplane VNIs the encapsulated traffic corresponds to. The virtualization layer on each host then selects the DRs that use the determined backplane VNIs. Finally, the selected DRs route the encapsulated traffic to interested VMs on logical L2 networks that the respective DRs are connected to. The selected DRs route the encapsulated traffic using Internet Group Management Protocol (IGMP) snooping tables managed by the DRs.</p><p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. <b>3</b>A</figref> is a block diagram illustrating an example of transmitting north-south multicast traffic to the VMs of tenants 1-3, according to embodiments. <figref idref="DRAWINGS">FIG. <b>3</b>B</figref> is a flow diagram illustrating generalized steps carried out by host <b>110</b>, replicator host <b>140</b>, and other hosts <b>170</b> to carry out a method <b>300</b> of transmitting north-south multicast traffic to VMs of a group of tenants, according to embodiments. <figref idref="DRAWINGS">FIGS. <b>3</b>A and <b>3</b>B</figref> will be discussed together.</p><p id="p-0032" num="0031">At step <b>302</b>, Tier-0 LR <b>114</b> detects multicast traffic received from a remote device (not shown) over WAN <b>102</b> and instructs VTEP <b>124</b> from <figref idref="DRAWINGS">FIG. <b>1</b></figref> to encapsulate the traffic with TLV fields, a &#x201c;value&#x201d; field of the TLV fields including backplane VNIs of LRs connected to interested logical networks. In the example of <figref idref="DRAWINGS">FIG. <b>3</b>A</figref>, the interested logical networks include all the logical L2 networks of tenants 1-3. At step <b>304</b>, Tier-0 LR <b>114</b> transmits a single copy of the encapsulated traffic, with headers of each multicast packet including the VNI information, to VTEP <b>160</b>.</p><p id="p-0033" num="0032">Upon receiving the traffic, VTEP <b>160</b> parses the headers for a list of backplane VNIs, which may be used to determine a list of interested logical networks. In the example of <figref idref="DRAWINGS">FIG. <b>3</b>A</figref>, VTEP <b>160</b> determines from backplane VNIs included in the traffic that the traffic is bound for VMs of the logical L2 networks of tenants 1-3. At steps <b>306</b>, <b>308</b>, and <b>310</b>, VTEP <b>160</b> makes copies of the traffic, and copies are routed to interested VMs executing on replicator host <b>140</b>.</p><p id="p-0034" num="0033">At step <b>312</b>, VTEP <b>160</b> transmits a single copy of the received traffic to each of other hosts <b>170</b> containing interested VMs. As mentioned earlier, the simplified embodiments described herein only include a single replicator host <b>140</b>. However, in more complex embodiments with multiple replicator hosts, each replicator host that receives multicast traffic may replicate and forward a single copy of the traffic to each of other hosts <b>170</b> containing interested VMs.</p><p id="p-0035" num="0034">At steps <b>314</b> and <b>316</b>, VTEPs <b>190</b> of other hosts <b>170</b> decapsulate received traffic and determine a list of interested logical networks based on the inserted backplane VNIs. Copies of the decapsulated traffic are then routed to interested VMs. In the example of <figref idref="DRAWINGS">FIG. <b>3</b>A</figref>, VTEPs <b>190</b> determine that the traffic is bound for VMs of logical L2 networks of tenants 1-3. VTEP <b>190</b> thus makes copies of the decapsulated traffic, and copies are routed to tenant-1 VM <b>172</b> and tenant-2 VM <b>174</b>. After step <b>316</b>, method <b>300</b> ends.</p><p id="p-0036" num="0035">In the example of <figref idref="DRAWINGS">FIG. <b>3</b>A</figref>, providing each illustrated VM of tenants 1-3 with a copy of multicast traffic requires: (1) one copy of traffic on VTEP <b>124</b>'s downlink, (2) one copy on VTEP <b>160</b>'s uplink, (3) one copy on VTEP <b>160</b>'s downlink per other host <b>170</b> containing interested VMs, and (4) one copy on each VTEP <b>190</b>'s uplink. On the other hand, existing technology relies on generating and forwarding multiple copies of traffic for multiple tenants, including transmitting multiple copies of traffic to the same host for routing to VMs connected to different DRs. As the number of tenants with interested logical networks for north-south multicast traffic increases, embodiments may thus substantially reduce loads on hosts <b>110</b>, <b>140</b>, and <b>170</b>, which improves the routing throughputs of each host.</p><p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. <b>4</b>A</figref> is a block diagram illustrating an example of transmitting east-west multicast traffic to the VMs of tenants 1 and 2, according to embodiments. <figref idref="DRAWINGS">FIG. <b>4</b>B</figref> is a flow diagram illustrating generalized steps carried out by host <b>110</b>, replicator host <b>140</b>, and other hosts <b>170</b> to carry out a method <b>400</b> of transmitting east-west multicast traffic to VMs of a group of tenants, according to embodiments. <figref idref="DRAWINGS">FIGS. <b>4</b>A and <b>4</b>B</figref> will be discussed together.</p><p id="p-0038" num="0037">At step <b>402</b>, a VM of replicator host <b>140</b> transmits multicast traffic to VTEP <b>160</b>. In the example of <figref idref="DRAWINGS">FIG. <b>4</b>A</figref>, the source of the multicast traffic is tenant-3 VM <b>146</b>. It should be noted that the source of the multicast traffic may also be a VM on another host. At step <b>404</b>, VTEP <b>160</b> transmits the traffic to the Tier-1 LR corresponding to the tenant of the source VM. In the example of <figref idref="DRAWINGS">FIG. <b>4</b>A</figref>, the corresponding Tier-1 LR is Tier-1 LR <b>120</b>.</p><p id="p-0039" num="0038">At step <b>406</b>, the corresponding Tier-1 LR detects the multicast traffic and routes the multicast traffic to Tier-0 LR <b>114</b>, instructing Tier-0 LR <b>114</b> to make copies of the traffic for routing to WAN <b>102</b> and to the VMs of interested logical networks. At step <b>408</b>, upon receiving the multicast traffic, Tier-0 LR <b>114</b> instructs VTEP <b>124</b> from <figref idref="DRAWINGS">FIG. <b>1</b></figref> to encapsulate the traffic with TLV fields, a &#x201c;value&#x201d; field of the TLV fields including backplane VNIs of LRs connected to interested logical networks. In the example of <figref idref="DRAWINGS">FIG. <b>4</b>A</figref>, the interested logical networks include those of tenants 1 and 2. Tier-0 LR <b>114</b> also transmits the encapsulated traffic over WAN <b>102</b>. At step <b>410</b>, Tier-0 LR <b>114</b> transmits a single copy of the encapsulated traffic to VTEP <b>160</b>.</p><p id="p-0040" num="0039">Upon receiving the traffic, VTEP <b>160</b> parses the headers for a list of backplane VNIs, which may be used to determine a list of interested logical networks. In the example of <figref idref="DRAWINGS">FIG. <b>4</b>A</figref>, VTEP <b>160</b> determines from backplane VNIs included in the traffic that the traffic is bound for VMs of logical L2 networks of tenants 1 and 2. At steps <b>412</b> and <b>414</b>, VTEP <b>160</b> makes copies of the traffic, and copies are routed to interested VMs executing on replicator host <b>140</b>.</p><p id="p-0041" num="0040">At step <b>416</b>, VTEP <b>160</b> transmits a single copy of the received traffic to each of other hosts <b>170</b> containing interested VMs. At steps <b>418</b> and <b>420</b>, VTEPs <b>190</b> of other hosts <b>170</b> decapsulate received traffic and determine a list of interested logical networks based on the inserted backplane VNIs. Copies of the decapsulated traffic are then routed to interested VMs. In the example of <figref idref="DRAWINGS">FIG. <b>4</b>A</figref>, VTEPs <b>190</b> determine that the traffic is bound for VMs of logical L2 networks of tenants 1-2. VTEP <b>190</b> thus makes copies of the decapsulated traffic, and copies are routed to tenant-1 VM <b>172</b> and tenant-2 VM <b>174</b>. After step <b>420</b>, method <b>400</b> ends.</p><p id="p-0042" num="0041">In the example of <figref idref="DRAWINGS">FIG. <b>4</b>A</figref>, providing each illustrated VM of tenants 1 and 2 with a copy of multicast traffic requires: (1) one copy of traffic on VTEP <b>124</b>'s uplink, (2) one copy on VTEP <b>124</b>'s downlink, (3) one copy on VTEP <b>160</b>'s uplink, (4) one copy on VTEP <b>160</b>'s downlink plus an additional copy per other host <b>170</b> containing interested VMs, and (5) one copy on each VTEP <b>190</b>'s uplink. As previously mentioned, existing technology transmits multiple copies of traffic to the same host for routing to VMs connected to different DRs. As the number of tenants with interested logical networks for east-west multicast traffic increases, embodiments may thus substantially reduce loads on hosts <b>110</b>, <b>140</b>, and <b>170</b>, which improves the routing throughputs of each host.</p><p id="p-0043" num="0042">In the example of <figref idref="DRAWINGS">FIG. <b>4</b>A</figref>, in which multicast traffic is bound for logical L2 networks of tenants 1 and 2, the backplane logical networks of the Tier-1 LRs of tenants 1 and 2 may each be assigned a 3-bit VNI. For example, the backplane logical network of tenant 1's LR may be assigned the VNI &#x201c;000&#x201d; (binary), and the backplane logical network of tenant 2's LR may be assigned the VNI &#x201c;001&#x201d; (binary). The &#x201c;length of values&#x201d; field may thus store the value &#x201c;6&#x201d; (bits), and the &#x201c;values&#x201d; field may store the array &#x201c;[000, 001]&#x201d; to specify that traffic is bound for the logical L2 networks of tenants 1 and 2 However, in this simple example, the number of backplane VNIs that may be specified in the &#x201c;values&#x201d; field may be substantially limited by size constraints of packets because each additional backplane VNI requires the addition of 3 bits. It may thus be advantageous to use data compression to fit a large number of backplane VNIs into packets.</p><p id="p-0044" num="0043">For example, run-length encoding (RLE) may be used to encode a list of backplane VNIs. In the example of <figref idref="DRAWINGS">FIG. <b>4</b>A</figref>, the backplane logical networks of the Tier 1 LRs of tenants 1 and 2 may be assigned VNIs of &#x201c;100&#x201d; and &#x201c;200&#x201d; (decimal), respectively. Using RLE, the backplane logical network of tenant 1's Tier-1 LR may be encoded as a logical position in the &#x201c;values&#x201d; field by the decimal values &#x201c;0&#x201d;, &#x201c;0&#x201d;, &#x201c;99&#x201d;, and &#x201c;1&#x201d; (in order). The repeating 0's indicate a &#x201c;run&#x201d; of repeating values, the number of repeating values specified by the next number. Here, the next number of &#x201c;99&#x201d; logically signifies 99 0's. The &#x201c;1&#x201d; after &#x201c;99,&#x201d; which is not a repeating value, corresponds to the 100th logical position of the &#x201c;values&#x201d; field. The 100th logical position being set as a &#x201c;1&#x201d; indicates that traffic corresponds to the backplane VNI &#x201c;100&#x201d; and is thus bound for VMs of tenant 1's logical L2 networks. The decimal values &#x201c;0&#x201d;, &#x201c;0&#x201d;, &#x201c;99&#x201d;, and &#x201c;I&#x201d; may then be repeated, logically signifying an additional 99 0's followed by a 1. The 200th logical position of the &#x201c;values&#x201d; field may thus be set as a &#x201c;1,&#x201d; indicating that traffic also corresponds to the backplane VNI &#x201c;200&#x201d; and is thus also bound for VMs of tenant 2's logical L2 networks. Note that 20 bits are required to store the decimals values &#x201c;0&#x201d;, &#x201c;0&#x201d;, &#x201c;99&#x201d;, &#x201c;1&#x201d; &#x201c;0&#x201d;, &#x201c;0&#x201d;, &#x201c;99&#x201d;, and &#x201c;1.&#x201d; However, as the number of backplane VNIs increases, a data compression method such as RLE allows for increasingly efficient storage of backplane VNIs.</p><p id="p-0045" num="0044">The embodiments described herein may employ various computer-implemented operations involving data stored in computer systems. For example, these operations may require physical manipulation of physical quantities. Usually, though not necessarily, these quantities are electrical or magnetic signals that can be stored, transferred, combined, compared, or otherwise manipulated. Such manipulations are often referred to in terms such as producing, identifying, determining, or comparing. Any operations described herein that form part of one or more embodiments may be useful machine operations.</p><p id="p-0046" num="0045">One or more embodiments of the invention also relate to a device or an apparatus for performing these operations. The apparatus may be specially constructed for required purposes, or the apparatus may be a general-purpose computer selectively activated or configured by a computer program stored in the computer. Various general-purpose machines may be used with computer programs written in accordance with the teachings herein, or it may be more convenient to construct a more specialized apparatus to perform the required operations. The embodiments described herein may also be practiced with computer system configurations including hand-held devices, microprocessor systems, microprocessor-based or programmable consumer electronics, minicomputers, mainframe computers, etc.</p><p id="p-0047" num="0046">One or more embodiments of the present invention may be implemented as one or more computer programs or as one or more computer program modules embodied in computer readable media. The term computer readable medium refers to any data storage device that can store data that can thereafter be input into a computer system. Computer readable media may be based on any existing or subsequently developed technology that embodies computer programs in a manner that enables a computer to read the programs. Examples of computer readable media are HDDs, SSDs, network-attached storage (NAS) systems, read-only memory (ROM), RAM, compact disks (CDs), digital versatile disks (DVDs), magnetic tapes, and other optical and non-optical data storage devices. A computer readable medium can also be distributed over a network-coupled computer system so that computer-readable code is stored and executed in a distributed fashion.</p><p id="p-0048" num="0047">Although one or more embodiments of the present invention have been described in some detail for clarity of understanding, certain changes may be made within the scope of the claims. Accordingly, the described embodiments are to be considered as illustrative and not restrictive, and the scope of the claims is not to be limited to details given herein but may be modified within the scope and equivalents of the claims. In the claims, elements and steps do not imply any particular order of operation unless explicitly stated in the claims.</p><p id="p-0049" num="0048">Virtualized systems in accordance with the various embodiments may be implemented as hosted embodiments, non-hosted embodiments, or as embodiments that blur distinctions between the two. Furthermore, various virtualization operations may be wholly or partially implemented in hardware. For example, a hardware implementation may employ a look-up table for modification of storage access requests to secure non-disk data. Many variations, additions, and improvements are possible, regardless of the degree of virtualization. The virtualization software can therefore include components of a host, console, or guest operating system (OS) that perform virtualization functions.</p><p id="p-0050" num="0049">Boundaries between components, operations, and data stores are somewhat arbitrary, and particular operations are illustrated in the context of specific illustrative configurations. Other allocations of functionality are envisioned and may fall within the scope of the invention. In general, structures and functionalities presented as separate components in exemplary configurations may be implemented as a combined component. Similarly, structures and functionalities presented as a single component may be implemented as separate components. These and other variations, additions, and improvements may fall within the scope of the appended claims.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method of transmitting multicast traffic to workloads of tenants communicating over overlay networks provisioned on top of a physical network, comprising:<claim-text>detecting the multicast traffic;</claim-text><claim-text>determining that the multicast traffic is bound for workloads of a first tenant and workloads of a second tenant, the workloads of the first tenant communicating using a first overlay network and the workloads of the second tenant communicating using a second overlay network;</claim-text><claim-text>encapsulating one instance of the multicast traffic using a Layer 2 (L2) over Layer 3 (L3) encapsulation protocol to generate encapsulated traffic, wherein the encapsulated traffic includes an identifier of a first backplane network corresponding to the first tenant and an identifier of a second backplane network corresponding to the second tenant in a header portion of each packet of the encapsulated traffic; and</claim-text><claim-text>transmitting, to a first host computing device, the encapsulated traffic with the identifiers of the first and second backplane networks.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the multicast traffic is received by a first gateway connected to a wide area network (WAN) that is separate from the physical network, the first gateway being separate from: a second gateway connected between the first gateway and the first overlay network and a third gateway connected between the first gateway and the second overlay network.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the multicast traffic is received by the first gateway from a remote computing device over the WAN.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the multicast traffic is received by a fourth gateway from a workload of a third tenant executing on the first host computing device, the fourth gateway being connected between a first gateway and a third overlay network, and the first gateway being connected to a wide area network (WAN) that is separate from the physical network.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the identifiers of the first and second backplane networks in the header portion of each packet of the encapsulated traffic are encoded according to a data compression method.</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first host computing device determines that the multicast traffic is bound for workloads of the first and second tenants based on the identifiers of the first and second backplane networks in the encapsulated traffic, and wherein the first host computing device provides a first copy of the received multicast traffic to a workload of the first tenant executing on the first host computing device and a second copy of the received multicast traffic to a workload of the second tenant executing on the first host computing device.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the first host computing device transmits the encapsulated traffic with the identifiers of the first and second backplane networks to a second host computing device.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. A non-transitory computer readable medium comprising instructions that are executable in a computer system, wherein the instructions when executed cause the computer system to carry out a method of transmitting multicast traffic to workloads of tenants communicating over overlay networks provisioned on top of a physical network, said method comprising:<claim-text>detecting the multicast traffic,</claim-text><claim-text>determining that the multicast traffic is bound for workloads of a first tenant and workloads of a second tenant, the workloads of the first tenant communicating using a first overlay network and the workloads of the second tenant communicating using a second overlay network;</claim-text><claim-text>encapsulating one instance of the multicast traffic using a Layer 2 (L2) over Layer 3 (L3) encapsulation protocol to generate encapsulated traffic, wherein the encapsulated traffic includes an identifier of a first backplane network corresponding to the first tenant and an identifier of a second backplane network corresponding to the second tenant in a header portion of each packet of the encapsulated traffic; and</claim-text><claim-text>transmitting, to a first host computing device, the encapsulated traffic with the identifiers of the first and second backplane networks.</claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The non-transitory computer readable medium of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the multicast traffic is received by a first gateway connected to a wide area network (WAN) that is separate from the physical network, the first gateway being separate from: a second gateway connected between the first gateway and the first overlay network and a third gateway connected between the first gateway and the second overlay network.</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The non-transitory computer readable medium of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the multicast traffic is received by the first gateway from a remote computing device over the WAN.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The non-transitory computer readable medium of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the multicast traffic is received by a fourth gateway from a workload of a third tenant executing on the first host computing device, the fourth gateway being connected between a first gateway and a third overlay network, and the first gateway being connected to a wide area network (WAN) that is separate from the physical network.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The non-transitory computer readable medium of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the identifiers of the first and second backplane networks in the header portion of each packet of the encapsulated traffic are encoded according to a data compression method.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The non-transitory computer readable medium of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the first host computing device determines that the multicast traffic is bound for workloads of the first and second tenants based on the identifiers of the first and second backplane networks in the encapsulated traffic, and wherein the first host computing device provides a first copy of the received multicast traffic to a workload of the first tenant executing on the first host computing device and a second copy of the received multicast traffic to a workload of the second tenant executing on the first host computing device.</claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The non-transitory computer readable medium of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the first host computing device transmits the encapsulated traffic with the identifiers of the first and second backplane networks to a second host computing device.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. A computer system comprising:<claim-text>a first host computing device; and</claim-text><claim-text>an edge computing device executing instructions to transmit multicast traffic to workloads of tenants communicating over overlay networks provisioned on top of a physical network, wherein the instructions cause the edge computing device to carry out a method comprising:<claim-text>detecting the multicast traffic,</claim-text><claim-text>determining that the multicast traffic is bound for workloads of a first tenant and workloads of a second tenant, the workloads of the first tenant communicating using a first overlay network and the workloads of the second tenant communicating using a second overlay network,</claim-text><claim-text>encapsulating one instance of the multicast traffic using a Layer 2 (L2) over Layer 3 (L3) encapsulation protocol to generate encapsulated traffic, wherein the encapsulated traffic includes an identifier of a first backplane network corresponding to the first tenant and an identifier of a second backplane network corresponding to the second tenant in a header portion of each packet of the encapsulated traffic, and</claim-text><claim-text>transmitting, to the first host computing device, the encapsulated traffic with the identifiers of the first and second backplane networks.</claim-text></claim-text></claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The computer system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the multicast traffic is received by a first gateway of the edge computing device connected to a wide area network (WAN) that is separate from the physical network, the first gateway being separate from: a second gateway of the edge computing device connected between the first gateway and the first overlay network and a third gateway of the edge computing device connected between the first gateway and the second overlay network.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The computer system of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the multicast traffic is received by the first gateway from a remote computing device over the WAN.</claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. The computer system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the multicast traffic is received by a fourth gateway of the edge computing device from a workload of a third tenant executing on the first host computing device, the fourth gateway being connected between a first gateway of the edge computing device and a third overlay network, and the first gateway being connected to a wide area network (WAN) that is separate from the physical network.</claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. The computer system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the identifiers of the first and second backplane networks in the header portion of each packet of the encapsulated traffic are encoded according to a data compression method.</claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. The computer system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising a second host computing device, wherein the first host computing device determines that the multicast traffic is bound for workloads of the first and second tenants based on the identifiers of the first and second backplane networks in the encapsulated traffic, the first host computing device provides a first copy of the received multicast traffic to a workload of the first tenant executing on the first host computing device and a second copy of the received multicast traffic to a workload of the second tenant executing on the first host computing device, and the first host computing device transmits the encapsulated traffic with the identifiers of the first and second backplane networks to the second host computing device.</claim-text></claim></claims></us-patent-application>