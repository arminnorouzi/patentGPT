<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230007172A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230007172</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17807932</doc-number><date>20220621</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>CN</country><doc-number>202110734097.9</doc-number><date>20210630</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>5</main-group><subgroup>232</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>T</subclass><main-group>5</main-group><subgroup>50</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>T</subclass><main-group>7</main-group><subgroup>73</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>5</main-group><subgroup>23238</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>T</subclass><main-group>5</main-group><subgroup>50</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20170101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>T</subclass><main-group>7</main-group><subgroup>73</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>5</main-group><subgroup>23229</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">METHOD AND APPARATUS FOR DETERMINING CONNECTION RELATION OF SUBSPACES, AND NON-TRANSITORY COMPUTER-READABLE RECORDING MEDIUM</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only"><addressbook><last-name>JIA</last-name><first-name>Haijing</first-name><address><city>Beijing</city><country>CN</country></address></addressbook><residence><country>CN</country></residence></us-applicant><us-applicant sequence="01" app-type="applicant" designation="us-only"><addressbook><last-name>YI</last-name><first-name>Hong</first-name><address><city>Beijing</city><country>CN</country></address></addressbook><residence><country>CN</country></residence></us-applicant><us-applicant sequence="02" app-type="applicant" designation="us-only"><addressbook><last-name>LIU</last-name><first-name>Liyan</first-name><address><city>Beijing</city><country>CN</country></address></addressbook><residence><country>CN</country></residence></us-applicant><us-applicant sequence="03" app-type="applicant" designation="us-only"><addressbook><last-name>WANG</last-name><first-name>Wei</first-name><address><city>Beijing</city><country>CN</country></address></addressbook><residence><country>CN</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>JIA</last-name><first-name>Haijing</first-name><address><city>Beijing</city><country>CN</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>YI</last-name><first-name>Hong</first-name><address><city>Beijing</city><country>CN</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>LIU</last-name><first-name>Liyan</first-name><address><city>Beijing</city><country>CN</country></address></addressbook></inventor><inventor sequence="03" designation="us-only"><addressbook><last-name>WANG</last-name><first-name>Wei</first-name><address><city>Beijing</city><country>CN</country></address></addressbook></inventor></inventors></us-parties><assignees><assignee><addressbook><orgname>Ricoh Company, Ltd</orgname><role>03</role><address><city>Tokyo</city><country>JP</country></address></addressbook></assignee></assignees></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A method and an apparatus for determining a connection relation of subspaces, and a non-transitory computer-readable recording medium are provided. In the method, a plurality of sets of panoramic images respectively corresponding to two respective adjacent subspaces are obtained. Each set of the panoramic images includes two first panoramic images, and a second panoramic image photographed at a connection opening. Orientations of the connection openings are determined based on positions of the connection openings, and orientations of a camera. Relative positions of the two adjacent subspaces are determined based on correspondence relations between the two first panoramic images and parts of the respective second panoramic images. The connection relation of the subspaces is determined based on the connection relation determined based on the same subspace, the orientations of the connection openings, and the relative positions of the two adjacent subspaces.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="211.24mm" wi="153.67mm" file="US20230007172A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="227.41mm" wi="155.70mm" file="US20230007172A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="235.54mm" wi="155.70mm" file="US20230007172A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="174.16mm" wi="129.88mm" orientation="landscape" file="US20230007172A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="242.32mm" wi="129.88mm" orientation="landscape" file="US20230007172A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="158.24mm" wi="143.59mm" file="US20230007172A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="205.57mm" wi="150.37mm" file="US20230007172A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="215.39mm" wi="127.68mm" file="US20230007172A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading><p id="p-0002" num="0001">The present application claims priority under 35 U.S.C. &#xa7; 119 to Chinese Application No. 202110734097.9 filed on Jun. 30, 2021, the entire contents of which are incorporated herein by reference.</p><heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading><heading id="h-0003" level="1">1. Field of the Invention</heading><p id="p-0003" num="0002">The present disclosure relates to the field of image processing, and specifically, a method and an apparatus for determining a connection relation of subspaces by processing panoramic images, and a non-transitory computer-readable recording medium.</p><heading id="h-0004" level="1">2. Description of the Related Art</heading><p id="p-0004" num="0003">Currently, in the fields of virtual reality (VR), real estate and the likes, it is usually necessary to obtain a two-dimensional layout image (for example, a floor plan) that reflects a two-dimensional layout of an entire three-dimensional space. The two-dimensional layout image enables users to intuitively understand subspace division of the entire three-dimensional space, and can also be used as a navigation image during a virtual tour. Initially, the two-dimensional layout image was usually obtained by professionals by measuring and drawing. In recent years, with the development of technologies such as computer vision and artificial intelligence, the two-dimensional layout image can be automatically generated using a plurality of panoramic images obtained by photographing a three-dimensional scene. In the process of generating the two-dimensional layout image, an important step is to obtain a connection relation of subspaces in a three-dimensional space (for example, rooms in a house).</p><p id="p-0005" num="0004">In a conventional method, when determining the connection relation of the subspaces, a relative pose (i.e., a rotation matrix and a translation matrix) of a camera may be determined using sensor information when the camera photographs panoramic images in two subspaces. However, in such a method, it is necessary to ensure that a distance between two photographing places is not too far, so as to ensure that three-dimensional scenes corresponding to the two panoramic images obtained by photographing have a sufficient degree of coincidence.</p><heading id="h-0005" level="1">SUMMARY OF THE INVENTION</heading><p id="p-0006" num="0005">According to an aspect of the present disclosure, a method for determining a connection relation of subspaces is provided. The method includes obtaining a plurality of sets of panoramic images respectively corresponding to a plurality of sets of the subspaces in a three-dimensional space, each set of the subspaces being composed of two adjacent subspaces in the three-dimensional space, and each set of the panoramic images including two first panoramic images that respectively photographed in the two adjacent subspaces of the respective sets of the subspaces, and a second panoramic image photographed at a connection opening that connects the two adjacent subspaces; determining, based on positions of the connection openings in the respective second panoramic images, and orientations of a camera when photographing the respective second panoramic images, orientations of the respective connection openings; obtaining correspondence relations between the two first panoramic images in the respective sets of the panoramic images and parts of the second panoramic images in the respective sets of panoramic images; determining, based on the correspondence relations, relative positions of the two adjacent subspaces in the respective sets of the subspaces; recognizing the first panoramic images in the sets of the panoramic images that correspond to the same subspace; determining, based on the same subspace, the connection relation between the respective sets of the subspaces; and determining, based on the determined connection relation between the sets of the subspaces, the orientations of the respective connection openings, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces, the connection relation of the subspaces in the three-dimensional space.</p><p id="p-0007" num="0006">According to another aspect of the present disclosure, an apparatus for determining a connection relation of subspaces is provided. The apparatus includes a memory storing computer-executable instructions; and one or more processors. The one or more processors are configured to execute the computer-executable instructions such that the one or more processors are configured to obtain a plurality of sets of panoramic images respectively corresponding to a plurality of sets of the subspaces in a three-dimensional space, each set of the subspaces being composed of two adjacent subspaces in the three-dimensional space, and each set of the panoramic images including two first panoramic images that respectively photographed in the two adjacent subspaces of the respective sets of the subspaces, and a second panoramic image photographed at a connection opening that connects the two adjacent subspaces; determine, based on positions of the connection openings in the respective second panoramic images, and orientations of a camera when photographing the respective second panoramic images, orientations of the respective connection openings; obtain correspondence relations between the two first panoramic images in the respective sets of the panoramic images and parts of the second panoramic images in the respective sets of panoramic images; determine, based on the correspondence relations, relative positions of the two adjacent subspaces in the respective sets of the subspaces; recognize the first panoramic images in the sets of the panoramic images that correspond to the same subspace; determine, based on the same subspace, the connection relation between the respective sets of the subspaces; and determine, based on the determined connection relation between the sets of the subspaces, the orientations of the respective connection openings, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces, the connection relation of the subspaces in the three-dimensional space.</p><p id="p-0008" num="0007">According to another aspect of the present disclosure, a non-transitory computer-readable recording medium having computer-executable instructions for execution by one or more processors is provided. The computer-executable instructions, when executed, cause the one or more processors to carry out a method for determining a connection relation of subspaces. The method includes obtaining a plurality of sets of panoramic images respectively corresponding to a plurality of sets of the subspaces in a three-dimensional space, each set of the subspaces being composed of two adjacent subspaces in the three-dimensional space, and each set of the panoramic images including two first panoramic images that respectively photographed in the two adjacent subspaces of the respective sets of the subspaces, and a second panoramic image photographed at a connection opening that connects the two adjacent subspaces; determining, based on positions of the connection openings in the respective second panoramic images, and orientations of a camera when photographing the respective second panoramic images, orientations of the respective connection openings; obtaining correspondence relations between the two first panoramic images in the respective sets of the panoramic images and parts of the second panoramic images in the respective sets of panoramic images; determining, based on the correspondence relations, relative positions of the two adjacent subspaces in the respective sets of the subspaces; recognizing the first panoramic images in the sets of the panoramic images that correspond to the same subspace; determining, based on the same subspace, the connection relation between the respective sets of the subspaces; and determining, based on the determined connection relation between the sets of the subspaces, the orientations of the respective connection openings, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces, the connection relation of the subspaces in the three-dimensional space.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0006" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0009" num="0008">The above and other objects, features and advantages of the present disclosure will be further clarified the following detailed description of embodiments of the present disclosure in combination with the drawings.</p><p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a flowchart illustrating a method <b>100</b> for determining a connection relation of subspaces according to an embodiment of the present disclosure.</p><p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a schematic diagram illustrating a two-dimensional layout image of a three-dimensional space according to the embodiment of the present disclosure.</p><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a flowchart illustrating a method <b>300</b> for determining orientations of connection openings.</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a schematic diagram illustrating an example of a reference orientation according to the embodiment of the present disclosure.</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a schematic diagram illustrating a step of detecting a position of a connection opening according to the embodiment of the present disclosure.</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a schematic diagram illustrating a step of obtaining a correspondence relation between two first panoramic images and a part of a second panoramic image.</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a schematic diagram illustrating a determination result of relative positions of two adjacent subspaces according to the embodiment of the present disclosure.</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a schematic diagram illustrating a step of generating a two-dimensional layout image based on the determined connection relation of the subspaces according to the embodiment of the present disclosure.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a schematic block diagram illustrating an apparatus <b>900</b> for determining a connection relation of subspaces according to another embodiment of the present disclosure.</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a schematic block diagram illustrating an apparatus <b>1000</b> for determining a connection relation of subspaces according to another embodiment of the present disclosure.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0007" level="1">DESCRIPTION OF THE EMBODIMENTS</heading><p id="p-0020" num="0019">In the following, the method for managing the consortium chain data structure network, the management node, and the non-transitory computer-readable recording medium according to the embodiments of the present disclosure will be described with reference to the accompanying drawings. In the drawings, the same reference numbers refer to the same elements. Note that the embodiments described herein are illustrative only and are not intended to limit the scope of the present disclosure.</p><p id="p-0021" num="0020">In view of the problem of the conventional technology, an object of the embodiments of the present disclosure is to provide a method and an apparatus for determining a connection relation of subspaces, and a non-transitory computer-readable recording medium. A two-dimensional layout image of a three-dimensional space can be automatically generated based on the determined connection relation of the subspaces.</p><p id="p-0022" num="0021">A method for determining a connection relation of subspaces according to an embodiment of the present disclosure will be described below with reference to <figref idref="DRAWINGS">FIG. <b>1</b></figref>. <figref idref="DRAWINGS">FIG. <b>1</b></figref> is a flowchart illustrating a method <b>100</b> for determining a connection relation of subspaces according to an embodiment of the present disclosure.</p><p id="p-0023" num="0022">As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, in step S<b>101</b>, a plurality of sets of panoramic images respectively corresponding to a plurality of sets of the subspaces in a three-dimensional space are obtained. Each set of the subspaces are composed of two adjacent subspaces in the three-dimensional space. Each set of the panoramic images include two first panoramic images that respectively photographed in the two adjacent subspaces of the respective sets of the subspaces, and a second panoramic image photographed at a connection opening that connects the two adjacent subspaces.</p><p id="p-0024" num="0023">In this step, the sets of the panoramic images respectively corresponding to the sets of the subspaces in the three-dimensional space may be obtained in various ways. For example, the panoramic images (for example, equidistant cylindrical projection images) may be obtained using a panoramic camera (for example, a fisheye camera, a binocular camera, or the like). As another example, a plurality of perspective images may be obtained using a common camera, and the perspective images may be stitched together to obtain panoramic images respectively.</p><p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a schematic diagram illustrating a two-dimensional layout image of a three-dimensional space according to the embodiment of the present disclosure. The three-dimensional space may be composed of a plurality of subspaces, the subspaces may be obtained by dividing the three-dimensional space in various ways, and two adjacent subspaces may be connected by a connection opening therebetween. For example, in a case where the three-dimensional space is a building interior space, the building interior space may be divided into a plurality of mutually independent rooms serving as the subspaces by objects such as walls, partitions or windows, and two adjacent rooms may be connected by a door serving as the connection opening. According to the embodiment of the present disclosure, the connection relation of the subspaces in the three-dimensional space may be determined based on the panoramic images photographed in the subspaces in the three-dimensional space and the panoramic image photographed under the connection opening, thereby automatically generating a two-dimensional layout image similar to the image shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>. Furthermore, since the panoramic image that is photographed under the connection opening serves as a connection image of the images corresponding to the two adjacent subspaces, it is not required that a distance between two photographing places in the two adjacent subspaces is not too far.</p><p id="p-0026" num="0025">In the example of <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the three-dimensional space may include three subspaces, and each set of the subspaces may be composed of two adjacent subspaces. Namely, two adjacent subspaces within the dashed box in <figref idref="DRAWINGS">FIG. <b>2</b></figref> may be a set of subspaces space, and the two adjacent subspaces within the solid-line box in <figref idref="DRAWINGS">FIG. <b>2</b></figref> may be another set of subspaces. In this step, the sets of panoramic images corresponding to the sets of the subspaces may be obtained. Here, each set of the panoramic images may include two first panoramic images that respectively photographed in the two adjacent subspaces of the respective sets of the subspaces, and a second panoramic image photographed at a connection opening that connects the two adjacent subspaces. For example, as shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, a set of panoramic images may include two first panoramic images photographed at positions P<b>1</b> and P<b>3</b> in two adjacent subspaces, respectively, and a second panoramic image photographed at a connection opening O<b>1</b> that connects the two adjacent subspaces (i.e., at position P<b>2</b>). Meanwhile, another set of panoramic images may include two first panoramic images photographed at positions P<b>4</b> and P<b>6</b> in another two adjacent subspaces, respectively, and a second panoramic image photographed at a connection opening O<b>2</b> that connects the two adjacent subspaces (i.e., at position P<b>5</b>). Here, two panoramic images are photographed at position P<b>3</b> and position P<b>4</b> in the same subspace, respectively. Note that although the three-dimensional space includes only three subspaces as shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the present disclosure is not limited to this example, and the method for determining the connection relation of the subspaces according to the embodiment of the present disclosure may also be applied to a case where the three-dimensional space includes four or more subspaces. In addition, in a case where one or more panoramic images are photographed in the same subspace, the one or more panoramic images may be obtained by photographing at the same position in the subspace multiple times, and the present disclosure is not limited this example.</p><p id="p-0027" num="0026">In this step, the first panoramic images and the second panoramic images of the sets of the subspaces may be generated in a predetermined photographing order, and the sets of panoramic images may be obtained by grouping the first panoramic images and the second panoramic images of the sets of the subspaces in the predetermined photographing order. For example, as shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, if the first panoramic images and the second panoramic images of the sets of the subspaces are generated in a predetermined photographing order of P<b>1</b>, P<b>2</b>, P<b>3</b>, P<b>4</b>, P<b>5</b> and P<b>6</b>, the first three panoramic images may classified into a group and the last three panoramic images may classified into another group in the predetermined photographing order. As another example, if the first panoramic images and the second panoramic images of the sets of the subspaces are generated in a predetermined photographing order of P<b>2</b>, P<b>5</b>, P<b>1</b>, P<b>3</b>, P<b>4</b> and P<b>6</b>, the first, third and fourth panoramic images may classified into a group and the second, fifth and sixth panoramic images may classified into another group in the predetermined photographing order. Thus, in the embodiment of the present disclosure, the input panoramic images can be automatically grouped in the predetermined photographing order previously input or set by a user, thereby facilitating subsequent processing.</p><p id="p-0028" num="0027">Note that since the camera may not be completely horizontally disposed during the actual photographing process, the panoramic image obtained by photographing may be skewed to a certain extent. In this case, vertical correction processing may be performed on the first panoramic images and the second panoramic image, before the subsequent processing is performed on the obtained first panoramic images and the second panoramic image, so as to improve the accuracy of the subsequent processing.</p><p id="p-0029" num="0028">In step S<b>102</b>, orientations of the respective connection openings are determined based on positions of the connection openings in the respective second panoramic images, and orientations of a camera when photographing the respective second panoramic images.</p><p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a flowchart illustrating a method <b>300</b> for determining orientations of connection openings. Here, the steps shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> are sub-steps of step S<b>102</b>. p In sub-step S<b>102</b>-<b>1</b>, orientations of the camera when photographing the respective second panoramic images are determined based on sensor data of the camera when photographing the respective second panoramic images.</p><p id="p-0031" num="0030">Specifically, the camera orientation when photographing any one second panoramic image may be used as a reference orientation, so that the camera orientations when photographing other second panoramic images are determined based on the reference orientation. <figref idref="DRAWINGS">FIG. <b>4</b></figref> is a schematic diagram illustrating an example of a reference orientation according to the embodiment of the present disclosure. The left portion of <figref idref="DRAWINGS">FIG. <b>4</b></figref> shows the second panoramic image <b>401</b> photographed at the connection opening O<b>1</b>, the arrow direction X shown in the right portion of <figref idref="DRAWINGS">FIG. <b>4</b></figref> is a camera orientation when photographing the second panoramic image <b>401</b> in a top view, and the camera orientation corresponds to a position of a central image column of the second panoramic image <b>401</b>. Here, the position of the central image column is a position of an image in the most central column of the panoramic image in a horizontal direction (for example, a 0 degree position in the panoramic image coordinate system shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>). In this example, the camera orientation X when photographing the second panoramic image <b>401</b> at the connection opening O<b>1</b> may be used as the reference orientation. Additionally, in another example, a camera orientation when photographing the second panoramic image at the connection opening O<b>2</b> may also be used as the reference orientation, and the present disclosure is not limited these examples.</p><p id="p-0032" num="0031">In a case where the camera orientation X when photographing the second panoramic image <b>401</b> at the connection opening O<b>1</b> is used as the reference orientation, an included angle between a camera orientation when photographing another second panoramic image and the reference orientation may be determined based on sensor data of the camera, so that the camera orientation when photographing another second panoramic image is obtained. Specifically, an included angle between the camera orientation when photographing the second panoramic image at the connection opening O<b>2</b> and the reference orientation X may be determined based on sensor data of the camera when photographing the second panoramic image at the connection openings O<b>1</b> and O<b>2</b>, so that the camera orientation Y (not shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>) when photographing the second panoramic image at the connection opening O<b>2</b> is obtained. For example, in a case where the determined included angle is &#x3b1;, the camera orientation Y=X+&#x3b1; when photographing the second panoramic image at the connection opening O<b>2</b> can be obtained. Thus, the orientations of the connection opening O<b>1</b> and the connection opening O<b>2</b> can be finally determined based on the camera orientations X and Y in subsequent steps.</p><p id="p-0033" num="0032">In sub-step S<b>102</b>-<b>2</b>, the positions of the connection openings are detected in the respective second panoramic images.</p><p id="p-0034" num="0033">In an example, the second panoramic images may be input to a trained object detection model so as to obtain two bounding boxes corresponding to the connection openings output by the object detection model, and most central positions of the two bounding boxes in the horizontal direction may be used as the detected positions of the connection openings. Here, the object detector model may be a model trained by a target detection algorithm based on a deep neural network, such as a YOLOv3 object detection model. However, other types of object detection models may also be used, and the present disclosure is not limited these examples.</p><p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a schematic diagram illustrating a step of detecting a position of a connection opening according to the embodiment of the present disclosure.</p><p id="p-0036" num="0035">The left portion of <figref idref="DRAWINGS">FIG. <b>5</b></figref> shows the same second panoramic image <b>401</b> as the image shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, which is photographed at the connection opening O<b>1</b>, and the right portion of <figref idref="DRAWINGS">FIG. <b>5</b></figref> further shows the second panoramic image <b>402</b> photographed at the connection opening O<b>2</b>. As shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, two bounding boxes <b>501</b> and <b>502</b> corresponding to the connection opening O<b>1</b> output by the object detection model may be obtained by inputting the second panoramic image <b>401</b> photographed at the connection opening O<b>1</b> to the object detection model. The most central positions <b>503</b> and <b>504</b> of the bounding boxes <b>501</b> and <b>502</b> in the horizontal direction may be used as the detected positions of the connection opening O<b>1</b>, respectively. It can be seen from <figref idref="DRAWINGS">FIG. <b>5</b></figref> that the most central positions <b>503</b> and <b>504</b> are located approximately at a 90 degrees position and a &#x2212;90 degrees position in the panoramic image coordinate system.</p><p id="p-0037" num="0036">In another example, the position of the connection opening may be detected by using the object detection model and calculating a variance of pixels of each column in the respective second panoramic images. Specifically, since the connection openings generally have less variation in texture, color and the like, the difference of pixels of the column corresponding to the connection opening should be minimal compared to the pixels of other columns. Accordingly, the variance of pixels of each column in the second panoramic image may be calculated respectively, and a horizontal coordinate of the column whose variance of pixels is the smallest may be used as one of the detected positions of the connection openings. Furthermore, another horizontal coordinate that is spaced from the horizontal coordinate by a half of a horizontal width of the panoramic image may be used as another position of the connection opening.</p><p id="p-0038" num="0037">Similarly, the above steps may be repeated for the second panoramic image <b>402</b> photographed at the connection opening O<b>2</b>, so as to obtain positions <b>505</b> and <b>506</b> of the detected connection opening O<b>2</b>. It can be seen from <figref idref="DRAWINGS">FIG. <b>5</b></figref> that the positions <b>505</b> and <b>506</b> are located approximately at a 0 degree position and a 180 degrees position in the panoramic image coordinate system.</p><p id="p-0039" num="0038">In sub-step S<b>102</b>-<b>3</b>, the orientations of the respective connection openings are determined based on the detected positions of the connection openings in the respective second panoramic images, and the orientations of the camera.</p><p id="p-0040" num="0039">In this sub-step, the orientations of the respective connection openings may be determined based on differences between the positions of the connection openings in the respective second panoramic images and positions of respective central image columns, and the orientations of the camera. Here, the orientation of the connection opening may be represented by a direction of a straight line passing through a specific connection opening.</p><p id="p-0041" num="0040">As shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, in the second panoramic image <b>401</b>, the differences between the positions <b>503</b> and <b>504</b> of the detected connection opening O<b>1</b> and the position of the central image column (as described above, the position of the central image column is a 0 degree position in the panoramic image coordinate system that corresponds to the camera orientation X when photographing the second panoramic image <b>401</b>) are approximately 90 degrees and &#x2212;90 degrees. It may be determined that the included angle between the orientation of the connection opening O<b>1</b> and the camera orientation X is 90 degrees, based on this difference, that is, the orientation of those two are substantially perpendicular to each other.</p><p id="p-0042" num="0041">Similarly, in the second panoramic image <b>402</b>, the differences between the positions <b>505</b> and <b>506</b> of the detected connection opening O<b>2</b> and the position of the central image column (as described above, the position of the central image column is a degree position in the panoramic image coordinate system that corresponds to the camera orientation Y when photographing the second panoramic image <b>402</b>) are approximately 0 degree and 180 degrees. It may be determined that the included angle between the orientation of the connection opening O<b>2</b> and the camera orientation Y is 0 degree, based on this difference, that is, the orientation of those two are substantially parallel to each other.</p><p id="p-0043" num="0042">After obtaining the included angles between the orientations of the respective connection openings and the respective camera orientations, the orientations of the respective connection openings may be converted into an absolute orientation corresponding to the same reference orientation using the camera orientations, so as to finally determine the orientation of the connection opening. Specifically, in this example, since it is determined that the reference orientation is the camera orientation X, and the included angle between the orientation of the connection opening O<b>1</b> and the camera orientation X is 90 degrees, it is finally determined that the orientation of the connection opening is X+90 degrees. Furthermore, in a case where the included angle between the camera orientation Y and the reference orientation is &#x3b1; (namely, the camera orientation is Y=X+&#x3b1;), and the included angle between the orientation of the connection opening O<b>2</b> and the camera orientation Y is degree, it is finally determined that the orientation of the connection opening O<b>2</b> is X+&#x3b1;. Through the above process, the orientation of the connection opening can be determined, and then relative positions of the two adjacent subspaces may be determined in step S<b>103</b>.</p><p id="p-0044" num="0043">In step S<b>103</b>, correspondence relations between the two first panoramic images in the respective sets of the panoramic images and parts of the second panoramic images in the respective sets of panoramic images are obtained, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces are determined based on the correspondence relations.</p><p id="p-0045" num="0044">In this step, the second panoramic images may be divided into two respective sub-images, based on the detected positions of the connection openings in the respective second panoramic images in the respective sets of panoramic images. Then, similarities between the two first panoramic images and the two respective sub-images in the respective sets of panoramic images may be compared to obtain the correspondence relations.</p><p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a schematic diagram illustrating a step of obtaining a correspondence relation between two first panoramic images and a part of a second panoramic image. As shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, the second panoramic image <b>401</b> may be divided into two sub-images <b>601</b> and <b>602</b> by dividing the second panoramic image <b>401</b> at the position of the connection opening O<b>1</b> detected from the second panoramic image <b>401</b> in a set of panoramic images. Here, the sub-image <b>601</b> is an image obtained by segmenting a middle portion of the second panoramic image <b>401</b>, and the sub-image <b>602</b> is an image obtained by segmenting and splicing the portions on the left and right edges of the second panoramic image <b>402</b>. The two sub-images correspond to the two adjacent subspaces connected by the connection opening O<b>1</b>, respectively.</p><p id="p-0047" num="0046">Additionally, <figref idref="DRAWINGS">FIG. <b>6</b></figref> further shows a first panoramic image <b>603</b> and a first panoramic image <b>604</b> in the set of panoramic images, which are respectively photographed in the two adjacent subspaces. By comparing the similarities between the first panoramic images <b>603</b> and <b>604</b> and the two sub-images <b>601</b> and <b>602</b>, respectively, it may be determined that the first panoramic image <b>603</b> is more similar to the sub-image <b>601</b> and the first panoramic image <b>604</b> is more similar to the sub-image <b>602</b>. Thus, it may be determined that the first panoramic image <b>603</b> corresponds to the sub-image <b>601</b> and the first panoramic image <b>604</b> corresponds to the sub-image <b>602</b>. In this step, a first panorama image and a sub-image may be input to a trained comparison model to obtain the similarity of the two images output by the model, so that a correspondence relation between the first panorama image and the sub-image is determined based on the similarity. Here, the comparison model may be a model trained based on a Siamese neural network, but the present disclosure is not limited to the specific type of the model. Accordingly, based on the determined correspondence relation between the first panoramic image and the sub-images, it may be determined that the first panoramic image <b>603</b> corresponds to the middle portion of the second panoramic image <b>401</b>, and the first panoramic image <b>604</b> corresponds to the middle portion of the second panoramic image <b>401</b>. Thus, the relative positions of the adjacent subspaces corresponding to the two first panoramic images can be obtained.</p><p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a schematic diagram illustrating a determination result of relative positions of two adjacent subspaces according to the embodiment of the present disclosure. Here, the relative positions defines the positions of the two adjacent subspaces relative to the connection opening that connecting the two adjacent subspaces, namely, defines which side or which direction of the two adjacent subspaces are located on the connection opening, respectively. Since it has been determined in step S<b>102</b> that the orientation of the connection opening O<b>1</b> is X+90 degrees, the two adjacent subspaces connected by the connection opening O<b>1</b> are located in the X direction and the &#x2212;X direction of the connection opening, respectively. Accordingly, after it is determined that the first panoramic image <b>603</b> corresponds to the middle portion of the second panoramic image <b>401</b> and the first panoramic image <b>604</b> corresponds to two edges of the second panoramic image <b>401</b>, it may be determined that the relative position of the subspace (shown as R<b>2</b>&#x2032; in <figref idref="DRAWINGS">FIG. <b>7</b></figref>) corresponding to the first panoramic image <b>603</b> is the X direction of the connection opening O<b>1</b>, and the relative position of the subspace (shown as R<b>1</b>&#x2032; in <figref idref="DRAWINGS">FIG. <b>7</b></figref>) corresponding to the first panoramic image <b>604</b> is the -X direction of the connection opening O<b>1</b>. Namely, the relative positions of two adjacent subspaces R<b>1</b>&#x2032; and R<b>2</b>&#x2032; of a set of subspaces as shown in the left portion of <figref idref="DRAWINGS">FIG. <b>7</b></figref> is obtained.</p><p id="p-0049" num="0048">Similarly, the process of the above step S<b>103</b> may be repeated for another set of panoramic images photographed at the connection opening O<b>2</b> and photographed in the two adjacent subspaces connected by the connection opening O<b>2</b>, so as to obtain the relative positions of two adjacent subspaces R<b>3</b>&#x2032; and R<b>4</b>&#x2032; of another set of subspaces as shown in the right portion of <figref idref="DRAWINGS">FIG. <b>7</b></figref>.</p><p id="p-0050" num="0049">In step S<b>104</b>, the first panoramic images in the sets of the panoramic images that correspond to the same subspace are recognized, the connection relation between the respective sets of the subspaces is determined based on the same subspace, and the connection relation of the subspaces in the three-dimensional space is determined based on the determined connection relation between the sets of the subspaces, the orientations of the respective connection openings, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces.</p><p id="p-0051" num="0050">In this step, similarities between the first panoramic images in a set of panoramic images and the first panoramic images in another set of panoramic images may be compared, so as to recognize the first panoramic images in the sets of the panoramic images that correspond to the same subspace. Here, as described above, a first panoramic image of a set of panoramic images and a first panoramic image of another set of panoramic images may be input to the comparison model trained based on the Siamese neural network to obtain a similarity of the two output images, so that the first panoramic images corresponding to the same subspace is recognized based on the similarity.</p><p id="p-0052" num="0051">As shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref>, after determining that there are two sets of subspaces in the three-dimensional space, the connection relation between the two sets of subspaces will be determined, namely, it will be determined which specific subspaces is used to connect the two sets of subspaces to form a complete three-dimensional space. In this example, if it is determined that the similarity between a first panoramic image corresponding to the subspace R<b>2</b>&#x2032; of a set of subspaces and the first panoramic image corresponding to the subspace R<b>3</b>&#x2032; of another set of subspaces is greater than a threshold, it may be determined that the subspaces R<b>2</b>&#x2032; and R<b>3</b>&#x2032; are substantially the same subspace. Accordingly, the connection relation between the respective sets of the subspaces may be determined based on the same subspace. Namely, it may be determined that the two sets of subspaces may be connected using the subspaces R<b>2</b>&#x2032; and R<b>3</b>&#x2032; to form a complete three-dimensional space. Accordingly, a set of subspaces in the left portion of <figref idref="DRAWINGS">FIG. <b>7</b></figref> may be connected with another set of subspaces in the right portion of <figref idref="DRAWINGS">FIG. <b>7</b></figref> by overlapping the subspaces R<b>2</b>&#x2032; and R<b>3</b>&#x2032; with each other.</p><p id="p-0053" num="0052">After connecting the sets of the subspaces to each other based on the connection relation of the sets of the subspaces, the connection relation of the subspaces in the three-dimensional space may be determined based on the determined connection relation between the sets of the subspaces, the orientations of the respective connection openings, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces.</p><p id="p-0054" num="0053">Additionally, after determining the connection relation of the subspaces, a two-dimensional layout image of the three-dimensional space may be further generated based on the determined connection relation of the subspaces.</p><p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a schematic diagram illustrating a step of generating a two-dimensional layout image based on the determined connection relation of the subspaces according to the embodiment of the present disclosure. As shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, a two-dimensional layout image similar to the image shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref> may be generated by overlapping the subspaces R<b>2</b>&#x2032; and R<b>3</b>&#x2032; shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref> based on the determined connection relation of the subspaces to form the subspace R<b>2</b>&#x2033; shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>.</p><p id="p-0056" num="0055">From above, in the method for determining a connection relation of subspaces according to the embodiment of the present disclosure, the connection relation of the subspaces in the three-dimensional space can be determined based on the panoramic images photographed in the subspaces in the three-dimensional space, and the panoramic images photographed at the connection openings that connect the respective sets of the adjacent subspaces. Thus, the two-dimensional layout image of the three-dimensional space can be automatically generated based on the determined connection relation of the subspaces, thereby improving the generation efficiency of the two-dimensional layout image.</p><p id="p-0057" num="0056">Next, an apparatus for determining a connection relation of subspaces according to another embodiment of the present disclosure will be described below with reference to <figref idref="DRAWINGS">FIG. <b>9</b></figref>. <figref idref="DRAWINGS">FIG. <b>9</b></figref> is a schematic block diagram illustrating an apparatus <b>900</b> for determining a connection relation of subspaces according to another embodiment of the present disclosure. As shown in <figref idref="DRAWINGS">FIG. <b>9</b></figref>, the apparatus <b>900</b> for determining a connection relation of subspaces includes an obtaining unit <b>910</b>, a first determining unit <b>920</b>, a second determining unit <b>930</b>, and a third determining unit <b>940</b>. Note that the apparatus <b>900</b> for determining a connection relation of subspaces may also include other components, however, since these components are not related to the content of the embodiment of the present disclosure, their illustration and description are omitted here. In addition, since the specific details of the following operations performed by the apparatus <b>900</b> for determining a connection relation of subspaces according to the embodiment of the present disclosure are the same as those described above with reference to <figref idref="DRAWINGS">FIGS. <b>1</b> to <b>8</b></figref>, repeated descriptions of the same details are omitted here to avoid repetition.</p><p id="p-0058" num="0057">First, the obtaining unit <b>910</b> obtains a plurality of sets of panoramic images respectively corresponding to a plurality of sets of the subspaces in a three-dimensional space. Each set of the subspaces are composed of two adjacent subspaces in the three-dimensional space. Each set of the panoramic images include two first panoramic images that respectively photographed in the two adjacent subspaces of the respective sets of the subspaces, and a second panoramic image photographed at a connection opening that connects the two adjacent subspaces.</p><p id="p-0059" num="0058">Here, the first panoramic images and the second panoramic images of the sets of the subspaces may be generated in a predetermined photographing order, and the sets of panoramic images may be obtained by grouping the first panoramic images and the second panoramic images of the sets of the subspaces in the predetermined photographing order. For example, as shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, if the first panoramic images and the second panoramic images of the sets of the subspaces are generated in a predetermined photographing order of P<b>1</b>, P<b>2</b>, P<b>3</b>, P<b>4</b>, P<b>5</b> and P<b>6</b>, the obtaining unit <b>910</b> may classify the first three panoramic images into a group, and may classify the last three panoramic images into another group in the predetermined photographing order. As another example, if the first panoramic images and the second panoramic images of the sets of the subspaces are generated in a predetermined photographing order of P<b>2</b>, P<b>5</b>, Pl, P<b>3</b>, P<b>4</b> and P<b>6</b>, the obtaining unit <b>910</b> may classify the first, third and fourth panoramic images into a group, and may classify the second, fifth and sixth panoramic images into another group in the predetermined photographing order. Thus, the obtaining unit <b>910</b> according to the embodiment of the present disclosure can automatically group the input panoramic images in the predetermined photographing order previously input or set by a user, thereby facilitating subsequent processing.</p><p id="p-0060" num="0059">Note that since the camera may not be completely horizontally disposed during the actual photographing process, the panoramic image obtained by photographing may be skewed to a certain extent. In this case, the obtaining unit <b>910</b> may perform vertical correction processing on the first panoramic images and the second panoramic image, before the subsequent processing is performed on the obtained first panoramic images and the second panoramic image, so as to improve the accuracy of the subsequent processing.</p><p id="p-0061" num="0060">The first determining unit <b>920</b> determines orientations of the respective connection openings based on positions of the connection openings in the respective second panoramic images, and orientations of a camera when photographing the respective second panoramic images.</p><p id="p-0062" num="0061">First, the first determining unit <b>920</b> determines orientations of the camera when photographing the respective second panoramic images based on sensor data of the camera when photographing the respective second panoramic images.</p><p id="p-0063" num="0062">Specifically, the first determining unit <b>920</b> may use the camera orientation when photographing any one second panoramic image as a reference orientation, so that the camera orientations when photographing other second panoramic images are determined based on the reference orientation. <figref idref="DRAWINGS">FIG. <b>4</b></figref> is a schematic diagram illustrating an example of a reference orientation according to the embodiment of the present disclosure. The left portion of <figref idref="DRAWINGS">FIG. <b>4</b></figref> shows the second panoramic image <b>401</b> photographed at the connection opening O<b>1</b>, the arrow direction X shown in the right portion of <figref idref="DRAWINGS">FIG. <b>4</b></figref> is a camera orientation when photographing the second panoramic image <b>401</b> in a top view, and the camera orientation corresponds to a position of a central image column of the second panoramic image <b>401</b>. Here, the position of the central image column is a position of an image in the most central column of the panoramic image in a horizontal direction (for example, a 0 degree position in the panoramic image coordinate system shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>). In this example, the first determining unit <b>920</b> may use the camera orientation X when photographing the second panoramic image <b>401</b> at the connection opening O<b>1</b> as the reference orientation. Additionally, in another example, a camera orientation when photographing the second panoramic image at the connection opening O<b>2</b> may also be used as the reference orientation, and the present disclosure is not limited these examples.</p><p id="p-0064" num="0063">In a case where the camera orientation X when photographing the second panoramic image <b>401</b> at the connection opening O<b>1</b> is used as the reference orientation, the first determining unit <b>920</b> may determine an included angle between a camera orientation when photographing another second panoramic image and the reference orientation based on sensor data of the camera, so that the camera orientation when photographing another second panoramic image is obtained. Specifically, the first determining unit <b>920</b> may determine an included angle between the camera orientation when photographing the second panoramic image at the connection opening O<b>2</b> and the reference orientation X based on sensor data of the camera when photographing the second panoramic image at the connection openings O<b>1</b> and O<b>2</b>, so that the camera orientation Y (not shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>) when photographing the second panoramic image at the connection opening O<b>2</b> is obtained. For example, in a case where the determined included angle is &#x3b1;, the first determining unit <b>920</b> may obtain the camera orientation Y=X+&#x3b1; when photographing the second panoramic image at the connection opening O<b>2</b>. Thus, the orientations of the connection opening O<b>1</b> and the connection opening O<b>2</b> can be finally determined based on the camera orientations X and Y in subsequent steps.</p><p id="p-0065" num="0064">Next, the first determining unit <b>920</b> detects the positions of the connection openings in the respective second panoramic images.</p><p id="p-0066" num="0065">In an example, the first determining unit <b>920</b> may input the second panoramic images to a trained object detection model so as to obtain two bounding boxes corresponding to the connection openings output by the object detection model, and most central positions of the two bounding boxes in the horizontal direction may be used as the detected positions of the connection openings. Here, the object detector model may be a model trained by a target detection algorithm based on a deep neural network, such as a Y<b>0</b>LOv3 object detection model. However, other types of object detection models may also be used, and the present disclosure is not limited these examples.</p><p id="p-0067" num="0066"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a schematic diagram illustrating a step of detecting a position of a connection opening according to the embodiment of the present disclosure.</p><p id="p-0068" num="0067">The left portion of <figref idref="DRAWINGS">FIG. <b>5</b></figref> shows the same second panoramic image <b>401</b> as the image shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, which is photographed at the connection opening O<b>1</b>, and the right portion of <figref idref="DRAWINGS">FIG. <b>5</b></figref> further shows the second panoramic image <b>402</b> photographed at the connection opening O<b>2</b>. As shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, the first determining unit <b>920</b> may obtain two bounding boxes <b>501</b> and <b>502</b> corresponding to the connection opening <b>01</b> output by the object detection model by inputting the second panoramic image <b>401</b> photographed at the connection opening O<b>1</b> to the object detection model. The first determining unit <b>920</b> may use the most central positions <b>503</b> and <b>504</b> of the bounding boxes <b>501</b> and <b>502</b> in the horizontal direction as the positions of the detected connection opening O<b>1</b>, respectively. It can be seen from <figref idref="DRAWINGS">FIG. <b>5</b></figref> that the most central positions <b>503</b> and <b>504</b> are located approximately at a 90 degrees position and a &#x2212;90 degrees position in the panoramic image coordinate system.</p><p id="p-0069" num="0068">In another example, the first determining unit <b>920</b> may detect the position of the connection opening by using the object detection model and calculating a variance of pixels of each column in the respective second panoramic images.</p><p id="p-0070" num="0069">Specifically, since the connection openings generally have less variation in texture, color and the like, the difference of pixels of the column corresponding to the connection opening should be minimal compared to the pixels of other columns. Accordingly, the first determining unit <b>920</b> may calculate the variance of pixels of each column in the second panoramic image respectively, and may use a horizontal coordinate of the column whose variance of pixels is the smallest as one of the positions of the detected connection openings. Furthermore, the first determining unit <b>920</b> may use another horizontal coordinate that is spaced from the horizontal coordinate by a half of a horizontal width of the panoramic image as another position of the connection opening.</p><p id="p-0071" num="0070">Similarly, the first determining unit <b>920</b> may repeat the above steps for the second panoramic image <b>402</b> photographed at the connection opening O<b>2</b>, so as to obtain positions <b>505</b> and <b>506</b> of the detected connection opening O<b>2</b>. It can be seen from <figref idref="DRAWINGS">FIG. <b>5</b></figref> that the positions <b>505</b> and <b>506</b> are located approximately at a 0 degree position and a 180 degrees position in the panoramic image coordinate system.</p><p id="p-0072" num="0071">Finally, the first determining unit <b>920</b> determines the orientations of the respective connection openings based on the detected positions of the connection openings in the respective second panoramic images, and the orientations of the camera.</p><p id="p-0073" num="0072">Here, the first determining unit <b>920</b> may determine the orientations of the respective connection openings based on differences between the positions of the connection openings in the respective second panoramic images and positions of respective central image columns, and the orientations of the camera. Here, the orientation of the connection opening may be represented by a direction of a straight line passing through a specific connection opening.</p><p id="p-0074" num="0073">As shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, in the second panoramic image <b>401</b>, the differences between the positions <b>503</b> and <b>504</b> of the detected connection opening O<b>1</b> and the position of the central image column (as described above, the position of the central image column is a degree position in the panoramic image coordinate system that corresponds to the camera orientation X when photographing the second panoramic image <b>401</b>) are approximately 90 degrees and &#x2212;90 degrees. The first determining unit <b>920</b> may determine that the included angle between the orientation of the connection opening O<b>1</b> and the camera orientation X is degrees, based on this difference, that is, the orientation of those two are substantially perpendicular to each other.</p><p id="p-0075" num="0074">Similarly, in the second panoramic image <b>402</b>, the differences between the positions <b>505</b> and <b>506</b> of the detected connection opening O<b>2</b> and the position of the central image column (as described above, the position of the central image column is a degree position in the panoramic image coordinate system that corresponds to the camera orientation Y when photographing the second panoramic image <b>402</b>) are approximately 0 degree and 180 degrees. The first determining unit <b>920</b> may determine that the included angle between the orientation of the connection opening O<b>2</b> and the camera orientation Y is degree, based on this difference, that is, the orientation of those two are substantially parallel to each other.</p><p id="p-0076" num="0075">After obtaining the included angles between the orientations of the respective connection openings and the respective camera orientations, the first determining unit <b>920</b> may convert the orientations of the respective connection openings into an absolute orientation corresponding to the same reference orientation using the camera orientations, so as to finally determine the orientation of the connection opening. Specifically, in this example, since it is determined that the reference orientation is the camera orientation X, and the included angle between the orientation of the connection opening O<b>1</b> and the camera orientation X is 90 degrees, it is finally determined that the orientation of the connection opening is X+90 degrees. Furthermore, in a case where the included angle between the camera orientation Y and the reference orientation is &#x3b1; (namely, the camera orientation is Y=X+&#x3b1;), and the included angle between the orientation of the connection opening O<b>2</b> and the camera orientation Y is 0 degree, it is finally determined that the orientation of the connection opening O<b>2</b> is X+&#x3b1;. Through the above process, the first determining unit <b>920</b> can determine the orientation of the connection opening.</p><p id="p-0077" num="0076">The second determining unit <b>930</b> obtains correspondence relations between the two first panoramic images in the respective sets of the panoramic images and parts of the second panoramic images in the respective sets of panoramic images, and determines the relative positions of the two adjacent subspaces in the respective sets of the subspaces based on the correspondence relations.</p><p id="p-0078" num="0077">Here, the second determining unit <b>930</b> may divide the second panoramic images into two respective sub-images, based on the detected positions of the connection openings in the respective second panoramic images in the respective sets of panoramic images. Then, similarities between the two first panoramic images and the two respective sub-images in the respective sets of panoramic images may be compared to obtain the correspondence relations.</p><p id="p-0079" num="0078"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a schematic diagram illustrating a step of obtaining a correspondence relation between two first panoramic images and a part of a second panoramic image. As shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, the second determining unit <b>930</b> may divide the second panoramic image <b>401</b> into two sub-images <b>601</b> and <b>602</b> by dividing the second panoramic image <b>401</b> at the position of the connection opening O<b>1</b> detected from the second panoramic image <b>401</b> in a set of panoramic images. Here, the sub-image <b>601</b> is an image obtained by segmenting a middle portion of the second panoramic image <b>401</b>, and the sub-image <b>602</b> is an image obtained by segmenting and splicing the portions on the left and right edges of the second panoramic image <b>402</b>. The two sub-images correspond to the two adjacent subspaces connected by the connection opening O<b>1</b>, respectively.</p><p id="p-0080" num="0079">Additionally, <figref idref="DRAWINGS">FIG. <b>6</b></figref> further shows a first panoramic image <b>603</b> and a first panoramic image <b>604</b> in the set of panoramic images, which are respectively photographed in the two adjacent subspaces. By comparing the similarities between the first panoramic images <b>603</b> and <b>604</b> and the two sub-images <b>601</b> and <b>602</b>, respectively, the second determining unit unit <b>930</b> may determine that the first panoramic image <b>603</b> is more similar to the sub-image <b>601</b> and the first panoramic image <b>604</b> is more similar to the sub-image <b>602</b>. Thus, the second determining unit <b>930</b> may determine that the first panoramic image <b>603</b> corresponds to the sub-image <b>601</b> and the first panoramic image <b>604</b> corresponds to the sub-image <b>602</b>. Here, the second determining unit <b>930</b> may input a first panorama image and a sub-image to a trained comparison model to obtain the similarity of the two images output by the model, so that a correspondence relation between the first panorama image and the sub-image is determined based on the similarity. Here, the comparison model may be a model trained based on a Siamese neural network, but the present disclosure is not limited to the specific type of the model. Accordingly, based on the determined correspondence relation between the first panoramic image and the sub-images, the second determining unit <b>930</b> may determine that the first panoramic image <b>603</b> corresponds to the middle portion of the second panoramic image <b>401</b>, and the first panoramic image <b>604</b> corresponds to the middle portion of the second panoramic image <b>401</b>. Thus, the relative positions of the adjacent subspaces corresponding to the two first panoramic images can be obtained.</p><p id="p-0081" num="0080"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a schematic diagram illustrating a determination result of relative positions of two adjacent subspaces according to the embodiment of the present disclosure. Here, the relative positions defines the positions of the two adjacent subspaces relative to the connection opening that connecting the two adjacent subspaces, namely, defines which side or which direction of the two adjacent subspaces are located on the connection opening, respectively. Since the second determining unit <b>930</b> has been determined that the orientation of the connection opening O<b>1</b> is X+90 degrees, the two adjacent subspaces connected by the connection opening O<b>1</b> are located in the X direction and the &#x2212;X direction of the connection opening, respectively. Accordingly, after the second determining unit <b>930</b> determines that the first panoramic image <b>603</b> corresponds to the middle portion of the second panoramic image <b>401</b> and the first panoramic image <b>604</b> corresponds to two edges of the second panoramic image <b>401</b>, the second determining unit <b>930</b> may determine that the relative position of the subspace (shown as R<b>2</b>&#x2032; in <figref idref="DRAWINGS">FIG. <b>7</b></figref>) corresponding to the first panoramic image <b>603</b> is the X direction of the connection opening O<b>1</b>, and the relative position of the subspace (shown as R<b>1</b>&#x2032; in <figref idref="DRAWINGS">FIG. <b>7</b></figref>) corresponding to the first panoramic image <b>604</b> is the &#x2212;X direction of the connection opening O<b>1</b>. Namely, the relative positions of two adjacent subspaces R<b>1</b>&#x2032; and R<b>2</b>&#x2032; of a set of subspaces as shown in the left portion of <figref idref="DRAWINGS">FIG. <b>7</b></figref> is obtained.</p><p id="p-0082" num="0081">Similarly, the second determining unit <b>930</b> may repeat the process of the above step S<b>103</b> may be repeated for another set of panoramic images photographed at the connection opening O<b>2</b> and photographed in the two adjacent subspaces connected by the connection opening O<b>2</b>, so as to obtain the relative positions of two adjacent subspaces R<b>3</b>&#x2032; and R<b>4</b>&#x2032; of another set of subspaces as shown in the right portion of <figref idref="DRAWINGS">FIG. <b>7</b></figref>.</p><p id="p-0083" num="0082">The third determining unit <b>940</b> recognizes the first panoramic images in the sets of the panoramic images that correspond to the same subspace, determines the connection relation between the respective sets of the subspaces based on the same subspace, and determines the connection relation of the subspaces in the three-dimensional space based on the determined connection relation between the sets of the subspaces, the orientations of the respective connection openings, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces.</p><p id="p-0084" num="0083">Here, the third determining unit <b>940</b> may compare similarities between the first panoramic images in a set of panoramic images and the first panoramic images in another set of panoramic images, so as to recognize the first panoramic images in the sets of the panoramic images that correspond to the same subspace. As described above, the third determining unit <b>940</b> may input a first panoramic image of a set of panoramic images and a first panoramic image of another set of panoramic images to the comparison model trained based on the Siamese neural network to obtain a similarity of the two output images, so that the first panoramic images corresponding to the same subspace is recognized based on the similarity.</p><p id="p-0085" num="0084">As shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref>, after determining that there are two sets of subspaces in the three-dimensional space, the third determining unit <b>940</b> will determine the connection relation between the two sets of subspaces, namely, will determine which specific subspaces is used to connect the two sets of subspaces to form a complete three-dimensional space. In this example, if the third determining unit <b>940</b> determines that the similarity between a first panoramic image corresponding to the subspace R<b>2</b>&#x2032; of a set of subspaces and the first panoramic image corresponding to the subspace R<b>3</b>&#x2032; of another set of subspaces is greater than a threshold, the third determining unit <b>940</b> may determine that the subspaces R<b>2</b>&#x2032; and R<b>3</b>&#x2032; are substantially the same subspace. Accordingly, the third determining unit <b>940</b> may determine the connection relation between the respective sets of the subspaces based on the same subspace. Namely, the third determining unit <b>940</b> may determine that the two sets of subspaces may be connected using the subspaces R<b>2</b>&#x2032; and R<b>3</b>&#x2032; to form a complete three-dimensional space. Accordingly, the third determining unit <b>940</b> may connect a set of subspaces in the left portion of <figref idref="DRAWINGS">FIG. <b>7</b></figref> with another set of subspaces in the right portion of <figref idref="DRAWINGS">FIG. <b>7</b></figref> by overlapping the subspaces R<b>2</b>&#x2032; and R<b>3</b>&#x2032; with each other.</p><p id="p-0086" num="0085">After connecting the sets of the subspaces to each other based on the connection relation of the sets of the subspaces, the third determining unit <b>940</b> may determine the connection relation of the subspaces in the three-dimensional space based on the determined connection relation between the sets of the subspaces, the orientations of the respective connection openings, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces.</p><p id="p-0087" num="0086">Additionally, after determining the connection relation of the subspaces, an image generating unit (not shown) may further generate a two-dimensional layout image of the three-dimensional space based on the determined connection relation of the subspaces.</p><p id="p-0088" num="0087"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a schematic diagram illustrating a step of generating a two-dimensional layout image based on the determined connection relation of the subspaces according to the embodiment of the present disclosure. As shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, a two-dimensional layout image similar to the image shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref> may be generated by overlapping the subspaces R<b>2</b>&#x2032; and R<b>3</b>&#x2032; shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref> based on the determined connection relation of the subspaces to form the subspace R<b>2</b>&#x2033; shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>.</p><p id="p-0089" num="0088">From above, the apparatus for determining a connection relation of subspaces according to the embodiment of the present disclosure can determine the connection relation of the subspaces in the three-dimensional space based on the panoramic images photographed in the subspaces in the three-dimensional space, and the panoramic images photographed at the connection openings that connect the respective sets of the adjacent subspaces. Thus, the two-dimensional layout image of the three-dimensional space can be automatically generated based on the determined connection relation of the subspaces, thereby improving the generation efficiency of the two-dimensional layout image.</p><p id="p-0090" num="0089">Next, an apparatus for determining a connection relation of subspaces according to another embodiment of the present disclosure will be described below with reference to <figref idref="DRAWINGS">FIG. <b>10</b></figref>. <figref idref="DRAWINGS">FIG. <b>10</b></figref> is a schematic block diagram illustrating an apparatus <b>1000</b> for determining a connection relation of subspaces according to another embodiment of the present disclosure. As shown in <figref idref="DRAWINGS">FIG. <b>10</b></figref>, the apparatus <b>1000</b> may be a computer or a server.</p><p id="p-0091" num="0090">As shown in <figref idref="DRAWINGS">FIG. <b>10</b></figref>, the apparatus <b>1000</b> for determining a connection relation of subspaces includes one or more processors <b>1010</b>, and a memory <b>1020</b>. Note that the apparatus <b>1000</b> for determining a connection relation of subspaces may further include an input device, an output device and the like (not shown). These components may be interconnected by a bus system and/or another form of connection mechanism. Note that the components and structures of the apparatus <b>1000</b> for determining a connection relation of subspaces shown in <figref idref="DRAWINGS">FIG. <b>10</b></figref> are merely exemplary and not limiting, and the apparatus <b>1000</b> for determining a connection relation of subspaces may have other components and structures as desired.</p><p id="p-0092" num="0091">The processor <b>1010</b> may be a central processing unit (CPU) or another form of processing unit having data processing capabilities and/or instruction execution capabilities, and may utilize computer program instructions stored in the memory <b>1020</b> to perform desired functions. The processor <b>1010</b> may be configured to obtain a plurality of sets of panoramic images respectively corresponding to a plurality of sets of the subspaces in a three-dimensional space, each set of the subspaces being composed of two adjacent subspaces in the three-dimensional space, and each set of the panoramic images including two first panoramic images that respectively photographed in the two adjacent subspaces of the respective sets of the subspaces, and a second panoramic image photographed at a connection opening that connects the two adjacent subspaces; determine, based on positions of the connection openings in the respective second panoramic images, and orientations of a camera when photographing the respective second panoramic images, orientations of the respective connection openings; obtain correspondence relations between the two first panoramic images in the respective sets of the panoramic images and parts of the second panoramic images in the respective sets of panoramic images; determine, based on the correspondence relations, relative positions of the two adjacent subspaces in the respective sets of the subspaces; recognize the first panoramic images in the sets of the panoramic images that correspond to the same subspace; determine, based on the same subspace, the connection relation between the respective sets of the subspaces; and determine, based on the determined connection relation between the sets of the subspaces, the orientations of the respective connection openings, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces, the connection relation of the subspaces in the three-dimensional space.</p><p id="p-0093" num="0092">The memory <b>1020</b> may include one or more computer program products, and the computer program products may include various forms of computer readable storage media, such as volatile memory and/or nonvolatile memory. One or more computer program instructions may be stored in the computer readable storage medium, and the processor <b>1010</b> may execute the program instructions to implement the functions of the apparatus of the embodiments of the invention described above and/or other desired functions, and/or may perform the method of the embodiments of the present disclosure. Various application programs and various data may also be stored in the computer readable storage medium.</p><p id="p-0094" num="0093">Next, in another embodiment of the present disclosure, a non-transitory computer-readable recording medium is further provided. The non-transitory computer-readable recording medium has computer-executable instructions for execution by one or more processors. When the computer-executable instructions are executed, the computer-executable instructions cause the one or more processors to carry out a method for determining a connection relation of subspaces. The method includes obtaining a plurality of sets of panoramic images respectively corresponding to a plurality of sets of the subspaces in a three-dimensional space, each set of the subspaces being composed of two adjacent subspaces in the three-dimensional space, and each set of the panoramic images including two first panoramic images that respectively photographed in the two adjacent subspaces of the respective sets of the subspaces, and a second panoramic image photographed at a connection opening that connects the two adjacent subspaces; determining, based on positions of the connection openings in the respective second panoramic images, and orientations of a camera when photographing the respective second panoramic images, orientations of the respective connection openings; obtaining correspondence relations between the two first panoramic images in the respective sets of the panoramic images and parts of the second panoramic images in the respective sets of panoramic images; determining, based on the correspondence relations, relative positions of the two adjacent subspaces in the respective sets of the subspaces; recognizing the first panoramic images in the sets of the panoramic images that correspond to the same subspace; determining, based on the same subspace, the connection relation between the respective sets of the subspaces; and determining, based on the determined connection relation between the sets of the subspaces, the orientations of the respective connection openings, openings, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces, the connection relation of the subspaces in the three-dimensional space.</p><p id="p-0095" num="0094">Note that the above specific embodiments are just examples and the present disclosure is not limited to these embodiments. A person skilled in the art may merge and combine the steps and apparatuses separately described in the embodiments according to the concept of the present disclosure to achieve the effect of the present disclosure. The above embodiments obtained by the merging and combination are included in the present disclosure and their descriptions are omitted here.</p><p id="p-0096" num="0095">Note that the advantages, benefits and effects described in the present specification are just examples, the present disclosure is not limited to these examples, and it cannot be considered that these advantages, benefits and effects are required by the embodiments of the present disclosure. Furthermore, the specific content of the present specification is only for description and understanding rather than limitation, and the present disclosure is not limited to specific content.</p><p id="p-0097" num="0096">The block diagrams of the units, apparatuses, devices and system are just examples, the connection, placement and configuration illustrated in the block diagrams related to the present disclosure are not limited to these examples, and the units, apparatuses, devices and system may be connected, placed or configured in any way. The terms &#x201c;comprise&#x201d;, &#x201c;include&#x201d; and &#x201c;have&#x201d; are open-form terms, which mean and may be changed into &#x201c;include and is not limited to&#x201d;. The terms &#x201c;or&#x201d; and &#x201c;and&#x201d; mean and may be changed into &#x201c;and/or&#x201d;, unless the context is clearly not applicable. The term &#x201c;such as&#x201d; means and may be changed to &#x201c;such as, but not limited to&#x201d;.</p><p id="p-0098" num="0097">The flowchart and the method according to the present disclosure are just examples, and not limited to the steps in the embodiments. The steps of the embodiments may be performed in any order. The terms &#x201c;next&#x201d;, &#x201c;subsequently&#x201d; and &#x201c;then&#x201d; are just for describing the present disclosure, and the present disclosure is not limited to these terms. Furthermore, the articles &#x201c;a&#x201d;, &#x201c;an&#x201d; and &#x201c;the&#x201d; should not be limited to the singular element.</p><p id="p-0099" num="0098">The steps or apparatuses of the present disclosure are described above. The above descriptions of the embodiments are just examples, and various modifications, replacements or combinations may be made without departing from the scope of the present disclosure by persons skilled in the art.</p><p id="p-0100" num="0099">The steps of the above method may be performed by any appropriate means that can perform the corresponding functions. The means may include any components and/or modules of hardware and/or software, and include but are not limited to a circuit, a dedicated application-specific integrated circuit (ASIC) or a processor.</p><p id="p-0101" num="0100">The present disclosure may use a general-purpose processor, a digital signal processor (DSP), an ASIC, a field programmable gate array (FPGA) or other programmable logic device (PLD), a discrete gate or transistor logic, discrete hardware components or any other combination for executing the functions to realize the logic blocks, modules and circuits of the embodiments. The general-purpose processor is a micro-processor, and alternatively, the processor may be any processor, controller, micro-controller or state machine that can be obtained commercially. The processor may also be the combination of computer equipment, such as the combination of a DSP and a micro-processor, the combination of plural micro-processors, or the combination of a DSP and plural micro-processors.</p><p id="p-0102" num="0101">The steps of the method according to the present disclosure may be incorporated in the hardware, software modules executed by a processor or the combination of these two directly. The software modules may be stored in a recording medium with any configuration. The examples of the recording medium includes a random access memory (RAM), a read-only memory (ROM), a flash memory, an EPROM memory, an EEPROM memory, a register, a hard disk drive, a removable disk, a CD-ROM, etc. The recording medium may be linked to a processor so that the processor reads information from the recording medium or writes information into the recording medium. Alternatively, the recording medium and the processor may also be a whole apparatus. The software module may be a single command or many commands, and may be distributed in several code segments, different programs or plural recording media.</p><p id="p-0103" num="0102">Steps of the above method may be performed in a time order as above, however the performing sequence is not limited to such a time order. Any steps may be performed in parallel or independently.</p><p id="p-0104" num="0103">The functions may be realized by hardware, software, firmware or any combination thereof. When the function is implemented by software, the function may be stored in a computer-readable medium as one or more commands. The recording medium may be any real medium that can be accessed by a computer. Such a computer-readable medium includes a RAM, a ROM, an EEPROM, a CD-ROM or other laser discs, a magnetic disk or other magnetic memory, or any other real media that carry or store commands, data or program codes and are accessed by the computer. Such a disk and disc include a CD, a laser disc, an optical disc, a DVD disc, a floppy disk and a blue-ray disc, and the disk usually reproduces data by magnetization and the disc reproduces data by a laser.</p><p id="p-0105" num="0104">Thus, the operations may be performed by a computer program product. For example, such a computer program product may be a tangible medium where computer-readable commands are stored (or coded), and the commands may be executed by one or more processors to perform the operation. The computer program product may include packaging material.</p><p id="p-0106" num="0105">The software or commands may also be transmitted by a transmission medium. For example, a coaxial cable, an optical cable, a twisted cable, a digital subscriber line (DSL), or a transmission medium of the wireless technology of infrared, wireless or microwave may be used to transmit the software from a website, a server or another remote source.</p><p id="p-0107" num="0106">Additionally, the modules and/or other appropriate means of the method or technology may be obtained from a user terminal and/or base station, or by other methods. For example, such equipment may be connected to a server so as to perform the transmission of the means of the above method. Alternatively, the methods may be provided via a storage unit (for example, a physical storage medium such as a RAM, a ROM, a CD or a floppy disk), so that the user terminal and/or the base station can obtain the methods when it is connected to the equipment. Furthermore, any other appropriate technology may be provided to the equipment by the method.</p><p id="p-0108" num="0107">The present specification and the appended claims include other examples and implementations. For example, the above functions may be implemented by a processor, hardware, software, firmware, hard-wire or any combination thereof. The features for implementing the functions may be located at any physical location, including being distributed such that a part of the functions may be realized at a different physical location(s). Furthermore, the term &#x201c;or&#x201d; before the term &#x201c;at least one&#x201d; means a separate enumerating, and for example, &#x201c;at least one of A, B or C&#x201d; means (1) A, B or C, (2) AB, AC or BC, or (3) ABC (namely, A and B and C). Additionally, the term &#x201c;example&#x201d; does not mean a preferable example or an example superior to other examples.</p><p id="p-0109" num="0108">Various modifications, replacements or combinations may be made without departing from the scope of the present disclosure by persons skilled in the art. Furthermore, the scope of the present specification and the claims are not limited to the above processing, machine, manufacture, composition of events, means, method and operation. The processing, machine, manufacture, composition of events, means, method and operation with a similar function or a similar result may also be applied to the present disclosure. Therefore, the scope of the appended claims include such processing, machine, manufacture, composition of events, means, method and operation.</p><p id="p-0110" num="0109">The embodiments have been described above so that persons skilled in the art can implement the present disclosure. Various modifications to these embodiments will be apparent to persons skilled in the art, and the general principles defined herein may be applied to other aspects without departing from the scope of the present disclosure. Thus, the present disclosure is not intended to be limited to the above described embodiments, but rather is the broadest scope consistent with the principles and novel features of the present disclosure.</p><p id="p-0111" num="0110">The foregoing has been described for purposes of illustration and understanding. The above description is not intended to limit the embodiments of the present disclosure. While several embodiments and examples have been described above, variations, modifications, changes, additions, and combinations can be performed by persons skilled in the art.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method for determining a connection relation of subspaces, the method comprising:<claim-text>obtaining a plurality of sets of panoramic images respectively corresponding to a plurality of sets of the subspaces in a three-dimensional space, each set of the subspaces being composed of two adjacent subspaces in the three-dimensional space, and each set of the panoramic images including two first panoramic images that respectively photographed in the two adjacent subspaces of the respective sets of the subspaces, and a second panoramic image photographed at a connection opening that connects the two adjacent subspaces;</claim-text><claim-text>determining, based on positions of the connection openings in the respective second panoramic images, and orientations of a camera when photographing the respective second panoramic images, orientations of the respective connection openings;</claim-text><claim-text>obtaining correspondence relations between the two first panoramic images in the respective sets of the panoramic images and parts of the second panoramic images in the respective sets of panoramic images;</claim-text><claim-text>determining, based on the correspondence relations, relative positions of the two adjacent subspaces in the respective sets of the subspaces;</claim-text><claim-text>recognizing the first panoramic images in the sets of the panoramic images that correspond to the same subspace;</claim-text><claim-text>determining, based on the same subspace, the connection relation between the respective sets of the subspaces; and</claim-text><claim-text>determining, based on the determined connection relation between the sets of the subspaces, the orientations of the respective connection openings, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces, the connection relation of the subspaces in the three-dimensional space.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method for determining a connection relation of subspaces as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>,<claim-text>wherein the first panoramic images and the second panoramic images of the sets of the subspaces are generated in a predetermined photographing order, and</claim-text><claim-text>wherein the sets of panoramic images are obtained by grouping the first panoramic images and the second panoramic images of the sets of the subspaces in the predetermined photographing order.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method for determining a connection relation of subspaces as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>,<claim-text>wherein determining the orientations of the respective connection openings includes<claim-text>determining, based on sensor data of the camera when photographing the respective second panoramic images, orientations of the camera when photographing the respective second panoramic images;</claim-text><claim-text>detecting the positions of the connection openings in the respective second panoramic images; and</claim-text><claim-text>determining, based on the detected positions of the connection openings in the respective second panoramic images, and the orientations of the camera, the orientations of the respective connection openings.</claim-text></claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method for determining a connection relation of subspaces as claimed in <claim-ref idref="CLM-00003">claim 3</claim-ref>,<claim-text>wherein determining the orientations of the respective connection openings includes<claim-text>determining, based on differences between the positions of the connection openings in the respective second panoramic images and positions of respective central image columns, and the orientations of the camera, the orientations of the respective connection openings.</claim-text></claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method for determining a connection relation of subspaces as claimed in <claim-ref idref="CLM-00003">claim 3</claim-ref>,<claim-text>wherein obtaining the correspondence relations between the two first panoramic images and the parts of the second panoramic images includes<claim-text>dividing, based on the detected positions of the connection openings in the respective second panoramic images in the respective sets of panoramic images, the second panoramic images into two respective sub-images; and</claim-text><claim-text>comparing similarities between the two first panoramic images and the two respective sub-images in the respective sets of panoramic images to obtain the correspondence relations.</claim-text></claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method for determining a connection relation of subspaces as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>,<claim-text>wherein recognizing the first panoramic images includes<claim-text>comparing similarities between the first panoramic images in a set of panoramic images and the first panoramic images in another set of panoramic images to recognize the first panoramic images in the sets of the panoramic images that correspond to the same subspace.</claim-text></claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method for determining a connection relation of subspaces as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, the method further comprising:<claim-text>generating, based on the determined connection relation of the subspaces in the three-dimensional space, a two-dimensional layout image of the three-dimensional space.</claim-text></claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. An apparatus for determining a connection relation of subspaces, the apparatus comprising:<claim-text>a memory storing computer-executable instructions; and</claim-text><claim-text>one or more processors configured to execute the computer-executable instructions such that the one or more processors are configured to<claim-text>obtain a plurality of sets of panoramic images respectively corresponding to a plurality of sets of the subspaces in a three-dimensional space, each set of the subspaces being composed of two adjacent subspaces in the three-dimensional space, and each set of the panoramic images including two first panoramic images that respectively photographed in the two adjacent subspaces of the respective sets of the subspaces, and a second panoramic image photographed at a connection opening that connects the two adjacent subspaces;</claim-text><claim-text>determine, based on positions of the connection openings in the respective second panoramic images, and orientations of a camera when photographing the respective second panoramic images, orientations of the respective connection openings;</claim-text><claim-text>obtain correspondence relations between the two first panoramic images in the respective sets of the panoramic images and parts of the second panoramic images in the respective sets of panoramic images;</claim-text><claim-text>determine, based on the correspondence relations, relative positions of the two adjacent subspaces in the respective sets of the subspaces;</claim-text><claim-text>recognize the first panoramic images in the sets of the panoramic images that correspond to the same subspace;</claim-text><claim-text>determine, based on the same subspace, the connection relation between the respective sets of the subspaces; and</claim-text><claim-text>determine, based on the determined connection relation between the sets of the subspaces, the orientations of the respective connection openings, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces, the connection relation of the subspaces in the three-dimensional space.</claim-text></claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The apparatus for determining a connection relation of subspaces as claimed in <claim-ref idref="CLM-00008">claim 8</claim-ref>,<claim-text>wherein the first panoramic images and the second panoramic images of the sets of the subspaces are generated in a predetermined photographing order, and</claim-text><claim-text>wherein the sets of panoramic images are obtained by grouping the first panoramic images and the second panoramic images of the sets of the subspaces in the predetermined photographing order.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The apparatus for determining a connection relation of subspaces as claimed in claim <claim-ref idref="CLM-00008">8</claim-ref>,<claim-text>wherein the one or more processors are configured to<claim-text>determine, based on sensor data of the camera when photographing the respective second panoramic images, orientations of the camera when photographing the respective second panoramic images;</claim-text><claim-text>detect the positions of the connection openings in the respective second panoramic images; and</claim-text><claim-text>determine, based on the detected positions of the connection openings in the respective second panoramic images, and the orientations of the camera, the orientations of the respective connection openings.</claim-text></claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The apparatus for determining a connection relation of subspaces as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>,<claim-text>wherein the one or more processors are configured to<claim-text>determine, based on differences between the positions of the connection openings in the respective second panoramic images and positions of respective central image columns, and the orientations of the camera, the orientations of the respective connection openings.</claim-text></claim-text></claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The apparatus for determining a connection relation of subspaces as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>,<claim-text>wherein the one or more processors are configured to<claim-text>divide, based on the detected positions of the connection openings in the respective second panoramic images in the respective sets of panoramic images, the second panoramic images into two respective sub-images; and</claim-text><claim-text>compare similarities between the two first panoramic images and the two respective sub-images in the respective sets of panoramic images to obtain the correspondence relations.</claim-text></claim-text></claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The apparatus for determining a connection relation of subspaces as claimed in <claim-ref idref="CLM-00008">claim 8</claim-ref>,<claim-text>wherein the one or more processors are configured to<claim-text>compare similarities between the first panoramic images in a set of panoramic images and the first panoramic images in another set of panoramic images to recognize the first panoramic images in the sets of the panoramic images that correspond to the same subspace.</claim-text></claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The apparatus for determining a connection relation of subspaces as claimed in <claim-ref idref="CLM-00008">claim 8</claim-ref>,<claim-text>wherein the one or more processors are further configured to<claim-text>generate, based on the determined connection relation of the subspaces in the three-dimensional space, a two-dimensional layout image of the three-dimensional space.</claim-text></claim-text></claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. A non-transitory computer-readable recording medium having computer-executable instructions for execution by one or more processors, wherein, the computer-executable instructions, when executed, cause the one or more processors to carry out a method for determining a connection relation of subspaces, the method comprising:<claim-text>obtaining a plurality of sets of panoramic images respectively corresponding to a plurality of sets of the subspaces in a three-dimensional space, each set of the subspaces being composed of two adjacent subspaces in the three-dimensional space, and each set of the panoramic images including two first panoramic images that respectively photographed in the two adjacent subspaces of the respective sets of the subspaces, and a second panoramic image photographed at a connection opening that connects the two adjacent subspaces;</claim-text><claim-text>determining, based on positions of the connection openings in the respective second panoramic images, and orientations of a camera when photographing the respective second panoramic images, orientations of the respective connection openings;</claim-text><claim-text>obtaining correspondence relations between the two first panoramic images in the respective sets of the panoramic images and parts of the second panoramic images in the respective sets of panoramic images;</claim-text><claim-text>determining, based on the correspondence relations, relative positions of the two adjacent subspaces in the respective sets of the subspaces;</claim-text><claim-text>recognizing the first panoramic images in the sets of the panoramic images that correspond to the same subspace;</claim-text><claim-text>determining, based on the same subspace, the connection relation between the respective sets of the subspaces; and</claim-text><claim-text>determining, based on the determined connection relation between the sets of the subspaces, the orientations of the respective connection openings, and the relative positions of the two adjacent subspaces in the respective sets of the subspaces, the connection relation of the subspaces in the three-dimensional space.</claim-text></claim-text></claim></claims></us-patent-application>