<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006590A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006590</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17574581</doc-number><date>20220113</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>JP</country><doc-number>PCT/JP2019/028261</doc-number><date>20190718</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>P</subclass><main-group>23</main-group><subgroup>14</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>23</main-group><subgroup>14</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc></classifications-cpc><invention-title id="d2e61">EXTERNAL FORCE ESTIMATION DURING MOTOR CONTROL</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>PCT/JP2020/014290</doc-number><date>20200327</date></document-id><parent-status>PENDING</parent-status></parent-doc><child-doc><document-id><country>US</country><doc-number>17574581</doc-number></document-id></child-doc></relation></continuation><us-provisional-application><document-id><country>US</country><doc-number>62940912</doc-number><date>20191127</date></document-id></us-provisional-application></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>KABUSHIKI KAISHA YASKAWA DENKI</orgname><address><city>Kitakyushu-shi</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>SHIMAMOTO</last-name><first-name>Keita</first-name><address><city>Fukuoka</city><country>JP</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>YOKOYA</last-name><first-name>Tsuyoshi</first-name><address><city>Fukuoka</city><country>JP</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A control system may include: a motor configured to power a driven object; and circuitry configured to: generate a first driving force command to drive the motor during a first control; estimate a first force acting on the motor during the first control based, at least in part, on the first driving force command; generate a second driving force command to drive the motor during a second control after the first control; estimate a second force acting on the motor during the second control based, at least in part, on the second driving force command; and estimate an external force acting on the driven object during the second control based, at least in part, on a comparison between the first force and the second force.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="78.74mm" wi="144.19mm" file="US20230006590A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="207.60mm" wi="144.95mm" orientation="landscape" file="US20230006590A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="146.81mm" wi="117.86mm" orientation="landscape" file="US20230006590A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="176.70mm" wi="94.23mm" orientation="landscape" file="US20230006590A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="194.65mm" wi="119.89mm" orientation="landscape" file="US20230006590A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="149.52mm" wi="131.15mm" orientation="landscape" file="US20230006590A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="201.68mm" wi="109.14mm" orientation="landscape" file="US20230006590A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="230.63mm" wi="156.89mm" file="US20230006590A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="175.85mm" wi="159.43mm" file="US20230006590A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="193.80mm" wi="159.43mm" file="US20230006590A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="193.80mm" wi="159.43mm" file="US20230006590A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00011" num="00011"><img id="EMI-D00011" he="174.67mm" wi="121.33mm" orientation="landscape" file="US20230006590A1-20230105-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading><p id="p-0002" num="0001">This application is a continuation application of PCT Application No. PCT/JP2020/014290 filed on Mar. 27, 2020, which in turn claims the benefit of priority to both PCT Application No. PCT/JP2019/028261 filed on Jul. 18, 2019 and U.S. Provisional Application No. 62/940,912 filed on Nov. 27, 2019, the entire contents of which are incorporated herein by reference.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">BACKGROUND</heading><heading id="h-0003" level="1">Field</heading><p id="p-0003" num="0002">Japanese Patent Unexamined Publication No. 2012-11403 discloses a robot system in which an estimated disturbance torque is obtained by a disturbance observer from a torque command to a motor for each axis of a robot and a speed detection value of each axis, and after high-pass filter processing is performed on the estimated disturbance torque, coordinate transformation is performed to estimate an external force.</p><heading id="h-0004" level="1">SUMMARY</heading><p id="p-0004" num="0003">Disclosed herein is an example robot system. The control system may include: a motor configured to power a driven object; and circuitry configured to: generate a first driving force command to drive the motor during a first control; estimate a first force acting on the motor during the first control based, at least in part, on the first driving force command; generate a second driving force command to drive the motor during a second control after the first control; estimate a second force acting on the motor during the second control based, at least in part, on the second driving force command; and estimate an external force acting on the driven object during the second control based, at least in part, on a comparison between the first force and the second force.</p><p id="p-0005" num="0004">Additionally, an example control method is disclosed herein. The control method may include: generating a first driving force command to drive a motor during a first control, wherein the motor is configured to power a driven object; estimating a first force acting on the motor during the first control based, at least in part on the first driving force command; generating a second driving force command to drive the motor during a second control; estimating a second force acting on the motor during the second control based, at least in part on the second driving force command; and estimating an external force acting on the driven object based, at least in part, on a difference between the first force and the second force.</p><p id="p-0006" num="0005">Additionally, an example non-transitory memory device is disclosed herein. The non-transitory memory device may have instructions stored thereon that, in response to execution by a processing device, cause the processing device to perform operations including: generating a first driving force command to drive a motor during a first control, wherein the motor is configured to power a driven object; estimating a first force acting on the motor during the first control based, at least in part on the first driving force command; generating a second driving force command to drive the motor during a second control; estimating a second force acting on the motor during the second control based, at least in part on the second driving force command; and estimating an external force acting on the driven object based, at least in part, on a difference between the first force and the second force.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a schematic diagram illustrating a configuration of a control system.</p><p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a table illustrating a profile.</p><p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a block diagram illustrating a modification of a control device.</p><p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a block diagram illustrating another modification of the control device.</p><p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a block diagram illustrating still another modification of the control device.</p><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a diagram illustrating a hardware configuration of the control system.</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a flowchart illustrating a generation procedure of the profile.</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a flowchart illustrating a motor driving procedure.</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a flowchart illustrating a modification of the motor driving procedure.</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a flowchart illustrating another modification of the motor driving procedure.</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>11</b></figref> is a diagram illustrating a schematic configuration of a robot.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0006" level="1">DETAILED DESCRIPTION</heading><p id="p-0018" num="0017">In the following description, with reference to the drawings, the same reference numbers are assigned to the same components or to similar components having the same function, and overlapping description is omitted.</p><p id="p-0019" num="0018">Control System A control system <b>1</b> may be a system for controlling a driven object to perform a desired operation by using a motor. The shape, the structure, and the size of the driven object and the number and the size of the motors are not particularly limited. Hereinafter, a case where one motor exists and the driven object is one rigid body will be described.</p><p id="p-0020" num="0019">As illustrated in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the control system <b>1</b> includes a motor <b>2</b>, a sensor <b>3</b>, and a control device <b>100</b>. The motor <b>2</b> drives a driven object <b>4</b>. The motor <b>2</b> may be a rotary motor that rotationally drives the driven object <b>4</b> or a linear motor that displaces the driven object <b>4</b> along a straight line. The motor <b>2</b> may be a synchronous motor or an induction motor. The motor <b>2</b> may be a permanent-magnet synchronous motor such as a surface permanent magnet (SPM) motor or an interior permanent magnet (IPM) motor, or may be a synchronous motor having no permanent magnets such as a synchronous-reluctance motor.</p><p id="p-0021" num="0020">The sensor <b>3</b> detects a response value of the motor <b>2</b> corresponding to the control command. Examples of the response value may include the position or speed of the motor <b>2</b>. If the motor <b>2</b> is a rotary type, the rotation angle of the output shaft of the motor <b>2</b> corresponds to the &#x201c;position&#x201d;, and the rotation speed of the output shaft of the motor <b>2</b> corresponds to the &#x201c;speed&#x201d;. Examples of the sensor <b>3</b> may include a rotary encoder that outputs a pulse signal having a frequency proportional to the operating speed of the motor <b>2</b>. By using the rotary encoder, both the position and the speed of the motor <b>2</b> can be acquired.</p><p id="p-0022" num="0021">The control device <b>100</b> is configured to control the motor <b>2</b> to control the driven object <b>4</b> to perform a desired operation. The control device <b>100</b> is further configured to estimate an external force acting on the driven object <b>4</b> by a sensorless method without using the force sensor. As described in the examples later, the control device <b>100</b> may control the motor <b>2</b> based on the estimated external force, may detect contact between the driven object <b>4</b> and the surrounding object based on the estimated external force, or may estimate the state of the surrounding object based on the estimated external force.</p><p id="p-0023" num="0022">An external force (a first force or a second force) acting on the motor <b>2</b> can be estimated based on the driving force command (a first driving force command or a second driving force command) by the control device <b>100</b>. For example, if the driving force generated by the motor <b>2</b> sufficiently follows the driving force command, it can be estimated that the external force substantially matching the driving force command is acting on the motor <b>2</b>.</p><p id="p-0024" num="0023">Since the external force acting on the driven object <b>4</b> is also transmitted to the motor <b>2</b>, the external force acting on the motor <b>2</b> includes the external force acting on the driven object <b>4</b>. However, the external force acting on the motor <b>2</b> includes at least an inertia force of the driven object <b>4</b> in addition to the external force acting on the driven object <b>4</b>. Furthermore, the external force acting on the motor <b>2</b> includes components that are difficult to model, such as Coulomb friction, viscous friction, and variations in the shape, the size, and the weight of the driven object <b>4</b>. Accordingly, it is difficult to estimate the external force acting on the driven object <b>4</b> with accuracy based on the external force acting on the motor <b>2</b>. In contrast, the control device <b>100</b> improves the estimation accuracy of the external force acting on the driven object <b>4</b> by a sensorless method.</p><p id="p-0025" num="0024">The control device <b>100</b> is configured to: drive the motor <b>2</b>, estimate a first external force (the first force) acting on the motor <b>2</b> based, at least in part, on a driving force command for driving the motor <b>2</b> (the first driving force command generated to drive the motor <b>2</b> during a first control), store a profile representing a transition of an estimation value of the first external force (a first force profile representing the first force over time during a duration of the first control) in the data storage unit, and estimate a second external force (external force) acting on the driven object <b>4</b> based on the newly estimated first external force (the second force estimated based, at least in part, on the second driving force command generated to drive the motor <b>2</b> during a second control) and the profile stored in the data storage unit when driving the motor <b>2</b> based on a predetermined motion pattern. For example, the control device <b>100</b> includes a motion pattern storage unit <b>111</b>, a control unit <b>112</b>, a first estimation unit <b>113</b>, a profile generation unit <b>114</b>, a data storage unit <b>115</b>, and a second estimation unit <b>116</b> as functional configuration (hereinafter referred to as &#x201c;functional block&#x201d;).</p><p id="p-0026" num="0025">The motion pattern storage unit <b>111</b> is configured to store at least one motion pattern (common motion pattern). The motion pattern represents the transition (temporal change) of the motion target value of the motor <b>2</b>. For example, the motion pattern includes at least one motion command. The motion command defines at least the target position of the driven object <b>4</b>. The motion command may include the target speed of the driven object <b>4</b> instead of the target position of the driven object <b>4</b>, or may include both the target position and the target speed of the driven object <b>4</b>. The motion pattern may include a plurality of motion commands in time series. The motion pattern storage unit <b>111</b> may store a plurality of motion patterns. Each of the plurality of motion patterns may be a unit program for configuring a motion program for controlling the driven object <b>4</b> to perform a series of motions.</p><p id="p-0027" num="0026">The control unit <b>112</b> is configured to drive the motor <b>2</b> (perform the first control and the second control). For example, the control unit <b>112</b> generates driving electric power for operating the driven object <b>4</b> based on the motion pattern stored in the motion pattern storage unit <b>111</b>, and supplies the driving electric power to the motor <b>2</b>. For example, the control unit <b>112</b> acquires information on the current position and the current speed of the driven object <b>4</b> based on the detection value of the sensor <b>3</b>, and generates the driving electric power so that the current position and the current speed follow the target position and the target speed, respectively.</p><p id="p-0028" num="0027">For example, the control unit <b>112</b> executes a proportional operation, a proportional-integral operation, or a proportional-integral-differential operation on the deviation between the target position and the current position (hereinafter referred to as &#x201c;positional deviation&#x201d;) to calculate a target speed for reducing the position deviation. The control unit <b>112</b> further executes a proportional operation, a proportional-integral operation, or a proportional-integral-differential operation on the deviation between the target speed and the current speed (hereinafter referred to as &#x201c;speed deviation&#x201d;) to calculate a driving force command for reducing the speed deviation.</p><p id="p-0029" num="0028">If the motor <b>2</b> is a rotary type, the torque of the output shaft of the motor <b>2</b> corresponds to the driving force. The control unit <b>112</b> calculates a current command for controlling the driving force of the motor <b>2</b> to follow the driving force command, and generates the driving electric power so as to supply the motor <b>2</b> with driving current corresponding to the current command.</p><p id="p-0030" num="0029">The first estimation unit <b>113</b> estimates the first external force acting on the motor <b>2</b> (the first force or the second force) based, at least in part, on the driving force command in the control unit <b>112</b> (the first driving force command or the second driving force command). For example, the first estimation unit <b>113</b> may output a power matching the driving force command as the estimation result of the first external force. If the drive current matches the current command, the drive current and the driving force command are correlated. In such a case, being based on the detected value of the driving current and being based on the current command are substantially synonymous with being based on the driving force command.</p><p id="p-0031" num="0030">The first estimation unit <b>113</b> may be a disturbance observer configured to estimate the first external force based, at least in part, on the driving force command and a response value of the motor <b>2</b>. For example, the first estimation unit <b>113</b> may further be configured to: estimate a first disturbance acting on the motor <b>2</b> as the first force based, at least in part, on the first driving force command and a motion of the motor <b>2</b> responding to the first driving force command; and estimate a second disturbance acting on the motor <b>2</b> as the second force based, at least in part, on the second driving force command and a motion of the motor <b>2</b> responding to the second driving force command. For example, the first estimation unit <b>113</b> may estimate an inertia force acting on the motor <b>2</b> from the driven object <b>4</b> based on the response value (for example, current speed and current position) of the motor <b>2</b> and a known rigid body model of the driven object <b>4</b>, and output a value obtained by subtracting the inertia force from the driving force command as the estimation result of the first external force.</p><p id="p-0032" num="0031">The profile generation unit <b>114</b> is configured to generate the profile representing a transition of the estimation value estimated by the first estimation unit <b>113</b>. For example, the profile generation unit <b>114</b> repeatedly acquires an estimation value of the first external force from the first estimation unit <b>113</b> in a period in which the control unit <b>112</b> drives the motor <b>2</b> based on the motion pattern stored in the motion pattern storage unit <b>111</b>, and generates the profile representing a temporal change of the estimation value of the first external force in the period. The profile thus generated represents the transition of the estimation value estimated by the first estimation unit <b>113</b> when the control unit <b>112</b> drove the motor <b>2</b> based on the motion pattern in the past.</p><p id="p-0033" num="0032">The profile generation unit <b>114</b> may generate the profile in a state where the external force is not applied to the driven object <b>4</b>. The profile thus generated represents the transition of the estimation value estimated by the first estimation unit <b>113</b> in a state where the external force is not acting on the driven object <b>4</b>.</p><p id="p-0034" num="0033">If the motion pattern storage unit <b>111</b> stores a plurality of motion patterns, the profile generation unit <b>114</b> may generate the profile for each of the plurality of motion patterns. Accordingly, a plurality of profiles respectively corresponding to the plurality of motion patterns are generated. Each of the plurality of profiles represents a transition of an estimation value estimated by the first estimation unit <b>113</b> when the control unit <b>112</b> drives the motor <b>2</b> in the past based on the corresponding motion pattern.</p><p id="p-0035" num="0034">The data storage unit <b>115</b> is configured to store the profile generated by the profile generation unit <b>114</b>. The data storage unit <b>115</b> may store the above-described plurality of profiles. The data storage unit <b>115</b> may store the estimation value of the first external force and the motion pattern in association with each other.</p><p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a table illustrating a profile. The profile includes a plurality of time-series records. Each record includes a driving time, a position, a speed, and an estimation value of the first external force. The driving time is elapsed time from the start time of the motion of the motor <b>2</b> based on the motion pattern to the time when the first external force is estimated (driving time of the motor <b>2</b> based on motion pattern). The position is the position of the motor <b>2</b> when the first external force is estimated. The position may be a target position or the position detected by the sensor <b>3</b>. The speed is the speed of the motor <b>2</b> when the first external force is estimated. The speed may be a target speed or the speed detected by the sensor <b>3</b>. The data storage unit <b>115</b> may store, as the profile, a function representing the relationship between the elapsed time and the position, a function representing the relationship between the elapsed time and the speed, a function representing the relationship between the elapsed time and the estimation value of the first external force, or the like, instead of discrete values as illustrated in <figref idref="DRAWINGS">FIG. <b>2</b></figref>.</p><p id="p-0037" num="0036">As described above, the motion pattern may be a unit program for configuring a motion program. In this case, the profile corresponding to the motion program can be easily generated by connecting the profile corresponding to the plurality of motion patterns in accordance with the execution order of the plurality of motion patterns in the motion program, so that the profile corresponding to the motion program can be easily generated.</p><p id="p-0038" num="0037">The second estimation unit <b>116</b> is configured to estimate the second external force acting on the driven object <b>4</b> based on the estimation value newly estimated by the first estimation unit <b>113</b> (hereinafter referred to as &#x201c;new estimation value&#x201d;) and the profile stored in the data storage unit <b>115</b> when the control unit <b>112</b> drives the motor <b>2</b> based on the motion pattern. For example, the second estimation unit <b>116</b> extracts an estimation value corresponding to the new estimation value (hereinafter referred to as &#x201c;estimation value of comparison target&#x201d;) from the profile, and estimates the second external force (external force) based on the difference between the new estimation value (the second force) and the estimation value of comparison target (a base value). For example, the second estimation unit <b>116</b> outputs a value obtained by subtracting the estimation value of comparison target from the new estimation value as the estimation result of the second external force.</p><p id="p-0039" num="0038">For example, the second estimation unit <b>116</b> may extract the estimation value of comparison target from the profile based on the driving time according to the motion pattern (elapsed time <b>9</b> from start of motion of the motor <b>2</b> based on motion pattern). For example, the second estimation unit <b>116</b> extracts the estimation value corresponding to the driving time at the time when the first estimation unit <b>113</b> outputs the new estimation value from the profile.</p><p id="p-0040" num="0039">The second estimation unit <b>116</b> may extract an estimation value corresponding to the newly estimated estimation value from the profile based on the response value of the motor <b>2</b>. For example, the second estimation unit <b>116</b> may extract an estimation value corresponding to the position of the motor <b>2</b> at the time when the first estimation unit <b>113</b> outputs a new estimation value from the profile. The second estimation unit <b>116</b> may extract an estimation value corresponding to the speed of the motor <b>2</b> at the time when the first estimation unit <b>113</b> outputs a new estimation value from the profile. The second estimation unit <b>116</b> may extract an estimation value corresponding to the position and the speed of the motor <b>2</b> at the time when the first estimation unit <b>113</b> outputs a new estimation value from the profile.</p><p id="p-0041" num="0040">If the data storage unit <b>115</b> stores the plurality of profiles, the control device <b>100</b> may further include a data selection unit <b>121</b> as illustrated in <figref idref="DRAWINGS">FIG. <b>3</b></figref>. The data selection unit <b>121</b> is configured to select a profile corresponding to the motion pattern from the plurality of profiles of the data storage unit <b>115</b> when or before the control unit <b>112</b> starts driving the motor <b>2</b> based on the motion pattern. In this case, the second estimation unit <b>116</b> estimates the second external force based on the profile selected by the data selection unit <b>121</b>.</p><p id="p-0042" num="0041">As illustrated in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the control device <b>100</b> may further include a data update unit <b>122</b>. The data update unit <b>122</b> may be configured to update the profile (the first force profile) stored in the data storage unit <b>115</b>. Updating includes both overwriting the existing profile and writing a new profile while leaving the existing profile as an old version.</p><p id="p-0043" num="0042">The data update unit <b>122</b> may determine whether an update of the profile is required based on the profile stored in the data storage unit <b>115</b> and the estimation value newly estimated by the first estimation unit <b>113</b> (the second force), and update the profile based on the estimation value newly estimated by the first estimation unit <b>113</b> if it is determined that the profile needs to be updated.</p><p id="p-0044" num="0043">The data update unit <b>122</b> may update the first force profile based, at least in part, on a comparison between a second force profile representing the second force over time during a duration of the second control, and the first force profile. For example, the control device <b>100</b> further includes a log data storage unit <b>129</b>. The log data storage unit <b>129</b> is configured to store log data indicating a transition of a relationship between the estimation value newly estimated by the first estimation unit <b>113</b> and the profile. For example, the log data storage unit <b>129</b> stores the transition of the second external force estimated by the second estimation unit <b>116</b> in a period in which the control unit <b>112</b> drives the motor <b>2</b> based on the motion pattern.</p><p id="p-0045" num="0044">The log data storage unit <b>129</b> may store the estimation value of the second external force and the motion pattern in association with each other. For example, the log data storage unit <b>129</b> may store a record in which the position and the speed of the motor <b>2</b> are associated with the estimation value of the second external force in time series. The position and the speed may be a target position and a target speed. The position and the speed may be the position and the speed detected by the sensor <b>3</b>.</p><p id="p-0046" num="0045">The data update unit <b>122</b> is configured to determine whether the update of the profile is required based on the log stored in the log data storage unit <b>129</b>. For example, the data update unit <b>122</b> determines whether to update the profile based on whether the log satisfies a predetermined determination criterion (hereinafter referred to as &#x201c;update determination criterion&#x201d;).</p><p id="p-0047" num="0046">The profile may be updated when the above-described components that are difficult to model (Coulomb friction, viscous friction, variations in the shape, the size, and the weight of the driven object <b>4</b>, and the like) change over time. Therefore, the update determination criterion is set in advance based on a characteristic that appears in the log data due to a change in the component that is difficult to model.</p><p id="p-0048" num="0047">For example, if the Coulomb friction increases with time, it is considered that the log data uniformly increases over substantially the entire range from the start of recording to the completion of recording. Accordingly, an example of the update determination criterion is that the value of the estimation value of the second external force exceeds a predetermined threshold over the entire predetermined range in the log data.</p><p id="p-0049" num="0048">If the viscous friction increases with time, it is considered that a correlation level between the speed and the second external force increases in the log data. Accordingly, another example of the update determination criterion is that the correlation level between the speed and the second external force in the log data exceeds a predetermined threshold.</p><p id="p-0050" num="0049">If a bearing unit is deteriorated or damaged, it is considered that a periodic change appears in the second external force in the log data. Accordingly, still another example of the update determination criterion is that the magnitude of a frequency component exceeds a predetermined threshold in the frequency analysis result of the second external force of the log data.</p><p id="p-0051" num="0050">Further, if there is a predetermined posture in which the driven object <b>4</b> can be assumed to be apparently unloaded, it may be an update determination criterion that the second external force exceeds a predetermined threshold when the driven target is in the predetermined posture.</p><p id="p-0052" num="0051">If it is determined that the update is required, the data update unit <b>122</b> causes the profile generation unit <b>114</b> to regenerate the profile and update the profile of the data storage unit <b>115</b> with the regenerated profile. As shown as an example of the Coulomb friction, when the log data rises uniformly over the entire predetermined range, the data update unit <b>122</b> may add uniformly rising components over the entire profile stored in the data storage unit <b>115</b>.</p><p id="p-0053" num="0052">The control unit <b>112</b> may drive the motor <b>2</b> based on the motion pattern stored in the motion pattern storage unit <b>111</b> and the second external force estimated by the second estimation unit <b>116</b>. For example, the control unit <b>112</b> may calculate a compensation value for external force tracking based on the second external force estimated by the second estimation unit <b>116</b>, and perform impedance control for compensating the target position and the target speed based on the motion pattern in the acting direction of the second external force using the compensation value. The control unit <b>112</b> may calculate the compensation value based on a model generated in advance by machine-learning so as to represent the relationship between the second external force and the compensation value and the second external force newly estimated by the second estimation unit <b>116</b>.</p><p id="p-0054" num="0053">The control unit <b>112</b> may further execute feed-forward control of calculating a feed-forward compensation value based on the first external force estimated by the first estimation unit <b>113</b> and adding the feed-forward compensation value to the driving force command. In this case, the first estimation unit <b>113</b> may change an estimation condition for the first estimation value (for example, a filter condition for the driving force command) between the estimation of the first external force for calculating the feed-forward compensation value and the estimation of the first external force for estimating the second external force.</p><p id="p-0055" num="0054">As illustrated in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, the control device <b>100</b> may further comprise a contact detection unit <b>124</b>. For example, the contact detection unit <b>124</b> is configured to detect contact between the driven object <b>4</b> and the surrounding object based, at least in part, on the second external force estimated by the second estimation unit <b>116</b>. For example, the contact detection unit <b>124</b> may detect the contact between the driven object <b>4</b> and the surrounding object based on the increase in the second external force estimated by the second estimation unit <b>116</b>.</p><p id="p-0056" num="0055">The control device <b>100</b> may be further configured to classify the driven result of the motor <b>2</b> (a result of the second control) based on the motion pattern into any of two or more classes based, at least in part, on the estimated second external force. For example, the control device <b>100</b> further includes a classification criterion storage unit <b>125</b> and a classification unit <b>126</b>.</p><p id="p-0057" num="0056">The classification criterion storage unit <b>125</b> is configured to store a criterion for classifying the driven result of the motor <b>2</b> into any of two or more classes. Examples of the two or more classes may include the quality of the operation result with respect to a predetermined reference, the quality of the workpiece after the driven object <b>4</b> directly or indirectly acts thereon, and the state of the workpiece after the driven object <b>4</b> directly or indirectly acts thereon.</p><p id="p-0058" num="0057">For example, the classification unit <b>126</b> may classify the motion of the driven object <b>4</b> as &#x201c;good&#x201d; or &#x201c;defective&#x201d;. For example, the classification criterion storage unit <b>125</b> stores an upper limit profile indicating the upper limit of the transition of the second external force when the motion of the driven object <b>4</b> is good and a lower limit profile indicating the lower limit of the transition of the second external force when the motion of the driven object <b>4</b> is good. The classification unit <b>126</b> classifies the motion of the driven object <b>4</b> as &#x201c;good&#x201d; when the estimation value of the second external force is located between the upper limit profile and the lower limit profile, and classifies the motion of the driven object <b>4</b> as &#x201c;defective&#x201d; when the estimation value of the second external force is located outside between the upper limit profile and the lower limit profile.</p><p id="p-0059" num="0058">The classification unit <b>126</b> may classify the state of the workpiece on which the driven object <b>4</b> directly or indirectly acts as &#x201c;good&#x201d; or &#x201c;defective&#x201d;. For example, the classification criterion storage unit <b>125</b> stores an upper limit profile indicating an upper limit of the transition of the second external force when the workpiece is good and a lower limit profile indicating a lower limit of the transition of the second external force when the workpiece is good. The classification unit <b>126</b> classifies the state of the workpiece as &#x201c;good&#x201d; when the estimation value of the second external force is located between the upper limit profile and the lower limit profile, and classifies the state of the workpiece as &#x201c;defective&#x201d; when the estimation value of the second external force is located outside between the upper limit profile and the lower limit profile.</p><p id="p-0060" num="0059">The classification unit <b>126</b> may classify the state of the workpiece on which the driven object <b>4</b> directly or indirectly acts into three or more sub-classes. For example, the classification unit <b>126</b> may classify the dimensions of each part of the workpiece into three or more classes. For example, the classification criterion storage unit <b>125</b> stores a table, a function, or the like representing the relationship between the second external force and the dimension of the workpiece. The classification unit <b>126</b> calculates the dimensions of each part of the workpiece based on the table or function and the estimation value of the second external force.</p><p id="p-0061" num="0060">The classification unit <b>126</b> may classify the driven result of the motor <b>2</b> based on the second external force estimated by the second estimation unit and the motion pattern on which the control unit <b>112</b> is based when the second external force is estimated. In this case, the classification criterion storage unit <b>125</b> may store the classification criterion for each motion pattern, and the classification unit <b>126</b> may select the classification criterion corresponding to the motion pattern on which the control unit <b>112</b> is based.</p><p id="p-0062" num="0061">The classification criterion storage unit <b>125</b> may store a model generated in advance by machine-learning so as to represent the relationship between the second external force and the driven result of the motor <b>2</b>. In this case, the classification unit <b>126</b> classifies the driven result based on the transition of the estimation value of the second external force (for example, the transition stored in the log data storage unit <b>129</b>) and the model. The model may be generated to represent a relationship between a combination of the second external force and the motion pattern of the motor <b>2</b> when the second external force is generated and the driven result of the motor <b>2</b>.</p><p id="p-0063" num="0062">As an example, the classification criterion storage unit <b>125</b> stores a model generated so as to represent the relationship between the combination of the transition of the second external force and the motion pattern of the motor <b>2</b> when the transition of the second external force occurs and the state of the workpiece. The classification unit <b>126</b> classifies the state of the workpiece into three or more classes based on the transition of the estimation value of the second external force, the motion pattern on which the control unit <b>112</b> is based when the transition of the estimation value occurs, and the model.</p><p id="p-0064" num="0063">The second estimation unit <b>116</b> estimates the second external force based on the first external force acting on the motor <b>2</b>. Accordingly, the driven result of the motor <b>2</b> can be classified into two or more classes in consideration of a situation change occurring inside the control system <b>1</b> due to a failure or a slight variation of at least one of the driven object <b>4</b> and the motor <b>2</b>. The degradation of the driven object <b>4</b> may be estimated based on the estimation result of the second external force. For example, as illustrated in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the control device <b>100</b> may further include a deterioration estimation unit <b>127</b> and a deterioration notification unit <b>128</b>.</p><p id="p-0065" num="0064">The deterioration estimation unit <b>127</b> is configured to estimate deterioration of the driven object <b>4</b> based, at least in part, on the second external force estimated by the second estimation unit <b>116</b>. The deterioration notification unit <b>128</b> is configured to notify the deterioration of the driven object <b>4</b> estimated by the deterioration estimation unit <b>127</b> by transmission of notification data, notification display on display devices, or the like.</p><p id="p-0066" num="0065">The estimation result of the second external force includes additional components caused by temporal changes in the above-described components that are difficult to model (Coulomb friction, viscous friction, variations in the shape, the size, and the weight of the driven object <b>4</b>, and the like). The deterioration estimation unit <b>127</b> estimates deterioration of the driven object <b>4</b> based on the additional components.</p><p id="p-0067" num="0066">For example, when the Coulomb friction increases with time, the log data includes an additional component that increases uniformly over substantially the entire range from the start of recording to the completion of recording. Accordingly, if the value of the estimation value of the second external force exceeds the predetermined threshold value over the entire predetermined range in the log data, the deterioration estimation unit <b>127</b> estimates the deterioration of the driven object <b>4</b> accompanied by the increase of the Coulomb friction.</p><p id="p-0068" num="0067">If the viscous friction increases with time, it is considered that the correlation level between the speed and the second external force increases in the log data. Accordingly, if the correlation level between the speed and the second external force in the log exceeds a predetermined threshold, the deterioration estimation unit <b>127</b> estimates the degradation of the driven object <b>4</b> accompanied by increase in viscous friction.</p><p id="p-0069" num="0068">If the bearing unit is deteriorated or damaged, it is considered that a periodic change appears in the second external force in the log data. Accordingly, the deterioration estimation unit <b>127</b> estimates the deterioration of the bearing unit when a magnitude of one or more frequency components exceed a predetermined threshold in the frequency analysis result of the second external force of the log data.</p><p id="p-0070" num="0069">If there is a predetermined posture in which the driven object <b>4</b> can be assumed to be apparently unloaded, the deterioration estimation unit <b>127</b> may estimate the deterioration of the driven object <b>4</b> when the second external force when the driven object <b>4</b> is in the posture exceeds a predetermined threshold.</p><p id="p-0071" num="0070">The deterioration estimation unit <b>127</b> may estimate the deterioration of the driven object <b>4</b> based on a model generated in advance by machine-learning so as to represent the relationship between the transition of the second external force and the deterioration of the driven object <b>4</b> and the transition of the second external force estimated by the second estimation unit <b>116</b>.</p><p id="p-0072" num="0071"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a block diagram illustrating a hardware configuration of the control device <b>100</b>. As illustrated in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, the control device <b>100</b> includes circuitry <b>190</b>. The circuitry <b>190</b> includes one or more a processor <b>191</b>, a memory <b>192</b>, storage <b>193</b>, an input/output port <b>194</b>, and a driver circuit <b>195</b>. The storage <b>193</b> includes a computer-readable storage medium such as a nonvolatile semiconductor memory. The storage <b>193</b> stores a program for causing the control device <b>100</b> to execute: driving the motor <b>2</b>; estimating the first external force acting on the motor <b>2</b> based, at least in part, on the driving force command for driving the motor <b>2</b>; storing the profile representing the transition of the estimation value of the first external force in the data storage unit; and estimating the second external force acting on the driven object <b>4</b> based on the newly estimated first external force and the profile stored in the data storage unit <b>115</b> when driving the motor <b>2</b> based on the predetermined motion pattern. For example, the storage <b>193</b> stores a program for configuring each functional block described above in the control device <b>100</b>.</p><p id="p-0073" num="0072">The memory <b>192</b> temporarily stores the program loaded from the storage medium of the storage <b>193</b> and the operation result by the processor <b>191</b>. The processor <b>191</b> configures each functional block of the control device <b>100</b> by executing the program in cooperation with the memory <b>192</b>. The input/output port <b>194</b> inputs and outputs electrical signals to and from the sensor <b>3</b> in accordance with instructions from the processor <b>191</b>. The driver circuit <b>195</b> outputs driving electric power to the motor <b>2</b> in accordance with instructions from the processor <b>191</b>.</p><p id="p-0074" num="0073">The control device <b>100</b> may not be limited to one that configures each function by a program. For example, at least a part of the functions of the control device <b>100</b> may be configured by dedicated logic circuitry or an application specific integrated circuit (ASIC) in which the dedicated logic circuitry is integrated.</p><p id="p-0075" num="0074">Control Procedure Hereinafter, a control procedure executed by the control device <b>100</b> will be described as an example of the control method. The control procedure includes: driving the motor <b>2</b>; estimating the first external force acting on the motor <b>2</b> based at least on the driving force command for driving the motor <b>2</b>; storing the profile representing the transition of the estimation value of the first external force in a data storage unit; and estimating the second external force acting on the driven object <b>4</b> based on the newly estimated first external force and the profile stored in the data storage unit when driving the motor <b>2</b> based on the predetermined motion pattern. The control procedure may further include generating the profile. Hereinafter, a generation procedure of the profile and a driving procedure of the motor <b>2</b> based on the generated profile will be described.</p><p id="p-0076" num="0075">Profile Generation Procedure <figref idref="DRAWINGS">FIG. <b>7</b></figref> is a flowchart illustrating a procedure of generating the profile for each motion pattern when the motion pattern storage unit <b>111</b> stores a plurality of motion patterns.</p><p id="p-0077" num="0076">As illustrated in <figref idref="DRAWINGS">FIG. <b>7</b></figref>, the control device <b>100</b> first executes operations S<b>01</b>, S<b>02</b>, S<b>03</b>, S<b>04</b>, S<b>05</b>, S<b>06</b>, and S<b>07</b>. In the operation S<b>01</b>, the profile generation unit <b>114</b> selects one of a plurality of motion patterns of the motion pattern storage unit <b>111</b>. Hereinafter, the selected motion pattern is referred to as &#x201c;target motion pattern&#x201d;. In the operation S<b>02</b>, the control unit <b>112</b> acquires information on the current position and the current speed of the driven object <b>4</b> based on the detection value of the sensor <b>3</b>.</p><p id="p-0078" num="0077">In the operation S<b>03</b>, the control unit <b>112</b> calculates the driving force command based on the target position and the target speed based on the target motion pattern and the current position and the current speed of the driven object <b>4</b>. For example, the control unit <b>112</b> executes a proportional operation, a proportional-integral operation, or a proportional-integral-differential operation on the deviation between the target position and the current position (hereinafter referred to as &#x201c;positional deviation&#x201d;) to calculate a target speed for reducing the position deviation. Thereafter, the control unit <b>112</b> executes a proportional operation, a proportional-integral operation, or a proportional-integral-differential operation on the deviation between the target speed and the current speed (hereinafter referred to as &#x201c;speed deviation&#x201d;) to calculate a driving force command for reducing the speed deviation.</p><p id="p-0079" num="0078">In the operation S<b>04</b>, the control unit <b>112</b> calculates a current command for controlling the driving force of the motor <b>2</b> to follow the driving force command, and generates the driving electric power so as to supply a driving current corresponding to the current command to the motor <b>2</b>. In the operation S<b>05</b>, the first estimation unit <b>113</b> estimates the first external force acting on the motor <b>2</b> based, at least in part, on the driving force command in the control unit <b>112</b>.</p><p id="p-0080" num="0079">In the operation S<b>06</b>, the profile generation unit <b>114</b> adds a record including the first external force estimated by the operation S<b>05</b> to the profile of the target motion pattern. For example, the profile generation unit <b>114</b> adds a record to the storage area of the profile in the motion pattern storage unit <b>111</b>. In the operation S<b>07</b>, the profile generation unit <b>114</b> checks whether the operation of the motor <b>2</b> according to the target motion pattern is completed.</p><p id="p-0081" num="0080">If it is determined in the operation S<b>07</b> that the motion of the motor <b>2</b> according to the target motion pattern is not completed, the control device <b>100</b> returns the process to the operation S<b>02</b>. Thereafter, the addition of the record to the profile corresponding to the target motion pattern is repeated until the operation of the motor <b>2</b> according to the target motion pattern is completed. As a result, the profile representing the transition of the first external force is generated.</p><p id="p-0082" num="0081">If it is determined in the operation S<b>07</b> that the motion of the motor <b>2</b> according to the target motion pattern is completed, the control device <b>100</b> executes a operation S<b>08</b>. In the operation S<b>08</b>, the profile generation unit <b>114</b> checks whether the generation of the profile has been completed for all the motion patterns stored in the motion pattern storage unit <b>111</b>.</p><p id="p-0083" num="0082">If it is determined in the operation S<b>08</b> that there remains a motion pattern for which the generation of the profile is not completed, the control device <b>100</b> executes a operation S<b>09</b>. In the operation S<b>09</b>, the profile generation unit <b>114</b> changes the target motion pattern to another motion pattern for which the profile is not generated. The profile generation unit <b>114</b> then returns the process to the operation S<b>02</b>. Thereafter, the selection of the motion pattern and the generation of the profile are repeated until the profile is generated for all the motion patterns.</p><p id="p-0084" num="0083">If it is determined in the operation S<b>08</b> that the generation of the profile has been completed for all motion patterns, the control device <b>100</b> completes the generation of the profile.</p><p id="p-0085" num="0084">Driving Procedure</p><p id="p-0086" num="0085"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a flowchart illustrating a motor driving procedure. For example, <figref idref="DRAWINGS">FIG. <b>8</b></figref> illustrates a flowchart of an impedance control procedure for changing a target position and a target speed based on the motion pattern based on the estimation result of the second external force.</p><p id="p-0087" num="0086">As illustrated in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, the control device <b>100</b> first executes operations S<b>11</b>, S<b>12</b>, S<b>13</b>, S<b>14</b>, and S<b>15</b>. In the operation S<b>11</b>, the data selection unit <b>121</b> selects the profile corresponding to a motion pattern on which the control unit <b>112</b> is based (a motion pattern selected by the motor <b>2</b> to drive the motor <b>2</b>) from the plurality of profiles of the data storage unit <b>115</b>. Hereinafter, the motion pattern on which the control unit <b>112</b> is based is referred to as &#x201c;drive motion pattern&#x201d;, and the profile selected is referred to as &#x201c;selected profile&#x201d;.</p><p id="p-0088" num="0087">In the operation S<b>12</b>, the control unit <b>112</b> acquires information on the current position and the current speed of the driven object <b>4</b> based on the detection value of the sensor <b>3</b>. In the operation S<b>13</b>, the control unit <b>112</b> calculates the driving force command based on the target position and the target speed based on the drive motion pattern and the current position and the current speed of the driven object <b>4</b>, similarly to the operation S<b>03</b>. In the operation S<b>14</b>, the control unit <b>112</b> generates the driving electric power so that the driving force of the motor <b>2</b> follows the driving force command, similarly to the operation S<b>04</b>. In the operation S<b>15</b>, the profile generation unit <b>114</b> checks whether the operation of the motor <b>2</b> according to the drive motion pattern is completed.</p><p id="p-0089" num="0088">If it is determined in the operation S<b>15</b> that the operation of the motor <b>2</b> according to the drive motion pattern is not completed, the control device <b>100</b> executes operations S<b>16</b>, S<b>17</b>, S<b>18</b>, and S<b>19</b>. In the operation S<b>16</b>, the first estimation unit <b>113</b> newly estimates the first external force acting on the motor <b>2</b> based, at least in part, on the driving force command in the control unit <b>112</b>. In the operation S<b>17</b>, the second estimation unit <b>116</b> extracts an estimation value (the estimation value of comparison target) corresponding to an estimation value newly estimated by the first estimation unit <b>113</b> (the new estimation value) from the selected profile.</p><p id="p-0090" num="0089">In the operation S<b>18</b>, the second estimation unit <b>116</b> estimates the second external force based on the difference between the new estimation value and the estimation value of comparison target. In the operation S<b>19</b>, the control unit <b>112</b> calculates a compensation value based on the estimation value of the second external force, and changes the next target position and target speed based on the drive motion pattern to the acting direction of the second external force. The control device <b>100</b> then returns the process to the operation S<b>12</b>. Thereafter, until the drive motion pattern is completed, the motor <b>2</b> is continuously driven based on the drive motion pattern while estimating the second external force and changing the target position and the target speed based on the estimation result.</p><p id="p-0091" num="0090">If it is determined in the operation S<b>15</b> that the operation of the motor <b>2</b> according to the drive motion pattern is completed, the driving of the motor <b>2</b> based on the drive motion pattern is completed.</p><p id="p-0092" num="0091"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a flowchart illustrating a modification of the motor driving procedure. For example, <figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates a control procedure for detecting contact between the driven object <b>4</b> and the surrounding object based on the estimation result of the second external force. Operations S<b>21</b> to S<b>28</b> from the selection of the drive motion pattern to the estimation of the second external force are the same as the operations Si <b>1</b> to S<b>18</b> described above. After estimating the second external force in the operation S<b>28</b>, the control device <b>100</b> executes a operation S<b>29</b>. In the operation S<b>29</b>, the contact detection unit <b>124</b> checks whether or not the driven object <b>4</b> and the surrounding object are in contact with each other based on the estimation value of the second external force.</p><p id="p-0093" num="0092">If it is determined in the operation S<b>29</b> that the driven object <b>4</b> is not in contact with the surrounding object, the control device <b>100</b> returns the process to the operation S<b>22</b>. Thereafter, the driving of the motor <b>2</b> based on the drive motion pattern is continued while monitoring whether contact between the driven object <b>4</b> and the surrounding object happens.</p><p id="p-0094" num="0093">If it is determined in the operation S<b>29</b> that the driven object <b>4</b> and the surrounding object are in contact with each other, the control device <b>100</b> forcibly completes the series of processes without returning to the operation S<b>22</b>. This completes the driving of the motor <b>2</b> based on the drive motion pattern.</p><p id="p-0095" num="0094"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a flowchart illustrating another modification of the motor <b>2</b> driving procedure. For example, <figref idref="DRAWINGS">FIG. <b>10</b></figref> illustrates a procedure of classifying the state of the workpiece into two or more classes based on the estimation result of the second external force after the driving of the motor <b>2</b> based on the motion pattern is completed. Operations S<b>31</b> to S<b>38</b> from the selection of the drive motion pattern to the estimation of the second external force are the same as the operations S<b>11</b> to S<b>18</b> described above. After estimating the second external force in the operation S<b>38</b>, the control device <b>100</b> returns processing to the operation S<b>32</b>. Thereafter, the driving of the motor <b>2</b> based on the drive motion pattern is continued until the drive motion pattern is completed.</p><p id="p-0096" num="0095">If it is determined that the operation of the motor <b>2</b> according to the drive motion pattern is completed in the operation S<b>35</b>, the control device <b>100</b> executes a operation S<b>39</b>. In the operation S<b>39</b>, the classification unit <b>126</b> classifies the state of the workpiece on which the driven object <b>4</b> directly or indirectly acts into two or more classes based, at least in part, on the estimation result of the second external force. In the operation S<b>39</b>, instead of or in addition to the classification of the state of the workpiece by the classification unit <b>126</b>, the deterioration estimation unit <b>127</b> may estimate the deterioration of the driven object <b>4</b> based, at least in part, on the estimation result of the second external force. This completes the driving of the motor <b>2</b> based on the drive motion pattern.</p><heading id="h-0007" level="1">Example Application</heading><p id="p-0097" num="0096">The above-described configuration is also applicable to a system including a plurality of motors and the driven object includes a plurality of rigid body. For example, the above-described configuration can also be applied to a robot system including an articulated robot illustrated in <figref idref="DRAWINGS">FIG. <b>11</b></figref>.</p><p id="p-0098" num="0097">A robot <b>10</b> illustrated in <figref idref="DRAWINGS">FIG. <b>11</b></figref> is a so-called six-axis vertical articulated robot, and includes a base <b>11</b>, a turning portion <b>12</b>, arms <b>13</b>, <b>14</b>, and <b>15</b>, and a tool holder <b>16</b>. The base <b>11</b> is fixed on a floor, a table, or an automated guided vehicle (AGV) in the work area. The turning portion <b>12</b> is provided on the base <b>11</b> so as to turn around the vertical an axis <b>31</b>.</p><p id="p-0099" num="0098">The arm <b>13</b> is connected to the turning portion <b>12</b> so as to swing around an axis <b>32</b> intersecting (for example, orthogonal to) the axis <b>31</b>. Here, the intersecting includes a case in which there is a twisted relationship such as a so-called three-dimensional intersection. The arm <b>14</b> is connected to the distal end of the arm <b>13</b> so as to swing around an axis <b>33</b> that is parallel to the axis <b>32</b>. The arm <b>15</b> is connected to the distal end of the arm <b>14</b> to turn around an axis <b>34</b> that intersects the axis <b>33</b> along the arm <b>14</b> and to swing around an axis <b>35</b> that intersects (for example, is orthogonal to) the axis <b>34</b>.</p><p id="p-0100" num="0099">The tool holder <b>16</b> is connected to the distal end of the arm <b>15</b> so as to turn around an axis <b>36</b> along the center of the arm <b>15</b>. The tool holder <b>16</b> holds various tools <b>17</b> such as a hand for gripping the workpiece, a welding torch, a paint gun, or a screwing tool.</p><p id="p-0101" num="0100">A motor <b>21</b> turns the turning portion <b>12</b> around the axis <b>31</b>. A motor <b>22</b> swings the arm <b>13</b> around the axis <b>32</b>. A motor <b>23</b> swings the arm <b>14</b> around the axis <b>33</b>. A motor <b>24</b> turns the distal end of the arm <b>14</b> around the axis <b>34</b>. A motor <b>25</b> swings the arm <b>15</b> around the axis <b>35</b>. A motor <b>26</b> turns the tool holder <b>16</b> around the axis <b>36</b>.</p><p id="p-0102" num="0101">In the control system <b>1</b>, the tool holder <b>16</b> and the tool <b>17</b> are driven objects of the motor <b>26</b>. The arm <b>15</b>, the tool holder <b>16</b>, and the tool <b>17</b> are driven objects of the motor <b>25</b>. The distal end of the arm <b>14</b>, the arm <b>15</b>, the tool holder <b>16</b> and the tool <b>17</b> are driven objects of the motor <b>24</b>. The arms <b>14</b> and <b>15</b>, the tool holder <b>16</b> and the tool <b>17</b> are driven objects of the motor <b>23</b>. The arms <b>13</b>, <b>14</b>, and <b>15</b>, the tool holder <b>16</b>, and the tool <b>17</b> are driven objects of the motor <b>22</b>. The turning portion <b>12</b>, the arms <b>13</b>, <b>14</b>, and <b>15</b>, the tool holder <b>16</b> and the tool <b>17</b> are driven objects of the motor <b>21</b>.</p><p id="p-0103" num="0102">In a configuration in which a driven object of one motor includes another motor like the above-described configuration, the shape and moment of inertia of the driven object by the motor may change. For example, the shape and moment of inertia of the driven objects by the motor <b>21</b> is changed by driving the motors <b>22</b>, <b>23</b>, <b>24</b>, <b>25</b>, and <b>26</b>. In such a case, the profile generation unit <b>114</b> may generate the profile in which the transition of the estimation value of the first external force is associated with the motion pattern of the entire the robot <b>10</b> for each of the motors <b>21</b>, <b>22</b>, <b>23</b>, <b>24</b>, <b>25</b>, and <b>26</b>, and store the profile in the data storage unit <b>115</b>. Examples of the motion pattern of the entire the robot <b>10</b> may include temporal transition of the target position and target posture of the tool holder <b>16</b>.</p><p id="p-0104" num="0103">In this case, the first estimation unit <b>113</b> outputs a new estimation value based on the driving force command to each of the motor <b>21</b>, <b>22</b>, <b>23</b>, <b>24</b>, <b>25</b>, and <b>26</b>. The second estimation unit <b>116</b> extracts the estimation value of comparison target from each of the profile, and estimates the second external force based on the difference between the new estimation value and the estimation value of comparison target, for each of the motor <b>21</b>, <b>22</b>, <b>23</b>, <b>24</b>, <b>25</b>, and <b>26</b>.</p><p id="p-0105" num="0104">As described above, the control system <b>1</b> includes: the motor <b>2</b> configured to drive the driven object <b>4</b>; the control unit <b>112</b> configured to drive the motor <b>2</b>; the first estimation unit <b>113</b> configured to estimate the first external force acting on the motor <b>2</b> based, at least in part, on the driving force command in the control unit <b>112</b>; the data storage unit <b>115</b> configured to store the profile representing the transition of the estimation value estimated by the first estimation unit <b>113</b>; and the second estimation unit <b>116</b> configured to estimate the second external force acting on the driven object <b>4</b> based on the estimation value newly estimated by the first estimation unit <b>113</b> and the profile stored in the data storage unit <b>115</b> when the control unit <b>112</b> drives the motor <b>2</b> based on a predetermined motion pattern.</p><p id="p-0106" num="0105">The first external force acting on the motor <b>2</b> includes components that are difficult to model, such as Coulomb friction, viscous friction, and variations in the shape, the size, and the weight of the driven object <b>4</b> driven by the motor <b>2</b>. These components may cause a decrease in the estimation accuracy of an external force (the second external force acting on the driven object <b>4</b>) based on forces acting on the motor <b>2</b>. In contrast, by the control device <b>100</b>, the external force is estimated based on the first external force newly estimated while the motor <b>2</b> is operating according to the motion pattern and the profile representing the transition of the first external force estimated in the past. If the newly estimated first external force includes a component that is difficult to model as described above, the previously estimated first external force also includes a similar component. Accordingly, based on the newly estimated first external force and the profile representing the transition of the first external force estimated in the past, the external force may be estimated while eliminating the influence of the component that is difficult to model.</p><p id="p-0107" num="0106">Therefore, the estimation accuracy of the external force may be improved.</p><p id="p-0108" num="0107">The profile may represent the transition of the estimation value estimated by the first estimation unit <b>113</b> when the control unit <b>112</b> drove the motor <b>2</b> based on the motion pattern in the past. In this case, since the second external force can be estimated based on the new first external force estimated while driving the motor <b>2</b> according to the motion pattern and the past first external force estimated while driving the motor <b>2</b> according to the same motion pattern, the estimation accuracy of the external force is further improved.</p><p id="p-0109" num="0108">The profile may represent the transition of the estimation value estimated by the first estimation unit <b>113</b> in a state in which an external force is not applied to the driven object <b>4</b>. In this case, the estimation accuracy of the external force is further improved by using the profile in a state where the external force does not act on the driven object <b>4</b> as a reference.</p><p id="p-0110" num="0109">The data storage unit <b>115</b> may be configured to store the plurality of profiles including the profile. The plurality of profiles may respectively correspond to a plurality of motion patterns. Each of the plurality of profiles may represent the transition of the estimation value estimated by the first estimation unit <b>113</b> when the control unit <b>112</b> drove the motor in the past based on the corresponding motion pattern. The control unit <b>112</b> may drive the motor <b>2</b> based on one of the plurality of motion patterns. The control system <b>1</b> may further include the data selection unit that selects the profile corresponding to a motion pattern on which the control unit <b>112</b> is based from the plurality of profiles. The second estimation unit <b>116</b> may be configured to estimate the second external force based on the profile selected by the data selection unit <b>121</b>. In this case, the estimation accuracy of the external force can be further improved by providing the profile for each motion pattern and selectively using the profile in accordance with the motion pattern.</p><p id="p-0111" num="0110">The first estimation unit <b>113</b> may be the disturbance observer configured to estimate the first external force based, at least in part, on the driving force command and a response value of the motor <b>2</b>. In this case, the estimation accuracy of the external force is further improved. Hereinafter, a component which can be modeled among the influences of the motion of the driven object <b>4</b> on the motor <b>2</b> is referred to as &#x201c;modeled influences&#x201d;. For example, by using the disturbance observer, the first external force which is obtained by removing the modeled influences from the external force acting on the motor <b>2</b> may be estimated. According to the first external force estimated by removing the modeled influences, even when a deviation occurs between the actual motion of the driven object <b>4</b> and the motion pattern, the modeled influences are removed in advance from both the estimation value of the newly estimated first external force and the profile. Accordingly, the deviation hardly affects the estimation accuracy of the second external force.</p><p id="p-0112" num="0111">The second estimation unit <b>116</b> may be configured to: extract the estimation value corresponding to the newly estimated estimation value from the profile; and estimate the second external force based on the difference between the newly estimated estimation value and the extracted estimation value. In this case, the second external force can be easily estimated.</p><p id="p-0113" num="0112">The second estimation unit <b>116</b> may be configured to extract the estimation value corresponding to the newly estimated estimation value (hereinafter also referred to as &#x201c;estimation value of comparison target&#x201d; in some cases) from the profile based on the driving time according to the motion pattern. In this case, the estimation value of comparison target can be easily extracted based on the driving time by the motion pattern.</p><p id="p-0114" num="0113">The second estimation unit <b>116</b> may be configured to extract an estimation value corresponding to the newly estimated estimation value from the profile based on the response value of the motor <b>2</b>. In this case, based on the response value of the motor <b>2</b>, the estimation value corresponding to the newly estimated estimation value can be extracted. For example, the second estimation unit <b>116</b> may extract the estimation value of comparison target based on the current position of the motor <b>2</b>, may extract the estimation value of comparison target based on the current speed of the motor <b>2</b>, or may extract the estimation value of comparison target on both the current position and the current speed of the motor <b>2</b>. If the estimation value of comparison target is extracted based on the current position of the motor <b>2</b>, the estimation accuracy of the external force can be further improved by extracting the estimation value at a position close to the current position. If the estimation value of comparison target is extracted based on the current speed of the motor <b>2</b>, the estimation accuracy of the external force can be further improved by extracting the estimation value at a speed close to the current speed. If the estimation value of comparison target is extracted based on both the current position and the current speed of the motor <b>2</b>, the estimation accuracy of the external force can be further improved by extracting the estimation value at a position close to the current position and at a speed close to the current speed.</p><p id="p-0115" num="0114">The control system <b>1</b> may further include the data update unit <b>122</b> configured to update the profile. In this case, the estimation accuracy of the external force can be maintained.</p><p id="p-0116" num="0115">The data update unit <b>122</b> may be configured to: determine whether an update is required based on the profile stored in the data storage unit <b>115</b> and the estimation value newly estimated by the first estimation unit <b>113</b>; and update, if it is determined that the update is required, the profile based on the estimation value newly estimated by the first estimation unit <b>113</b>. In this case, the profile may be timely updated in response to a change in a situation such as aged deterioration or an environmental change. Therefore, the estimation accuracy of the external force is further improved.</p><p id="p-0117" num="0116">The control unit <b>112</b> may be configured to drive the motor <b>2</b> based on the motion pattern and the second external force estimated by the second estimation unit <b>116</b>. In this case, torque control may be executed without a torque sensor.</p><p id="p-0118" num="0117">The control system <b>1</b> may further include the classification unit <b>126</b> configured to classify the driven result of the motor <b>2</b> by the control unit <b>112</b> based on the motion pattern into two or more classes based, at least in part, on the second external force estimated by the second estimation unit <b>116</b>. In this case, improvement of the estimation accuracy of the external force contributes to estimation of the states of the driven object <b>4</b> and the surrounding object. As described above, the second estimation unit <b>116</b> estimates the second external force based on the first external force acting on the motor <b>2</b>. Therefore, the driven result of the motor <b>2</b> can be classified into two or more classes in consideration of a situation change occurring inside the control system <b>1</b> due to a failure or a slight variation of at least one of the driven object <b>4</b> and the motor <b>2</b>.</p><p id="p-0119" num="0118">The classification unit <b>126</b> may classify the driven result based on the second external force estimated by the second estimation unit <b>116</b> and the motion pattern on which the control unit <b>112</b> is based when the second external force is estimated. In this case, the driven result may more accurately classified based on both the motion pattern and the second external force.</p><p id="p-0120" num="0119">The control system <b>1</b> may further include the deterioration estimation unit <b>127</b> configured to estimate deterioration of the driven object <b>4</b> based, at least in part, on the second external force estimated by the second estimation unit <b>116</b>. In this case, the estimation result of the external force can also be used to predict deterioration of the driven object <b>4</b>.</p><p id="p-0121" num="0120">The control system <b>1</b> may further include the contact detection unit <b>124</b> configured to detect contact between the driven object <b>4</b> and the surrounding object based, at least in part, on the second external force estimated by the second estimation unit <b>116</b>. In this case, the improvement of the estimation accuracy of the external force contributes to contact detection.</p><p id="p-0122" num="0121">It is to be understood that not all aspects, advantages and features described herein may necessarily be achieved by, or included in, any one particular example. Indeed, having described and illustrated various examples herein, it should be apparent that other examples may be modified in arrangement and detail.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A control system comprising:<claim-text>a motor configured to power a driven object; and</claim-text><claim-text>circuitry configured to:<claim-text>generate a first driving force command to drive the motor during a first control;</claim-text><claim-text>estimate a first force acting on the motor during the first control based, at least in part, on the first driving force command;</claim-text><claim-text>generate a second driving force command to drive the motor during a second control after the first control;</claim-text><claim-text>estimate a second force acting on the motor during the second control based, at least in part, on the second driving force command; and</claim-text><claim-text>estimate an external force acting on the driven object during the second control based, at least in part, on a comparison between the first force and the second force.</claim-text></claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The control system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the circuitry is further configured to drive the motor according to a common motion pattern during both the first control and the second control.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The control system according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the circuitry is further configured to execute the first control without the external force acting on the driven object.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The control system according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the first control comprises driving the motor according to a plurality of predetermined motion patterns, and<claim-text>wherein the circuitry is further configured to:<claim-text>store a plurality of force profiles each of which represents the first force over time during a duration of time of the first control according to a corresponding motion pattern of the plurality of motion patterns;</claim-text><claim-text>select one motion pattern from the plurality of motion patterns;</claim-text><claim-text>generate the second driving force command to drive the motor according to the selected one motion pattern during the second control; and</claim-text><claim-text>estimate the external force based, at least in part, on a comparison between the second force and one of the plurality of force profiles corresponding to the selected one motion pattern.</claim-text></claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The control system according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the circuitry is further configured to:<claim-text>estimate a first disturbance acting on the motor as the first force based, at least in part, on the first driving force command and a motion of the motor responding to the first driving force command; and</claim-text><claim-text>estimate a second disturbance acting on the motor as the second force based, at least in part, on the second driving force command and a motion of the motor responding to the second driving force command.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The control system according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the circuitry is further configured to:<claim-text>store a first force profile representing the first force over time during a duration of the first control; and</claim-text><claim-text>estimate the external force based, at least in part, on a comparison between the second force and the first force profile.</claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The control system according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the circuitry is further configured to:<claim-text>extract a base value corresponding to the second force from the first force profile; and</claim-text><claim-text>estimate the external force based, at least in part, on a difference between the second force and the extracted base value.</claim-text></claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The control system according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the circuitry is further configured to extract the base value from the first force profile based, at least in part, on an elapsed time during the second control.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The control system according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the circuitry is further configured to:<claim-text>store the first force profile further representing a relation between a motion of the motor responding to the driving force command, and the first force; and</claim-text><claim-text>extract the base value based, at least in part, on a motion of the motor responding to the second driving force command during the second control.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The control system according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the circuitry is further configured to update the first force profile based, at least in part, on the second force.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The control system according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the circuitry is further configured to update the first force profile based, at least in part, on a comparison between the second force and the first force profile.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The control system according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the circuitry is further configured to update the first force profile based, at least in part, on a comparison between a second force profile representing the second force over time during a duration of the second control, and the first force profile.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The control system according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the circuitry is further configured to drive the motor based, at least in part, on the common motion pattern and the estimated external force during the second control.</claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The control system according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the circuitry is further configured to classify a result of the second control into two or more classes based, at least in part, on the estimated external force.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The control system according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the circuitry is further configured to classify the result of the second control based, at least in part, on the estimated external force and the common motion pattern.</claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The control system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the circuitry is further configured to estimate a deterioration of the driven object based, at least in part, on the estimated external force.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The control system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the circuitry is further configured to detect a contact between the driven object and a surrounding object based, at least in part, on the estimated external force.</claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. A control method comprising:<claim-text>generating a first driving force command to drive a motor during a first control, wherein the motor is configured to power a driven object;</claim-text><claim-text>estimating a first force acting on the motor during the first control based, at least in part on the first driving force command;</claim-text><claim-text>generating a second driving force command to drive the motor during a second control;</claim-text><claim-text>estimating a second force acting on the motor during the second control based, at least in part on the second driving force command; and</claim-text><claim-text>estimating an external force acting on the driven object based, at least in part, on a difference between the first force and the second force.</claim-text></claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. The control method according to <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein the motor is driven according to a common motion pattern during both the first control and the second control.</claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. A non-transitory memory device having instructions stored thereon that, in response to execution by a processing device, cause the processing device to perform operations comprising:<claim-text>generating a first driving force command to drive a motor during a first control, wherein the motor is configured to power a driven object;</claim-text><claim-text>estimating a first force acting on the motor during the first control based, at least in part on the first driving force command;</claim-text><claim-text>generating a second driving force command to drive the motor during a second control;</claim-text><claim-text>estimating a second force acting on the motor during the second control based, at least in part on the second driving force command; and</claim-text><claim-text>estimating an external force acting on the driven object based, at least in part, on a difference between the first force and the second force.</claim-text></claim-text></claim></claims></us-patent-application>