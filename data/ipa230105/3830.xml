<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230003831A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230003831</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17848467</doc-number><date>20220624</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="regional"><country>EP</country><doc-number>21183016.1</doc-number><date>20210701</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>S</subclass><main-group>5</main-group><subgroup>10</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>N</subclass><main-group>3</main-group><subgroup>08</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>S</subclass><main-group>5</main-group><subgroup>10</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>N</subclass><main-group>3</main-group><subgroup>084</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">Positioning in Mobile Communication Systems</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Nokia Technologies Oy</orgname><address><city>Espoo</city><country>FI</country></address></addressbook><residence><country>FI</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>BARBU</last-name><first-name>Oana-Elena</first-name><address><city>Aalborg</city><country>DK</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>KOV&#xc1;CS</last-name><first-name>Istv&#xe1;n Zsolt</first-name><address><city>Aalborg</city><country>DK</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">An apparatus, computer program and method is described comprising: obtaining, at a receiver, during a first phase of operation, one or more first downlink positioning reference samples from each of a plurality of communication nodes of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation; determining first response estimates of channels between the receiver and each of said each communication nodes, based on the positioning reference samples obtained for the respective communication node; selecting, for each communication node, a receiver beam for receiving positioning signals from the respective communication node, based, at least in part, on the respective first channel response estimate; and receiving, at the receiver, in a second phase of operation, one or more second downlink positioning reference samples from each of the plurality of communication nodes using the selected receiver beams.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="98.47mm" wi="158.75mm" file="US20230003831A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="219.63mm" wi="141.73mm" file="US20230003831A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="138.85mm" wi="136.99mm" file="US20230003831A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="107.53mm" wi="106.60mm" file="US20230003831A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="205.06mm" wi="142.92mm" orientation="landscape" file="US20230003831A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="223.10mm" wi="143.43mm" file="US20230003831A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="83.65mm" wi="135.89mm" file="US20230003831A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="230.04mm" wi="112.61mm" file="US20230003831A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="188.13mm" wi="135.13mm" orientation="landscape" file="US20230003831A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="131.15mm" wi="170.77mm" file="US20230003831A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="136.06mm" wi="119.21mm" file="US20230003831A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">FIELD</heading><p id="p-0002" num="0001">The present specification relates to positioning in mobile communication systems.</p><heading id="h-0002" level="1">BACKGROUND</heading><p id="p-0003" num="0002">The use of downlink reference signals, such as positioning reference signals, and similar algorithms for determining the positioning of user devices in mobile communication systems is known. Localization with radio access technology (RAT) dependent methods have been developed for 5G New Radio (NR), and enhanced in 3GPP Rel-16, which supports high positioning accuracy. The same trend for higher accuracy continues in Rel-17 and subsequent releases. There remains a desire for further development in this field.</p><heading id="h-0003" level="1">SUMMARY</heading><p id="p-0004" num="0003">In a first aspect, this specification describes an apparatus comprising means for performing: obtaining, at a receiver, during a first phase of operation, one or more first downlink positioning reference samples from each of a plurality of communication nodes (e.g. transmission reception points (TRPs) or base stations) of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation; determining first response estimates (which may be &#x201c;coarse data&#x201d;) of channels between the receiver and each of said each communication nodes, based on the positioning reference samples obtained for the respective communication node; selecting, for each communication node, a receiver beam for receiving positioning signals from the respective communication node, based, at least in part, on the respective first channel response estimate; and receiving, at the receiver, in a second phase of operation, one or more second downlink positioning reference samples from each of the plurality of communication nodes using the selected receiver beams (e.g. narrowband beams). Thus, coarse data may be used to select an optimum receiver beam (according to some metric) that is used in the second phase of operation.</p><p id="p-0005" num="0004">Some example embodiments further comprise means for performing: estimating a time of arrival (ToA) and/or a distance estimate for each of a plurality of downlink positioning reference samples received during the second phase of operation. Time of arrival and/or distance estimates for multiple communication nodes can be used to generate an estimate of the position of the receiver.</p><p id="p-0006" num="0005">The receiver beams may be selected using a machine-learning classifier (MLC). Some example embodiments further comprise means for performing: comparing an estimated distance with a known distance to form a cost function for use in training the machine-learning classifier. The machine-learning classifier may be trained using back propagation.</p><p id="p-0007" num="0006">Some example embodiments further comprise means for performing: filtering the first channel response estimates, wherein the receiver beams are selected based on the filtered first channel response estimates. The said filtering may include using threshold levels and/or by padding data, interpolating etc.</p><p id="p-0008" num="0007">The first channel response estimates may be channel impulse response estimates. Such channel impulse response estimates may be generated using a channel impulse response (CIR) estimator (e.g. using a digital signal processor).</p><p id="p-0009" num="0008">The receiver may form part of a user device or user equipment (UE).</p><p id="p-0010" num="0009">The means may comprise: at least one processor; and at least one memory including computer program code, the at least one memory and computer program code configured to, with the at least one processor, cause the performance of the apparatus.</p><p id="p-0011" num="0010">In a second aspect, this specification describes a method comprising: obtaining, at a receiver, during a first phase of operation, one or more first downlink positioning reference samples from each of a plurality of communication nodes of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation; determining first response estimates of channels between the receiver and each of said each communication nodes, based on the positioning reference samples obtained for the respective communication node; selecting, for each communication node, a receiver beam for receiving positioning signals from the respective communication node, based, at least in part, on the respective first channel response estimate; and receiving, at the receiver, in a second phase of operation, one or more second downlink positioning reference samples from each of the plurality of communication nodes using the selected receiver beams.</p><p id="p-0012" num="0011">The method may further comprise: estimating a time of arrival and/or a distance estimate for each of a plurality of downlink positioning reference samples received during the second phase of operation. The method may further comprise: generating a position estimate based on time of arrival and/or distance estimates for multiple communication nodes.</p><p id="p-0013" num="0012">The receiver beams may be selected using a machine-learning classifier. Some example embodiments further comprise: comparing an estimated distance with a known distance to form a cost function for use in training the machine-learning classifier.</p><p id="p-0014" num="0013">Some example embodiments further comprise: filtering the first channel response estimates, wherein the receiver beams are selected based on the filtered first channel response estimates.</p><p id="p-0015" num="0014">In a third aspect, this specification describes a method comprising: obtaining, at a receiver, one or more first downlink positioning reference samples from each of a plurality of communication nodes of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation; labelling the first downlink positioning reference samples with known distances from the receiver to the respective communication nodes; determining first response estimates of channels between the receiver and each of said each communication nodes, based on the positioning reference samples obtained for the respective communication node; selecting, using a machine-learning classifier, for each communication node, a receiver beam for receiving positioning signals from the respective communication node, based, at least in part, on the respective first channel response estimate; receiving, at the receiver, one or more second downlink positioning reference samples from each of the plurality of communication nodes using the selected receiver beams; estimating a distance for each of a plurality of downlink positioning reference samples received during the second phase of operation; comparing the estimated distance with the known distance to form a cost function for use in training the machine-learning classifier; and training the machine-learning classifier using back propagation.</p><p id="p-0016" num="0015">In a fourth aspect, this specification describes an apparatus configured to perform any (at least) any method as described with reference to the second or third aspects.</p><p id="p-0017" num="0016">In a fifth aspect, this specification describes computer-readable instructions which, when executed by a computing apparatus, cause the computing apparatus to perform (at least) any method as described with reference to the second or third aspects.</p><p id="p-0018" num="0017">In a sixth aspect, this specification describes a computer-readable medium (such as a non-transitory computer-readable medium) comprising program instructions stored thereon for performing (at least) any method as described with reference to the second or third aspects.</p><p id="p-0019" num="0018">In a seventh aspect, this specification describes an apparatus comprising: at least one processor; and at least one memory including computer program code which, when executed by the at least one processor, causes the apparatus to perform (at least) any method as described with reference to the second or third aspects.</p><p id="p-0020" num="0019">In an eighth aspect, this specification describes a computer program comprising instructions for causing an apparatus to perform at least the following: obtaining, at a receiver, during a first phase of operation, one or more first downlink positioning reference samples from each of a plurality of communication nodes of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation; determining first response estimates of channels between the receiver and each of said each communication nodes, based on the positioning reference samples obtained for the respective communication node; selecting, for each communication node, a receiver beam for receiving positioning signals from the respective communication node, based, at least in part, on the respective first channel response estimate; and receiving, at the receiver, in a second phase of operation, one or more second downlink positioning reference samples from each of the plurality of communication nodes using the selected receiver beams.</p><p id="p-0021" num="0020">In a ninth aspect, this specification describes a computer program comprising instructions for causing an apparatus to perform at least the following: obtaining, at a receiver, one or more first downlink positioning reference samples from each of a plurality of communication nodes of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation; labelling the first downlink positioning reference samples with known distances from the receiver to the respective communication nodes; determining first response estimates of channels between the receiver and each of said each communication nodes, based on the positioning reference samples obtained for the respective communication node; selecting, using a machine-learning classifier, for each communication node, a receiver beam for receiving positioning signals from the respective communication node, based, at least in part, on the respective first channel response estimate; receiving, at the receiver, one or more second downlink positioning reference samples from each of the plurality of communication nodes using the selected receiver beams; estimating a distance for each of a plurality of downlink positioning reference samples received during the second phase of operation; comparing the estimated distance with the known distance to form a cost function for use in training the machine-learning classifier; and training the machine-learning classifier using back propagation.</p><p id="p-0022" num="0021">In a tenth aspect, this specification describes an apparatus comprising: a correlation module (or some other means) for obtaining, at a receiver, during a first phase of operation, one or more first downlink positioning reference samples from each of a plurality of communication nodes of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation; a channel estimator module, such as a channel impulse response estimator (or some other means) for determining first response estimates of channels between the receiver and each of said each communication nodes, based on the positioning reference samples obtained for the respective communication node; a classifier (or some other means) for selecting, for each communication node, a receiver beam for receiving positioning signals from the respective communication node, based, at least in part, on the respective first channel response estimate; and a receiver (or some of means) for receiving, in a second phase of operation, one or more second downlink positioning reference samples from each of the plurality of communication nodes using the selected receiver beams.</p><p id="p-0023" num="0022">In an eleventh aspect, this specification describes an apparatus comprising: a correlation module (or some other means) for obtaining, at a receiver, one or more first downlink positioning reference samples from each of a plurality of communication nodes of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation; a control module (or some other means) for labelling the first downlink positioning reference samples with known distances from the receiver to the respective communication nodes; a channel estimator module, such as a channel impulse response estimator (or some other means) for determining first response estimates of channels between the receiver and each of said each communication nodes, based on the positioning reference samples obtained for the respective communication node; a machine-learning classifier (or some of means) for selecting, for each communication node, a receiver beam for receiving positioning signals from the respective communication node, based, at least in part, on the respective first channel response estimate; a receiver (or some other means) for receiving one or more second downlink positioning reference samples from each of the plurality of communication nodes using the selected receiver beams; a digital signal processor (or some other means) for estimating a distance for each of a plurality of downlink positioning reference samples received during the second phase of operation; a cost function generator (or some other means) for comparing the estimated distance with the known distance to form a cost function for use in training the machine-learning classifier; and a training module (or some other means) for training the machine-learning classifier using back propagation.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p-0024" num="0023">Example embodiments will now be described, by way of non-limiting examples, with reference to the following schematic drawings, in which:</p><p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram of a system in accordance with an example embodiment;</p><p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a flow chart showing an algorithm in accordance with an example embodiment;</p><p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a block diagram of a system in accordance with an example embodiment;</p><p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a flow chart showing an algorithm in accordance with an example embodiment;</p><p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a block diagram of a system in accordance with an example embodiment;</p><p id="p-0030" num="0029"><figref idref="DRAWINGS">FIGS. <b>6</b> to <b>8</b></figref> are block diagram of modules in accordance with example embodiments;</p><p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a flow chart showing an algorithm in accordance with an example embodiment;</p><p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a block diagram of a system in accordance with an example embodiment;</p><p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. <b>11</b></figref> is a block diagram of components of a system in accordance with an example embodiment; and</p><p id="p-0034" num="0033"><figref idref="DRAWINGS">FIGS. <b>12</b>A and <b>12</b>B</figref> show tangible media, respectively a removable non-volatile memory unit and a compact disc (CD) storing computer-readable code which when run by a computer perform operations according to example embodiment.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">DETAILED DESCRIPTION</heading><p id="p-0035" num="0034">The scope of protection sought for various embodiments of the invention is set out by the independent claims. The embodiments and features, if any, described in the specification that do not fall under the scope of the independent claims are to be interpreted as examples useful for understanding various embodiments of the to invention.</p><p id="p-0036" num="0035">In the description and drawings, like reference numerals refer to like elements throughout.</p><p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram of a system, indicated generally by the reference numeral to, in accordance with an example embodiment. The system to comprises a user device <b>12</b>, a first base station <b>14</b> and a second base station <b>15</b>. The base stations <b>14</b> and <b>15</b> are examples of transmission reception points (TRPs).</p><p id="p-0038" num="0037">To enable high accuracy positioning at the user device <b>12</b> based on positioning reference signals (or some other downlink reference signals) received from the first base station <b>14</b> and/or the second base station <b>15</b>, both the transmitter (e.g. the relevant base station or some other TRP) and receiver (e.g. the user device) may apply spatial beamforming, i.e. spatially orient themselves towards each other. To do that however, both transmitter and receiver may first scan the environment with all their TX/RX beams and select the beam that provides the best link quality.</p><p id="p-0039" num="0038">In downlink (DL) positioning, the link quality may be related to the beam Reference Signal Received Power (RSRP) of the relevant beams, accuracy of time of arrival (TOA), angle of arrival (AOA), etc. For the user device <b>12</b> to select a best UE RX beam for each of a plurality of TRPs (e.g. base stations) from which the user device receives positioning reference signals, the user device <b>12</b> may perform an exhaustive sweep and measure tens of signals sequentially, with each RX beam. This results in computational and reporting overhead as well as positioning latency. This positioning latency may be unacceptable, since the user device should detect and report tens of TRP beams with each of its own beams, in a time short enough to ensure positioning integrity, i.e. the user device should finish the measurements before its position or orientation has changed, all while fulfilling the network latency requirements.</p><p id="p-0040" num="0039">Take the following example scenario:</p><p id="p-0041" num="0040">Assume that the user device <b>12</b> has a latency requirement of MaxLat=10 ms for providing the LTE Positioning Protocol (LPP) positioning measurement report. Assume also that the user device <b>12</b> is equipped with R=4 RX beams and is instructed by a location management function (LMF) to measure 6 TRPs, each with P=4 beams. Each beam is repeated only once. In other words, the user device <b>12</b> needs to detect 96 beamed positioning reference signals (PRS).</p><p id="p-0042" num="0041">Assume the best case scenario in which the PRS signals are orthogonalized in code and space, therefore all TRP are able to simultaneously send each of their beams:<ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0000">    <ul id="ul0002" list-style="none">        <li id="ul0002-0001" num="0042">Slot 1: (beam 1, TRP 1), (beam 1, TRP 2), . . . , (beam 1, TRP 6).</li>        <li id="ul0002-0002" num="0043">Slot i: (beam i, TRP i), . . . , (beam i, TRP 6).</li>    </ul>    </li></ul></p><p id="p-0043" num="0044">This means that the PRS transmission lasts P=4 slots. If these slots are assigned consecutively, then the user device does not have enough time to switch between its own RX beams (beam switch time may be about 3 ms), therefore the beamed PRS must be repeated R=4 times in order for the user device to have activated and measured all its R=4 UE RX beams. Thus, the measurement process lasts for T=PR slots+delta&#x3e;&#x3e;PR ms=16 ms, where delta accounts for UE beam switching delay. The reporting process takes an additional V slots (required for the user device to get allocated and transmit the report). This means that the network obtains the user device measurements in (T+V) slots=PR+delta+V&#x3e;&#x3e;&#x3e;16 ms&#x3e;MaxLat.</p><p id="p-0044" num="0045">The total latency associated with the exhaustive UE RX beam scanning is typically larger (e.g. significantly larger) than the allowed latency, therefore other methods must be employed.</p><p id="p-0045" num="0046"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a flow chart showing an algorithm, indicated generally by the reference numeral <b>20</b>, in accordance with an example embodiment.</p><p id="p-0046" num="0047">The algorithm <b>20</b> starts at operation <b>22</b>, where, during a first phase of operation, one or more first downlink positioning reference samples are received (e.g. at a user device) from each of a plurality of communication nodes (e.g. TRPs) of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation. The obtaining step <b>22</b> may be implemented by correlating received signals with the (known) transmitted positioning reference signals, although other detection methods may be used (e.g. checking the received PRS power from each of a plurality of TRP beams).</p><p id="p-0047" num="0048">At operation <b>24</b>, a receiver beam is selected, for each communication node, for receiving positioning signals from the respective communication node. As discussed in detail below, the operation <b>24</b> may be implemented by determining first response estimates (e.g. channel impulse responses) of channels between the receiver and each communication node based on the positioning reference samples obtained for the respective communication node. The receiver beam may then be selected based on the respective first channel response estimate</p><p id="p-0048" num="0049">At operation <b>26</b>, one or more second downlink positioning reference samples are received from each of the plurality of communication nodes using the receiver beams selected in operation <b>24</b>.</p><p id="p-0049" num="0050">The algorithm seeks to select the optimum beam for receiving positioning reference signals (in the operation <b>24</b>) based on coarse channel data determined based on the wide-beam signals (obtained in the operation <b>22</b>). If an optimum beam can be selected, then good link quality can be ensured and hence good user device positioning, without the need for exhaustive beam sweeping. Moreover, a measurement report (e.g. ToA details may be made available with lower delay at the location management function (MLF)).</p><p id="p-0050" num="0051"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a block diagram of a system, indicated generally by the reference numeral <b>30</b>, in accordance with an example embodiment. The system <b>3</b><i>o </i>may be used to implement <b>3</b><i>o </i>the algorithm <b>20</b> described above.</p><p id="p-0051" num="0052">The system <b>3</b><i>o </i>comprises a channel estimation module <b>32</b>, a beam selection module <b>34</b>, a receiver <b>36</b> and a time of arrival (TOA) or distance estimator <b>38</b>.</p><p id="p-0052" num="0053">In the system <b>30</b>, a signal <b>31</b> is received. The signal <b>31</b> has a first phase (time period t<b>1</b>) and a second phase (time period t<b>2</b>).</p><p id="p-0053" num="0054">During time period t<b>1</b>, the user device collects signal samples in an omnidirectional or wide-beam reception mode (thereby implementing operation <b>22</b> of the algorithm <b>20</b>). The received samples are used by the channel estimation module <b>32</b> to compute channel estimates (e.g. channel impulse response (CIR) estimates, power delay profile, power metrics etc.). The channel estimation module <b>32</b> may be implemented using a conventional digital signal processor (DSP) CIR estimator.</p><p id="p-0054" num="0055">The channel estimates are processed by the beam selection module <b>34</b> to generate a user device beam index (or beam identifier) j for use in the second mode of operation. As discussed in detail below, the beam selection module <b>34</b> may be implemented using a machine-learning classifier (MLC). The beam selection module <b>34</b> thereby implements the operation <b>24</b> of the algorithm <b>20</b>.</p><p id="p-0055" num="0056">During time period t<b>2</b>, the receiver <b>36</b> uses the beam index j output by the beam selection module <b>34</b> to collect signal samples, thereby implementing operation <b>26</b> of the algorithm <b>20</b>.</p><p id="p-0056" num="0057">The signal samples obtained by the receiver <b>36</b> are provided to the TOA/distance estimator <b>38</b>, which may be implemented using a digital signal processor (DSP). As discussed further below, the TOA/distance estimator <b>38</b> can be used to estimate a time of arrival and/or a distance for each of a plurality of downlink positioning reference samples received during the second phase of operation. TOA/distance estimates obtained by the estimator <b>38</b> can be used to generate a position estimate for the user device (e.g. using the principles of triangulation).</p><p id="p-0057" num="0058">Thus, in some example embodiments, the system <b>30</b> seeks to obtain the best user device RX narrow beam for downlink PRS reception to enable high accuracy downlink positioning. As discussed in detail below, the system <b>30</b> may be implemented by cascading digital signal processing (DSP) blocks with a machine learning classifier (MLC) to create a hybrid structure that reconstructs narrow-beamed channels from a wide-beam/omni reception using a cost function based on the geometrical distance between each transmitter and receiver. It should be noted that other cost functions may be used (for example, a cost function based on position estimation error).</p><p id="p-0058" num="0059"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a flow chart showing an algorithm, indicated generally by the reference numeral <b>40</b>, in accordance with an example embodiment. The algorithm <b>40</b> may be used to train a machine-learning classifier for use as the beam selection module <b>34</b> described above.</p><p id="p-0059" num="0060">The algorithm <b>4</b><i>o </i>starts at operation <b>42</b>, where a distance between a receiver at the user device and a transmitter is estimated, as discussed above.</p><p id="p-0060" num="0061">At operation <b>44</b>, the estimated distance is compared with a known distance to generate to a cost function for use in training the machine-learning classifier. (Note that in this example embodiment, the training phase optimises for distance estimation, rather than for received signal strength.)</p><p id="p-0061" num="0062">At operation <b>46</b>, a machine-learning classifier for use in implementing the beam selecting module (e.g. the module <b>34</b> discussed above) is trained using back propagation (e.g. backpropagation through the machine-learning classifier and a digital signal processor (DSP) used to generate the channel impulses response and/or the distance estimate).</p><p id="p-0062" num="0063"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a block diagram of a system, indicated generally by the reference numeral <b>50</b>, in accordance with an example embodiment. The system <b>50</b> is similar to the system <b>30</b> described above, but more detail is provided. The system <b>50</b> may be used to implement the algorithm <b>40</b>.</p><p id="p-0063" num="0064">The system <b>50</b> receives the signal <b>31</b> described above (that signal having a first phase (time period t<b>1</b>) and a second phase (time period t<b>2</b>)).</p><p id="p-0064" num="0065">The system <b>50</b> comprises a CIR extractor module <b>51</b>, a CIR filtering module <b>52</b>, a machine-learning classifier <b>53</b>, an RX beam generator <b>54</b>, a TOA estimation module <b>55</b>, a TOA to distance conversion module <b>56</b> and a cost function generator <b>57</b>.</p><p id="p-0065" num="0066">The CIR extractor module <b>51</b> and the CIR filtering module <b>52</b> may be used to implement the channel estimation module <b>32</b> of the system <b>30</b>. The machine-learning classifier <b>53</b> may be used to implement the beam selection module <b>34</b> of the system <b>30</b>. The RX beam generator <b>54</b> may be used to implement the receiver <b>36</b> of the system <b>30</b>. The TOA estimation module <b>55</b> and the TOA to distance conversion module <b>56</b> may be used to implement the time of arrival (TOA) or distance estimator <b>38</b> of the system <b>30</b> (and to implement the operation <b>42</b> of the algorithm <b>40</b>). In addition, the cost function generator <b>57</b> may be used to implement the operation <b>44</b> of the algorithm <b>40</b>.</p><p id="p-0066" num="0067">In the use of the system <b>50</b>, a downlink positioning receiver is instructed by the network to listen for one or more PRS p(t) within a given time interval T=(t<b>1</b>, t<b>2</b>).</p><p id="p-0067" num="0068">During a first small reception window t<b>1</b> of the signal <b>31</b>, the user device listens for p(t) using no/wide RX beamforming and collects N wide-beam samples r(1), . . . r(N) (thereby to implementing operation <b>22</b> of the algorithm <b>20</b> described above). The received signal is the superimposition of all TX PRS, each convolved with their own channel impulse response (CIR) and corrupted by additive white Gaussian noise (AWGN). These samples are used by the CIR extractor module <b>51</b> to obtain wide-beam channel state information such as power delay profile (PDP), channel impulse response (CIR) and channel frequency response (CFR). As discussed further below, CIR extractor module <b>51</b> may output a CIR profile (per detected TRP) with taps on a delay grid with a UE-specific resolution.</p><p id="p-0068" num="0069">Thus, the user device applies a RX wide/no beamformer and collects the received positioning reference signal (PRS) samples r(1:N). Note that these PRS may or may not have been TX beamformed at the TRP. As noted above, other downlink reference signals may be used instead of the position reference signals discussed in this embodiment.</p><p id="p-0069" num="0070">The CIR filtering module <b>52</b> may be used to clip the wide-beam CIR profile (also called omni-CIR) output by the CIR extractor module <b>51</b>, for example to a fixed length, by applying a user device-specific filter. For example, the filter may retain the X strongest taps (each with real, imaginary parts and index delay), or the taps with power within Y dB from the maximum power tap.</p><p id="p-0070" num="0071">The filtered omni-CIR output by the CIR filtering module <b>52</b> is provided to the machine learning classifier <b>53</b>, which classifier seeks to output the index j of the best user device RX narrow beam for each detected TRP. The classifier <b>53</b> may be multiclass and may implement a one-hot encoding output to the best beam index. In another implementation, the CIR may be replaced with the phases of the most relevant taps and fed to the classifier.</p><p id="p-0071" num="0072">During a second time interval t<b>2</b>, the user device applies the selected RX beamformer W<sub>j </sub>(as output by MLC and implemented by the RX beam generator <b>54</b>), where w<sub>j </sub>is a vector of beamforming weights used to generate the RX beam with index j, and observes the UE-beamformed signal and collects the beamformed signal samples y(N+1:M).</p><p id="p-0072" num="0073">The narrowbeam signal y(N+1: M)=W<sub>j</sub><sup>H</sup>r(N+1, M) is used by the TOA estimation module <b>55</b> to estimate TOA r and the TOA to distance conversion module <b>56</b> to generate a distance estimate (thereby implementing operation <b>42</b> of the algorithm <b>40</b>). The estimated distances may be corrected (d=C&#x3c4;+&#x3be;) to account for AWGN errors and other UE nonlinearities such as clock drifts.</p><p id="p-0073" num="0074">To train MLC <b>53</b>, the resulting estimated distance {circumflex over (d)} is compared in the training phase with the real distance and a cost function C=dist(d, {circumflex over (d)}), e.g. Euclidian norm between true and estimated distances, is computed (see operation <b>44</b> of the algorithm <b>40</b>). The cost function is generated by the cost function generator <b>57</b> and is backpropagated to train the MLC <b>53</b>, thereby implementing operation <b>46</b> of the algorithm <b>40</b>.</p><p id="p-0074" num="0075"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a block diagram of a module, indicated generally by the reference numeral <b>60</b>, in accordance with an example embodiment. The module <b>60</b> is an example implementation of the CIR filtering module <b>52</b> described above.</p><p id="p-0075" num="0076">In the module <b>60</b>, the filtering of the CIR taps has the role of homogenizing the data that is provided to the input of the MLC. For example, the input vector length may be fixed. To that end, depending on the estimated CIR length, the filtering may consist of one or more of:<ul id="ul0003" list-style="none">    <li id="ul0003-0001" num="0000">    <ul id="ul0004" list-style="none">        <li id="ul0004-0001" num="0077">Removing taps with power below a certain threshold, e.g. relative to the maximum power tap, or relative to an estimated SNR level (exemplary implementation in the figure).</li>        <li id="ul0004-0002" num="0078">Zero-padding the estimates in case of severely sparse initial estimates.</li>        <li id="ul0004-0003" num="0079">Interpolating missing values, etc.</li>    </ul>    </li></ul></p><p id="p-0076" num="0080"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a block diagram of a module, indicated generally by the reference numeral <b>70</b>, in accordance with an example embodiment. The system <b>70</b> is an example implementation of the machine-learning classifier (MLC) <b>53</b>. The ML classifier seeks to output the best beam index in the form e.g. of a binary vector containing a <b>1</b> on the location of the best index or a vector of probabilities, where in the i-th entry corresponds to the probability that the best beam is beam i. As discussed above, the MLC <b>53</b> receives as input the omni-CIR estimates and may be implemented as a deep neural network as depicted in <figref idref="DRAWINGS">FIG. <b>7</b></figref>. It should be noted that the module <b>70</b> is provided by way of example; other implementations exist.</p><p id="p-0077" num="0081"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a block diagram of a module, indicated generally by the reference numeral <b>80</b>, to in accordance with an example embodiment. The module <b>80</b>, which may form part of the TOA to distance conversion module <b>56</b> described above, includes (by way of example) a mechanism for correcting for clock offsets.</p><p id="p-0078" num="0082"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a flow chart showing an algorithm, indicated generally by the reference numeral <b>90</b>, in accordance with an example embodiment. The algorithm <b>90</b> may be used to train the MLC <b>53</b> described above.</p><p id="p-0079" num="0083">The algorithm <b>90</b> starts at operation <b>92</b>, where one or more first downlink positioning reference samples (or some other downlink reference signals) are obtained at a receiver from each of a plurality of communication nodes of a mobile communication system.</p><p id="p-0080" num="0084">The receiver operates in a wide-beam or omnidirectional mode such that wide-beam reception sampled are obtained.</p><p id="p-0081" num="0085">The operation <b>92</b> may include collecting omni-CIR measurements (e.g. using the CIR extractor module <b>51</b>) and optionally filtering the CIR measurements (e.g. using the CIR filtering module <b>52</b>).</p><p id="p-0082" num="0086">At operation <b>93</b>, the first downlink positioning reference samples are labelled with known distances from the receiver to the respective communication nodes. These labels can be used for training purposes, as discussed further below.</p><p id="p-0083" num="0087">At operation <b>94</b>, a receiver beam is selected for receiving positioning signals from the respective communication node. The operation <b>94</b> may include determining first response estimates of channels between the receiver and each of said each communication nodes and selecting the receiver beam based on the respective first channel response estimate (e.g. using the MLC <b>53</b> described above). For example, the classifier being trained by the algorithm <b>90</b> may be used to implement the operation <b>94</b>.</p><p id="p-0084" num="0088">At operation <b>95</b>, one or more second downlink positioning reference samples are received from each of the plurality of communication nodes using the receiver beams selected in the operation <b>94</b> (e.g. such that narrow TX-RX beams are used).</p><p id="p-0085" num="0089">At operation <b>96</b>, a distance is estimated for each of a plurality of downlink positioning reference samples.</p><p id="p-0086" num="0090">At operation <b>97</b>, the estimated distance is compared with the known distance (based on the label generated in operation <b>93</b>) to form a cost function for use in training the machine-learning classifier (MLC). For example, the cost function generator <b>57</b> described above may be used.</p><p id="p-0087" num="0091">Finally, at operation <b>98</b>, the MLC is trained using back propagation. Note that the MLC may be first trained in the cloud and downloaded at the relevant user device, or trained directed at the user device (e.g. in a lab environment).</p><p id="p-0088" num="0092"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a block diagram of a system, indicated generally by the reference numeral <b>100</b>, in accordance with an example embodiment.</p><p id="p-0089" num="0093">The system <b>100</b> includes the CIR extractor module <b>51</b>, the CIR filtering module <b>52</b>, the machine-learning classifier <b>53</b>, the RX beam generator <b>54</b>, the TOA estimation module <b>55</b>, and the TOA to distance conversion module <b>56</b> of the system <b>50</b> described above. However, whilst the system <b>50</b> includes a cost function generator <b>57</b> (for use in training), the system <b>100</b> includes a positioning report generation module <b>102</b> for use in deployment of the principles described herein. The module <b>102</b> may, for example, generate an LTE Positioning Protocol (LPP) report. Of course, an example system may include both the cost function generator <b>57</b> and the positioning report generation module <b>102</b> (for use in training and deployment respectively).</p><p id="p-0090" num="0094">For completeness, <figref idref="DRAWINGS">FIG. <b>11</b></figref> is a schematic diagram of components of one or more of the example embodiments described previously, which hereafter are referred to generically as a processing system <b>300</b>. The processing system <b>300</b> may, for example, be (or may include) the apparatus referred to in the claims below.</p><p id="p-0091" num="0095">The processing system <b>300</b> may have a processor <b>302</b>, a memory <b>304</b> closely coupled to the processor and comprised of a RAM <b>314</b> and a ROM <b>312</b>, and, optionally, a user input <b>310</b> and a display <b>318</b>. The processing system <b>300</b> may comprise one or more network/apparatus interfaces <b>308</b> for connection to a network/apparatus, e.g. a modem which may be wired or wireless. The network/apparatus interface <b>308</b> may also operate as a connection to other apparatus such as device/apparatus which is not network side apparatus. Thus, direct connection between devices/apparatus without network participation is possible.</p><p id="p-0092" num="0096">The processor <b>302</b> is connected to each of the other components in order to control operation thereof.</p><p id="p-0093" num="0097">The memory <b>304</b> may comprise a non-volatile memory, such as a hard disk drive (HDD) or a solid state drive (SSD). The ROM <b>312</b> of the memory <b>304</b> stores, amongst other things, an operating system <b>315</b> and may store software applications <b>316</b>. The RAM <b>314</b> of the memory <b>304</b> is used by the processor <b>302</b> for the temporary storage of data. The operating system <b>315</b> may contain code which, when executed by the processor implements aspects of the algorithms and message sequences <b>20</b>, <b>40</b> and <b>90</b> described above. Note that in the case of small device/apparatus the memory can be most suitable for small size usage i.e. not always a hard disk drive (HDD) or a solid state drive (SSD) is used.</p><p id="p-0094" num="0098">The processor <b>302</b> may take any suitable form. For instance, it may be a microcontroller, a plurality of microcontrollers, a processor, or a plurality of processors.</p><p id="p-0095" num="0099">The processing system <b>300</b> may be a standalone computer, a server, a console, or a network thereof. The processing system <b>300</b> and needed structural parts may be all inside device/apparatus such as IoT device/apparatus i.e. embedded to very small size.</p><p id="p-0096" num="0100">In some example embodiments, the processing system <b>300</b> may also be associated with external software applications. These may be applications stored on a remote server device/apparatus and may run partly or exclusively on the remote server device/apparatus. These applications may be termed cloud-hosted applications. The processing system <b>300</b> may be in communication with the remote server device/apparatus in order to utilize the software application stored there.</p><p id="p-0097" num="0101"><figref idref="DRAWINGS">FIGS. <b>12</b>A and <b>12</b>B</figref> show tangible media, respectively a removable memory unit <b>365</b> and a compact disc (CD) <b>368</b>, storing computer-readable code which when run by a computer may perform methods according to example embodiments described above. The removable memory unit <b>365</b> may be a memory stick, e.g. a USB memory stick, having internal memory <b>366</b> storing the computer-readable code. The internal memory <b>366</b> may be accessed by a computer system via a connector <b>367</b>. The CD <b>368</b> may be a CD-ROM or a DVD or similar. Other forms of tangible storage media may be used. Tangible media can be any device/apparatus capable of storing data/information which data/information can be exchanged between devices/apparatus/network.</p><p id="p-0098" num="0102">Embodiments of the present invention may be implemented in software, hardware, application logic or a combination of software, hardware and application logic. The software, application logic and/or hardware may reside on memory, or any computer media. In an example embodiment, the application logic, software or an instruction set is maintained on any one of various conventional computer-readable media. In the context of this document, a &#x201c;memory&#x201d; or &#x201c;computer-readable medium&#x201d; may be any non-transitory media or means that can contain, store, communicate, propagate or transport the instructions for use by or in connection with an instruction execution system, apparatus, or device, such as a computer.</p><p id="p-0099" num="0103">Reference to, where relevant, &#x201c;computer-readable medium&#x201d;, &#x201c;computer program product&#x201d;, &#x201c;tangibly embodied computer program&#x201d; etc., or a &#x201c;processor&#x201d; or &#x201c;processing circuitry&#x201d; etc. should be understood to encompass not only computers having differing architectures such as single/multi-processor architectures and sequencers/parallel architectures, but also specialised circuits such as field programmable gate arrays FPGA, application specify circuits ASIC, signal processing devices/apparatus and other devices/apparatus. References to computer program, instructions, code etc. should be understood to express software for a programmable processor firmware such as the programmable content of a hardware device/apparatus as instructions for a processor or configured or configuration settings for a fixed function device/apparatus, gate array, programmable logic device/apparatus, etc.</p><p id="p-0100" num="0104">If desired, the different functions discussed herein may be performed in a different order and/or concurrently with each other. Furthermore, if desired, one or more of the above-described functions may be optional or may be combined. Similarly, it will also be appreciated that the flow diagrams and message sequences of <figref idref="DRAWINGS">FIGS. <b>2</b>, <b>4</b> and <b>9</b></figref> are examples only and that various operations depicted therein may be omitted, reordered and/or combined.</p><p id="p-0101" num="0105">It will be appreciated that the above described example embodiments are purely illustrative and are not limiting on the scope of the invention. Other variations and m modifications will be apparent to persons skilled in the art upon reading the present specification.</p><p id="p-0102" num="0106">Moreover, the disclosure of the present application should be understood to include any novel features or any novel combination of features either explicitly or implicitly disclosed herein or any generalization thereof and during the prosecution of the present application or of any application derived therefrom, new claims may be formulated to cover any such features and/or combination of such features.</p><p id="p-0103" num="0107">Although various aspects of the invention are set out in the independent claims, other aspects of the invention comprise other combinations of features from the described example embodiments and/or the dependent claims with the features of the independent claims, and not solely the combinations explicitly set out in the claims.</p><p id="p-0104" num="0108">It is also noted herein that while the above describes various examples, these descriptions should not be viewed in a limiting sense. Rather, there are several variations and modifications which may be made without departing from the scope of the present invention as defined in the appended claims.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. An apparatus comprising:<claim-text>at least one processor; and</claim-text><claim-text>at least one memory including computer program code which, when executed by the at least one processor, causes the apparatus to perform:</claim-text><claim-text>obtaining, at a receiver, during a first phase of operation, one or more first downlink positioning reference samples from each of a plurality of communication nodes of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation;</claim-text><claim-text>determining first response estimates of channels between the receiver and each of said each communication nodes, based on the positioning reference samples obtained for the respective communication node;</claim-text><claim-text>selecting, for each communication node, a receiver narrowband beam for receiving positioning signals from the respective communication node, based, at least in part, on the respective first channel response estimate, wherein the receiver narrowband beams are selected using a machine-learning classifier; and</claim-text><claim-text>receiving, in a second phase of operation, one or more second downlink positioning reference samples from each of the plurality of communication nodes using the selected receiver narrowband beams.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. An apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one memory and the computer program code are configured to, with the at least processor, cause the apparatus to:<claim-text>estimate a time of arrival and/or a distance estimate for each of a plurality of downlink positioning reference samples received during the second phase of operation.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. An apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one memory and the computer program code are configured to, with the at least processor, cause the apparatus to:<claim-text>compare an estimated distance with a known distance to form a cost function for use in training the machine-learning classifier.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. An apparatus as claimed in <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the at least one memory and the computer program code are configured to, with the at least processor, cause the apparatus to:<claim-text>train the machine-learning classifier using back propagation.</claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. An apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one memory and the computer program code are configured to, with the at least processor, cause the apparatus to:<claim-text>filter the first channel response estimates, wherein the receiver narrowband beams are selected based on the filtered first channel response estimates.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. An apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first channel response estimates are channel impulse response estimates.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. An apparatus as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the receiver forms part of a user device.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. A method comprising:<claim-text>obtaining, at a receiver, during a first phase of operation, one or more first downlink positioning reference samples from each of a plurality of communication nodes of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation;</claim-text><claim-text>determining first response estimates of channels between the receiver and each of said each communication nodes, based on the positioning reference samples obtained for the respective communication node;</claim-text><claim-text>selecting, for each communication node, a receiver narrowband beam for receiving positioning signals from the respective communication node, based, at least in part, on the respective first channel response estimate, wherein the receiver narrowband beams are selected using a machine-learning classifier; and</claim-text><claim-text>receiving, at the receiver, in a second phase of operation, one or more second downlink positioning reference samples from each of the plurality of communication nodes using the selected receiver narrowband beams.</claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. A method as claimed in <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising:<claim-text>estimating a time of arrival and/or a distance estimate for each of a plurality of downlink positioning reference samples received during the second phase of operation.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. A method as claimed in <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising:<claim-text>comparing an estimated distance with a known distance to form a cost function for use in training the machine-learning classifier.</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. A method as claimed in <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising:<claim-text>filtering the first channel response estimates, wherein the receiver narrowband beams are selected based on the filtered first channel response estimates.</claim-text></claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. A method as claimed in <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the first channel response estimates are channel impulse response estimates.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. A method as claimed in <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the receiver forms part of a user device.</claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. A method comprising:<claim-text>obtaining, at a receiver, one or more first downlink positioning reference samples from each of a plurality of communication nodes of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation;</claim-text><claim-text>labelling the first downlink positioning reference samples with known distances from the receiver to the respective communication nodes;</claim-text><claim-text>determining first response estimates of channels between the receiver and each of said each communication nodes, based on the positioning reference samples obtained for the respective communication node;</claim-text><claim-text>selecting, using a machine learning classifier, for each communication node, a receiver narrowband beam for receiving positioning signals from the respective communication node, based, at least in part, on the respective first channel response estimate;</claim-text><claim-text>receiving, at the receiver, one or more second downlink positioning reference samples from each of the plurality of communication nodes using the selected receiver narrowband beams;</claim-text><claim-text>estimating a distance for each of a plurality of downlink positioning reference samples received during the second phase of operation;</claim-text><claim-text>comparing the estimated distance with the known distance to form a cost function for use in training the machine-learning classifier; and</claim-text><claim-text>training the machine-learning classifier using back propagation.</claim-text></claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. A non-transitory computer readable medium comprising program instructions stored thereon for performing at least the following:<claim-text>obtaining, at a receiver, during a first phase of operation, one or more first downlink positioning reference samples from each of a plurality of communication nodes of a mobile communication system, wherein the receiver operates in a wide-beam or omnidirectional mode during the first phase of operation;</claim-text><claim-text>determining first response estimates of channels between the receiver and each of said each communication nodes, based on the positioning reference samples obtained for the respective communication node;</claim-text><claim-text>selecting, for each communication node, a receiver narrowband beam for receiving positioning signals from the respective communication node, based, at least in part, on the respective first channel response estimate, wherein the receiver beams are selected using a machine-learning classifier; and</claim-text><claim-text>receiving, at the receiver, in a second phase of operation, one or more second downlink positioning reference samples from each of the plurality of communication nodes using the selected receiver narrowband beams.</claim-text></claim-text></claim></claims></us-patent-application>