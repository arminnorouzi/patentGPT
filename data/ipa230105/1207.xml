<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230001208A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230001208</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17931433</doc-number><date>20220912</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>A</section><class>61</class><subclass>N</subclass><main-group>1</main-group><subgroup>36</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>A</section><class>61</class><subclass>B</subclass><main-group>5</main-group><subgroup>389</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>A</section><class>61</class><subclass>B</subclass><main-group>5</main-group><subgroup>11</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>A</section><class>61</class><subclass>N</subclass><main-group>1</main-group><subgroup>36139</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20210101</date></cpc-version-indicator><section>A</section><class>61</class><subclass>B</subclass><main-group>5</main-group><subgroup>389</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>A</section><class>61</class><subclass>B</subclass><main-group>5</main-group><subgroup>1116</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>A</section><class>61</class><subclass>N</subclass><main-group>1</main-group><subgroup>36192</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>A</section><class>61</class><subclass>B</subclass><main-group>2562</main-group><subgroup>0219</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">DETERMINING POSTURE STATE FROM ECAPS</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>16721576</doc-number><date>20191219</date></document-id><parent-grant-document><document-id><country>US</country><doc-number>11439825</doc-number></document-id></parent-grant-document></parent-doc><child-doc><document-id><country>US</country><doc-number>17931433</doc-number></document-id></child-doc></relation></continuation></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Medtronic, Inc.</orgname><address><city>Minneapolis</city><state>MN</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Dinsmoor</last-name><first-name>David A.</first-name><address><city>North Oaks</city><state>MN</state><country>US</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Pulliam</last-name><first-name>Christopher L.</first-name><address><city>Plymouth</city><state>MN</state><country>US</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>Hageman</last-name><first-name>Kristin N.</first-name><address><city>Dayton</city><state>MN</state><country>US</country></address></addressbook></inventor><inventor sequence="03" designation="us-only"><addressbook><last-name>Bink</last-name><first-name>Hank</first-name><address><city>Golden Valley</city><state>MN</state><country>US</country></address></addressbook></inventor><inventor sequence="04" designation="us-only"><addressbook><last-name>Li</last-name><first-name>Jiashu</first-name><address><city>Mounds View</city><state>MN</state><country>US</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">Systems, devices, and techniques are described for determining a posture state of a patient based on detected evoked compound action potentials (ECAPs). In one example, a medical device includes stimulation circuitry configured to deliver electrical stimulation and sensing circuitry configured to sense a plurality of evoked compound action potential (ECAP) signals. The medical device also includes processing circuitry configured to control the stimulation circuitry to deliver a plurality of electrical stimulation pulses having different amplitude values, control the sensing circuitry to detect, after delivery of each electrical stimulation pulse of the plurality of electrical stimulation pulses, a respective ECAP signal of the plurality of ECAP signals, and determine, based on the plurality of ECAP signals, a posture state of the patient.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="209.63mm" wi="158.75mm" file="US20230001208A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="199.90mm" wi="140.97mm" file="US20230001208A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="234.87mm" wi="167.22mm" file="US20230001208A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="156.80mm" wi="115.15mm" file="US20230001208A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="150.20mm" wi="160.70mm" file="US20230001208A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="234.02mm" wi="140.29mm" orientation="landscape" file="US20230001208A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="202.35mm" wi="163.07mm" orientation="landscape" file="US20230001208A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="232.49mm" wi="163.91mm" file="US20230001208A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="194.06mm" wi="170.35mm" orientation="landscape" file="US20230001208A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><p id="p-0002" num="0001">This application is a continuation of U.S. patent application Ser. No. 16/721,576, filed Dec. 19, 2019, the entire contents of which is incorporated herein by reference.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">TECHNICAL FIELD</heading><p id="p-0003" num="0002">This disclosure generally relates to electrical stimulation, and more specifically, determining characteristics of a patient using electrical stimulation.</p><heading id="h-0002" level="1">BACKGROUND</heading><p id="p-0004" num="0003">Medical devices may be external or implanted and may be used to deliver electrical stimulation therapy to patients via various tissue sites to treat a variety of symptoms or conditions such as chronic pain, tremor, Parkinson's disease, epilepsy, urinary or fecal incontinence, sexual dysfunction, obesity, or gastroparesis. A medical device may deliver electrical stimulation therapy via one or more leads that include electrodes located proximate to target locations associated with the brain, the spinal cord, pelvic nerves, peripheral nerves, or the gastrointestinal tract of a patient. Stimulation proximate the spinal cord, proximate the sacral nerve, within the brain, and proximate peripheral nerves are often referred to as spinal cord stimulation (SCS), sacral neuromodulation (SNM), deep brain stimulation (DBS), and peripheral nerve stimulation (PNS), respectively.</p><p id="p-0005" num="0004">Electrical stimulation may be delivered to a patient by the medical device in a train of electrical pulses, and parameters of the electrical pulses may include a frequency, an amplitude, a pulse width, and a pulse shape. An evoked compound action potential (ECAP) is synchronous firing of a population of neurons which occurs in response to the application of a stimulus including, in some cases, an electrical stimulus by a medical device. The ECAP may be detectable as being a separate event from the stimulus itself, and the ECAP may reveal characteristics of the effect of the stimulus on the nerve fibers.</p><heading id="h-0003" level="1">SUMMARY</heading><p id="p-0006" num="0005">In general, systems, devices, and techniques are described for determining a posture state of a patient based on one or more evoked compound action potential (ECAPs) signals sensed from a patient. When a patient moves, the distance between implanted electrodes and target nerves changes. For example, electrodes implanted along the spinal column are closer to the spinal cord when a subject lies in a supine posture state as compared to a standing posture state. Similarly, the implanted electrodes may move closer to the spinal cord when a subject coughs or sneezes. Therefore, a characteristic of the ECAP signal changes according to the stimulation pulse that evoked the ECAP signal and the distance between the electrodes and the nerves.</p><p id="p-0007" num="0006">Devices and systems described herein may leverage the relationship between stimulation pulse parameters and the characteristic of the ECAP signal to determine the posture state currently occupied by the subject. For example, an implantable medical device (IMD) may deliver a plurality of stimulation pulses with different stimulation parameter values and detect the resulting ECAP signals from each pulse. The IMD may then determine the relationship between the stimulation parameter values and one or more characteristics of the resulting ECAP signals and identify the posture state of the subject. In some examples, the IMD may transmit the identified posture state to an external device for display to a user. In some examples, the IMD may use the identified posture state as feedback to control therapy delivery to the subject. For example, the IMD may select stimulation parameter values for electrical stimulation based on the identified posture state or select a target ECAP value for the identified posture state for modulating stimulation parameter values.</p><p id="p-0008" num="0007">In one example, a system includes stimulation circuitry configured to deliver electrical stimulation, sensing circuitry configured to sense a plurality of evoked compound action potential (ECAP) signals, and processing circuitry configured to control the stimulation circuitry to deliver a plurality of electrical stimulation pulses having different amplitude values, control the sensing circuitry to detect, after delivery of each electrical stimulation pulse of the plurality of electrical stimulation pulses, a respective ECAP signal of the plurality of ECAP signals, and determine, based on the plurality of ECAP signals, a posture state of the patient.</p><p id="p-0009" num="0008">In another example, a method includes controlling, by processing circuitry, stimulation circuitry to deliver a plurality of electrical stimulation pulses having different amplitude values, controlling, by the processing circuitry, sensing circuitry to detect, after delivery of each electrical stimulation pulse of the plurality of electrical stimulation pulses, a respective evoked compound action potential (ECAP) signal of a plurality of ECAP signals, and determining, by the processing circuitry and based on the plurality of ECAP signals, a posture state of the patient.</p><p id="p-0010" num="0009">In another example, a computer-readable medium includes instructions that, when executed, causes processing circuitry to control stimulation circuitry to deliver a plurality of electrical stimulation pulses having different amplitude values, control sensing circuitry to detect, after delivery of each electrical stimulation pulse of the plurality of electrical stimulation pulses, a respective evoked compound action potential (ECAP) signal of a plurality of ECAP signals, and determine, based on the plurality of ECAP signals, a posture state of the patient.</p><p id="p-0011" num="0010">The summary is intended to provide an overview of the subject matter described in this disclosure. It is not intended to provide an exclusive or exhaustive explanation of the systems, device, and methods described in detail within the accompanying drawings and description below. Further details of one or more examples of this disclosure are set forth in the accompanying drawings and in the description below. Other features, objects, and advantages will be apparent from the description and drawings, and from the claims.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a conceptual diagram illustrating an example system that includes an implantable medical device (IMD) configured to deliver spinal cord stimulation (SCS) therapy and an external programmer, in accordance with one or more techniques of this disclosure.</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a block diagram illustrating an example configuration of components of an implantable medical device (IMD), in accordance with one or more techniques of this disclosure.</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a block diagram illustrating an example configuration of components of an example external programmer, in accordance with one or more techniques of this disclosure.</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a graph of example evoked compound action potentials (ECAPs) sensed for respective stimulation pulses, in accordance with one or more techniques of this disclosure.</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a timing diagram illustrating one example of electrical stimulation pulses and respective sensed ECAPs, in accordance with one or more techniques of this disclosure.</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a graph illustrating example growth curves for a relationship between ECAP amplitude and pulse amplitude for different posture states.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a flow diagram illustrating an example technique for determining a posture state for a patient and controlling therapy based on the posture state, in accordance with one or more techniques of this disclosure.</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a diagram illustrating an example technique for adjusting stimulation therapy.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">DETAILED DESCRIPTION</heading><p id="p-0020" num="0019">The disclosure describes examples of medical devices, systems, and techniques for determining a posture state of a subject based on one or more characteristics of evoked compound action potentials (ECAPs). Electrical stimulation therapy is typically delivered to a target tissue (e.g., nerves of the spinal cord or muscle) of a patient via two or more electrodes. Parameters of the electrical stimulation therapy (e.g., electrode combination, voltage or current amplitude, pulse width, pulse frequency, etc.) are selected by a clinician and/or the patient to provide relief from various symptoms, such as pain, nervous system disorders, muscle disorders, etc. However, as the patient moves, the distance between the electrodes and the target tissues changes. Since neural recruitment at the nerves is a function of stimulation intensity (e.g., amplitude and/or pulse frequency) and distance between the target tissue and the electrodes, movement of the electrode closer to the target tissue may result in increased neural recruitment (e.g., possible painful sensations or adverse motor function), and movement of the electrode further from the target tissue may result in decreased efficacy of the therapy for the patient. Certain patient postures (which may or may not include patient activity) may be representative of respective distances (or changes in distance) between electrodes and nerves and thus be an informative feedback variable for modulating stimulation therapy.</p><p id="p-0021" num="0020">ECAPs are a measure of neural recruitment because each ECAP signal represents the superposition of electrical potentials generated from a population of axons firing in response to an electrical stimulus (e.g., a stimulation pulse). Changes in a characteristic (e.g., an amplitude of a portion of the signal or area under the curve of the signal) of an ECAP signals occur as a function of how many axons have been activated by the delivered stimulation pulse. For a given set of parameter values that define the stimulation pulse and a given distance between the electrodes and target nerve, the detected ECAP signal may have a certain characteristic value (e.g., amplitude). Therefore, a system can determine that the distance between electrodes and nerves has increased or decreased in response to determining that the measured ECAP characteristic value has increased or decreased. For example, if the set of parameter values stays the same and the ECAP characteristic value of amplitude increases, the system can determine that the distance between electrodes and the nerve has decreased.</p><p id="p-0022" num="0021">In some examples, effective stimulation therapy may rely on a certain level of neural recruitment at a target nerve. This effective stimulation therapy may provide relief from one or more conditions (e.g., patient perceived pain) without an unacceptable level of side effects (e.g., overwhelming perception of stimulation). However, if the patient changes posture or otherwise engages in physical activity, the distance between the electrodes and the nerve changes as well. This change in distance can cause loss of effective therapy and/or side effects if the parameter values that define stimulation pulses are not adjusted to compensate for the change in distance. A system may change stimulation parameters to compensate for changes to the distance between electrodes and the target nerve, such as increasing stimulation intensity in response the distance increases and decreasing stimulation intensity in response to the distance decreasing. However, the magnitude of any changes to stimulation parameter values may be influenced by what posture state the patient moved to. Therefore, the system may perform more accurate changes to stimulation parameter values if the actual posture state of the patient is known and the parameter values selected to correspond to that posture state.</p><p id="p-0023" num="0022">As described herein, systems, devices, and techniques are described for determining a posture state of a patient based on one or more evoked compound action potential (ECAPs) signals sensed from a patient. As discussed above, when a patient moves, the distance between implanted electrodes and target nerves changes. For example, electrodes implanted along the spinal column move to a position closer to the spinal cord when a subject lies in a supine posture state as compared to a position farther from the spinal cord when the subject assumes a standing posture state. Similarly, the implanted electrodes may move closer to the spinal cord during a transient event such as when a subject coughs, laughs, or sneezes. Therefore, a characteristic value of the ECAP signal changes according to the stimulation pulse that evoked the ECAP signal and the distance between the electrodes and the nerves.</p><p id="p-0024" num="0023">A system may leverage the relationship between stimulation pulse parameters and the characteristic of the ECAP signal to determine the posture state currently occupied by the subject. For example, an implantable medical device (IMD) may deliver a plurality of stimulation pulses with different stimulation parameter values and detect the resulting ECAP signals from each respective pulse. Based on the detected ECAP signals, the IMD may determine a relationship between the stimulation parameter values and one or more characteristics of the resulting ECAP signals to identify the posture state of the subject. In one example, the relationship may be the amplitude values of the ECAP signals with respect to the amplitude of the respective pulses that evoked each ECAP signal. A steeper curve between these values may represent a posture state (e.g., the supine position) that has a closer distance between electrodes and the target nerve than a shallower curve between the values of a posture state (e.g., the prone position) having a further distance between electrodes and the target curve.</p><p id="p-0025" num="0024">In some examples, the IMD may employ the identified posture state as feedback to control therapy delivery to the subject. For example, the IMD may select stimulation parameter values for electrical stimulation based on the identified posture state or select a target ECAP value for the identified posture state for modulating stimulation parameter values. In some examples, the IMD may select a growth curve that corresponds to the identified posture state and adjust stimulation parameter values for subsequent stimulation pulses according to the selected growth curve. In addition, or alternatively, the IMD may transmit the identified posture state to an external device for display to a user (e.g., via an external programmer). In some examples, the IMD or other device may store the identified posture state and/or perform patient monitoring activities using identified posture states detected over time.</p><p id="p-0026" num="0025">In some examples, the ECAPs detected by an IMD may be ECAPs elicited by stimulation pulses intended to contribute to therapy of a patient or separate pulses configured to elicit ECAPs that are detectable by the IMD. Nerve impulses detectable as the ECAP signal travel quickly along the nerve fiber after the delivered stimulation pulse first depolarizes the nerve. If the stimulation pulse delivered by first electrodes has a pulse width that is too long, different electrodes configured to sense the ECAP will sense the stimulation pulse itself as an artifact that obscures the lower amplitude ECAP signal. However, the ECAP signal loses fidelity as the electrical potentials propagate from the electrical stimulus because different nerve fibers propagate electrical potentials at different speeds. Therefore, sensing the ECAP at a far distance from the stimulating electrodes may avoid the artifact caused by a stimulation pulse with a long pulse width, but the ECAP signal may lose fidelity needed to detect changes to the ECAP signal that occur when the electrode to target tissue distance changes. In other words, the system may not be able to identify, at any distance from the stimulation electrodes, ECAPs from stimulation pulses configured to provide a therapy to the patient.</p><p id="p-0027" num="0026">In some examples, ECAPs are detectable from pulses intended to contribute to the therapy of a patient. However, when these therapy pulses cause artifacts that interfere with the IMD's ability to detect the ECAP, the IMD may be configured to deliver pulses separate from pulses intended to contribute to therapy for the purpose of detecting ECAPs without interference from the pulses themselves. The pulses configured to elicit detectable ECAPs may be referred to as control pulses, and the pulses from which ECAPs are not detectable, but otherwise are adjusted according to the ECAP signals, may be referred to as informed pulses. In this manner, the plurality of control pulses may or may not contribute to therapy received by the patient, and the informed pulses may generally be configured to contribute to therapy received by the patient. Therefore, the IMD or other component associated with the medical device may determine values of one or more stimulation parameters that at least partially define the informed pulses based on an ECAP signal elicited by a control pulse instead. For example, the control pulses may be configured to elicit ECAPs used to detect the posture state of the patient. In this manner, the informed pulse may be informed by the ECAP elicited from a control pulse. The medical device or other component associated with the medical device may determine values of one or more stimulation parameters that at least partially define the control pulses based on an ECAP signal elicited by previous control pulse.</p><p id="p-0028" num="0027">Although electrical stimulation is generally described herein in the form of electrical stimulation pulses, electrical stimulation may be delivered in non-pulse form in other examples. For example, electrical stimulation may be delivered as a signal having various waveform shapes, frequencies, and amplitudes. Therefore, electrical stimulation in the form of a non-pulse signal may be a continuous signal than may have a sinusoidal waveform or other continuous waveform.</p><p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a conceptual diagram illustrating an example system <b>100</b> that includes an implantable medical device (IMD) <b>110</b> configured to deliver spinal cord stimulation (SCS) therapy and an external programmer <b>150</b>, in accordance with one or more techniques of this disclosure. Although the techniques described in this disclosure are generally applicable to a variety of medical devices including external devices and IMDs, application of such techniques to IMDs and, more particularly, implantable electrical stimulators (e.g., neurostimulators) will be described for purposes of illustration. More particularly, the disclosure will refer to an implantable SCS system for purposes of illustration, but without limitation as to other types of medical devices or other therapeutic applications of medical devices.</p><p id="p-0030" num="0029">As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, system <b>100</b> includes an IMD <b>110</b>, leads <b>130</b>A and <b>130</b>B, and external programmer <b>150</b> shown in conjunction with a patient <b>105</b>, who is ordinarily a human patient. In the example of <figref idref="DRAWINGS">FIG. <b>1</b></figref>, IMD <b>110</b> is an implantable electrical stimulator that is configured to generate and deliver electrical stimulation therapy to patient <b>105</b> via one or more electrodes of electrodes of leads <b>130</b>A and/or <b>130</b>B (collectively, &#x201c;leads <b>130</b>&#x201d;), e.g., for relief of chronic pain or other symptoms. In other examples, IMD <b>110</b> may be coupled to a single lead carrying multiple electrodes or more than two leads each carrying multiple electrodes. In some examples, the stimulation signals, or pulses, may be configured to elicit detectable ECAP signals that IMD <b>110</b> may use to determine the posture state occupied by patient <b>105</b> and/or determine how to adjust one or more parameters that define stimulation therapy. IMD <b>110</b> may be a chronic electrical stimulator that remains implanted within patient <b>105</b> for weeks, months, or even years. In other examples, IMD <b>110</b> may be a temporary, or trial, stimulator used to screen or evaluate the efficacy of electrical stimulation for chronic therapy. In one example, IMD <b>110</b> is implanted within patient <b>105</b>, while in another example, IMD <b>110</b> is an external device coupled to percutaneously implanted leads. In some examples, IMD <b>110</b> uses one or more leads, while in other examples, IMD <b>110</b> is leadless.</p><p id="p-0031" num="0030">IMD <b>110</b> may be constructed of any polymer, metal, or composite material sufficient to house the components of IMD <b>110</b> (e.g., components illustrated in <figref idref="DRAWINGS">FIG. <b>2</b></figref>) within patient <b>105</b>. In this example, IMD <b>110</b> may be constructed with a biocompatible housing, such as titanium or stainless steel, or a polymeric material such as silicone, polyurethane, or a liquid crystal polymer, and surgically implanted at a site in patient <b>105</b> near the pelvis, abdomen, or buttocks. In other examples, IMD <b>110</b> may be implanted within other suitable sites within patient <b>105</b>, which may depend, for example, on the target site within patient <b>105</b> for the delivery of electrical stimulation therapy. The outer housing of IMD <b>110</b> may be configured to provide a hermetic seal for components, such as a rechargeable or non-rechargeable power source. In addition, in some examples, the outer housing of IMD <b>110</b> is selected from a material that facilitates receiving energy to charge the rechargeable power source.</p><p id="p-0032" num="0031">Electrical stimulation energy, which may be constant current or constant voltage-based pulses, for example, is delivered from IMD <b>110</b> to one or more target tissue sites of patient <b>105</b> via one or more electrodes (not shown) of implantable leads <b>130</b>. In the example of <figref idref="DRAWINGS">FIG. <b>1</b></figref>, leads <b>130</b> carry electrodes that are placed adjacent to the target tissue of spinal cord <b>120</b>. One or more of the electrodes may be disposed at a distal tip of a lead <b>130</b> and/or at other positions at intermediate points along the lead. Leads <b>130</b> may be implanted and coupled to IMD <b>110</b>. The electrodes may transfer electrical stimulation generated by an electrical stimulation generator in IMD <b>110</b> to tissue of patient <b>105</b>. Although leads <b>130</b> may each be a single lead, lead <b>130</b> may include a lead extension or other segments that may aid in implantation or positioning of lead <b>130</b>. In some other examples, IMD <b>110</b> may be a leadless stimulator with one or more arrays of electrodes arranged on a housing of the stimulator rather than leads that extend from the housing. In addition, in some other examples, system <b>100</b> may include one lead or more than two leads, each coupled to IMD <b>110</b> and directed to similar or different target tissue sites.</p><p id="p-0033" num="0032">The electrodes of leads <b>130</b> may be electrode pads on a paddle lead, circular (e.g., ring) electrodes surrounding the body of the lead, conformable electrodes, cuff electrodes, segmented electrodes (e.g., electrodes disposed at different circumferential positions around the lead instead of a continuous ring electrode), any combination thereof (e.g., ring electrodes and segmented electrodes) or any other type of electrodes capable of forming unipolar, bipolar or multipolar electrode combinations for therapy. Ring electrodes arranged at different axial positions at the distal ends of lead <b>130</b> will be described for purposes of illustration.</p><p id="p-0034" num="0033">The deployment of electrodes via leads <b>130</b> is described for purposes of illustration, but arrays of electrodes may be deployed in different ways. For example, a housing associated with a leadless stimulator may carry arrays of electrodes, e.g., rows and/or columns (or other patterns), to which shifting operations may be applied. Such electrodes may be arranged as surface electrodes, ring electrodes, or protrusions. As a further alternative, electrode arrays may be formed by rows and/or columns of electrodes on one or more paddle leads. In some examples, electrode arrays include electrode segments, which are arranged at respective positions around a periphery of a lead, e.g., arranged in the form of one or more segmented rings around a circumference of a cylindrical lead. In other examples, one or more of leads <b>130</b> are linear leads having <b>8</b> ring electrodes along the axial length of the lead. In another example, the electrodes are segmented rings arranged in a linear fashion along the axial length of the lead and at the periphery of the lead.</p><p id="p-0035" num="0034">The stimulation parameter set of a therapy stimulation program that defines the stimulation pulses of electrical stimulation therapy by IMD <b>110</b> through the electrodes of leads <b>130</b> may include information identifying which electrodes have been selected for delivery of stimulation according to a stimulation program, the polarities of the selected electrodes, i.e., the electrode combination for the program, voltage or current amplitude, pulse frequency, pulse width, pulse shape of stimulation delivered by the electrodes. These stimulation parameters values that make up the stimulation parameter set that defines pulses may be predetermined parameter values defined by a user and/or automatically determined by system <b>100</b> based on one or more factors or user input.</p><p id="p-0036" num="0035">If control pulses separate from the informed pulses used for therapy are needed to elicit a detectable ECAP signal, system <b>100</b> may employ an ECAP test stimulation program that defines stimulation parameter values that define control pulses delivered by IMD <b>110</b> through at least some of the electrodes of leads <b>130</b>. These stimulation parameter values may include information identifying which electrodes have been selected for delivery of control pulses, the polarities of the selected electrodes, i.e., the electrode combination for the program, and voltage or current amplitude, pulse frequency, pulse width, and pulse shape of stimulation delivered by the electrodes. The stimulation signals (e.g., one or more stimulation pulses or a continuous stimulation waveform) defined by the parameters of each ECAP test stimulation program are configured to evoke a compound action potential from nerves. In some examples, the ECAP test stimulation program defines when the control pulses are to be delivered to the patient based on the frequency and/or pulse width of the informed pulses. However, the stimulation defined by each ECAP test stimulation program are not intended to provide or contribute to therapy for the patient. In addition, the ECAP test stimulation program may define the control pulses used for each sweep of pulses that are used to determine the posture state of the patient.</p><p id="p-0037" num="0036">Although <figref idref="DRAWINGS">FIG. <b>1</b></figref> is directed to SCS therapy, e.g., used to treat pain, in other examples system <b>100</b> may be configured to treat any other condition that may benefit from electrical stimulation therapy. For example, system <b>100</b> may be used to treat tremor, Parkinson's disease, epilepsy, a pelvic floor disorder (e.g., urinary incontinence or other bladder dysfunction, fecal incontinence, pelvic pain, bowel dysfunction, or sexual dysfunction), obesity, gastroparesis, or psychiatric disorders (e.g., depression, mania, obsessive compulsive disorder, anxiety disorders, and the like). In this manner, system <b>100</b> may be configured to provide therapy taking the form of deep brain stimulation (DBS), peripheral nerve stimulation (PNS), peripheral nerve field stimulation (PNFS), cortical stimulation (CS), pelvic floor stimulation, gastrointestinal stimulation, or any other stimulation therapy capable of treating a condition of patient <b>105</b>.</p><p id="p-0038" num="0037">In some examples, lead <b>130</b> includes one or more sensors configured to allow IMD <b>110</b> to monitor one or more parameters of patient <b>105</b>, such as patient activity, pressure, temperature, or other characteristics. The one or more sensors may be provided in addition to, or in place of, therapy delivery by lead <b>130</b>.</p><p id="p-0039" num="0038">IMD <b>110</b> is configured to deliver electrical stimulation therapy to patient <b>105</b> via selected combinations of electrodes carried by one or both of leads <b>130</b>, alone or in combination with an electrode carried by or defined by an outer housing of IMD <b>110</b>. The target tissue for the electrical stimulation therapy may be any tissue affected by electrical stimulation, which may be in the form of electrical stimulation pulses or continuous waveforms. In some examples, the target tissue includes nerves, smooth muscle or skeletal muscle. In the example illustrated by <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the target tissue is tissue proximate spinal cord <b>120</b>, such as within an intrathecal space or epidural space of spinal cord <b>120</b>, or, in some examples, adjacent nerves that branch off spinal cord <b>120</b>. Leads <b>130</b> may be introduced into spinal cord <b>120</b> in via any suitable region, such as the thoracic, cervical or lumbar regions. Stimulation of spinal cord <b>120</b> may, for example, prevent pain signals from traveling through spinal cord <b>120</b> and to the brain of patient <b>105</b>. Patient <b>105</b> may perceive the interruption of pain signals as a reduction in pain and, therefore, efficacious therapy results. In other examples, stimulation of spinal cord <b>120</b> may produce paresthesia which may be reduce the perception of pain by patient <b>105</b>, and thus, provide efficacious therapy results.</p><p id="p-0040" num="0039">IMD <b>110</b> is configured to generate and deliver electrical stimulation therapy to a target stimulation site within patient <b>105</b> via the electrodes of leads <b>130</b> to patient <b>105</b> according to one or more therapy stimulation programs. A therapy stimulation program defines values for one or more parameters (e.g., a parameter set) that define an aspect of the therapy delivered by IMD <b>110</b> according to that program. For example, a therapy stimulation program that controls delivery of stimulation by IMD <b>110</b> in the form of pulses may define values for voltage or current pulse amplitude, pulse width, pulse rate (e.g., pulse frequency), electrode combination, pulse shape, etc. for stimulation pulses delivered by IMD <b>110</b> according to that program.</p><p id="p-0041" num="0040">Furthermore, IMD <b>110</b> may be configured to deliver control stimulation to patient <b>105</b> via a combination of electrodes of leads <b>130</b>, alone or in combination with an electrode carried by or defined by an outer housing of IMD <b>110</b> in order to detect ECAP signals (e.g., control pulses and/or informed pulses). The tissue targeted by the stimulation may be the same or similar tissue targeted by the electrical stimulation therapy, but IMD <b>110</b> may deliver stimulation pulses for ECAP signal detection via the same, at least some of the same, or different electrodes. Since control stimulation pulses can be delivered in an interleaved manner with informed pulses (e.g., when the pulses configured to contribute to therapy interfere with the detection of ECAP signals or pulse sweeps intended for posture state detection via ECAP signals do not correspond to pulses intended for therapy purposes), a clinician and/or user may select any desired electrode combination for informed pulses. Like the electrical stimulation therapy, the control stimulation may be in the form of electrical stimulation pulses or continuous waveforms. In one example, each control stimulation pulse may include a balanced, bi-phasic square pulse that employs an active recharge phase. However, in other examples, the control stimulation pulses may include a monophasic pulse followed by a passive recharge phase. In other examples, a control pulse may include an imbalanced bi-phasic portion and a passive recharge portion. Although not necessary, a bi-phasic control pulse may include an interphase interval between the positive and negative phase to promote propagation of the nerve impulse in response to the first phase of the bi-phasic pulse. The control stimulation may be delivered without interrupting the delivery of the electrical stimulation informed pulses, such as during the window between consecutive informed pulses. The control pulses may elicit an ECAP signal from the tissue, and IMD <b>110</b> may sense the ECAP signal via two or more electrodes on leads <b>130</b>. In cases where the control stimulation pulses are applied to spinal cord <b>120</b>, the signal may be sensed by IMD <b>110</b> from spinal cord <b>120</b>.</p><p id="p-0042" num="0041">IMD <b>110</b> can deliver control stimulation to a target stimulation site within patient <b>105</b> via the electrodes of leads <b>130</b> according to one or more ECAP test stimulation programs. The one or more ECAP test stimulation programs may be stored in a storage device of IMD <b>110</b>. Each ECAP test program of the one or more ECAP test stimulation programs includes values for one or more parameters that define an aspect of the control stimulation delivered by IMD <b>110</b> according to that program, such as current or voltage amplitude, pulse width, pulse frequency, electrode combination, and, in some examples timing based on informed pulses to be delivered to patient <b>105</b>. In some examples, the ECAP test stimulation program may also define the number of pules and parameter values for each pulse of multiple pulses within a pulse sweep configured to obtain a plurality of ECAP signals for respective pulses in order to obtain the growth curve that IMD <b>110</b> may use to determine the current posture state of the patient. In some examples, IMD <b>110</b> delivers control stimulation to patient <b>105</b> according to multiple ECAP test stimulation programs.</p><p id="p-0043" num="0042">A user, such as a clinician or patient <b>105</b>, may interact with a user interface of an external programmer <b>150</b> to program IMD <b>110</b>. Programming of IMD <b>110</b> may refer generally to the generation and transfer of commands, programs, or other information to control the operation of IMD <b>110</b>. In this manner, IMD <b>110</b> may receive the transferred commands and programs from external programmer <b>150</b> to control stimulation, such as electrical stimulation therapy (e.g., informed pulses) and/or control stimulation (e.g., control pulses). For example, external programmer <b>150</b> may transmit therapy stimulation programs, ECAP test stimulation programs, stimulation parameter adjustments, therapy stimulation program selections, ECAP test program selections, user input, or other information to control the operation of IMD <b>110</b>, e.g., by wireless telemetry or wired connection.</p><p id="p-0044" num="0043">In some cases, external programmer <b>150</b> may be characterized as a physician or clinician programmer if it is primarily intended for use by a physician or clinician. In other cases, external programmer <b>150</b> may be characterized as a patient programmer if it is primarily intended for use by a patient. A patient programmer may be generally accessible to patient <b>105</b> and, in many cases, may be a portable device that may accompany patient <b>105</b> throughout the patient's daily routine. For example, a patient programmer may receive input from patient <b>105</b> when the patient wishes to terminate or change electrical stimulation therapy, or when a patient perceives stimulation being delivered. In general, a physician or clinician programmer may support selection and generation of programs by a clinician for use by IMD <b>110</b>, whereas a patient programmer may support adjustment and selection of such programs by a patient during ordinary use. In other examples, external programmer <b>150</b> may include, or be part of, an external charging device that recharges a power source of IMD <b>110</b>. In this manner, a user may program and charge IMD <b>110</b> using one device, or multiple devices.</p><p id="p-0045" num="0044">As described herein, information may be transmitted between external programmer <b>150</b> and IMD <b>110</b>. Therefore, IMD <b>110</b> and external programmer <b>150</b> may communicate via wireless communication using any techniques known in the art. Examples of communication techniques may include, for example, radiofrequency (RF) telemetry and inductive coupling, but other techniques are also contemplated. In some examples, external programmer <b>150</b> includes a communication head that may be placed proximate to the patient's body near the IMD <b>110</b> implant site to improve the quality or security of communication between IMD <b>110</b> and external programmer <b>150</b>. Communication between external programmer <b>150</b> and IMD <b>110</b> may occur during power transmission or separate from power transmission.</p><p id="p-0046" num="0045">In some examples, IMD <b>110</b>, in response to commands from external programmer <b>150</b>, delivers electrical stimulation therapy according to a plurality of therapy stimulation programs to a target tissue site of the spinal cord <b>120</b> of patient <b>105</b> via electrodes (not depicted) on leads <b>130</b>. In some examples, IMD <b>110</b> modifies therapy stimulation programs as therapy needs of patient <b>105</b> evolve over time. For example, the modification of the therapy stimulation programs may cause the adjustment of at least one parameter of the plurality of informed pulses. When patient <b>105</b> receives the same therapy for an extended period, the efficacy of the therapy may be reduced. In some cases, parameters of the plurality of informed pulses may be automatically updated.</p><p id="p-0047" num="0046">As described herein, IMD <b>110</b> may be configured to detect ECAP signals which are representative of the number of nerve fibers activated by a delivered stimulation signal (e.g., a delivered pulse). Since the distance between both the stimulating and sensing electrodes and the target nerve changes for different posture states (e.g., a static posture and/or activity component), a characteristic value of one or more ECAP signals can be indicative of the posture state currently occupied when the one or more ECAP signals were detected by IMD <b>110</b>. In one example, IMD <b>110</b> may deliver a plurality of pulses defined by different parameter values and detect the respective ECAP signal elicited by each pulse. IMD <b>110</b> may determine a relationship between characteristic values from each ECAP signal and the different parameter values of the pulses, and this relationship may be different for each different posture state. In one example, the relationship may be a curve of the characteristic values of the ECAP (e.g., an amplitude of the ECAP signal) vs. values of a stimulation parameter (e.g., the current amplitude of the respective pulses) that elicited each ECAP signal from which the characteristic values were derived. Each posture state may have a respective curve that varies in slope and/or intercept. In this manner, IMD <b>110</b> may determine the posture state by comparing the determined relationship to previously stored relationships for each posture state of a plurality of different posture states.</p><p id="p-0048" num="0047">In some examples, IMD <b>110</b> may detect ECAP signals from pulses delivered for the purpose of providing therapy to the patient. In other examples, the pulses configured to provide therapy to the patient may interfere with the detection of the ECAP signals. In this manner, the therapy pulses may be referred to as informed pulses because the parameter values that define the informed pulses may be determined by IMD <b>110</b> according to ECAP signals elicited from different control pulses.</p><p id="p-0049" num="0048">In one example, each informed pulse may have a pulse width greater than approximately 300 &#x25a1;s, such as between approximately 300 &#x25a1;s and 1000 &#x25a1;s (i.e., 1 millisecond) in some examples. At these pulse widths, IMD <b>110</b> may not sufficiently detect an ECAP signal because the informed pulse is also detected as an artifact that obscures the ECAP signal. When pulses intended to provide therapy have these longer pulse widths, IMD <b>110</b> may deliver control stimulation in the form of control pulses in order to detect ECAP signals. The control pulses may have pulse widths of less than the interfering therapy pulses (e.g., less than approximately 300 &#x25a1;s), such as a bi-phasic pulse with each phase having a duration of approximately 100 &#x25a1;&#x25a1;s. Since the control pulses may have shorter pulse widths than the informed pulses, the ECAP signal may be sensed and identified following each control pulse and used to inform IMD <b>110</b> about any changes that should be made to the informed pulses (and control pulses in some examples). In general, the term &#x201c;pulse width&#x201d; refers to the collective duration of every phase, and interphase interval when appropriate, of a single pulse. A single pulse includes a single phase in some examples (i.e., a monophasic pulse) or two or more phases in other examples (e.g., a bi-phasic pulse or a tri-phasic pulse). The pulse width defines a period of time beginning with a start time of a first phase of the pulse and concluding with an end time of a last phase of the pulse (e.g., a biphasic pulse having a positive phase lasting 100 &#x25a1;s, a negative phase lasting 100 &#x25a1;s, and an interphase interval lasting 30 &#x25a1;s defines a pulse width of 230 &#x25a1;s). In other examples, a biphasic pulse may have a positive phase lasting 120 &#x25a1;s, a negative phase lasting 120 &#x25a1;s, and an interphase interval lasting 30 &#x25a1;s defines a pulse width of 270 &#x25a1;s.</p><p id="p-0050" num="0049">In this disclosure, efficacy of electrical stimulation therapy may be indicated by one or more characteristics (e.g. an amplitude of or between one or more peaks or an area under the curve of one or more peaks) of an action potential that is evoked by a stimulation pulse delivered by IMD <b>110</b> (i.e., a characteristic value of the ECAP signal). Electrical stimulation therapy delivery by leads <b>130</b> of IMD <b>110</b> may cause neurons within the target tissue to evoke a compound action potential that travels up and down the target tissue, eventually arriving at sensing electrodes of IMD <b>110</b>. Furthermore, stimulation (e.g., therapy pulses and/or control pulses) may also elicit at least one ECAP signal, and ECAPs responsive to control stimulation may also be a surrogate for the effectiveness of the therapy. The amount of action potentials (e.g., number of neurons propagating action potential signals) that are evoked may be based on the various parameters of electrical stimulation pulses such as amplitude, pulse width, frequency, pulse shape (e.g., slew rate at the beginning and/or end of the pulse), etc. The slew rate may define the rate of change of the voltage and/or current amplitude of the pulse at the beginning and/or end of each pulse or each phase within the pulse. For example, a very high slew rate indicates a steep or even near vertical edge of the pulse, and a low slew rate indicates a longer ramp up (or ramp down) in the amplitude of the pulse. In some examples, these parameters contribute to an intensity of the electrical stimulation. In addition, a characteristic of the ECAP signal (e.g., an amplitude) may change based on the distance between the stimulation electrodes and the nerves subject to the electrical field produced by the delivered control stimulation pulses.</p><p id="p-0051" num="0050">Example techniques for adjusting stimulation parameter values for informed pulses (e.g., pulses configured to contribute to therapy for the patient) are based on comparing the value of a characteristic of a measured ECAP signal to a target ECAP characteristic value. During delivery of control stimulation pulses defined by one or more ECAP test stimulation programs, IMD <b>110</b>, via two or more electrodes interposed on leads <b>130</b>, senses electrical potentials of tissue of the spinal cord <b>120</b> of patient <b>105</b> to measure the electrical activity of the tissue. IMD <b>110</b> senses ECAPs from the target tissue of patient <b>105</b>, e.g., with electrodes on one or more leads <b>130</b> and associated sense circuitry. In some examples, IMD <b>110</b> receives a signal indicative of the ECAP from one or more sensors, e.g., one or more electrodes and circuitry, internal or external to patient <b>105</b>. Such an example signal may include a signal indicating an ECAP of the tissue of patient <b>105</b>. Examples of the one or more sensors include one or more sensors configured to measure a compound action potential of patient <b>105</b>, or a physiological effect indicative of a compound action potential. For example, to measure a physiological effect of a compound action potential, the one or more sensors may be an accelerometer, a pressure sensor, a bending sensor, a sensor configured to detect a posture of patient <b>105</b>, or a sensor configured to detect a respiratory function of patient <b>105</b>. However, in other examples, external programmer <b>150</b> receives a signal indicating a compound action potential in the target tissue of patient <b>105</b> and transmits a notification to IMD <b>110</b>.</p><p id="p-0052" num="0051">In the example of <figref idref="DRAWINGS">FIG. <b>1</b></figref>, IMD <b>110</b> described as performing a plurality of processing and computing functions. However, external programmer <b>150</b> instead may perform one, several, or all of these functions. In this alternative example, IMD <b>110</b> functions to relay sensed signals to external programmer <b>150</b> for analysis, and external programmer <b>150</b> transmits instructions to IMD <b>110</b> to adjust the one or more parameters defining the electrical stimulation therapy based on analysis of the sensed signals. For example, IMD <b>110</b> may relay the sensed signal indicative of an ECAP to external programmer <b>150</b>. External programmer <b>150</b> may compare the parameter value of the ECAP to the target ECAP characteristic value, and in response to the comparison, external programmer <b>150</b> may instruct IMD <b>110</b> to adjust one or more stimulation parameter that defines the electrical stimulation informed pulses and, in some examples, control pulses, delivered to patient <b>105</b>.</p><p id="p-0053" num="0052">In the example techniques described in this disclosure, the control stimulation parameters and the target ECAP characteristic values may be initially set at the clinic but may be set and/or adjusted at home by patient <b>105</b>. For example, the target ECAP characteristics may be changed to match or be a fraction of a stimulation threshold. In some examples, target ECAP characteristics and/or growth curves may be specific to respective different posture states of the patient. And, as discussed herein, the patient's posture state may be determined based on one or more characteristic values of ECAP signals detected for the patient. Once the target ECAP characteristic values are set, the example techniques allow for automatic adjustment of informed pulse parameters to maintain consistent volume of neural activation and consistent perception of therapy for the patient when the electrode-to-neuron distance changes. The ability to change the stimulation parameter values may also allow the therapy to have long term efficacy, with the ability to keep the intensity of the stimulation (e.g., as indicated by the ECAP) consistent by comparing the measured ECAP values to the target ECAP characteristic value. IMD <b>110</b> may perform these changes without intervention by a physician or patient <b>105</b>.</p><p id="p-0054" num="0053">In some examples, the system changes the target ECAP characteristic value and/or growth rate(s) over a period of time, such as according to a change to a stimulation threshold (e.g., a perception threshold or detection threshold). The system may be programmed to change the target ECAP characteristic in order to adjust the intensity of informed pulses to provide varying sensations to the patient (e.g., increase or decrease the volume of neural activation). Although the system may change the target ECAP characteristic value, received ECAP signals may still be used by the system to adjust one or more parameter values of the informed pulses and/or control pulses in order to meet the target ECAP characteristic value.</p><p id="p-0055" num="0054">One or more devices within system <b>100</b>, such as IMD <b>110</b> and/or external programmer <b>150</b>, may perform various functions as described herein. For example, IMD <b>110</b> may include stimulation circuitry configured to deliver electrical stimulation, sensing circuitry configured to sense a plurality ECAP signals, and processing circuitry. The processing circuitry may be configured to control the stimulation circuitry to deliver a plurality of electrical stimulation pulses having different amplitude values and control the sensing circuitry to detect, after delivery of each electrical stimulation pulse of the plurality of electrical stimulation pulses, a respective ECAP signal of the plurality of ECAP signals. The processing circuitry of IMD <b>110</b> may then determine, based on the plurality of ECAP signals, a posture state of the patient.</p><p id="p-0056" num="0055">In some examples, IMD <b>110</b> may include the stimulation circuitry, the sensing circuitry, and the processing circuitry. However, in other examples, one or more additional devices may be part of the system that performs the functions described herein. For example, IMD <b>110</b> may include the stimulation circuitry and the sensing circuitry, but external programmer <b>150</b> or other external device may include the processing circuitry that at least determines the posture state of the patient. IMD <b>110</b> may transmit the sensed ECAP signals, or data representing the ECAP signal, to external programmer <b>150</b>, for example. Therefore, the processes described herein may be performed by multiple devices in a distributed system. In some examples, system <b>100</b> may include one or more electrodes that deliver and/or sense electrical signals. Such electrodes may be configured to sense the ECAP signals. In some examples, the same electrodes may be configured to sense signals representative of transient movements of the patient. In other examples, other sensors, such as accelerometers, gyroscopes, or other movement sensors may be configured to sense movement of the patient that indicates the patient may have transitioned to a different posture state. In this manner, IMD <b>110</b> may redetect the posture state of the patient from new ECAP signals.</p><p id="p-0057" num="0056">The posture state of the patient may be a static posture of the patient and/or an activity level of the patient. For example, the static posture may be a prone position, supine position, left lateral recumbency (lying left side position), right lateral recumbency (lying right side position), reclining position, sitting position, or standing position. Each of these positions may be a separate posture state. The posture state may also, or alternatively, be an activity level of the patient. For example, the posture state may include activities such as walking, running, bicycle riding, driving in a car, etc. In some examples, the posture state may represent a static posture and an activity. These combinations of posture and activity may represent situations where the patient is in a static posture while moving, such as being in a vehicle that is moving. Any of these posture states may be included in a plurality of posture states from which IMD <b>110</b> may determine the current posture state of the patient. This this manner, the processing circuitry of IMD <b>110</b> may be configured to determine the posture state by selecting the posture state from a plurality of posture states, where the plurality of posture states may include at least two of a prone position, a supine position, a sitting position, and a standing position.</p><p id="p-0058" num="0057">As discussed herein, the determined posture state may be stored in memory, transmitted to another device, and/or presented to a user via a user interface. In this manner, a log of patient movement may be constructed over time. In some examples, IMD <b>110</b> may determine a therapy is effective by detecting greater movement by the patient that may indicate pain is no longer restricting patient movement. In some examples, IMD <b>110</b> may be configured to adjust, based on the determined posture state, a value of one or more parameters that at least partially define electrical stimulation therapy for the patient. For example, IMD <b>110</b> may select specific parameter values for the detected posture state, select a target ECAP characteristic value for the detected posture state, and/or select a growth curve for the detected posture state for use in increasing or decreasing stimulation parameters intended to maintain volume of activation of nerve fibers (e.g., maintain consistent therapy levels).</p><p id="p-0059" num="0058">As discussed above, IMD <b>110</b> may deliver a plurality of electrical stimulation pulses having different amplitude values in order to elicit respective ECAP signals having different characteristic values representing the ECAP signals. In general, the different amplitude values are lower than a discomfort threshold for the patient. However, in some examples, one or more pulses may have an amplitude that exceeds the discomfort threshold for the patient. In some examples, the different amplitudes may be current or voltage amplitudes of the pulses. The amplitudes may be selected to have as low values as possible in order to reduce any perceived stimulus by the patient. The discomfort threshold may be determined by a clinician during initial implantation, but the clinician or patient may update the discomfort threshold over time. IMD <b>110</b> may select the amplitudes of the delivered pulses to be less than the discomfort threshold or less than some percentage of the discomfort threshold (e.g., less than some safety factor less than the discomfort threshold).</p><p id="p-0060" num="0059">In some examples, the processing circuitry of IMD <b>110</b> may be configured to determine characteristic values for the plurality of ECAP signals detected after each of the plurality of electrical stimulation pulses. The characteristic value for each ECAP signal is a representation of the ECAP signal according to some metric. For example, the characteristic value may be the amplitude between the N<b>1</b> and P<b>2</b> toughs/peaks in the ECAP signal or the area under the curve of a trough/peak (e.g., the P<b>2</b> peak) of the ECAP signal. These characteristic values may thus be used as a metric derived from the ECAP signal the represents the relative nerve fiber activation caused by the delivered stimulation pulse. In this manner, each ECAP signal of the plurality of ECAP signals will be associated with a respective characteristic value of the characteristic values. As long as the distance between the electrodes and target nerve remains relatively constant during delivery of the pulses and sensing of the respective ECAP signals, higher amplitude pulses generally cause more neural recruitment and larger ECAP signals.</p><p id="p-0061" num="0060">IMD <b>110</b> may then determine a growth curve representing a relationship between the characteristic values of the plurality of ECAP signals and the different amplitude values of the plurality of electrical stimulation pulses from which the ECAP signals were evoked. This growth curve may be generally linear when comparing the voltage amplitude of the ECAP signals to the current amplitudes from each respective stimulation pulse (e.g., as shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref> below). IMD <b>110</b> may then compare the determined growth curve to a plurality of calibration growth curves associated with respective posture states of a plurality of posture states. These calibration growth curves may be growth curves previously associated with respective posture states (i.e., known growth curves expected for each posture state). IMD <b>110</b> may then determine, based on the comparison, the posture state of the patient. For example, IMD <b>110</b> may select the posture state that has the calibration growth curve closest to the determined growth curve.</p><p id="p-0062" num="0061">The delivery of the electrical stimulation pulses having different amplitude values may be referred to as a sweep of pulses. For example, IMD <b>110</b> may be configured to control the stimulation circuitry to deliver the plurality of electrical stimulation pulses as a sweep of pulses comprising iteratively increasing amplitude values. However, the pulses may have decreasing amplitude values or randomly selected amplitude values in other examples. IMD <b>110</b> may detect the ECAP signal from the previous stimulation pulse prior to delivering the next stimulation pulse. Therefore, IMD <b>110</b> may schedule a detection window of time between the delivery of each pulse within the sweep of pulses.</p><p id="p-0063" num="0062">In some examples, IMD <b>110</b> may start the sweep of pulses over again if movement of the patient is detected. IMD may thus control, during a first period of time, the stimulation circuitry to deliver a first set of electrical stimulation pulses from which respective ECAP signals of a first set of ECAP signals can be detected. However, IMD <b>110</b> may be configured to identify, during the first period of time, a transient movement of the patient. Such a transient movement may be a cough, sneeze, laugh, or bending motion of the patient that would likely cause the distance between the electrodes and target tissue to change. Responsive to identifying the transient movement, IMD <b>110</b> may terminate the first period of time and the delivery of the first set of electrical stimulation pulses and discard the first set of ECAP signals. The first set of ECAP signals may not be valuable because the posture state of the patient has likely changed. IMD <b>110</b> may monitor the transient movement and then determine that the transient movement has ended. For example, IMD <b>110</b> may determine that more movement has not been detected for a predetermined period of time. Then, after the transient movement has ended, IMD <b>110</b> may be configured to control the stimulation circuitry to deliver the second set of electrical stimulation pulses and control the sensing circuitry to detect the second set of ECAP signals. This process can continue until a full sweep is completed. In this manner, IMD <b>110</b> can restart the sweep of pulses in response to determining that the transient movement has ended in an attempt to determine the new posture state of the patient from ECAP signals.</p><p id="p-0064" num="0063">In some examples, IMD <b>110</b> may detect the transient movement from the ECAP signals themselves during the sweep. For example, IMD <b>110</b> may determine that the ECAP characteristic value is not within an acceptable deviation from a linear increase with increasing pulse intensity. Since the overall growth curve for a posture state may typically be linear, IMD <b>110</b> may analyze determined characteristic values from subsequent ECAP signals during the sweep to determine if the characteristic values start to deviate from the expected linear growth curve by a predetermined deviation (e.g., a magnitude or a percentage). If IMD <b>110</b> determines that the ECAP characteristic values are increasing or decreasing in an exponential or logarithmic manner, or the characteristic values oscillate during the sweep, IMD <b>110</b> may determine that patient transient movement may be the cause of the unexpected ECAP characteristic values.</p><p id="p-0065" num="0064">In other examples, IMD <b>110</b> may detect the transient movement using other detected signals and/or sensors. In one example, IMD <b>110</b> may receive an electromyogram (EMG) signal from electrodes of leads <b>130</b>, or some other electrodes of a connected lead or from a separate device, during the sweep. IMD <b>110</b> may analyze the EMG signal and determine that patient <b>105</b> has engaged in transient movement during the sweep. In other examples, IMD <b>110</b> may receive information from other sensors during the sweep that may indicate transient movement. For example, a sensor may include one or more accelerometers (or other movement detecting devices), and processing circuitry of IMD <b>110</b> may receive information from the sensor and determine that patient <b>105</b> has engaged in transient movement based on the movement detected by the one or more accelerometers. In some examples, IMD <b>110</b> may monitor information from two or more sensors, and/or using two or more sensing modalities, and determine that a transient movement occurred during a sweep based on this information from these two or more sensors and/or two or more modalities. IMD <b>110</b> may determine a transient movement if any one of the sensors and/or sensing modalities indicate that a transient movement occurred. Alternatively, IMD <b>110</b> may require that information from at least two or more sensors and/or sensing modalities agree that a transient movement has occurred.</p><p id="p-0066" num="0065">IMD <b>110</b> may also determine the calibration growth curve for each of a plurality of posture states. For example, IMD <b>110</b> may be configured to, for each posture state of the plurality of posture states, control the stimulation circuitry to deliver a plurality of calibration electrical stimulation pulses having different amplitude values while the patient assumes the posture state and control the sensing circuitry to detect, after delivery of each calibration electrical stimulation pulse of the plurality of calibration electrical stimulation pulses, a respective calibration ECAP signal of a plurality of calibration ECAP signals. IMD <b>110</b> may then determine calibration characteristic values for the plurality of calibration ECAP signals, where each calibration ECAP signal of the plurality of calibration ECAP signals are associated with a respective characteristic value of the calibration characteristic values. IMD <b>110</b> may then determine a respective calibration growth curve, of the plurality of calibration growth curves, that represents the relationship between the calibration characteristic values of the plurality of calibration ECAP signals and the different amplitude values of the plurality of calibration electrical stimulation pulses from which the calibration ECAP signals were evoked. IMD <b>110</b> may perform this process again at any time, as a scheduled task or in response to a trigger. For example, IMD <b>110</b> may recalibrate these calibration growth curves in response to receiving information indicative of ineffective therapy, a user request to recalibrate the growth curves, and/or determining that a predetermined time has elapsed.</p><p id="p-0067" num="0066">As described herein, IMD <b>110</b> may then compare a growth curve determined during posture state sensing to the most current calibration growth curves for the posture states. IMD <b>110</b> may select the posture state associated with the calibrated growth curve closest to the determined growth curve. The comparison may include comparing the slope of the growth curves and/or the offset of the growth curves (e.g., the magnitude of the y-intercept of the growth curve). In some examples, IMD <b>110</b> may employ an acceptable deviation for the growth curve when compared to the calibration growth curves before IMD <b>110</b> will positively identify the posture state. This mechanism may prevent IMD <b>110</b> from identifying a posture state when the determined growth curve does not appropriately match any calibrated growth curve in memory. If the determined growth curve is outside of the acceptable deviation, IMD <b>110</b> may responsively perform another sweep for ECAP signals in order to generate a new growth curve. In other examples, IMD <b>110</b> may determine the posture state from another sensor, such as an accelerometer. In some examples in which IMD <b>110</b> cannot positively determine the posture state of the patient, IMD <b>110</b> may revert to a &#x201c;safe mode&#x201d; in which stimulation parameter value adjustment is performed based on a conservative parameter value adjustment scheme or disable parameter value adjustment based on posture state detection.</p><p id="p-0068" num="0067">Although in one example IMD <b>110</b> takes the form of an SCS device, in other examples, <b>1</b>MB <b>110</b> takes the form of any combination of deep brain stimulation (DBS) devices, implantable cardioverter defibrillators (ICDs), pacemakers, cardiac resynchronization therapy devices (CRT-Ds), left ventricular assist devices (LVADs), implantable sensors, orthopedic devices, or drug pumps, as examples. Moreover, techniques of this disclosure may be used to determine stimulation thresholds (e.g., perception thresholds and detection thresholds) associated any one of the aforementioned IMDs and then use a stimulation threshold to inform the intensity (e.g., stimulation levels) of therapy.</p><p id="p-0069" num="0068"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a block diagram illustrating an example configuration of components of an IMD <b>200</b>, in accordance with one or more techniques of this disclosure. IMD <b>200</b> may be an example of IMD <b>110</b> of <figref idref="DRAWINGS">FIG. <b>1</b></figref>. In the example shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, IMD <b>200</b> includes stimulation generation circuitry <b>202</b>, switch circuitry <b>204</b>, sensing circuitry <b>206</b>, telemetry circuitry <b>208</b>, processing circuitry <b>210</b>, storage device <b>212</b>, sensor(s) <b>222</b>, and power source <b>224</b>.</p><p id="p-0070" num="0069">In the example shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, storage device <b>212</b> stores patient posture state data <b>240</b>, stimulation parameter settings <b>242</b>, and calibration instructions <b>244</b> in separate memories within storage device <b>212</b> or separate areas within storage device <b>212</b>. In some examples, stimulation parameter settings <b>242</b> may include stimulation parameter values for respective different stimulation programs selectable by the clinician or patient for therapy. In this manner, each stored therapy stimulation program, or set of stimulation parameter values, of stimulation parameter settings <b>242</b> defines values for a set of electrical stimulation parameters (e.g., a stimulation parameter set), such as a stimulation electrode combination, electrode polarity, current or voltage amplitude, pulse width, pulse rate, and pulse shape. Storage device <b>212</b> may also store ECAP test stimulation programs, as part of stimulation parameter settings <b>242</b> or as a separate memory area, that defines values for a set of electrical stimulation parameters (e.g., a control stimulation parameter set) configured to elicit a detectable ECAP signal, such as a stimulation electrode combination, electrode polarity, current or voltage amplitude, pulse width, pulse rate, and pulse shape. ECAP test stimulation programs may also have additional information such as instructions regarding when to deliver control pulses based on the pulse width and/or frequency of the informed pulses defined in stimulation parameter settings <b>242</b>.</p><p id="p-0071" num="0070">Accordingly, in some examples, stimulation generation circuitry <b>202</b> generates electrical stimulation signals in accordance with the electrical stimulation parameters noted above. Other ranges of stimulation parameter values may also be useful and may depend on the target stimulation site within patient <b>105</b>. While stimulation pulses are described, stimulation signals may be of any form, such as continuous-time signals (e.g., sine waves) or the like. Switch circuitry <b>204</b> may include one or more switch arrays, one or more multiplexers, one or more switches (e.g., a switch matrix or other collection of switches), or other electrical circuitry configured to direct stimulation signals from stimulation generation circuitry <b>202</b> to one or more of electrodes <b>232</b>, <b>234</b>, or directed sensed signals from one or more of electrodes <b>232</b>, <b>234</b> to sensing circuitry <b>206</b>. In other examples, stimulation generation circuitry <b>202</b> and/or sensing circuitry <b>206</b> may include sensing circuitry to direct signals to and/or from one or more of electrodes <b>232</b>, <b>234</b>, which may or may not also include switch circuitry <b>204</b>.</p><p id="p-0072" num="0071">Sensing circuitry <b>206</b> is configured to monitor signals from any combination of electrodes <b>232</b>, <b>234</b>. In some examples, sensing circuitry <b>206</b> includes one or more amplifiers, filters, and analog-to-digital converters. Sensing circuitry <b>206</b> may be used to sense physiological signals, such as ECAP signals. In some examples, sensing circuitry <b>206</b> detects ECAPs from a particular combination of electrodes <b>232</b>, <b>234</b>. In some cases, the particular combination of electrodes for sensing ECAPs includes different electrodes than a set of electrodes <b>232</b>, <b>234</b> used to deliver stimulation pulses. Alternatively, in other cases, the particular combination of electrodes used for sensing ECAPs includes at least one of the same electrodes as a set of electrodes used to deliver stimulation pulses to patient <b>105</b>. Sensing circuitry <b>206</b> may provide signals to an analog-to-digital converter, for conversion into a digital signal for processing, analysis, storage, or output by processing circuitry <b>210</b>.</p><p id="p-0073" num="0072">Telemetry circuitry <b>208</b> supports wireless communication between IMD <b>200</b> and an external programmer (not shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>) or another computing device under the control of processing circuitry <b>210</b>. Processing circuitry <b>210</b> of IMD <b>200</b> may receive, as updates to programs, values for various stimulation parameters such as amplitude and electrode combination, from the external programmer via telemetry circuitry <b>208</b>. Processing circuitry <b>210</b> may store updates to the stimulation parameter settings <b>242</b> or any other data in storage device <b>212</b>. Telemetry circuitry <b>208</b> in IMD <b>200</b>, as well as telemetry circuits in other devices and systems described herein, such as the external programmer, may accomplish communication by radiofrequency (RF) communication techniques. In addition, telemetry circuitry <b>208</b> may communicate with an external medical device programmer (not shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>) via proximal inductive interaction of IMD <b>200</b> with the external programmer. The external programmer may be one example of external programmer <b>150</b> of <figref idref="DRAWINGS">FIG. <b>1</b></figref>. Accordingly, telemetry circuitry <b>208</b> may send information to the external programmer on a continuous basis, at periodic intervals, or upon request from IMD <b>110</b> or the external programmer.</p><p id="p-0074" num="0073">Processing circuitry <b>210</b> may include any one or more of a microprocessor, a controller, a digital signal processor (DSP), an application specific integrated circuit (ASIC), a field-programmable gate array (FPGA), discrete logic circuitry, or any other processing circuitry configured to provide the functions attributed to processing circuitry <b>210</b> herein may be embodied as firmware, hardware, software or any combination thereof. Processing circuitry <b>210</b> controls stimulation generation circuitry <b>202</b> to generate stimulation signals according to stimulation parameter settings <b>242</b> and any other instructions stored in storage device <b>212</b> to apply stimulation parameter values specified by one or more of programs, such as amplitude, pulse width, pulse rate, and pulse shape of each of the stimulation signals.</p><p id="p-0075" num="0074">In the example shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the set of electrodes <b>232</b> includes electrodes <b>232</b>A, <b>232</b>B, <b>232</b>C, and <b>232</b>D, and the set of electrodes <b>234</b> includes electrodes <b>234</b>A, <b>234</b>B, <b>234</b>C, and <b>234</b>D. In other examples, a single lead may include all eight electrodes <b>232</b> and <b>234</b> along a single axial length of the lead. Processing circuitry <b>210</b> also controls stimulation generation circuitry <b>202</b> to generate and apply the stimulation signals to selected combinations of electrodes <b>232</b>, <b>234</b>. In some examples, stimulation generation circuitry <b>202</b> includes a switch circuit (instead of, or in addition to, switch circuitry <b>204</b>) that may couple stimulation signals to selected conductors within leads <b>230</b>, which, in turn, deliver the stimulation signals across selected electrodes <b>232</b>, <b>234</b>. Such a switch circuit may be a switch array, switch matrix, multiplexer, or any other type of switching circuit configured to selectively couple stimulation energy to selected electrodes <b>232</b>, <b>234</b> and to selectively sense bioelectrical neural signals of a spinal cord of the patient (not shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>) with selected electrodes <b>232</b>, <b>234</b>.</p><p id="p-0076" num="0075">In other examples, however, stimulation generation circuitry <b>202</b> does not include a switch circuit and switch circuitry <b>204</b> does not interface between stimulation generation circuitry <b>202</b> and electrodes <b>232</b>, <b>234</b>. In these examples, stimulation generation circuitry <b>202</b> includes a plurality of pairs of voltage sources, current sources, voltage sinks, or current sinks connected to each of electrodes <b>232</b>, <b>234</b> such that each pair of electrodes has a unique signal circuit. In other words, in these examples, each of electrodes <b>232</b>, <b>234</b> is independently controlled via its own signal circuit (e.g., via a combination of a regulated voltage source and sink or regulated current source and sink), as opposed to switching signals between electrodes <b>232</b>, <b>234</b>.</p><p id="p-0077" num="0076">Electrodes <b>232</b>, <b>234</b> on respective leads <b>230</b> may be constructed of a variety of different designs. For example, one or both of leads <b>230</b> may include one or more electrodes at each longitudinal location along the length of the lead, such as one electrode at different perimeter locations around the perimeter of the lead at each of the locations A, B, C, and D. In one example, the electrodes may be electrically coupled to stimulation generation circuitry <b>202</b>, e.g., via switch circuitry <b>204</b> and/or switching circuitry of the stimulation generation circuitry <b>202</b>, via respective wires that are straight or coiled within the housing of the lead and run to a connector at the proximal end of the lead. In another example, each of the electrodes of the lead may be electrodes deposited on a thin film. The thin film may include an electrically conductive trace for each electrode that runs the length of the thin film to a proximal end connector. The thin film may then be wrapped (e.g., a helical wrap) around an internal member to form the lead <b>230</b>. These and other constructions may be used to create a lead with a complex electrode geometry.</p><p id="p-0078" num="0077">Although sensing circuitry <b>206</b> is incorporated into a common housing with stimulation generation circuitry <b>202</b> and processing circuitry <b>210</b> in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, in other examples, sensing circuitry <b>206</b> may be in a separate housing from IMD <b>200</b> and may communicate with processing circuitry <b>210</b> via wired or wireless communication techniques. In some examples, one or more of electrodes <b>232</b> and <b>234</b> are suitable for sensing the ECAPs. For instance, electrodes <b>232</b> and <b>234</b> may sense the voltage amplitude of a portion of the ECAP signals, where the sensed voltage amplitude, such as the voltage difference between features within the signal, is a characteristic the ECAP signal.</p><p id="p-0079" num="0078">Storage device <b>212</b> may be configured to store information within IMD <b>200</b> during operation. Storage device <b>212</b> may include a computer-readable storage medium or computer-readable storage device. In some examples, storage device <b>212</b> includes one or more of a short-term memory or a long-term memory. Storage device <b>212</b> may include, for example, random access memories (RAM), dynamic random access memories (DRAM), static random access memories (SRAM), magnetic discs, optical discs, flash memories, or forms of electrically programmable memories (EPROM) or electrically erasable and programmable memories (EEPROM). In some examples, storage device <b>212</b> is used to store data indicative of instructions for execution by processing circuitry <b>210</b>. As discussed above, storage device <b>212</b> is configured to store patient posture state data <b>240</b>, stimulation parameter settings <b>242</b>, and calibration instructions <b>244</b>.</p><p id="p-0080" num="0079">Patient posture state data <b>240</b> may store growth curves or other ECAP related data and indications of one or more posture states to which the growth curves or other ECAP related data is associated. For example, each posture state may be associated with a respective a growth curve of ECAP characteristic values. In some examples, multiple posture states may be associated with the same growth curve. In this manner, processing circuitry <b>210</b> may compare a newly determined growth curve (determined from a plurality of ECAP signals) to the growth curves stored in patient posture state data <b>240</b> to determine the current posture state of the patient for the time at which the ECAP signals were detected.</p><p id="p-0081" num="0080">Calibration instructions <b>244</b> may include instructions for how to determine calibrated growth curves for each posture state and/or when to recalibrate the calibrated grown curves. For example, calibration instructions <b>244</b> may define the parameter values of the pulses used to elicit ECAP signals, how many pulses and ECAP signals should be used to define each growth curve, the type of ECAP characteristic value to use when defining the growth curve, or any other similar information.</p><p id="p-0082" num="0081">In some examples, storage device <b>212</b> may also store instructions on how processing circuitry <b>210</b> can adjust stimulation pulses in response to the detected posture state. For example, processing circuitry <b>210</b> may select a specific program, or set of stimulation parameter values, associated with a particular posture. In other examples, processing circuitry <b>210</b> may select a gain value or other factor that defines determines how a stimulation parameter value may be changed based on a detected ECAP characteristic value. Processing circuitry <b>210</b> may monitor ECAP characteristic values obtained from ECAP signals to modulate stimulation parameter values (e.g., increase or decrease stimulation intensity to maintain a target therapeutic effect). Since a target ECAP characteristic value may vary for different posture states, processing circuitry <b>210</b> may select the appropriate target ECAP characteristic value for the current posture state of the patient and modulate stimulation parameter values based on that posture state-specific target ECAP characteristic value.</p><p id="p-0083" num="0082">Sensor(s) <b>222</b> may include one or more sensing elements that sense values of a respective patient parameter, such as posture state. As described, electrodes <b>232</b> and <b>234</b> may be the electrodes that sense the characteristic value of the ECAP signal. Sensor(s) <b>222</b> may include one or more accelerometers, optical sensors, chemical sensors, temperature sensors, pressure sensors, or any other types of sensors. Sensor(s) <b>222</b> may output patient parameter values that may be used as feedback to control delivery of therapy. For example, sensor(s) <b>222</b> may indicate patient activity, and processing circuitry <b>210</b> may increase the frequency of control pulses and ECAP sensing in response to detecting increased patient activity. In one example, processing circuitry <b>210</b> may initiate control pulses and corresponding ECAP sensing in response to a signal from sensor(s) <b>222</b> indicating that patient activity has exceeded an activity threshold. In some examples, processing circuitry <b>210</b> may initiate a new sweep for ECAP signals to determine a growth curve in response to detecting the exceeded activity threshold. Conversely, processing circuitry <b>210</b> may decrease the frequency of control pulses and ECAP sensing (e.g., the frequency of sweeps) in response to detecting decreased patient activity. For example, in response to sensor(s) <b>222</b> no longer indicating that the sensed patient activity exceeds a threshold, processing circuitry <b>210</b> may suspend or stop delivery of control pulses and ECAP sensing. In this manner, processing circuitry <b>210</b> may dynamically deliver control pulses and sense ECAP signals based on patient activity to reduce power consumption of the system when the electrode-to-neuron distance is not likely to change and increase system response to ECAP changes when electrode-to-neuron distance is likely to change. IMD <b>200</b> may include additional sensors within the housing of IMD <b>200</b> and/or coupled via one of leads <b>130</b> or other leads. In addition, IMD <b>200</b> may receive sensor signals wirelessly from remote sensors via telemetry circuitry <b>208</b>, for example. In some examples, one or more of these remote sensors may be external to patient (e.g., carried on the external surface of the skin, attached to clothing, or otherwise positioned external to patient <b>105</b>). In some examples, signals from sensor(s) <b>222</b> indicate a position or body state (e.g., sleeping, awake, sitting, standing, or the like), and processing circuitry <b>210</b> may select target ECAP characteristic values according to the indicated position or body state.</p><p id="p-0084" num="0083">Power source <b>224</b> is configured to deliver operating power to the components of IMD <b>200</b>. Power source <b>224</b> may include a battery and a power generation circuit to produce the operating power. In some examples, the battery is rechargeable to allow extended operation. In some examples, recharging is accomplished through proximal inductive interaction between an external charger and an inductive charging coil within IMD <b>200</b>. Power source <b>224</b> may include any one or more of a plurality of different battery types, such as nickel cadmium batteries and lithium ion batteries.</p><p id="p-0085" num="0084"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a block diagram illustrating an example configuration of components of an example external programmer <b>300</b>. External programmer <b>300</b> may be an example of external programmer <b>150</b> of <figref idref="DRAWINGS">FIG. <b>1</b></figref>. Although external programmer <b>300</b> may generally be described as a hand-held device, external programmer <b>300</b> may be a larger portable device or a more stationary device. In addition, in other examples, external programmer <b>300</b> may be included as part of an external charging device or include the functionality of an external charging device. As illustrated in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, external programmer <b>300</b> may include processing circuitry <b>352</b>, storage device <b>354</b>, user interface <b>356</b>, telemetry circuitry <b>358</b>, and power source <b>360</b>. Storage device <b>354</b> may store instructions that, when executed by processing circuitry <b>352</b>, cause processing circuitry <b>352</b> and external programmer <b>300</b> to provide the functionality ascribed to external programmer <b>300</b> throughout this disclosure. Each of these components, circuitry, or modules, may include electrical circuitry that is configured to perform some, or all of the functionality described herein. For example, processing circuitry <b>352</b> may include processing circuitry configured to perform the processes discussed with respect to processing circuitry <b>352</b>.</p><p id="p-0086" num="0085">In general, external programmer <b>300</b> includes any suitable arrangement of hardware, alone or in combination with software and/or firmware, to perform the techniques attributed to external programmer <b>300</b>, and processing circuitry <b>352</b>, user interface <b>356</b>, and telemetry circuitry <b>358</b> of external programmer <b>300</b>. In various examples, external programmer <b>300</b> may include one or more processors, such as one or more microprocessors, DSPs, ASICs, FPGAs, or any other equivalent integrated or discrete logic circuitry, as well as any combinations of such components. External programmer <b>300</b> also, in various examples, may include a storage device <b>354</b>, such as RAM, ROM, PROM, EPROM, EEPROM, flash memory, a hard disk, a CD-ROM, including executable instructions for causing the one or more processors to perform the actions attributed to them. Moreover, although processing circuitry <b>352</b> and telemetry circuitry <b>358</b> are described as separate modules, in some examples, processing circuitry <b>352</b> and telemetry circuitry <b>358</b> are functionally integrated. In some examples, processing circuitry <b>352</b> and telemetry circuitry <b>358</b> correspond to individual hardware units, such as ASICs, DSPs, FPGAs, or other hardware units.</p><p id="p-0087" num="0086">Storage device <b>354</b> (e.g., a storage device) may store instructions that, when executed by processing circuitry <b>352</b>, cause processing circuitry <b>352</b> and external programmer <b>300</b> to provide the functionality ascribed to external programmer <b>300</b> throughout this disclosure. For example, storage device <b>354</b> may include instructions that cause processing circuitry <b>352</b> to obtain a parameter set from memory, select a spatial electrode pattern, or receive a user input and send a corresponding command to IMD <b>200</b>, or instructions for any other functionality. In addition, storage device <b>354</b> may include a plurality of programs, where each program includes a parameter set that defines therapy stimulation or control stimulation. Storage device <b>354</b> may also store data received from a medical device (e.g., IMD <b>110</b>). For example, storage device <b>354</b> may store ECAP related data recorded at a sensing module of the medical device, and storage device <b>354</b> may also store data from one or more sensors of the medical device.</p><p id="p-0088" num="0087">User interface <b>356</b> may include a button or keypad, lights, a speaker for voice commands, a display, such as a liquid crystal (LCD), light-emitting diode (LED), or organic light-emitting diode (OLED). In some examples the display includes a touch screen. User interface <b>356</b> may be configured to display any information related to the delivery of electrical stimulation, identified posture states, sensed patient parameter values, or any other such information. User interface <b>356</b> may also receive user input (e.g., indication of when the patient perceives a stimulation pulse) via user interface <b>356</b>. The input may be, for example, in the form of pressing a button on a keypad or selecting an icon from a touch screen. The input may request starting or stopping electrical stimulation, the input may request a new spatial electrode pattern or a change to an existing spatial electrode pattern, of the input may request some other change to the delivery of electrical stimulation. During the calibration process of obtaining ECAP signals for different posture states, user interface <b>356</b> may present the posture state that the patient should assume, and user interface <b>356</b> may receive user input confirming that the patient is in the requested posture state. In other examples, user interface <b>356</b> may receive user input indicating the posture state that the patient is in and generate the relationship of the detected ECAP characteristic values obtained during the calibration (e.g., the calibrated growth curve) for that indicated posture state.</p><p id="p-0089" num="0088">Telemetry circuitry <b>358</b> may support wireless communication between the medical device and external programmer <b>300</b> under the control of processing circuitry <b>352</b>. Telemetry circuitry <b>358</b> may also be configured to communicate with another computing device via wireless communication techniques, or direct communication through a wired connection. In some examples, telemetry circuitry <b>358</b> provides wireless communication via an RF or proximal inductive medium. In some examples, telemetry circuitry <b>358</b> includes an antenna, which may take on a variety of forms, such as an internal or external antenna.</p><p id="p-0090" num="0089">Examples of local wireless communication techniques that may be employed to facilitate communication between external programmer <b>300</b> and IMD <b>110</b> include RF communication according to the 802.11 or Bluetooth&#xae; specification sets or other standard or proprietary telemetry protocols. In this manner, other external devices may be capable of communicating with external programmer <b>300</b> without needing to establish a secure wireless connection. As described herein, telemetry circuitry <b>358</b> may be configured to transmit a spatial electrode movement pattern or other stimulation parameter values to IMD <b>110</b> for delivery of electrical stimulation therapy.</p><p id="p-0091" num="0090">In some examples, selection of stimulation parameters or therapy stimulation programs are transmitted to the medical device for delivery to a patient (e.g., patient <b>105</b> of <figref idref="DRAWINGS">FIG. <b>1</b></figref>). In other examples, the therapy may include medication, activities, or other instructions that patient <b>105</b> must perform themselves or a caregiver perform for patient <b>105</b>. In some examples, external programmer <b>300</b> provides visual, audible, and/or tactile notifications that indicate there are new instructions. External programmer <b>300</b> requires receiving user input acknowledging that the instructions have been completed in some examples.</p><p id="p-0092" num="0091">User interface <b>356</b> of external programmer <b>300</b> may also be configured to receive an indication from a clinician instructing a processor of the medical device to update one or more therapy stimulation programs or to update the calibrated growth curves for one or more posture states. Updating therapy stimulation programs and calibrated growth curves may include changing one or more parameters of the stimulation pulses delivered by the medical device according to the programs, such as amplitude, pulse width, frequency, and pulse shape of the informed pulses and/or control pulses. User interface <b>356</b> may also receive instructions from the clinician commanding any electrical stimulation, including therapy stimulation and control stimulation to commence or to cease.</p><p id="p-0093" num="0092">Power source <b>360</b> is configured to deliver operating power to the components of external programmer <b>300</b>. Power source <b>360</b> may include a battery and a power generation circuit to produce the operating power. In some examples, the battery is rechargeable to allow extended operation. Recharging may be accomplished by electrically coupling power source <b>360</b> to a cradle or plug that is connected to an alternating current (AC) outlet. In addition, recharging may be accomplished through proximal inductive interaction between an external charger and an inductive charging coil within external programmer <b>300</b>. In other examples, traditional batteries (e.g., nickel cadmium or lithium ion batteries) may be used. In addition, external programmer <b>300</b> may be directly coupled to an alternating current outlet to operate.</p><p id="p-0094" num="0093">The architecture of external programmer <b>300</b> illustrated in <figref idref="DRAWINGS">FIG. <b>3</b></figref> is shown as an example. The techniques as set forth in this disclosure may be implemented in the example external programmer <b>300</b> of <figref idref="DRAWINGS">FIG. <b>3</b></figref>, as well as other types of systems not described specifically herein. Nothing in this disclosure should be construed so as to limit the techniques of this disclosure to the example architecture illustrated by <figref idref="DRAWINGS">FIG. <b>3</b></figref>.</p><p id="p-0095" num="0094"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a graph <b>402</b> of example evoked compound action potentials (ECAPs) sensed for respective stimulation pulses, in accordance with one or more techniques of this disclosure. As shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, graph <b>402</b> shows example ECAP signal <b>404</b> (dotted line) and ECAP signal <b>406</b> (solid line). In some examples, each of ECAP signals <b>404</b> and <b>406</b> are sensed from control pulses that were delivered from a guarded cathode, where the control pulses are bi-phasic pulses including an interphase interval between each positive and negative phase of the pulse. In some such examples, the guarded cathode includes stimulation electrodes located at the end of an 8-electrode lead (e.g., leads <b>130</b> of <figref idref="DRAWINGS">FIG. <b>1</b></figref>) while two sensing electrodes are provided at the other end of the 8-electrode lead. ECAP signal <b>404</b> illustrates the voltage amplitude sensed as a result from a sub-detection threshold stimulation pulse. In other words, the stimulation pulse did not elicit a detectable ECAP signal in ECAP signal <b>404</b>. Peaks <b>408</b> of ECAP signal <b>404</b> are detected and represent the artifact of the delivered stimulation pulse (e.g., a control pulse that may or may not contribute to a therapeutic effect for the patient). However, no propagating signal is detected after the artifact in ECAP signal <b>404</b> because the control pulse was sub-detection threshold.</p><p id="p-0096" num="0095">In contrast to ECAP signal <b>404</b>, ECAP signal <b>406</b> represents the voltage amplitude detected from a supra-detection threshold control pulse. Peaks <b>408</b> of ECAP signal <b>406</b> are detected and represent the artifact of the delivered control pulse. After peaks <b>408</b>, ECAP signal <b>406</b> also includes peaks P<b>1</b>, N<b>1</b>, and P<b>2</b>, which are three typical peaks representative of propagating action potentials from an ECAP. The example duration of the artifact and peaks P<b>1</b>, N<b>1</b>, and P<b>2</b> is approximately 1 millisecond (ms). When detecting the ECAP of ECAP signal <b>406</b>, different characteristics may be identified. For example, the characteristic of the ECAP may be the amplitude between N<b>1</b> and P<b>2</b>. This N<b>1</b>-P<b>2</b> amplitude may be easily detectable even if the artifact impinges on P<b>1</b>, a relatively large signal, and the N<b>1</b>-P<b>2</b> amplitude may be minimally affected by electronic drift in the signal. In other examples, the characteristic of the ECAP used to detect the posture state of the patient and/or control informed pulses may be an amplitude of P<b>1</b>, N<b>1</b>, or P<b>2</b> with respect to neutral or zero voltage. In some examples, the characteristic of the ECAP may be a sum of two or more of peaks P<b>1</b>, N<b>1</b>, or P<b>2</b>. In other examples, the characteristic of ECAP signal <b>406</b> may be the area under one or more of peaks P<b>1</b>, N<b>1</b>, and/or P<b>2</b>. In other examples, the characteristic of the ECAP may be a ratio of one of peaks P<b>1</b>, N<b>1</b>, or P<b>2</b> to another one of the peaks. In some examples, the characteristic of the ECAP is a slope between two points in the ECAP signal, such as the slope between N<b>1</b> and P<b>2</b>. In other examples, the characteristic of the ECAP may be the time between two points of the ECAP, such as the time between N<b>1</b> and P<b>2</b>. The time between two points in the ECAP signal may be referred to as a latency of the ECAP and may indicate the types of fibers being captured by the control pulse. ECAP signals with lower latency (i.e., smaller latency values) indicate a higher percentage of nerve fibers that have faster propagation of signals, whereas ECAP signals with higher latency (i.e., larger latency values) indicate a higher percentage of nerve fibers that have slower propagation of signals. Other characteristics of the ECAP signal may be used in other examples.</p><p id="p-0097" num="0096">The amplitude of the ECAP signal generally increases with increased amplitude of the control pulse, as long as the pulse amplitude is greater than threshold such that nerves depolarize and propagate the signal. As discussed herein, the relationship between ECAP signal amplitude and pulse amplitude also depends on the posture state of the patient, so the relationship between the ECAP signal and pulse amplitude changes for different posture states. The target ECAP characteristic (e.g., the target ECAP amplitude) may be determined from the ECAP signal detected from a control pulse when informed pulses are determined to deliver effective therapy to patient <b>105</b>. The ECAP signal thus is representative of the distance between the stimulation electrodes and the nerves appropriate for the stimulation parameter values of the informed pulses delivered at that time. IMD <b>110</b> may attempt to use the detected posture state from an ECAP characteristic value and detected changes to the measured ECAP characteristic value to change informed pulse parameter values and maintain the target ECAP characteristic value during informed pulse delivery.</p><p id="p-0098" num="0097"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a timing diagram <b>500</b>A illustrating one example of electrical stimulation pulses and respective sensed ECAPs, in accordance with one or more techniques of this disclosure. For convenience, <figref idref="DRAWINGS">FIG. <b>5</b></figref> is described with reference to IMD <b>200</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref>. As illustrated, timing diagram <b>500</b>A includes first channel <b>502</b>, a plurality of control pulses <b>504</b>A-<b>504</b>N (collectively &#x201c;control pulses <b>504</b>&#x201d;), second channel <b>506</b>, a plurality of respective ECAPs <b>508</b>A-<b>508</b>N (collectively &#x201c;ECAPs <b>508</b>&#x201d;), and a plurality of stimulation interference signals <b>509</b>A-<b>509</b>N (collectively &#x201c;stimulation interference signals <b>509</b>&#x201d;). In the example of <figref idref="DRAWINGS">FIG. <b>5</b></figref>, control pulses <b>504</b> may be configured to contribute to therapy or not contribute to therapy. In any case, control pulses <b>504</b> may elicit respective ECAPs <b>508</b> for the purpose of determining a relationship between the parameter values of control pulses <b>504</b> and ECAPs <b>508</b>, such as a growth curve that is indicate of the posture state of the patient.</p><p id="p-0099" num="0098">First channel <b>502</b> is a time/voltage (and/or current) graph indicating the voltage (or current) of at least one electrode of electrodes <b>232</b>, <b>234</b>. In one example, the stimulation electrodes of first channel <b>502</b> may be located on the opposite side of the lead as the sensing electrodes of second channel <b>506</b>. Control pulses <b>504</b> may be electrical pulses delivered to the spinal cord of the patient by at least one of electrodes <b>232</b>, <b>234</b>, and control pulses <b>504</b> may be balanced biphasic square pulses with an interphase interval. In other words, each of control pulses <b>504</b> are shown with a negative phase and a positive phase separated by an interphase interval. For example, a control pulse <b>504</b> may have a negative voltage for the same amount of time and amplitude that it has a positive voltage. It is noted that the negative voltage phase may be before or after the positive voltage phase. Control pulses <b>504</b> may be delivered according to instructions stored in storage device <b>212</b> of IMD <b>200</b>.</p><p id="p-0100" num="0099">In some examples, each of control pulses <b>504</b> may be a part of a sweep of pulses configured to determine a relationship between the stimulation parameter values of the pulses and a characteristic value of the resulting respective ECAPs <b>508</b>. For example, the relationship may be a growth curve of ECAP voltage amplitude versus pulse current amplitude. In this manner, each of control pulses <b>504</b> may differ from each other by a parameter value, such as an iteratively increasing current amplitude. In one example, control pulses <b>504</b> may have a pulse width of less than approximately 300 microseconds (e.g., the total time of the positive phase, the negative phase, and the interphase interval is less than 300 microseconds). In another example, control pulses <b>504</b> may have a pulse width of approximately 100 &#x25a1;s for each phase of the bi-phasic pulse. In some examples, the pulse width of control pulses <b>504</b> may be longer than 300 microseconds, as long as the pulse width does not interfere with the detection of the desired one or more features of the elicited ECAPs <b>508</b>. As illustrated in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, control pulses <b>504</b> may be delivered via channel <b>502</b>. Delivery of control pulses <b>504</b> may be delivered by leads <b>230</b> in a guarded cathode electrode combination. For example, if leads <b>230</b> are linear 8-electrode leads, a guarded cathode combination is a central cathodic electrode with anodic electrodes immediately adjacent to the cathodic electrode.</p><p id="p-0101" num="0100">Second channel <b>506</b> is a time/voltage (and/or current) graph indicating the voltage (or current) of at least one electrode of electrodes <b>232</b>, <b>234</b>. In one example, the electrodes of second channel <b>506</b> may be located on the opposite side of the lead as the electrodes of first channel <b>502</b>. ECAPs <b>508</b> may be sensed at electrodes <b>232</b>, <b>234</b> from the spinal cord of the patient in response to control pulses <b>504</b>. ECAPs <b>508</b> are electrical signals which may propagate along a nerve away from the origination of control pulses <b>504</b>. In one example, ECAPs <b>508</b> are sensed by different electrodes than the electrodes used to deliver control pulses <b>504</b>. As illustrated in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, ECAPs <b>508</b> may be recorded on second channel <b>506</b>.</p><p id="p-0102" num="0101">Stimulation interference signals <b>509</b>A, <b>509</b>B, and <b>509</b>N (e.g., the artifact of the stimulation pulses) may be sensed by leads <b>230</b> and may be sensed during the same period of time as the delivery of control pulses <b>504</b>. Since the interference signals may have a greater amplitude and intensity than ECAPs <b>508</b>, any ECAPs arriving at IMD <b>200</b> during the occurrence of stimulation interference signals <b>509</b> may not be adequately sensed by sensing circuitry <b>206</b> of IMD <b>200</b>. However, ECAPs <b>508</b> may be sufficiently sensed by sensing circuitry <b>206</b> because each ECAP <b>508</b>, or at least a portion of ECAP <b>508</b> that includes one or more desired features of ECAP <b>508</b> that is used to detect the posture state and/or as feedback for control pulses <b>504</b>, falls after the completion of each a control pulse <b>504</b>. As illustrated in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, stimulation interference signals <b>509</b> and ECAPs <b>508</b> may be recorded on channel <b>506</b>.</p><p id="p-0103" num="0102">In some examples, IMD <b>200</b>, for example, may deliver the entire group of control pulses <b>504</b> (e.g., a sweep) consecutively and without any other intervening pulses in order to detect ECAPs <b>508</b> from which respective characteristic values are determined. IMD <b>200</b> may then determine the relationship between the characteristic values from ECAPs <b>508</b> and the different parameter values of control pulses <b>504</b>. In one example, the sweep of pulses <b>504</b> may be delivered by IMD <b>200</b> during a break in delivery of therapy pulses. In other examples, the sweep of pulses <b>504</b> may be at least partially interleaved with different stimulation pulses configured to contribute to therapy of the patient (e.g., one or more informed pulses). One or more pulses may thus be configured to contribute to therapy may be delivered between at least two of control pulses <b>504</b>.</p><p id="p-0104" num="0103"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a graph <b>600</b> illustrating example growth curves <b>604</b>, <b>606</b>, and <b>608</b> for a relationship between ECAP amplitude and pulse amplitude for different posture states. As shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, graph <b>600</b> illustrates example ECAP characteristic values <b>602</b> shown as dots, squares, and triangles for respective different current amplitudes of stimulation pulses. Typically, ECAPs will not be detectable until the stimulation pulse amplitude reaches a certain threshold, approximately at 4.5 mA current in the example of <figref idref="DRAWINGS">FIG. <b>6</b></figref>. Then, as the current amplitude is increased, the ECAP amplitude also increases approximately linearly. This linear relationship is shown by each of growth curves <b>604</b>, <b>606</b>, and <b>608</b>.</p><p id="p-0105" num="0104">The slope of each growth curve that linearly increases may be referenced as the &#x201c;gain&#x201d; herein, as it indicates the relationship between sensed ECAP amplitudes (e.g., a characteristic value) and pulse amplitudes. Put another way, the gain value may represent the slope of the growth curve of values of the characteristic of ECAP signals (e.g., an amplitude such as the N<b>1</b>-P<b>2</b> amplitude or the amplitude of any peak of the ECAP signal) elicited from respective calibration stimulation pulses delivered to the patient and at least partially defined by different values of a stimulation parameter (e.g., current amplitude, voltage amplitude, or pulse width). As described herein, the gain value or slope may be associated with a particular posture state of a plurality of posture states. In some examples, the gain value for a patient may be used to dynamically adjust informed pulse amplitude and control amplitude based on the sensed ECAP amplitudes.</p><p id="p-0106" num="0105">Each of growth curves <b>604</b>, <b>606</b>, and <b>608</b> represent growth curves for respective posture states. For example, four characteristic values <b>602</b> (circles) from respective ECAP signals form growth curve <b>604</b> may be associated with a supine posture state. Four characteristic values <b>602</b> (squares) from respective ECAP signals form growth curve <b>606</b> may be associated with a sitting upright posture state. Four characteristic values <b>602</b> (triangles) from respective ECAP signals form growth curve <b>608</b> may be associated with a prone posture state. Growth curves <b>604</b>, <b>606</b>, and <b>608</b> may be examples of calibrated growth curves. Each of growth curves <b>604</b>, <b>606</b>, and <b>608</b> may have corresponding slopes, such as approximately 32 &#x25a1;V/mA for growth curve <b>604</b>, approximately 24 &#x25a1;V/mA for growth curve <b>606</b>, and approximately 10 &#x25a1;V/mA for growth curve <b>608</b>. Therefore, if a later determined growth curve from a sweep of pulses and corresponding ECAP signals results in a slope of approximately 24 &#x25a1;V/mA, the IMD may determine that the patient's posture state is sitting upright. In this manner, the different growth curves manifest as a function of the posture state of the patient due to the different distance between the electrodes and target nerves at these different posture states.</p><p id="p-0107" num="0106">IMD <b>200</b>, for example, may generate calibration growth curves (e.g., a type of relationship between parameter values and ECAP characteristic values) after implantation and prior to delivery of therapy. IMD <b>200</b> may periodically regenerate the calibration growth curves over time. For example, IMD <b>200</b> may have instructions that indicate a time interval that, upon expiring, triggers IMD <b>20</b>o to regenerate the calibration growth curves. This recalibration maybe useful over time because electrodes may migrate in tissue, nerves may become desensitized to stimulation and/or electrodes may be encapsulated by tissue which changes deliverable and detectable voltages to and from tissue. In some examples, IMD <b>200</b> may regenerate calibration growth curves in response to a trigger, such as frequent user adjustment to stimulation parameter values during therapy, identification of reduced therapy efficacy, and/or receiving a user request to recalibrate.</p><p id="p-0108" num="0107">IMD <b>200</b> may also periodically perform sweeps of pulses at different parameter values in order to determine the current growth curve and associated current posture state of the patient. These periodic sweeps may be programmed to occur at predetermined intervals, such as an interval in the range from approximately 1 second to approximately 1 hour, from approximately 5 seconds to approximately 10 minutes, or from approximately 10 seconds to approximately 1 minute. In some examples, the interval may change based on activity of the patient. For example, IMD <b>200</b> may shorten the interval if different posture states are detected more frequently. Conversely, IMD <b>200</b> may lengthen the interval if the same posture state is detected over several consecutive sweeps. IMD <b>200</b> may also use different intervals during different times of the day. For example, IMD <b>200</b> may employ longer intervals between sweeps during times at which the patient historically is sleeping and shorter intervals between sweeps during times at which the patient is historically engaging in activity.</p><p id="p-0109" num="0108"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a flow diagram illustrating an example technique for determining a posture state for a patient and controlling therapy based on the posture state, in accordance with one or more techniques of this disclosure. For convenience, <figref idref="DRAWINGS">FIG. <b>7</b></figref> is described with respect to IMD <b>200</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref>. However, the techniques of <figref idref="DRAWINGS">FIG. <b>7</b></figref> may be performed by different components of IMD <b>200</b> or by additional or alternative medical devices. <figref idref="DRAWINGS">FIG. <b>7</b></figref> will be described using control pulses for eliciting detectable ECAP signals, where the control pulses may be therapeutic or non-therapeutic to the patient. IMD <b>200</b>, for example, may use detected ECAP signals to determine a posture state and then determine one or more parameters of the control pulses based on the posture state. IMD <b>200</b> may also, or alternatively, determine one or more parameters of a set of informed pulses, determine one or more parameters of other pulses that do not elicit ECAPs, or any combination thereof. Although processing circuitry <b>210</b> will be described as performing much of the technique of <figref idref="DRAWINGS">FIG. <b>7</b></figref>, other components of IMD <b>200</b> and/or other devices may perform some or all of the technique in other examples.</p><p id="p-0110" num="0109">In the example operation of <figref idref="DRAWINGS">FIG. <b>7</b></figref>, processing circuitry <b>210</b> controls stimulation circuitry <b>202</b> to deliver therapy to a patient (<b>702</b>). The therapy may involve delivery of stimulation pulses configured to contribute to therapy for a patient. Processing circuitry <b>210</b> may then determine whether or not the posture state of the patient should be detected (<b>704</b>). If processing circuitry <b>210</b> does not have instructions to detect the posture state of the patient (&#x201c;NO&#x201d; branch of block <b>704</b>), processing circuitry <b>210</b> may maintain stimulation therapy (<b>706</b>) and continue to deliver therapy to the patient (<b>702</b>). If processing circuitry <b>210</b> does have instructions to detect the posture state of the patient (&#x201c;YES&#x201d; branch of block <b>704</b>), processing circuitry <b>210</b> controls stimulation circuitry <b>202</b> to deliver the first stimulation pulse (e.g., a control pulse) as part of a sweep of pulses with different parameter values (<b>708</b>). Processing circuitry <b>210</b> controls sensing circuitry <b>206</b> to detect the ECAP signal elicited by the stimulation pulse (<b>710</b>). If there are more stimulation pulses of the sweep to be delivered (&#x201c;YES&#x201d; branch of block <b>712</b>), processing circuitry <b>210</b> selects the next stimulation parameter value (e.g., the next amplitude) for the next stimulation pulse of the sweep (<b>714</b>) and controls stimulation circuitry <b>202</b> to deliver the next stimulation pulse of the sweep (<b>708</b>). A sweep of stimulation pulses may include at least two pulses, four or more pulses, or six or more pulses. Although more pulses may enable a more accurate relationship, as few pulses as possible may be used to reduce the amount of time needed to deliver pulses of the sweep and sense the resulting ECAP signals.</p><p id="p-0111" num="0110">If there are no more stimulation pulses of the sweep to be delivered (&#x201c;NO&#x201d; branch of block <b>712</b>), processing circuitry <b>210</b> analyzes the detected ECAP signals from the sweep and determines the growth curve for these detected ECAP signals (<b>716</b>). The analysis of the detected ECAP signals may include determining at least one characteristic value for each ECAP signal (e.g., an amplitude between the N<b>1</b>-P<b>2</b> peaks, area under the N<b>1</b> and/or P<b>2</b> peaks, or other measure) and then associating that characteristic value to at least one parameter value (e.g., pulse current amplitude) that defined the stimulation pulse that elicited the characteristic value. All of the characteristic values and associated parameter values an be plotted, and processing circuitry <b>210</b> may determine a best fit line to the points and determine the slope of that best fit line. In other examples, processing circuitry <b>210</b> may determine a relationship between the ECAP characteristic values and respective parameter values that is different than a growth curve.</p><p id="p-0112" num="0111">Processing circuitry <b>210</b> may then determine the current posture state of the patient based on the determined growth curve (<b>718</b>). For example, processing circuitry <b>210</b> may compare the determined growth curve to a plurality of stored calibration growth curves and select the closest matching calibration growth curve. Processing circuitry <b>210</b> may select the posture state that is associated with the closest matching calibration growth curve. Processing circuitry <b>210</b> then selects one or more parameter values that define stimulation pulses of stimulation therapy to be delivered to the patient (<b>702</b>). For example, processing circuitry <b>210</b> may select parameter values, or a set of parameter values or therapy program, from memory that is stored for the selected posture state. Processing circuitry <b>210</b> then controls stimulation circuitry <b>202</b> to deliver therapy according to the newly selected parameter values (<b>702</b>).</p><p id="p-0113" num="0112">In other examples, processing circuitry <b>210</b> may modulate stimulation therapy in a different manner using the determined posture state for the patient. For example, the posture state may be associated with a respective target ECAP characteristic value employed by processing circuitry <b>210</b> to adjust one or more stimulation parameter values. Processing circuitry <b>210</b> may periodically sense ECAP signals during the delivery of pulses configured to contribute to a therapeutic effect for the patient. The ECAP signals may be elicited by the pulses configured to provide the therapeutic effect (e.g., informed pulses) or pulses configured to elicit a detectable ECAP signal which may or may not contribute to a therapeutic effect (e.g., control pulses). In either case, if the characteristic value of the detected ECAP signal is greater than the target ECAP characteristic value for that posture state (or above an upper-bound of a threshold window associated with the target ECAP characteristic value), processing circuitry <b>210</b> may decrease the amplitude (or some parameter value affecting the pulse intensity) of the next stimulation pulses. If the characteristic value of the detected ECAP signal is less than the target ECAP characteristic value for that posture state (or below a lower-bound of a threshold window associated with the target ECAP characteristic value), processing circuitry <b>210</b> may increase the amplitude (or some parameter value affecting the pulse intensity) of the next stimulation pulses. Such a technique for modulating parameter values is described in the example of <figref idref="DRAWINGS">FIG. <b>8</b></figref>.</p><p id="p-0114" num="0113"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a diagram illustrating an example technique for adjusting stimulation therapy. As shown in the example of <figref idref="DRAWINGS">FIG. <b>8</b></figref>, the system, such as IMD <b>200</b> or any other device or system described herein, may dynamically adjust a parameter value that defines stimulation pulses based on a gain value representing the patient sensitivity to stimulation. Since the patient sensitivity to stimulation is dependent on posture state, IMD <b>200</b> may use the detected posture state from ECAP signals in order to tailor the gain value to the sensitivity of the patient at any given time. Processing circuitry <b>214</b> of IMD <b>200</b> may control stimulation circuitry <b>202</b> to deliver a stimulation pulse to a patient (e.g., a control pulse from which ECAP signals can be detected and may contribute to a therapeutic effect). Processing circuitry <b>202</b> may then control sensing circuity <b>206</b> to sense an ECAP signal elicited by the control pulse and then identify a characteristic value of the ECAP signal (e.g., an amplitude of the ECAP signal). Processing circuitry <b>210</b> may then determine, based on the characteristic of the ECAP signal and a gain value (e.g., selected according to the detected posture state), a parameter value (e.g., an amplitude, pulse width value, pulse frequency value, and/or slew rate value) that at least partially defines another control pulse and/or an informed pulse (not shown). Processing circuitry <b>210</b> may then control stimulation circuitry <b>202</b> to deliver the next control pulse according to the determined parameter values.</p><p id="p-0115" num="0114">As shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, a control pulse <b>812</b> is delivered to the patient via electrode combination <b>814</b>, shown as a guarded cathode of three electrodes. Control pulse <b>812</b> may be configured to contribute to a therapeutic effect for the patient. The resulting ECAP signal is sensed by the two electrodes at the opposing end of the lead of electrode combination <b>816</b> fed to a differential amplifier <b>818</b>. For each sensed ECAP signal, processing circuitry <b>210</b> may measure an amplitude of a portion of the ECAP signal, such as the N<b>1</b>-P<b>2</b> voltage amplitude from the portion of the ECAP signal. This amplitude of the ECAP signal may be the characteristic value for that ECAP signal. Processing circuitry <b>210</b> may average the recently measured ECAP amplitudes <b>820</b>, such as averaging the most recent, and consecutive, 2, 3, 5, 5, 6, or more ECAP amplitudes. In some examples, the average may be a mean or median value. In some examples, one or more ECAP amplitudes may be ignored from the calculations if the amplitude value is determined to be an error. The measured amplitude (or average measured amplitude) is then subtracted from the selected target ECAP amplitude <b>808</b> to generate a differential amplitude. The selected target ECAP amplitude <b>808</b> may be determined from an ECAP sensed when the physician or patient initially discovers effective therapy from the informed pulses. This target ECAP amplitude <b>808</b> may essentially represent a reference distance between the stimulation electrodes and the target neurons (e.g., the spinal cord for the case of SCS). In some examples, processing circuitry <b>210</b> may select the target ECAP amplitude <b>808</b> associated with the detected posture state <b>802</b>, to the extent the target ECAP amplitude would change for different posture states.</p><p id="p-0116" num="0115">The differential amplitude is then multiplied by the gain value for the patient to generate a preliminary differential value <b>810</b>. The preliminary differential value is added to the ECAP pulse amplitude <b>806</b> (e.g., the control pulse amplitude) to generate the new, or adjusted, ECAP pulse amplitude that at least partially defines the next control pulse <b>812</b>. Processing circuitry <b>210</b> may determine the gain value according to the detected posture state. As discussed herein, processing circuitry <b>210</b> may detect the current posture state <b>802</b> by determining a relationship between ECAP characteristic values and parameter values of pulses that elicited those ECAP characteristic values (e.g., during a sweep of pulses with different parameter values). For example, processing circuitry <b>210</b> may compare a determined growth curve to calibrated growth curves and select a posture state associated with the calibrated growth curve that most closely fits the determined growth curve. Processing circuitry <b>210</b> may then select the calibrated growth curve <b>804</b> from the selected posture state and employ the slope of that calibrated growth curve <b>804</b> as the gain value for the multiplication of step <b>810</b>. In other examples, processing circuitry <b>210</b> directly use the slope of the determined growth curve as the gain value instead of, or in addition to, determining the posture state of the patient during which the ECAP signals were detected.</p><p id="p-0117" num="0116">In some examples, processing circuitry <b>210</b> may adjust informed pulses, in addition to control pulses, when the informed pulses to not elicit detectable ECAP signals. For example, to adjust the informed pulse amplitude, the differential value that was created after multiplication by the gain value <b>810</b> is multiplied by a scaling factor to generate a therapy differential value. For example, the scaling factor may be the ratio of the previously delivered informed pulse amplitude to the previously delivered control pulse amplitude <b>806</b>. The therapy differential value is then added to the previously delivered informed pulse amplitude to generate the new, or adjusted, informed pulse amplitude that at least partially defines the next informed pulse. This process can be applied to the informed pulses from multiple stimulation programs. For example, if informed pulses from two different stimulation programs are delivered as a part of stimulation therapy, the system may multiply the respective scaling factors by the differential value to obtain a respective therapy differential value for the informed pulses of each stimulation program. The next informed pulse (or pulses if multiple stimulation programs are involved in therapy) is then delivered, interleaved with the control pulse <b>812</b>, to the patient via electrode combination <b>814</b> or a different set of electrodes in other examples. In some examples, at least two control pulses may be delivered, and at least two respective ECAP signals sensed, between consecutive informed pulses. This increased frequency of control pulses may allow the system to quickly adjust informed pulse amplitudes for any changes in the distance between electrodes and neurons.</p><p id="p-0118" num="0117">Although the technique of <figref idref="DRAWINGS">FIG. <b>8</b></figref> is described for adjusting the amplitude of the control pulses, other parameter values may be changed in other examples. For example, sensed ECAP signals may be used to increase or decrease the pulse width of the control pulse to adjust the amount of charge delivered to the tissue to maintain consistent volume of neural activation. In other examples, electrode combinations may be adjusted in order to deliver different amounts of charge and modify the number of neurons being recruited by each informed pulse. In other examples, processing circuitry <b>210</b> may be configured to adjust the slew rate of the control pulses (i.e., the rate of change of the voltage and/or amplitude at the beginning and/or end of the pulse or each phase of the pulse) in response to a characteristic of the ECAP signal, such as the amplitude of recent ECAP amplitudes.</p><p id="p-0119" num="0118">The following examples are described herein. Example 1: a system comprising: stimulation circuitry configured to deliver electrical stimulation; sensing circuitry configured to sense a plurality of evoked compound action potential (ECAP) signals; and processing circuitry configured to: control the stimulation circuitry to deliver a plurality of electrical stimulation pulses having different amplitude values; control the sensing circuitry to detect, after delivery of each electrical stimulation pulse of the plurality of electrical stimulation pulses, a respective ECAP signal of the plurality of ECAP signals; and determine, based on the plurality of ECAP signals, a posture state of the patient.</p><p id="p-0120" num="0119">Example 2: the system of example 1, wherein the processing circuitry is configured to: determine characteristic values for the plurality of ECAP signals, each ECAP signal of the plurality of ECAP signals being associated with a respective characteristic value of the characteristic values; determine a growth curve representing a relationship between the characteristic values of the plurality of ECAP signals and the different amplitude values of the plurality of electrical stimulation pulses from which the ECAP signals were evoked; compare the growth curve to a plurality of calibration growth curves associated with respective posture states of a plurality of posture states; and determine, based on the comparison, the posture state of the patient.</p><p id="p-0121" num="0120">Example 3: the system of example 2, wherein the processing circuitry is configured to, for each posture state of the plurality of posture states: control the stimulation circuitry to deliver a plurality of calibration electrical stimulation pulses having different amplitude values while the patient assumes the posture state; control the sensing circuitry to detect, after delivery of each calibration electrical stimulation pulse of the plurality of calibration electrical stimulation pulses, a respective calibration ECAP signal of a plurality of calibration ECAP signals; determine calibration characteristic values for the plurality of calibration ECAP signals, each calibration ECAP signal of the plurality of calibration ECAP signals being associated with a respective characteristic value of the calibration characteristic values; and determine a respective calibration growth curve, of the plurality of calibration growth curves, that represents the relationship between the calibration characteristic values of the plurality of calibration ECAP signals and the different amplitude values of the plurality of calibration electrical stimulation pulses from which the calibration ECAP signals were evoked.</p><p id="p-0122" num="0121">Example 4: the system of any of examples 1 through 3, wherein the processing circuitry is configured to control the stimulation circuitry to deliver the plurality of electrical stimulation pulses as a sweep of pulses comprising iteratively increasing amplitude values.</p><p id="p-0123" num="0122">Example 5: the system of any of examples 1 through 4, wherein the plurality of electrical stimulation pulses is a second set of electrical stimulation pulses and the plurality of ECAP signals is a second set of ECAP signals, and wherein the processing circuitry is configured to: control, during a first period of time, the stimulation circuitry to deliver a first set of electrical stimulation pulses from which respective ECAP signals of a second set of ECAP signals can be detected; identify, during the first period of time, a transient movement of the patient; responsive to identifying the transient movement, terminate the first period of time and the delivery of the first set of electrical stimulation pulses and discard the second set of ECAP signals; determine that the transient movement has ended; and after the transient movement has ended, control the stimulation circuitry to deliver the second set of electrical stimulation pulses and control the sensing circuitry to detect the second set of ECAP signals.</p><p id="p-0124" num="0123">Example 6: the system of example 5, wherein the processing circuitry is configured to, responsive to determining that the transient movement has ended, control the stimulation circuitry to deliver the second set of electrical stimulation pulses and control the sensing circuitry to detect the second set of ECAP signals.</p><p id="p-0125" num="0124">Example 7: the system of any of examples 5 or 6, wherein the processor is configured to detect the transient movement from an electromyogram signal.</p><p id="p-0126" num="0125">Example 8: the system of any of examples 5 through 7, wherein the processing circuitry is configured to detect the transient movement from information received from one or more accelerometers.</p><p id="p-0127" num="0126">Example 9: the system of any of examples 1 through 8, wherein the posture state of the patient comprises at least one of a static posture of the patient or an activity level of the patient.</p><p id="p-0128" num="0127">Example 10: the system of any of examples 1 through 9, the processing circuitry is configured to determine the posture state by selecting the posture state from a plurality of posture states, the plurality of posture states comprising at least two of a prone position, a supine position, a sitting position, and a standing position.</p><p id="p-0129" num="0128">Example 11: the system of any of examples 1 through 10, wherein the different amplitude values are lower than a discomfort threshold for the patient.</p><p id="p-0130" num="0129">Example 12: the system of any of examples 1 through 11, wherein the processing circuitry is configured to adjust, based on the determined posture state, a value of one or more parameters that at least partially define electrical stimulation therapy for the patient.</p><p id="p-0131" num="0130">Example 13: the system of any of examples 1 through 12, wherein an implantable medical device comprises the stimulation circuitry, the sensing circuitry, and the processing circuitry.</p><p id="p-0132" num="0131">Example 14: a method comprising: controlling, by processing circuitry, stimulation circuitry to deliver a plurality of electrical stimulation pulses having different amplitude values; controlling, by the processing circuitry, sensing circuitry to detect, after delivery of each electrical stimulation pulse of the plurality of electrical stimulation pulses, a respective evoked compound action potential (ECAP) signal of a plurality of ECAP signals; and determining, by the processing circuitry and based on the plurality of ECAP signals, a posture state of the patient.</p><p id="p-0133" num="0132">Example 15: the method of example 14, further comprising: determining characteristic values for the plurality of ECAP signals, each ECAP signal of the plurality of ECAP signals being associated with a respective characteristic value of the characteristic values; determining a growth curve representing a relationship between the characteristic values of the plurality of ECAP signals and the different amplitude values of the plurality of electrical stimulation pulses from which the ECAP signals were evoked; comparing the growth curve to a plurality of calibration growth curves associated with respective posture states of a plurality of posture states; and determining, based on the comparison, the posture state of the patient.</p><p id="p-0134" num="0133">Example 16: the method of example 15, further comprising, for each posture state of the plurality of posture states: controlling the stimulation circuitry to deliver a plurality of calibration electrical stimulation pulses having different amplitude values while the patient assumes the posture state; controlling the sensing circuitry to detect, after delivery of each calibration electrical stimulation pulse of the plurality of calibration electrical stimulation pulses, a respective calibration ECAP signal of a plurality of calibration ECAP signals; determining calibration characteristic values for the plurality of calibration ECAP signals, each calibration ECAP signal of the plurality of calibration ECAP signals being associated with a respective characteristic value of the calibration characteristic values; and determining a respective calibration growth curve, of the plurality of calibration growth curves, that represents the relationship between the calibration characteristic values of the plurality of calibration ECAP signals and the different amplitude values of the plurality of calibration electrical stimulation pulses from which the calibration ECAP signals were evoked.</p><p id="p-0135" num="0134">Example 17: the method of any of examples 14 through 16, wherein controlling the stimulation circuitry to deliver the plurality of electrical stimulation pulses comprises controlling the stimulation circuitry to provide a sweep of pulses comprising iteratively increasing amplitude values.</p><p id="p-0136" num="0135">Example 18: the method of any of examples 14 through 16, wherein the plurality of electrical stimulation pulses is a second set of electrical stimulation pulses and the plurality of ECAP signals is a second set of ECAP signals, and wherein the method further comprises: controlling, during a first period of time, the stimulation circuitry to deliver a first set of electrical stimulation pulses from which respective ECAP signals of a second set of ECAP signals can be detected; identifying, during the first period of time, a transient movement of the patient; responsive to identifying the transient movement, terminating the first period of time and the delivery of the first set of electrical stimulation pulses and discard the second set of ECAP signals; determining that the transient movement has ended; and after the transient movement has ended, controlling the stimulation circuitry to deliver the second set of electrical stimulation pulses and control the sensing circuitry to detect the second set of ECAP signals.</p><p id="p-0137" num="0136">Example 19: the method of example 18, further comprising, responsive to determining that the transient movement has ended, controlling the stimulation circuitry to deliver the second set of electrical stimulation pulses and control the sensing circuitry to detect the second set of ECAP signals.</p><p id="p-0138" num="0137">Example 20: the method of any of examples 18 and 19, further comprising detecting the transient movement from an electromyogram signal.</p><p id="p-0139" num="0138">Example 21: the method of any of examples 18 through 20, further comprising detecting the transient movement from information received from one or more accelerometers.</p><p id="p-0140" num="0139">Example 22: the method of any of examples 14 through 21, wherein the posture state of the patient comprises at least one of a static posture of the patient or an activity level of the patient.</p><p id="p-0141" num="0140">Example 23: the method of any of examples 14 through 22, wherein determining the posture state comprises selecting the posture state from a plurality of posture states, the plurality of posture states comprising at least two of a prone position, a supine position, a sitting position, and a standing position.</p><p id="p-0142" num="0141">Example 24: the method of any of examples 14 through 23, wherein the different amplitude values are lower than a discomfort threshold for the patient.</p><p id="p-0143" num="0142">Example 25: the method of any of examples 14 through 24, further comprising adjusting, based on the determined posture state, a value of one or more parameters that at least partially define electrical stimulation therapy for the patient.</p><p id="p-0144" num="0143">Example 26: a computer-readable medium comprising instructions that, when executed, causes processing circuitry to: control stimulation circuitry to deliver a plurality of electrical stimulation pulses having different amplitude values; control sensing circuitry to detect, after delivery of each electrical stimulation pulse of the plurality of electrical stimulation pulses, a respective evoked compound action potential (ECAP) signal of a plurality of ECAP signals; and determine, based on the plurality of ECAP signals, a posture state of the patient.</p><p id="p-0145" num="0144">The techniques described in this disclosure may be implemented, at least in part, in hardware, software, firmware or any combination thereof. For example, various aspects of the described techniques may be implemented within one or more processors or processing circuitry, including one or more microprocessors, digital signal processors (DSPs), application specific integrated circuits (ASICs), field programmable gate arrays (FPGAs), or any other equivalent integrated or discrete logic circuitry, as well as any combinations of such components. The term &#x201c;processor&#x201d; or &#x201c;processing circuitry&#x201d; may generally refer to any of the foregoing logic circuitry, alone or in combination with other logic circuitry, or any other equivalent circuitry. A control unit including hardware may also perform one or more of the techniques of this disclosure.</p><p id="p-0146" num="0145">Such hardware, software, and firmware may be implemented within the same device or within separate devices to support the various operations and functions described in this disclosure. In addition, any of the described units, circuits or components may be implemented together or separately as discrete but interoperable logic devices. Depiction of different features as circuits or units is intended to highlight different functional aspects and does not necessarily imply that such circuits or units must be realized by separate hardware or software components. Rather, functionality associated with one or more circuits or units may be performed by separate hardware or software components or integrated within common or separate hardware or software components.</p><p id="p-0147" num="0146">The techniques described in this disclosure may also be embodied or encoded in a computer-readable medium, such as a computer-readable storage medium, containing instructions that may be described as non-transitory media. Instructions embedded or encoded in a computer-readable storage medium may cause a programmable processor, or other processor, to perform the method, e.g., when the instructions are executed. Computer readable storage media may include random access memory (RAM), read only memory (ROM), programmable read only memory (PROM), erasable programmable read only memory (EPROM), electronically erasable programmable read only memory (EEPROM), flash memory, a hard disk, a CD-ROM, a floppy disk, a cassette, magnetic media, optical media, or other computer readable media.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-01-20" num="01-20"><claim-text><b>1</b>-<b>20</b>. (canceled)</claim-text></claim><claim id="CLM-00021" num="00021"><claim-text><b>21</b>. A system comprising:<claim-text>stimulation circuitry configured to deliver electrical stimulation;</claim-text><claim-text>sensing circuitry configured to sense a plurality of evoked compound action potential (ECAP) signals; and</claim-text><claim-text>processing circuitry configured to:<claim-text>control the stimulation circuitry to deliver a plurality of electrical stimulation pulses defined by different values for at least one parameter;</claim-text><claim-text>control the sensing circuitry to detect, after delivery of each electrical stimulation pulse of the plurality of electrical stimulation pulses, a respective ECAP signal of the plurality of ECAP signals; and</claim-text><claim-text>determine, based on the plurality of ECAP signals, a posture state of the patient.</claim-text></claim-text></claim-text></claim><claim id="CLM-00022" num="00022"><claim-text><b>22</b>. The system of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the processing circuitry is configured to:<claim-text>determine characteristic values for the plurality of ECAP signals, each ECAP signal of the plurality of ECAP signals being associated with a respective characteristic value of the characteristic values;</claim-text><claim-text>determine a growth curve representing a relationship between the characteristic values of the plurality of ECAP signals and the different values of the at least one parameter of the plurality of electrical stimulation pulses from which the ECAP signals were evoked;</claim-text><claim-text>compare the growth curve to a plurality of calibration growth curves associated with respective posture states of a plurality of posture states; and</claim-text><claim-text>determine, based on the comparison, the posture state of the patient.</claim-text></claim-text></claim><claim id="CLM-00023" num="00023"><claim-text><b>23</b>. The system of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the processing circuitry is configured to determine the posture state of the patient by at least:<claim-text>determining a characteristic representing a sensed relationship between the different values of the at least one parameter and characteristics of the plurality of ECAP signals;</claim-text><claim-text>comparing the characteristic representing the sensed relationship to a characteristic representing a stored relationship between the at least one parameter and characteristics of previously sensed ECAP signals; and</claim-text><claim-text>selecting, based on the comparison, the posture state of the patient.</claim-text></claim-text></claim><claim id="CLM-00024" num="00024"><claim-text><b>24</b>. The system of <claim-ref idref="CLM-00023">claim 23</claim-ref>, wherein the characteristic of the relationship is at least one of a slope or an intercept.</claim-text></claim><claim id="CLM-00025" num="00025"><claim-text><b>25</b>. The system of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the processing circuitry is configured to control the stimulation circuitry to deliver the plurality of electrical stimulation pulses as a sweep of pulses comprising iteratively increasing values of the at least one parameter.</claim-text></claim><claim id="CLM-00026" num="00026"><claim-text><b>26</b>. The system of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the processing circuitry is configured to:<claim-text>adjust, based on the determined posture state, a value of one or more parameters that at least partially define electrical stimulation therapy for the patient; and</claim-text><claim-text>control delivery of the electrical stimulation therapy according to the value of the one or more parameters.</claim-text></claim-text></claim><claim id="CLM-00027" num="00027"><claim-text><b>27</b>. The system of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the at least one parameter comprises a pulse width.</claim-text></claim><claim id="CLM-00028" num="00028"><claim-text><b>28</b>. The system of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the at least one parameter comprises a current amplitude.</claim-text></claim><claim id="CLM-00029" num="00029"><claim-text><b>29</b>. The system of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the at least one parameter comprises a voltage amplitude.</claim-text></claim><claim id="CLM-00030" num="00030"><claim-text><b>30</b>. The system of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein an implantable medical device comprises the stimulation circuitry, the sensing circuitry, and the processing circuitry.</claim-text></claim><claim id="CLM-00031" num="00031"><claim-text><b>31</b>. A method comprising:<claim-text>controlling, by processing circuitry, stimulation circuitry to deliver a plurality of electrical stimulation pulses defined by different values for at least one parameter;</claim-text><claim-text>controlling, by the processing circuitry, sensing circuitry to detect, after delivery of each electrical stimulation pulse of the plurality of electrical stimulation pulses, a respective evoked compound action potential (ECAP) signal of a plurality of ECAP signals; and</claim-text><claim-text>determining, by the processing circuitry and based on the plurality of ECAP signals, a posture state of the patient.</claim-text></claim-text></claim><claim id="CLM-00032" num="00032"><claim-text><b>32</b>. The method of <claim-ref idref="CLM-00031">claim 31</claim-ref>, wherein determining the posture state comprises:<claim-text>determining characteristic values for the plurality of ECAP signals, each ECAP signal of the plurality of ECAP signals being associated with a respective characteristic value of the characteristic values;</claim-text><claim-text>determining a growth curve representing a relationship between the characteristic values of the plurality of ECAP signals and the different values of the at least one parameter of the plurality of electrical stimulation pulses from which the ECAP signals were evoked;</claim-text><claim-text>comparing the growth curve to a plurality of calibration growth curves associated with respective posture states of a plurality of posture states; and</claim-text><claim-text>determining, based on the comparison, the posture state of the patient.</claim-text></claim-text></claim><claim id="CLM-00033" num="00033"><claim-text><b>33</b>. The method of <claim-ref idref="CLM-00032">claim 32</claim-ref>, wherein determining the posture state comprises:<claim-text>determining a characteristic representing a sensed relationship between the different values of the at least one parameter and characteristics of the plurality of ECAP signals;</claim-text><claim-text>comparing the characteristic representing the sensed relationship to a characteristic representing a stored relationship between the at least one parameter and characteristics of previously sensed ECAP signals; and</claim-text><claim-text>selecting, based on the comparison, the posture state of the patient.</claim-text></claim-text></claim><claim id="CLM-00034" num="00034"><claim-text><b>34</b>. The method of <claim-ref idref="CLM-00033">claim 33</claim-ref>, wherein the characteristic of the relationship is at least one of a slope or an intercept.</claim-text></claim><claim id="CLM-00035" num="00035"><claim-text><b>35</b>. The method of <claim-ref idref="CLM-00031">claim 31</claim-ref>, further comprising controlling the stimulation circuitry to deliver the plurality of electrical stimulation pulses as a sweep of pulses comprising iteratively increasing values of the at least one parameter.</claim-text></claim><claim id="CLM-00036" num="00036"><claim-text><b>36</b>. The method of <claim-ref idref="CLM-00031">claim 31</claim-ref>, further comprising:<claim-text>adjusting, based on the determined posture state, a value of one or more parameters that at least partially define electrical stimulation therapy for the patient; and</claim-text><claim-text>controlling delivery of the electrical stimulation therapy according to the value of the one or more parameters.</claim-text></claim-text></claim><claim id="CLM-00037" num="00037"><claim-text><b>37</b>. The method of <claim-ref idref="CLM-00031">claim 31</claim-ref>, wherein the at least one parameter comprises a pulse width.</claim-text></claim><claim id="CLM-00038" num="00038"><claim-text><b>38</b>. The method of <claim-ref idref="CLM-00031">claim 31</claim-ref>, wherein the at least one parameter comprises a current amplitude.</claim-text></claim><claim id="CLM-00039" num="00039"><claim-text><b>39</b>. The method of <claim-ref idref="CLM-00031">claim 31</claim-ref>, wherein the at least one parameter comprises a voltage amplitude.</claim-text></claim><claim id="CLM-00040" num="00040"><claim-text><b>40</b>. A non-transitory computer-readable medium comprising instructions that, when executed, causes processing circuitry to:<claim-text>control stimulation circuitry to deliver a plurality of electrical stimulation pulses defined by different values for at least one parameter;</claim-text><claim-text>control sensing circuitry to detect, after delivery of each electrical stimulation pulse of the plurality of electrical stimulation pulses, a respective evoked compound action potential (ECAP) signal of a plurality of ECAP signals; and</claim-text><claim-text>determine, based on the plurality of ECAP signals, a posture state of the patient.</claim-text></claim-text></claim></claims></us-patent-application>