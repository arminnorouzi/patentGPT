<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006677A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006677</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17942077</doc-number><date>20220909</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>03</class><subclass>L</subclass><main-group>7</main-group><subgroup>06</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>N</subclass><main-group>15</main-group><subgroup>14</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>S</subclass><main-group>7</main-group><subgroup>4865</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>T</subclass><main-group>1</main-group><subgroup>29</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>S</subclass><main-group>17</main-group><subgroup>26</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>S</subclass><main-group>17</main-group><subgroup>88</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>03</class><subclass>L</subclass><main-group>7</main-group><subgroup>06</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>N</subclass><main-group>15</main-group><subgroup>1429</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>S</subclass><main-group>7</main-group><subgroup>4865</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>T</subclass><main-group>1</main-group><subgroup>2985</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>N</subclass><main-group>15</main-group><subgroup>1459</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20200101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>S</subclass><main-group>17</main-group><subgroup>26</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>S</subclass><main-group>17</main-group><subgroup>88</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>A</section><class>61</class><subclass>B</subclass><main-group>6</main-group><subgroup>4417</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">POSITRON EMISSION TOMOGRAPHY SYSTEM WITH A TIME SYNCHRONIZED NETWORK</invention-title><us-related-documents><division><relation><parent-doc><document-id><country>US</country><doc-number>16265400</doc-number><date>20190201</date></document-id><parent-status>ABANDONED</parent-status></parent-doc><child-doc><document-id><country>US</country><doc-number>17942077</doc-number></document-id></child-doc></relation></division><us-provisional-application><document-id><country>US</country><doc-number>62625299</doc-number><date>20180201</date></document-id></us-provisional-application></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only"><addressbook><last-name>Loinaz</last-name><first-name>Marc</first-name><address><city>Los Altos Hills</city><state>CA</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Loinaz</last-name><first-name>Marc</first-name><address><city>Los Altos Hills</city><state>CA</state><country>US</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A sensor network, which includes a sensor controller serially coupled to a plurality of sensor modules, is configured to program the sensor modules so as to transfer measurement data to the sensor controller and to synchronize the sensor modules to picosecond accuracy via on-chip or on-module custom circuits and a physical layer protocol. The sensor network has applications for use in PET, LiDAR or FLIM applications. Synchronization, within picosecond accuracy, is achieved through use of a picosecond time digitization circuit. Specifically, the picosecond time digitization circuit is used to measure on-chip delays with high accuracy and precision. The delay measurements are directly comparable between separate chips even with voltage and temperature variations between chips.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="62.57mm" wi="158.75mm" file="US20230006677A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="136.40mm" wi="180.51mm" orientation="landscape" file="US20230006677A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="238.42mm" wi="116.25mm" orientation="landscape" file="US20230006677A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="160.53mm" wi="150.79mm" orientation="landscape" file="US20230006677A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="228.60mm" wi="132.00mm" orientation="landscape" file="US20230006677A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="228.52mm" wi="136.31mm" orientation="landscape" file="US20230006677A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="250.70mm" wi="165.44mm" orientation="landscape" file="US20230006677A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="247.23mm" wi="178.05mm" orientation="landscape" file="US20230006677A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="220.05mm" wi="178.48mm" orientation="landscape" file="US20230006677A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="94.49mm" wi="92.46mm" orientation="landscape" file="US20230006677A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="148.76mm" wi="151.13mm" orientation="landscape" file="US20230006677A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00011" num="00011"><img id="EMI-D00011" he="207.60mm" wi="130.81mm" orientation="landscape" file="US20230006677A1-20230105-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00012" num="00012"><img id="EMI-D00012" he="231.90mm" wi="179.83mm" orientation="landscape" file="US20230006677A1-20230105-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00013" num="00013"><img id="EMI-D00013" he="151.55mm" wi="162.64mm" orientation="landscape" file="US20230006677A1-20230105-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00014" num="00014"><img id="EMI-D00014" he="141.05mm" wi="162.90mm" orientation="landscape" file="US20230006677A1-20230105-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">RELATED APPLICATIONS</heading><p id="p-0002" num="0001">This application claims priority, under 35 U.S.C. &#xa7; 119(e), to U.S. Provisional Application No. 62/625,299, entitled &#x201c;A<smallcaps>PPLICATIONS FOR A </smallcaps>T<smallcaps>IME </smallcaps>C<smallcaps>OHERENT </smallcaps>N<smallcaps>ETWORK FOR </smallcaps>P<smallcaps>RECISION </smallcaps>S<smallcaps>ENSING</smallcaps>&#x201d;, inventor Marc Loinaz, filed Feb. 1, 2018, and claims priority, under 35 U.S.C. &#xa7; 120, to U.S. patent application Ser. No. 16/265,400, entitled &#x201c;A<smallcaps>PPLICATIONS FOR A </smallcaps>T<smallcaps>IME </smallcaps>C<smallcaps>OHERENT </smallcaps>N<smallcaps>ETWORK FOR </smallcaps>P<smallcaps>RECISION </smallcaps>S<smallcaps>ENSING</smallcaps>&#x201d;, inventor Marc Loinaz, filed Feb. 1, 2019, both which are expressly incorporated herein by reference.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">BACKGROUND</heading><p id="p-0003" num="0002">Precision time delay measurement is a requirement for emerging sensor applications. In Positron Emission Tomography (PET) and Light Detection and Ranging (LiDAR), precise measurement of photon time-of-flight (ToF) allows precise quantification of the spatial location of an event. In Fluorescence Lifetime Imaging (FLIM) photon arrival times at a sensor are used to detect the presence of fluorophore-tagged molecules within a biological sample.</p><p id="p-0004" num="0003">In PET, the event of interest is the annihilation of a positron (from a radioactive dye) and an electron within a chemically active region within the body of a medical patient or live laboratory subject. The event produces two gamma ray photons that are travelling in opposite directions. The ToF measurements to a three-dimensional sensor array in a PET scanner allow precise location of the event, which could, for example, indicate the presence of a tumor.</p><p id="p-0005" num="0004">In LiDAR, the event of interest is scattering of photons from a laser pulse. The ToF of laser photons from when they are emitted by the laser, scattered from a target object and then detected in a sensor allows the distance of the target object from the LiDAR system to be precisely resolved. This has applications in Unmanned Autonomous Vehicles (UAVs) and Advanced Driver Assistance Systems (ADAS).</p><p id="p-0006" num="0005">In Fluorescence Lifetime Imaging (FLIM), the event of interest is the generation of fluorescence photons by a laser pulse. The photon arrival times relative to the laser pulse are used to build a histogram of the fluorescence decay transient of a laser-excited molecule. The measurement of the decay time allows detection of fluorophore-tagged molecules within a tissue sample. Additionally, the use of FLIM allows detection of F&#xf6;rster Resonance Energy Transfer (FRET), which allows the measurement of the distance between specific molecules within a cell.</p><p id="p-0007" num="0006">In all of these applications there is a need for more sensors so as to improve system sensitivity (by increasing the number of photons captured) and accuracy as well as to increase measurement throughput. This requires large numbers of sensor chips and sensor modules distributed in arbitrary physical configurations. Furthermore, these sensor systems need to be synchronized to accuracies of picoseconds. To highlight the required timing accuracies, measurement of ToF to within 3.3 ps allows spatial resolution of 1 mm. Current distributed timing synchronization methods do not allow picosecond time measurement accuracy or are difficult to implement and require extensive calibration.</p><p id="p-0008" num="0007">In current sensor systems, time synchronization involves a passive approach as shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>. Since the trace lengths and transmission lines from the reference oscillator all the way to sensor chips <b>1</b>, <b>2</b> and <b>3</b> are matched and the clock buffers are assumed to be identical then there will be minimal time skew between the clock signals seen at each chip. In addition, a master reset signal is distributed to the sensor chips using matched-length traces. This allows the state of each chip (including the states of on-chip clock dividers) to be simultaneously initialized so as to be identical across chips.</p><p id="p-0009" num="0008">There are many practical problems with the passive synchronization approach. The clock buffers, while they are nominally identical, may have mismatch due to manufacturing variations. Adding another sensor chip to the system is difficult since it requires redesign of the reference clock distribution circuit to a) add another clock buffer and b) add another clock transmission line that is matched to the others. If there is a mismatch between the temperatures or power supply voltages seen by the sensor chips then there will be mismatches in the on-chip gate delays seen on the chips, which will tend to de-synchronize the chips. The master reset is also problematic since each sensor chip could have some random mismatch. As a result the chips may not be reliably reset to the same state. Therefore, an active synchronization strategy is required that adjusts for 1) slight trace mismatch and chip-to-chip mismatch; 2) voltage and temperature variations between chips; and 3) the possibility of reset state mismatch between chips. Therefore, better solutions for time synchronization are required to meet timing that demand accuracies within picoseconds.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0010" num="0009">The novel features of the invention are set forth in the appended claims. However, for purpose of explanation, several embodiments of the invention are set forth in the following figures.</p><p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. <b>1</b></figref> illustrates a passive approach for time synchronization used in current sensor systems.</p><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates one embodiment for a sensor network, including a sensor network for use in PET, LiDAR or FLIM applications.</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates one embodiment for a picosecond time digitization circuit.</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrates embodiments for time synchronization across master and slave devices.</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>5</b></figref> illustrates embodiments for time synchronization across master and slave devices.</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>7</b></figref> illustrates a network of sensor modules configured to produce a time synchronized sensor network.</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a block diagram illustrating one embodiment for the AN1064 chip.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates one embodiment for a detector module for use in PET applications.</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>10</b></figref> illustrates one embodiment of a PET scanner based on the detector module depicted in <figref idref="DRAWINGS">FIG. <b>9</b></figref>.</p><p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. <b>11</b></figref> illustrates one embodiment of a LiDAR system (<b>1100</b>) that incorporates the sensor module of the present invention.</p><p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. <b>12</b></figref> illustrates the use of redundant sensors to eliminate interference effects.</p><p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. <b>13</b></figref> illustrates one embodiment of a flow cytometry system incorporating the sensor module technology of the present invention.</p><p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. <b>14</b></figref> illustrates a flow cytometer that allows for decay lifetime measurement.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0004" level="1">DETAILED DESCRIPTION</heading><p id="p-0024" num="0023">Today, there exists networking protocols that allow for the time synchronization of local area network (LAN) elements such as routers, switches and network interface cards within computers, test instrumentation or factory machines. Precision Time Protocol (PTP) is designed to be compatible with Ethernet, the dominant LAN technology in use today. PTP is designed for sub-microsecond time accuracy. White Rabbit (WR) is based on PTP and Synchronous Ethernet and is designed for sub-nanosecond accuracy. White Rabbit was designed for the instrument synchronization, control and data transfers required for large-scale particle physics experiments (e.g. the LHC experiment at CERN).</p><p id="p-0025" num="0024">Both PTP and WR involve the use of network elements that have time stamping capability. The time at which an Ethernet frame is sent or received can be recorded by all compliant network elements. A master-slave hierarchy is specified that allows the master network elements to update the current time at the slave elements. Because master and slave are connected via an electrical cable or fiber optic cable there will be a time delay (or latency) in communication between them. The protocol gives masters the ability to estimate the time delay with which they communicate with their slaves. This allows the masters to pass their local time to the slaves along with the delay information. The slaves then update their local time to the master's time plus the master-to-slave message delay. The result is that the master and slave time readings are nominally identical.</p><p id="p-0026" num="0025">PTP and WR do not give sufficient time synchronization for the aforementioned PET, LiDAR and FLIM applications where time measurement accuracies of picosecond to tens of picoseconds are required. WR has been shown to achieve hundreds of picoseconds of timing accuracy. It involves a coarse time stamping technology with complex sequence of message passing between master and slave that allows the slave to shift its internal clock in fine phase steps so as to achieve synchronization. WR is designed so as to minimize the need for custom integrated circuits designed specifically for the synchronization process.</p><p id="p-0027" num="0026">To achieve accuracy in the range 1-100 ps, custom integrated circuits are required to measure time stamps with sub-100 ps accuracy. These circuits must be combined with a physical layer protocol for measuring the latency in the connections between network elements.</p><p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates one embodiment for a sensor network, including a sensor network for use in PET, LiDAR or FLIM applications. The sensor network <b>200</b> includes a sensor controller (<b>210</b>) serially coupled to a plurality of sensor modules (<b>230</b>, <b>240</b>, <b>250</b> and <b>260</b>). Each sensor module includes, as shown by example in sensor module <b>260</b>, sensor and readout circuits (<b>225</b>), logic circuits (<b>245</b>) as well as transceiver circuits (<b>235</b> and <b>255</b>). The sensor modules (<b>230</b>, <b>240</b>, <b>250</b> and <b>260</b>) receive a timing reference from reference clock generator (<b>220</b>). Each sensor module (<b>230</b>, <b>240</b>, <b>250</b> and <b>260</b>) may be a single chip or a module made out of multiple chips. The network elements (sensor controller (<b>210</b>) and sensor modules (<b>230</b>, <b>240</b>, <b>250</b> and <b>260</b>) are daisy-chained. This allows straightforward expandability for each chain. The sensor controller (<b>210</b>) may also be designed to service multiple daisy chains. Note that the reference clock (<b>220</b>) is distributed to each network element without any timing skew requirements.</p><p id="p-0029" num="0028">The sensor network (<b>200</b>) allow the sensor controller (<b>210</b>) to a) configure and program the sensor modules (<b>230</b>, <b>240</b>, <b>250</b> and <b>260</b>), b) the sensor modules (<b>230</b>, <b>240</b>, <b>250</b> and <b>260</b>) to transfer measurement data to the sensor controller (<b>210</b>), and c) synchronize all the sensor modules (<b>230</b>, <b>240</b>, <b>250</b> and <b>260</b>) to picosecond accuracy via on-chip or on-module custom circuits and a physical layer protocol.</p><p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates one embodiment for a picosecond time digitization circuit. Circuit <b>303</b> may be used to measure on-chip delays with high accuracy and precision. The delay measurements are directly comparable between separate chips even with voltage and temperature variations between chips because the time delay measurement unit is fixed using an on-chip Phase-Locked Loop (PLL).</p><p id="p-0031" num="0030">A PLL (<b>300</b>) consists of a 4-stage ring oscillator (implemented using differential circuits) (<b>302</b>), a phase interpolator (<b>308</b>), divider circuits (<b>310</b> and <b>312</b>), a phase-frequency detector (PFD) (<b>306</b>), a charge pump (CP) and loop filter (LF) (<b>304</b>) is phase-locked to the system reference clock (<b>305</b>). With the reference clock (<b>305</b>) at 156.25 MHz and the dividers (<b>310</b> and <b>312</b>), as shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the VCO (<b>302</b>) will oscillate at 2.5 GHz, and each ring oscillator gate delay will be 50 ps over expected chip supply voltage and temperature variations. This 50 ps unit gate delay forms the least significant bit (LSB) of the time stamping circuit. The 4 ring oscillator stage (<b>302</b>) outputs and the two (in-phase and quadrature) outputs of the divide-by-2 circuit (<b>310</b>) are distributed to each Time Digitization Unit (TDU) (<b>320</b>, <b>322</b>, <b>324</b> and <b>326</b>). In some embodiments, each TDU (<b>320</b>, <b>322</b>, <b>324</b> and <b>326</b>) consists of 6 flip-flops and an encoder, such as flip-flops <b>321</b> and encoder <b>323</b> in TDU <b>320</b>, that produces a binary representation of the time measurement. The binary output of the encoder for TDUs (<b>320</b>, <b>322</b>, <b>324</b> and <b>326</b>) represents the occurrence time of the TDU strobe rising edge within the 800-ps clock period of the signal at the input to the divide-by-8 block (<b>312</b>). The three bits of the divide-by-8 binary counter (<b>312</b>) are added to the outputs of a counter clocked by the reference clock (<b>305</b>). This sum is added to the output of each TDU (<b>320</b>, <b>322</b>, <b>324</b> and <b>326</b>) so as to produce a 64-b representation of the time on the chip. Note that a 64b representation allows time to be recorded with 50 ps precision over a period of 29 years for the circuit in before the time count rolls over.</p><p id="p-0032" num="0031">Note that each TDU (<b>320</b>, <b>322</b>, <b>324</b> and <b>326</b>) samples the in-phase and quadrature outputs of the divide-by-2 circuit (<b>310</b>). This allows the correct divider state to be sampled while correcting for non-zero divider delay. The correct divider output is chosen based on the sampled state of the ring oscillator stage that clocks the divider.</p><p id="p-0033" num="0032">The time stamping circuit further includes counter <b>314</b>, shift left <b>316</b>, summing circuits (<b>317</b>, <b>318</b>, <b>334</b>, <b>336</b>, <b>338</b> and <b>332</b>). These circuits (<b>314</b>, <b>316</b>, <b>317</b>, <b>318</b>, <b>334</b>, <b>336</b>, <b>338</b> and <b>332</b>) allow a global time offset to be injected into the 64-b time representation so as to correct the local chip time relative to a master time with a precision of one TDU LSB. The phase interpolator (<b>308</b>) allows the 4 VCO (<b>302</b>) output signals to be shifted together in sub-LSB steps. This allows for fine time control that would allow chip-to-chip synchronization to less than one LSB.</p><p id="p-0034" num="0033">An arbitrary number of TDUs can be used on a chip. However, it is important that the propagation delays of the 6 clock signals from the PLL be the same for all TDUs. This can be achieved by trace matching and repeater delay matching methods that are part of the known art in custom integrated circuit design.</p><p id="p-0035" num="0034">Note that the LSB precision of the time stamping circuit can be improved by running the ring oscillator (<b>302</b>) faster (by dissipating additional power) or by implementing the circuit (<b>303</b>) in a more advanced process technology. In addition, interpolation between ring oscillator (<b>302</b>) stages can be used to reduce the LSB size further. An LSB of &#x3c;10 ps should be readily achievable with commercially-available 16 nm finFET CMOS processes.</p><p id="p-0036" num="0035">Synchronization is performed via a master-slave algorithm where, for two chips next to each other on the daisy chain, the chip electrically closer to the controller is the master and the chip farther from the controller is the slave. The master causes the slave to update its internal time to match that of the master.</p><p id="p-0037" num="0036">The sensor network (<b>200</b>, <figref idref="DRAWINGS">FIG. <b>2</b></figref>) may be designed to use on Ethernet-like protocol to pass data between master and slave. In this case, data frames would be transmitted between chips with the frames interspersed with idle characters. It is during the idle periods that synchronization steps may be performed. Alternatively, regularly scheduled synchronization periods could be defined. While synchronization could be done at system start-up, it is important that synchronization occurs regularly even after system start-up in order for the system to correct for temperature and power supply voltage changes that occur after start-up.</p><p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrates one embodiment for synchronization between a master IC (<b>412</b>) and a slave IC (<b>430</b>). For this embodiment, the master IC (<b>412</b>) and slave IC (<b>430</b>) include datapath logic (<b>410</b> and <b>415</b>), TDUs (<b>414</b> and <b>420</b>), and transceiver circuits (<b>418</b>, <b>422</b>) and (<b>435</b>, <b>440</b> and <b>450</b>). Synchronization occurs with the slave placed in a loopback mode where data received from the master is immediately transmitted by the slave back to the master over bidirectional interface (<b>426</b> and <b>455</b>), as shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>. The master can measure the round drip delay using its on-chip TDUs (<b>414</b> and <b>420</b>). The round trip delay can be expressed as:</p><p id="p-0039" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>T</i><sub>round</sub><i>=DTX</i>1+<i>DD</i>12+<i>DRX</i>2+<i>DLB+DTX</i>2+<i>DD</i>21+<i>DRX</i>1<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0040" num="0038">DTX1 represents the delay through the transmitter (<b>418</b>) (which may include the serializer) on master IC (<b>412</b>). DRX1 represents the delay through the receiver (<b>435</b>) (which may include the deserializer). DTX2 and DRX2 represent transmitter (<b>450</b>) and receiver (<b>435</b>) delays on slave IC (<b>430</b>). DLB represents the delay through the loopback path (<b>440</b>) on slave IC (<b>430</b>). DD12 represents the propagation delay in the interconnect (<b>426</b>) carrying data from master IC <b>412</b> to slave IC <b>430</b>. DD21 represents the propagation delay in the interconnect (<b>455</b>) carrying data from slave IC <b>430</b> to master IC (<b>412</b>). Note that the interconnects (<b>426</b> and <b>455</b>) may be a printed circuit board traces, electrical cables, or fiber optic cables.</p><p id="p-0041" num="0039">The desired quantity is the latency from master to slave:</p><p id="p-0042" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>T</i><sub>latency</sub><i>=DTX</i>1+<i>DD</i>12+<i>DRX</i>2<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0043" num="0040">Once T<sub>latency </sub>is known by the master IC (<b>412</b>), then it can send its own internal time reading to the slave IC (<b>430</b>) along with the value of T<sub>latency</sub>. The slave IC (<b>430</b>) then updates its internal time to master's time plus the T<sub>latency</sub>. If the link is completely symmetrical and DLB is zero then the latency could be determined by simply halving the T<sub>round </sub>measurement value. In practice this is unrealistic because of implementation details associated with the serializer/deserializer (SerDes) circuits used to realize modern high-speed data networks. The delay through a SerDes TX and RX can vary by multiple bit intervals with the initialization state of the serializer and deserializer subcircuits. Such circuits always include dividers, which will initialize in non-deterministic states. Therefore the delay through a serializer or deserializer is not known unless it is specifically reset. In addition, because of chip-to-chip power supply and temperature variations, there is no guarantee that DTX1 will be the same as DTX2 and that DRX1 will be the same as DRX2. Finally, DLB will not be zero.</p><p id="p-0044" num="0041"><figref idref="DRAWINGS">FIG. <b>5</b></figref> depicts more precise measurements achieved from the round trip delay components. For this embodiment, the master IC (<b>510</b>) and slave IC (<b>530</b>) include datapath logic (<b>505</b> and <b>540</b>), TDUs (<b>512</b>, <b>514</b>, <b>532</b>, <b>536</b>, <b>548</b>, <b>550</b>, <b>565</b>, <b>580</b>), and transceiver circuits (<b>516</b>, <b>570</b>) and (<b>534</b> and <b>551</b>). With the use of multiple TDUs (<b>512</b>, <b>514</b>, <b>532</b>, <b>536</b>, <b>548</b>, <b>550</b>, <b>565</b>, <b>580</b>), the delays of various circuits are directly measured. The delay measurements made entirely on one chip are compared to measurements on another chip because of the LSB of the time stamping circuits is the same over all the chips. However, absolute time readings cannot be combined between chips because the internal time is not synchronized between the two chips before the synchronization process is completed.</p><p id="p-0045" num="0042">Using the on-chip TDUs (<b>512</b>, <b>514</b>, <b>532</b>, <b>536</b>, <b>548</b>, <b>550</b>, <b>565</b>, <b>580</b>), DTX1, DRX1, DTX2, DRX2 and DLB can be measured. By passing data back and forth between the master IC (<b>510</b>) and the slave IC (<b>530</b>), the value of DD12+DD21 can be determined by the master IC (<b>510</b>). Assuming the two passive interconnect (<b>525</b> and <b>555</b>) delays are equal, then the master-to-slave latency T<sub>latency </sub>can be determined using equation (2). For a bidirectional interface (<b>525</b> and <b>555</b>) made from matched printed circuit board (PCB) traces, it is a good assumption that DD12 and DD21 are equal. If fiber optic cables are used for the bidirectional interface (<b>525</b> and <b>555</b>), then the delay asymmetry can be characterized over temperature and cable length and used to correct the value of DD12.</p><p id="p-0046" num="0043">Note that synchronization between network elements, connected via electrical traces on a PCB, electrical cables or fiber optic cables, is disclosed herein. However, these embodiments may be extended to wireless connections between network elements, such as RF links and free-space optics.</p><heading id="h-0005" level="1">Applications for the Invention</heading><p id="p-0047" num="0044">In some embodiments, the circuitry described above for performing time synchronization are integrated onto a silicon chip. <figref idref="DRAWINGS">FIG. <b>6</b></figref> illustrates a configuration for performing time synchronization among sensors, incorporated onto a printed circuit board (PCB) module. Alternatively, the synchronization circuitry can be integrated with a sensor array on a single chip.</p><p id="p-0048" num="0045">For the embodiment shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, the AN1064 (<b>640</b>) is a readout chip for an array of silicon photomultiplier (SiPMT) sensors (<b>610</b>). Each sensor, with the array of sensors (<b>610</b>), is a highly-sensitive detector of incident photons in the visible to near-infrared spectrum.</p><p id="p-0049" num="0046"><figref idref="DRAWINGS">FIG. <b>7</b></figref> illustrates a network of sensor modules configured as a time synchronized sensor network. The exemplary network <b>700</b> includes a CPU <b>710</b>, serially coupled to a plurality of modules (<b>712</b>, <b>714</b>, <b>716</b>, <b>718</b>, <b>720</b>, <b>722</b>, <b>724</b>, <b>726</b>, <b>728</b>, <b>730</b>, <b>732</b>, <b>736</b> and <b>740</b>) via an ApNet Interface. Each module (<b>712</b>, <b>714</b>, <b>716</b>, <b>718</b>, <b>720</b>, <b>722</b>, <b>724</b>, <b>726</b>, <b>728</b>, <b>730</b>, <b>732</b>, <b>736</b> and <b>740</b>) is synchronized so that the time readings on each module are synchronized to picosecond accuracy using the techniques described herein.</p><p id="p-0050" num="0047">For purposes of nomenclature, &#x201c;ApNet&#x201d; refers to the name for the network protocol that connects the sensor modules together. ApNet provides a means for transmitting data from module to module, for programming the modules, for transmitting sensor readout data from each chip to the CPU (<b>710</b>), and for performing time synchronization of each chip in the network using the principles of the invention described herein.</p><p id="p-0051" num="0048"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a block diagram illustrating one embodiment for the AN1064 chip. For this embodiment, the AN1064 chip (<b>800</b>) consists of readout circuits for each sensor in the SiPMT array (<b>810</b>) (Channels 0 to 63). A register file (<b>870</b>) stores sensor data. A central PLL (<b>820</b>) provides reference clocks for TDUs (not shown) integrated into each readout channel (<b>810</b>) as well as the TDUs used in the synchronization circuits. Circuitry to perform synchronization includes a microcontroller <b>860</b>, switching power supply controller <b>865</b>, as well as a slave synchronization block (<b>840</b>) (i.e. a loopback path and TDU circuits) to allow the West interface loopback delay to be measured and conveyed to the link partner on the West interface (<b>830</b>). The master synchronization circuit (<b>850</b>) consists of TDUs and logic that allow measuring the round trip delay for the East interface (<b>855</b>) to its link partner. As the network performs time synchronization, the absolute time on the West interface (<b>830</b>) link partner is passed on to the present chip. This absolute time is then be passed via the East interface (<b>855</b>) to the next chip in the daisy chain.</p><p id="p-0052" num="0049">PET Scanners</p><p id="p-0053" num="0050"><figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates one embodiment for a detector module for use in PET applications. For PET applications, each detector module, such as detector module <b>900</b>, is coupled to a scintillation crystal (<b>950</b>) as shown in <figref idref="DRAWINGS">FIG. <b>9</b></figref>. Detector module <b>900</b> is configured to allow the gamma rays produced by the positron-electron annihilation event to be converted into visible light sensed by the SiPMT devices (<b>910</b>) on the detector module (<b>900</b>). Synchronization, as described herein, is performed by IC <b>920</b> (AN1064) with interface (<b>930</b>).</p><p id="p-0054" num="0051"><figref idref="DRAWINGS">FIG. <b>10</b></figref> illustrates one embodiment of a PET scanner based on the detector module depicted in <figref idref="DRAWINGS">FIG. <b>9</b></figref>. In this embodiment, the time-synchronized network, with detector modules <b>1010</b> and ApNet interfaces <b>1020</b>, is arranged in a ring configuration. The relative arrival times of gamma photons produced by a single positron-electron annihilation event allow the event to be localized relative to the two sensor modules (<b>1010</b>) registering hits. Multiple rings are typically used to realize a PET scanner having a cylindrical array of sensors. More rings allow more solid angle around the patient to be covered, which results in the detection of more gamma photons, in turn resulting in higher scanner sensitivity.</p><p id="p-0055" num="0052">Each ring of sensor modules, such as a ring formed by the PET scanner cross-section <b>1000</b>, is a time synchronized sensor array with each detector module (<b>1010</b>) connected to other detector modules and to the host CPU (<b>1030</b>) using ApNet (<b>1020</b>). The use of the AN1064, contained in the detector modules <b>1010</b>, and ApNet <b>1020</b> constitute some embodiments of the inventions described herein. Their use simplifies the design of the PET scanner by combining the sensor readout and control functions with the time synchronization of the network elements. The integration of the readout electronics with the sensor network interface circuits results in lower system power dissipation, reduced component count and lower overall system cost. In addition, the use of the AN1064 (within detector modules <b>1010</b>) and ApNet (<b>1020</b>) allow alternative scanner configurations to be realized. For example, non-cylindrical scanners may be configured to conform to the shape of the patient's body. This allows more solid angle to be covered by the scanner and leads to higher scanner sensitivity. The simplified nature of the sensor network would also allow it to be re-configurable and customizable for different patients and for scanning specific areas of the body. In addition, if the sensor modules are connected together in the manner using appropriately designed electrical cables or fiber optic cables, then the PET ring may be configured so as not to interact with the magnetic field of a magnetic resonance imaging MRI scanner. This would allow the PET scanner to be incorporated within an MM scanner.</p><p id="p-0056" num="0053">The techniques of the invention may be used to integrate a PET scanner within a magnetic resonance imaging (MRI) scanner. The ability to overlay images taken at the same time from both MRI and PET scanners leads to better interpretation of the PET results. The problem with integrating both imaging modalities is that current PET sensor networks interfere with the operation of the MRI.</p><p id="p-0057" num="0054">In one embodiment, the sensor modules are arranged within the MRI scanner in such a way to minimize interference with the operation of the MM scanner. This is accomplished through the proper design of the PET module ring so that its effects on the MRI are predictable and can be compensated by the MRI scanner. In some embodiments, fiber optic cables are used as the transmission paths between sensor modules.</p><p id="p-0058" num="0055"><figref idref="DRAWINGS">FIG. <b>11</b></figref> illustrates one embodiment of a LiDAR system (<b>1100</b>) that incorporates the sensor module of the present invention. A sensor module (<b>1110</b>) is used to detect light reflected from the target (<b>1102</b>). The laser (<b>1120</b>) is excited via a pulse generator (<b>1130</b>), and the round trip ToF of the light pulse is measured by the sensor module (<b>1110</b>). The time measurement allows the distance of the target (<b>1102</b>) to the LiDAR system (<b>1100</b>) to be accurately measured. As the laser beam from the laser (<b>1120</b>) is scanned, a three-dimensional representation of the surroundings can be created. LiDAR is presently finding widespread application in autonomous vehicles such as unmanned areal vehicles and self-driving automobiles.</p><p id="p-0059" num="0056">When LiDAR is used for self-driving automobiles there is a possibility that LiDAR systems on different cars will interfere with each other. For example, at a traffic intersection, multiple self-driving cars may be facing each other. The LiDAR radar from one car may temporarily blind the LiDAR sensor on another car as show in LiDAR system (<b>1200</b>) illustrated in <figref idref="DRAWINGS">FIG. <b>12</b></figref>. The interfering laser (<b>1205</b>) may cause sensor module (<b>1210</b>) to register a spurious pulse and thereby produce an erroneous target distance reading.</p><p id="p-0060" num="0057"><figref idref="DRAWINGS">FIG. <b>12</b></figref> illustrates the use of redundant sensors to eliminate interference effects. For this embodiment, LiDAR system (<b>1200</b>) includes two redundant sensor modules (<b>1210</b> and <b>1220</b>), laser <b>1230</b>, mirror <b>1240</b>, sweep controller <b>1250</b>, pulse generator <b>1260</b> and host CPU <b>1270</b>. During normal operation, the round trip times measured by sensor module (<b>1210</b>) and sensor module (<b>1220</b>) are essentially the same. If an interfering laser (<b>1205</b>) corrupts the measurement made by sensor module (<b>1210</b>), then by sensor module (<b>1210</b>) and sensor module (<b>1220</b>) read different round trip times. Under this scenario, measurements may be rejected by the LiDAR system (<b>1200</b>) as spurious, and another measurement may be attempted. Furthermore, use of a third sensor module (or even more sensors) would allow spurious round trip delay measurements to be rejected in real time. The redundant sensors (sensor module <b>1210</b> and sensor module <b>1220</b>) may be implemented as a time synchronized network using the invention described herein. Note that another sensor module, configured as part of the time synchronized network, may also be used to measure the laser's pulse launch time.</p><p id="p-0061" num="0058">Flow Cytometry</p><p id="p-0062" num="0059">Flow cytometry is a biophysical technology for performing biological assays. Applications include cell counting, cell sorting, biomarker/disease detection and drug discovery. The technique involves forcing particles through microfluidic tubes into an interaction region where the particles are illuminated by a laser beam. <figref idref="DRAWINGS">FIG. <b>13</b></figref> illustrates one embodiment of a flow cytometry system incorporating the sensor module technology of the present invention. As shown in <figref idref="DRAWINGS">FIG. <b>13</b></figref>, biological samples (<b>1340</b>) are funneled through a capillary (<b>1332</b>) by sheath fluid (<b>1330</b>). The particles may be biological cells bearing fluorescent molecular tags or cytometric beads incorporating fluorophore-tagged reagents. Light scattered forward, past the particle, and light scattered to the side of the particle are measured, under the control of CPU <b>1360</b>, in order to measure the size and granularity of the particles. Specifically, forward scatter data is generated from light, emanated from laser (<b>1350</b>), incident upon biological samples (<b>1340</b>) and sensed at forward scatter sensor (<b>1320</b>). Similarly, side scatter data is generated from light reflected off the biological sample (<b>1340</b>) and sensed in side scatter sensor (<b>1342</b>). Side scattered light is also monitored for fluorescence so as to detect the presence of fluorophore tags attached to targeted biomarkers or chemicals. For this embodiment, fluorescence data is generated from light reflected off the biological sample (<b>1340</b>) and sensed in fluorescence sensor (<b>1310</b>). The forward scatter sensor (<b>1320</b>), forward scatter sensor (<b>1320</b>), and fluorescence sensor (<b>1310</b>), along with the ApNet interface (<b>1370</b>), implement one or more embodiments of the time synchronized techniques disclosed herein.</p><p id="p-0063" num="0060">Flow cytometers are designed to allow as many fluorophore colors as possible to be detected. Because multiple biomarkers can be targeted in a single experiment, many experiments can be carried out simultaneously (i.e. multiplexed). Each fluorophore therefore represents a measurement &#x201c;channel&#x201d;. At present, flow cytometers can detect up to 20-30 channels. Spectral overlap in the emission of various fluorophores limits the number of channels that can be detected just by measuring fluorescence intensity. The use of fluorophores with different decay lifetimes allows a significant increase in the number of measurement channels providing that these different decay lifetimes can be detected.</p><p id="p-0064" num="0061"><figref idref="DRAWINGS">FIG. <b>14</b></figref> illustrates a flow cytometer that allows for decay lifetime measurement. The sensor network in <figref idref="DRAWINGS">FIG. <b>14</b></figref> allows the relative signal arrival time at fluorescence sensors (<b>1425</b>, <b>1420</b>, <b>1415</b> and <b>1410</b>) to be measured relative to the signal arrival time at side scatter sensor (<b>1435</b>). Specifically, under control of host CPU (<b>1440</b>), laser beam <b>1445</b> strikes biological samples, at interaction point (<b>1450</b>), and reflects onto side scatter sensor (<b>1435</b>), forward scatter sensor (<b>1430</b>), as well as dichroic mirrors (<b>1455</b>). The reflection, onto the dichroic mirrors (<b>1455</b>) is filtered through optical filter (<b>1460</b>) and then projected onto the fluorescence sensors (<b>1425</b>, <b>1420</b>, <b>1415</b> and <b>1410</b>). Each sensor module (<b>1425</b>, <b>1420</b>, <b>1415</b>, <b>1410</b>, <b>1430</b> and <b>1435</b>) includes a TDU that allows the arrival time of the light from the interaction point to be logged. The arrival times at the fluorescence sensors (<b>1425</b>, <b>1420</b>, <b>1415</b> and <b>1410</b>) relative to the side scatter sensor (<b>1435</b>) is a measure of the fluorescence decays times. The sensor synchronization (to picosecond accuracy) is achieved, via the principles disclosed herein, by using ApNet (<b>1470</b>) to connect the sensor modules (<b>1425</b>, <b>1420</b>, <b>1415</b>, <b>1410</b>, <b>1430</b> and <b>1435</b>) to each other.</p><p id="p-0065" num="0062">Confocal Microscopy</p><p id="p-0066" num="0063">Confocal microscopes allow samples to be scanned using a laser beam, which excites fluorophore in a minute volume at the focal point of the laser beam. The fluorophores are attached to molecules of interest. The light emitted by the fluorophores is sensed using a sensor array to detect the presence of specific molecules. By recording the fluorescence measurements at each laser focal point location as the laser is scanned, a two or three-dimensional representation of the sample can be produced.</p><p id="p-0067" num="0064">In some applications the intensity of the measured fluorescence in a specific wavelength range is the quantity of interest. In FLIM applications, it is the decay lifetime of the fluorescence (within a specific wavelength range) that is of interest. FLIM allows more fluorophore tags (i.e. measurement channels) to be used just as in flow cytometry as described above. In addition, FLIM allows the measurement of FRET, which allows an indirect measurement of the physical distance between molecules of interest within the cell or cytometric bead.</p><p id="p-0068" num="0065">In FLIM applications, the emission rate of photons may be so low such that, in response to a laser pulse, only one or a few photons is detected by the sensor array. The decay lifetime is measured by repeatedly pulsing the sampling laser beam and logging the photon arrival times (relative to the laser pulse time). Doing this over thousands of pulses allows a histogram to be created that directly indicates the fluorescence decay time.</p><p id="p-0069" num="0066">Because each laser pulse creates so few photons it is desirable to have many sensors positioned around the sample in order to cover as much solid angle as possible which maximizes photon collection efficiency and, therefore, microscope sensitivity. For these sensors to all be able to log photon arrival times from the same laser pulse the sensors need to be time synchronized to picosecond accuracy. Using the principles described in this invention the sensors can be implemented using an array of sensors connected via ApNet.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A positron emission tomography (PET) system, comprising:<claim-text>a plurality of detector modules comprising:<claim-text>a detector unit to receive a plurality of positrons and electrons emitted from a positron&#x2014;electron annihilation event in a radioactive dye within a chemically active region located within a subject and to convert the gamma rays produced by the positron-electron annihilation event;</claim-text><claim-text>a plurality of a readout circuits, coupled to the detector unit, to record the positron&#x2014;electron annihilation event for the detector module;</claim-text></claim-text><claim-text>a plurality of time digitizer units (TDUs), at least one for each of the readout circuits, to generate at least one timestamp to record a time of the positron-electron annihilation event;</claim-text><claim-text>a time synchronized network to synchronize the timestamps from the TDUs across the detector modules; and</claim-text><claim-text>at least one processing unit to receive the synchronized timestamps and to localize the events relative to two of the detector modules that recorded the positron-electron annihilation event.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The positron emission tomography (PET) system as set forth in <claim-ref idref="CLM-00001">claim 1</claim-ref>, within the detector modules comprise:<claim-text>a plurality of scintillator crystals to convert the gamma rays, produced by the positron-electron annihilation event, into visible light; and</claim-text><claim-text>a plurality of SiPMT devices, coupled to the scintillator crystals, to read the visible light.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The positron emission tomography (PET) system as set forth in <claim-ref idref="CLM-00001">claim 1</claim-ref>, within the detector modules are configured in a ring.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The positron emission tomography (PET) system as set forth in <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising a plurality of the rings, arranged cylindrically, to form a cylindrical array of detector modules.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The positron emission tomography (PET) system as set forth in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the detector modules are arranged to conform to the shape of a patient's body.</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The positron emission tomography (PET) system as set forth in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the detector modules are arranged so as to be re-configurable and customizable for different patients and for scanning specific areas of the body.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The positron emission tomography (PET) system as set forth in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the detector modules are arranged within an MRI scanner in such a way that they minimize interference with the operation of the MRI scanner.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The positron emission tomography (PET) system as set forth in <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the detector modules comprise the time synchronized network implemented on an integrated circuit combined with the SiPMT devices on a printed circuit board (PCB) module.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The positron emission tomography (PET) system as set forth in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the time synchronized network comprises a succession of a plurality of master integrated circuits (&#x201c;ICs&#x201d;) and a plurality of slave ICs configured in adjacent detector modules, to perform synchronization of timing between adjacent detector modules.</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The positron emission tomography (PET) system as set forth in <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the slave IC comprises a synchronization block to allow a loopback delay to be measured and conveyed to the master IC between adjacent detector modules.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The positron emission tomography (PET) system as set forth in <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the synchronization block comprises a delay loop comprising at least one transmission path between the master IC and the slave IC, the synchronization block to propagate a signal through the transmission path, during an initialization, and to calculate a propagation delay time, T<sub>latency</sub>, between the master IC and the slave IC.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The positron emission tomography (PET) system as set forth in <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the time synchronized network comprises a synchronizing circuit on the slave IC for synchronizing timing of the master IC to timing of the slave IC, comprising:<claim-text>a circuit, comprising a phase-locked loop (PLL), for generating a plurality of timing signals for the slave IC using the PLL;</claim-text><claim-text>the time digitizer unit (TDU) for receiving a global offset, comprising global timing information and timing delay information between the master IC and the slave IC (T<sub>latency</sub>), and for generating a timestamp, synchronized to the timing of the master IC, in response to the positron-electron annihilation event, the TDU comprising:<claim-text>a circuit for receiving the timing signals and for generating a count representing a plurality of least significant bits (LSBs) of the timestamp in response to the positron-electron annihilation event; and</claim-text><claim-text>at least one adder for adding the global offset to the LSBs of the timestamp to generate the timestamp for the event.</claim-text></claim-text></claim-text></claim></claims></us-patent-application>