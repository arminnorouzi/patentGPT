<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006599A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006599</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17781162</doc-number><date>20201021</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>DE</country><doc-number>10 2019 218 553.3</doc-number><date>20191129</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>P</subclass><main-group>29</main-group><subgroup>50</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>P</subclass><main-group>21</main-group><subgroup>06</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>P</subclass><main-group>21</main-group><subgroup>22</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>P</subclass><main-group>6</main-group><subgroup>08</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20160201</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>29</main-group><subgroup>50</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>21</main-group><subgroup>06</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20160201</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>21</main-group><subgroup>22</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>6</main-group><subgroup>08</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">METHOD AND DEVICE FOR REGULATING AN ELECTRIC MACHINE</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="obligated-assignee"><addressbook><orgname>Robert Bosch GmbH</orgname><address><city>Stuttgart</city><country>DE</country></address></addressbook><residence><country>DE</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Paulus</last-name><first-name>Sebastian</first-name><address><city>Esslingen Am Neckar</city><country>DE</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Hirsch</last-name><first-name>Michele</first-name><address><city>Esslingen</city><country>DE</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>Lee</last-name><first-name>Wei-Lung</first-name><address><city>Bietigheim-Bissingen</city><country>DE</country></address></addressbook></inventor></inventors></us-parties><pct-or-regional-filing-data><document-id><country>WO</country><doc-number>PCT/EP2020/079600</doc-number><date>20201021</date></document-id><us-371c12-date><date>20220531</date></us-371c12-date></pct-or-regional-filing-data></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">The invention relates to a method (<b>400</b>) for regulating an electric machine (<b>190</b>) comprising a harmonic regulator (<b>100</b>), wherein the harmonic regulator comprises an input transformer (<b>110</b>), a regulator (<b>120</b>), and an output transformer (<b>130</b>). The method has the steps of: ascertaining (<b>410</b>) a feedback variable (Idq); transforming (<b>420</b>) the feedback variable (Idq); ascertaining (<b>430</b>) a regulating deviation; ascertaining (<b>440</b>) an equalization variable (UHrmc*); back-transforming (<b>450</b>) the equalization variable (UHrmc*); and energizing (<b>480</b>) at least one winding of the electric machine (<b>190</b>) on the basis of the actuating variable (UdqHrmc*).</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="90.42mm" wi="158.75mm" file="US20230006599A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="223.10mm" wi="132.00mm" orientation="landscape" file="US20230006599A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="215.65mm" wi="131.91mm" orientation="landscape" file="US20230006599A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="214.29mm" wi="123.02mm" file="US20230006599A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="220.56mm" wi="141.82mm" file="US20230006599A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading><p id="p-0002" num="0001">The invention relates to a method and a device for controlling an electric machine. The invention further relates to an electric drive system having a corresponding device and to a vehicle having an electric drive system and also to a computer program and a computer-readable storage medium.</p><p id="p-0003" num="0002">Document DE 2017 102 036 91 A1 discloses control for an electric machine, in which a disturbance variable is compensated for and a target value is set at the same time. For operation of an electric machine, a phase current is adjusted as the target value. The phase current is preferably adjusted as a sinusoidal fundamental. During operation of the electric machine, the phase current causes a uniform average torque to be output. On account of non-ideal sinusoidal magnetic fields, turn arrangements, slotting, tooth shape, saturation effects and/or other effects, harmonic overtones of the torque are also formed in addition to the uniform average torque. Such effects lead to force waves between the rotor and the stator, these force waves acting as tangential and radial tooth forces on the stator teeth given characteristic orders. Owing to the mechanical transmission behavior of the electric machine, these forces can be perceived as vibrations in the machine, the machine housing and coupled-on elements and therefore as structure-borne and airborne sound or surface vibrations. The harmonic overtones of the torque also cause harmonics of the electrical frequency of the electric machine on the phase current as disturbance variables in this case. In order to minimize these disturbance variables, harmonics are adjusted in a targeted manner and harmonics which are superimposed on the adjusted and specified phase current are specified.</p><p id="p-0004" num="0003">There is a need for alternative methods and devices for controlling an electric machine, with which the harmonics are controlled in as robust and stable a manner as possible with high dynamics and flexibility in respect of taking into account relevant frequency components.</p><heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading><p id="p-0005" num="0004">The invention provides a method for controlling an electric machine having a harmonic controller, the harmonic controller comprising an input transformer, a controller and an output transformer. The method comprises the steps of:</p><p id="p-0006" num="0000">ascertaining a feedback variable, the feedback variable comprising an actual variable of a harmonic of a specified frequency in a field-oriented system;<br/>transforming the feedback variable by means of the input transformer to form a DC feedback variable in a harmonic-oriented system;<br/>ascertaining a control deviation as the difference between a specifiable DC reference variable and the DC feedback variable in the harmonic-oriented system;<br/>ascertaining a DC manipulated variable by means of the controller as a function of the control deviation;<br/>back-transforming the DC manipulated variable by means of the output transformer to form a manipulated variable in the field-oriented system;<br/>energizing at least one winding of the electric machine as a function of the manipulated variable.</p><p id="p-0007" num="0005">Field-oriented control arrangements are widely used for controlling electric machines. In so doing, the AC variables of the, preferably sinusoidal, phase currents to be adjusted in the time domain, also called the fundamentals, are respectively transferred by means of a mathematical transformation into a coordinate system rotating with the frequency of the AC variables. The frequency of the AC variables also determines the frequency of the magnetic field in the machine, and therefore this coordinate system rotating with the frequency of the AC variables is also called a field-oriented system. During stationary operation of the electric machine, the AC variables in the time domain produce DC variables in the field-oriented system, which DC variables can be controlled by means of customary control engineering methods. The field-oriented system is also called a d/q coordinate system. In this case, the d-axis of said d/q coordinate system points in the direction of the rotor flux. The q-axis is perpendicular to the d-axis. A sinusoidal phase current is represented as a stator current phasor or stator current vector, which is characterized by means of its length and its direction. This current phasor rotates synchronously with the rotating stator or rotor flux of the electric machine. In the d/q coordinate system, the current phasor can be represented in accordance with its length and its direction by means of two components Id and Iq which are perpendicular to one another and are DC variables in the stationary case.</p><p id="p-0008" num="0006">In order to control an electric machine which can be connected to the harmonic controller, a feedback variable of the electric machine is detected in the field-oriented system. This feedback variable comprises a harmonic which is superimposed on the phase current by the electric machine. In the field-oriented system, the phase current is a DC variable, while the harmonic is an AC variable. Therefore, for controlling the harmonic, similarly to the transformation from the time domain into the field-oriented range, a further mathematical transformation with a frequency of the harmonic from the field-oriented system into a harmonic-oriented system is performed. For this purpose, the feedback variable is transformed by means of an input transformer to form a DC feedback variable in the harmonic-oriented system. Variables that are represented as AC variables in the field-oriented system are represented as DC variables in the harmonic-oriented system during stationary operation of the electric machine. These variables can be controlled by means of customary control engineering methods. Accordingly, a control deviation is ascertained as the difference between a specifiable DC reference variable and the DC feedback variable in the harmonic-oriented system. A DC manipulated variable is ascertained by means of a controller as a function of the control deviation. For further use in the field-oriented control of the electric machine, this DC manipulated variable as the DC variable in the harmonic-oriented system is back-transformed by means of the output transformer to form a manipulated variable in the field-oriented system. In the field-oriented system, the manipulated variable comprises an AC variable, a harmonic. Finally, the method comprises a step for energizing the electric machine as a function of the manipulated variable.</p><p id="p-0009" num="0007">A method for an effective harmonic controller is advantageously provided.</p><p id="p-0010" num="0008">The formulation that a variable of the control loop comprises a harmonic or a fundamental means, within the scope of this application, that a variable of the control loop characterizes or describes at least one harmonic or fundamental, the respective variable of the control loop also being able to contain further signal components, for example a fundamental and one or more harmonics as well as disturbance variables which are additionally still present.</p><p id="p-0011" num="0009">In order to control electric machines, target phase currents are widely specified as a function of ascertained actual phase currents as a function of a torque specification, wherein the phase voltages are set as manipulated variables. Consequently, in scope of this application, the feedback variable (Idq), the DC feedback variable (IHrmc), the DC reference variable (IHrmc*), the machine feedback variable (Iabc) or the specifiable fundamental DC reference variable (Idq*) each preferably comprise a current value and/or the DC manipulated variable (UHrmc*), the manipulated variable (UdqHrmc*), the fundamental DC manipulated variable or the machine manipulated variable (Uabc*) each comprise a voltage value.</p><p id="p-0012" num="0010">In another refinement of the invention, the feedback variable in the field-oriented system preferably comprises a harmonic with a positive frequency with a first amplitude and a first phase of a k<sup>th </sup>order of an electrical frequency of the electric machine and/or a harmonic with a negative frequency with a second amplitude and a second phase of the k<sup>th </sup>order of an electrical frequency of the electric machine.</p><p id="p-0013" num="0011">The feedback variable in the field-oriented system comprises at least one harmonic. Based on the electrical frequency of the electric machine, the harmonic or the harmonics has/have a positive and/or negative frequency of the k<sup>th </sup>order with a respective amplitude and phase position. An order which represents a relevant disturbance variable, since in particular the amplitudes thereof are particularly large, is for example the 6th order, preferably in the positive and negative direction. For example, in the case of an electrical frequency of the electric machine, that is to say of the fundamental, of 450 Hz in the time domain, the frequency of the 6th order given 450 Hz+450 Hz*6 is =3150 Hz and also in the negative direction given 450 Hz&#x2212;6*450 Hz is =&#x2212;2250 Hz. In the field-oriented system, the coordinate system of which rotates with the electrical frequency of the electric machine, the electrical frequency of the electric machine is mapped at 0 Hz and the frequencies +2700 Hz and 2700 Hz are produced for the harmonics of the +/&#x2212;6<sup>th </sup>order. Force waves between the rotor and the stator of the electric machine, which force waves act as tangential and radial tooth forces on the stator teeth and cause the harmonic overtones of the torque, are produced as a function of the magnitude of the amplitudes and the phase position. The greater the number of relevant orders of the feedback variables taken into account for the control, the more effectively the disturbance variables are compensated for.</p><p id="p-0014" num="0012">A feedback variable is advantageously provided for effective harmonic control.</p><p id="p-0015" num="0013">In another refinement of the invention, transforming the feedback variable is performed as a function of an ascertained current rotor angle of the electric machine and comprises rotation with a rotation angle which corresponds to k times the current rotor angle. The rotation is executed in the positive direction and/or the negative direction in this case.</p><p id="p-0016" num="0014">The transformation from the field-oriented system into the harmonic-oriented system comprises rotation by means of a rotation matrix. An AC variable in the field-oriented system therefore becomes a DC variable in the harmonic-oriented system. For this purpose, the feedback variable is rotated with a rotation angle which corresponds to k times the current rotor angle, that is to say with 6 times the current rotor angle in the case of the transformation of the harmonic of the 6<sup>th </sup>order of the electrical frequency. For the harmonics of the k<sup>th </sup>order in the positive direction, the rotation takes place in the positive direction; in the case of the harmonics of the k<sup>th </sup>order in the negative direction, the rotation takes place in the negative direction. The resulting DC variables in the harmonic-oriented system can be indicated, characterized or described by means of complex numbers or as complex parameters, for example as iPosReal, iPosImag and, respectively, as iNegReal and iNegImag.</p><p id="p-0017" num="0015">In addition to the rotation, other transformations can also be used, as an alternative. For example, the complex components iDSin, IDCos can also be calculated by multiplication of the d-current by the sine depending on k times the rotor angle and also by the cosine, and the complex components iQSin, IQCos can be calculated by multiplication of the q-current by the sine and also by the cosine (also called frequency mixing or heterodyning).</p><p id="p-0018" num="0016">Complex harmonics with an amplitude and phase respectively of the d-current and q-current can be used as a further alternative description.</p><p id="p-0019" num="0017">Equally, the components can also be represented as an ellipse with a height, width, rotation and phase by superimposition of two oppositely rotating phasors with a different amplitude and phase, preferably for particularly efficient calibration.</p><p id="p-0020" num="0018">Transformations are advantageously provided for providing DC variables which allow effective harmonic control.</p><p id="p-0021" num="0019">In another refinement of the invention, the specifiable DC reference variable of the harmonic-oriented system comprises a target variable in the harmonic-oriented system for generating a fundamental on a sinusoidal phase current for energizing at least one winding of the electric machine.</p><p id="p-0022" num="0020">The DC reference variable is a target value for generating a harmonic of a specifiable frequency or k<sup>th </sup>order of the electrical frequency of the electric machine for superimposing the sinusoidal phase current or the fundamental for energizing the electric machine. This target value is specified analytically or by means of a characteristic map, in particular as a function of a torque specification, a (phase) current target value or an actual current value, preferably an ascertained phase current. It is already specified in an appropriately transformed manner for use in the harmonic controller in the harmonic-oriented system.</p><p id="p-0023" num="0021">A DC reference variable is advantageously provided for effective harmonic control.</p><p id="p-0024" num="0022">In another refinement of the invention, the DC manipulated variable is ascertained by means of the controller as a function of the control deviation by means of a control operation, using a PI or I controller, an inverse static or dynamic model and a PI or I controller or a controller with an inverse static or dynamic model.</p><p id="p-0025" num="0023">When a PI or I controller is used, individual controllers which are separate from one another are used for each harmonic current component, that is to say for example iPosReal, iPosImag, iNegReal and/or iNegImag.</p><p id="p-0026" num="0024">When an inverse static or dynamic model and a PI or I controller are used, control deviations or current deviations are converted into voltage deviations using an inverse model. Individual PI or I controllers which are separate from one another are then used for each harmonic voltage component, that is to say for example uPosReal, uPosImag, uNegReal and/or uNegImag. The model is calculated from a d/q model or field-oriented model of the electric machine. The model can be of static design or else take into account dynamic components. Control using a model which takes dynamic components into account is more accurate and allows higher controller dynamics.</p><p id="p-0027" num="0025">When a controller with an inverse model (known as an WIC controller (internal model control)) or CVD controller (complex vector design) is used, the inverse controller corresponds to the inverse model of the control section multiplied by an integrator. For a closed control loop T:</p><p id="p-0028" num="0000"><maths id="MATH-US-00001" num="00001"><math overflow="scroll"> <mrow>  <mi>T</mi>  <mo>=</mo>  <mfrac>   <msub>    <mi>&#x3c9;</mi>    <mi>BW</mi>   </msub>   <mrow>    <msub>     <mi>&#x3c9;</mi>     <mi>BW</mi>    </msub>    <mo>+</mo>    <mi>s</mi>   </mrow>  </mfrac> </mrow></math></maths><maths id="MATH-US-00001-2" num="00001.2"><math overflow="scroll"> <mrow>  <mi>T</mi>  <mo>=</mo>  <mfrac>   <mi>GK</mi>   <mrow>    <mn>1</mn>    <mo>+</mo>    <mi>GK</mi>   </mrow>  </mfrac> </mrow></math></maths><maths id="MATH-US-00001-3" num="00001.3"><math overflow="scroll"> <mrow>  <mi>K</mi>  <mo>=</mo>  <mfrac>   <msub>    <mi>&#x3c9;</mi>    <mi>BW</mi>   </msub>   <mi>sG</mi>  </mfrac> </mrow></math></maths></p><p id="p-0029" num="0000">where the variables represent the following:<ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0026">G: machine model</li>    <li id="ul0001-0002" num="0027">K: controller model</li>    <li id="ul0001-0003" num="0028">T: closed control loop</li>    <li id="ul0001-0004" num="0029">&#x3c9;<sub>BW</sub>: Bandwidth</li>    <li id="ul0001-0005" num="0030">s: Laplace</li></ul></p><p id="p-0030" num="0031">The individual components e.g.: iPosReal, iPosImag, iNegReal and iNegImag are no longer controlled separately here. Only the limit frequency is specified by the desired low-pass behavior of the closed control loop.</p><p id="p-0031" num="0032">Since the closed control loop to establish low-pass behavior is produced with this controller, a further low-pass filter in the control loop is not expedient. Control with a model which takes into account dynamic components is more accurate with this variant too.</p><p id="p-0032" num="0033">Different controllers are advantageously provided for effective harmonic control.</p><p id="p-0033" num="0034">In another refinement of the invention, the DC manipulated variable is back-transformed as a function of an ascertained current rotor angle of the electric machine, Back-transforming comprises rotation with a rotation angle which corresponds to k times the current rotor angle. Back-transforming respectively comprises rotation in the positive and/or negative opposite direction to the rotation of the feedback variable by means of the input transformer.</p><p id="p-0034" num="0035">The transformation from the harmonic-oriented system into the field-oriented system comprises rotation by means of a rotation matrix. A DC variable in the harmonic-oriented system therefore becomes an AC variable in the field-oriented system. For this purpose, the DC manipulated variable is rotated with a rotation angle which corresponds to k times the current rotor angle, that is to say with 6 times the current rotor angle in the case of the transformation of the harmonic of the 6<sup>th </sup>order of the electrical frequency. For the harmonics of the k<sup>th </sup>order in the positive direction, the rotation takes place in the positive direction; in the case of the harmonics of the k<sup>th </sup>order in the negative direction, the rotation takes place in the negative direction. In the case of rotation in the negative and positive direction, the resulting AC variables in the field-oriented system are preferably added in a complex manner to the manipulated variable.</p><p id="p-0035" num="0036">In addition to the rotation, other transformations, as described above, can also be used, as an alternative.</p><p id="p-0036" num="0037">Back-transformations are advantageously provided for providing AC variables which can be reused for effective fundamental control</p><p id="p-0037" num="0038">In another refinement of the method for controlling an electric machine, said electric machine further comprises a fundamental controller, the fundamental controller comprising a fundamental input transformer, a fundamental controller and a fundamental output transformer. The method comprises the further steps of:</p><p id="p-0038" num="0000">ascertaining a machine feedback variable, the machine feedback variable comprising an actual variable of the electric machine;<br/>transforming the machine feedback variable by means of the fundamental input transformer to form the feedback variable in the field-oriented system;<br/>ascertaining the fundamental control deviation as the difference between a specified fundamental DC reference variable and the feedback variable in the field-oriented system; ascertaining a fundamental DC manipulated variable by means of the fundamental controller as a function of the fundamental control deviation;<br/>superimposing the fundamental DC manipulated variable with the manipulated variable; back-transforming the output variable of the superimposition by means of the fundamental output transformer to form a machine manipulated variable, and<br/>energizing at least one winding of the electric machine as a function of the machine manipulated variable.</p><p id="p-0039" num="0039">In addition to the harmonic control, the control comprises fundamental control. The AC variables of the, preferably sinusoidal, phase currents to be adjusted in the time domain are controlled by means of the fundamental control arrangement. In order to control an electric machine which can be connected to the fundamental controller, a machine feedback variable, an actual variable, of the electric machine is detected in the time domain. The machine feedback variables are preferably the phase currents of an electric machine. This machine feedback variable comprises the phase current as the fundamental and harmonics, which are superimposed on the phase current by the electric machine, as disturbance variables. In the time domain, the phase current is an AC variable which is superimposed with further AC variables of the harmonics. In order to control the fundamental, a transformation from the time domain into the field-oriented range is performed. For this purpose, the machine feedback variable is transformed by means of a fundamental input transformer to form the feedback variable in the field-oriented system. Within the scope of this application, &#x201c;fundamental&#x201d; as an identifier preferably stands for the control steps and transformations which are used for controlling the fundamental. During stationary operation of the electric machine, AC variables in the time domain produce DC variables in the field-oriented system. These DC variables can be controlled by means of customary control engineering methods. Accordingly, a fundamental control deviation is ascertained as the difference between a specifiable fundamental DC reference variable and the feedback variable in the field-oriented system. A fundamental DC manipulated variable is ascertained by means of a fundamental controller as a function of the fundamental control deviation. The manipulated variable as the output signal of the harmonic controller is superimposed with or has added to it the fundamental DC manipulated variable in the field-oriented system. For further use for driving or energizing the electric machine in the time domain, this output variable of the superimposition in the field-oriented system is back-transformed by means of the fundamental output transformer to form a machine manipulated variable in the time domain. In the time domain, the machine manipulated variable comprises an AC variable, a fundamental, and at least one further superimposed AC variable, a harmonic. Finally, the method comprises a step for energizing the electric machine as a function of the machine manipulated variable.</p><p id="p-0040" num="0040">A method for an effective fundamental and harmonic controller is advantageously provided.</p><p id="p-0041" num="0041">In another refinement of the invention, the specifiable fundamental DC reference variable of the field-oriented system comprises a target value for generating the fundamental of a sinusoidal phase current for energizing at least one winding of the electric machine.</p><p id="p-0042" num="0042">The fundamental DC reference variable is a target value for generating a fundamental with the electrical frequency of the electric machine for energizing the electric machine. This target value is specified analytically or by means of a characteristic map, in particular as a function of a torque specification, a (phase) current target value or an actual current value, preferably an ascertained phase current. It is already specified in an appropriately transformed manner for use in the fundamental controller in the field-oriented system.</p><p id="p-0043" num="0043">A fundamental DC reference variable is advantageously provided for effective fundamental control.</p><p id="p-0044" num="0044">The invention further relates to a computer program which comprises commands which, when executed by a computer, cause said computer to execute the steps of the method described above.</p><p id="p-0045" num="0045">The invention further relates to a computer-readable storage medium, comprising commands which, when executed by a computer, cause said computer to execute the steps of the method described above.</p><p id="p-0046" num="0046">The invention further relates to a device for controlling an electric machine, comprising a computer unit and a harmonic controller, the harmonic controller comprising an input transformer, a controller and an output transformer. The device is designed to execute the steps of the method described.</p><p id="p-0047" num="0047">A device for effective harmonic control of an electric machine is advantageously provided.</p><p id="p-0048" num="0048">In another refinement of the invention, the device comprises a fundamental controller, the fundamental controller comprising a fundamental input transformer, a fundamental controller and a fundamental output transformer. The device is designed to execute the steps of the method described.</p><p id="p-0049" num="0049">A device for effective, combined fundamental and harmonic control of an electric machine is advantageously provided.</p><p id="p-0050" num="0050">The invention further relates to an electric drive system comprising an electric machine and a device as described. An electric drive system of this kind serves, for example, to drive an electric vehicle. Optimized operation of the drive train is rendered possible by means of the method and the device.</p><p id="p-0051" num="0051">The invention further relates to a vehicle comprising a drive system as described. Therefore, a vehicle which comprises a device with which an electric machine is effectively controlled is advantageously provided.</p><p id="p-0052" num="0052">It goes without saying that the features, properties and advantages of the method according to the invention relate and/or can be applied accordingly to the device and, respectively, the drive system and the vehicle, and vice versa.</p><p id="p-0053" num="0053">Further features and advantages of embodiments of the invention can be found in the following description with reference to the appended drawings.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0054" num="0054">In the following text, the invention is to be described in greater detail on the basis of some figures, in which</p><p id="p-0055" num="0055"><figref idref="DRAWINGS">FIG. <b>1</b></figref> shows a diagrammatic control structure of a harmonic controller</p><p id="p-0056" num="0056"><figref idref="DRAWINGS">FIG. <b>2</b></figref> shows a diagrammatic control structure for controlling an electric machine</p><p id="p-0057" num="0057"><figref idref="DRAWINGS">FIG. <b>3</b></figref> shows a diagrammatically illustrated flowchart for a method for controlling an electric machine</p><p id="p-0058" num="0058"><figref idref="DRAWINGS">FIG. <b>4</b></figref> shows a diagrammatically illustrated device for controlling an electric machine</p><p id="p-0059" num="0059"><figref idref="DRAWINGS">FIG. <b>5</b></figref> shows a diagrammatically illustrated vehicle comprising an electric drive system</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0004" level="1">DETAILED DESCRIPTION</heading><p id="p-0060" num="0060"><figref idref="DRAWINGS">FIG. <b>1</b></figref> shows a schematic control structure of a harmonic controller <b>100</b>, the harmonic controller <b>100</b> comprising an input transformer <b>110</b>, a controller <b>120</b> and an output transformer <b>130</b>. An ascertained feedback variable Idq in a field-oriented system is transformed by means of the input transformer <b>110</b> to form a DC feedback variable IHrmc in a harmonic-oriented system. An ascertained difference between a specifiable DC reference variable IHrmc* and the DC feedback variable IHrmc in the harmonic-oriented system is supplied to the controller <b>120</b> as the control deviation and the input variable. A DC manipulated variable UHrmc* is ascertained by means of the controller <b>120</b> as a function of the control deviation. This DC manipulated variable UHrmc* in the harmonic-oriented system is transformed by means of the output transformer <b>130</b> to form a manipulated variable UdqHrmc* in the field-oriented system. At least one winding of an electric machine <b>190</b> is preferably energized as a function of the manipulated variable UdqHrmc*.</p><p id="p-0061" num="0061"><figref idref="DRAWINGS">FIG. <b>2</b></figref> shows a diagrammatic control structure for controlling an electric machine <b>190</b>. The electric machine <b>190</b> is illustrated as a unit comprising an inverter <b>192</b> and an electric motor <b>194</b>. The fundamental controller <b>200</b> comprises a fundamental input transformer <b>210</b>, a fundamental controller <b>220</b> and a fundamental output transformer <b>230</b>. A machine feedback variable Iabc of the electric machine is ascertained in the time domain and supplied to the fundamental input transformer <b>210</b>. The machine feedback variable Iabc is transformed by means of the fundamental input transformer <b>210</b> to form the feedback variable Idq in the field-oriented system. A fundamental control deviation is ascertained as the difference between a specifiable fundamental DC reference variable Idq* and the feedback variable Idq in the field-oriented system. A fundamental DC manipulated variable is ascertained by means of the fundamental controller <b>220</b> as a function of the fundamental control deviation. As illustrated in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the manipulated variable UdqHrmc* is ascertained in parallel by means of the harmonic controller <b>100</b>. The fundamental DC manipulated variable is superimposed with the manipulated variable UdqHrmc*. The output variable of the superimposition in the field-oriented system is transformed by means of the fundamental output transformer <b>230</b> to form a machine manipulated variable Uabc* in the time domain. For the purpose of energizing at least one winding of the electric machine <b>190</b>, the machine manipulated variable Uabc*, preferably a phase voltage, is supplied to said winding. The phase voltage is generated by means of the inverter <b>192</b> and applied at least to one winding of the electric motor <b>194</b>.</p><p id="p-0062" num="0062"><figref idref="DRAWINGS">FIG. <b>3</b></figref> shows a diagrammatically illustrated flowchart of a method <b>400</b> for controlling an electric machine <b>190</b>. The method starts with step <b>401</b>. In step <b>402</b>, a machine feedback variable Iabc of the electric machine is preferably ascertained in the time domain. In step <b>404</b>, this machine feedback variable Iabc is preferably transformed by means of the fundamental input transformer <b>210</b> to form the feedback variable Idq in the field-oriented system. In step <b>406</b>, a fundamental control deviation is preferably ascertained as the difference between a specifiable fundamental DC reference variable Idq* and the feedback variable Idq in the field-oriented system. In step <b>408</b>, a fundamental DC manipulated variable is preferably ascertained by means of the fundamental controller <b>220</b> as a function of the fundamental control deviation.</p><p id="p-0063" num="0063">In step <b>410</b>, a feedback variable Idq is ascertained and in step <b>420</b> is transformed by means of the input transformer <b>110</b> to form a DC feedback variable IHrmc in a harmonic-oriented system. In step <b>430</b>, a difference between a specifiable DC reference variable IHrmc* and the DC feedback variable IHrmc is supplied to the controller <b>120</b> as the control deviation and the input variable. In step <b>440</b>, a DC manipulated variable UHrmc* is ascertained by means of the controller as a function of the control deviation. In step <b>450</b>, this DC manipulated variable UHrmc* in the harmonic-oriented system is transformed by means of the output transformer to form a manipulated variable UdqHrmc* in the field-oriented system. In step <b>480</b>, at least one winding of an electric machine <b>190</b> is preferably energized as a function of the manipulated variable UdqHrmc*.</p><p id="p-0064" num="0064">In step <b>460</b>, the fundamental DC manipulated variable is preferably superimposed with the manipulated variable UdqHrmc*. In step <b>470</b>, the output variable of the superimposition in the field-oriented system is preferably transformed by means of the fundamental output transformer <b>230</b> to form a machine manipulated variable Uabc* in the time domain. In step <b>480</b>, at least one winding of the electric machine <b>190</b> is preferably energized as a function of the machine manipulated variable Uabc*. The method ends with step <b>490</b>.</p><p id="p-0065" num="0065"><figref idref="DRAWINGS">FIG. <b>4</b></figref> shows a diagrammatically illustrated device <b>300</b> for controlling an electric machine <b>190</b>. The electric machine <b>190</b> is illustrated as a unit comprising an inverter <b>192</b> and an electric motor <b>194</b>. The device <b>300</b> comprises a harmonic controller <b>100</b> and a computer unit <b>310</b> for controlling and implementing the structure of the harmonic controller <b>100</b>. The device preferably comprises a fundamental controller <b>200</b>, which is likewise controlled and implemented by means of the computer unit <b>310</b>. The device is designed to execute the above-described method steps and therefore to operate and to control the electric machine <b>190</b>.</p><p id="p-0066" num="0066"><figref idref="DRAWINGS">FIG. <b>5</b></figref> shows a diagrammatically illustrated vehicle <b>600</b> which comprises an electric drive system <b>500</b>. The drive system <b>500</b> comprises the electric machine <b>190</b>, which comprises an inverter <b>192</b> and an electric motor <b>194</b>, and a device <b>300</b> for controlling the electric machine, as described in <figref idref="DRAWINGS">FIG. <b>4</b></figref>. The electric drive system preferably comprises a battery for supplying electrical power to the electric drive system <b>500</b>.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-math idrefs="MATH-US-00001 MATH-US-00001-2 MATH-US-00001-3" nb-file="US20230006599A1-20230105-M00001.NB"><img id="EMI-M00001" he="18.37mm" wi="76.20mm" file="US20230006599A1-20230105-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method (<b>400</b>) for controlling an electric machine (<b>190</b>) having a harmonic controller (<b>100</b>),<claim-text>the harmonic controller comprising an input transformer (<b>110</b>), a controller (<b>120</b>) and an output transformer (<b>130</b>),</claim-text><claim-text>the method comprising the steps of:</claim-text><claim-text>ascertaining (<b>410</b>) a feedback variable (Idq), the feedback variable comprising an actual variable of a harmonic of a specified frequency in a field-oriented system;</claim-text><claim-text>transforming (<b>420</b>) the feedback variable (Idq) by means of the input transformer (<b>110</b>) to form a DC feedback variable (IHrmc) in a harmonic-oriented system;</claim-text><claim-text>ascertaining (<b>430</b>) a control deviation as the difference between a DC reference variable (IHrmc*) and the DC feedback variable (IHrmc) in the harmonic-oriented system;</claim-text><claim-text>ascertaining (<b>440</b>) a DC manipulated variable (UHrmc*) by means of the controller (<b>120</b>) as a function of the control deviation;</claim-text><claim-text>back-transforming (<b>450</b>) the DC manipulated variable (UHrmc*) by means of the output transformer to form a manipulated variable (UdqHrmc*) in the field-oriented system; and</claim-text><claim-text>energizing (<b>480</b>) at least one winding of the electric machine (<b>190</b>) as a function of the manipulated variable (UdqHrmc*).</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein<claim-text>the feedback variable (Idq) in the field-oriented system comprises a harmonic with a positive frequency with a first amplitude and a first phase of a k<sup>th </sup>order of an electrical frequency of the electric machine (<b>190</b>) and/or a harmonic with a negative frequency with a second amplitude and a second phase of the k<sup>th </sup>order of an electrical frequency of the electric machine (<b>190</b>).</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method as claimed in <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein<claim-text>transforming (<b>420</b>) the feedback variable (Idq) is performed as a function of an ascertained current rotor angle (w) of the electric machine (<b>190</b>),</claim-text><claim-text>and transforming (<b>420</b>) comprises rotation with a rotation angle which corresponds to k times the current rotor angle (w).</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein<claim-text>the DC reference variable (IHrmc*) of the harmonic-oriented system comprises a target value in the harmonic-oriented system for generating a harmonic on a sinusoidal phase current for energizing at least one winding of the electric machine (<b>190</b>).</claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein<claim-text>the DC manipulated variable (UHrmc*) is ascertained (<b>440</b>) by means of the controller (<b>120</b>) as a function of the control deviation by means of a control operation, using:</claim-text><claim-text>a PI or I controller,</claim-text><claim-text>an inverse static or dynamic model and a PI or I controller or</claim-text><claim-text>a controller with an inverse static or dynamic model.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein<claim-text>the DC manipulated variable (UHrmc*) is back-transformed (<b>450</b>) as a function of an ascertained current rotor angle (w) of the electric machine (<b>190</b>),</claim-text><claim-text>and back-transforming (<b>450</b>) comprises rotation with a rotation angle which corresponds to k times the current rotor angle (w),</claim-text><claim-text>and back-transforming (<b>450</b>) respectively comprises rotation in the positive and/or negative opposite direction to the rotation of the feedback variable (Idq) by means of the input transformer (<b>110</b>).</claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>,<claim-text>having a fundamental controller (<b>200</b>),</claim-text><claim-text>the fundamental controller comprising a fundamental input transformer (<b>210</b>), a fundamental controller (<b>220</b>) and a fundamental output transformer (<b>230</b>),</claim-text><claim-text>further comprising the steps of:</claim-text><claim-text>ascertaining (<b>402</b>) a machine feedback variable (Iabc), the machine feedback variable comprising an actual variable of the electric machine;</claim-text><claim-text>transforming (<b>404</b>) the machine feedback variable (Iabc) by means of the fundamental input transformer (<b>210</b>) to form the feedback variable (Idq) in the field-oriented system;</claim-text><claim-text>ascertaining (<b>406</b>) the fundamental control deviation as the difference between the specified fundamental DC reference variable (Idq*) and the feedback variable (Idq) in the field-oriented system;</claim-text><claim-text>ascertaining (<b>408</b>) a fundamental DC manipulated variable by means of the fundamental controller (<b>220</b>) as a function of the fundamental control deviation;</claim-text><claim-text>superimposing (<b>460</b>) the fundamental DC manipulated variable with the manipulated variable (UdqHrmc*); and</claim-text><claim-text>back-transforming (<b>470</b>) the output variable of the superimposition by means of the fundamental output transformer (<b>230</b>) to form a machine manipulated variable (Uabc*), and</claim-text><claim-text>energizing (<b>480</b>) at least one winding of the electric machine (<b>190</b>) as a function of the machine manipulated variable (Uabc*).</claim-text></claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The method as claimed in <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the specifiable DC reference variable (Idq*) of the field-oriented system comprises a target variable for generating the fundamental of a sinusoidal phase current for energizing at least one winding of the electric machine (<b>190</b>).</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. (canceled)</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. A non-transitory, computer-readable medium comprising instructions that when executed by a computer, cause said computer to control an electric machine (<b>190</b>) having a harmonic controller (<b>100</b>), the harmonic controller comprising an input transformer (<b>110</b>), a controller (<b>120</b>) and an output transformer (<b>130</b>), by:<claim-text>ascertaining (<b>410</b>) a feedback variable (Idq), the feedback variable comprising an actual variable of a harmonic of a specified frequency in a field-oriented system;</claim-text><claim-text>transforming (<b>420</b>) the feedback variable (Idq) by means of the input transformer (<b>110</b>) to form a DC feedback variable (IHrmc) in a harmonic-oriented system;</claim-text><claim-text>ascertaining (<b>430</b>) a control deviation as the difference between a DC reference variable (IHrmc*) and the DC feedback variable (IHrmc) in the harmonic-oriented system;</claim-text><claim-text>ascertaining (<b>440</b>) a DC manipulated variable (UHrmc*) by means of the controller (<b>120</b>) as a function of the control deviation;</claim-text><claim-text>back-transforming (<b>450</b>) the DC manipulated variable (UHrmc*) by means of the output transformer to form a manipulated variable (UdqHrmc*) in the field-oriented system; and</claim-text><claim-text>energizing (<b>480</b>) at least one winding of the electric machine (<b>190</b>) as a function of the manipulated variable (UdqHrmc*).</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. A device (<b>300</b>) for controlling an electric machine (<b>190</b>),<claim-text>comprising a computer unit (<b>310</b>) and a harmonic controller (<b>100</b>),</claim-text><claim-text>the harmonic controller comprising an input transformer (<b>110</b>), a controller (<b>120</b>) and an output transformer (<b>130</b>),</claim-text><claim-text>wherein the device is configured to</claim-text><claim-text>ascertain (<b>410</b>) a feedback variable (Idq), the feedback variable comprising an actual variable of a harmonic of a specified frequency in a field-oriented system;</claim-text><claim-text>transform (<b>420</b>) the feedback variable (Idq) by means of the input transformer (<b>110</b>) to form a DC feedback variable (IHrmc) in a harmonic-oriented system;</claim-text><claim-text>ascertain (<b>430</b>) a control deviation as the difference between a DC reference variable (IHrmc*) and the DC feedback variable (IHrmc) in the harmonic-oriented system;</claim-text><claim-text>ascertain (<b>440</b>) a DC manipulated variable (UHrmc*) by means of the controller (<b>120</b>) as a function of the control deviation;</claim-text><claim-text>back-transform (<b>450</b>) the DC manipulated variable (UHrmc*) by means of the output transformer to form a manipulated variable (UdqHrmc*) in the field-oriented system; and</claim-text><claim-text>energize (<b>480</b>) at least one winding of the electric machine (<b>190</b>) as a function of the manipulated variable (UdqHrmc*).</claim-text></claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The device (<b>300</b>) as claimed in <claim-ref idref="CLM-00011">claim 11</claim-ref>,<claim-text>comprising a fundamental controller (<b>200</b>),</claim-text><claim-text>the fundamental controller comprising a fundamental input transformer (<b>210</b>), a fundamental controller (<b>220</b>) and a fundamental output transformer (<b>230</b>),</claim-text><claim-text>wherein the device is configure to</claim-text><claim-text>ascertain (<b>402</b>) a machine feedback variable (Iabc), the machine feedback variable comprising an actual variable of the electric machine;</claim-text><claim-text>transform (<b>404</b>) the machine feedback variable (Iabc) by means of the fundamental input transformer (<b>210</b>) to form the feedback variable (Idq) in the field-oriented system;</claim-text><claim-text>ascertain (<b>406</b>) the fundamental control deviation as the difference between the DC reference variable (Idq*) and the feedback variable (Idq) in the field-oriented system;</claim-text><claim-text>ascertain (<b>408</b>) a fundamental DC manipulated variable by means of the fundamental controller (<b>220</b>) as a function of the fundamental control deviation;</claim-text><claim-text>superimpose (<b>460</b>) the fundamental DC manipulated variable with the manipulated variable (UdqHrmc*); and</claim-text><claim-text>back-transform (<b>470</b>) the output variable of the superimposition by means of the fundamental output transformer (<b>230</b>) to form a machine manipulated variable (Uabc*), and</claim-text><claim-text>energize (<b>480</b>) at least one winding of the electric machine (<b>190</b>) as a function of the machine manipulated variable (Uabc*).</claim-text></claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. An electric drive system (<b>500</b>) comprising an electric machine (<b>190</b>) and a device (<b>300</b>) as claimed in <claim-ref idref="CLM-00011">claim 11</claim-ref>.</claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. A vehicle (<b>600</b>) comprising an electric drive system (<b>500</b>) as claimed in <claim-ref idref="CLM-00013">claim 13</claim-ref>.</claim-text></claim></claims></us-patent-application>