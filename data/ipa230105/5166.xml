<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230005167A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230005167</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17944037</doc-number><date>20220913</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20170101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>T</subclass><main-group>7</main-group><subgroup>50</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20180101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>13</main-group><subgroup>344</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20180101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>13</main-group><subgroup>398</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20170101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>T</subclass><main-group>7</main-group><subgroup>579</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>09</class><subclass>G</subclass><main-group>3</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20180101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>13</main-group><subgroup>395</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>09</class><subclass>G</subclass><main-group>5</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>02</class><subclass>B</subclass><main-group>27</main-group><subgroup>01</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20110101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>T</subclass><main-group>19</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>09</class><subclass>G</subclass><main-group>3</main-group><subgroup>20</subgroup><symbol-position>L</symbol-position><classification-value>N</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>F</subclass><main-group>3</main-group><subgroup>14</subgroup><symbol-position>L</symbol-position><classification-value>N</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20170101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>T</subclass><main-group>7</main-group><subgroup>50</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20180501</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>13</main-group><subgroup>344</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20180501</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>13</main-group><subgroup>398</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20170101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>T</subclass><main-group>7</main-group><subgroup>579</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>09</class><subclass>G</subclass><main-group>3</main-group><subgroup>003</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20180501</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>13</main-group><subgroup>395</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>09</class><subclass>G</subclass><main-group>5</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>02</class><subclass>B</subclass><main-group>27</main-group><subgroup>017</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>T</subclass><main-group>19</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>02</class><subclass>B</subclass><main-group>2027</main-group><subgroup>0187</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>09</class><subclass>G</subclass><main-group>3</main-group><subgroup>2022</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>09</class><subclass>G</subclass><main-group>2370</main-group><subgroup>04</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>09</class><subclass>G</subclass><main-group>2340</main-group><subgroup>0464</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>09</class><subclass>G</subclass><main-group>2310</main-group><subgroup>0235</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>F</subclass><main-group>3</main-group><subgroup>14</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>09</class><subclass>G</subclass><main-group>2340</main-group><subgroup>02</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>02</class><subclass>B</subclass><main-group>2027</main-group><subgroup>0185</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>09</class><subclass>G</subclass><main-group>2310</main-group><subgroup>08</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>02</class><subclass>B</subclass><main-group>2027</main-group><subgroup>0134</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>09</class><subclass>G</subclass><main-group>2340</main-group><subgroup>0407</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>09</class><subclass>G</subclass><main-group>2320</main-group><subgroup>0261</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">VIRTUAL AND AUGMENTED REALITY SYSTEMS AND METHODS</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>15239710</doc-number><date>20160817</date></document-id><parent-grant-document><document-id><country>US</country><doc-number>11481911</doc-number></document-id></parent-grant-document></parent-doc><child-doc><document-id><country>US</country><doc-number>17944037</doc-number></document-id></child-doc></relation></continuation><us-provisional-application><document-id><country>US</country><doc-number>62206765</doc-number><date>20150818</date></document-id></us-provisional-application></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Magic Leap, Inc.</orgname><address><city>Plantation</city><state>FL</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Rodriguez</last-name><first-name>Jose Felix</first-name><address><city>Hialeah</city><state>FL</state><country>US</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Perez</last-name><first-name>Ricardo Martinez</first-name><address><city>Plantation</city><state>FL</state><country>US</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A virtual or augmented reality display system can include a first sensor to provide measurements of a user's head pose over time and a processor to estimate the user's head pose based on at least one head pose measurement and based on at least one calculated predicted head pose. The processor can combine the head pose measurement and the predicted head pose using one or more gain factors. The one or more gain factors may vary based upon the user's head pose position within a physiological range of movement.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="150.20mm" wi="158.75mm" file="US20230005167A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="192.70mm" wi="160.19mm" file="US20230005167A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="170.43mm" wi="162.81mm" file="US20230005167A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="127.51mm" wi="162.73mm" file="US20230005167A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="239.35mm" wi="124.88mm" file="US20230005167A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="191.77mm" wi="155.36mm" orientation="landscape" file="US20230005167A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="139.53mm" wi="116.67mm" file="US20230005167A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="246.21mm" wi="155.79mm" orientation="landscape" file="US20230005167A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="217.93mm" wi="144.10mm" orientation="landscape" file="US20230005167A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="228.35mm" wi="151.64mm" orientation="landscape" file="US20230005167A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="227.67mm" wi="151.64mm" orientation="landscape" file="US20230005167A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00011" num="00011"><img id="EMI-D00011" he="233.17mm" wi="130.64mm" orientation="landscape" file="US20230005167A1-20230105-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00012" num="00012"><img id="EMI-D00012" he="248.58mm" wi="147.07mm" orientation="landscape" file="US20230005167A1-20230105-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00013" num="00013"><img id="EMI-D00013" he="250.02mm" wi="144.36mm" orientation="landscape" file="US20230005167A1-20230105-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00014" num="00014"><img id="EMI-D00014" he="250.02mm" wi="144.36mm" orientation="landscape" file="US20230005167A1-20230105-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00015" num="00015"><img id="EMI-D00015" he="192.70mm" wi="160.19mm" file="US20230005167A1-20230105-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00016" num="00016"><img id="EMI-D00016" he="240.79mm" wi="163.83mm" file="US20230005167A1-20230105-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading><p id="p-0002" num="0001">This application is a continuation of U.S. patent application Ser. No. 15/239,710, filed Aug. 17, 2016, and entitled, &#x201c;VIRTUAL AND AUGMENTED REALITY SYSTEMS AND METHODS,&#x201d; which claims the benefit of priority under 35 USC &#xa7; 119(e) of U.S. Provisional Application No. 62/206,765, filed on Aug. 18, 2015, entitled &#x201c;VIRTUAL AND AUGMENTED REALITY SYSTEMS AND METHODS,&#x201d; each of which is incorporated by reference herein in its entirety.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">BACKGROUND</heading><heading id="h-0003" level="1">Field</heading><p id="p-0003" num="0002">This disclosure relates to virtual and augmented reality imaging and visualization systems.</p><heading id="h-0004" level="1">Description of the Related Art</heading><p id="p-0004" num="0003">Modern computing and display technologies have facilitated the development of virtual reality and augmented reality systems. Virtual reality, or &#x201c;VR,&#x201d; systems create a simulated environment for a user to experience. This can be done by presenting computer-generated imagery to the user through a display. This imagery creates a sensory experience which immerses the user in the simulated environment. A virtual reality scenario typically involves presentation of only computer-generated imagery rather than also including actual real-world imagery.</p><p id="p-0005" num="0004">Augmented reality systems generally supplement a real-world environment with simulated elements. For example, augmented reality, or &#x201c;AR,&#x201d; systems may provide a user with a view of the surrounding real-world environment via a display. However, computer-generated imagery can also be presented on the display to enhance the real-world environment. This computer-generated imagery can include elements which are contextually-related to the real-world environment. Such elements can include simulated text, images, objects, etc. The simulated elements can often times be interactive in real time. <figref idref="DRAWINGS">FIG. <b>1</b></figref> depicts an example augmented reality scene <b>1</b> where a user of an AR technology sees a real-world park-like setting <b>6</b> featuring people, trees, buildings in the background, and a concrete platform <b>1120</b>. In addition to these items, computer-generated imagery is also presented to the user. The computer-generated imagery can include, for example, a robot statue <b>1110</b> standing upon the real-world platform <b>1120</b>, and a cartoon-like avatar character <b>2</b> flying by which seems to be a personification of a bumble bee, even though these elements <b>2</b>, <b>1110</b> are not actually present in the real-world environment.</p><p id="p-0006" num="0005">Because the human visual perception system is complex, it is challenging to produce a VR or AR technology that facilitates a comfortable, natural-feeling, rich presentation of virtual image elements amongst other virtual or real-world imagery elements.</p><heading id="h-0005" level="1">SUMMARY</heading><p id="p-0007" num="0006">In some embodiments, a virtual or augmented reality display system comprises: a display configured to display imagery for a plurality of depth planes; a display controller configured to receive rendered virtual or augmented reality imagery data from a graphics processor, and to control the display based at least in part on control information embedded in the rendered imagery, wherein the embedded control information indicates a shift to apply to at least a portion of the rendered imagery when displaying the imagery.</p><p id="p-0008" num="0007">In some embodiments, the shift alters the displayed position of one or more virtual or augmented reality objects as compared to the position of the one or more objects in the rendered imagery.</p><p id="p-0009" num="0008">In some embodiments, the shift comprises a lateral shift of at least a portion of the imagery by a specified number of pixels within the same depth plane.</p><p id="p-0010" num="0009">In some embodiments, the shift comprises a longitudinal shift of at least a portion of the imagery from one depth plane to another.</p><p id="p-0011" num="0010">In some embodiments, the display controller is further configured to scale at least a portion of the imagery in conjunction with a longitudinal shift from one depth plane to another.</p><p id="p-0012" num="0011">In some embodiments, the shift comprises a longitudinal shift of at least a portion of the imagery from one depth plane to a virtual depth plane, the virtual depth plane comprising a weighted combination of at least two depth planes.</p><p id="p-0013" num="0012">In some embodiments, the shift is based on information regarding a head pose of a user.</p><p id="p-0014" num="0013">In some embodiments, the shift is performed by the display controller without re-rendering the imagery.</p><p id="p-0015" num="0014">In some embodiments, a method in a virtual or augmented reality display system comprises: receiving rendered virtual or augmented reality imagery data from a graphics processor; and displaying the imagery for a plurality of depth planes based at least in part on control information embedded in the rendered imagery, wherein the embedded control information indicates a shift to apply to at least a portion of the rendered imagery when displaying the imagery.</p><p id="p-0016" num="0015">In some embodiments, the method further comprises shifting the displayed position of one or more virtual or augmented reality objects as compared to the position of the one or more objects in the rendered imagery.</p><p id="p-0017" num="0016">In some embodiments, the method further comprises laterally shifting at least a portion of the imagery by a specified number of pixels within the same depth plane based on the control information.</p><p id="p-0018" num="0017">In some embodiments, the method further comprises longitudinally shifting at least a portion of the imagery from one depth plane to another based on the control information.</p><p id="p-0019" num="0018">In some embodiments, the method further comprises scaling at least a portion of the imagery in conjunction with longitudinally shifting the imagery from one depth plane to another.</p><p id="p-0020" num="0019">In some embodiments, the method further comprises longitudinally shifting at least a portion of the imagery from one depth plane to a virtual depth plane, the virtual depth plane comprising a weighted combination of at least two depth planes.</p><p id="p-0021" num="0020">In some embodiments, the shift is based on information regarding a head pose of a user.</p><p id="p-0022" num="0021">In some embodiments, the method further comprises shifting the imagery without re-rendering the imagery.</p><p id="p-0023" num="0022">In some embodiments, a virtual or augmented reality display system comprises: a display configured to display virtual or augmented reality imagery for a plurality of depth planes, the imagery comprising a series of images made up of rows and columns of pixel data; a display controller configured to receive the imagery from a graphics processor and to control the display based at least in part on control information embedded in the imagery, wherein the embedded control information comprises depth plane indicator data which indicates at which of the plurality of depth planes to display at least a portion of the imagery.</p><p id="p-0024" num="0023">In some embodiments, the control information does not alter the number of rows and columns of pixel data in the series of images.</p><p id="p-0025" num="0024">In some embodiments, the control information comprises a row or column of information substituted for a row or column of pixel data in one or more of the series of images.</p><p id="p-0026" num="0025">In some embodiments, the control information comprises a row or column of information appended to the pixel data for one or more of the series of images.</p><p id="p-0027" num="0026">In some embodiments, the pixel data comprises a plurality of color values, and wherein the depth plane indicator data is substituted for one or more bits of at least one of the color values.</p><p id="p-0028" num="0027">In some embodiments, the depth plane indicator data is substituted for one or more least significant bits of at least one of the color values.</p><p id="p-0029" num="0028">In some embodiments, the depth plane indicator data is substituted for one or more bits of a blue color value.</p><p id="p-0030" num="0029">In some embodiments, each pixel comprises depth plane indicator data.</p><p id="p-0031" num="0030">In some embodiments, the display controller is configured to order the series of images based at least in part on the depth plane indicator data.</p><p id="p-0032" num="0031">In some embodiments, a method in a virtual or augmented reality display system comprises: receiving virtual or augmented reality imagery from a graphics processor, the imagery comprising a series of images made up of rows and columns of pixel data for a plurality of depth planes; displaying the imagery based at least in part on control information embedded in the imagery, wherein the embedded control information comprises depth plane indicator data which indicates at which of the plurality of depth planes to display at least a portion of the imagery.</p><p id="p-0033" num="0032">In some embodiments, the control information does not alter the number of rows and columns of pixel data in the series of images.</p><p id="p-0034" num="0033">In some embodiments, the control information comprises a row or column of information substituted for a row or column of pixel data in one or more of the series of images.</p><p id="p-0035" num="0034">In some embodiments, the control information comprises a row or column of information appended to the pixel data for one or more of the series of images.</p><p id="p-0036" num="0035">In some embodiments, the pixel data comprises a plurality of color values, and wherein the depth plane indicator data is substituted for one or more bits of at least one of the color values.</p><p id="p-0037" num="0036">In some embodiments, the depth plane indicator data is substituted for one or more least significant bits of at least one of the color values.</p><p id="p-0038" num="0037">In some embodiments, the depth plane indicator data is substituted for one or more bits of a blue color value.</p><p id="p-0039" num="0038">In some embodiments, each pixel comprises depth plane indicator data.</p><p id="p-0040" num="0039">In some embodiments, the method further comprises ordering the series of images based at least in part on the depth plane indicator data.</p><p id="p-0041" num="0040">In some embodiments, a virtual or augmented reality display system comprises: a first sensor configured to provide measurements of a user's head pose over time; and a processor configured to estimate the user's head pose based on at least one head pose measurement and based on at least one calculated predicted head pose, wherein the processor is configured to combine the head pose measurement and the predicted head pose using one or more gain factors, and wherein the one or more gain factors vary based upon the user's head pose position within a physiological range of movement.</p><p id="p-0042" num="0041">In some embodiments, the first sensor is configured to be head-mounted.</p><p id="p-0043" num="0042">In some embodiments, the first sensor comprises an inertial measurement unit.</p><p id="p-0044" num="0043">In some embodiments, the one or more gain factors emphasize the predicted head pose over the head pose measurement when the user's head pose is in a central portion of the physiological range of movement.</p><p id="p-0045" num="0044">In some embodiments, the one or more gain factors emphasize the predicted head pose over the head pose measurement when the user's head pose is nearer the middle of the physiological range of movement than a limit of the user's physiological range of movement.</p><p id="p-0046" num="0045">In some embodiments, the one or more gain factors emphasize the head pose measurement over the predicted head pose when the user's head pose approaches a limit of the physiological range of movement.</p><p id="p-0047" num="0046">In some embodiments, the one or more gain factors emphasize the head pose measurement over the predicted head pose when the user's head pose is nearer a limit of the physiological range of movement than the middle of the physiological range of movement.</p><p id="p-0048" num="0047">In some embodiments, the first sensor is configured to be head-mounted and further comprising a second sensor configured to be body-mounted, wherein the at least one head pose measurement is determined based on measurements from both the first sensor and the second sensor.</p><p id="p-0049" num="0048">In some embodiments, the head pose measurement is determined based on a difference between measurements from the first sensor and the second sensor.</p><p id="p-0050" num="0049">In some embodiments, a method of estimating head pose in a virtual or augmented reality display system comprises: receiving measurements of a user's head pose over time from a first sensor; and estimating, using a processor, the user's head pose based on at least one head pose measurement and based on at least one calculated predicted head pose, wherein estimating the user's head pose comprises combining the head pose measurement and the predicted head pose using one or more gain factors, and wherein the one or more gain factors vary based upon the user's head pose position within a physiological range of movement.</p><p id="p-0051" num="0050">In some embodiments, the first sensor is configured to be head-mounted and the method further comprises: receiving body orientation measurements from a second sensor configured to be body-mounted; and estimating the user's head pose based on the at least one head pose measurement and based on the at least one calculated predicted head pose, wherein the at least one head pose measurement is determined based on measurements from both the first sensor and the second sensor.</p><p id="p-0052" num="0051">In some embodiments, a virtual or augmented reality display system comprises: a sensor configured to determine one or more characteristics of the ambient lighting; a processor configured to adjust one or more characteristics of a virtual object based on the one or more characteristics of the ambient lighting; and a display configured to display the virtual object to a user.</p><p id="p-0053" num="0052">In some embodiments, the one or more characteristics of the ambient lighting comprise the brightness of the ambient lighting.</p><p id="p-0054" num="0053">In some embodiments, the one or more characteristics of the ambient lighting comprise the hue of the ambient lighting.</p><p id="p-0055" num="0054">In some embodiments, the one or more characteristics of the virtual object comprise the brightness of the virtual object.</p><p id="p-0056" num="0055">In some embodiments, the one or more characteristics of the virtual object comprise the hue of the virtual object.</p><p id="p-0057" num="0056">In some embodiments, a method in a virtual or augmented reality display system comprises: receiving one or more characteristics of the ambient lighting from a sensor; adjusting, using a processor, one or more characteristics of a virtual object based on the one or more characteristics of the ambient lighting; and displaying the virtual object to a user.</p><p id="p-0058" num="0057">In some embodiments, a virtual or augmented reality display system comprises: a processor configured to compress virtual or augmented reality imagery data, the imagery comprising imagery for multiple depth planes, the processor being configured to compress the imagery data by reducing redundant information between the depth planes of the imagery; a display configured to display the imagery for the plurality of depth planes.</p><p id="p-0059" num="0058">In some embodiments, the imagery for a depth plane is represented in terms of differences with respect to an adjacent depth plane.</p><p id="p-0060" num="0059">In some embodiments, the processor encodes motion of an object between depth planes.</p><p id="p-0061" num="0060">In some embodiments, a method in a virtual or augmented reality display system comprises: compressing virtual or augmented reality imagery data with a processor, the imagery comprising imagery for multiple depth planes, the processor being configured to compress the imagery data by reducing redundant information between the depth planes of the imagery; displaying the imagery for the plurality of depth planes.</p><p id="p-0062" num="0061">In some embodiments, the imagery for a depth plane is represented in terms of differences with respect to an adjacent depth plane.</p><p id="p-0063" num="0062">In some embodiments, the method further comprises encoding motion of an object between depth planes.</p><p id="p-0064" num="0063">In some embodiments, a virtual or augmented reality display system comprises: a display configured to display virtual or augmented reality imagery for a plurality of depth planes; a display controller configured to control the display, wherein the display controller dynamically configures a sub-portion of the display to refresh per display cycle.</p><p id="p-0065" num="0064">In some embodiments, the display comprises a scanning display and the display controller dynamically configures the scanning pattern to skip areas of the display where the imagery need not be refreshed.</p><p id="p-0066" num="0065">In some embodiments, the display cycle comprises a frame of video imagery.</p><p id="p-0067" num="0066">In some embodiments, the display controller increases the video frame rate if the sub-portion of the display to be refreshed decreases in size.</p><p id="p-0068" num="0067">In some embodiments, the display controller decreases the video frame rate if the sub-portion of the display to be refreshed increases in size.</p><p id="p-0069" num="0068">In some embodiments, a method in a virtual or augmented reality display system comprises: displaying virtual or augmented reality imagery for a plurality of depth planes with a display; dynamically configuring a sub-portion of the display to refresh per display cycle.</p><p id="p-0070" num="0069">In some embodiments, the display comprises a scanning display and the method further comprises dynamically configuring the scanning pattern to skip areas of the display where the imagery need not be refreshed.</p><p id="p-0071" num="0070">In some embodiments, the display cycle comprises a frame of video imagery.</p><p id="p-0072" num="0071">In some embodiments, the method further comprises increasing the video frame rate if the sub-portion of the display to be refreshed decreases in size.</p><p id="p-0073" num="0072">In some embodiments, the method further comprises decreasing the video frame rate if the sub-portion of the display to be refreshed increases in size.</p><p id="p-0074" num="0073">In some embodiments, a virtual or augmented reality display system comprises: a transmitter which transmits an electric or magnetic field that varies in space; a tangible object which allows a user to interact with a virtual object or scene, the tangible object comprising a sensor which detects the electric or magnetic field from the transmitter, wherein measurements from the sensor are used to determine the position or orientation of the tangible object with respect to the transmitter.</p><p id="p-0075" num="0074">In some embodiments, the transmitter is integrated with a head-mounted portion of the virtual or augmented reality display system.</p><p id="p-0076" num="0075">In some embodiments, a method in a virtual or augmented reality display system comprises: transmitting an electric or magnetic field that varies in space using a transmitter; detecting the electric or magnetic field using a sensor; using measurements from the sensor to determine the position or orientation of the sensor with respect to the transmitter.</p><p id="p-0077" num="0076">In some embodiments, the transmitter is integrated with a head-mounted portion of the virtual or augmented reality display system.</p><p id="p-0078" num="0077">In some embodiments, a virtual or augmented reality display system comprises a display configured to display imagery for a plurality of depth planes; a display controller configured to receive rendered virtual or augmented reality imagery data, and to control the display based at least in part on control information embedded in the rendered imagery, wherein the embedded control information indicates a desired brightness or color to apply to at least a portion of the rendered imagery when displaying the imagery. The desired brightness or color can alter the displayed position of one or more virtual or augmented reality objects as compared to the position of the one or more objects in the rendered imagery. The desired brightness or color can longitudinal shift at least a portion of the imagery from one depth plane to a virtual depth plane, the virtual depth plane comprising a weighted combination of at least two depth planes.</p><p id="p-0079" num="0078">In some embodiments, a virtual or augmented reality display system comprises: a display configured to display imagery for a plurality of depth planes; a display controller configured to receive rendered virtual or augmented reality imagery data, and to control the display based at least in part on control information, wherein the control information indicates that at least one depth plane is inactive and the display controller is configured to control the display based on the indication that at least one depth plane is inactive, thereby reducing power consumption.</p><p id="p-0080" num="0079">In some embodiments, the indication that at least one depth plane is inactive comprises control information comprising depth plane indicator data that specifies a plurality of active depth planes to display the imagery.</p><p id="p-0081" num="0080">In some embodiments, indication that at least one depth plane is inactive comprises control information comprising depth plane indicator data that specifies that at least one depth plane is inactive.</p><p id="p-0082" num="0081">In some embodiments, the control information is embedded in the rendered imagery.</p><p id="p-0083" num="0082">In some embodiments, the display controller as a result of said control information that indicates that at least one depth plane is inactive causes one or more light sources to be reduced in power thereby reducing power consumption.</p><p id="p-0084" num="0083">In some embodiments, a method in a virtual or augmented reality display system comprises: receiving rendered virtual or augmented reality imagery data for displaying imagery on a plurality of depth planes; receiving control information indicating that at least one depth plane is inactive; and displaying the imagery for a plurality of depth planes based at least in part on said control information indicating that at least one depth plane is inactive, thereby reducing power consumption.</p><p id="p-0085" num="0084">In some embodiments, the control information comprises depth plane indicator data that specifies a plurality of active depth planes to display the imagery.</p><p id="p-0086" num="0085">In some embodiments, the control information comprises depth plane indicator data that specifies at least one depth plane that is inactive.</p><p id="p-0087" num="0086">In some embodiments, the control information is embedded in the rendered imagery.</p><p id="p-0088" num="0087">In some embodiments, as a result of said control information indicating that at least one depth plane is inactive, one or more light sources is reduced in power thereby reducing power consumption.</p><p id="p-0089" num="0088">In some embodiments, a virtual or augmented reality display system comprises: a display configured to display imagery for a plurality of depth planes having a plurality of color fields; a display controller configured to receive rendered virtual or augmented reality imagery data, and to control the display based at least in part on control information, wherein the control information indicates that at least one color field is inactive and the display controller is configured to control the display based on the indication that at least one color field is inactive, thereby reducing power consumption.</p><p id="p-0090" num="0089">In some embodiments, the indication that at least one color field is inactive comprises control information comprising color field indicator data that specifies a plurality of active color fields to display the imagery.</p><p id="p-0091" num="0090">In some embodiments, the indication that at least one color field is inactive comprises control information comprising color field indicator data that specifies that at least one color field is inactive.</p><p id="p-0092" num="0091">In some embodiments, the control information is embedded in the rendered imagery.</p><p id="p-0093" num="0092">In some embodiments, the display controller as a result of said control information that indicates that at least one color field is inactive causes one or more light sources to be reduced in power thereby reducing power consumption.</p><p id="p-0094" num="0093">In some embodiments, a method in a virtual or augmented reality display system comprises: receiving rendered virtual or augmented reality imagery data for displaying imagery on a plurality of depth planes having a plurality of color fields; receiving control information indicating that at least one color field is inactive; and displaying the imagery for a plurality of color fields in a plurality of depth planes based at least in part on said control information indicating that at least one color field is inactive, thereby reducing power consumption.</p><p id="p-0095" num="0094">In some embodiments, the control information comprises color field indicator data that specifies a plurality of active color fields to display the imagery.</p><p id="p-0096" num="0095">In some embodiments, the control information comprises color field indicator data that specifies at least one color field that is inactive.</p><p id="p-0097" num="0096">In some embodiments, the control information is embedded in the rendered imagery.</p><p id="p-0098" num="0097">In some embodiments, as a result of said control information indicating that at least one color field is inactive, one or more light sources is reduced in power thereby reducing power consumption.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0006" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0099" num="0098"><figref idref="DRAWINGS">FIG. <b>1</b></figref> illustrates a user's view of an augmented reality (AR) scene using an example AR system.</p><p id="p-0100" num="0099"><figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates an example of wearable display system.</p><p id="p-0101" num="0100"><figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates a conventional display system for simulating three-dimensional imagery for a user.</p><p id="p-0102" num="0101"><figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrates aspects of an approach for simulating three-dimensional imagery using multiple depth planes.</p><p id="p-0103" num="0102"><figref idref="DRAWINGS">FIGS. <b>5</b>A-<b>5</b>C</figref> illustrate relationships between radius of curvature and focal radius.</p><p id="p-0104" num="0103"><figref idref="DRAWINGS">FIG. <b>6</b></figref> illustrates an example of a waveguide stack for outputting image information to a user.</p><p id="p-0105" num="0104"><figref idref="DRAWINGS">FIG. <b>7</b></figref> shows an example of exit beams outputted by a waveguide.</p><p id="p-0106" num="0105"><figref idref="DRAWINGS">FIG. <b>8</b></figref> illustrates an example design of a waveguide stack in which each depth plane has three associated waveguides that each output light of a different color.</p><p id="p-0107" num="0106"><figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates an example timing scheme for a virtual or augmented reality system which displays light field imagery.</p><p id="p-0108" num="0107"><figref idref="DRAWINGS">FIG. <b>10</b></figref> illustrates an example format for a frame of video data which includes appended control data.</p><p id="p-0109" num="0108"><figref idref="DRAWINGS">FIG. <b>11</b></figref> illustrates another example format for a frame of video data which includes control data.</p><p id="p-0110" num="0109"><figref idref="DRAWINGS">FIG. <b>12</b></figref> illustrates an example format for a pixel of video data which includes embedded control data.</p><p id="p-0111" num="0110"><figref idref="DRAWINGS">FIG. <b>13</b></figref> illustrates how a frame of video can be separated into color components which can be displayed serially.</p><p id="p-0112" num="0111"><figref idref="DRAWINGS">FIG. <b>14</b></figref> illustrates how a frame of light field video data can be separated, using depth plane indicator data, into multiple depth planes which can each be split into color components sub-frames for display.</p><p id="p-0113" num="0112"><figref idref="DRAWINGS">FIG. <b>15</b></figref> illustrates an example where the depth plane indicator data of <figref idref="DRAWINGS">FIG. <b>12</b></figref> indicates that one or more depth planes of a frame of light field video data are inactive.</p><p id="p-0114" num="0113"><figref idref="DRAWINGS">FIG. <b>16</b></figref> illustrates example drawing areas for a frame of computer-generated imagery in an augmented reality system.</p><p id="p-0115" num="0114"><figref idref="DRAWINGS">FIG. <b>17</b></figref> schematically illustrates the possible motion of a user's head about two rotational axes.</p><p id="p-0116" num="0115"><figref idref="DRAWINGS">FIG. <b>18</b></figref> illustrates how a user's head pose can be mapped onto a three-dimensional surface.</p><p id="p-0117" num="0116"><figref idref="DRAWINGS">FIG. <b>19</b></figref> schematically illustrates various head pose regions which can be used to define gain factors for improving head pose tracking.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0007" level="1">DETAILED DESCRIPTION</heading><p id="p-0118" num="0117">Virtual and augmented reality systems disclosed herein can include a display which presents computer-generated imagery to a user. In some embodiments, the display systems are wearable, which may advantageously provide a more immersive VR or AR experience. <figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates an example of wearable display system <b>80</b>. The display system <b>80</b> includes a display <b>62</b>, and various mechanical and electronic modules and systems to support the functioning of that display <b>62</b>. The display <b>62</b> may be coupled to a frame <b>64</b>, which is wearable by a display system user or viewer <b>60</b> and which is configured to position the display <b>62</b> in front of the eyes of the user <b>60</b>. In some embodiments, a speaker <b>66</b> is coupled to the frame <b>64</b> and positioned adjacent the ear canal of the user (in some embodiments, another speaker, not shown, is positioned adjacent the other ear canal of the user to provide for stereo/shapeable sound control). The display <b>62</b> is operatively coupled, such as by a wired or wireless connection <b>68</b>, to a local data processing module <b>70</b> which may be mounted in a variety of configurations, such as fixedly attached to the frame <b>64</b>, fixedly attached to a helmet or hat worn by the user, embedded in headphones, or otherwise removably attached to the user <b>60</b> (e.g., in a backpack-style configuration, in a belt-coupling style configuration, etc.).</p><p id="p-0119" num="0118">The local processing and data module <b>70</b> may include a processor, as well as digital memory, such as non-volatile memory (e.g., flash memory), both of which may be utilized to assist in the processing and storing of data. This includes data captured from sensors, such as image capture devices (e.g., cameras), microphones, inertial measurement units, accelerometers, compasses, GPS units, radio devices, and/or gyros. The sensors may be, e.g., operatively coupled to the frame <b>64</b> or otherwise attached to the user <b>60</b>. Alternatively, or additionally, sensor data may be acquired and/or processed using a remote processing module <b>72</b> and/or remote data repository <b>74</b>, possibly for passage to the display <b>62</b> after such processing or retrieval. The local processing and data module <b>70</b> may be operatively coupled by communication links (<b>76</b>, <b>78</b>), such as via a wired or wireless communication links, to the remote processing module <b>72</b> and remote data repository <b>74</b> such that these remote modules (<b>72</b>, <b>74</b>) are operatively coupled to each other and available as resources to the local processing and data module <b>70</b>.</p><p id="p-0120" num="0119">In some embodiments, the remote processing module <b>72</b> may include one or more processors configured to analyze and process data (e.g., sensor data and/or image information). In some embodiments, the remote data repository <b>74</b> may comprise a digital data storage facility, which may be available through the internet or other networking configuration in a &#x201c;cloud&#x201d; resource configuration. In some embodiments, all data is stored and all computations are performed in the local processing and data module, allowing fully autonomous use from a remote module.</p><p id="p-0121" num="0120">In some embodiments, the computer-generated imagery provided via the display <b>62</b> can create the impression of being three-dimensional. This can be done, for example, by presenting stereoscopic imagery to the user. In some conventional systems, such imagery can include separate images of a scene or object from slightly different perspectives. The separate images can be presented to the user's right eye and left eye, respectively, thus simulating binocular vision and its associated depth perception.</p><p id="p-0122" num="0121"><figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates a conventional display system for simulating three-dimensional imagery for a user. Two distinct images <b>74</b> and <b>76</b>, one for each eye <b>4</b> and <b>6</b>, are outputted to the user. The images <b>74</b> and <b>76</b> are spaced from the eyes <b>4</b> and <b>6</b> by a distance <b>10</b> along an optical or z-axis parallel to the line of sight of the viewer. The images <b>74</b> and <b>76</b> are flat and the eyes <b>4</b> and <b>6</b> may focus on the images by assuming a single accommodated state. Such systems rely on the human visual system to combine the images <b>74</b> and <b>76</b> to provide a perception of depth for the combined image.</p><p id="p-0123" num="0122">It will be appreciated, however, that the human visual system is more complicated and providing a realistic perception of depth is more challenging. For example, many viewers of conventional 3D display systems find such systems to be uncomfortable or may not perceive a sense of depth at all. Without being limited by theory, it is believed that viewers of an object may perceive the object as being &#x201c;three-dimensional&#x201d; due to a combination of vergence and accommodation. Vergence movements (i.e., rolling movements of the pupils toward or away from each other to converge the lines of sight of the eyes to fixate upon an object) of the two eyes relative to each other are closely associated with focusing (or &#x201c;accommodation&#x201d;) of the lenses of the eyes. Under normal conditions, changing the focus of the lenses of the eyes, or accommodating the eyes, to change focus from one object to another object at a different distance will automatically cause a matching change in vergence to the same distance, under a relationship known as the &#x201c;accommodation-vergence reflex.&#x201d; Likewise, a change in vergence will trigger a matching change in accommodation, under normal conditions. As noted herein, many stereoscopic display systems display a scene using slightly different presentations (and, so, slightly different images) to each eye such that a three-dimensional perspective is perceived by the human visual system. Such systems are uncomfortable for many viewers, however, since they simply provide different presentations of a scene but with the eyes viewing all the image information at a single accommodated state, and thus work against the accommodation-vergence reflex. Display systems that provide a better match between accommodation and vergence may form more realistic and comfortable simulations of three-dimensional imagery.</p><p id="p-0124" num="0123">For example, light field imagery can be presented to the user to simulate a three-dimensional view. Light field imagery can mimic the rays of light which enter the eyes of a viewer in a real-world environment. For example, when displaying light field imagery, light rays from objects that are simulated to be perceived at a distance are made to be more collimated when entering the viewer's eyes, while light rays from objects that are simulated to be perceived nearby are made to be more divergent. Thus, the angles at which light rays from objects in a scene enter the viewer's eyes are dependent upon the simulated distance of those objects from the viewer. Light field imagery in a virtual or augmented reality system can include multiple images of a scene or object from different depth planes. The images may be different for each depth plane (e.g., provide slightly different presentations of a scene or object) and may be separately focused by the viewer's eyes, thereby helping to provide the user with a comfortable perception of depth.</p><p id="p-0125" num="0124">When these multiple depth plane images are presented to the viewer simultaneously or in quick succession, the result is interpreted by the viewer as three-dimensional imagery. When the viewer experiences this type of light field imagery, the eyes accommodate to focus the different depth planes in much the same way as they would do when experiencing a real-world scene. These focal cues can provide for a more realistic simulated three-dimensional environment.</p><p id="p-0126" num="0125">In some configurations, at each depth plane, a full color image may be formed by overlaying component images that each have a particular component color. For example, red, green, and blue images may each be separately outputted to form each full color depth plane image. As a result, each depth plane may have multiple component color images associated with it.</p><p id="p-0127" num="0126"><figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrates aspects of an approach for simulating three-dimensional imagery using multiple depth planes. With reference to <figref idref="DRAWINGS">FIG. <b>4</b>A</figref>, objects at various distances from eyes <b>4</b> and <b>6</b> on the z-axis are accommodated by the eyes (<b>4</b>, <b>6</b>) so that those objects are in focus. The eyes <b>4</b> and <b>6</b> assume particular accommodated states to bring into focus objects at different distances along the z-axis. Consequently, a particular accommodated state may be said to be associated with a particular one of depth planes <b>14</b>, such that objects or parts of objects in a particular depth plane are in focus when the eye is in the accommodated state for that depth plane. In some embodiments, three-dimensional imagery may be simulated by providing different presentations of an image for each of the eyes (<b>4</b>, <b>6</b>), and also by providing different presentations of the image corresponding to each of the depth planes.</p><p id="p-0128" num="0127">The distance between an object and the eye (<b>4</b> or <b>6</b>) can change the amount of divergence of light from that object, as viewed by that eye. <figref idref="DRAWINGS">FIGS. <b>5</b>A-<b>5</b>C</figref> illustrate relationships between distance and the divergence of light rays. The distance between the object and the eye <b>4</b> is represented by, in order of decreasing distance, R<b>1</b>, R<b>2</b>, and R<b>3</b>. As shown in <figref idref="DRAWINGS">FIGS. <b>5</b>A-<b>5</b>C</figref>, the light rays become more divergent as distance to the object decreases. As distance increases, the light rays become more collimated. Stated another way, it may be said that the light field produced by a point (the object or a part of the object) has a spherical wavefront curvature, which is a function of how far away the point is from the eye of the user. The curvature increases with decreasing distance between the object and the eye <b>4</b>. Consequently, at different depth planes, the degree of divergence of light rays is also different, with the degree of divergence increasing with decreasing distance between depth planes and the viewer's eye <b>4</b>. While only a single eye <b>4</b> is illustrated for clarity of illustration in <figref idref="DRAWINGS">FIGS. <b>5</b>A-<b>5</b>C</figref> and other figures herein, it will be appreciated that the discussions regarding eye <b>4</b> may be applied to both eyes (<b>4</b> and <b>6</b>) of a viewer.</p><p id="p-0129" num="0128">Without being limited by theory, it is believed that the human eye typically can interpret a finite number of depth planes to provide depth perception. Consequently, a highly believable simulation of perceived depth may be achieved by providing, to the eye, different presentations of an image corresponding to each of these limited number of depth planes.</p><p id="p-0130" num="0129"><figref idref="DRAWINGS">FIG. <b>6</b></figref> illustrates an example of a waveguide stack for outputting image information to a user. A display system <b>1000</b> includes a stack of waveguides, or stacked waveguide assembly <b>178</b>, that may be utilized to provide three-dimensional perception to the eye/brain using a plurality of waveguides (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>). In some embodiments, the display system <b>1000</b> is the system <b>80</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref>, with <figref idref="DRAWINGS">FIG. <b>6</b></figref> schematically showing some parts of that system <b>80</b> in greater detail. For example, the waveguide assembly <b>178</b> may be integrated into the display <b>62</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref>.</p><p id="p-0131" num="0130">With continued reference to <figref idref="DRAWINGS">FIG. <b>6</b></figref>, the waveguide assembly <b>178</b> may also include a plurality of features (<b>198</b>, <b>196</b>, <b>194</b>, <b>192</b>) between the waveguides. In some embodiments, the features (<b>198</b>, <b>196</b>, <b>194</b>, <b>192</b>) may be lenses. The waveguides (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>) and/or the plurality of lenses (<b>198</b>, <b>196</b>, <b>194</b>, <b>192</b>) may be configured to send image information to the eye with various levels of wavefront curvature or light ray divergence. Each waveguide level may be associated with a particular depth plane and may be configured to output image information corresponding to that depth plane. Image injection devices (<b>200</b>, <b>202</b>, <b>204</b>, <b>206</b>, <b>208</b>) may be utilized to inject image information into the waveguides (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>), each of which may be configured, as described herein, to distribute incoming light across each respective waveguide, for output toward the eye <b>4</b>. Light exits an output surface (<b>300</b>, <b>302</b>, <b>304</b>, <b>306</b>, <b>308</b>) of the image injection devices (<b>200</b>, <b>202</b>, <b>204</b>, <b>206</b>, <b>208</b>) and is injected into a corresponding input edge (<b>382</b>, <b>384</b>, <b>386</b>, <b>388</b>, <b>390</b>) of the waveguides (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>). In some embodiments, a single beam of light (e.g., a collimated beam) may be injected into each waveguide to output an entire field of cloned collimated beams that are directed toward the eye <b>4</b> at particular angles (and amounts of divergence) corresponding to the depth plane associated with a particular waveguide.</p><p id="p-0132" num="0131">In some embodiments, the image injection devices (<b>200</b>, <b>202</b>, <b>204</b>, <b>206</b>, <b>208</b>) are discrete displays that each produce image information for injection into a corresponding waveguide (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>, respectively). In some other embodiments, the image injection devices (<b>200</b>, <b>202</b>, <b>204</b>, <b>206</b>, <b>208</b>) are the output ends of a single multiplexed display which may, e.g., pipe image information via one or more optical conduits (such as fiber optic cables) to each of the image injection devices (<b>200</b>, <b>202</b>, <b>204</b>, <b>206</b>, <b>208</b>).</p><p id="p-0133" num="0132">A controller <b>210</b> controls the operation of the stacked waveguide assembly <b>178</b> and the image injection devices (<b>200</b>, <b>202</b>, <b>204</b>, <b>206</b>, <b>208</b>). In some embodiments, the controller <b>210</b> includes programming (e.g., instructions in a non-transitory computer-readable medium) that regulates the timing and provision of image information to the waveguides (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>) according to, e.g., any of the various schemes disclosed herein. In some embodiments, the controller may be a single integral device, or a distributed system connected by wired or wireless communication channels. The controller <b>210</b> may be part of the processing modules (<b>70</b> or <b>72</b>) (<figref idref="DRAWINGS">FIG. <b>2</b></figref>) in some embodiments.</p><p id="p-0134" num="0133">The waveguides (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>) may be configured to propagate light within each respective waveguide by total internal reflection (TIR). The waveguides (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>) may each be planar or curved, with major top and bottom surfaces and edges extending between those major top and bottom surfaces. In the illustrated configuration, the waveguides (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>) may each include light redirecting elements (<b>282</b>, <b>284</b>, <b>286</b>, <b>288</b>, <b>290</b>) that are configured to redirect light, propagating within each respective waveguide, out of the waveguide to output image information to the eye <b>4</b>. A beam of light is outputted by the waveguide at locations at which the light propagating in the waveguide strikes a light redirecting element. The light redirecting elements (<b>282</b>, <b>284</b>, <b>286</b>, <b>288</b>, <b>290</b>) may be reflective and/or diffractive optical features. While illustrated disposed at the bottom major surfaces of the waveguides (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>) for ease of description and drawing clarity, in some embodiments, the light redirecting elements (<b>282</b>, <b>284</b>, <b>286</b>, <b>288</b>, <b>290</b>) may be disposed at the top and/or bottom major surfaces, and/or may be disposed directly in the volume of the waveguides (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>). In some embodiments, the light redirecting elements (<b>282</b>, <b>284</b>, <b>286</b>, <b>288</b>, <b>290</b>) may be formed in a layer of material that is attached to a transparent substrate to form the waveguides (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>). In some other embodiments, the waveguides (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>) may be a monolithic piece of material and the light redirecting elements (<b>282</b>, <b>284</b>, <b>286</b>, <b>288</b>, <b>290</b>) may be formed on a surface and/or in the interior of that piece of material.</p><p id="p-0135" num="0134">With continued reference to <figref idref="DRAWINGS">FIG. <b>6</b></figref>, as discussed herein, each waveguide (<b>182</b>, <b>184</b>, <b>186</b>, <b>188</b>, <b>190</b>) is configured to output light to form an image corresponding to a particular depth plane. For example, the waveguide <b>182</b> nearest the eye may be configured to deliver collimated light, as injected into such waveguide <b>182</b>, to the eye <b>4</b>. The collimated light may be representative of the optical infinity focal plane. The next waveguide up <b>184</b> may be configured to send out collimated light which passes through the first lens (<b>192</b>; e.g., a negative lens) before it can reach the eye <b>4</b>; such first lens <b>192</b> may be configured to create a slight convex wavefront curvature so that the eye/brain interprets light coming from that next waveguide up <b>184</b> as coming from a first focal plane closer inward toward the eye <b>4</b> from optical infinity. Similarly, the third up waveguide <b>186</b> passes its output light through both the first <b>192</b> and second <b>194</b> lenses before reaching the eye <b>4</b>; the combined optical power of the first <b>192</b> and second <b>194</b> lenses may be configured to create another incremental amount of wavefront curvature so that the eye/brain interprets light coming from the third waveguide <b>186</b> as coming from a second focal plane that is even closer inward toward the person from optical infinity than was light from the next waveguide up <b>184</b>.</p><p id="p-0136" num="0135">The other waveguide layers (<b>188</b>, <b>190</b>) and lenses (<b>196</b>, <b>198</b>) are similarly configured, with the highest waveguide <b>190</b> in the stack sending its output through all of the lenses between it and the eye for an aggregate focal power representative of the closest focal plane to the person. To compensate for the stack of lenses (<b>198</b>, <b>196</b>, <b>194</b>, <b>192</b>) when viewing/interpreting light coming from the world <b>144</b> on the other side of the stacked waveguide assembly <b>178</b>, a compensating lens layer <b>180</b> may be disposed at the top of the stack to compensate for the aggregate power of the lens stack (<b>198</b>, <b>196</b>, <b>194</b>, <b>192</b>) below. Such a configuration provides as many perceived focal planes as there are available waveguide/lens pairings. Both the light redirecting elements of the waveguides and the focusing aspects of the lenses may be static (i.e., not dynamic or electro-active). In some alternative embodiments, they may be dynamic using electro-active features.</p><p id="p-0137" num="0136">With continued reference to <figref idref="DRAWINGS">FIG. <b>6</b></figref>, the light redirecting elements (<b>282</b>, <b>284</b>, <b>286</b>, <b>288</b>, <b>290</b>) may be configured to both redirect light out of their respective waveguides and to output this light with the appropriate amount of divergence or collimation for a particular depth plane associated with the waveguide. As a result, waveguides having different associated depth planes may have different configurations of light redirecting elements (<b>282</b>, <b>284</b>, <b>286</b>, <b>288</b>, <b>290</b>), which output light with a different amount of divergence depending on the associated depth plane. In some embodiments, as discussed herein, the light redirecting elements (<b>282</b>, <b>284</b>, <b>286</b>, <b>288</b>, <b>290</b>) may be volumetric or surface features, which may be configured to output light at specific angles. For example, the light redirecting elements (<b>282</b>, <b>284</b>, <b>286</b>, <b>288</b>, <b>290</b>) may be volume holograms, surface holograms, and/or diffraction gratings. Light redirecting elements, such as diffraction gratings, are described in U.S. patent application Ser. No. 14/641,376, filed Mar. 7, 2015, which is incorporated by reference herein in its entirety. In some embodiments, the features (<b>198</b>, <b>196</b>, <b>194</b>, <b>192</b>) may not be lenses; rather, they may simply be spacers (e.g., cladding layers and/or structures for forming air gaps).</p><p id="p-0138" num="0137">In some embodiments, the light redirecting elements (<b>282</b>, <b>284</b>, <b>286</b>, <b>288</b>, <b>290</b>) are diffractive features that form a diffraction pattern, or &#x201c;diffractive optical element&#x201d; (also referred to herein as a &#x201c;DOE&#x201d;). Preferably, the DOE's have a relatively low diffraction efficiency so that only a portion of the light of the beam is deflected away toward the eye <b>4</b> with each intersection of the DOE, while the rest continues to move through a waveguide via total internal reflection. The light carrying the image information is thus divided into a number of related exit beams that exit the waveguide at a multiplicity of locations and the result is a fairly uniform pattern of exit emission toward the eye <b>4</b> for this particular collimated beam reflecting around within a waveguide.</p><p id="p-0139" num="0138">In some embodiments, one or more DOEs may be switchable between &#x201c;on&#x201d; states in which they actively diffract, and &#x201c;off&#x201d; states in which they do not significantly diffract. For instance, a switchable DOE may comprise a layer of polymer dispersed liquid crystal, in which microdroplets comprise a diffraction pattern in a host medium, and the refractive index of the microdroplets can be switched to substantially match the refractive index of the host material (in which case the pattern does not appreciably diffract incident light) or the microdroplet can be switched to an index that does not match that of the host medium (in which case the pattern actively diffracts incident light).</p><p id="p-0140" num="0139"><figref idref="DRAWINGS">FIG. <b>7</b></figref> shows an example of exit beams outputted by a waveguide. One waveguide is illustrated, but it will be appreciated that other waveguides in the stack of waveguides <b>178</b> may function similarly. Light <b>400</b> is injected into the waveguide <b>182</b> at the input edge <b>382</b> of the waveguide <b>182</b> and propagates within the waveguide <b>182</b> by TIR. At points where the light <b>400</b> impinges on the DOE <b>282</b>, a portion of the light exits the waveguide as exit beams <b>402</b>. The exit beams <b>402</b> are illustrated as substantially parallel but, as discussed herein, they may also be redirected to propagate to the eye <b>4</b> at an angle (e.g., forming divergent exit beans), depending on the depth plane associated with the waveguide <b>182</b>. It will be appreciated that substantially parallel exit beams may be indicative of a waveguide that corresponds to a depth plane at a large simulated distance (e.g., optical infinity) from the eye <b>4</b>. Other waveguides may output an exit beam pattern that is more divergent, which would require the eye <b>4</b> to accommodate to focus on a closer simulated distance and would be interpreted by the brain as light from a distance closer to the eye <b>4</b> than optical infinity.</p><p id="p-0141" num="0140"><figref idref="DRAWINGS">FIG. <b>8</b></figref> schematically illustrates an example design of a stacked waveguide assembly in which each depth plane has three associated waveguides that each output light of a different color. A full color image may be formed at each depth plane by overlaying images in each of multiple component colors, e.g., three or more component colors. In some embodiments, the component colors include red, green, and blue. In some other embodiments, other colors, including magenta, yellow, and cyan, may be used in conjunction with or may replace one of red, green, or blue. Each waveguide may be configured to output a particular component color and, consequently, each depth plane may have multiple waveguides associated with it. Each depth plane may have, e.g., three waveguides associated with it: one for outputting red light, a second for outputting green light, and a third for outputting blue light.</p><p id="p-0142" num="0141">With continued reference to <figref idref="DRAWINGS">FIG. <b>8</b></figref>, depth planes <b>14</b><i>a</i>-<b>14</b><i>f </i>are shown. In the illustrated embodiment, each depth plane has three component color images associated with it: a first image of a first color, G; a second image of a second color, R; and a third image of a third color, B. As a convention herein, the numbers following each of these letters indicate diopters (1/m), or the reciprocal of the apparent distance of the depth plane from a viewer, and each box in the figures represents an individual component color image. In some embodiments, G is the color green, R is the color red, and B is the color blue. As discussed above, the perceived distance of the depth plane from the viewer may be established by the light redirecting elements (<b>282</b>, <b>284</b>, <b>286</b>, <b>288</b>, <b>290</b>), e.g. diffractive optical element (DOE), and/or by lenses (<b>198</b>, <b>196</b>, <b>194</b>, <b>192</b>), which cause the light to diverge at an angle associated with the apparent distance.</p><p id="p-0143" num="0142">In some arrangements, each component color image may be outputted by a different waveguide in a stack of waveguides. For example, each depth plane may have three component color images associated with it: a first waveguide to output a first color, G; a second waveguide to output a second color, R; and a third waveguide to output a third color, B. In arrangements in which waveguides are used to output component color images, each box in the figure may be understood to represent an individual waveguide.</p><p id="p-0144" num="0143">While the waveguides associated with each depth plane are shown adjacent to one another in this schematic drawing for ease of description, it will be appreciated that, in a physical device, the waveguides may all be arranged in a stack with one waveguide per level. Different depth planes are indicated in the figure by different numbers for diopters following the letters G, R, and B.</p><heading id="h-0008" level="2">Display Timing Schemes</heading><p id="p-0145" num="0144">In some embodiments, a virtual or augmented reality system provides light field imagery by successively displaying multiple different depth planes for a given frame of video data. The system then updates to the next frame of video data and successively displays multiple different depth planes for that frame. For example, the first frame of video data can actually include three separate sub-frames of data: a far field frame D<b>0</b>, a midfield frame D<b>1</b>, and a near field frame D<b>2</b>. D<b>0</b>, D<b>1</b>, and D<b>2</b> can be displayed in succession. Subsequently, the second frame of video data can be displayed. The second frame of video data can likewise include a far field frame, a midfield frame, and a near field frame, which are displayed successively, and so on. While this example uses three depth planes, light field imagery is not so-limited. Rather, any plural number of depth planes can be used depending, for example, upon the desired video frame rates and the capabilities of the system.</p><p id="p-0146" num="0145">Because each frame of light field video data includes multiple sub-frames for different depth planes, systems which provide light field imagery may benefit from display panels which are capable of high refresh rates. For example, if the system displays video with a frame rate of 120 Hz but includes imagery from multiple different depth planes, then the display will need to be capable of a refresh rate greater than 120 Hz in order to accommodate the multiple depth plane images for each frame of video. In some embodiments, Liquid Crystal Over Silicon (LCOS) display panels are used, though other types of display panels can also be used (including color sequential displays and non-color sequential displays).</p><p id="p-0147" num="0146"><figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates an example timing scheme for a virtual or augmented reality system which displays light field imagery. In this example, the video frame rate is 120 Hz and the light field imagery includes three depth planes. In some embodiments, the green, red, and blue components of each frame are displayed serially rather than at the same time.</p><p id="p-0148" num="0147">A video frame rate of 120 Hz allows 8.333 ms in which to display all of the depth planes for a single frame of video. As illustrated in <figref idref="DRAWINGS">FIG. <b>9</b></figref>, each frame of video data includes three depth planes and each depth plane includes green, red, and blue components. For example the depth plane D<b>0</b> includes a green sub-frame, G<b>0</b>, a red sub-frame, R<b>0</b>, and a blue sub-frame, B<b>0</b>. Similarly, the depth plane D<b>1</b> comprises green, red, and blue sub-frames, G<b>1</b>, R<b>1</b>, and B<b>1</b>, respectively, and the depth plane D<b>2</b> comprises green, red, and blue sub-frames, G<b>2</b>, R<b>2</b>, and B<b>2</b>, respectively. Given that each video frame comprises three depth planes, and each depth plane has three color components, the allotted 8.333 ms is divided into nine segments of 0.926 ms each. As illustrated in <figref idref="DRAWINGS">FIG. <b>9</b></figref>, the green sub-frame G<b>0</b> for the first depth plane is displayed during the first time segment, the red sub-frame R<b>0</b> for the first depth plane is displayed during the second time segment, and so on. The total green on-time for each frame of video is 2.778 ms. The same is true of the total red on-time and blue on-time for each video frame. It should be understood, however, that other video frame rates can also be used, in which case the specific time intervals illustrated in <figref idref="DRAWINGS">FIG. <b>9</b></figref> could be adjusted accordingly. While the individual color components are illustrated as having equal display times, this is not required and the ratios of the display times between the color components can be varied. Furthermore, the flashing order illustrated in <figref idref="DRAWINGS">FIG. <b>9</b></figref> for the depth planes and color component sub-frames is but one example. Other flashing orders can also be used. Moreover, while <figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates an embodiment which uses a color sequential display technology, the techniques described herein are not limited to color sequential displays.</p><p id="p-0149" num="0148">Other display timing schemes are also possible. For example, the frame rate, number of depth planes, and color components can vary. In some embodiments, the frame rate of a virtual or augmented reality system as described herein is 80 Hz and there are three depth planes. In some embodiments, different depth planes can be displayed in different frames. For example, light field video with four depth planes can be displayed at an effective frame rate of 60 Hz by displaying two depth planes per frame at a frame rate of 120 Hz (depth planes D<b>0</b> and D<b>1</b> can be displayed in the first 8.33 ms and depth planes D<b>2</b> and D<b>3</b> can be displayed in the next 8.33 ms&#x2014;full depth information is provided in 16.7 ms, for an effective frame rate of 60 Hz). In some embodiments, the number of depth planes which are shown can vary spatially on the display. For example, a larger number of depth planes can be shown in a sub-portion of the display in the user's line of sight, and a smaller number of depth planes can be shown in sub-portions of the display located in the user's peripheral vision. In such embodiments, an eye tracker (e.g., a camera and eye tracking software) can be used to determine which portion of the display the user is looking at.</p><heading id="h-0009" level="2">Control Data for Video Data</heading><p id="p-0150" num="0149"><figref idref="DRAWINGS">FIG. <b>10</b></figref> illustrates an example format for a frame of video data which includes appended control data. As illustrated in <figref idref="DRAWINGS">FIG. <b>10</b></figref>, each frame of video data may comprise an array of pixel data formatted into rows and columns. In the illustrated example, there are <b>1280</b> columns and <b>960</b> rows of pixel data which form an image. <figref idref="DRAWINGS">FIG. <b>10</b></figref> also illustrates that control data <b>1010</b> can be appended to a frame of video data. In this example, a control packet <b>1010</b> can be appended to a frame of video data as, for example, an extra row. The first row (Row <b>000</b>) comprises the control information, whereas Rows <b>1</b>-<b>960</b> contain the actual image. Thus, in this embodiment, the host transmits a resolution of 1280&#xd7;961 to the display controller.</p><p id="p-0151" num="0150">The display controller reads the appended control information and uses it, for example, to configure the image information <b>1020</b> sent to one or more display panels (e.g., a left-eye and a right-eye display panel). In this example, the row of control information <b>1010</b> is not sent to the display panels. Thus, while the host transmits information to the display controller with a resolution of 1280&#xd7;961, the display controller removes the control information <b>1010</b> from the stream of data and transmits only the video information <b>1020</b> to the display panel(s) with a resolution of 1280&#xd7;960. The imagery data can be transmitted to a display panel (e.g., an LCOS display panel) in, for example, Display Serial Interface (DSI) format. While <figref idref="DRAWINGS">FIG. <b>10</b></figref> illustrates that the appended control information <b>1010</b> comprises a single row appended at the beginning of each frame of video data, other amounts of control information could alternatively be appended. Further, the control information <b>1010</b> does not necessarily have to be appended at the beginning of each frame of video data but could instead be inserted into the video data at other locations. However, appending control information at the beginning of a frame may allow the controller to more readily act on the control information at the beginning of a frame of rendered imagery prior to displaying the image data.</p><p id="p-0152" num="0151"><figref idref="DRAWINGS">FIG. <b>11</b></figref> illustrates another example format for a frame of video data which includes control data. <figref idref="DRAWINGS">FIG. <b>11</b></figref> is similar to <figref idref="DRAWINGS">FIG. <b>10</b></figref> except that the control information <b>1110</b> is inserted in place of the first row of video data rather than being appended to the frame of video data before the first row. Thus, the first row (Row <b>000</b>) of the frame comprises control information, while the remaining 959 rows comprise the actual image data <b>1120</b>.</p><p id="p-0153" num="0152">In this example, the host transmits information to the display controller with a resolution of 1280&#xd7;960. The display controller can use the control data <b>1110</b> to configure the image information sent to the display panel(s). The display controller then transmits the frame of video data illustrated in <figref idref="DRAWINGS">FIG. <b>11</b></figref> to the display panel(s). However, in some embodiments, before transmitting the frame of video data illustrated in <figref idref="DRAWINGS">FIG. <b>11</b></figref> to the display panel(s), the display controller can remove the control information <b>1110</b> by, for example, setting that row of video data to zeros. This causes the first row of each frame of video data to appear as a dark line on the display.</p><p id="p-0154" num="0153">Using the scheme illustrated in <figref idref="DRAWINGS">FIG. <b>11</b></figref>, control information <b>1110</b> can be included with a frame of video data without changing the resolution of the information sent to the display controller. However, the trade-off in this example is that the effective display resolution is decreased due to the fact that some image data is replaced by the control data. While <figref idref="DRAWINGS">FIG. <b>11</b></figref> illustrates that the control data <b>1110</b> is inserted in place of the first row of image data, the control data could alternatively be inserted in place of another row in the frame.</p><p id="p-0155" num="0154">The control data illustrated in, for example, <figref idref="DRAWINGS">FIGS. <b>10</b> and <b>11</b></figref> (and later in <figref idref="DRAWINGS">FIG. <b>12</b></figref>) can be used for a number of different purposes. For example, the control data can indicate whether a frame of video data should be displayed on the left-eye video panel or the right-eye video panel. The control data can indicate which of a plurality of depth planes the frame of video data corresponds to. The control data can indicate the flashing order for the light field video data. For example, the control data can indicate the order in which to display each depth plane, as well as the order to display the color component sub-frames for each depth plane. In addition, there may be a need to shift pixels left/right or up/down after the content for the display has already been generated by the host. Rather than adjusting and re-rendering the image data, the control data can include pixel shift information which specifies the direction and magnitude of a pixel shift which should be carried out by the display controller.</p><p id="p-0156" num="0155">Such pixel shifts can be carried out for a number of reasons. Pixel shifts can be performed in cases in which the image content needs to be moved on the display due to, for example, a user's head movement. In such cases, the content may be the same but its location within the viewing area on the display may need to be shifted. Rather than re-rendering the image content at the GPU and sending the whole set of pixels to the display controller again, the pixel shift can be applied to the image data using the pixel shift control information. As illustrated in <figref idref="DRAWINGS">FIGS. <b>10</b> and <b>11</b></figref>, the pixel shift control information can be included at the beginning of a frame. Alternatively, and/or additionally, a late update control data packet can be sent within a frame (e.g., after the first row) to perform an appropriate pixel shift based on an updated head pose mid frame. This can be done using, for example, a Mobile Industry Processor Interface (MIPI) Display Serial Interface (DSI) virtual channel.</p><p id="p-0157" num="0156">Pixel shifts can also be performed in cases in which the user is moving his or her head and a more accurate representation of the pixels is wanted. Rather than having the GPU re-render the image, a late shift on the display can be applied using the pixel shift approach. Any pixel shift described herein could impact a single depth plane or multiple depth planes. As already discussed herein, in some embodiments, there are differences in time between when various depth planes are displayed. During these time differences, the user may shift his or her eyes such that the viewing frustum may need to be shifted. This can be accomplished using a pixel shift for any of the depth planes.</p><p id="p-0158" num="0157">The pixel shift control information can indicate a pixel shift in the X-Y direction within a frame of a single depth plane. Alternately, and/or additionally, the pixel shift control information can indicate a shift in the Z direction between depth plane buffers. For example, an object that was previously displayed in one or more depth planes may move to another depth plane set with a Z-pixel shift. This type of shift can also include a scaler to enlarge or reduce the partial image for each depth. Assume, for example, that a displayed character is floating between two depth planes and there is no occlusion of that character with another object. Apparent movement of the character in the depth direction can be accomplished by re-drawing the character forward or backward one or more depth planes using the Z-pixel shift and scaler. This can be accomplished without re-rendering the character and sending a frame update to the display controller, resulting in a smoother motion performance at much lower computational cost.</p><p id="p-0159" num="0158">The scaler can also be used to compensate for magnification effects that occur within the display as a result of, for example, the lenses <b>192</b>, <b>194</b>, <b>196</b>, <b>198</b>. Such lenses may create virtual images which are observable by the user. When a virtual object moves from one depth plane to another, the optical magnification of the virtual image can actually be opposite of what would be expected in the physical world. For example, in the physical world when an object is located at a further depth plane from the viewer, the object appears smaller than it would if located at a closer depth plane. However, when the virtual object moves from a nearer depth plan to a further depth plane in the display, the lenses may actually magnify the virtual image of the object. Thus, in some embodiments, a scaler is used to compensate for optical magnification effects in the display. A scaler can be provided for each depth plane to correct magnification effects caused by the optics. In addition, a scaler can be provided for each color if there are any scaling issues to be addressed on a per color basis.</p><p id="p-0160" num="0159">In some embodiments, the maximum horizontal pixel shift can correspond to the entire panel width, while the maximum vertical pixel shift can correspond to the entire panel height. Both positive and negative shifts can be indicated by the control data. Using this pixel shift information, the display controller can shift a frame of video data left or right, up or down, and forward or backward between depth planes. The pixel shift information can also cause a frame of video data to be completely or partially shifted from the left-eye display panel to the right-eye display panel, or vice versa. Pixel shift information can be included for each of the depth planes in the light field video data.</p><p id="p-0161" num="0160">In some embodiments, such as those where scanning-based displays are used, incremental distributed pixel shifts can be provided. For example, the images for a frame of video can be shifted incrementally in one or more depth planes until reaching the end (e.g., bottom) of the image. The pixels which are displayed first can be shifted more or less than later-displayed pixels within a frame in order to compensate for head movement or in order to simulate motion of the object. Further, there can be an incremental pixel shift on a per-plane basis. For example, pixels in one depth plane can be shifted more or less than pixels in another depth plane. In some embodiments, eye tracking technology is used to determine which portion of a display screen the user is fixated on. Objects in different depth planes, or even at different locations within a single depth plane, can be pixel shifted (or not shifted) depending on where the user is looking. If there are objects that the user is not fixating on, pixel shift information for those objects may be disregarded in order to improve performance for pixel shifts in the imagery that the user is fixating on. Again, an eye tracker can be used to determine where on the display the user is looking.</p><p id="p-0162" num="0161">The control information can also be used to specify and/or regulate one or more virtual depth planes. A virtual depth plane can be provided at a desired interval between two defined depth planes in a virtual or augmented reality system by blending the two depth plane images with appropriate weightings to maintain the desired brightness of the imagery. For example, if a virtual depth plane is desired between depth plane D<b>0</b> and depth plane D<b>1</b>, then a blending unit can weight the pixel values of the D<b>0</b> image data by 50% while also weighting the pixel values of the D<b>1</b> image data by 50%. (So long as the weightings sum to 100%, then the apparent brightness of the imagery can be maintained.) The result would be a virtual depth plane that appears to be located midway between D<b>0</b> and D<b>1</b>. The apparent depth of the virtual depth plane can be controlled by using different blending weights. For example, if it is desired that the virtual depth plane appear closer to D<b>1</b> than D<b>0</b>, then the D<b>1</b> image can be weighted more heavily. One or more scalers can be used to ensure that a virtual object is substantially the same size in both of the depth planes that are being blended so that like portions of the virtual object are combined during the blending operation. The control data can specify when virtual depth plane imagery is to be calculated and the control information can also include blending weights for the virtual depth planes. In various embodiments, the weights can be stored in a programmable look up table (LUT). The control information can be used to select the appropriate weights from the LUT that would provide a desired virtual depth plane.</p><p id="p-0163" num="0162">The control information can also indicate whether an image frame for one of two stereo displays should be copied into the other. For example, in the case of the most distant simulated depth plane (e.g., background imagery), there may be relatively little difference (e.g., due to parallax shift) between the right and left eye images. In such cases, the control information can indicate that the imagery for one of the stereo displays be copied to the other display for one or more depth planes. This can be accomplished without re-rendering the image data at the GPU for both the right and left eye displays or re-transferring data to the display controller. If there are relatively small differences between the right and left eye images, pixel shifts can also be used to compensate without re-rendering or re-transferring image data for both eyes.</p><p id="p-0164" num="0163">The control data illustrated in <figref idref="DRAWINGS">FIGS. <b>10</b> and <b>11</b></figref> can also be used for other purposes besides those specifically enumerated here.</p><p id="p-0165" num="0164">While <figref idref="DRAWINGS">FIGS. <b>10</b> and <b>11</b></figref> illustrate that rows of control data can be included with video data, control data can also (or alternatively) be embedded in individual pixels of video data. This is illustrated in <figref idref="DRAWINGS">FIG. <b>12</b></figref>, which illustrates an example format for a pixel <b>1200</b> of video data which includes embedded control data <b>1240</b>. <figref idref="DRAWINGS">FIG. <b>12</b></figref> illustrates that the pixel of video data comprises a blue value <b>1230</b> (Byte <b>0</b>), a green value <b>1220</b> (Byte <b>1</b>), and a red value <b>1210</b> (Byte <b>2</b>). In this embodiment, each of the color values has a color depth of eight bits. In some embodiments, one or more of the bits corresponding to one or more of the color values can be replaced by control data <b>1240</b> at the expense of the bit depth of the color value(s). Thus, control data can be embedded directly in pixels of video data at the expense of dynamic range of the color value(s) for the pixel. For example, as illustrated in <figref idref="DRAWINGS">FIG. <b>12</b></figref>, the highlighted two least significant bits of the blue value can be dedicated as control data <b>1240</b>. Though not illustrated, bits of the other color values can also be dedicated as control data. Moreover, different numbers of pixel bits can be dedicated as control data.</p><p id="p-0166" num="0165">In some embodiments, the control data <b>1240</b> embedded in the pixels of video data can be depth plane indicator data (though the control data embedded in the pixels can also be any other type of control data, including other types described herein). As discussed herein, light field video data can include a number of depth planes. The bit depth for one or more pixels in the video frame can be reduced and the resulting available bit(s) can be used to indicate the depth plane to which a pixel corresponds.</p><p id="p-0167" num="0166">As a concrete example, consider the 24-bit RGB pixel data illustrated in <figref idref="DRAWINGS">FIG. <b>12</b></figref>. Each of the red, green, and blue color values has a bit depth of eight bits. As already discussed, the bit depth of one or more of the color components can be sacrificed and replaced by depth plane indicator data. For example, since the eye is less sensitive to blue, the blue component can be represented by six bits (bits B<b>3</b>-B<b>8</b> in <figref idref="DRAWINGS">FIG. <b>12</b></figref>) instead of eight. The resulting extra two bits (bits B<b>1</b> and B<b>2</b>) can be used to specify which of up to four depth planes that pixel corresponds to. If there are more or fewer depth planes, then a greater or lesser number of color bits can be sacrificed. For example if the bit depth is reduced by one bit, up to two depth planes can be specified. If the bit depth is reduced by three bits, up to eight depth planes can be specified, etc. In this way, the dynamic range of a color value can be traded off for the ability to encode depth plane indicator data directly within the imagery data itself.</p><p id="p-0168" num="0167">In some embodiments, depth plane indicator data <b>1240</b> is encoded in every pixel of video data. In other embodiments, depth plane indicator data <b>1240</b> may be encoded in one pixel per frame, or one pixel per line, one pixel per virtual or augmented reality object, etc. In addition, depth plane indicator data <b>1240</b> can be encoded in just a single color component, or in multiple color components. Similarly, the technique of encoding depth plane indicator data <b>1240</b> directly within imagery data is not limited solely to color imagery. The technique can be practiced in the same way for grayscale images, etc.</p><p id="p-0169" num="0168"><figref idref="DRAWINGS">FIG. <b>12</b></figref> illustrates one technique for encoding depth plane indicator data in image data. Another technique is to employ chroma subsampling and use the resulting available bits as depth plane indicator data. For example, the image data can be represented in YCbCr format, where Y represents the luminance component (which may or may not be gamma corrected), Cb represents a blue-difference chroma component, and Cr represents a red-difference chroma component. Since the eye is less sensitive to chroma resolution than luminance resolution, the chroma information can be provided with a lesser resolution than the luminance information without unduly degrading image quality. In some embodiments, a YCbCr 4:2:2 format is used in which a Y value is provided for each pixel but Cb and Cr values are each only provided for every other pixel in alternating fashion. If a pixel (in the absence of chroma subsampling) normally consists of 24 bits of information (8-bit Y value, 8-bit Cb value, and 8-bit Cr value), then after employing chroma subsampling each pixel will only require 16 bits of information (8-bit Y value and 8-bit Cb or Cr value). The remaining 8 bits can be used as depth plane indicator data. The depth plane indicator data can be used to separate the pixels into the appropriate depth planes to be displayed at the appropriate times.</p><p id="p-0170" num="0169">In both the embodiment illustrated in <figref idref="DRAWINGS">FIG. <b>12</b></figref> and the chroma subsampling embodiment, the depth plane indicator data can specify actual depth planes supported by the virtual or augmented reality system and/or virtual depth planes as discussed herein. If the depth plane indicator data specifies a virtual depth plane, it can also specify the weightings of the depth planes to be blended, as discussed herein.</p><p id="p-0171" num="0170">The usage of the embedded depth plane indicator data in the display controller is illustrated in <figref idref="DRAWINGS">FIG. <b>14</b></figref>. But first, <figref idref="DRAWINGS">FIG. <b>13</b></figref> is provided by way of background to show the operation of the display controller when only a single depth plane is present. <figref idref="DRAWINGS">FIG. <b>13</b></figref> illustrates how a frame of video can be separated into color components which can be displayed serially. The left-hand panel <b>1310</b> of <figref idref="DRAWINGS">FIG. <b>13</b></figref> shows an image which comprises one frame of a <b>120</b> frame per second video. As indicated by the right-hand panel <b>1330</b> of <figref idref="DRAWINGS">FIG. <b>13</b></figref>, the image is separated into red, green, and blue color components which are flashed on the display by the display controller over the course of 1/120 of a second (8.33 ms). For simplicity, <figref idref="DRAWINGS">FIG. <b>13</b></figref> shows that each of the color components is flashed once and that each of the color components is active for the same amount of time. The human vision system then fuses the individual color component sub-frames into the original color image shown in the left-hand panel of <figref idref="DRAWINGS">FIG. <b>13</b></figref>. <figref idref="DRAWINGS">FIG. <b>14</b></figref> shows how this process can be adapted when each frame of video data includes multiple depth planes.</p><p id="p-0172" num="0171"><figref idref="DRAWINGS">FIG. <b>14</b></figref> illustrates how a frame of light field video data can be separated, using depth plane indicator data, into multiple depth planes which can each be split into color components sub-frames for display. In some embodiments, a host transmits a stream of light field video data to a display controller. This stream of video data is represented by the image in the left-hand panel <b>1410</b> of <figref idref="DRAWINGS">FIG. <b>14</b></figref>. The display controller can use embedded depth plane indicator data <b>1240</b> to separate the stream of video data into a plurality of RxGxBx sequences, where a R<b>0</b>G<b>0</b>B<b>0</b> sequence corresponds to a first depth plane, a R<b>1</b>G<b>1</b>B<b>1</b> sequence corresponds to a second depth plane, and a R<b>2</b>G<b>2</b>B<b>2</b> sequence corresponds to a third depth plane. As illustrated in <figref idref="DRAWINGS">FIG. <b>13</b></figref>, this depth plane separation can be performed on the basis of the two least significant blue bits in each pixel. The result is shown in the middle panel <b>1420</b> of <figref idref="DRAWINGS">FIG. <b>14</b></figref>, which shows three separate depth plane images. Finally, each of the three separate depth plane images shown in the middle panel <b>1420</b> of <figref idref="DRAWINGS">FIG. <b>14</b></figref> can be separated into its constituent color component sub-frames. The color component sub-frames of each depth plane can then be sequentially flashed to the display, as illustrated by the right-hand panel <b>1430</b> of <figref idref="DRAWINGS">FIG. <b>14</b></figref>. The sequence order can be, for example, R<b>0</b>G<b>0</b>B<b>0</b>R<b>1</b>G<b>1</b>B<b>1</b>R<b>2</b>G<b>2</b>B<b>2</b> as illustrated in <figref idref="DRAWINGS">FIG. <b>14</b></figref>, or G<b>0</b>R<b>0</b>B<b>0</b>G<b>1</b>R<b>1</b>B<b>1</b>G<b>2</b>R<b>2</b>B<b>2</b> as illustrated in <figref idref="DRAWINGS">FIG. <b>9</b></figref>.</p><p id="p-0173" num="0172">The depth plane indicator data <b>1240</b> can be used by the display controller to determine the number of RxGxBx sequences to use and which pixels correspond to which sequence. Control data can also be provided to specify the order of RxGxBx color sequences that are flashed to the display. For example, in the case of video data which includes three depth planes (D<b>0</b>, D<b>1</b>, D<b>2</b>), there are six possible orders in which the individual RxGxBx sequences can be flashed to the display panel: D<b>0</b>, D<b>1</b>, D<b>2</b>; D<b>0</b>, D<b>2</b>, D<b>1</b>; D<b>1</b>, D<b>0</b>, D<b>2</b>; D<b>1</b>, D<b>2</b>, DO; D<b>2</b>, D<b>0</b>, D<b>1</b>; and D<b>2</b>, D<b>1</b>, D<b>0</b>. If the order specified by the control data is D<b>0</b>, D<b>1</b>, D<b>2</b>, then pixels with blue LSB bits 0b00 corresponding to the first depth plane, D<b>0</b>, can be selected as the first RxGxBx color sequence image going out. Pixels with blue LSB bits 0b01 corresponding to the second depth plane, D<b>1</b>, can be selected as the second RxGxBx color sequence image going out, and so on.</p><p id="p-0174" num="0173"><figref idref="DRAWINGS">FIG. <b>15</b></figref> illustrates an example where the depth plane indicator data of <figref idref="DRAWINGS">FIG. <b>12</b></figref> indicates that one or more depth planes of a frame of light field video data are inactive. <figref idref="DRAWINGS">FIG. <b>15</b></figref> is similar to <figref idref="DRAWINGS">FIG. <b>14</b></figref> in that it shows a stream of video data (represented by the left-hand panel <b>1510</b> of <figref idref="DRAWINGS">FIG. <b>15</b></figref>) being separated into depth planes (represented by the middle panel <b>1520</b> of <figref idref="DRAWINGS">FIG. <b>15</b></figref>), which are then each separated into color component sub-frames (represented by the right-hand panel <b>1530</b> of <figref idref="DRAWINGS">FIG. <b>15</b></figref>). However, <figref idref="DRAWINGS">FIG. <b>15</b></figref> is distinct from <figref idref="DRAWINGS">FIG. <b>14</b></figref> in that only a single depth plane is shown as being active.</p><p id="p-0175" num="0174">As already discussed, the depth plane indicator data <b>1240</b> in <figref idref="DRAWINGS">FIG. <b>12</b></figref> comprises the two least significant bits of the blue value in each pixel. These two bits are capable of specifying up to four depth planes. However, light field video data may include fewer than four depth planes. For instance, in the preceding example, the light field video data includes only three depth planes. In such cases where the video data includes fewer than the maximum number of specifiable depth planes, the depth plane indicator data can specify that one or more depth planes are inactive. For example, continuing with the preceding example, if the two blue LSB bits in a pixel are set to 0b11, then the pixel can be assigned to an inactive fourth depth plane D<b>3</b>. As shown in <figref idref="DRAWINGS">FIG. <b>15</b></figref>, only one of three RxGxBx color sequences is activated in the output sequence; the inactive depth planes are shown as black frames. As before, control data can be provided to specify the order in which depth planes are displayed. As shown in the middle panel <b>1520</b> of <figref idref="DRAWINGS">FIG. <b>15</b></figref>, in the illustrated example, the control data has specified that the inactive depth plane D<b>3</b> be shown first and last in the sequence. Thus, only the middle frame in the sequence comprises actual image data which is flashed to the display. (Other sequences can also be used. For example, the active depth plane could be ordered first or last in the sequence, or it could be repeated in the sequence more than once.) When the display controller sees that a pixel is assigned to an inactive depth plane, then the display controller can simply disregard the pixel and not flash it to the display. For example, when the control data indicates that a depth plane is inactive, power to the light source(s) that provides light to the display for that particular depth plane can be reduced (e.g., shut off), thereby reducing power consumption. This can save switching power at the display driver. Thus, a power-saving mode can be implemented by designating one or more depth planes of the video data as inactive. Likewise, in some embodiments, the control data can indicate that one or more color fields is inactive within a depth plane, while one or more other color fields in a depth plane are active. Based on this control data, the display controller can control the display to disregard the color field or fields that are inactive and display the imagery from the one or more active color fields without the inactive color field(s). For example, when the control data indicates that a color field is inactive, power to the light source(s) that provides light to the display for that particular color field can be reduced (e.g., shut off), thereby reducing power consumption. Accordingly, light sources, such as light emitting diodes (LEDs), lasers, etc., that provide illumination to the display can be shut off or have their power reduced for inactive depth planes and/or inactive color fields.</p><heading id="h-0010" level="2">Multi-Depth Plane Image Compression</heading><p id="p-0176" num="0175">In some embodiments, image compression techniques are applied across multiple depth planes in order to reduce the amount of video image data by removing redundancy of information between depth planes. For example, rather than transmitting an entire frame of image data for each depth plane, some or all of the depth planes may instead be represented in terms of changes with respect to an adjacent depth plane. (This can also be done on a temporal basis between frames at adjacent instants in time.) The compression technique can be lossless or it can be lossy, such that changes between adjacent depth plane frames, or between temporally-adjacent frames, which are less than a given threshold can be ignored, thus resulting in a reduction in image information. In addition, the compression algorithms can encode motion of objects within a single depth plane (X-Y motion) and/or between depth planes (Z motion) using motion vectors. Rather than requiring that image data for a moving object be repeatedly transmitted over time, motion of the object can be achieved entirely or partially with pixel shift control information, as discussed herein.</p><heading id="h-0011" level="2">Dynamically Configurable Display Drawing Areas</heading><p id="p-0177" num="0176">In systems that display light field imagery, it can be challenging to achieve high video frame rates owing to the relatively large amount of information (e.g., multiple depth planes, each with multiple color components) included for each video frame. However, video frame rates can be improved, particularly in augmented reality mode, by recognizing that computer-generated light field imagery may only occupy a fraction of the display at a time, as shown in <figref idref="DRAWINGS">FIG. <b>16</b></figref>.</p><p id="p-0178" num="0177"><figref idref="DRAWINGS">FIG. <b>16</b></figref> illustrates example drawing areas for a frame of computer-generated imagery in an augmented reality system. <figref idref="DRAWINGS">FIG. <b>16</b></figref> is similar to <figref idref="DRAWINGS">FIG. <b>1</b></figref> except that it shows only the portions of the display where augmented reality imagery is to be drawn. In this case, the augmented reality imagery includes the robot statue <b>1110</b> and the bumblebee character <b>2</b>. The remaining area of the display in augmented reality mode may simply be a view of the real-world environment surrounding the user. As such, there may be no need to draw computer-generated imagery in those areas of the display. It may often be the case that the computer-generated imagery occupies only a relatively small fraction of the display area at a time. By dynamically re-configuring the specific drawing area(s) which are refreshed from frame-to-frame so as to exclude areas where no computer-generated imagery need be shown, video frame rates can be improved.</p><p id="p-0179" num="0178">Computer-generated augmented reality imagery may be represented as a plurality of pixels, each having, for example, an associated brightness and color. A frame of video data may comprise an m x n array of such pixels, where m represents a number of rows and n represents a number of columns. In some embodiments, the display of an augmented reality system is at least partially transparent so as to be capable of providing a view of the user's real-world surroundings in addition to showing the computer-generated imagery. If the brightness of a given pixel in the computer-generated imagery is set to zero or a relatively low value, then the viewer will see the real-world environment at that pixel location. Alternatively, if the brightness of a given pixel is set to a higher value, then the viewer will see computer-generated imagery at that pixel location. For any given frame of augmented reality imagery, the brightness of many of the pixels may fall below a specified threshold such that they need not be shown on the display. Rather than refresh the display for each of these below-threshold pixels, the display can be dynamically configured not to refresh those pixels.</p><p id="p-0180" num="0179">In some embodiments, the augmented reality system includes a display controller for controlling the display. The controller can dynamically configure the drawing area for the display. For example, the controller can dynamically configure which of the pixels in a frame of video data are refreshed during any given refresh cycle. In some embodiments, the controller can receive computer-generated imagery data corresponding to a first frame of video. As discussed herein, the computer-generated imagery may include several depth planes. Based on the imagery data for the first frame of video, the controller can dynamically determine which of the display pixels to refresh for each of the depth planes. If, for example, the display utilizes a scanning-type display technology, the controller can dynamically adjust the scanning pattern so as to skip areas where the augmented reality imagery need not be refreshed (e.g., areas of the frame where there is no augmented reality imagery or the brightness of the augmented reality imagery falls below a specified threshold).</p><p id="p-0181" num="0180">In this way, based upon each frame of video data that is received, the controller can identify a sub-portion of the display where augmented reality imagery should be shown. Each such sub-portion may include a single contiguous area or multiple non-contiguous areas (as shown in <figref idref="DRAWINGS">FIG. <b>16</b></figref>) on the display. Such sub-portions of the display can be determined for each of the depth planes in the light field imagery data. The display controller can then cause the display to only refresh the identified sub-portion(s) of the display for that particular frame of video. This process can be performed for each frame of video. In some embodiments, the controller dynamically adjusts the areas of the display which will be refreshed at the beginning of each frame of video data.</p><p id="p-0182" num="0181">If the controller determines that the area of the display which should be refreshed is becoming smaller over time, then the controller may increase the video frame rate because less time will be needed to draw each frame of augmented reality data. Alternatively, if the controller determines that the area of the display which should be refreshed is becoming larger over time, then it can decrease the video frame rate to allow sufficient time to draw each frame of augmented reality data. The change in the video frame rate may be inversely proportional to the fraction of the display that needs to be filled with imagery. For example, the controller can increase the frame rate by 10 times if only one tenth of the display needs to be filled.</p><p id="p-0183" num="0182">Such video frame rate adjustments can be performed on a frame-by-frame basis. Alternatively, such video frame rate adjustments can be performed at specified time intervals or when the size of the sub-portion of the display to be refreshed increases or decreases by a specified amount. In some cases, depending upon the particular display technology, the controller may also adjust the resolution of the augmented reality imagery shown on the display. For example, if the size of the augmented reality imagery on the display is relatively small, then the controller can cause the imagery to be displayed with increased resolution. Conversely, if the size of the augmented reality imagery on the display is relatively large, then the controller can cause imagery to be displayed with decreased resolution.</p><heading id="h-0012" level="2">Enhanced Head Pose Estimation</heading><p id="p-0184" num="0183">As discussed herein, virtual and augmented reality systems can include body-mounted displays, such as a helmet, glasses, goggles, etc. In addition, virtual augmented reality systems can include sensors such as gyroscopes, accelerometers, etc. which perform measurements that can be used to estimate and track the position, orientation, velocity, and/or acceleration of the user's head in three dimensions. The sensors can be provided in an inertial measurement unit worn by the user on his or her head. In this way, the user's head pose can be estimated. Head pose estimates can be used as a means of allowing the user to interact with the virtual or augmented reality scene. For example, if the user turns or tilts his or her head, then the virtual or augmented reality scene can be adjusted in a corresponding manner (e.g., the field of view of the scene can be shifted or tilted).</p><p id="p-0185" num="0184"><figref idref="DRAWINGS">FIG. <b>17</b></figref> schematically illustrates the possible motion of a user's head about two rotational axes. As illustrated, the user can rotate his or her head about a vertical axis and a horizontal axis perpendicular to the page. Though not illustrated, the user can also rotate his or her head about a horizontal axis that lies in the plane of the page. In some embodiments, it may be useful to define the direction of the user's line of sight as the head pose direction. (Although such a definition of head pose would not necessarily account for the side tilt of the head, other definitions of head pose could.) <figref idref="DRAWINGS">FIG. <b>18</b></figref> illustrates how a user's head pose can be mapped onto a three-dimensional surface <b>1810</b>. <figref idref="DRAWINGS">FIG. <b>18</b></figref> includes a surface normal vector <b>1820</b> which indicates the user's head pose. Each possible surface normal vector <b>1820</b> on the three-dimensional surface corresponds to a distinct head pose. In <figref idref="DRAWINGS">FIG. <b>18</b></figref>, a surface normal vector pointing directly up would correspond to the user's neutral head pose when he or she is looking directly forward.</p><p id="p-0186" num="0185">Various algorithms can be used to estimate and track the user's head pose based on the sensor measurements from the head-mounted inertial measurement unit. These include, for example, Kalman filters and other similar algorithms. These types of algorithms typically produce estimates which are based on sensor measurements over time rather than solely at any single instant. A Kalman filter, for example, includes a prediction phase where the filter outputs a predicted estimate of the head pose based on the head pose estimate at the previous instant. Next, during an update phase, the filter updates the head pose estimate based on current sensor measurements. Such algorithms can improve the accuracy of head pose estimates, which reduces error in displaying virtual or augmented reality imagery appropriately in response to head movements. Accurate head pose estimates can also reduce latency in the system.</p><p id="p-0187" num="0186">Typically, a Kalman filter or similar algorithm produces the most accurate head pose estimates for head poses near the user's neutral head pose (corresponding to a vertical surface normal vector <b>1820</b> in <figref idref="DRAWINGS">FIG. <b>18</b></figref>). Unfortunately, such algorithms may fail to properly estimate head pose movement as the head pose deviates further from the neutral head pose because they do not account for movement limits imposed by human physiology or the movement of the user's head in relation to the body. However, various adaptations can be made in order to reduce the effects of these weaknesses on head pose tracking.</p><p id="p-0188" num="0187">In some embodiments, head pose estimation and tracking using Kalman filters or similar algorithms can be improved by using variable gain factors which are different depending upon the current head pose location within an envelope of physiologically-possible head poses. <figref idref="DRAWINGS">FIG. <b>18</b></figref> illustrates a three-dimensional surface <b>1810</b> corresponding to such an envelope of physiologically-possible head poses. <figref idref="DRAWINGS">FIG. <b>18</b></figref> shows that the user's head has a range of motion in any direction of no more than about 180&#xb0; (e.g., side to side or up and down). The current head pose within the physiological envelope can be used to adjust the Kalman filter estimated variable gain factors. In areas near the center of the envelope (i.e., neutral head pose), the gain factors can be set to emphasize the predicted head pose over the measured head pose because the Kalman filter prediction errors can be lower due to the higher linearity of the head movement in this region. This can reduce latency in the system without unduly impacting head pose estimation accuracy. When the head pose approaches the physiological head movement envelope boundaries, then the algorithm can use gain factors which are set to reduce the filter's reliance on predicted head pose or emphasize the measured head pose over the predicted head pose in order to reduce error.</p><p id="p-0189" num="0188">In some embodiments, each location on the physiological head pose envelope illustrated in <figref idref="DRAWINGS">FIG. <b>18</b></figref> can corresponds to different gains. In other embodiments, the physiological head pose envelope can be split into separate regions and different gain values can be associated with each of the different regions. This is illustrated in <figref idref="DRAWINGS">FIG. <b>19</b></figref></p><p id="p-0190" num="0189"><figref idref="DRAWINGS">FIG. <b>19</b></figref> schematically illustrates various head pose regions which can be used to define gain factors for improving head pose tracking. <figref idref="DRAWINGS">FIG. <b>19</b></figref> shows a central region <b>1910</b> corresponding to relatively neutral head poses. It also includes an outer region <b>1930</b> corresponding to head poses near the physiological boundary and an intermediate region <b>1920</b> in between the central and outer regions. In some embodiments, a different set of gain factors can be specified for each head pose region. The central region <b>1910</b> shows the areas with the higher linearity of movement which will have higher accuracy prediction values produced by a Kalman filter algorithm. When the head pose is within the central region <b>1910</b>, the gain factors of the Kalman filter can be set to emphasize the predicted head pose over the measured head pose or to otherwise reduce reliance on measured head pose. As the head pose exits the central region and enters the intermediate or outer regions (<b>1920</b>, <b>1930</b>, respectively), the movement can become more constrained by physiological factors that will adversely impact the Kalman predicted head pose if not taken into account by the algorithm. Accordingly, in these regions (particularly the outer region <b>1930</b>), the Kalman filter gain values can be set to reduce the filter's reliance on predicted head pose and increase its reliance on measured head pose. For example, it would be inaccurate to strongly rely on a predicted head pose too far into the future if it is known that the acceleration of the head will come to a stop close to the envelope boundaries. Although three head pose regions are illustrated in <figref idref="DRAWINGS">FIG. <b>19</b></figref>, a different number of head pose regions can be used in other embodiments.</p><p id="p-0191" num="0190">In some embodiments, head pose estimation and tracking can also be improved by sensing the position, orientation, velocity, and/or acceleration of the user's head relative to the user's body rather than sensing the movement of the head in an absolute sense. This can be done by providing an additional inertial measurement unit worn by the user on his or her body (e.g., on the torso or waist). It is important to note that head pose is a function of both head and body movement. The envelope of physiologically-possible head poses is not fixed in space; it moves with, for example, body rotation. If the user were sitting in a chair moving his or her head while keeping the body immobilized, then the physiological envelope would be relatively constrained such that relatively good head pose estimates could be achieved by considering only the head movement. However, when a user is actually wearing a virtual or augmented reality head-mounted display and moving around, then the physiological envelope of possible head poses varies with body movement.</p><p id="p-0192" num="0191">A second inertial measurement unit worn on the body (e.g., mounted with the battery pack and/or processor for the virtual or augmented reality system) can help provide additional information to track the movement of the physiological envelope of head poses. Instead of fixing the envelope in space, the second inertial measurement unit can allow for movement of the head to be determined in relation to the body. For example, if the body rotates to the right, then the physiological envelope can be correspondingly rotated to the right to more accurately determine the head pose within the physiological envelope and avoid unduly constraining the operation of the Kalman filter.</p><p id="p-0193" num="0192">In some embodiments, the motion of the head determined using the head-mounted inertial measurement unit can be subtracted from the motion of the body determined using the body-mounted inertial measurement unit. For example, the absolute position, orientation, velocity, and/or acceleration of the body can be subtracted from the absolute position, orientation, velocity, and/or acceleration of the head in order to estimate the position, orientation, velocity, and/or acceleration of the head in relation to the body. Once the orientation or motion of the head in relation to the body is known, then the actual head pose location within the physiological envelope can be more accurately estimated. As discussed herein, this allows Kalman filter gain factors to be determined in order to improve estimation and tracking of the head pose.</p><heading id="h-0013" level="2">Enhanced &#x201c;Totem&#x201d; Position Estimation</heading><p id="p-0194" num="0193">In some virtual or augmented reality systems, a specified tangible object can be used as a &#x201c;totem&#x201d; which allows a user to interact with a virtual object or scene. For example, a tangible block which the user holds in his or her hand could be recognized by the system as an interactive device, such as a computer mouse. The system can include, for example, a camera which tracks the movement of the tangible block in the user's hand and then accordingly adjusts a virtual pointer. A possible drawback of using computer vision for tracking totems in space is that the totems may occasionally be outside the field of view of the camera or otherwise obscured. Thus, it would be beneficial to provide a system for robustly tracking the position and motion of the totem in three dimensions with six degrees of freedom.</p><p id="p-0195" num="0194">In some embodiments, a system for tracking the position and motion of the totem includes one or more sensors in the totem. These one or more sensors could be accelerometers and/or gyroscopes which independently determine the position and movement of the totem in space. This data can then be transmitted to the virtual or augmented reality system.</p><p id="p-0196" num="0195">Alternatively, the one or more sensors in the totem can work in conjunction with a transmitter to determine the position and movement of the totem and space. For example, the transmitter can create spatially-varying electric and/or magnetic fields in space and the totem can include one or more sensors which repeatedly measure the field at the location of the totem, thereby allowing the position and motion of the totem to be determined. In some embodiments, such a transmitter can advantageously be incorporated into the head-mounted display of the virtual or augmented reality system. Alternatively, the transmitter could be incorporated into a body-mounted pack. In this way, the location and/or movement of the totem with respect to the head or body, respectively, of the user can be determined. This may be more useful information than if the transmitter were simply located at a fixed location (e.g., on a nearby table) because the location and/or movement of the totem can be determined in relation to the head or body of the user.</p><heading id="h-0014" level="2">Adjustment of Imagery Colors Based on Ambient Lighting</heading><p id="p-0197" num="0196">In some embodiments, the virtual and augmented reality systems described herein include one or more sensors (e.g., a camera) to detect the brightness and/or hue of the ambient lighting. Such sensors can be included, for example, in a display helmet of the virtual or augmented reality system. The sensed information regarding the ambient lighting can then be used to adjust the brightness or hue of generated pixels for virtual objects. For example, if the ambient lighting has a yellowish cast, computer-generated virtual objects can be altered to have yellowish color tones which more closely match those of the real objects in the room. Such pixel adjustments can be made at the time an image is rendered by the GPU. Alternatively, and/or additionally, such pixel adjustments can be made after rendering by using the control information discussed herein.</p><p id="p-0198" num="0197">For purposes of summarizing the disclosure, certain aspects, advantages and features of the invention have been described herein. It is to be understood that not necessarily all such advantages may be achieved in accordance with any particular embodiment of the invention. Thus, the invention may be embodied or carried out in a manner that achieves or optimizes one advantage or group of advantages as taught herein without necessarily achieving other advantages as may be taught or suggested herein.</p><p id="p-0199" num="0198">Embodiments have been described in connection with the accompanying drawings. However, it should be understood that the figures are not drawn to scale. Distances, angles, etc. are merely illustrative and do not necessarily bear an exact relationship to actual dimensions and layout of the devices illustrated. In addition, the foregoing embodiments have been described at a level of detail to allow one of ordinary skill in the art to make and use the devices, systems, methods, etc. described herein. A wide variety of variation is possible. Components, elements, and/or steps may be altered, added, removed, or rearranged.</p><p id="p-0200" num="0199">The devices and methods described herein can advantageously be at least partially implemented using, for example, computer software, hardware, firmware, or any combination of software, hardware, and firmware. Software modules can comprise computer executable code, stored in a computer's memory, for performing the functions described herein. In some embodiments, computer-executable code is executed by one or more general purpose computers. However, a skilled artisan will appreciate, in light of this disclosure, that any module that can be implemented using software to be executed on a general purpose computer can also be implemented using a different combination of hardware, software, or firmware. For example, such a module can be implemented completely in hardware using a combination of integrated circuits. Alternatively or additionally, such a module can be implemented completely or partially using specialized computers designed to perform the particular functions described herein rather than by general purpose computers. In addition, where methods are described that are, or could be, at least in part carried out by computer software, it should be understood that such methods can be provided on non-transitory computer-readable media (e.g., optical disks such as CDs or DVDs, hard disk drives, flash memories, diskettes, or the like) that, when read by a computer or other processing device, cause it to carry out the method.</p><p id="p-0201" num="0200">While certain embodiments have been explicitly described, other embodiments will become apparent to those of ordinary skill in the art based on this disclosure.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A virtual or augmented reality display system comprising:<claim-text>a first sensor configured to provide measurements of a user's head pose over time; and</claim-text><claim-text>a processor configured to estimate the user's head pose based on at least one head pose measurement and based on at least one calculated predicted head pose,</claim-text><claim-text>wherein the processor is configured to combine the head pose measurement and the predicted head pose using one or more gain factors, and</claim-text><claim-text>wherein the one or more gain factors vary based upon the user's head pose position within a physiological range of movement.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first sensor is configured to be head-mounted.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The system of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the first sensor comprises an inertial measurement unit.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the one or more gain factors emphasize the predicted head pose over the head pose measurement when the user's head pose is in a central portion of the physiological range of movement.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the one or more gain factors emphasize the predicted head pose over the head pose measurement when the user's head pose is nearer the middle of the physiological range of movement than a limit of the user's physiological range of movement.</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the one or more gain factors emphasize the head pose measurement over the predicted head pose when the user's head pose approaches a limit of the physiological range of movement.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the one or more gain factors emphasize the head pose measurement over the predicted head pose when the user's head pose is nearer a limit of the physiological range of movement than the middle of the physiological range of movement.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first sensor is configured to be head-mounted and further comprising a second sensor configured to be body-mounted, wherein the at least one head pose measurement is determined based on measurements from both the first sensor and the second sensor.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The system of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the head pose measurement is determined based on a difference between measurements from the first sensor and the second sensor.</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. A method of estimating head pose in a virtual or augmented reality display system, the method comprising:<claim-text>receiving measurements of a user's head pose over time from a first sensor; and</claim-text><claim-text>estimating, using a processor, the user's head pose based on at least one head pose measurement and based on at least one calculated predicted head pose,</claim-text><claim-text>wherein estimating the user's head pose comprises combining the head pose measurement and the predicted head pose using one or more gain factors, and</claim-text><claim-text>wherein the one or more gain factors vary based upon the user's head pose position within a physiological range of movement.</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, where the first sensor is configured to be head-mounted, the method further comprising:<claim-text>receiving body orientation measurements from a second sensor configured to be body-mounted; and</claim-text><claim-text>estimating the user's head pose based on the at least one head pose measurement and based on the at least one calculated predicted head pose,</claim-text><claim-text>wherein the at least one head pose measurement is determined based on measurements from both the first sensor and the second sensor.</claim-text></claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the one or more gain factors emphasize the predicted head pose over the head pose measurement when the user's head pose is in a central portion of the physiological range of movement.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the one or more gain factors emphasize the predicted head pose over the head pose measurement when the user's head pose is nearer the middle of the physiological range of movement than a limit of the user's physiological range of movement.</claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the one or more gain factors emphasize the head pose measurement over the predicted head pose when the user's head pose approaches a limit of the physiological range of movement.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the one or more gain factors emphasize the head pose measurement over the predicted head pose when the user's head pose is nearer a limit of the physiological range of movement than the middle of the physiological range of movement.</claim-text></claim></claims></us-patent-application>