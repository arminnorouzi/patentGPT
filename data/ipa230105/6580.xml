<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006581A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006581</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17824314</doc-number><date>20220525</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>JP</country><doc-number>2021-110537</doc-number><date>20210702</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>P</subclass><main-group>21</main-group><subgroup>00</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>P</subclass><main-group>21</main-group><subgroup>14</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>21</main-group><subgroup>0014</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>21</main-group><subgroup>14</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>27</main-group><subgroup>06</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">MOTOR CONTROL DEVICE</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>TOYOTA JIDOSHA KABUSHIKI KAISHA</orgname><address><city>Toyota-shi Aichi-ken</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Shimode</last-name><first-name>Kazumasa</first-name><address><city>Susono-shi Shizuoka-ken</city><country>JP</country></address></addressbook></inventor></inventors></us-parties><assignees><assignee><addressbook><orgname>TOYOTA JIDOSHA KABUSHIKI KAISHA</orgname><role>03</role><address><city>Toyota-shi Aichi-ken</city><country>JP</country></address></addressbook></assignee></assignees></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A motor control device includes a motor that generates torque corresponding to a current for energizing multi-phase coils, a current sensor that detects a current value of the current for energizing the multi-phase coils, and a controller that obtains a current value of a current flowing through a predetermined coil by adding an origin learning value to a signal input from the current sensor and that controls a current for energizing the predetermined coil based on the current value. The motor control device obtains, each time the origin learning value is changed by a predetermined value, an amplitude of a predetermined order in a q-axis current of the motor based on the changed origin learning value and the signal input from the current sensor, and performs correction based on the origin learning value at the time when the amplitude switches from a decreasing tendency to an increasing tendency.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="138.85mm" wi="149.44mm" file="US20230006581A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="217.85mm" wi="115.91mm" file="US20230006581A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="166.62mm" wi="151.47mm" file="US20230006581A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="228.52mm" wi="149.94mm" file="US20230006581A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="220.73mm" wi="148.00mm" file="US20230006581A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="93.98mm" wi="150.96mm" file="US20230006581A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATION</heading><p id="p-0002" num="0001">This application claims priority to Japanese Patent Application No. 2021-110537 filed on Jul. 2, 2021, incorporated herein by reference in its entirety.</p><heading id="h-0002" level="1">BACKGROUND</heading><heading id="h-0003" level="1">1. Technical Field</heading><p id="p-0003" num="0002">The present disclosure relates to a motor control device provided as a driving force source for a vehicle.</p><heading id="h-0004" level="1">2. Description of Related Art</heading><p id="p-0004" num="0003">A motor as a driving force source provided in a conventional electrified vehicle is driven when an alternating current (AC) voltage is applied from a power supply. The AC voltage is controlled by using the current value of each phase in the motor as a feedback value. A current sensor outputs a signal such as a voltage corresponding to the detected value to the controller. Thus, for example, the controller is configured to determine the current value of the current flowing through the current sensor with reference to the voltage value input to the controller when the current value of the current actually flowing is 0 A. That is, the signal (for example, the voltage value) output from the current sensor when the current flowing through the current sensor is 0 A is stored in the controller in advance as an offset value. Therefore, the controller controls the voltage applied to the motor by adding the offset value to the feedback value from the current sensor. Accordingly, when the offset value of the sensor that detects the current value of a predetermined phase changes due to some factor, the current value determined by the controller differs from the actual current value. In such a case, since the voltage applied to the predetermined phase is changed, the output torque of the motor may pulsate and vibration called motor noise may occur.</p><p id="p-0005" num="0004">Therefore, a control device described in Japanese Unexamined Patent Application Publication No. 2016-119817 (JP 2016-119817 A) is configured to correct the offset value described above. In the motor described in JP 2016-119817 A, the torque is controlled by controlling an inverter that is provided between the motor and the direct current (DC) power supply and that is composed of switch elements and diodes arranged in antiparallel. Therefore, when a switch element is stopped, no current flows in the phase connected to the DC power supply via the switch element. That is, the theoretical current value of the phase connected to the DC power supply via the stopped switch element is 0 A. Therefore, the control device described in JP 2016-119817 A is configured to detect with the current sensor the current value of the phase connected to the DC power supply via the stopped switch element at a timing when the vehicle is stopped or when the switch element is temporarily stopped while the vehicle is running, to store the detected current value as the offset value.</p><heading id="h-0005" level="1">SUMMARY</heading><p id="p-0006" num="0005">According to the control device described in JP 2016-119817 A, the detection value of the current sensor at the time when the current value theoretically becomes 0 A is stored as an offset value. However, the signal input from the current sensor to the controller includes noise from surrounding electrical equipment such as the current sensor and the circuit connecting the current sensor and the controller. In addition, variation occurs in the detected value depending on the temperature of the current sensor and the like. Therefore, it is difficult to make the offset value an accurate value, and the output torque of the motor may pulsate, resulting in motor noise.</p><p id="p-0007" num="0006">The present disclosure has been made by paying attention to the above technical problems, and an object of the present disclosure is to provide a motor control device capable of correcting an origin learning value for suppressing motor noise.</p><p id="p-0008" num="0007">In order to achieve the above object, the present disclosure provides a motor control device including a motor that includes multi-phase coils and that generates torque corresponding to a current for energizing the multi-phase coils, a current sensor that detects a current value of a current for energizing at least one predetermined coil of the multi-phase coils and that outputs a signal corresponding to the detected current value, and a controller that obtains a current value of a current flowing through the predetermined coil by adding an origin learning value to the signal input from the current sensor and that controls a current for energizing the predetermined coil based on the obtained current value. In the motor control device, the controller is configured to obtain, each time the origin learning value is changed by a predetermined value, an amplitude of a predetermined order in a q-axis current of the motor based on the changed origin learning value and the signal input from the current sensor, and correct the origin learning value based on the origin learning value at the time when the amplitude switches from a decreasing tendency to an increasing tendency.</p><p id="p-0009" num="0008">In the present disclosure, the predetermined order may include an electric first order.</p><p id="p-0010" num="0009">In the present disclosure, the motor may be provided in a tire wheel.</p><p id="p-0011" num="0010">The amplitude of the predetermined order may be obtained by performing a fast Fourier transform on the q-axis current.</p><p id="p-0012" num="0011">In the present disclosure, the motor may include a U-phase coil, a V-phase coil, and a W-phase coil, and a neutral point to which one terminal of each of the U-phase coil, the V-phase coil, and the W-phase coil is connected, and the current sensor may include a first current sensor that detects a current flowing through any one of the U-phase coil, the V-phase coil, and the W-phase coil, and a second current sensor that detects a current flowing through another one of the U-phase coil, the V-phase coil, and the W-phase coil.</p><p id="p-0013" num="0012">According to the present disclosure, the current value of the current actually flowing through the predetermined coil is obtained by adding the origin learning value to the current value detected by the current sensor. The origin learning value is changed by a predetermined value, and each time the origin learning value is changed in that way, the amplitude of a predetermined order in the q-axis current is obtained based on the changed origin learning value and the signal input from the current sensor. Then, the origin learning value is corrected based on the origin learning value at the time when the amplitude switches from a decreasing tendency to an increasing tendency. That is, the origin learning value at which the pulsation of the q-axis current becomes small is obtained to correct the origin learning value. By correcting the origin learning value in this way, it is possible to accurately correct the origin learning value without being affected by factors such as noise from peripheral devices or the temperature of the current sensors. As a result, the motor noise can be reduced, and eventually the vibration of the vehicle and the vehicle interior noise can be reduced.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0006" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0014" num="0013">Features, advantages, and technical and industrial significance of exemplary embodiments of the disclosure will be described below with reference to the accompanying drawings, in which like signs denote like elements, and wherein:</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a schematic diagram illustrating an example of a vehicle provided with a motor according to an embodiment of the present disclosure;</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is an electric circuit diagram illustrating an example of a configuration of a motor and an inverter;</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a flowchart illustrating a control example executed by a motor control device of the present disclosure;</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a diagram showing changes in an origin learning value and a fast Fourier transform (FFT) spectrum when the control example shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> is executed;</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a diagram showing the effect of reduction in pulsation of a q-axis current by correcting the origin learning value; and</p><p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a diagram showing the effect of reduction in vehicle cabin noise by correcting the origin learning value.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0007" level="1">DETAILED DESCRIPTION OF EMBODIMENTS</heading><p id="p-0021" num="0020">An example of a vehicle provided with a motor according to an embodiment of the present disclosure is schematically shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>. A vehicle <b>1</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref> is a so-called in-wheel motor vehicle in which a motor (M) <b>2</b> is provided in each tire wheel, and a case accommodating the motor <b>2</b> is held by a vehicle body via a knuckle or suspension (not shown). The motor according to the embodiment of the present disclosure may be a motor provided as a driving force source for the vehicle and may be a motor supported by the vehicle body via a mount.</p><p id="p-0022" num="0021">Similar to a motor provided as a driving force source for a conventional battery electric vehicle or a hybrid electric vehicle, the above motor <b>2</b> is a three-phase alternating current (AC) synchronous motor or an induction motor including multi-phase coils, and is configured to generate torque according to the current for energizing the coils. In the following description, a synchronous motor in which a permanent magnet is attached to a rotor will be described as an example.</p><p id="p-0023" num="0022">The motor <b>2</b> is configured to output drive torque by being supplied with electric power from a direct current (DC) power supply (BAT) <b>3</b> provided in the vehicle <b>1</b>. When regenerative torque is output from the motor <b>2</b> so as to reduce the rotation speed of the motor <b>2</b>, that is, when the motor <b>2</b> is made to be rotated, an induced voltage is generated in the motor <b>2</b>, and as a result, the DC power supply <b>3</b> can be charged. That is, the motor <b>2</b> is configured to function as a motor generator. In the following description, the DC power supply <b>3</b> is simply referred to as a power supply <b>3</b>.</p><p id="p-0024" num="0023">The vehicle <b>1</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref> includes an inverter (INV) <b>4</b> between each motor <b>2</b> and the power supply <b>3</b>. The inverter <b>4</b> converts the DC voltage output from the power supply <b>3</b> into an AC voltage to output the AC voltage to each motor <b>2</b>, and converts the AC induced voltage generated by each motor <b>2</b> into a DC voltage to output the DC voltage to the power supply <b>3</b>.</p><p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is an electric circuit diagram illustrating an example of a configuration of the motor <b>2</b> and the inverter <b>4</b>. As described above, since the motor <b>2</b> is a three-phase AC motor, the motor <b>2</b> includes a U-phase coil <b>2</b><i>u</i>, a V-phase coil <b>2</b><i>v</i>, and a W-phase coil <b>2</b><i>w</i>. In each coil <b>2</b><i>u</i>, <b>2</b><i>v</i>, <b>2</b><i>w</i>, one terminal is connected to a neutral point <b>5</b>, and the other terminal is connected to the inverter <b>4</b>.</p><p id="p-0026" num="0025">The inverter <b>4</b> shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref> is composed of an upper arm switch (element) <b>8</b> and a lower arm switch (element) <b>9</b> provided between a positive electrode bus <b>6</b> connected to the positive electrode terminal of the power supply <b>3</b> and a negative electrode bus <b>7</b> connected to the negative electrode terminal of the power supply <b>3</b>. The collectors that are the high potential side terminals of the upper arm switch <b>8</b> are connected to the positive electrode bus <b>6</b>. The emitters that are the low potential side terminals of the upper arm switch <b>8</b> are connected to the collectors that are the high potential side terminals of the lower arm switch <b>9</b>. The emitters that are the low potential side terminals of the lower arm switch <b>9</b> are connected to the negative electrode bus <b>7</b>. That is, the upper arm switch <b>8</b> and the lower arm switch <b>9</b> are connected in series.</p><p id="p-0027" num="0026">As described above, since the motor <b>2</b> is a three-phase AC motor, the upper arm switch <b>8</b> and the lower arm switch <b>9</b> are each composed of three switches. Specifically, the upper arm switch <b>8</b> is composed of a first switch Q<b>1</b> connected to the U-phase coil <b>2</b><i>u</i>, a third switch Q<b>3</b> connected to the V-phase coil <b>2</b><i>v</i>, and a fifth switch Q<b>5</b> connected to the W-phase coil <b>2</b><i>w</i>. The lower arm switch <b>9</b> is composed of a second switch Q<b>2</b> connected to the U-phase coil <b>2</b><i>u</i>, a fourth switch Q<b>4</b> connected to the V-phase coil <b>2</b><i>v</i>, and a sixth switch Q<b>6</b> connected to the W-phase coil <b>2</b><i>w. </i></p><p id="p-0028" num="0027">Each of these switches Q<b>1</b> to Q<b>6</b> is composed of a conventionally known insulated gate bipolar transistor (IGBT), and flywheel diodes D<b>1</b> to D<b>6</b> are connected to the IGBT in antiparallel. The switches Q<b>1</b> to Q<b>6</b> are not limited to IGBTs, and may be configured by other switch elements such as, for example, a metal-oxide film semiconductor field-effect transistor (MOSFET).</p><p id="p-0029" num="0028">One end of the U-phase coil <b>2</b><i>u </i>is connected to the connection point between the first switch Q<b>1</b> and the second switch Q<b>2</b>, one end of the V-phase coil <b>2</b><i>v </i>is connected to the connection point between the third switch Q<b>3</b> and the fourth switch Q<b>4</b>, and one end of the W-phase coil <b>2</b><i>w </i>is connected to the connection point between the fifth switch Q<b>5</b> and the sixth switch Q<b>6</b>.</p><p id="p-0030" num="0029">The power circuit described above is provided with current sensors <b>10</b><i>v</i>, <b>10</b><i>w </i>for detecting the current flowing through the V-phase coil <b>2</b><i>v </i>and the W-phase coil <b>2</b><i>w</i>. Since one terminal of each phase coil <b>2</b><i>u</i>, <b>2</b><i>v</i>, <b>2</b><i>w </i>is connected at the neutral point <b>5</b> as described above, the current flowing through the U-phase coil <b>2</b><i>u </i>can be obtained through calculation by detecting the current flowing through the V-phase coil <b>2</b><i>v </i>and the W-phase coil <b>2</b><i>w</i>. The current sensor <b>10</b><i>v </i>that detects the current flowing through the V-phase coil <b>2</b><i>v </i>corresponds to the &#x201c;first current sensor&#x201d; in the embodiment of the present disclosure, and the current sensor <b>10</b><i>w </i>that detects the current flowing through the W-phase coil <b>2</b><i>w </i>corresponds to the &#x201c;second current sensor&#x201d; in the embodiment of the present disclosure.</p><p id="p-0031" num="0030">The configuration is provided with an electronic control unit (hereinafter referred to as ECU) <b>11</b> to which signals are input from various sensors such as the above-mentioned current sensors <b>10</b><i>v</i>, <b>10</b><i>w</i>, a rotation speed sensor such as a resolver that detects the rotation speed of the motor <b>2</b>, an accelerator operation amount sensor that detects the operation amount of the accelerator pedal (not shown), and a brake sensor that detects the operation amount of the brake pedal, and from which a command signal is output to the motor <b>2</b> according to the signals and a map, an arithmetic expression, or the like stored in advance. The ECU <b>11</b> can be configured in the same manner as a conventionally known electronic control device, and is mainly composed of a microcomputer.</p><p id="p-0032" num="0031">The ECU <b>11</b> obtains the required driving force according to the accelerator operation amount detected by the accelerator operation amount sensor, or obtains the required braking force according to the brake operation amount detected by the brake sensor. Then, in order to output the torque corresponding to the required driving force and the required braking force from the motor <b>2</b>, the ECU <b>11</b> obtains the d-axis current and the q-axis current in the same manner as the conventionally known torque control of the motor, and controls the voltage applied to the U-phase coil <b>2</b><i>u</i>, the V-phase coil <b>2</b><i>v</i>, and the W-phase coil <b>2</b><i>w </i>based on the rotation angle of the motor <b>2</b> and the q-axis current. Specifically, the ECU <b>11</b> controls the on/off duty of each switch Q<b>1</b> to Q<b>6</b>.</p><p id="p-0033" num="0032">By controlling the switches Q<b>1</b> to Q<b>6</b> as described above, the current value of the current flowing through each phase coil <b>2</b><i>u</i>, <b>2</b><i>v</i>, <b>2</b><i>w </i>is detected by the current sensors <b>10</b><i>v</i>, <b>10</b><i>w</i>, and feedback of the difference between the detected values detected by the current sensors <b>10</b><i>v</i>, <b>10</b><i>w </i>and the target value is performed.</p><p id="p-0034" num="0033">The current sensors <b>10</b><i>v</i>, <b>10</b><i>w </i>are configured to output to the ECU <b>11</b> a signal (for example, voltage) corresponding to the current value of the current flowing through the current sensors <b>10</b><i>v</i>, <b>10</b><i>w</i>. Specifically, for example, when the current value of the current flowing through the current sensor <b>10</b><i>v </i>is 0 A, a predetermined voltage is output from the current sensor <b>10</b><i>v </i>to the ECU <b>11</b>. Further, as the current value of the current flowing through the current sensor <b>10</b><i>v </i>increases, a voltage having a magnitude obtained by adding a voltage that is a predetermined multiple of the increased amount to the above-mentioned predetermined voltage is input from the current sensor <b>10</b><i>v </i>to the ECU <b>11</b>. That is, the ECU <b>11</b> determines the current value of the current flowing through the current sensor <b>10</b><i>v </i>using the voltage value input from the current sensor <b>10</b><i>v </i>when the current value of the current flowing through the current sensor <b>10</b><i>v </i>is 0 A as a reference value. The current sensor <b>10</b><i>w </i>is also configured in the same manner. In the following description, the above reference value will be referred to as an origin learning value.</p><p id="p-0035" num="0034">Therefore, when the origin learning values of the current sensor <b>10</b><i>v </i>and the current sensor <b>10</b><i>w </i>change for some reason, the current value determined by the ECU <b>11</b> differs from the current value of the current actually flowing through the current sensors <b>10</b><i>v </i>and <b>10</b><i>w</i>. In such a case, in order that the current value of the current energized to the coil <b>2</b><i>v </i>(<b>2</b><i>w</i>) corresponding to the current sensor <b>10</b><i>v </i>(<b>10</b><i>w</i>) in which the origin learning value has changed follows the target value, the voltage value of the voltage applied to the coil <b>2</b><i>v </i>(<b>2</b><i>w</i>) is changed. Therefore, the current value of the current actually flowing through the coil corresponding to the sensor <b>10</b><i>v </i>(<b>10</b><i>w</i>) in which the origin learning value has changed differs from the target value, and the current value (peak value) of the current for energizing each of the three coils <b>2</b><i>u</i>, <b>2</b><i>v</i>, <b>2</b><i>w </i>will be different. As a result, since the q-axis current pulsates, the output torque of the motor <b>2</b> may pulsate and the vibration may be transmitted to the vehicle <b>1</b>.</p><p id="p-0036" num="0035">Therefore, the motor control device according to the embodiment of the present disclosure is configured to correct the origin learning value of the current sensor <b>10</b><i>v </i>and the current sensor <b>10</b><i>w </i>based on the vibration of the q-axis current. <figref idref="DRAWINGS">FIG. <b>3</b></figref> shows a flowchart illustrating the control example. The control example shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> is executed by the ECU <b>11</b>, and first, the origin learning value is acquired (step S<b>1</b>). In this step S<b>1</b>, the origin learning value stored in the ECU <b>11</b> may be read.</p><p id="p-0037" num="0036">Then, the motor rotation speed and the q-axis current are acquired (step S<b>2</b>). The motor rotation speed can be obtained based on the signal detected by the motor rotation speed sensor. Further, for the q-axis current, first, the detected values of the sensors <b>10</b><i>v</i>, <b>10</b><i>w </i>of each phase are stored in the ECU <b>11</b> for a predetermined period, and the above detected values are added to the origin learning value acquired in step S<b>1</b> to obtain the current value for a predetermined period. Subsequently, as is conventionally known, the transition of the q-axis current for a predetermined period is obtained from the current value of each phase and the motor rotation speed.</p><p id="p-0038" num="0037">Subsequently, the q-axis current obtained in step S<b>2</b> is subjected to a fast Fourier transform (FFT) to calculate an amplitude a of the electric first order (step S<b>3</b>). After that, only the origin learning value for the current sensor <b>10</b><i>v </i>is increased by a predetermined value a, and the same processing as in step S<b>2</b> and step S<b>3</b> is performed again to calculate an amplitude b of the electric first order (step S<b>4</b>). In step S<b>4</b>, after increasing the origin learning value, the rotation speed of the motor <b>2</b> and the detected values of the current sensors <b>10</b><i>v</i>, <b>10</b><i>w </i>may be acquired again to obtain the q-axis current, or the motor rotation speed and the detected values of the current sensors <b>10</b><i>v</i>, <b>10</b><i>w </i>acquired in step S<b>2</b> may be used to obtain the q-axis current.</p><p id="p-0039" num="0038">Then, it is determined whether the amplitude b obtained in step S<b>4</b> is larger than the amplitude a obtained in step S<b>3</b> (step S<b>5</b>). That is, it is determined whether the amplitude of the electric first order of the q-axis current is increased after the origin learning value is changed than before the origin learning value is changed. In other words, it is determined whether the origin learning value is changing in order to reduce the amount of deviation between the target value of the origin learning value and the origin learning value set at the present time to determine the actual current value.</p><p id="p-0040" num="0039">When the amplitude b obtained in step S<b>4</b> is smaller than the amplitude a obtained in step S<b>3</b> and it is determined as negative in step S<b>5</b>, it is considered that the origin learning value is changing toward the target value of the origin learning value. Therefore, only the origin learning value for the current sensor <b>10</b><i>v </i>is further increased by a predetermined value a, and the same processing as in step S<b>2</b> and step S<b>3</b> is performed again to calculate an amplitude c of the electric first order (step S<b>6</b>). Subsequently, it is determined whether the amplitude c obtained in step S<b>6</b> is larger than the amplitude b obtained in step S<b>4</b> (step S<b>7</b>).</p><p id="p-0041" num="0040">When it is determined as negative in step S<b>7</b> because the amplitude c obtained in step S<b>6</b> is smaller than the amplitude b obtained in step S<b>4</b>, the process returns to step S<b>6</b>. That is, the origin learning value is increased by a predetermined value a, the amplitude of the electric first order at the increased origin learning value is obtained, and the step of comparing the obtained amplitude of the electric first order with the amplitude of the electric first order at the origin learning value set immediately before is repeated until the amplitude of the electric first order at the origin learning value set immediately before increases (that is, until it is determined as positive in step S<b>7</b>). That is, the origin learning value is increased until the amplitude of the q-axis current switches from the decreasing tendency to the increasing tendency.</p><p id="p-0042" num="0041">When it is determined as positive in step S<b>7</b> due to the increase in the amplitude of the electric first order, the origin learning value set immediately before the amplitude of the electric first order increases is stored in the ECU <b>11</b> (step S<b>8</b>).</p><p id="p-0043" num="0042">On the other hand, when it is determined as positive in step S<b>5</b> because the amplitude b obtained in step S<b>4</b> is larger than the amplitude a obtained in step S<b>3</b>, the amplitude a obtained in step S<b>3</b> is reduced by a predetermined value a, and the same process as step S<b>3</b> is performed again to calculate an amplitude d of the electric first order (step S<b>9</b>). Subsequently, it is determined whether the amplitude d obtained in step S<b>9</b> is larger than the amplitude a obtained in step S<b>3</b> (step S<b>10</b>).</p><p id="p-0044" num="0043">When it is determined as negative in step S<b>10</b> because the amplitude d obtained in step S<b>9</b> is smaller than the amplitude a obtained in step S<b>3</b>, the process returns to step S<b>9</b>. That is, the origin learning value is decreased by a predetermined value a, the amplitude of the electric first order at the decreased origin learning value is obtained, and the step of comparing the obtained amplitude of the electric first order with the amplitude of the electric first order at the origin learning value set immediately before is repeated until the amplitude of the electric first order at the origin learning value set immediately before increases (that is, until it is determined as positive in step S<b>10</b>).</p><p id="p-0045" num="0044">When it is determined as positive in step S<b>10</b> due to the increase in the amplitude of the electric first order, the origin learning value set immediately before the amplitude of the electric first order increases is stored (learned) in the ECU <b>11</b> (step S<b>8</b>).</p><p id="p-0046" num="0045">After the origin learning value for the current sensor <b>10</b><i>v </i>is stored in the ECU <b>11</b> in step S<b>8</b>, the origin learning value for the current sensor <b>10</b><i>w </i>is learned and stored in the ECU <b>11</b> (step S<b>11</b>). In this step S<b>11</b>, the origin learning value for adding or subtracting the predetermined value a in steps S<b>4</b> to S<b>10</b> may be rewritten to the W phase to execute the same steps.</p><p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a diagram illustrating the relationship between the origin learning value and the FFT spectrum of the electric first order in the q-axis current when steps S<b>1</b> to S<b>8</b> are executed, and the origin learning value is shown on the horizontal axis and the FFT spectrum is shown on the vertical axis. In the example shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, when the motor <b>2</b> is driven at the origin learning value (initial value) acquired in step S<b>1</b>, the FFT spectrum obtained in step S<b>2</b> is a. From that state, by increasing the origin learning value by a predetermined value a, the FFT spectrum gradually decreases. Then, as a result of increasing the initial origin learning value by predetermined values a, the FFT spectrum increases at a predetermined origin learning value.</p><p id="p-0048" num="0047">Therefore, when the predetermined origin learning value increases, it is determined as positive in step S<b>7</b>. As a result, the origin learning value immediately before the FFT spectrum increases is stored in the ECU <b>11</b> in step S<b>8</b>.</p><p id="p-0049" num="0048"><figref idref="DRAWINGS">FIGS. <b>5</b> and <b>6</b></figref> are diagrams illustrating the effect when the origin learning value is corrected by executing the above control example. <figref idref="DRAWINGS">FIG. <b>5</b></figref> shows the vibration frequency on the horizontal axis and the FFT spectrum on the vertical axis. <figref idref="DRAWINGS">FIG. <b>6</b></figref> shows the vehicle speed on the horizontal axis and the vehicle interior noise of the electric first order on the vertical axis.</p><p id="p-0050" num="0049">As shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, when the vibration of the electric first order is significantly larger than the vibration of other orders and the origin learning value is corrected by executing the above control example (solid line), the FFT spectrum is lower than before the control example is executed and before the origin learning value is corrected (dashed line). This shows that the pulsation (amplitude) of the q-axis current is reduced, and as a result, the motor noise is reduced.</p><p id="p-0051" num="0050">Since the motor noise is reduced as described above, it can be understood from <figref idref="DRAWINGS">FIG. <b>6</b></figref> that the vehicle interior noise is reduced from the low vehicle speed range to the high vehicle speed range when the origin learning value is corrected by executing the above control example (solid line) than before the control example is executed and before the origin learning value is corrected (dashed line).</p><p id="p-0052" num="0051">As described above, by obtaining the origin learning value at which the pulsation of the q-axis current becomes small to correct the origin learning value, it is possible to accurately correct the origin learning value without being affected by factors such as noise from peripheral devices or the temperature of the current sensors. As a result, the motor noise can be reduced, and eventually the vibration of the vehicle and the vehicle interior noise can be reduced.</p><p id="p-0053" num="0052">In the embodiment of the present disclosure, the origin learning value is corrected based on the change in the amplitude of the electric first order in the q-axis current due to the change of the origin learning value. However, the origin learning value may be corrected based on the amplitude of the electric second order or other orders. Further, the motor is not limited to a motor provided with the three-phase coils, and may be a motor provided with coils of four or more phases. That is, it is only necessary that the motor control device according to the embodiment of the present disclosure is configured to obtain the amplitude of a predetermined order in the q-axis current each time the origin learning value is changed, and correct the origin learning value based on the origin learning value at the time when the amplitude switches from the decreasing tendency to the increasing tendency.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A motor control device including a motor that includes multi-phase coils and that generates torque corresponding to a current for energizing the multi-phase coils, a current sensor that detects a current value of a current for energizing at least one predetermined coil of the multi-phase coils and that outputs a signal corresponding to the detected current value, and a controller that obtains a current value of a current flowing through the predetermined coil by adding an origin learning value to the signal input from the current sensor and that controls a current for energizing the predetermined coil based on the obtained current value, wherein the controller is configured to<claim-text>obtain, each time the origin learning value is changed by a predetermined value, an amplitude of a predetermined order in a q-axis current of the motor based on the changed origin learning value and the signal input from the current sensor, and</claim-text><claim-text>correct the origin learning value based on the origin learning value at the time when the amplitude switches from a decreasing tendency to an increasing tendency.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The motor control device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the predetermined order includes an electric first order.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The motor control device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the motor is provided in a tire wheel.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The motor control device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the amplitude of the predetermined order is obtained by performing a fast Fourier transform on the q-axis current.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The motor control device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:<claim-text>the motor includes a U-phase coil, a V-phase coil, and a W-phase coil, and a neutral point to which one terminal of each of the U-phase coil, the V-phase coil, and the W-phase coil is connected; and</claim-text><claim-text>the current sensor includes a first current sensor that detects a current flowing through any one of the U-phase coil, the V-phase coil, and the W-phase coil, and a second current sensor that detects a current flowing through another one of the U-phase coil, the V-phase coil, and the W-phase coil.</claim-text></claim-text></claim></claims></us-patent-application>