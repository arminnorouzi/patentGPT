<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230003829A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230003829</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17783828</doc-number><date>20201223</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>CN</country><doc-number>202010251399.6</doc-number><date>20200401</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>S</subclass><main-group>5</main-group><subgroup>02</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20200501</date></cpc-version-indicator><section>G</section><class>01</class><subclass>S</subclass><main-group>5</main-group><subgroup>02216</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>S</subclass><main-group>5</main-group><subgroup>0215</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">METHOD AND DEVICE FOR DETERMINING ARRIVAL TIME, TERMINAL DEVICE, AND STORAGE MEDIUM</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>ZTE CORPORATION</orgname><address><city>Shenzhen</city><country>CN</country></address></addressbook><residence><country>CN</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>CHEN</last-name><first-name>Shijun</first-name><address><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>CHEN</last-name><first-name>Dawei</first-name><address><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>WANG</last-name><first-name>Yang</first-name><address><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor sequence="03" designation="us-only"><addressbook><last-name>LI</last-name><first-name>Junqiang</first-name><address><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor sequence="04" designation="us-only"><addressbook><last-name>CHEN</last-name><first-name>Qian</first-name><address><city>Shenzhen</city><country>CN</country></address></addressbook></inventor></inventors></us-parties><pct-or-regional-filing-data><document-id><country>WO</country><doc-number>PCT/CN2020/138464</doc-number><date>20201223</date></document-id><us-371c12-date><date>20220609</date></us-371c12-date></pct-or-regional-filing-data></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A method and device for determining a time of arrival (TOA), a terminal device, and a non-transitory computer-readable storage medium are disclosed. The method may include: determining a detection start time on a correlation waveform based on a leading edge detection threshold; determining a noise threshold on the correlation waveform, and determining a quasi-TOA according to the detection start time; and determining the TOA according to data information in a target area of the correlation waveform and the noise threshold, where the target area is determined based on the quasi-TOA and a detection length.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="76.96mm" wi="139.62mm" file="US20230003829A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="182.54mm" wi="158.75mm" file="US20230003829A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="236.39mm" wi="172.47mm" file="US20230003829A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="124.88mm" wi="170.52mm" file="US20230003829A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="236.90mm" wi="124.38mm" file="US20230003829A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="209.63mm" wi="171.11mm" file="US20230003829A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATION</heading><p id="p-0002" num="0001">This application is a national stage filing under 35 U. S.C. &#xa7; 371 of international application number PCT/CN2020/138464, filed Dec. 23, 2020, which claims priority to Chinese patent application No. 202010251399.6, filed on Apr. 1, 2020. The contents of these applications are incorporated herein by reference in their entirety.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">TECHNICAL FIELD</heading><p id="p-0003" num="0002">The present disclosure relates to the field of communications, for example, to a method and apparatus for determining a time of arrival, a terminal device and a non-transitory computer-readable storage medium.</p><heading id="h-0003" level="1">BACKGROUND</heading><p id="p-0004" num="0003">The 4th-generation (4G) and 5G wireless systems are orthogonal frequency division multiplexing (OFDM) systems, which are communication systems based on fast Fourier transform (FFT).</p><p id="p-0005" num="0004">Communication network positioning may be realized based on cell identifier (CID), received signal strength indicator (RSSI), time difference of arrival (TDOA), etc. High-precision positioning is usually realized by the TDOA method.</p><p id="p-0006" num="0005">However, the above methods cannot overcome the influence of noise in a complex multipath environment, and may introduce big errors, thus affecting positioning precision.</p><heading id="h-0004" level="1">SUMMARY</heading><p id="p-0007" num="0006">The present disclosure provides a method and apparatus for determining a time of arrival (TOA), a terminal device, and a non-transitory computer-readable storage medium.</p><p id="p-0008" num="0007">An embodiment of the present disclosure provides a method for determining a TOA, which may include: determining a detection start time on a correlation waveform based on a leading edge detection threshold; determining a noise threshold on the correlation waveform, and determining a quasi-TOA according to the detection start time; and determining the TOA according to data information in a target area of the correlation waveform and the noise threshold; where the target area is determined based on the quasi-TOA and a detection length.</p><p id="p-0009" num="0008">A further embodiment of the present disclosure provides an apparatus for determining a TOA, which may include: a detection start time determination module configured to determine a detection start time on a correlation waveform based on a leading edge detection threshold; a quasi-TOA determination module configured to determine a noise threshold on the correlation waveform, and determine a quasi-TOA according to the detection start time, the quasi-TOA being earlier than the detection start time; and a TOA determination module configured to determine the TOA according to data information in a target area of the correlation waveform and the noise threshold; where the target area is determined based on the quasi-TOA and a detection length.</p><p id="p-0010" num="0009">A further embodiment of the present disclosure provides a terminal device, which may include: at least one processor; and a storage apparatus, configured to store at least one program, where the at least one program, when executed by the at least one processor, causes the at least one processor to implement any of the methods according to the embodiments of the present disclosure.</p><p id="p-0011" num="0010">A further embodiment of the present disclosure provides a non-transitory computer-readable storage medium storing a computer program which, when executed by a processor, causes the processor to implement any of the methods according to the embodiments of the present disclosure.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a flowchart of a method for determining a time of arrival (TOA) provided by the present disclosure;</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>1</b><i>a </i></figref>is a schematic diagram provided by the present disclosure, showing an influence of noise on leading edge detection;</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a schematic diagram of an apparatus for determining a TOA provided by the present disclosure;</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>2</b><i>a </i></figref>is a schematic diagram of determining a detection threshold according to an embodiment of the present disclosure;</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>2</b><i>b </i></figref>is a schematic diagram of determining a TOA according to an embodiment of the present disclosure;</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>2</b><i>c </i></figref>is another schematic diagram of determining a TOA according to an embodiment of the present disclosure;</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>2</b><i>d </i></figref>is yet another schematic diagram of determining a TOA according to an embodiment of the present disclosure;</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>2</b><i>e </i></figref>is a schematic diagram of a correlation waveform provided by an embodiment of the present disclosure;</p><p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. <b>2</b><i>f </i></figref>is a schematic diagram of another correlation waveform provided by an embodiment of the present disclosure;</p><p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. <b>2</b><i>g </i></figref>is a schematic diagram of redetermining a detection start time according to an embodiment of the present disclosure; and</p><p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a schematic diagram of a terminal device provided by the present disclosure.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0006" level="1">DETAILED DESCRIPTION</heading><p id="p-0023" num="0022">The embodiments of the present disclosure will be described below with reference to the accompanying drawings.</p><p id="p-0024" num="0023">The steps shown in the flowcharts of the drawings may be performed in a computer system, such as with a set of computer-executable instructions. Moreover, although a logical order is shown in the flowcharts, the steps shown or described may be performed, in some cases, in a different order from the order shown or described herein.</p><p id="p-0025" num="0024">In an illustrative implementation, <figref idref="DRAWINGS">FIG. <b>1</b></figref> is a flowchart of a method for determining a time of arrival (TOA) provided by the present disclosure, which can be applied to TOA determination. The method may be executed by an apparatus for determining a TOA, which is integrated in a terminal device, and the terminal device may be a positioning terminal device, such as a terminal device which receives an orthogonal frequency division multiplexing (OFDM) signal sent by a base station and performs positioning.</p><p id="p-0026" num="0025">When an existing technology is used for measuring the TOA, after analog digital (AD) sampling at a receiver, synchronous channel detection is performed, and after a radio frame header is determined, cyclic prefix (CP) removal is performed on each symbol of each subframe, and then fast Fourier transform (FFT) is performed. After receiving AD data, performing synchronous channel detection, defining OFDM symbols, removing a CP, and then correlating a received signal with a local signal, the TOA is obtained by solving a correlation function.</p><p id="p-0027" num="0026">A time difference of arrival (TDOA) method based on a communication network includes: defining OFDM symbols after a frame header is determined, removing a fixed number of sampling points from a defined time point according to a CP length to obtain time-domain data of the OFDM symbols, then directly performing a mathematical sequence correlation operation, taking the first maximum correlation peaks as TOAs, obtaining TDOAs based on the TOAs, and then obtaining position information through calculation based on the TDOAs.</p><p id="p-0028" num="0027">In a complex multipath environment such as an indoor space and a dense urban area, noise and multiple paths will lead to very big errors. In a leading edge detection method, a threshold is usually set according to a noise level, based on which threshold a signal leading edge is found, and then an earliest TOA of a signal is measured. Due to the fluctuation of the actual noise level, when noise is loud at a certain moment during actual detection, the noise may be mistaken for a signal, resulting in significant errors in detection. <figref idref="DRAWINGS">FIG. <b>1</b><i>a </i></figref>is a schematic diagram of an influence of noise on leading edge detection provided by the present disclosure. As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref><i>a, </i>a noise detection threshold, namely detection threshold, is determined in one interval; however, as noise changes as a function of time, the noise level may be high over a certain time period in another interval, causing point a to be mistaken for a TOA measurement result, which should have been point b instead.</p><p id="p-0029" num="0028">In order to overcome an influence of actual noise on TOA measurement, the present disclosure proposes a method for determining a TOA to solve the technical problem of TOA measurement errors in a noisy environment. As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the present disclosure provides a method for determining a TOA, including the following steps.</p><p id="p-0030" num="0029">At S<b>110</b>, a detection start time on a correlation waveform is determined based on a leading edge detection threshold.</p><p id="p-0031" num="0030">The leading edge detection threshold may be considered as a threshold used for determining the detection start time. The way of determining the leading edge detection threshold is not specified here, and the threshold may be determined experimentally according to the actual situation or may be an empirical value. The correlation waveform may be considered as a waveform for determining the TOA. The correlation waveform may be determined based on a received orthogonal frequency division multiplexing (OFDM) signal and a local signal, where signal parameters for generating the local signal are the same as those for generating the OFDM signal. The detection start time may be considered as a start time point for detection in determination of the TOA.</p><p id="p-0032" num="0031">To determine the TOA, in this step, amplitudes of points on the correlation waveform may be compared with the leading edge detection threshold to determine the detection start time. For example, a time of a data point with an amplitude equal to the leading edge detection threshold is determined as the detection start time, or a time of a data point with an amplitude greater or smaller than the leading edge detection threshold by a preset value is determined as the detection start time. The preset value is not specified here and may be determined according to the actual situation.</p><p id="p-0033" num="0032">At S<b>120</b>, a noise threshold is determined on the correlation waveform, and a quasi-TOA is determined according to the detection start time.</p><p id="p-0034" num="0033">The noise threshold may be considered as a numerical value used for detecting a noise level. In this embodiment, determination of the detection start time and the noise threshold is not limited to a specific sequential order. The noise threshold may be determined based on an amplitude in a preset area on the correlation waveform. The preset area may be randomly determined, or may be a noise detection interval determined based on a maximum amplitude in the correlation waveform. The noise detection interval may be an interval on the correlation waveform determined based on time, a distance between a maximum time in the noise detection interval and a time corresponding to the maximum amplitude is greater than or equal to a predetermined distance, and a length of the noise detection interval is a predetermined length. Numerical values of the predetermined distance and the predetermined length are not specified here and may be determined according to the actual situation. When determining the noise threshold, an average value or a maximum value of amplitudes of various data points in the preset area may be determined as the noise threshold.</p><p id="p-0035" num="0034">The quasi-TOA may be considered as a preliminarily determined TOA. In this embodiment, it is necessary to analyze the correlation waveform before the quasi-TOA to determine the TOA.</p><p id="p-0036" num="0035">In this step, the quasi-TOA may be determined based on the detection start time, for example, a time earlier than the detection start time on the correlation waveform is determined as the quasi-TOA, or a time of a latest extreme point on the correlation waveform that is earlier than the detection start time is determined as the quasi-TOA. The first extreme point is a latest extreme point on the correlation waveform at a time earlier than the detection start time. For another example, a time of a latest extreme point on the correlation waveform at a time earlier than the detection start time and with an amplitude smaller than the noise threshold is determined as the quasi-TOA, that is, a time corresponding to a second extreme point is determined as the quasi-TOA. The second extreme point is a latest extreme point on the correlation waveform at a time earlier than the detection start time and with an amplitude smaller than the noise threshold.</p><p id="p-0037" num="0036">At S<b>130</b>, the TOA is determined according to data information in a target area of the correlation waveform and the noise threshold.</p><p id="p-0038" num="0037">The target area may be determined based on the quasi-TOA and a detection length. The target area may be considered as an area for determining whether to continue to detect the correlation waveform in a time decreasing direction. By analyzing the correlation waveform in the target area, the TOA is determined. The detection length may be considered as a length of the target area. The detection length may be 2-4 sampling periods. The data information may be considered as data on the correlation waveform, such as an amplitude change rate, amplitude and/or time of a data point on the correlation waveform.</p><p id="p-0039" num="0038">In an embodiment, in this step, the TOA may be determined by comparing an amplitude of a data point in the target area with the noise threshold; or in this step, the TOA may be determined by comparing the amplitude of the data point in the target area with the noise threshold and considering the amplitude change rate; or in this step, the TOA may be determined by comparing the amplitude of the data point in the target area with the noise threshold and considering whether a maximum data point is an extreme point, the maximum data point being a data point with a largest amplitude in the target area of the correlation waveform.</p><p id="p-0040" num="0039">For example, to determine the TOA, an OFDM symbol may be received first, then a correlation operation is performed on the OFDM symbol and a local signal to obtain the correlation waveform, and the leading edge detection threshold is used for determining the detection start time; and the latest extreme point smaller than the noise threshold is searched for backward from the detection start time, the time of the first extreme point is taken as the quasi-TOA, it is determined whether there is any data point exceeding the noise threshold in the target area before the quasi-TOA, and if so, a latest extreme point smaller than the noise threshold is further searched for backward and taken as a new quasi-TOA. If not, the quasi-TOA is determined as the TOA.</p><p id="p-0041" num="0040">The method for determining the TOA provided by the present disclosure includes: determining a detection start time on a correlation waveform based on a leading edge detection threshold; determining a noise threshold on the correlation waveform, and determining a quasi-TOA according to the detection start time; and determining the TOA according to data information in a target area of the correlation waveform and the noise threshold; where the target area is determined based on the quasi-TOA and a detection length. Using this method, errors of TOA measurement caused by noise are reduced, and the precision of TOA measurement is improved.</p><p id="p-0042" num="0041">On the basis of the foregoing embodiment, a modified embodiment of the foregoing embodiment is proposed. For simplified description, only differences from the foregoing embodiment are described in the modified embodiment.</p><p id="p-0043" num="0042">In an embodiment, determining a detection start time on a correlation waveform based on a leading edge detection threshold includes: identifying target data points having an amplitude equal to the leading edge detection threshold on the correlation waveform; and determining a minimum time in the identified target data points as the detection start time.</p><p id="p-0044" num="0043">The target data point may be considered as a data point with an amplitude equal to the leading edge detection threshold on the correlation waveform. After the target data points are identified, the minimum time may be selected from the identified target data points, and the minimum time may be determined as the detection start time.</p><p id="p-0045" num="0044">In an embodiment, determining a noise threshold on the correlation waveform includes: determining a maximum amplitude in the correlation waveform; determining a noise detection interval in the correlation waveform, the noise detection interval being an interval determined on the correlation waveform based on time, and a distance between a maximum time in the noise detection interval from a time corresponding to the maximum amplitude being greater than or equal to a predetermined distance, and a length of the noise detection interval is a predetermined length; and determining the noise threshold according to signal amplitudes of the noise detection interval.</p><p id="p-0046" num="0045">When determining the noise threshold, in order to improve the precision of noise threshold determination, a noise detection area may be determined based on the maximum amplitude in the correlation waveform, so that the noise threshold may be determined based on the noise detection interval.</p><p id="p-0047" num="0046">The noise detection interval may be a time interval on the correlation waveform. The distance between a right end point of the noise detection interval, that is, the maximum time in the noise detection interval from the time corresponding to the maximum amplitude may be greater than or equal to the predetermined distance, so as to ensure that the noise detection interval is far enough away from a highest point on the correlation waveform. The maximum amplitude may be considered as an amplitude of the highest point on the correlation waveform. The time corresponding to the maximum amplitude may be considered as a time corresponding to the highest point on the correlation waveform.</p><p id="p-0048" num="0047">After the noise detection interval is determined, the noise threshold may be determined based on the signal amplitudes of the correlation waveform in the noise detection interval, for example, an average value or a maximum value of the signal amplitudes of the correlation waveform in the noise detection interval is determined as the noise threshold.</p><p id="p-0049" num="0048">In an embodiment, the quasi-TOA is a time corresponding to a first extreme point on the correlation waveform, the first extreme point being a latest extreme point on the correlation waveform at a time earlier than the detection start time; or the quasi-TOA is a time corresponding to a second extreme point on the correlation waveform, the second extreme point being a latest extreme point on the correlation waveform at a time earlier than the detection start time and with an amplitude smaller than the noise threshold.</p><p id="p-0050" num="0049">In an embodiment, determining the TOA according to data information in a target area of the correlation waveform and the noise threshold includes: determining the data information in the target area of the correlation waveform, the data information including: at least one of the following attributes of a maximum data point: amplitude; amplitude change rate; or time, the maximum data point being a data point with a largest amplitude in the target area of the correlation waveform; determining the quasi-TOA as the TOA in response to the amplitude of the maximum data point being not greater than the noise threshold; and updating the quasi-TOA in response to the amplitude of the maximum data point being greater than the noise threshold, until there is no amplitude greater than the noise threshold in a target area corresponding to the updated quasi-TOA, and determining the updated quasi-TOA as the TOA.</p><p id="p-0051" num="0050">When determining the TOA, the data information may be correlation information of the maximum data point, such as at least one of amplitude, amplitude change rate or time.</p><p id="p-0052" num="0051">In response to the amplitude of the maximum data point being not greater than the noise threshold, it can be considered that there are no data points greater than the noise threshold in the target area, so the quasi-TOA can be determined as the TOA.</p><p id="p-0053" num="0052">In response to the amplitude of the maximum data point being greater than the noise threshold, it can be considered that there are data points greater than the noise threshold in the target area, and the correlation waveform may be continuously analyzed in the time decreasing direction to determine a new quasi-TOA, until there is no amplitude greater than the noise threshold in a new target area corresponding to the new quasi-TOA. In response to there being no amplitude greater than the noise threshold in the new target area corresponding to the new quasi-TOA, the new quasi-TOA is determined as the TOA.</p><p id="p-0054" num="0053">In an embodiment, updating the quasi-TOA includes: in response to the amplitude change rate at the maximum data point being negative, determining a target time on the correlation waveform as a new detection start time, the target time being a time corresponding to a third extreme point, and the third extreme point being a latest extreme point on the correlation waveform at a time earlier than the time corresponding to the maximum data point; in response to the amplitude change rate at the maximum data point being positive or the maximum data point being an extreme point, determining the time corresponding to the maximum data point as a new detection start time; and continuing to select the quasi-TOA to determine an updated quasi-TOA.</p><p id="p-0055" num="0054">In response to the amplitude of the maximum data point being greater than the noise threshold and the amplitude change rate at the maximum data point being negative, directly determining a time of a latest extreme point on the correlation waveform at a time earlier than the maximum data point as the new detection start time.</p><p id="p-0056" num="0055">In response to the amplitude of the maximum data point being greater than the noise threshold and the amplitude change rate at the maximum data point being positive or the maximum data point being an extreme point, determining the time corresponding to the maximum data point as the new detection start time.</p><p id="p-0057" num="0056">After determining the new detection start time, the new quasi-TOA is determined, that is, a corresponding new target area, so as to continue to determine the TOA, which can be regarded as returning to S<b>120</b>. There is no need to determine the noise threshold when returning to S<b>120</b>.</p><p id="p-0058" num="0057">In an embodiment, the target area is an interval extending from the quasi-TOA in a time decreasing direction and having a length equal to the detection length.</p><p id="p-0059" num="0058">The numerical value of the detection length is not specified here and may be set according to the actual situation, such as 2-4 sampling periods.</p><p id="p-0060" num="0059">The following is an illustrative description of the present disclosure. The method for determining the TOA provided by the present disclosure can be regarded as a leading edge detection-based TOA measurement method by first-path signal detection in a multipath environment, which can effectively solve the problem of high-precision first-path measurement in a complex wireless environment.</p><p id="p-0061" num="0060">In an example, the TOA measurement method based on leading edge detection provided by the present disclosure includes the following steps.</p><p id="p-0062" num="0061">At step <b>1</b>, an OFDM signal is received, symbol data containing a positioning signal are extracted, a mathematical correlation operation is performed on the positioning signal and a local signal to obtain a correlation function waveform, namely the correlation waveform, and normalization is performed according to a modulus.</p><p id="p-0063" num="0062">The received positioning signal may be a signal generated by a radio signal transmitting node, such as a base station, a positioning base station, etc., after encoding and modulating information such as a positioning signal identifier. As a receiver, a terminal device wirelessly receives the OFDM signal containing the positioning signal. The local signal can be considered as a signal generated by the terminal device locally using the same signal parameters as the radio signal transmitting node. Signal generation may be performed according to the <b>3</b>rd generation partnership project (3GPP) standard.</p><p id="p-0064" num="0063">At step <b>2</b>, after obtaining the correlation function waveform, a noise level is detected in an area far from a highest point of the correlation function waveform, and a noise threshold is determined as a second detection threshold, that is, the noise threshold; on the correlation function waveform, a leading edge threshold may be configured according to prior knowledge as a first detection threshold, that is, the leading edge detection threshold; and on the correlation function waveform, a detection interval T may be configured according to prior knowledge as a third detection threshold, that is, the target area.</p><p id="p-0065" num="0064">The area far from the highest point of the correlation function waveform can be considered as having a length of L, and a time difference between a rightmost time of the area and a time point corresponding to a highest amplitude point of the correlation function waveform exceeds the threshold <b>4</b>. The thresholds <b>4</b> and L may be set according to the environment. L may be an integer.</p><p id="p-0066" num="0065">Detecting the noise level can be considered as taking a maximum or average value of signal amplitudes in the area with the length L. <figref idref="DRAWINGS">FIG. <b>2</b><i>a </i></figref>is a schematic diagram of determining a detection threshold provided by an embodiment of the present disclosure. Referring to <figref idref="DRAWINGS">FIG. <b>2</b><i>a</i></figref>, the leading edge detection threshold is used for determining a start point of first leading edge detection, and the noise detection threshold, that is, the noise threshold, can be considered as a value of the detected noise level. The third detection threshold, that is, the area shown by the interval T in the figure, is an interval range used for determining whether subsequent detection is required, and is generally set to 2-4 sampling periods Ts.</p><p id="p-0067" num="0066">At step <b>3</b>, a minimum time point equal to the first detection threshold is searched for on the correlation waveform at the beginning and taken as an initial detection start point. A time point c corresponding to a lowest point of a correlation signal modulus is searched for backward on the correlation waveform from the detection start point.</p><p id="p-0068" num="0067">A technical means for determining the detection start time can be to search for a minimum time point equal to the first detection threshold on the correlation waveform and take the minimum time point as the detection start time. Point c in <figref idref="DRAWINGS">FIG. <b>2</b><i>a </i></figref>is an example of the time point corresponding to the lowest point of the correlation signal modulus searched for backward on the correlation waveform from the detection start point. This point c can be a time point corresponding to a latest extreme point found through backward search from the detection start time, or a time point corresponding to a latest extreme point smaller than the noise threshold found through backward search from the detection start time.</p><p id="p-0069" num="0068">The detection start time T<sub>start</sub>=MIN{i|r<sub>i</sub>&#x3e;=first detection threshold}, where r<sub>i </sub>is an i<sup>th </sup>data point on the correlation waveform. That is, the detection start time may be a smallest time point among data points greater than or equal to the first detection threshold. The time point corresponding to the extreme point of the backward search correlation signal modulus can be T<sub>min</sub>=MIN(T|&#x2200;i&#x2208;[T, T<sub>start</sub>], r<sub>i</sub>&#x3c;r<sub>i+1</sub>, T&#x3c;T<sub>start</sub>). That is, a minimum T is determined, and an amplitude between the minimum T and the detection start time keeps decreasing.</p><p id="p-0070" num="0069">At step <b>4</b>, it is determined whether a maximum point in an area defined backward from the point c by the third detection threshold, i.e. a maximum data point, is greater than a point of the second detection threshold. In response to a positive determination result and the amplitude change rate at the maximum point of the area being positive or the maximum point of the area being an extreme point, this point is taken as a new detection start point, that is, a new detection start time; in response to a positive determination result and the amplitude change rate at the maximum point of the area being negative, an extreme point is obtained through backward search and taken as a new detection start point; and in response to a negative determination result, a time corresponding to the point c is taken as a TOA measurement value of the signal.</p><p id="p-0071" num="0070">The maximum point in the area defined by the third detection threshold before the point c r<sub>MAX</sub>=MAX(r<sub>i</sub>|i&#x2208;[t<sub>c&#x2212;L</sub>, t<sub>c</sub>]), where a time point corresponding to r<sub>MAX </sub>is T<sub>MAX</sub>.</p><p id="p-0072" num="0071">In response to r<sub>MAX </sub>being greater than the second detection threshold and the amplitude change rate at the maximum point of the area being positive or the maximum point of the area being an extreme point, this point is taken as a new detection start point. <figref idref="DRAWINGS">FIG. <b>2</b><i>b </i></figref>is a schematic diagram of determining a TOA provided by an embodiment of the present disclosure. Referring to <figref idref="DRAWINGS">FIG. <b>2</b><i>b</i></figref>, the maximum point of the area is an extreme point, and the maximum point of the area will be used as the new detection start time, so as to continue to determine the quasi-TOA based on the new detection start time until the TOA is determined.</p><p id="p-0073" num="0072">In response to r<sub>MAX </sub>being greater than the second detection threshold and the amplitude change rate at the maximum point of the area being negative, an extreme point is obtained through backward search and taken as a new detection start point. <figref idref="DRAWINGS">FIG. <b>2</b><i>c </i></figref>is another schematic diagram of determining a TOA provided by an embodiment of the present disclosure. Referring to <figref idref="DRAWINGS">FIG. <b>2</b><i>c</i></figref>, the amplitude change rate at the maximum point of the area is negative, so it is necessary to search backward from the maximum point of the area, that is, the maximum data point, for a latest extreme point which is taken as a new detection start time, so as to continue to determine the quasi-TOA based on the new detection start time until the TOA is determined.</p><p id="p-0074" num="0073">In response to r<sub>MAX </sub>being smaller than or equal to the second detection threshold, a time corresponding to the point c is taken as a TOA measurement value of the signal. <figref idref="DRAWINGS">FIG. <b>2</b><i>d </i></figref>is yet another schematic diagram of determining a TOA provided by an embodiment of the present disclosure. Referring to <figref idref="DRAWINGS">FIG. <b>2</b><i>d</i></figref>, the maximum point of the area is smaller than or equal to the second detection threshold, and the point c is the TOA.</p><p id="p-0075" num="0074">In this example, the first detection threshold is used for determining the leading edge detection start time for the correlation waveform of the received signal, and the time point corresponding to the latest extreme value is searched for backward from the detection start time in the correlation waveform. In the area determined according to the third detection threshold before the extreme point in the correlation waveform, whether there are data points exceeding the second detection threshold is determined so as to determine whether to search backward. In response to the condition being not met, the time corresponding to the current extreme point is taken as the TOA, that is, there are no data points exceeding the second detection threshold when searching backward, and the time corresponding to the current extreme point is taken as the TOA. The method provided by this example reduces the errors of TOA measurement caused by noise, improves the communication function and positioning precision of a wireless system, and enhances the detection precision of a first path under the influence of multipath signals.</p><p id="p-0076" num="0075">In an example, the positioning signal transmitted by the base station may be a 3GPP positioning reference signal (PRS), a bandwidth BW=100 M, a physical cell ID (PCI) may be 1, and a sampling period Ts=8 ns; an oversampling factor may be 30; a first detection threshold Thr<b>1</b> is configured as 0.8 according to prior knowledge; a third detection threshold: T width is 150; and the terminal device receives the positioning signal and correlates the positioning signal with the local signal.</p><p id="p-0077" num="0076">(1) The terminal device receives the positioning signal and correlates the positioning signal with the local signal. <figref idref="DRAWINGS">FIG. <b>2</b><i>e </i></figref>is a schematic diagram of a correlation waveform provided by an embodiment of the present disclosure, and a normalized correlation waveform is shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref><i>e. </i></p><p id="p-0078" num="0077">(2) The first detection threshold Thr<b>1</b> is used for determining an initial detection time point, that is, the detection start time.</p><p id="p-0079" num="0078">(3) When the distance of the time point corresponding to the highest point of this group of correlation waveforms exceeds the threshold <b>4</b> (empirical value 5000) and an area length L=240000, an average noise value is obtained and taken as the second detection threshold Thr<b>2</b>.</p><p id="p-0080" num="0079">(4) From the initial detection start point, that is, the detection start time, a latest extreme point smaller than the second detection threshold Thr<b>2</b> is searched for backward to obtain the time point c.</p><p id="p-0081" num="0080">(5) It is determined that there is no point exceeding the second threshold in the area T before c.</p><p id="p-0082" num="0081">(6) The point c is the measured TOA of the signal.</p><p id="p-0083" num="0082">In an example, the positioning signal transmitted by the base station may be a 3GPP PRS signal, a bandwidth BW=100 M, PCI=1, and a sampling period Ts=8 ns; an oversampling factor may be 30; a first detection threshold Thr<b>1</b> is configured as 0.8 according to prior knowledge; a third detection threshold: T width is 150; and the terminal device receives the positioning signal and correlates the positioning signal with the local signal.</p><p id="p-0084" num="0083">(1) The terminal device receives the positioning signal and correlates the positioning signal with the local signal. <figref idref="DRAWINGS">FIG. <b>2</b><i>f </i></figref>is a schematic diagram of another correlation waveform provided by an embodiment of the present disclosure, and a normalized correlation waveform is shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref><i>f. </i></p><p id="p-0085" num="0084">(2) The first detection threshold Thr<b>1</b> is used for determining an initial detection time point.</p><p id="p-0086" num="0085">(3) When the distance of the time point corresponding to the highest point of this group of correlation waveforms exceeds the threshold <b>4</b> (empirical value 5000) and an area length L=240000, an average noise value is obtained and taken as the second detection threshold Thr<b>2</b>.</p><p id="p-0087" num="0086">(4) From the initial detection start point, a latest extreme point smaller than the second threshold Thr<b>2</b> is searched for backward to obtain the time point c.</p><p id="p-0088" num="0087">(5) It is determined that there are points exceeding the second threshold in the area T before c, the amplitude change rate at the maximum point is positive, and this maximum point is taken as a new detection start point. <figref idref="DRAWINGS">FIG. <b>2</b><i>g </i></figref>is a schematic diagram of redetermining a detection start time provided by an embodiment of the present disclosure. Referring to <figref idref="DRAWINGS">FIG. <b>2</b><i>g</i></figref>, the maximum point is determined as the new detection start time.</p><p id="p-0089" num="0088">(6) From the new detection start point, a latest extreme point smaller than the second detection threshold Thr<b>2</b> is searched for backward to obtain the time point c.</p><p id="p-0090" num="0089">(7) It is determined that there is no point exceeding the second detection threshold in the area T before c.</p><p id="p-0091" num="0090">(8) The point c is the measured TOA of the signal.</p><p id="p-0092" num="0091">The present disclosure further provides an apparatus for determining a TOA. <figref idref="DRAWINGS">FIG. <b>2</b></figref> is a schematic diagram of an apparatus for determining a TOA provided by the present disclosure. The apparatus for determining a TOA in the embodiment of the present disclosure may be integrated on a terminal device. As shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the apparatus includes: a detection start time determination module <b>21</b> configured to determine a detection start time on a correlation waveform based on a leading edge detection threshold; a quasi-TOA determination module <b>22</b> configured to determine a noise threshold on the correlation waveform, and determine a quasi-TOA according to the detection start time, the quasi-TOA being earlier than the detection start time; and a TOA determination module <b>23</b> configured to determine the TOA according to data information in a target area of the correlation waveform and the noise threshold; where the target area is determined based on the quasi-TOA and a detection length.</p><p id="p-0093" num="0092">The apparatus for determining a TOA provided in this embodiment is used for implementing the method for determining a TOA provided by the embodiments of the present disclosure. The implementation principles and technical effects of the apparatus for determining a TOA provided in this embodiment are similar to those of the method for determining a TOA provided by the embodiments of the present disclosure, and are not repeated here.</p><p id="p-0094" num="0093">On the basis of the foregoing embodiment, a modified embodiment of the foregoing embodiment is proposed. For simplified description, only differences from the foregoing embodiment are described in the modified embodiment.</p><p id="p-0095" num="0094">In an embodiment, the detection start time determination module <b>21</b> is specifically configured to: identify target data points having an amplitude equal to the leading edge detection threshold on the correlation waveform; and determine a minimum time in the identified target data points as the detection start time.</p><p id="p-0096" num="0095">In an embodiment, the quasi-TOA determination module <b>22</b> is specifically configured to: determine a maximum amplitude in the correlation waveform; determine a noise detection interval in the correlation waveform, the noise detection interval being an interval determined on the correlation waveform based on time, and a distance between a maximum time in the noise detection interval from a time corresponding to the maximum amplitude being greater than or equal to a predetermined distance, and a length of the noise detection interval is a predetermined length; and determine the noise threshold according to signal amplitudes of the noise detection interval.</p><p id="p-0097" num="0096">In an embodiment, the quasi-TOA is a time corresponding to a first extreme point on the correlation waveform, the first extreme point being a latest extreme point on the correlation waveform at a time earlier than the detection start time; or the quasi-TOA is a time corresponding to a second extreme point on the correlation waveform, the second extreme point being a latest extreme point on the correlation waveform at a time earlier than the detection start time and with an amplitude smaller than the noise threshold.</p><p id="p-0098" num="0097">In an embodiment, the TOA determination module <b>23</b> is specifically configured to: determine the data information in the target area of the correlation waveform, the data information including: at least one of the following attributes of a maximum data point: amplitude; amplitude change rate; or time, the maximum data point being a data point with a largest amplitude in the target area of the correlation waveform; determine the quasi-TOA as the TOA in response to the amplitude of the maximum data point being not greater than the noise threshold; and update the quasi-TOA in response to the amplitude of the maximum data point being greater than the noise threshold, until there is no amplitude greater than the noise threshold in a target area corresponding to the updated quasi-TOA, and determine the updated quasi-TOA as the TOA.</p><p id="p-0099" num="0098">In an embodiment, updating the quasi-TOA by the TOA determination module <b>23</b> includes: in response to the amplitude change rate at the maximum data point being negative, determining a target time on the correlation waveform as a new detection start time, the target time being a time corresponding to a third extreme point, and the third extreme point being a latest extreme point on the correlation waveform at a time earlier than the time corresponding to the maximum data point; in response to the amplitude change rate at the maximum data point being positive or the maximum data point being an extreme point, determining the time corresponding to the maximum data point as a new detection start time; and continuing to select the quasi-TOA to determine an updated quasi-TOA.</p><p id="p-0100" num="0099">In an embodiment, the target area is an interval extending from the quasi-TOA in a time decreasing direction and having a length equal to the detection length.</p><p id="p-0101" num="0100">A further embodiment of the present disclosure provides a terminal device. <figref idref="DRAWINGS">FIG. <b>3</b></figref> is a schematic diagram of a terminal device provided by the present disclosure. As shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the terminal device provided by the present disclosure includes at least one processor <b>31</b> and a storage apparatus <b>32</b>. The terminal device may be provided with one or more processors <b>31</b>, while one processor <b>31</b> is shown as an example in <figref idref="DRAWINGS">FIG. <b>3</b></figref>. The storage apparatus <b>32</b> is configured to store at least one program, where the at least one program, when executed by the at least one processor <b>31</b>, causes the at least one processor <b>31</b> to implement the method for determining time of arrival according to the embodiments of the present disclosure.</p><p id="p-0102" num="0101">The terminal device further includes: a communication apparatus <b>33</b>, an input apparatus <b>34</b> and an output apparatus <b>35</b>.</p><p id="p-0103" num="0102">The processor <b>31</b>, the storage apparatus <b>32</b>, the communication apparatus <b>33</b>, the input apparatus <b>34</b>, and the output apparatus <b>35</b> in the terminal device may be connected by a bus or other means. In <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the connection is realized by a bus.</p><p id="p-0104" num="0103">The input apparatus <b>34</b> may be configured to receive input digital or character information and generate key signal inputs related to user settings and function control of the terminal device. The output apparatus <b>35</b> may include a display device such as a display screen.</p><p id="p-0105" num="0104">The communication apparatus <b>33</b> may include a receiver and a transmitter. The communication apparatus <b>33</b> is configured to transmit and receive information according to control of the processor <b>31</b>.</p><p id="p-0106" num="0105">As a computer-readable storage medium, the storage apparatus <b>32</b> may be configured to store software programs, computer executable programs and modules, such as program instructions/modules corresponding to the method for determining a TOA described in the embodiments of the present disclosure (for example, the detection start time determination module <b>21</b>, the quasi-TOA determination module <b>22</b> and the TOA determination module <b>23</b> in the apparatus for determining a TOA). The storage apparatus <b>32</b> may include a storage program area and a storage data area, where the storage program area may store an operating system and application program(s) required by at least one function, and the storage data area may store data created according to the use of a terminal device, etc. In addition, the storage apparatus <b>32</b> may include a high-speed random access memory and a non-volatile memory, for example, at least one magnetic disk storage device, a flash memory device, or another non-volatile solid-state storage device. In some examples, the storage apparatus <b>32</b> may include memories remotely located with respect to the processor <b>31</b>, and these remote memories may be connected to terminal devices via a network. Examples of the above-mentioned network include the Internet, an intranet, a local area network, a mobile communication network, and a combination thereof.</p><p id="p-0107" num="0106">A further embodiment of the present disclosure provides a computer-readable storage medium storing a computer program which, when executed by a processor, causes the processor to implement the method for determining a TOA according to any of the embodiments of the present disclosure. The method includes: determining a detection start time on a correlation waveform based on a leading edge detection threshold; determining a noise threshold on the correlation waveform, and determining a quasi-TOA according to the detection start time; and determining the TOA according to data information in a target area of the correlation waveform and the noise threshold; where the target area is determined based on the quasi-TOA and a detection length.</p><p id="p-0108" num="0107">The computer storage medium of this embodiment may be any combination of one or more computer-readable media. The computer-readable medium may be a computer-readable signal medium or a computer-readable storage medium. For example, the computer-readable storage medium may be, but is not limited to, electrical, magnetic, optical, electromagnetic, infrared, or semiconductor system, an apparatus or a device, or any combination thereof. Examples of the computer-readable storage medium (a non-exhaustive list thereof) include: an electrical connection with one or more wires, a portable computer disk, a hard disk, a Random Access Memory (RAM), a Read-Only Memory (ROM), an erasable programmable read-only memory, EPROM), a flash memory, an optical fiber, a Compact Disc Read-Only Memory (CD-ROM), an optical storage device, a magnetic storage device or any proper combination thereof. The computer-readable storage medium may be any tangible medium including or storing a program, and the program may be used by or used in combination with an instruction execution system, apparatus or device.</p><p id="p-0109" num="0108">The computer-readable signal medium may include a data signal propagated in a baseband or propagated as a part of a carrier, and carries computer-readable program code. Such a propagated data signal may be in multiple forms, including but not limited to: an electromagnetic signal, an optical signal, or any proper combination thereof. The computer-readable signal medium may alternatively be any computer-readable storage medium other than the computer-readable medium. The computer-readable storage medium may send, propagate or transmit a program used by or used in combination with an instruction execution system, apparatus or device.</p><p id="p-0110" num="0109">The program code included in the computer-readable medium may be transmitted by any suitable medium, including but not limited to: radio, an electric cable, an optical-fiber cable, Radio Frequency (RF), or any proper combination thereof.</p><p id="p-0111" num="0110">Computer program code for executing the operations in the present disclosure may be compiled by using one or more program design languages or a combination thereof. The programming languages include object oriented programming languages, such as Java, Smalltalk, and C++, and conventional procedural programming languages, such as C or similar programming languages. The program code may be executed fully on a user computer, executed partially on a user computer, executed as an independent software package, executed partially on a user computer and partially on a remote computer, or executed fully on a remote computer or a server. In a circumstance in which a remote computer is involved, the remote computer may be connected to a user computer via any type of network, including a Local Area Network (LAN) or a Wide Area Network (WAN), or may be connected to an external computer (for example, connected via the Internet by using an Internet service provider).</p><p id="p-0112" num="0111">The term &#x201c;terminal device&#x201d; covers any suitable type of wireless user equipment, such as mobile phones, portable data processing equipment, portable web browsers or vehicle-mounted mobile stations.</p><p id="p-0113" num="0112">Generally speaking, various embodiments of the present disclosure may be implemented in hardware or dedicated circuits, software, logic or any combination thereof. For example, some aspects may be implemented in hardware, while other aspects may be implemented in firmware or software that may be executed by a controller, a microprocessor or another computing device. However, the present disclosure is not limited thereto.</p><p id="p-0114" num="0113">Embodiments of the present disclosure may be implemented by a data processor of a mobile device executing computer program instructions, for example, in a processor entity, or by hardware, or by a combination of software and hardware. The computer program instructions may be assembly instructions, Instruction Set Architecture (ISA) instructions, machine instructions, machine-related instructions, microcode, firmware instructions, state setting data or source code or object code written in any combination of one or more programming languages.</p><p id="p-0115" num="0114">The block diagram of any logic process in the drawings of the present disclosure may represent program steps, or may represent interconnected logic circuits, modules and functions, or may represent a combination of program steps and logic circuits, modules and functions. The computer program may be stored in a memory. The memory may be of any type that is suitable for a local technical environment and may be implemented using any suitable data storage technology, for example but not limited to, a read-only memory (ROM), a random-access memory (RAM), optical storage devices and systems (a digital versatile disk (DVD) or a compact disk (CD)). The computer-readable medium may include a non-transitory storage medium. The data processor may be any type suitable for the local technical environment, for example but not limited to, a general-purpose computer, a special-purpose computer, a microprocessor, a digital signal processor (DSP), an application-specific integrated circuit (ASIC), a field-programmable gate array (FPGA) and a processor based on a multi-core processor architecture.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method for determining a time of arrival (TOA), comprising:<claim-text>determining a detection start time on a correlation waveform based on a leading edge detection threshold;</claim-text><claim-text>determining a noise threshold on the correlation waveform, and determining a quasi-TOA according to the detection start time; and</claim-text><claim-text>determining the TOA according to data information in a target area of the correlation waveform and the noise threshold, wherein the target area is determined based on the quasi-TOA and a detection length.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein determining a detection start time on a correlation waveform based on a leading edge detection threshold comprises:<claim-text>identifying target data points having an amplitude equal to the leading edge detection threshold on the correlation waveform; and</claim-text><claim-text>determining a minimum time among times corresponding to the identified target data points as the detection start time.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein determining a noise threshold on the correlation waveform comprises:<claim-text>determining a maximum amplitude in the correlation waveform;</claim-text><claim-text>determining a noise detection interval in the correlation waveform, the noise detection interval being an interval determined on the correlation waveform based on time, and a distance between a maximum time in the noise detection interval from a time corresponding to the maximum amplitude being greater than or equal to a predetermined distance, and a length of the noise detection interval is a predetermined length; and</claim-text><claim-text>determining the noise threshold according to signal amplitudes of the noise detection interval.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the quasi-TOA is a time corresponding to a first extreme point on the correlation waveform, the first extreme point being a latest extreme point on the correlation waveform at a time earlier than the detection start time; or<claim-text>the quasi-TOA is a time corresponding to a second extreme point on the correlation waveform, the second extreme point being a latest extreme point on the correlation waveform at a time earlier than the detection start time and with an amplitude smaller than the noise threshold.</claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein determining the TOA according to data information in a target area of the correlation waveform and the noise threshold comprises:<claim-text>determining the data information in the target area of the correlation waveform, the data information comprising: at least one of the following attributes of a maximum data point: amplitude; amplitude change rate; or time, the maximum data point being a data point with a largest amplitude in the target area of the correlation waveform;</claim-text><claim-text>determining the quasi-TOA as the TOA in response to the amplitude of the maximum data point being not greater than the noise threshold; and</claim-text><claim-text>updating the quasi-TOA in response to the amplitude of the maximum data point being greater than the noise threshold, until no amplitude greater than the noise threshold exists in a target area corresponding to the updated quasi-TOA, and determining the updated quasi-TOA as the TOA.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein updating the quasi-TOA comprises:<claim-text>in response to the amplitude change rate at the maximum data point being negative, determining a target time on the correlation waveform as a new detection start time, the target time being a time corresponding to a third extreme point, and the third extreme point being a latest extreme point on the correlation waveform at a time earlier than the time corresponding to the maximum data point;</claim-text><claim-text>in response to the amplitude change rate at the maximum data point being positive or the maximum data point being an extreme point, determining the time corresponding to the maximum data point as a new detection start time; and</claim-text><claim-text>continuing to select the quasi-TOA to determine an updated quasi-TOA.</claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the target area is an interval extending from the quasi-TOA in a time decreasing direction and having a length equal to the detection length.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. An apparatus for determining a time of arrival (TOA), comprising:<claim-text>a detection start time determination module configured to determine a detection start time on a correlation waveform based on a leading edge detection threshold;</claim-text><claim-text>a quasi-TOA determination module configured to determine a noise threshold on the correlation waveform, and determine a quasi-TOA according to the detection start time, the quasi-TOA being earlier than the detection start time; and</claim-text><claim-text>a TOA determination module configured to determine the TOA according to data information in a target area of the correlation waveform and the noise threshold;<claim-text>wherein the target area is determined based on the quasi-TOA and a detection length.</claim-text></claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. A terminal device, comprising:<claim-text>at least one processor; and</claim-text><claim-text>a storage apparatus, configured to store at least one program, wherein<claim-text>the at least one program, when executed by the at least one processor, causes the at least one processor to implement [[the ]]a method for determining a time of arrival (TOA) comprising:<claim-text>determining a detection start time on a correlation waveform based on a leading edge detection threshold;</claim-text><claim-text>determining a noise threshold on the correlation waveform, and determining a quasi-TOA according to the detection start time; and</claim-text><claim-text>determining the TOA according to data information in a target area of the correlation waveform and the noise threshold,<claim-text>wherein the target area is determined based on the quasi-TOA and a detection length.</claim-text></claim-text></claim-text></claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. A non-transitory computer-readable storage medium storing a computer program which, when executed by a processor, causes the processor to implement the method for determining a time of arrival (TOA) of <claim-ref idref="CLM-00001">claim 1</claim-ref>.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. A non-transitory computer-readable storage medium storing a computer program which, when executed by a processor, causes the processor to implement the method for determining a time of arrival (TOA) of <claim-ref idref="CLM-00002">claim 2</claim-ref>.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. A non-transitory computer-readable storage medium storing a computer program which, when executed by a processor, causes the processor to implement the method for determining a time of arrival (TOA) of <claim-ref idref="CLM-00003">claim 3</claim-ref>.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. A non-transitory computer-readable storage medium storing a computer program which, when executed by a processor, causes the processor to implement the method for determining a time of arrival (TOA) of <claim-ref idref="CLM-00004">claim 4</claim-ref>.</claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. A non-transitory computer-readable storage medium storing a computer program which, when executed by a processor, causes the processor to implement the method for determining a time of arrival (TOA) of <claim-ref idref="CLM-00005">claim 5</claim-ref>.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. A non-transitory computer-readable storage medium storing a computer program which, when executed by a processor, causes the processor to implement the method for determining a time of arrival (TOA) of <claim-ref idref="CLM-00006">claim 6</claim-ref>.</claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. A non-transitory computer-readable storage medium storing a computer program which, when executed by a processor, causes the processor to implement the method for determining a time of arrival (TOA) of <claim-ref idref="CLM-00007">claim 7</claim-ref>.</claim-text></claim></claims></us-patent-application>