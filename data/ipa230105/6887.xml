<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006888A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006888</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17780078</doc-number><date>20191128</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>L</subclass><main-group>41</main-group><subgroup>122</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>L</subclass><main-group>41</main-group><subgroup>0895</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>L</subclass><main-group>41</main-group><subgroup>082</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20220501</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>41</main-group><subgroup>122</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20220501</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>41</main-group><subgroup>0895</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>41</main-group><subgroup>082</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">Migration to Indirect Communication Mode in a Service-Based Architecture</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only"><addressbook><orgname>Telefonaktiebolaget LM Ericsson (publ)</orgname><address><city>Stockholm</city><country>SE</country></address></addressbook><residence><country>SE</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Turina</last-name><first-name>Klaus</first-name><address><city>Herzogenrath</city><country>DE</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Kleinfeld</last-name><first-name>Volker</first-name><address><city>Aachen</city><country>DE</country></address></addressbook></inventor></inventors></us-parties><pct-or-regional-filing-data><document-id><country>WO</country><doc-number>PCT/EP2019/082973</doc-number><date>20191128</date></document-id><us-371c12-date><date>20220526</date></us-371c12-date></pct-or-regional-filing-data></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">There is provided a method of operating a Service Communication Proxy, SCP, node (<b>608, 1000</b>) in a communication network as a proxy network repository function, NRF, for a first network function, NF, producer node in the communication network. The first NF producer node (<b>602, 1100</b>) is to migrate from a direct communication mode with a first NF consumer node (<b>606</b>) to an indirect communication mode with the first NF consumer node (<b>606</b>) via the SCP node (<b>608, 1000</b>). The SCP node (<b>608, 1000</b>) discovers a NF profile for the first NF producer node (<b>602, 1100</b>), wherein the NF profile for the first NF producer node (<b>602, 1100</b>) is stored by a first network repository function, NRF, node (604) in the communication network, and the NF profile comprises a service address for the first NF producer node (<b>602, 1100</b>); receives a registration request from the first NF producer node (<b>602, 1100</b>), wherein the registration request is a request to register a NF profile for the first NF producer node (<b>602, 1100</b>) at a NRF node (<b>604</b>), wherein the registration request indicates the service address for the first NF producer node (<b>602, 1100</b>); and, in response to the received registration request, sends an update request to the first NRF node (<b>604</b>) to update the NF profile for the first NF producer node (<b>602, 1100</b>) stored by the first NRF node (<b>604</b>) to replace the service address of the first NF producer node (<b>602, 1100</b>) with a first service address of the SCP node (<b>608, 1000</b>) that is associated with the service address of the first NF producer node (<b>602, 1100</b>).</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="124.04mm" wi="158.75mm" file="US20230006888A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="228.60mm" wi="151.47mm" orientation="landscape" file="US20230006888A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="186.69mm" wi="156.89mm" orientation="landscape" file="US20230006888A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="205.91mm" wi="132.59mm" file="US20230006888A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="200.07mm" wi="147.40mm" file="US20230006888A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="231.82mm" wi="152.82mm" file="US20230006888A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="219.63mm" wi="147.83mm" file="US20230006888A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="239.78mm" wi="152.91mm" file="US20230006888A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="211.58mm" wi="69.09mm" file="US20230006888A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="214.12mm" wi="141.05mm" file="US20230006888A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">TECHNICAL FIELD</heading><p id="p-0002" num="0001">Embodiments described herein relate to a service-based architecture in a core network of a communication network, and in particular to methods and apparatus for migrating from a direct communication mode to an indirect communication mode.</p><heading id="h-0002" level="1">BACKGROUND</heading><p id="p-0003" num="0002">The 3<sup>rd </sup>Generation Partnership Project (3GPP) is currently standardising and enhancing the 5G Core (5GC) network as part of the overall 5G System architecture. Prior to 3GPP Release 15 (Rel-15), the functional distribution within the core network (CN) was based on Network Elements exchanging messages over point to point interfaces. With 3GPP Rel-15 5GC, to facilitate cloud native implementations and deployments, a Service-Based Architecture (SBA) has been introduced, based on the concept of Network Functions (NF) offering and consuming NF Services over Service Based Interfaces (SBIs). A dynamic service-based Network Function (NF) interaction with other network functions can be characterised by:<ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0000">    <ul id="ul0002" list-style="none">        <li id="ul0002-0001" num="0003">The NF registers in a Network Repository Function (NRF) the list of services provided or offered by the NF.</li>        <li id="ul0002-0002" num="0004">Other NFs can discover the NF services using the NRF and select a specific instance of the NF.</li>        <li id="ul0002-0003" num="0005">The NFs consume NF services of the selected NF instance.</li>    </ul>    </li></ul></p><p id="p-0004" num="0006"><figref idref="DRAWINGS">FIG. <b>1</b></figref> illustrates the 5G system reference architecture <b>101</b> showing service-based interfaces used within the Control Plane (CP). It will be appreciated that not all NFs are depicted. Service-based interfaces are represented in the format Nxyz and point to point interfaces in the format Nx. The reference architecture <b>101</b> comprises a Network Slice Selection Function (NSSF) <b>102</b> that has a Nnssf interface, a Network Exposure Function (NEF) <b>103</b> that has a Nnef interface, a NRF <b>104</b> that has a Nnrf interface, a Policy Control Function (PCF) <b>105</b> that has a Npcf interface, a Unified Data Management (UDM) <b>106</b> that has a Nudm interface, an Application Function (AF) <b>107</b> that has a Naf interface, an Authentication Server Function (AUF) <b>108</b> that has a Nausf interface, an Access and Mobility Management Function (AMF) <b>109</b> that has a Namf interface, a Session Management Function (SMF) <b>110</b> that has a Nsmf interface and a Network Data Analytics Function (NWDAF) <b>116</b> that has a Nnwdaf interface.</p><p id="p-0005" num="0007">The NRF <b>104</b> is a key NF within the 5GC SBA Framework that provides registration and discovery capabilities among the different NFs within the 5GC. In short, when a given NF (e.g. UDM type) registers a NF profile in the NRF <b>104</b>, other NFs may discover it automatically by simply querying the NRF <b>104</b> to find NFs of a given type (e.g. UDM type).</p><p id="p-0006" num="0008">The AMF <b>109</b> has an N1 interface to a user equipment (UE) <b>112</b>, and an N2 interface to an access network (AN) <b>113</b> (which can be a radio AN, RAN). The SMF <b>110</b> has an N4 interface to a User Plane Function (UPF) <b>114</b>. The interface between the R(AN) <b>113</b> and the UPF <b>114</b> is the N3 interface, and the interface between the UPF <b>114</b> and a Data Network <b>115</b> is the N6 interface.</p><p id="p-0007" num="0009">The 5G Service Based Architecture (SBA) in 3GPP Rel-15 supports a communication model where Service Consumer and Service Producers are, on an application communication layer, directly connected to each other. This is referred to as direct communication. In this direct communication model, two modes exist. Mode A where Consumers statically know about the Producer instances and Mode B where the Consumers dynamically make use of a NRF to determine the available Producer Instances and their individual attributes contained in their NF profiles (nfProfiles). The latter is the more flexible and less OPEX intense mode and is therefore expected to be primarily used in 3GPP Rel-15 SBA network deployments. The different direct communication modes A and B are depicted in the top part of <figref idref="DRAWINGS">FIG. <b>2</b></figref>.</p><p id="p-0008" num="0010">As part of the work in 3GPP Release 16 (Rel-16) to enhance Service Based Architecture (eSBA) the service based communication model is enhanced with modes where a Service Consumer and a Service Producer communicate via an intermediary function. This intermediary is called a Service Communication Proxy (SCP). This communication mode is named &#x2018;indirect communication mode&#x2019;. The SCP is intended to offload consumers by some non-consumer business logic tasks that are common to multiple consumers, such as final producer instance selection, load balancing, re-routing, etc. There are two modes of indirect communication defined in 3GPP Rel-16, which are denoted mode C and mode D. These modes are shown in the bottom part of <figref idref="DRAWINGS">FIG. <b>2</b></figref>.</p><p id="p-0009" num="0011">In Mode C the Consumer remains, like in direct communication mode B, in charge of discovering the producer instances via NRF. Thus this mode has the advantage of being compatible for Service Consumers that are compliant to mode B, but it leaves the Consumers with the burden to filter and select among all the potential Producers that could be suitable for serving a request. Primarily due to its compatibility with mode B, it is expected that mode C will be quickly adopted in 5G Core networks. The mode D of indirect communication goes one step further and relieves the Service Consumers of the need to interrogate the NRF and perform Service Producer instance discovery and selection. As these discovery, filtering and selection tasks are not in the core function of the Consumers they are delegated to the SCP&#x2014;with an expectation to unify and simplify them across the network. That is why mode D is also referred to as &#x2018;indirect communication with delegated discovery&#x2019;, in contrast to mode C which is called the &#x2018;indirect communication without delegated discovery&#x2019;. Mode D however requires modifications to Consumer behaviour and enhanced procedures between the Consumer and SCP. Therefore, this is likely to be adopted in later phases of 5G Core deployments.</p><p id="p-0010" num="0012">When evolving a 5G Core Network from direct communication mode B to an indirect communication mode the SCP acts on behalf of the Producer towards Consumers and the NRF (e.g. see 3GPP 23.501 v 16.1, Annex G.3). To place itself as proxy in the communication path the SCP performs address modification on the nfProfile so that Consumers will contact the SCP proxy addresses instead of communicating directly with Service Producers. In order to do this the SCP will need to act as a NRF to the Producer and thus the Producer must change the NRF address from the &#x2018;real&#x2019; NRF to the SCP as a NRF proxy.</p><p id="p-0011" num="0013"><figref idref="DRAWINGS">FIG. <b>3</b></figref> visualises the migration from direct communication mode B (in the top part of <figref idref="DRAWINGS">FIG. <b>3</b></figref> where the Consumer and Producer both communicate with the NRF) to an indirect communication mode in 3GPP service-based communication (the bottom part of <figref idref="DRAWINGS">FIG. <b>3</b></figref> where the communications between the Consumer and the Producer are via the SCP and where the SCP acts as a proxy for the Consumer and the Producer to the NRF.</p><heading id="h-0003" level="1">SUMMARY</heading><p id="p-0012" num="0014">An analysis of the behaviour of NF Producers shows that when changing the NRF address the Producer will de-register its nfProfile in the old NRF, and shortly after it will register the nfProfile again in the new NRF. That means for service consumers all services offered by the producers will become unavailable before they are registered again via the SCP. If Consumers have subscribed to nfStatus updates in the NRF they will at deregistration immediately be notified of the de-registration event of the Producer services. This will lead to service impacts due to Consumers being forced to perform a Producer re-selection or even release contexts.</p><p id="p-0013" num="0015">The techniques described herein propose a modified procedure for the migration to an indirect communication mode. In some embodiments, on the Producer side the behaviour can be changed in a way that when changing the NRF address it is possible to either skip sending the de-registration request to the old NRF, or, if this is not possible, to send the de-registration request to the old NRF via the SCP as proxy. In any case the Producer sends a registration to the new NRF via the SCP as a proxy.</p><p id="p-0014" num="0016">An important part of the disclosed techniques is on the SCP side in handling the Producer registration. In some embodiments, as a first step the SCP can be enhanced in a way that it discovers all nfProfiles of the Producer (this can either be for multiple nfTypes or one nfType only). This must be done before the registration of the Producer via the SCP can be handled. So, when the Producer is reconfigured, and the SCP receives a nfRegister request, the SCP can determine whether this Producer nfInstance is already known in the NRF. If so, the SCP modifies the nfRegister to a nfUpdate when sending it to the NRF. Thus, the NRF will get updated information about the service addresses in an existing nfProfile for the Producer instead of registering a new nfProfile for the Producer. The updated service addresses can be communicated to all Consumers as in Rel-15.</p><p id="p-0015" num="0017">In addition, in certain embodiments, the SCP can be prepared for a Producer be unable to skip sending a de-registration request to the old NRF when the NRF address is changed (see the paragraph above). To prevent the temporary de-registration impacting the service, the SCP answers the de-registration request with a &#x2018;success&#x2019; without propagating the de-registration request to the NRF. In certain embodiments, the SCP can differentiate this case from &#x2018;normal&#x2019; de-registration which should be propagated to the NRF. This can be done in multiple ways for example by an &#x2018;NRF-change indicator&#x2019; in the de-registration request message, by a configuration in the SCP, or by having a time-window monitored by the SCP so it delays the de-registration request to see if the same instance is re-registered immediately, etc.</p><p id="p-0016" num="0018">According to a first aspect, there is provided a method of operating a Service Communication Proxy, SCP, node in a communication network as a proxy network repository function, NRF, for a first network function, NF, producer node in the communication network, wherein the first NF producer node is to migrate from a direct communication mode with a first NF consumer node to an indirect communication mode with the first NF consumer node via the SCP node <b>608</b>. The method in the SCP node comprises: discovering a NF profile for the first NF producer node, wherein the NF profile for the first NF producer node is stored by a first network repository function, NRF, node in the communication network, and the NF profile comprises a service address for the first NF producer node; receiving a registration request from the first NF producer node, wherein the registration request is a request to register a NF profile for the first NF producer node at a NRF node, wherein the registration request indicates the service address for the first NF producer node; and, in response to the received registration request, sending an update request to the first NRF node to update the NF profile for the first NF producer node stored by the first NRF node to replace the service address of the first NF producer node with a first service address of the SCP node that is associated with the service address of the first NF producer node.</p><p id="p-0017" num="0019">According to a second aspect, there is provided a method of operating a first network function, NF, producer node in a communication network, wherein the first NF producer node is to migrate from a direct communication mode with a first NF consumer node to an indirect communication mode with the first NF consumer node via a Service Communication Proxy, SCP, node in the communication network. The method in the first NF producer node comprises: updating a stored service address for a network repository function, NRF, node in the communication network to a service address of the SCP node, wherein the NRF node is storing a NF profile for the first NF producer node; and sending a registration request the SCP node, wherein the registration request is a request to register a NF profile for the first NF producer node at the SCP node.</p><p id="p-0018" num="0020">According to a third aspect, there is provided a computer program product comprising a computer readable medium having computer readable code embodied therein, the computer readable code being configured such that, on execution by a suitable computer or one or more processing units, the computer or one or more processing units is caused to perform the method according to the first or second aspects.</p><p id="p-0019" num="0021">According to a fourth aspect, there is provided a Service Communication Proxy, SCP, node for use in a communication network as a proxy network repository function, NRF, for a first network function, NF, producer node in the communication network. The first NF producer node is to migrate from a direct communication mode with a first NF consumer node to an indirect communication mode with the first NF consumer node via the SCP node <b>608</b>. The SCP node is configured to: discover a NF profile for the first NF producer node, wherein the NF profile for the first NF producer node is stored by a first network repository function, NRF, node in the communication network, and the NF profile comprises a service address for the first NF producer node; receive a registration request from the first NF producer node, wherein the registration request is a request to register a NF profile for the first NF producer node at a NRF node, wherein the registration request indicates the service address for the first NF producer node; and, in response to the received registration request, send an update request to the first NRF node to update the NF profile for the first NF producer node stored by the first NRF node to replace the service address of the first NF producer node with a first service address of the SCP node that is associated with the service address of the first NF producer node.</p><p id="p-0020" num="0022">According to a fifth aspect, there is provided a first network function, NF, producer node for use in a communication network. The first NF producer node is to migrate from a direct communication mode with a first NF consumer node to an indirect communication mode with the first NF consumer node via a Service Communication Proxy, SCP, node in the communication network. The first NF producer node is configured to: update a stored service address fora network repository function, NRF, node in the communication network to a service address of the SCP node, wherein the NRF node is storing a NF profile for the first NF producer node; and send a registration request the SCP node, wherein the registration request is a request to register a NF profile for the first NF producer node at the SCP node.</p><p id="p-0021" num="0023">According to a sixth aspect, there is provided a Service Communication Proxy, SCP, node for use in a communication network as a proxy network repository function, NRF, for a first network function, NF, producer node in the communication network. The first NF producer node is to migrate from a direct communication mode with a first NF consumer node to an indirect communication mode with the first NF consumer node via the SCP node <b>608</b>. The SCP node comprises processing circuitry and a memory, said memory containing instructions executable by said processing circuitry, whereby said SCP node is operative to: discover a NF profile for the first NF producer node, wherein the NF profile for the first NF producer node is stored by a first network repository function, NRF, node in the communication network, and the NF profile comprises a service address for the first NF producer node; receive a registration request from the first NF producer node, wherein the registration request is a request to register a NF profile for the first NF producer node at a NRF node, wherein the registration request indicates the service address for the first NF producer node; and, in response to the received registration request, send an update request to the first NRF node to update the NF profile for the first NF producer node stored by the first NRF node to replace the service address of the first NF producer node with a first service address of the SCP node that is associated with the service address of the first NF producer node.</p><p id="p-0022" num="0024">According to a seventh aspect, there is provided a first network function, NF, producer node for use in a communication network. The first NF producer node is to migrate from a direct communication mode with a first NF consumer node to an indirect communication mode with the first NF consumer node via a Service Communication Proxy, SCP, node in the communication network. The first NF producer node comprises processing circuitry and a memory, said memory containing instructions executable by said processing circuitry whereby said first NF producer node is operative to: update a stored service address for a network repository function, NRF, node in the communication network to a service address of the SCP node, wherein the NRF node is storing a NF profile for the first NF producer node; and send a registration request the SCP node, wherein the registration request is a request to register a NF profile for the first NF producer node at the SCP node.</p><p id="p-0023" num="0025">Embodiments of the disclosed techniques provide that service Consumers will not experience service impacts due to a change from a direct communication mode to an indirect communication mode. Essentially, this is because the sequence of events in the NRF changes from the current &#x2018;de-register nfProfile with old service addresses&#x2019; and &#x2018;re-register nfProfile with new service addresses&#x2019; to the new &#x2018;update existing nfProfile with new service addresses&#x2019;. Using these techniques means that the temporary &#x2018;disappearance&#x2019; of the Producer service in the NRF, with its negative impacts on Consumers, is avoided.</p><p id="p-0024" num="0026">As a consequence, the migration from a direct communication mode to an indirect communication mode in a Service-Based Architecture can be managed without impacting ongoing end user services.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0025" num="0027">For a better understanding of the embodiments of the present disclosure, and to show how it may be put into effect, reference will now be made, by way of example only, to the accompanying drawings, in which:</p><p id="p-0026" num="0028"><figref idref="DRAWINGS">FIG. <b>1</b></figref> illustrates the 5G System reference architecture showing service-based interfaces used within the Control Plane;</p><p id="p-0027" num="0029"><figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates options for direct communication modes and indirect communication modes;</p><p id="p-0028" num="0030"><figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates migration from direct communication mode B to an indirect communication mode;</p><p id="p-0029" num="0031"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a signalling diagram illustrating the registration of an SCP with a NRF;</p><p id="p-0030" num="0032"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a signalling diagram illustrating a conventional migration from a direct communication mode to an indirect communication mode;</p><p id="p-0031" num="0033"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a signalling diagram illustrating the registration of an SCP with a NRF according to exemplary embodiments;</p><p id="p-0032" num="0034"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a signalling diagram illustrating a migration from a direct communication mode to an indirect communication mode according to exemplary embodiments;</p><p id="p-0033" num="0035"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a flow chart illustrating an exemplary method of operating an SCP node;</p><p id="p-0034" num="0036"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a flow chart illustrating an exemplary method of operating a Producer node;</p><p id="p-0035" num="0037"><figref idref="DRAWINGS">FIG. <b>10</b></figref> shows a SCP node comprising processing circuitry (or logic); and</p><p id="p-0036" num="0038"><figref idref="DRAWINGS">FIG. <b>11</b></figref> shows a Producer node comprising processing circuitry (or logic).</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">DETAILED DESCRIPTION</heading><p id="p-0037" num="0039">Generally, all terms used herein are to be interpreted according to their ordinary meaning in the relevant technical field, unless a different meaning is clearly given and/or is implied from the context in which it is used. All references to a/an/the element, apparatus, component, means, step, etc. are to be interpreted openly as referring to at least one instance of the element, apparatus, component, means, step, etc., unless explicitly stated otherwise. The steps of any methods disclosed herein do not have to be performed in the exact order disclosed, unless a step is explicitly described as following or preceding another step and/or where it is implicit that a step must follow or precede another step. Any feature of any of the embodiments disclosed herein may be applied to any other embodiment, wherever appropriate. Likewise, any advantage of any of the embodiments may apply to any other embodiments, and vice versa. Other objectives, features and advantages of the enclosed embodiments will be apparent from the following description.</p><p id="p-0038" num="0040">The following sets forth specific details, such as particular embodiments or examples for purposes of explanation and not limitation. It will be appreciated by one skilled in the art that other examples may be employed apart from these specific details. In some instances, detailed descriptions of well-known methods, nodes, interfaces, circuits, and devices are omitted so as not obscure the description with unnecessary detail. Those skilled in the art will appreciate that the functions described may be implemented in one or more nodes using hardware circuitry (e.g., analog and/or discrete logic gates interconnected to perform a specialized function, ASICs, PLAs, etc.) and/or using software programs and data in conjunction with one or more digital microprocessors or general purpose computers. Nodes that communicate using the air interface also have suitable radio communications circuitry. Moreover, where appropriate the technology can additionally be considered to be embodied entirely within any form of computer-readable memory, such as solid-state memory, magnetic disk, or optical disk containing an appropriate set of computer instructions that would cause a processor to carry out the techniques described herein.</p><p id="p-0039" num="0041">Hardware implementation may include or encompass, without limitation, digital signal processor (DSP) hardware, a reduced instruction set processor, hardware (e.g., digital or analogue) circuitry including but not limited to application specific integrated circuit(s) (ASIC) and/or field programmable gate array(s) (FPGA(s)), and (where appropriate) state machines capable of performing such functions.</p><p id="p-0040" num="0042">As noted above, when migrating from a direct communication mode to an indirect communication mode using the conventional techniques, the actions of the Producer means that for service consumers all services offered by the producers will become unavailable before they are registered again via the SCP. This will lead to service impacts due to Consumers being forced to perform a Producer re-selection or even release contexts. The signalling diagrams in <figref idref="DRAWINGS">FIGS. <b>4</b> and <b>5</b></figref> show the registration of an SCP with a NRF in the conventional techniques (<figref idref="DRAWINGS">FIG. <b>4</b></figref>) and a conventional migration from a direct communication mode to an indirect communication mode (<figref idref="DRAWINGS">FIG. <b>5</b></figref>). All signalling shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, <figref idref="DRAWINGS">FIG. <b>5</b></figref> and the later signalling diagrams between the SCP, the first NF producer node, the first NF consumer node and the NRF can be via the appropriate interfaces in the service-based architecture. Where appropriate, the communications between the SCP, the first NF producer node, the first NF consumer node and the NRF <b>404</b> can be secured or authenticated via Transport Layer Security (TLS).</p><p id="p-0041" num="0043">In <figref idref="DRAWINGS">FIG. <b>4</b></figref>, initially the services of a Producer node <b>402</b> are registered in an NRF <b>404</b>, and a Consumer node <b>406</b> is making use of one or more of those services using direct communication mode B, as shown by signalling <b>410</b>.</p><p id="p-0042" num="0044">In step <b>411</b> the SCP <b>408</b> sets the NRF address. This step comprises the SCP <b>408</b> setting an NRF address to the address of the NRF <b>404</b>. This address change can be initiated by an Operations, Administration and Management (OAM) part of the communication network.</p><p id="p-0043" num="0045">Next, the SCP <b>408</b> and the NRF <b>404</b> mutually authenticate, as shown by signalling <b>412</b>. This mutual authentication is via TLS, and can be initiated by a first request message sent from the SCP <b>408</b> to the NRF <b>404</b>.</p><p id="p-0044" num="0046">The SCP <b>408</b> then requests authorisation to access the services of the NRF <b>404</b>, as shown by Service access authorisation request <b>413</b>. The request for NRF service access authorisation can include an access token for the NRF <b>404</b>, e.g. Nnrf_AccessToken (nfType=SCP, targetNFtype=NRF, scope=*).</p><p id="p-0045" num="0047">Optionally, the SCP <b>408</b> can trigger registration of a NF profile for the SCP <b>408</b> in the NRF <b>404</b>. This is shown by NF-registration request <b>414</b>. The registration request from the SCP <b>408</b> can invoke the Nnrf_NFMgmt NFRegister service in NRF <b>404</b>. The registration request can include registration information that may include an identity of the SCP <b>408</b>, and an address of the SCP <b>408</b>.</p><p id="p-0046" num="0048">If the SCP <b>408</b> does optionally trigger registration of a NF profile for the SCP <b>408</b>, the NRF <b>404</b> stores the NF profile for the SCP <b>408</b> (step <b>415</b>). The storing of the NF profile for the SCP <b>408</b> means that the SCP instance is now discoverable by other NFs, including by other SCPs. Although not shown, the NRF <b>404</b> can send an acknowledgement to the SCP <b>408</b> indicating that the NF profile for the SCP <b>408</b> has been registered.</p><p id="p-0047" num="0049">Next, the SCP <b>408</b> subscribes to changes for the NRF <b>404</b> so that the SCP <b>408</b> will be informed about changes to NF profiles stored by the NRF <b>404</b>, or status changes of the NRF <b>404</b>. This NRF subscription request is shown by signal <b>416</b>, and can be, for example, a Nnrf_NFManagement_NFStatusSubscribe(NFType=NRF) request. Although not shown, the NRF <b>404</b> can send an acknowledgement of the subscription request to the SCP <b>408</b>.</p><p id="p-0048" num="0050">The SCP <b>408</b> sends a discovery request (signal <b>417</b>) to the NRF <b>404</b> to perform NF discovery. The discovery request can be &#x201c;Nnrf_NFDiscovery_with wildcarded_NFService_name&#x201d; so that the SCP <b>408</b> requests discovery of all NF instances (NRF Nfinstances) that the SCP <b>408</b> is permitted or allowed to detect. In response to the discovery request, the SCP <b>408</b> receives information on all NF instances in the network that it is allowed to detect (this response is not shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>). This can be useful where, for example, a hierarchical NRF is used.</p><p id="p-0049" num="0051">As noted above, <figref idref="DRAWINGS">FIG. <b>5</b></figref> shows exemplary signalling during a conventional migration from direct communication mode B to an indirect communication mode following the interaction of the SCP <b>408</b> with the NRF <b>404</b> as shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>.</p><p id="p-0050" num="0052">The Producer node <b>402</b> stores an address of a NRF that it is to use for discovery of services from other NFs, and in which the NF profile of the Producer node <b>402</b> is stored. In the direct communication mode, this NRF address is the address of the NRF <b>404</b>. At the start of the communication mode migration, in the Producer node <b>402</b> the stored NRF address (which is the service address of the NRF <b>404</b>) is changed to or replaced by the service address of the SCP <b>408</b> (step <b>501</b>). This address change can be initiated by an OAM part of the communication network.</p><p id="p-0051" num="0053">Next, the Producer node <b>402</b> de-registers its NF profile from the NRF <b>404</b> as the previous NRF address is now invalid. The de-registration is initiated by the Producer node <b>402</b> sending a de-registration request <b>502</b> to the NRF having the old NRF address (i.e. the address of NRF <b>404</b>). Although not shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref> the de-registration request may be sent via the SCP <b>408</b>, which acts as a proxy towards the old NRF <b>604</b> on behalf of the Producer node <b>402</b>.</p><p id="p-0052" num="0054">For any Consumer node that has subscribed to notifications about status changes of the Producer node <b>402</b>, the NRF <b>404</b> sends a notification (signal <b>503</b>) that the Producer node <b>402</b> has de-registered from the NRF <b>404</b>.</p><p id="p-0053" num="0055">In step <b>504</b>, as the producer instance that the Consumer node <b>406</b> is in direct communication with has been de-registered from the NRF <b>404</b>, the Consumer node <b>406</b> either re-selects another producer instance or terminates the context.</p><p id="p-0054" num="0056">Following the sending of the de-registration request (signal <b>502</b>), the Producer node <b>402</b> sends a new registration request (signal <b>505</b>) to register the NF profile of the Producer node <b>402</b> in a NRF. As the NRF address stored in the Producer node <b>402</b> has been replaced by the address of the SCP <b>408</b> (in step <b>501</b>), the registration request is addressed to, and sent to, the SCP <b>408</b>. The registration request indicates the service address of the Producer node <b>402</b> that is to be published and included in a stored NF profile.</p><p id="p-0055" num="0057">On receipt of this registration request, the SCP <b>408</b> replaces the service address for the Producer node <b>402</b> specified in the registration request with the service address of the SCP <b>408</b>, and forwards the modified registration request to the NRF <b>404</b>. This is shown as &#x2018;Proxy Registration Request&#x2019; <b>506</b> in <figref idref="DRAWINGS">FIG. <b>5</b></figref>.</p><p id="p-0056" num="0058">Although not shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, the NRF <b>404</b> then stores the NF profile for the Producer node <b>402</b> in the NRF <b>404</b>, with that stored NF profile including the service address of the SCP <b>408</b> as the service address of the Producer node <b>402</b>.</p><p id="p-0057" num="0059">The NRF <b>404</b> then sends notifications to any Consumer node that has subscribed to notifications about status changes for the Producer node <b>402</b>. This is shown by the &#x2018;Registration notification&#x2019; signal <b>507</b>. The notification indicates that a NF profile for the Producer node <b>402</b> has been registered at the NRF <b>404</b>.</p><p id="p-0058" num="0060">The Consumer node <b>406</b> may invoke a discovery request relating to the Producer node <b>402</b>. This is shown by the &#x2018;Discovery request&#x2019; signal <b>508</b>. A discovery request may be sent to the NRF <b>404</b> regularly. The Consumer node <b>406</b> may send a discovery request regardless of whether the Consumer node <b>406</b> has subscribed to notifications about status changes for the Producer node <b>402</b>. A response to discovery request <b>508</b> containing the requested information is shown as &#x2018;discovery response&#x2019; <b>509</b>.</p><p id="p-0059" num="0061">Once the Consumer node <b>406</b> has the relevant updated information for the Producer node <b>402</b> (i.e. either via the notification from the NRF <b>404</b> or in response to a discovery request), the Consumer node <b>406</b> can select an appropriate Producer node to use for a requested service. This is shown as step <b>510</b>.</p><p id="p-0060" num="0062">Assuming Producer node <b>402</b> is selected, the Consumer node <b>406</b> obtains the service address for the Producer node <b>402</b> from the NF profile for the Producer node <b>402</b>. As noted above, this service address is the SCP address.</p><p id="p-0061" num="0063">The Consumer node <b>406</b> then sends a request for a particular service from the Producer node <b>402</b>. This request (&#x2018;call producer service&#x2019; signal <b>511</b>) is sent to the service address for the Producer node <b>402</b> obtained from the NF profile, i.e. it is sent to the SCP address.</p><p id="p-0062" num="0064">The SCP <b>408</b> receives the call producer service signal <b>511</b>, modifies the call producer service to include the actual service address of the Producer node <b>402</b>, and sends the service request to the Producer node <b>402</b>. This modified call producer service is referred to as &#x2018;proxy call producer service&#x2019; signal <b>512</b>.</p><p id="p-0063" num="0065">In the direct communication mode the Consumer node <b>406</b> stores the address of the NRF <b>404</b> for use in discovering services of other NFs. As part of the communication mode migration, in the Consumer node <b>406</b> the stored NRF address (which is the service address of the NRF <b>404</b>) is changed to or replaced by the service address of the SCP <b>408</b> (step <b>513</b>). This address change can be initiated by an OAM part of the communication network.</p><p id="p-0064" num="0066">Optionally, as a consequence of the invalidation of the old NRF address (i.e. the change or replacement of the address of the NRF <b>404</b>), the Consumer node <b>406</b> may unsubscribe to status change notifications from the old NRF <b>404</b> (i.e. NRF <b>404</b>). This unsubscribe request is shown as signal <b>514</b>. Unsubscribing means that changes occurring to the producer NF instances will not be notified to the Consumer node <b>406</b>.</p><p id="p-0065" num="0067">In general, the SCP <b>408</b> is now able to act as a NRF towards the Producer node <b>402</b> and the Consumer node <b>406</b> and the SCP <b>408</b> &#x2018;proxies&#x2019; any requests to the NRF <b>404</b> and performs any required address modifications so further service invocations for the Producer node <b>402</b> will route via the SCP <b>408</b>. From the point of view of the Consumer node <b>406</b>, the SCP <b>408</b> is the proxy for all new requests, so all new requests are sent via the SCP <b>408</b>. From the point of view of the SCP <b>408</b>, if the SCP <b>408</b> receives requests it performs a stateless address modification to restore the addresses of the original Producer node <b>402</b> (and NRF <b>404</b>) and routes the request accordingly. That is, if the request was for a service from an NRF, then the request is sent to NRF <b>404</b>, and if the request was to a Producer node <b>402</b> (or another Producer node), it is routed accordingly.</p><p id="p-0066" num="0068">In a specific example, in order for the Consumer node <b>406</b> to obtain the current information on producer services, the Consumer node <b>406</b> sends a new subscribe request (signal <b>515</b>) for notifications on status changes. As the NRF address stored in the Consumer node <b>406</b> has been replaced by the address of the SCP <b>408</b> (in step <b>513</b>), the subscribe request <b>515</b> is addressed to, and sent to, the SCP <b>408</b>. The subscribe request identifies the Producer node <b>402</b> as a NF that the Consumer node <b>406</b> would like to receive status change notifications for, and a destination address that the notifications are to be sent to, namely the service address for the Consumer node <b>406</b>.</p><p id="p-0067" num="0069">On receipt of this subscribe request, the SCP <b>408</b> replaces the destination address (the service address for the Consumer node <b>406</b>) specified in the subscribe request with the service address of the SCP <b>408</b>, and forwards the modified subscribe request to the NRF <b>404</b>. This is shown as &#x2018;Proxy Subscribe Request&#x2019; <b>516</b> in <figref idref="DRAWINGS">FIG. <b>5</b></figref>.</p><p id="p-0068" num="0070">The NRF <b>404</b> sends an acknowledgement of the subscription request to the SCP <b>408</b>, as shown by &#x2018;subscribe acknowledgement&#x2019; message <b>517</b>. The SCP <b>408</b> replaces the destination address (the service address for the SCP <b>408</b>) specified in the acknowledgement of the subscribe request with the service address of the Consumer node <b>406</b>, and forwards the modified acknowledgement to the Consumer node <b>406</b>. This is shown as &#x2018;Proxy Subscribe Acknowledgement&#x2019; <b>518</b>.</p><p id="p-0069" num="0071">In order for the Consumer node <b>406</b> to discover NF instances that can provide a particular service, the Consumer node <b>406</b> can send a discovery request (signal <b>519</b>) for information on suitable NF instances. This discovery request <b>519</b> can typically be sent following receipt of the proxy subscribe acknowledgement <b>518</b>. As the NRF address stored in the Consumer node <b>406</b> has been replaced by the address of the SCP <b>408</b> (in step <b>513</b>), the discovery request <b>519</b> is addressed to, and sent to, the SCP <b>408</b>.</p><p id="p-0070" num="0072">On receipt of this discovery request, the SCP <b>408</b> replaces the destination address (the service address for the Consumer node <b>406</b>) specified in the discovery request with the service address of the SCP <b>408</b>, and forwards the modified discovery request to the NRF <b>404</b>. This is shown as &#x2018;Proxy Discovery Request&#x2019; <b>520</b> in <figref idref="DRAWINGS">FIG. <b>5</b></figref>.</p><p id="p-0071" num="0073">A response to the &#x2018;Proxy Discovery Request&#x2019; <b>520</b> is provided by the NRF <b>404</b> to the SCP <b>408</b> in a &#x2018;Discovery Response&#x2019; signal <b>521</b>. The SCP <b>408</b> replaces the destination address (the service address for the SCP <b>408</b>) specified in the discovery response with the service address of the Consumer node <b>406</b>, and forwards the modified discovery response to the Consumer node <b>406</b>. This is shown as &#x2018;Proxy Discovery Response&#x2019; <b>522</b>.</p><p id="p-0072" num="0074">It will be appreciated that the order of the signalling shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref> is in part dependent on the timing of the occurrence of steps <b>501</b> and <b>513</b> by the OAM, and therefore the signalling and operations relating to the Consumer node <b>606</b> can occur earlier than shown and may overlap with some of the earlier signalling and operations by the Producer node <b>602</b> and/or SCP <b>608</b>.</p><p id="p-0073" num="0075">To address the issues with the conventional techniques in which for service consumers all services offered by the producers will become unavailable before they are registered again via the SCP <b>408</b>, the techniques described herein propose a modified procedure for the migration to an indirect communication mode. In some embodiments, on the Producer side the behaviour can be changed in a way that when changing the NRF address it is possible to either skip sending the de-registration request to the old NRF, or, if this is not possible, to send the de-registration request to the old NRF via the SCP as proxy. In any case the Producer sends a registration to the new NRF via the SCP as a proxy. On the SCP side in handling the Producer registration, the SCP can be enhanced in a way that it discovers all nfProfiles of the Producer (this can either be for multiple nfTypes or one nfType only). This is done before the registration of the Producer via the SCP can be handled. So, when the Producer is reconfigured, and the SCP receives a nfRegister request, and the SCP can determine whether this Producer nfInstance is already known in the NRF. If so, the SCP modifies the nfRegister to a nfUpdate when sending it to the NRF. Thus, the NRF will get updated information about the service addresses in an existing nfProfile for the Producer instead of registering a new nfProfile for the Producer. The updated service addresses can be communicated to all Consumers as in Rel-15.</p><p id="p-0074" num="0076">The signalling diagrams in <figref idref="DRAWINGS">FIGS. <b>6</b> and <b>7</b></figref> show the introduction of an SCP according to exemplary embodiments (<figref idref="DRAWINGS">FIG. <b>6</b></figref>) and exemplary embodiments of the migration from a direct communication mode to an indirect communication mode (<figref idref="DRAWINGS">FIG. <b>7</b></figref>). All signalling shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref> and <figref idref="DRAWINGS">FIG. <b>7</b></figref> can be via the appropriate interfaces in the service-based architecture. Where appropriate, the communications between the SCP, the first NF producer node, the first NF consumer node and the NRF <b>404</b> can be secured or authenticated via Transport Layer Security (TLS).</p><p id="p-0075" num="0077">In <figref idref="DRAWINGS">FIG. <b>6</b></figref>, initially the services of a Producer node <b>602</b> are registered in an NRF <b>604</b>, and a Consumer node <b>606</b> is making use of one or more of those services using direct communication mode B, as shown by signalling <b>610</b>. To improve the migration to an indirect communication mode via an SCP <b>608</b> according to the techniques described herein, the SCP <b>608</b> will communicate with the NRF <b>604</b>, and the SCP <b>608</b> will need to be allowed or permitted to read and modify NF profiles of NF producers on their behalf. It is also useful for the SCP <b>608</b> to subscribe to changes to NF profiles of the NF producer, and of other NF producers. In some embodiments, the SCP <b>608</b> may also register in the NRF <b>604</b>, i.e. a NF profile for the SCP <b>608</b> is stored by the NRF <b>604</b>, although this registration is not always required.</p><p id="p-0076" num="0078">In step <b>611</b> the SCP <b>608</b> sets the NRF address. This step comprises the SCP <b>608</b> setting an NRF address to the address of the NRF <b>604</b>. This address setting can be initiated by an OAM part of the communication network.</p><p id="p-0077" num="0079">Next, the SCP <b>608</b> and the NRF <b>604</b> mutually authenticate, as shown by signalling <b>612</b>. This mutual authentication is via TLS, and can be initiated by a first request message sent from the SCP <b>608</b> to the NRF <b>604</b>.</p><p id="p-0078" num="0080">The SCP <b>608</b> then requests authorisation to access the services of the NRF <b>604</b>, as shown by Service access authorisation request <b>612</b>. The request for NRF service access authorisation can include an access token for the NRF <b>604</b>, e.g. Nnrf_AccessToken (nfType=SCP, targetNFtype=NRF, scope=*).</p><p id="p-0079" num="0081">Optionally, the SCP <b>608</b> can trigger registration of a NF profile for the SCP <b>608</b> in the NRF <b>604</b>. This is shown by NF-registration request <b>614</b>. The registration request from the SCP <b>608</b> can invoke the Nnrf_NFMgmt NFRegister service in NRF <b>604</b>. The registration request can include registration information that may include an identity of the SCP <b>608</b>, and an address of the SCP <b>608</b>.</p><p id="p-0080" num="0082">If the SCP <b>608</b> does optionally trigger registration of a NF profile for the SCP <b>608</b>, the NRF <b>604</b> stores the NF profile for the SCP <b>608</b> (optional step <b>615</b>). The storing of the NF profile for the SCP <b>608</b> means that the SCP instance is now discoverable by other NFs, including by other SCPs. Although not shown, the NRF <b>604</b> can send an acknowledgement to the SCP <b>608</b> indicating that the NF profile for the SCP <b>608</b> has been registered.</p><p id="p-0081" num="0083">Optionally, but preferably, the SCP <b>608</b> subscribes to changes in the services in the Producer node <b>602</b> so that the SCP <b>608</b> will be informed by the NRF <b>604</b> about changes to the services provided by the Producer node <b>602</b>. This NRF subscription request is shown by signal <b>616</b>, and can be, for example, a Nnrf_NFManagement_NFStatusSubscribe(reqNFType=SCP,targetNFType=Prod) request. It is possible for the SCP <b>608</b> to omit a subscrCond attribute in the subscribe request in order to receive notifications for all NFs having profiles stored in the NRF <b>604</b> (i.e. including at least the Producer node <b>602</b> and Consumer node <b>606</b>).</p><p id="p-0082" num="0084">In response to the subscribe request <b>616</b>, the NRF <b>604</b> allocates subscription resources to the requested subscription (step <b>617</b>), according to the requested SubscriptionData, with the subscription identified by a subscriptionId, and sends a subscription created message <b>618</b> to the SCP <b>608</b> to indicate that the requested subscription has been created. The subscription created message <b>618</b> can include the subscriptionId identifying the created subscription resource. In this way the SCP <b>608</b> will be informed about any changes to the services of the Producer node <b>602</b>.</p><p id="p-0083" num="0085">In order for the SCP <b>608</b> to obtain a current view of the available producer services, the SCP <b>608</b> sends a discovery request (signal <b>619</b>) to the NRF <b>604</b> to perform NF discovery. The discovery request can be &#x201c;Nnrf_NFDiscovery_NFDiscover(requester-nf-type=SCP,target-nf-type=Prod)&#x201d; so that the SCP <b>608</b> requests discovery of all NF instances (NF Producer Nfinstances). In response to the discovery request, the SCP <b>608</b> receives information on all NF instances in the network (shown as discovery response <b>620</b> in <figref idref="DRAWINGS">FIG. <b>6</b></figref>).</p><p id="p-0084" num="0086">Using the above procedure in the SCP <b>608</b> and NRF <b>604</b>, the SCP <b>608</b> is able to create and maintain an up to date topology map of available producer services. This is useful for enabling a more seamless migration from a direct communication mode to an indirect communication mode.</p><p id="p-0085" num="0087"><figref idref="DRAWINGS">FIG. <b>7</b></figref> shows signalling during a migration from direct communication mode B to an indirect communication mode according to exemplary embodiments following the introduction of the SCP <b>608</b> as shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>. It should be appreciated from the description below that the migration requires two, largely independent, main sets of actions. A first set of steps/signalling relates to the migration on the Producer node <b>602</b> side, which are presented as steps/signals <b>701</b>-<b>707</b> and which are triggered by step <b>701</b>, and the other set of steps/signalling relates to the migration on the Consumer node <b>606</b> side, which are presented as steps/signals <b>711</b>-<b>720</b> and which are triggered by step <b>711</b>. Moreover, the timing of some of the signalling shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref> can be in part dependent on the timing of certain actions by an OAM.</p><p id="p-0086" num="0088">Initially, the Producer node <b>602</b> stores an address of a NRF that it is to use for discovery of services from other NFs, and in which the NF profile of the Producer node <b>602</b> is stored. In the direct communication mode, this NRF address is the address of the NRF <b>604</b>. At the start of the communication mode migration, in the Producer node <b>602</b> the stored NRF address (which is the service address of the NRF <b>604</b>) is changed to or replaced by the service address of the SCP <b>608</b> (step <b>701</b>). This address change can be initiated by an OAM part of the communication network.</p><p id="p-0087" num="0089">The next action(s) depends on the behaviour or implementation of the Producer node <b>602</b>. A NF de-registers its NF profile from the NRF <b>604</b> as the previous NRF address is now invalid. Therefore the NF may be required to send a de-registration request in order to de-register with the previous NRF. Thus, the Producer node <b>602</b> may send a de-registration request <b>702</b> for the NRF <b>604</b> via the SCP <b>608</b>. This de-registration request <b>702</b> is intended for the NRF having the old NRF address (i.e. the address of NRF <b>604</b>).</p><p id="p-0088" num="0090">If the SCP <b>608</b> receives a de-registration request <b>702</b> from the Producer node <b>602</b>, the SCP <b>608</b> sends an acknowledgement of the request to the Producer node <b>602</b> (this is shown as acknowledgement <b>703</b>), but the SCP <b>608</b> does not forward the de-registration request to the NRF <b>604</b>. The acknowledgement sent to the Producer node <b>602</b> indicates to the Producer node <b>602</b> that the de-registration request has been actioned (although it has not and the NF profile for the Producer node <b>602</b> remains with the NRF <b>604</b>).</p><p id="p-0089" num="0091">In some embodiments, the Producer node <b>602</b> can be configured to skip or omit the sending of the de-registration request when the previous NRF address is now invalid.</p><p id="p-0090" num="0092">Regardless of whether the Producer node <b>602</b> is required to (or does) send a de-registration request in response to a change in the NRF address, the Producer node <b>602</b> sends a new registration request (signal <b>704</b>) to register the NF profile of the Producer node <b>602</b> in a NRF. As the NRF address stored in the Producer node <b>602</b> has been replaced by the address of the SCP <b>608</b> (in step <b>701</b>), the registration request is addressed to, and sent to, the SCP <b>608</b>. The registration request <b>704</b> indicates the service address of the Producer node <b>602</b> that is to be published and included in a stored NF profile. The registration request may register the NFInstance of the Producer node <b>602</b> (using the same Nflnstance ID as towards previous NRF <b>604</b>) to the new NRF <b>604</b> using Nnrf_NFManagement_N FRegister(nfInstanceID=ProdInst,nfType=Prod, nfStatus=REGISTERED).</p><p id="p-0091" num="0093">On receipt of this registration request, as the NF profile for the Producer node <b>602</b> has not been deleted or de-registered from the NRF <b>604</b>, if the SCP <b>608</b> has profile information available for the Producer node <b>602</b> identified in the registration request, the SCP <b>608</b> creates a profile update request that includes the information for the Producer node <b>602</b>, with the service address for the Producer node <b>602</b> replaced by the service address of the SCP <b>608</b>. The profile update request is then sent to the NRF <b>604</b>. This is shown as &#x2018;Profile update request&#x2019; <b>705</b> in <figref idref="DRAWINGS">FIG. <b>7</b></figref>.</p><p id="p-0092" num="0094">In particular embodiments of the creation and sending of the profile update request, if the nfInstanceID specified in the received registration request is known in the topology information obtained by the SCP <b>608</b> (ensured by the uniqueness of the universally unique identifier, UUID), then the SCP <b>608</b> changes the NFRegister message to an NFUpdate message to effect the required address modifications to the nfProfile stored by the NRF <b>604</b>. With the profile update request, the SCP <b>608</b> can either request a partial update (e.g. http PATCH) of the NF profile of the Producer node <b>602</b> or request a complete replacement (e.g. http PUT) of the stored NF profile for the Producer node <b>602</b> with a new NF profile. Either way, the resulting stored NF profile will note that a service address for the Producer node <b>602</b> is the service address of the SCP <b>608</b>. The profile update request may be a Nnrf_NFManagement_NFUpdate(nfInstanceID=ProdInst,nfType=Prod,nfStatus=REGISTERED) request.</p><p id="p-0093" num="0095">The NRF <b>604</b> then updates or stores the NF profile for the Producer node <b>602</b> in the NRF <b>604</b> (step <b>706</b>), with that stored NF profile including the service address of the SCP <b>608</b> as the service address of the Producer node <b>602</b>. The NF profile (with the SCP <b>608</b> address as the service address for the Producer node <b>602</b>) is now available for discovery by any potential Consumers. The NRF <b>604</b> can then send an acknowledgement to the SCP <b>608</b> (&#x2018;profile update response&#x2019; <b>707</b>) indicating that the NF profile for the Producer node <b>602</b> has been updated.</p><p id="p-0094" num="0096">Thus, with profile update request <b>705</b> and step <b>706</b>, the SCP <b>608</b> places itself as a proxy in the communication path between the Consumer node <b>606</b> and the Producer node <b>602</b>.</p><p id="p-0095" num="0097">For any consumer node that has subscribed to notifications about status changes of the Producer node <b>602</b>, the NRF <b>604</b> will send an update notification message (signal <b>708</b>) to the consumer node(s) indicating that the NF profile for the Producer node <b>602</b> has been updated, and the update notification message <b>708</b> will indicate the new service address for the Producer node <b>602</b> (i.e. the address of the SCP <b>608</b>). The update notification message <b>708</b> may be a NFStatusNotify message.</p><p id="p-0096" num="0098">The Consumer node <b>606</b> may invoke a discovery request relating to the Producer node <b>602</b>. This is shown by the &#x2018;Discovery request&#x2019; signal <b>709</b>. A discovery request may be regularly sent to the NRF <b>604</b>. The Consumer node <b>606</b> may send a discovery request regardless of whether the Consumer node <b>606</b> has subscribed to notifications about status changes for the Producer node <b>602</b>. For example the Consumer node <b>606</b> may consider previously-received information about the Producer node <b>602</b> to expire after a certain amount of time, and a new discovery request may be sent once that information has expired.</p><p id="p-0097" num="0099">The discovery request <b>709</b> is received at the NRF <b>604</b>, the NRF <b>604</b> obtains the information for the Producer node <b>602</b> indicated in the discovery request <b>709</b>, and the NRF <b>604</b> sends a discovery response <b>710</b> containing the requested information to the Consumer node <b>606</b>.</p><p id="p-0098" num="0100">It will be appreciated that the sending of a discovery request and the discovery response in signals <b>709</b> and <b>710</b> is independent on the receipt (or lack thereof) of a profile update notification <b>708</b> relating to the Producer node <b>602</b>, and thus discovery request <b>709</b> may be sent at any time so that the Consumer node <b>606</b> can update its information about the Producer node <b>602</b> and/or other available Producer nodes.</p><p id="p-0099" num="0101">Now that the Consumer node <b>606</b> has the relevant updated information for the Producer node <b>602</b> (i.e. either via the profile update notification from the NRF <b>604</b> or in response to a discovery request), any new requests for the Producer node <b>602</b> will be sent to the Producer node <b>602</b> using the service address of the SCP <b>608</b>. The first message sent by the Consumer node <b>606</b> to the Producer node <b>602</b> after the profile update will trigger a mutual authentication (handshake) procedure between the SCP <b>608</b> and the Consumer node <b>606</b>, e.g. via TLS.</p><p id="p-0100" num="0102">Thus, at this stage of the procedure/technique, from the point of view of the Consumer node <b>606</b>, the SCP <b>608</b> has been successfully set up as a NRF proxy for the Producer node <b>602</b> without causing any disruption or interruptions for the Consumer node <b>606</b>.</p><p id="p-0101" num="0103">The other part of the procedure/technique in migrating to the indirect communication mode involves setting the Consumer node <b>606</b> up to communicate with the NRF <b>604</b> via the SCP <b>608</b> as well.</p><p id="p-0102" num="0104">In the direct communication mode the Consumer node <b>606</b> stores the address of the NRF <b>604</b> for use in discovering services of other NFs. As part of the communication mode migration, in the Consumer node <b>606</b> the stored NRF address (which is the service address of the NRF <b>604</b>) is changed to or replaced by the service address of the SCP <b>608</b> (step <b>711</b>). This address change can be initiated by an OAM part of the communication network.</p><p id="p-0103" num="0105">Optionally, as a consequence of the invalidation of the old NRF address (i.e. the change or replacement of the address of the NRF <b>604</b>), the Consumer node <b>606</b> may unsubscribe to status change notifications from the old NRF <b>604</b> (i.e. NRF <b>604</b>). This unsubscribe request is shown as signal <b>712</b>. Unsubscribing means that changes occurring to the producer NF instances will not be notified to the Consumer node <b>606</b>. In general, the SCP <b>608</b> is now able to act as a NRF towards the Producer node <b>602</b> and the Consumer node <b>606</b> and the SCP <b>608</b> &#x2018;proxies&#x2019; any requests to the NRF <b>604</b> and performs any required address modifications so further service invocations for the Producer node <b>602</b> will route via the SCP <b>608</b>. From the point of view of the Consumer node <b>606</b>, the SCP <b>608</b> is the proxy for all new requests, so all new requests are sent via the SCP <b>608</b>. From the point of view of the SCP <b>608</b>, if the SCP <b>608</b> receives requests it performs an address modification to restore the addresses of the original Producer node <b>602</b> (and NRF <b>604</b>) and routes the request accordingly. This address modification is optionally, but preferably, stateless. That is, if the request was fora service from an NRF, then the request is sent to NRF <b>604</b>, and if the request was to a Producer node <b>602</b> (or another Producer node), it is routed accordingly.</p><p id="p-0104" num="0106">After unsubscribing to status change notifications from the NRF <b>604</b>, in order for the Consumer node <b>606</b> to obtain the current information on producer services, the Consumer node <b>606</b> sends a new subscribe request (signal <b>713</b>) for notifications on status changes. As the NRF address stored in the Consumer node <b>606</b> has been replaced by the address of the SCP <b>608</b> (in step <b>711</b>), the subscribe request <b>713</b> is addressed to, and sent to, the SCP <b>608</b>. The subscribe request may identify the Producer node <b>602</b> as a NF that the Consumer node <b>606</b> would like to receive status change notifications for (or alternatively identify a type of NF, such as SMF, that the Consumer node <b>606</b> would like to receive status change notifications for), and a destination address that the notifications are to be sent to namely the service address for the Consumer node <b>606</b>.</p><p id="p-0105" num="0107">On receipt of this subscribe request, the SCP <b>608</b> replaces the destination address (the service address for the Consumer node <b>606</b>) specified in the subscribe request with the service address of the SCP <b>608</b>, and forwards the modified subscribe request to the NRF <b>604</b>. This is shown as &#x2018;Proxy Subscribe Request&#x2019; <b>714</b> in <figref idref="DRAWINGS">FIG. <b>7</b></figref>.</p><p id="p-0106" num="0108">The NRF <b>604</b> sends an acknowledgement of the subscription request to the SCP <b>608</b>, as shown by &#x2018;subscribe acknowledgement&#x2019; message <b>715</b>. The SCP <b>608</b> replaces the destination address (the service address for the SCP <b>608</b>) specified in the subscribe acknowledgement message <b>715</b> with the service address of the Consumer node <b>606</b>, and forwards the modified acknowledgement to the Consumer node <b>606</b>. This is shown as &#x2018;Proxy Subscribe Acknowledgement&#x2019; <b>716</b>.</p><p id="p-0107" num="0109">In order for the Consumer node <b>606</b> to discover NF instances that can provide a particular service, the Consumer node <b>606</b> can send a discovery request (signal <b>717</b>) for information on suitable NF instances. This discovery request <b>717</b> can typically be sent following receipt of the proxy subscribe acknowledgement <b>716</b>. As the NRF address stored in the Consumer node <b>606</b> has been replaced by the address of the SCP <b>608</b> (in step <b>711</b>), the discovery request <b>717</b> is addressed to, and sent to, the SCP <b>608</b>.</p><p id="p-0108" num="0110">On receipt of this discovery request, the SCP <b>608</b> replaces the destination address (the service address for the Consumer node <b>606</b>) specified in the discovery request with the service address of the SCP <b>608</b>, and forwards the modified discovery request to the NRF <b>604</b>. This is shown as &#x2018;Proxy Discovery Request&#x2019; <b>718</b> in <figref idref="DRAWINGS">FIG. <b>7</b></figref>.</p><p id="p-0109" num="0111">A response to the &#x2018;Proxy Discovery Request&#x2019; <b>718</b> is provided by the NRF <b>604</b> to the SCP <b>608</b> in a &#x2018;Discovery Response&#x2019; signal <b>719</b>. The SCP <b>608</b> replaces the destination address (the service address for the SCP <b>608</b>) specified in the discovery response with the service address of the Consumer node <b>606</b>, and forwards the modified discovery response to the Consumer node <b>606</b>. This is shown as &#x2018;Proxy Discovery Response&#x2019; <b>720</b>. After this discovery procedure, the Consumer node <b>606</b> uses the services of the NRF <b>604</b> indirectly via the SCP <b>608</b>.</p><p id="p-0110" num="0112">Although <figref idref="DRAWINGS">FIG. <b>7</b></figref> shows the discovery request <b>717</b> being sent after the subscribe request <b>713</b>, it will be appreciated that it is possible for the discovery request <b>717</b> to be sent before the subscribe request <b>713</b>.</p><p id="p-0111" num="0113">Thus it can be seen that with small modifications to the behaviour of the Producer node <b>602</b> and the SCP <b>608</b>, it is possible to migrate from a direct communication mode to an indirect communication mode without interrupting the ability of a Consumer node <b>606</b> to consume a producer's services. As noted above, a Producer node <b>602</b> may be configured to skip or omit de-registration from an NRF in the event that the NRF address is changed, and a Producer node <b>602</b> may allow the SCP <b>608</b> to discover the services of the Producer node <b>602</b>. Also as noted above, a SCP <b>608</b> may be configured to discover or obtain the NF profiles for the Producer node <b>602</b> from the NRF <b>604</b> and subscribe to changes in those profiles. The SCP <b>608</b> translates a profile registration request (e.g. NFRegister) received from the Producer node <b>602</b> to a profile update (e.g. NFUpdate) before passing it on to the NRF <b>604</b>.</p><p id="p-0112" num="0114">The flow chart in <figref idref="DRAWINGS">FIG. <b>8</b></figref> shows an exemplary method of operating a SCP node <b>608</b> in a communication network as a proxy NRF node <b>604</b> for a first NF producer node <b>602</b> in the communication network according to the techniques presented herein. The techniques are to be used when the first NF producer node <b>602</b> is to migrate from a direct communication mode with a first NF consumer node <b>606</b> to an indirect communication mode via the SCP node <b>608</b>.</p><p id="p-0113" num="0115">In a first step, step <b>801</b>, the SCP node <b>608</b> discovers a NF profile for the first NF producer node <b>602</b>. The NF profile for the first NF producer node is stored by the NRF node <b>604</b>, and the NF profile comprises a service address for the first NF producer node. The NF profile for the first NF producer node may also comprise an indication of one or more services provided by the first NF producer node <b>602</b>.</p><p id="p-0114" num="0116">In some embodiments step <b>801</b> comprises sending a discovery request to the NRF node <b>604</b> that requests discovery of the NF profile for the first NF producer node <b>602</b>. This corresponds to the NF discovery request <b>617</b> in <figref idref="DRAWINGS">FIG. <b>6</b></figref>. The SCP node <b>608</b> receives a discovery response from the first NRF node that comprises the NF profile for the first NF producer node <b>602</b>.</p><p id="p-0115" num="0117">In step <b>803</b>, the SCP node <b>608</b> receives a registration request from the first NF producer node <b>602</b>. This registration request is a request to register a NF profile for the first NF producer node <b>602</b> at the NRF node <b>604</b>, and the registration request indicates the service address for the first NF producer node <b>602</b>. This corresponds to the registration request <b>704</b> in <figref idref="DRAWINGS">FIG. <b>7</b></figref>. The registration request is sent by the first NF producer node <b>602</b> following the updating of the NRF address stored by the first NF producer node <b>602</b> to the address of the SCP node <b>608</b>.</p><p id="p-0116" num="0118">In step <b>805</b>, in response to the received registration request, the SCP node <b>608</b> sends an update request to the NRF node <b>604</b> to update the NF profile for the first NF producer node <b>602</b> stored by the NRF node <b>604</b> to replace the service address of the first NF producer node <b>602</b> with a first service address of the SCP node <b>608</b> that is associated with the service address of the first NF producer node. The first service address of the SCP node <b>608</b> may be the address for the SCP node <b>608</b>, or it may be one of a plurality of addresses for the SCP node <b>608</b> node. In the latter case, the SCP node <b>608</b> may have allocated or associated one or more of the plurality of addresses to the first NF producer node <b>602</b>. This step corresponds to profile update request <b>705</b> in <figref idref="DRAWINGS">FIG. <b>7</b></figref>.</p><p id="p-0117" num="0119">Thus, the above actions or operations of the SCP node <b>608</b> mean that the first NF producer node <b>602</b> is not de-registered from the NRF node <b>604</b>, which avoids disruption to services provided to first NF consumer node <b>606</b>.</p><p id="p-0118" num="0120">In some embodiments prior to step <b>801</b> the SCP node <b>608</b> can send a subscription request to the NRF node <b>604</b> to subscribe to changes in services of the first NF producer node <b>602</b>. This step corresponds to subscription request <b>616</b> in <figref idref="DRAWINGS">FIG. <b>6</b></figref>. As noted above, the subscription request may be used to subscribe to changes in services of all NF producer nodes for which NF profiles are stored by the NRF node <b>604</b>.</p><p id="p-0119" num="0121">In some embodiments, prior to step <b>803</b>, the SCP node <b>608</b> may receive a de-registration request from the first NF producer node <b>602</b>, with the de-registration request requesting that the first NF producer node <b>602</b> is de-registered from the NRF node <b>604</b>. This step corresponds to de-register request <b>702</b> in <figref idref="DRAWINGS">FIG. <b>7</b></figref>.</p><p id="p-0120" num="0122">In some embodiments, in response to the received de-registration request the SCP node <b>608</b> can send an acknowledgement to the first NF producer node <b>602</b>. This step corresponds to de-registration acknowledge <b>703</b> in <figref idref="DRAWINGS">FIG. <b>7</b></figref>. In this way, the first NF producer node <b>602</b> considers the de-registration request to have been actioned. However, the SCP node <b>608</b> does not send a corresponding de-registration request to the NRF node <b>604</b> on behalf of the first NF producer node <b>602</b>, which means that the first NF producer node <b>602</b> remains registered with the NRF node <b>604</b>.</p><p id="p-0121" num="0123">In alternative embodiments, in response to the received de-registration request the SCP node <b>608</b> can determine if the de-registration request comprises an indicator relating to whether the first NF producer node <b>602</b> is to change to a different NRF node. This indicator can be used by the first NF producer node <b>602</b> and/or the SCP node <b>608</b> to determine whether the de-registration is a &#x2018;normal&#x2019; de-registration from the NRF node <b>604</b> (i.e. it does not occur during, or it does not relate to, a migration from a direct communication mode to an indirect communication mode), in which case the de-registration request should be passed on to the NRF node <b>604</b>. In some embodiments if the received de-registration request does comprise the indicator, then the SCP node <b>608</b> does not send a de-registration request to the NRF node <b>604</b>. In these embodiments if the received de-registration request does not comprise the indicator, the SCP node <b>608</b> sends a de-registration request to the NRF node <b>604</b>, in order to request de-registration of the first NF producer node <b>602</b> from the NRF node <b>604</b>. Those skilled in the art will be aware of various alternative ways in which a producer node can signal that a de-registration request is a &#x2018;normal&#x2019; de-registration and should be actioned by the SCP node <b>608</b>.</p><p id="p-0122" num="0124">In other alternative embodiments, following receipt of the de-registration request and the sending of the de-registration acknowledge <b>703</b> by the SCP node <b>608</b>, the SCP node <b>608</b> can determine whether the registration request received in step <b>803</b> is received from the first NF producer node <b>602</b> within a predetermined time period of receipt of the de-registration request. This delay in actioning the de-registration request enables the SCP node <b>608</b> to observe whether there is an attempt to register the same NF instance shortly afterwards. If the registration request is not received within the predetermined time period, then the SCP node <b>608</b> sends the de-registration request to the NRF node <b>604</b> to request the de-registration of the first NF producer node <b>602</b> from the NRF node <b>604</b>. Otherwise, in response to the registration request being received within the predetermined time period, the SCP node <b>608</b> does not send a de-registration request to the NRF node <b>604</b> on behalf of the first NF producer node <b>602</b>.</p><p id="p-0123" num="0125">In some embodiments step <b>805</b> comprises sending an update request that is a request to replace the stored NF profile for the first NF producer node <b>602</b> with a new NF profile that has the first service address of the SCP node as the service address of the first NF producer node.</p><p id="p-0124" num="0126">In some embodiments, in response to receiving the registration request in step <b>803</b>, the SCP node <b>608</b> can determine whether a NF profile for the NF producer node identified in the registration request has been discovered from the NRF node <b>604</b>.</p><p id="p-0125" num="0127">Step <b>805</b> is performed if the NF profile for the NF producer node identified in the registration request has been discovered from the NRF node <b>604</b>.</p><p id="p-0126" num="0128">In some embodiments, prior to step <b>801</b>, the SCP node <b>608</b> can send an authorisation request to the NRF node <b>604</b> to request authorisation to access service information about NF producer nodes stored by the NRF node <b>604</b>. This corresponds to the service access authorisation request <b>613</b> in <figref idref="DRAWINGS">FIG. <b>6</b></figref>.</p><p id="p-0127" num="0129">In some embodiments the NF profile discovered in step <b>801</b> may indicate that the first NF producer node <b>602</b> is capable of providing at least a first service to consumer nodes. The SCP node <b>608</b> may receive a service request from a second NF consumer node that requests a first service to be provided to the second NF consumer node. The SCP node <b>608</b> identifies from the discovered NF profile that the first NF producer node <b>602</b> is capable of providing the first service, and the SCP node <b>608</b> sends the service request received from the second NF consumer node to the first NF producer node <b>602</b> using the service address of the first NF producer node <b>602</b> in the discovered NF profile. The SCP node <b>608</b> then handles further communications relating to the provision of the first service between the first NF producer node <b>602</b> and the second NF consumer node in line with the indirect modes of communication.</p><p id="p-0128" num="0130">The flow chart in <figref idref="DRAWINGS">FIG. <b>9</b></figref> shows an exemplary method of operating a first NF producer node <b>602</b> in a communication network. The first NF producer node <b>602</b> is to migrate from a direct communication mode with a first NF consumer node <b>606</b> to an indirect communication mode via SCP node <b>608</b>.</p><p id="p-0129" num="0131">In step <b>901</b>, the first NF producer node <b>602</b> updates a stored service address for NRF node <b>604</b> to a service address of the SCP node. The NRF node <b>604</b> currently stores a NF profile for the first NF producer node. Step <b>901</b> corresponds to step <b>701</b> in <figref idref="DRAWINGS">FIG. <b>7</b></figref>.</p><p id="p-0130" num="0132">In step <b>903</b> the first NF producer node <b>602</b> sends a registration request to the SCP node in order to request the registration of a NF profile for the first NF producer node <b>602</b> at the SCP node. Step <b>903</b> corresponds to step <b>704</b> in <figref idref="DRAWINGS">FIG. <b>7</b></figref>.</p><p id="p-0131" num="0133">In some embodiments, prior to step <b>903</b>, the first NF producer node <b>602</b> sends a de-registration request to the SCP node <b>608</b> to request de-registration of the first NF producer node <b>602</b> from the NRF node <b>604</b>. This de-registration request corresponds to signal <b>702</b> in <figref idref="DRAWINGS">FIG. <b>7</b></figref>. The first NF producer node <b>602</b> may then receive an acknowledgement of the first de-registration request from the SCP node <b>608</b>. This de-registration acknowledgement corresponds to signal <b>703</b> in <figref idref="DRAWINGS">FIG. <b>7</b></figref>.</p><p id="p-0132" num="0134">In some embodiments the first NF producer node <b>602</b> includes an indicator in the de-registration request of whether the first NF producer node <b>602</b> is to change to a different NRF node <b>604</b>. This enables the first NF producer node <b>602</b> to indicate that de-registration is required in a &#x2018;normal&#x2019; de-registration situation, i.e. not related to a migration or change from a direct communication mode to an indirect communication mode.</p><p id="p-0133" num="0135">In some embodiments the method further comprises the first NF producer node <b>602</b> receiving a service request from the SCP node <b>608</b> for a first service to be provided by the first NF producer node <b>602</b> to a second NF consumer node.</p><p id="p-0134" num="0136">In some embodiments the method further comprises, after step <b>903</b>, sending and/or receiving, via the SCP node <b>608</b>, communications relating to a service provided by the first NF producer node <b>602</b> to the first NF consumer node <b>606</b>.</p><p id="p-0135" num="0137"><figref idref="DRAWINGS">FIG. <b>10</b></figref> illustrates a SCP node <b>1000</b> comprising processing circuitry (or logic) <b>1001</b>. The SCP node <b>1000</b> may comprise or be the SCP node <b>608</b> described above. Thus the SCP node <b>1000</b> is to enable a migration from a direct communication mode to an indirect communication mode that minimises disruption for an existing service consumer.</p><p id="p-0136" num="0138">It will be appreciated that the SCP node <b>1000</b> may comprise one or more virtual machines running different software and/or processes. The SCP node <b>1000</b> may therefore comprise one or more servers, switches and/or storage devices and/or may comprise cloud computing infrastructure that runs the software and/or processes.</p><p id="p-0137" num="0139">The processing circuitry <b>1001</b> controls the operation of the SCP node <b>1000</b> and can implement the methods described herein in relation to SCP node <b>608</b>. The processing circuitry <b>1001</b> can comprise one or more processors, processing units, multi-core processors or modules that are configured or programmed to control the SCP node <b>1000</b> in the manner described herein. In particular implementations, the processing circuitry <b>1001</b> can comprise a plurality of software and/or hardware modules that are each configured to perform, or are for performing, individual or multiple steps of the method described herein in relation to SCP node <b>608</b>.</p><p id="p-0138" num="0140">In some embodiments, the SCP node <b>1000</b> may optionally comprise a communications interface <b>1002</b>. The communications interface <b>1002</b> of the SCP node <b>1000</b> can be for use in communicating with other nodes, such as other virtual nodes. For example, the communications interface <b>1002</b> of the SCP node <b>1000</b> can be configured to transmit to and/or receive from other nodes or network functions requests, resources, information, data, signals, or similar. The processing circuitry <b>1001</b> of SCP node <b>1000</b> may be configured to control the communications interface <b>1002</b> of the SCP node <b>1000</b> to transmit to and/or receive from other nodes or network functions requests, resources, information, data, signals, or similar.</p><p id="p-0139" num="0141">Optionally, the SCP node <b>1000</b> may comprise a memory <b>1003</b>. In some embodiments, the memory <b>1003</b> of the SCP node <b>1000</b> can be configured to store program code that can be executed by the processing circuitry <b>1001</b> of the SCP node <b>1000</b> to perform the method described herein in relation to the SCP node <b>608</b>. Alternatively or in addition, the memory <b>1003</b> of the SCP node <b>1000</b>, can be configured to store any requests, resources, information, data, signals, or similar that are described herein. The processing circuitry <b>1001</b> of the SCP node <b>1000</b> may be configured to control the memory <b>1003</b> of the SCP node <b>1000</b> to store any requests, resources, information, data, signals, or similar that are described herein.</p><p id="p-0140" num="0142">Briefly, in embodiments, the SCP node <b>1000</b>, or the processing circuitry <b>1001</b> of the SCP node <b>1000</b>, in conjunction or cooperation with the communications interface <b>1002</b> and/or memory <b>1003</b> (as appropriate), can be configured to discover a NF profile for a first NF producer node <b>602</b> that is stored by a NRF node <b>604</b>, receive a registration request from the first NF producer node <b>602</b> to register a NF profile for the first NF producer node <b>602</b> at the NRF node <b>604</b>, and, in response to the received registration request, send an update request to the NRF node <b>604</b> to update the NF profile for the first NF producer node <b>602</b> to replace the service address of the first NF producer node <b>602</b> with a first service address of the SCP node <b>1000</b> that is associated with the service address of the first NF producer node.</p><p id="p-0141" num="0143">The processing circuitry <b>1001</b> can be further configured to operate according to the various other embodiments of the SCP node <b>608</b> described above with reference to <figref idref="DRAWINGS">FIGS. <b>6</b> and <b>7</b></figref>.</p><p id="p-0142" num="0144"><figref idref="DRAWINGS">FIG. <b>11</b></figref> illustrates a first NF producer node <b>1100</b> comprising processing circuitry (or logic) <b>1101</b>. The first NF producer node <b>1100</b> may comprise or be the first NF producer node <b>602</b> described above. Thus the first NF producer node <b>1100</b> is to migrate from a direct communication mode with a first NF consumer node <b>606</b> to an indirect communication mode via SCP node <b>608</b>.</p><p id="p-0143" num="0145">It will be appreciated that the first NF producer node <b>1100</b> may comprise one or more virtual machines running different software and/or processes. The first NF producer node <b>1100</b> may therefore comprise one or more servers, switches and/or storage devices and/or may comprise cloud computing infrastructure that runs the software and/or processes.</p><p id="p-0144" num="0146">The processing circuitry <b>1101</b> controls the operation of the first NF producer node <b>1100</b> and can implement the methods described herein in relation to first NF producer node <b>602</b>. The processing circuitry <b>1101</b> can comprise one or more processors, processing units, multi-core processors or modules that are configured or programmed to control the first NF producer node <b>1100</b> in the manner described herein. In particular implementations, the processing circuitry <b>1101</b> can comprise a plurality of software and/or hardware modules that are each configured to perform, or are for performing, individual or multiple steps of the method described herein in relation to the first NF producer node <b>602</b>.</p><p id="p-0145" num="0147">In some embodiments, the first NF producer node <b>1100</b> may optionally comprise a communications interface <b>1102</b>. The communications interface <b>1102</b> of the first NF producer node <b>1100</b> can be for use in communicating with other nodes, such as other virtual nodes. For example, the communications interface <b>1102</b> of the first NF producer node <b>1100</b> can be configured to transmit to and/or receive from other nodes or network functions requests, resources, information, data, signals, or similar. The processing circuitry <b>1101</b> of the first NF producer node <b>1100</b> may be configured to control the communications interface <b>1102</b> of the first NF producer node <b>1100</b> to transmit to and/or receive from other nodes or network functions requests, resources, information, data, signals, or similar.</p><p id="p-0146" num="0148">Optionally, the first NF producer node <b>1100</b> may comprise a memory <b>1103</b>. In some embodiments, the memory <b>1103</b> of the first NF producer node <b>1100</b> can be configured to store program code that can be executed by the processing circuitry <b>1101</b> of the first NF producer node <b>1100</b> to perform the method described herein in relation to the first NF producer node <b>602</b>. Alternatively or in addition, the memory <b>1103</b> of the first NF producer node <b>1100</b>, can be configured to store any requests, resources, information, data, signals, or similar that are described herein. The processing circuitry <b>1101</b> of the first NF producer node <b>1100</b> may be configured to control the memory <b>1103</b> of the first NF producer node <b>1100</b> to store any requests, resources, information, data, signals, or similar that are described herein.</p><p id="p-0147" num="0149">Briefly, in embodiments, the first NF producer node <b>1100</b>, or the processing circuitry <b>1101</b> of the first NF producer node <b>1100</b>, in conjunction or cooperation with the communications interface <b>1102</b> and/or memory <b>1103</b> (as appropriate), can be configured update a stored service address for NRF node <b>604</b> to a service address of the SCP node <b>608</b>, and send a registration request the SCP node <b>608</b> to register a NF profile for the first NF producer node <b>602</b> at the SCP node <b>608</b>.</p><p id="p-0148" num="0150">It should be noted that the above-mentioned embodiments illustrate rather than limit the invention, and that those skilled in the art will be able to design many alternative embodiments without departing from the scope of the appended claims. The word &#x201c;comprising&#x201d; does not exclude the presence of elements or steps other than those listed in a claim, &#x201c;a&#x201d; or &#x201c;an&#x201d; does not exclude a plurality, and a single processor or other unit may fulfil the functions of several units recited in the claims. Any reference signs in the claims shall not be construed so as to limit their scope.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-01-58" num="01-58"><claim-text><b>1</b>-<b>58</b>. (canceled)</claim-text></claim><claim id="CLM-00059" num="00059"><claim-text><b>59</b>. A method of operating a Service Communication Proxy (SCP) node in a communication network as a proxy network repository function (NRF) for a first network function (NF) producer node in the communication network, wherein the first NF producer node is to migrate from a direct communication mode with a first NF consumer node to an indirect communication mode with the first NF consumer node via the SCP, wherein the method in the SCP node comprises:<claim-text>discovering a NF profile for the first NF producer node, wherein the NF profile for the first NF producer node is stored by a first NRF node in the communication network, and the NF profile comprises a service address for the first NF producer node;</claim-text><claim-text>receiving a registration request from the first NF producer node, wherein the registration request is a request to register a NF profile for the first NF producer node at a NRF node, wherein the registration request indicates the service address for the first NF producer node; and</claim-text><claim-text>in response to the received registration request, sending an update request to the first NRF node to update the NF profile for the first NF producer node stored by the first NRF node to replace the service address of the first NF producer node with a first service address of the SCP node that is associated with the service address of the first NF producer node.</claim-text></claim-text></claim><claim id="CLM-00060" num="00060"><claim-text><b>60</b>. A Service Communication Proxy (SCP) node for use in a communication network as a proxy network repository function (NRF) for a first network function (NF) producer node in the communication network, wherein the first NF producer node is to migrate from a direct communication mode with a first NF consumer node to an indirect communication mode with the first NF consumer node via the SCP, wherein the SCP node comprises processing circuitry and a memory, said memory containing instructions executable by said processing circuitry, whereby said SCP node is operative to:<claim-text>discover a NF profile for the first NF producer node, wherein the NF profile for the first NF producer node is stored by a first NRF node in the communication network, and the NF profile comprises a service address for the first NF producer node;</claim-text><claim-text>receive a registration request from the first NF producer node, wherein the registration request is a request to register a NF profile for the first NF producer node at a NRF node, wherein the registration request indicates the service address for the first NF producer node; and</claim-text><claim-text>in response to the received registration request, send an update request to the first NRF node to update the NF profile for the first NF producer node stored by the first NRF node to replace the service address of the first NF producer node with a first service address of the SCP node that is associated with the service address of the first NF producer node.</claim-text></claim-text></claim><claim id="CLM-00061" num="00061"><claim-text><b>61</b>. The SCP node as claimed in <claim-ref idref="CLM-00060">claim 60</claim-ref>, wherein the SCP node is further operative to, prior to discovering the NF profile, send a subscription request to the first NRF node to subscribe to changes in services of the first NF producer node.</claim-text></claim><claim id="CLM-00062" num="00062"><claim-text><b>62</b>. The SCP node as claimed in <claim-ref idref="CLM-00061">claim 61</claim-ref>, wherein the subscription request sent to the first NRF node is for subscribing to changes in services of all NF producer nodes for which NF profiles are stored by the first NRF node.</claim-text></claim><claim id="CLM-00063" num="00063"><claim-text><b>63</b>. The SCP node as claimed in <claim-ref idref="CLM-00060">claim 60</claim-ref>, wherein the SCP node is further operative to, prior to receiving the registration request:<claim-text>receive a first de-registration request from the first NF producer node, wherein the first de-registration request is a request to de-register the first NF producer node from the first NRF node; and</claim-text><claim-text>in response to the received first de-registration request, send an acknowledgement of the first de-registration request to the first NF producer node.</claim-text></claim-text></claim><claim id="CLM-00064" num="00064"><claim-text><b>64</b>. The SCP node as claimed in <claim-ref idref="CLM-00063">claim 63</claim-ref>, wherein in response to the received first de-registration request, the SCP node does not send a corresponding de-registration request to the first NRF node on behalf of the first NF producer node.</claim-text></claim><claim id="CLM-00065" num="00065"><claim-text><b>65</b>. The SCP node as claimed in <claim-ref idref="CLM-00063">claim 63</claim-ref>, wherein the SCP node is further operative to:<claim-text>determine if the received first de-registration request comprises an indicator that the first NF producer node is to change to a different NRF node;</claim-text><claim-text>if the received first de-registration request does comprise the indicator, in response to the received first de-registration request the SCP node is configured to not send a de-registration request to the first NRF node on behalf of the first NF producer node; and</claim-text><claim-text>otherwise, send a second de-registration request to the first NRF node, wherein the second de-registration request is a request to de-register the first NF producer node from the first NRF node.</claim-text></claim-text></claim><claim id="CLM-00066" num="00066"><claim-text><b>66</b>. The SCP node as claimed in <claim-ref idref="CLM-00063">claim 63</claim-ref>, wherein the SCP node is further operative to:<claim-text>following receipt of the first de-registration request, determine whether the registration request is received from the first NF producer node within a predetermined time period of receipt of the first de-registration request;</claim-text><claim-text>if not, send a second de-registration request to the first NRF node, wherein the second de-registration request is a request to de-register the first NF producer node from the first NRF node; and</claim-text><claim-text>otherwise, in response to the registration request being received within the predetermined time period, the SCP node is configured to not send a de-registration request to the first NRF node on behalf of the first NF producer node.</claim-text></claim-text></claim><claim id="CLM-00067" num="00067"><claim-text><b>67</b>. The SCP node as claimed in <claim-ref idref="CLM-00060">claim 60</claim-ref>, wherein the SCP node is operative to send the update request as a request to replace the stored NF profile for the first NF producer node with a new NF profile for the first NF producer node that has the first service address of the SCP node as the service address of the first NF producer node.</claim-text></claim><claim id="CLM-00068" num="00068"><claim-text><b>68</b>. The SCP node as claimed in <claim-ref idref="CLM-00060">claim 60</claim-ref>, wherein the SCP node is further operative to:<claim-text>in response to receiving the registration request, determine whether a NF profile for the first NF producer node has been discovered from the first NRF node;</claim-text><claim-text>wherein the SCP node is operative to send the update request if the NF profile for the first NF producer node has been discovered from the first NRF node.</claim-text></claim-text></claim><claim id="CLM-00069" num="00069"><claim-text><b>69</b>. The SCP node as claimed in <claim-ref idref="CLM-00060">claim 60</claim-ref>, wherein, to discover a NF profile for the first NF producer node, the SCP node is operative to:<claim-text>send a discovery request to the first NRF node, wherein the discovery request requests discovery of the NF profile for the first NF producer node; and</claim-text><claim-text>receive a discovery response from the first NRF node, wherein the discovery response comprises the NF profile for the first NF producer node.</claim-text></claim-text></claim><claim id="CLM-00070" num="00070"><claim-text><b>70</b>. The SCP node as claimed in <claim-ref idref="CLM-00060">claim 60</claim-ref>, wherein the SCP node is further operative to, prior to discovering a NF profile:<claim-text>send an authorisation request to the first NRF node to request authorisation to access service information of NF producer nodes stored by the first NRF node.</claim-text></claim-text></claim><claim id="CLM-00071" num="00071"><claim-text><b>71</b>. The SCP node as claimed in <claim-ref idref="CLM-00060">claim 60</claim-ref>, wherein the NF profile for the first NF producer node further comprises an indication of one or more services provided by the first NF producer node.</claim-text></claim><claim id="CLM-00072" num="00072"><claim-text><b>72</b>. The SCP node as claimed in <claim-ref idref="CLM-00060">claim 60</claim-ref>, wherein the discovered NF profile of the first NF producer node indicates that the first NF producer node is capable of providing at least a first service to consumer nodes, and wherein the SCP node is further operative to:<claim-text>receive a service request from a second NF consumer node, wherein the service request is a request for a first service to be provided to the second NF consumer node;</claim-text><claim-text>identify from the discovered NF profile that the first NF producer node is capable of providing the first service;</claim-text><claim-text>send the service request received from the second NF consumer node to the first NF producer node using the service address of the first NF producer node in the discovered NF profile.</claim-text></claim-text></claim><claim id="CLM-00073" num="00073"><claim-text><b>73</b>. The SCP node as claimed in <claim-ref idref="CLM-00072">claim 72</claim-ref>, wherein the SCP node is further operative to handle further communications relating to the provision of the first service between the first NF producer node and the second NF consumer node.</claim-text></claim><claim id="CLM-00074" num="00074"><claim-text><b>74</b>. A first network function (NF) producer node for use in a communication network, wherein the first NF producer node is to migrate from a direct communication mode with a first NF consumer node to an indirect communication mode with the first NF consumer node via a Service Communication Proxy (SCP) node in the communication network, wherein the first NF producer node comprises processing circuitry and a memory, said memory containing instructions executable by said processing circuitry whereby said first NF producer node is operative to:<claim-text>update a stored service address for a network repository function (NRF) node in the communication network to a service address of the SCP node, wherein the NRF node is storing a NF profile for the first NF producer node; and</claim-text><claim-text>send a registration request the SCP node, wherein the registration request is a request to register a NF profile for the first NF producer node at the SCP node.</claim-text></claim-text></claim><claim id="CLM-00075" num="00075"><claim-text><b>75</b>. The first NF producer node as claimed in <claim-ref idref="CLM-00074">claim 74</claim-ref>, wherein the first NF producer node is further operative to, prior to sending the registration request:<claim-text>send a de-registration request to the SCP node, wherein the de-registration request is a request to de-register the first NF producer node from the first NRF node; and</claim-text><claim-text>receive an acknowledgement of the first de-registration request from the SCP node.</claim-text></claim-text></claim><claim id="CLM-00076" num="00076"><claim-text><b>76</b>. The first NF producer node as claimed in <claim-ref idref="CLM-00075">claim 75</claim-ref>, wherein the de-registration request comprises an indicator of whether the first NF producer node is to change to a different NRF node.</claim-text></claim><claim id="CLM-00077" num="00077"><claim-text><b>77</b>. The first NF producer node as claimed in <claim-ref idref="CLM-00074">claim 74</claim-ref>, wherein the first NF producer node is further operative to receive a service request from the SCP node, wherein the service request is a request for a first service to be provided by the first NF producer node to a second NF consumer node.</claim-text></claim><claim id="CLM-00078" num="00078"><claim-text><b>78</b>. The first NF producer node as claimed in <claim-ref idref="CLM-00074">claim 74</claim-ref>, wherein the first NF producer node is further operative to, after sending the registration request, perform at least one of sending or receiving, via the SCP node, communications relating to a service provided by the first NF producer node to the first NF consumer node.</claim-text></claim></claims></us-patent-application>