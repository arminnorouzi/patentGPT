<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230004376A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230004376</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17805339</doc-number><date>20220603</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>JP</country><doc-number>2021-111639</doc-number><date>20210705</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>F</subclass><main-group>8</main-group><subgroup>65</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>F</subclass><main-group>8</main-group><subgroup>61</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>07</class><subclass>C</subclass><main-group>5</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>F</subclass><main-group>8</main-group><subgroup>65</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>F</subclass><main-group>8</main-group><subgroup>61</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>07</class><subclass>C</subclass><main-group>5</main-group><subgroup>008</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">CENTER, OTA MASTER, METHOD, NON-TRANSITORY STORAGE MEDIUM, AND VEHICLE</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>TOYOTA JIDOSHA KABUSHIKI KAISHA</orgname><address><city>Toyota-shi</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>ISHIKAWA</last-name><first-name>Tomoyasu</first-name><address><city>Nagoya-shi</city><country>JP</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>TANIMORI</last-name><first-name>Shunsuke</first-name><address><city>Toyota-shi</city><country>JP</country></address></addressbook></inventor></inventors></us-parties><assignees><assignee><addressbook><orgname>TOYOTA JIDOSHA KABUSHIKI KAISHA</orgname><role>03</role><address><city>Toyota-shi</city><country>JP</country></address></addressbook></assignee></assignees></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A center configured to communicate with an OTA master configured to control software update for electronic control units mounted on a vehicle includes one or more processors. The one or more processors are configured to store security information in which security levels required for the software update are associated with the electronic control units mounted on the vehicle, respectively, and generate a distribution package applied encryption at the security level associated with a target electronic control unit based on the security information. The target electronic control unit is an electronic control unit that is a target of the software update.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="229.02mm" wi="118.36mm" file="US20230004376A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="210.82mm" wi="158.83mm" file="US20230004376A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="226.65mm" wi="142.75mm" file="US20230004376A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="241.81mm" wi="147.74mm" file="US20230004376A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="100.75mm" wi="74.59mm" file="US20230004376A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="242.57mm" wi="120.40mm" file="US20230004376A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="239.27mm" wi="129.79mm" file="US20230004376A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATION</heading><p id="p-0002" num="0001">This application claims priority to Japanese Patent Application No. 2021-111639 filed on Jul. 5, 2021, incorporated herein by reference in its entirety.</p><heading id="h-0002" level="1">BACKGROUND</heading><heading id="h-0003" level="1">1. Technical Field</heading><p id="p-0003" num="0002">The present disclosure relates to a center that controls software update of electronic control units, and relates to an over-the-air (OTA) master, a method, a non-transitory storage medium, and a vehicle.</p><heading id="h-0004" level="1">2. Description of Related Art</heading><p id="p-0004" num="0003">Vehicles include a plurality of electronic control units configured to control operations of the vehicles. The electronic control unit includes a processor, a transitory storage unit such as a random-access memory (RAM), and a non-volatile memory that is a non-volatile storage unit such as a flash read-only memory (ROM). The processor implements control functions of the electronic control unit by executing software stored in the non-volatile memory. The software stored in each electronic control unit is rewritable. Software update to a newer version of the software enables improvement in the functions of the electronic control unit and addition of new vehicle control functions.</p><p id="p-0005" num="0004">An over-the-air (OTA) technology is known as a technology for updating software of electronic control units. In the OTA technology, a device that handles a software update process for a vehicle is wirelessly connected both to an in-vehicle communication device connected to an in-vehicle network and to a communication network such as the Internet. The device that handles the software update process for the vehicle downloads software from a server through wireless communication and installs the downloaded software into the electronic control unit to update or add the software for the electronic control unit (see, for example, Japanese Unexamined Patent Application Publication No. 2004-326689 (JP 2004-326689 A)).</p><heading id="h-0005" level="1">SUMMARY</heading><p id="p-0006" num="0005">The electronic control units mounted on the vehicle include electronic control units related to traveling, such as an electronic control unit that controls motion of the vehicle and an electronic control unit for meters, and electronic control units unrelated to traveling, such as an electronic control unit for entertainment. Therefore, when the security level (encryption level) of a distribution package including data and information necessary for updating software is set uniformly based on the electronic control units related to traveling, the load of the distribution package decryption process increases. That is, the period required for software update increases. Thus, there is room for improvement in the setting of the security level of the distribution package.</p><p id="p-0007" num="0006">The present disclosure provides a center, an OTA master, a method, a non-transitory storage medium, and a vehicle, that are capable of appropriately transmitting and receiving a distribution package by dynamically setting a security level depending on an electronic control unit to be updated.</p><p id="p-0008" num="0007">A first aspect of the technology of the present disclosure relates to a center configured to communicate with an OTA master configured to control software update for electronic control units mounted on a vehicle. The center includes one or more processors. The one or more processors are configured to store security information in which security levels required for the software update are associated with the electronic control units mounted on the vehicle, respectively. The one or more processors are configured to generate a distribution package applied encryption at a security level associated with a target electronic control unit based on the security information. The target electronic control unit is an electronic control unit that is a target of the software update.</p><p id="p-0009" num="0008">In the center according to the first aspect of the technology of the present disclosure, the one or more processors may be configured to receive, from the vehicle, version information indicating a version of software of each of the electronic control units. The one or more processors may be configured to determine whether the target electronic control unit is present based on the version information. The one or more processors may be configured to, when the one or more processors determine that the target electronic control unit is present, generate the distribution package applied the encryption at the security level associated with the target electronic control unit based on the security information. The one or more processors may be configured to transmit the distribution package to the OTA master based on a request from the OTA master.</p><p id="p-0010" num="0009">In the center according to the first aspect of the technology of the present disclosure, the one or more processors may be configured to generate the distribution package including information that specifies a method for the encryption.</p><p id="p-0011" num="0010">In the center according to the first aspect of the technology of the present disclosure, the one or more processors may be configured to, when the security level associated with the target electronic control unit is equal to or higher than a predetermined threshold, generate the distribution package applied the encryption based on information unique to the vehicle.</p><p id="p-0012" num="0011">In the center according to the first aspect of the technology of the present disclosure, the one or more processors may be configured to, when the security level associated with the target electronic control unit is lower than a predetermined threshold, generate the distribution package applied the encryption based on information common to a plurality of the vehicles.</p><p id="p-0013" num="0012">In a second aspect of the technology of the present disclosure, an OTA master configured to control software update for electronic control units mounted on a vehicle includes one or more processors. The one or more processors are configured to receive, from a center, a distribution package applied encryption at a security level associated with a target electronic control unit. The target electronic control unit is an electronic control unit that is a target of the software update. The one or more processors are configured to control the software update for the target electronic control unit based on the received distribution package.</p><p id="p-0014" num="0013">In the OTA master according to the second aspect of the technology of the present disclosure, the one or more processors may be configured to transmit, to the center, version information indicating a version of each of the electronic control units mounted on the vehicle. The one or more processors may be configured to receive, from the center, the distribution package applied the encryption at the security level associated with the target electronic control unit based on the version information.</p><p id="p-0015" num="0014">In the OTA master according to the second aspect of the technology of the present disclosure, the one or more processors may be configured to decrypt the distribution package based on information that is included in the distribution package and specifies a method for the encryption.</p><p id="p-0016" num="0015">In the OTA master according to the second aspect of the technology of the present disclosure, the one or more processors may be configured to decrypt the distribution package based on information unique to the vehicle.</p><p id="p-0017" num="0016">In the OTA master according to the second aspect of the technology of the present disclosure, the one or more processors may be configured to decrypt the distribution package based on information common to a plurality of the vehicles.</p><p id="p-0018" num="0017">A third aspect of the technology of the present disclosure relates to a method to be executed by a center configured to communicate with an OTA master configured to control software update for electronic control units mounted on a vehicle. The OTA master includes one or more processors and a memory. The method includes storing security information in which security levels required for the software update are associated with the electronic control units mounted on the vehicle, respectively, and generating a distribution package applied encryption at a security level associated with a target electronic control unit based on the security information. The target electronic control unit is an electronic control unit that is a target of the software update.</p><p id="p-0019" num="0018">A fourth aspect of the technology of the present disclosure relates to a method to be executed by an OTA master configured to control software update for electronic control units mounted on a vehicle. The OTA master includes one or more processors and a memory. The method includes receiving, from a center, a distribution package applied encryption at a security level associated with a target electronic control unit. The target electronic control unit is an electronic control unit that is a target of the software update. The method includes controlling the software update for the target electronic control unit based on the received distribution package.</p><p id="p-0020" num="0019">The center according to the first aspect of the technology of the present disclosure may further include a non-transitory storage medium storing instructions that are executable by the one or more processors and that cause the one or more processors to perform functions. The functions may include storing the security information in which the security levels required for the software update are associated with the electronic control units mounted on the vehicle, respectively, and generating the distribution package applied the encryption at the security level associated with the target electronic control unit based on the security information.</p><p id="p-0021" num="0020">The OTA master according to the second aspect of the technology of the present disclosure may further include a non-transitory storage medium storing instructions that are executable by the one or more processors and that cause the one or more processors to perform functions. The functions may include receiving, from the center, the distribution package applied the encryption at the security level associated with the target electronic control unit, and controlling the software update for the target electronic control unit based on the received distribution package.</p><p id="p-0022" num="0021">The OTA master according to the second aspect of the technology of the present disclosure may be mounted on a vehicle.</p><p id="p-0023" num="0022">According to the present disclosure, the center sets the security level for the distribution package depending on, for example, the type of the electronic control unit to be updated during the software update. Thus, the distribution package at the security level appropriate to the electronic control unit to be updated can be distributed to the OTA master.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0006" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0024" num="0023">Features, advantages, and technical and industrial significance of exemplary embodiments of the present disclosure will be described below with reference to the accompanying drawings, in which like signs denote like elements, and wherein:</p><p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram showing an overall configuration of a network system according to an embodiment;</p><p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a block diagram showing a schematic configuration of a center;</p><p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a functional block diagram of the center;</p><p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. <b>4</b></figref> shows an example of security information to be stored in the center;</p><p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a block diagram showing a schematic configuration of an OTA master;</p><p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a functional block diagram of the OTA master;</p><p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a flowchart of a distribution control process to be executed by the center; and</p><p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a flowchart of a software update control process to be executed by the OTA master.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0007" level="1">DETAILED DESCRIPTION OF EMBODIMENTS</heading><p id="p-0033" num="0032">In the present disclosure, a center prestores information in which a security level required for software update is associated with each electronic control unit mounted on a vehicle. When the center receives an update data download request from an OTA master, the center generates a distribution package encrypted at the security level associated with the electronic control unit to be updated, and transmits the distribution package to the OTA master. Through this process, the software update can be executed at the security level required in the electronic control unit to be updated.</p><p id="p-0034" num="0033">An embodiment of the present disclosure will be described below in detail with reference to the drawings.</p><heading id="h-0008" level="2">Embodiment</heading><heading id="h-0009" level="2">Configuration</heading><p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram showing an overall configuration of a network system according to the embodiment of the present disclosure. The network system shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref> is a system for updating software of a plurality of electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>mounted on a vehicle. The network system includes a center <b>10</b> outside the vehicle, an in-vehicle network <b>20</b> constructed inside the vehicle, and a network <b>70</b>.</p><heading id="h-0010" level="2">(1) Center</heading><p id="p-0036" num="0035">The center <b>10</b> is communicable, via the network <b>70</b>, with an OTA master <b>30</b> described later in the in-vehicle network <b>20</b>. The center <b>10</b> transmits software update data of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>to the OTA master <b>30</b> and receives a notification about progress of a software update process from the OTA master <b>30</b>. The center <b>10</b> can control and manage the software update of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>connected to the OTA master <b>30</b>. The center <b>10</b> has functions of a so-called server.</p><p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a block diagram showing a schematic configuration of the center <b>10</b> in <figref idref="DRAWINGS">FIG. <b>1</b></figref>. As shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the center <b>10</b> includes a central processing unit (CPU) <b>11</b>, a random-access memory (RAM) <b>12</b>, a storage device <b>13</b>, and a communication device <b>14</b>. The storage device <b>13</b> includes a readable/writable storage medium such as a hard disk drive (HDD) or a solid state drive (SSD). For example, the storage device <b>13</b> stores programs for executing software update management, information to be used for software update control and software update management, and software update data of each electronic control unit. In the center <b>10</b>, the CPU <b>11</b> executes the program read from the storage device <b>13</b> by using the RAM <b>12</b> as a work area to execute a predetermined process related to software update. The communication device <b>14</b> communicates with the OTA master <b>30</b> via the network <b>70</b>.</p><p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a functional block diagram of the center <b>10</b> shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>. The center <b>10</b> shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> includes a determination unit <b>15</b>, a storage unit <b>16</b>, a communication unit <b>17</b>, and a control unit <b>18</b>. The storage unit <b>16</b> is implemented by the storage device <b>13</b> shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>. The determination unit <b>15</b>, the communication unit <b>17</b>, and the control unit <b>18</b> are implemented by the CPU <b>11</b> in <figref idref="DRAWINGS">FIG. <b>2</b></figref> executing the programs stored in the storage device <b>13</b> by using the RAM <b>12</b>.</p><p id="p-0039" num="0038">The storage unit <b>16</b> stores information related to the software update process of one or more electronic control units mounted on the vehicle. As the information related to the software update process, the storage unit <b>16</b> stores at least update management information and software update data of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d</i>. The update management information is information in which information indicating software available for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>is associated with vehicle identification information (vehicle ID) for identifying the vehicle. Examples of the information indicating software available for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>include a combination of pieces of latest version information of software products of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d</i>. As the information related to the software update process, the storage unit <b>16</b> stores security information in which a security level required for software update is associated with each electronic control unit mounted on the vehicle. <figref idref="DRAWINGS">FIG. <b>4</b></figref> shows an example of the security information stored in the storage unit <b>16</b>. In the security information exemplified in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the electronic control units mounted on the vehicle and security levels required for software update are associated with each other. For example, the security level can be changed depending on whether the electronic control unit is an electronic control unit related to traveling, such as an electronic control unit that controls the vehicle (for a power train, a brake, steering, and the like) or an electronic control unit that presents conditions of the vehicle (for meters and the like), or is an electronic control unit that is not so related to traveling, such as an electronic control unit that provides entertainment contents (for multimedia and the like). That is, the security level can be changed depending on the type of the electronic control unit. As a specific example, a relatively high security level is set for the electronic control unit related to traveling. The security level of the electronic control unit that is not so related to traveling can be set to a relatively low security level (lower than the security level of the electronic control unit related to traveling). As the information related to the software update process, the storage unit <b>16</b> can also store a status of the software update being executed in the vehicle. The storage unit <b>16</b> can further store information related to the type of a non-volatile memory mounted on each of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d. </i></p><p id="p-0040" num="0039">The communication unit <b>17</b> functions as a transmission unit and a reception unit that transmit and receive data, information, requests, or the like to and from the OTA master <b>30</b>. The communication unit <b>17</b> receives a software update check request from the OTA master <b>30</b> (reception unit). For example, the update check request is transmitted from the OTA master <b>30</b> to the center <b>10</b> when power supply or ignition is turned ON (hereinafter referred to as &#x201c;powered ON&#x201d;) in the vehicle. The update check request is information for requesting the center <b>10</b> to check whether there is update data of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>based on vehicle configuration information described later. In response to the update check request received from the OTA master <b>30</b>, the communication unit <b>17</b> transmits information indicating the presence or absence of update data to the OTA master <b>30</b> (transmission unit). The communication unit <b>17</b> also receives a distribution package transmission request (download request) from the OTA master <b>30</b> (reception unit). In response to the reception of the distribution package download request, the communication unit <b>17</b> transmits, to the OTA master <b>30</b>, a distribution package including the software update data of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>and encrypted at a security level associated with the electronic control unit to be updated (described later).</p><p id="p-0041" num="0040">When the communication unit <b>17</b> receives the update check request from the OTA master <b>30</b>, the determination unit <b>15</b> determines whether there is software update data for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>mounted on the vehicle identified by the vehicle ID included in the update check request based on the update management information (for example, versions of the electronic control units) stored in the storage unit <b>16</b>. A result of the determination made by the determination unit <b>15</b> as to whether there is update data is transmitted to the OTA master <b>30</b> by the communication unit <b>17</b>.</p><p id="p-0042" num="0041">When the determination unit <b>15</b> determines that there is software update data for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>and a distribution package download request is received from the OTA master <b>30</b>, the control unit <b>18</b> generates a distribution package including the update data to be transmitted to the OTA master <b>30</b>. At this time, the control unit <b>18</b> generates a distribution package encrypted at a predetermined security level based on the security information stored in the storage unit <b>16</b> and information on the electronic control unit to be updated that is determined by the determination unit <b>15</b>. The distribution package may include information that specifies an encryption method. The encryption based on the security level will be described later.</p><heading id="h-0011" level="2">(2) In-Vehicle Network</heading><p id="p-0043" num="0042">The in-vehicle network <b>20</b> includes the OTA master <b>30</b>, the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d</i>, and a communication module <b>50</b>. The OTA master <b>30</b> and the communication module <b>50</b> are connected via a bus <b>60</b><i>a</i>. The OTA master <b>30</b> and the electronic control units <b>40</b><i>a </i>and <b>40</b><i>b </i>are connected via a bus <b>60</b><i>b</i>. The OTA master <b>30</b> and the electronic control units <b>40</b><i>c </i>and <b>40</b><i>d </i>are connected via a bus <b>60</b><i>c. </i></p><p id="p-0044" num="0043">The OTA master <b>30</b> can wirelessly communicate with the center <b>10</b> via the bus <b>60</b><i>a</i>, the communication module <b>50</b>, and the network <b>70</b>. The OTA master <b>30</b> manages an OTA status. The OTA master <b>30</b> has a function of controlling an update sequence that is a flow of the software update process and updating software of an electronic control unit to be updated (hereinafter referred to as &#x201c;target electronic control unit&#x201d;). The OTA master <b>30</b> controls the software update of the target electronic control unit among the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>based on, for example, the update data acquired from the center <b>10</b>. The OTA master <b>30</b> may also be referred to as &#x201c;central gateway (CGW)&#x201d;. One or more target electronic control units may function as the OTA master <b>30</b>.</p><p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a block diagram showing a schematic configuration of the OTA master <b>30</b> in <figref idref="DRAWINGS">FIG. <b>1</b></figref>. As shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, the OTA master <b>30</b> includes a CPU <b>31</b>, a RAM <b>32</b>, a read-only memory (ROM) <b>33</b>, a storage device <b>34</b>, and a communication device <b>36</b>. The CPU <b>31</b>, the RAM <b>32</b>, the ROM <b>33</b>, and the storage device <b>34</b> constitute a microcomputer <b>35</b>. In the OTA master <b>30</b>, the CPU <b>31</b> executes a program read from the ROM <b>33</b> by using the RAM <b>32</b> as a work area to execute a predetermined process related to software update. The communication device <b>36</b> communicates with the communication module <b>50</b> and the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>via the buses <b>60</b><i>a </i>to <b>60</b><i>c </i>shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>.</p><p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a functional block diagram of the OTA master <b>30</b> shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>. The OTA master <b>30</b> shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref> includes a storage unit <b>37</b>, a communication unit <b>38</b>, and a control unit <b>39</b>. The storage unit <b>37</b> is implemented by the storage device <b>34</b> shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>. The communication unit <b>38</b> and the control unit <b>39</b> are implemented by the CPU <b>31</b> in <figref idref="DRAWINGS">FIG. <b>5</b></figref> executing programs stored in the ROM <b>33</b> by using the RAM <b>32</b>.</p><p id="p-0047" num="0046">The storage unit <b>37</b> stores, for example, a program for executing software update of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>(control program for the OTA master <b>30</b>), various types of data to be used when executing the software update, and software update data downloaded from the center <b>10</b>. The storage unit <b>37</b> can also store information related to the type of the non-volatile memory mounted on each of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d</i>. The storage unit <b>37</b> may prestore an encryption method applied to a distribution package to be transmitted from the center <b>10</b>.</p><p id="p-0048" num="0047">The communication unit <b>38</b> functions as a transmission unit and a reception unit that transmit and receive data, information, requests, or the like to and from the center <b>10</b>. For example, the communication unit <b>38</b> transmits a software update check request to the center <b>10</b> when the vehicle is powered ON (transmission unit). For example, the update check request includes the vehicle ID for identifying the vehicle, and version information related to current software versions of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>connected to the in-vehicle network <b>20</b>. The update check request may also include information related to the types of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>connected to the in-vehicle network <b>20</b>. The vehicle ID and the current software versions of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>are used to determine whether there is software update data for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>by making comparison with the latest software versions held in the center <b>10</b> for each vehicle ID. The information related to the types of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>can be used by the center <b>10</b> to determine the security level of a distribution package. The communication unit <b>38</b> receives a notification about the presence or absence of update data from the center <b>10</b> as a response to the update check request (reception unit). When there is software update data for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d</i>, the communication unit <b>38</b> transmits a download request for a distribution package of the software update data to the center <b>10</b> (transmission unit). The communication unit <b>38</b> receives (downloads) the distribution package transmitted from the center <b>10</b> based on control of the control unit <b>39</b> (reception unit). The communication unit <b>38</b> transmits, to the center <b>10</b>, software update statuses received from the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>(transmission unit).</p><p id="p-0049" num="0048">The control unit <b>39</b> determines whether there is software update data for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>based on the response to the update check request that is received from the center <b>10</b> by the communication unit <b>38</b>. The control unit <b>39</b> decrypts and verifies authenticity of the distribution package received (downloaded) from the center <b>10</b> by the communication unit <b>38</b> and stored in the storage unit <b>37</b> based on the control of the control unit <b>39</b>. The control unit <b>39</b> controls the software update process (various types of verification, installation, activation, or the like) of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>by using the update data received (downloaded) from the center <b>10</b>. Specifically, the control unit <b>39</b> transfers one or more pieces of update data (update software) downloaded in the distribution package to the target electronic control unit, and causes the target electronic control unit to install the update software based on the update data. After the installation is completed, the control unit <b>39</b> instructs the target electronic control unit to activate, that is, enable the installed update software. In this software update process, the control unit <b>39</b> appropriately controls procedures such as various types of verification, installation, and activation in the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d. </i></p><p id="p-0050" num="0049">The electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>are devices (ECUs) configured to control operations of individual parts of the vehicle. Although <figref idref="DRAWINGS">FIG. <b>1</b></figref> shows an example in which the in-vehicle network <b>20</b> includes four electronic control units <b>40</b><i>a </i>to <b>40</b><i>d</i>, the number of electronic control units is not particularly limited. For example, a display device (human-machine interface (HMI)) for various types of display such as display of information indicating that there is update data during the software update process of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d</i>, display of an acceptance request screen for requesting acceptance of a user or administrator of the vehicle for the software update, and display of a result of the software update may be connected to the OTA master <b>30</b>. Examples of the display device include a car navigation system. The number of buses connecting the electronic control units to the OTA master <b>30</b> is not particularly limited as well. For example, the display device may be connected to the OTA master <b>30</b> via a bus other than the buses <b>60</b><i>a </i>to <b>60</b><i>c. </i></p><p id="p-0051" num="0050">The communication module <b>50</b> has a function of controlling communication between the center <b>10</b> and the vehicle. The communication module <b>50</b> connects the in-vehicle network <b>20</b> to the center <b>10</b>. The communication module <b>50</b> is wirelessly connected to the center <b>10</b> via the network <b>70</b> so that, for example, the OTA master <b>30</b> authenticates the vehicle and downloads update data. The communication module <b>50</b> may be included in the OTA master <b>30</b>.</p><heading id="h-0012" level="2">Overview of Software Update Process</heading><p id="p-0052" num="0051">For example, the OTA master <b>30</b> transmits a software update check request to the center <b>10</b> when the vehicle is powered ON. The update check request includes at least the vehicle ID for identifying the vehicle, and the vehicle configuration information. The vehicle configuration information is information related to conditions of the electronic control units (system configuration), such as hardware and current software versions of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>connected to the in-vehicle network <b>20</b>. The vehicle configuration information can be created by acquiring identification numbers of the electronic control units (ECU_IDs) and identification numbers of the software versions of the electronic control units (ECU_Software_IDs) from the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>connected to the in-vehicle network <b>20</b>. The vehicle ID and the current software versions of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>are used to determine whether there is software update data for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>by making comparison with the latest software versions held in the center <b>10</b> for each vehicle ID. In response to the update check request received from the OTA master <b>30</b>, the center <b>10</b> transmits a notification about the presence or absence of update data to the OTA master <b>30</b>. When there is software update data for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d</i>, the OTA master <b>30</b> transmits a distribution package download request to the center <b>10</b>. In response to the download request received from the OTA master <b>30</b>, the center <b>10</b> transmits, to the OTA master <b>30</b>, a distribution package (described later) including the update data and encrypted at a security level associated with the target electronic control unit based on the security information stored in the center <b>10</b>. The distribution package may include, in addition to the update data, information that specifies an encryption method applied to the distribution package, verification data for verifying the authenticity of the update data, the number of pieces of the update data, type information, and various types of control information to be used during software update. The information that specifies the encryption method applied to the distribution package may be readable prior to decryption.</p><p id="p-0053" num="0052">The OTA master <b>30</b> determines whether there is software update data for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>based on the response to the update check request that is received from the center <b>10</b>. The OTA master <b>30</b> decrypts and verifies authenticity of the distribution package received from the center <b>10</b> and stored in the storage device <b>34</b>. The OTA master <b>30</b> transfers one or more pieces of update data downloaded in the distribution package to the target electronic control unit, and causes the target electronic control unit to install the update data. After the installation is completed, the OTA master <b>30</b> instructs the target electronic control unit to activate, that is, enable the installed updated version of software.</p><p id="p-0054" num="0053">In an acceptance request process, the OTA master <b>30</b> causes an output device to output a notification that acceptance is required for software update, and a notification that prompts the user or administrator to input acceptance for the software update. Examples of the output device include a display device (not shown) that is provided in the in-vehicle network <b>20</b> and that provides notifications by display, and an audio output device (not shown) that provides notifications by audio. For example, when the display device is used as the output device in the acceptance request process, the OTA master <b>30</b> is capable of causing the display device to display an acceptance request screen for requesting acceptance of the user or administrator for the software update, and to display a notification that prompts the user or administrator to perform a specific input operation such as pressing of an acceptance button when accepting the software update. In the acceptance request process, the OTA master <b>30</b> is capable of causing the display device to display texts, icons, or the like for notifying that there is software update data for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d</i>, and to display restrictions during the execution of the software update process. In response to reception of the input of acceptance from the user or administrator, the OTA master <b>30</b> executes a control process for the installation and activation to update the software of the target electronic control unit.</p><p id="p-0055" num="0054">When the non-volatile memory of the target electronic control unit is a single-bank memory having one storage area for storing data of software or the like, the installation and activation are basically executed in succession. Therefore, the acceptance request process for the software update is executed before the installation. Even when the non-volatile memory of the target electronic control unit is the single-bank memory, the target electronic control unit may be requested to temporarily stop the update process, that is, to wait for (hold) the activation after completion of the installation. When the non-volatile memory of the target electronic control unit is a dual-bank memory having two storage areas for storing data of software or the like, the acceptance request process for the software update is executed at least after the installation and before the activation. When the non-volatile memory of the target electronic control unit is the dual-bank memory, the acceptance request process for the software update before the installation may be executed or omitted.</p><p id="p-0056" num="0055">The software update process includes a download phase, an installation phase, and an activation phase. In the download phase, the OTA master <b>30</b> downloads update data from the center <b>10</b>. In the installation phase, the OTA master <b>30</b> transfers the downloaded update data to the target electronic control unit and installs update software based on the update data in the storage area of the target electronic control unit. In the activation phase, the target electronic control unit enables the installed update software.</p><p id="p-0057" num="0056">Download is a process in which the OTA master <b>30</b> receives software update data for the electronic control unit that is transmitted from the center <b>10</b> and stores the update data in the storage unit <b>37</b>. In the download, the update data is downloaded by using a distribution package encrypted at a predetermined security level described later. The download phase includes not only the execution of download, but also control of a series of processes related to the download, such as determination of whether the download can be executed, decryption of the distribution package, and verification of the updated data.</p><p id="p-0058" num="0057">The update data transmitted from the center <b>10</b> to the OTA master <b>30</b> may include update software for the electronic control units (whole data or difference data), compressed data of the update software, or divided data of the update software or the compressed data. The update data may include an ECU_ID (or serial number) of the target electronic control unit and an ECU_Software_ID of the target electronic control unit before update. The distribution package to be downloaded may include update data for one electronic control unit or update data for a plurality of electronic control units.</p><p id="p-0059" num="0058">Installation is a process in which the OTA master <b>30</b> writes pieces of the update software (updated version program) to the non-volatile memories of a plurality of target electronic control units in predetermined order based on the update data downloaded from the center <b>10</b>. The installation phase includes not only the execution of installation, but also control of a series of processes related to the installation, such as determination of whether the installation can be executed, transfer of the update data, and verification of the update software.</p><p id="p-0060" num="0059">When the update data includes the update software (whole data), the OTA master <b>30</b> transfers the update data (update software) to the target electronic control unit in the installation phase. When the update data includes compressed data, difference data, or divided data of the update software, the OTA master <b>30</b> may transfer the update data to the target electronic control unit, and the target electronic control unit may generate the update software from the update data. Alternatively, the OTA master <b>30</b> may generate the update software from the update data and then transfer the update software to the target electronic control unit. The update software can be generated by decompressing the compressed data or assembling (integrating) the difference data or the divided data.</p><p id="p-0061" num="0060">The update software can be installed by the target electronic control unit based on an installation request from the OTA master <b>30</b>. A specific target electronic control unit that has received the update data may autonomously install the update software without receiving an explicit instruction from the OTA master <b>30</b>.</p><p id="p-0062" num="0061">Activation is a process in which the target electronic control unit enables (activates) the update software installed in the non-volatile memory. The activation phase includes not only the execution of activation, but also a series of controls related to the activation, such as determination of whether the activation can be executed, request for acceptance of the user or administrator of the vehicle for the activation, and verification of an execution result.</p><p id="p-0063" num="0062">The update software can be activated by the target electronic control unit based on an activation request from the OTA master <b>30</b>. A specific target electronic control unit that has received the update data may autonomously execute the activation after completion of the installation without receiving an explicit instruction from the OTA master <b>30</b>.</p><p id="p-0064" num="0063">The software update process can be executed successively or in parallel for a plurality of target electronic control units.</p><p id="p-0065" num="0064">The &#x201c;software update process&#x201d; herein includes not only a process of successively executing all of the download, installation, and activation, but also a process of executing only a part of the download, installation, and activation. Processes</p><p id="p-0066" num="0065">Next, processes to be executed in the network system according to the present embodiment will be described with reference to <figref idref="DRAWINGS">FIGS. <b>7</b> and <b>8</b></figref> as well.</p><p id="p-0067" num="0066"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a flowchart illustrating an example of a distribution control process to be executed by the individual components of the center <b>10</b>. The distribution control process shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref> is started when the center <b>10</b> receives an update check request transmitted by the OTA master <b>30</b>.</p><heading id="h-0013" level="2">Step S<b>701</b></heading><p id="p-0068" num="0067">The control unit <b>18</b> of the center <b>10</b> determines whether there is a software update check request (received) from the OTA master <b>30</b>. When there is an update check request (Step S<b>701</b>: YES), the process proceeds to Step S<b>702</b>. When there is no update check request (Step S<b>701</b>: NO), the process proceeds to Step S<b>704</b>.</p><heading id="h-0014" level="2">Step S<b>702</b></heading><p id="p-0069" num="0068">The control unit <b>18</b> of the center <b>10</b> checks whether there is software that needs to be updated. This check is made by comparing current software versions of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>on the vehicle that are acquired from the vehicle configuration information in the update check request and the latest software versions stored in the storage unit <b>16</b> of the center <b>10</b>. When the check is made as to whether there is software that needs to be updated, the process proceeds to Step S<b>703</b>.</p><heading id="h-0015" level="2">Step S<b>703</b></heading><p id="p-0070" num="0069">The control unit <b>18</b> of the center <b>10</b> determines whether there is software update data for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>mounted on the vehicle in the update check request based on the update management information stored in the storage unit <b>16</b> of the center <b>10</b>. Based on a determination result, the control unit <b>18</b> of the center <b>10</b> transmits information indicating the presence or absence of update data to the OTA master <b>30</b>. When the information indicating the presence or absence of update data is transmitted, the process proceeds to Step S<b>704</b>.</p><heading id="h-0016" level="2">Step S<b>704</b></heading><p id="p-0071" num="0070">The communication unit <b>17</b> of the center <b>10</b> determines whether there is a distribution package download request from the OTA master <b>30</b>. When there is a download request (Step S<b>704</b>: YES), the process proceeds to Step S<b>705</b>. When there is no download request (Step S<b>704</b>: NO), the process proceeds to Step S<b>701</b>.</p><heading id="h-0017" level="2">Step S<b>705</b></heading><p id="p-0072" num="0071">The control unit <b>18</b> of the center <b>10</b> acquires, based on the security information stored in the storage unit <b>16</b> of the center <b>10</b>, a security level associated with an electronic control unit for which determination is made that there is software update data, that is, the target electronic control unit. For example, when only an electronic control unit A is the target electronic control unit in the example of <figref idref="DRAWINGS">FIG. <b>4</b></figref>, &#x201c;Level 1&#x201d; associated with the electronic control unit A is acquired as the security level of the distribution package. For example, when a plurality of electronic control units A, B, and C is the target electronic control units, &#x201c;Level 3&#x201d; that is the highest security level among a security level 1 associated with the electronic control unit A, a security level 2 associated with the electronic control unit B, and a security level 3 associated with the electronic control unit C is acquired as the security level of the distribution package. When the security level associated with the target electronic control unit is acquired, the process proceeds to Step S<b>706</b>.</p><heading id="h-0018" level="2">Step S<b>706</b></heading><p id="p-0073" num="0072">The control unit <b>18</b> of the center <b>10</b> generates a distribution package encrypted with a strength associated with the acquired security level as a distribution package including update data to be transmitted to the OTA master <b>30</b>. As an example of the encryption, when the security level is equal to or higher than a predetermined threshold (high level), the distribution package is encrypted based on information (key) unique to the vehicle. When the security level is lower than the predetermined threshold (low level), the distribution package can be encrypted based on information (key) common to a plurality of vehicles. The information unique to the vehicle for use when the security level is equal to or higher than the predetermined threshold may be generated by using vehicle identification information such as a vehicle identification number (VIN), or the encryption may be performed differently for each VIN (for each vehicle). The distribution package may include information that specifies an encryption method. When the distribution package encrypted based on the security level associated with the target electronic control unit is generated, the process proceeds to Step S<b>707</b>.</p><heading id="h-0019" level="2">Step S<b>707</b></heading><p id="p-0074" num="0073">The communication unit <b>17</b> of the center <b>10</b> transmits, to the OTA master <b>30</b>, the distribution package encrypted based on the security level associated with the target electronic control unit. When the distribution package is transmitted, the process proceeds to Step S<b>701</b>.</p><p id="p-0075" num="0074">The embodiment described above is directed to the example in which the center <b>10</b> generates the distribution package encrypted based on the security level associated with the target electronic control unit at the timing of reception of the request from the OTA master <b>30</b>. The center <b>10</b> may generate in advance a distribution package encrypted based on a security level associated with all the target electronic control units at a timing when the update data is registered in the center <b>10</b>. In the embodiment described above, when the electronic control units A, B, and C are the target electronic control units in Step S<b>705</b>, the control unit <b>18</b> acquires &#x201c;Level 3&#x201d; that is the highest security level as the security level of the distribution package. The control unit <b>18</b> may acquire the security levels of the electronic control units A, B, and C. In this case, the control unit <b>18</b> may create, in Step S<b>706</b>, distribution packages at the acquired security levels for the individual pieces of update data of the electronic control units A, B, and C.</p><p id="p-0076" num="0075"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a flowchart illustrating an example of a software update control process to be executed by the individual components of the OTA master <b>30</b>. For example, the software update control process shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref> is executed when the vehicle is powered ON.</p><heading id="h-0020" level="2">Step S<b>801</b></heading><p id="p-0077" num="0076">The communication unit <b>38</b> of the OTA master <b>30</b> transmits, to the center <b>10</b>, an update check request as to whether there is software update data for the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d</i>. The update check request includes the vehicle ID and current software versions of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d</i>. When the update check request is transmitted to the center <b>10</b>, the process proceeds to Step S<b>802</b>.</p><heading id="h-0021" level="2">Step S<b>802</b></heading><p id="p-0078" num="0077">The communication unit <b>38</b> of the OTA master <b>30</b> receives a response to the update check request from the center <b>10</b>. When the response to the update check request is received, the process proceeds to Step S<b>803</b>.</p><heading id="h-0022" level="2">Step S<b>803</b></heading><p id="p-0079" num="0078">The control unit <b>39</b> of the OTA master <b>30</b> determines whether there is software update data for at least one of the electronic control units <b>40</b><i>a </i>to <b>40</b><i>d </i>based on the response to the update check request that is received by the communication unit <b>38</b> of the OTA master <b>30</b>. When there is at least one piece of software update data (Step S<b>803</b>: YES), the process proceeds to Step S<b>804</b>. When there is no software update data (Step S<b>803</b>: NO), the software update control process is terminated.</p><heading id="h-0023" level="2">Step S<b>804</b></heading><p id="p-0080" num="0079">The control unit <b>39</b> of the OTA master <b>30</b> downloads the update data. More specifically, the communication unit <b>38</b> of the OTA master <b>30</b> transmits a download request for a distribution package including the update data to the center <b>10</b>, and receives a distribution package transmitted from the center <b>10</b> in response to the download request. The communication unit <b>38</b> stores the received distribution package in the storage unit <b>37</b> of the OTA master <b>30</b>. When the update data is downloaded, the process proceeds to Step S<b>805</b>.</p><heading id="h-0024" level="2">Step S<b>805</b></heading><p id="p-0081" num="0080">The control unit <b>39</b> of the OTA master <b>30</b> executes software installation for the target electronic control unit based on the update data. More specifically, the control unit <b>39</b> transfers the update data in the distribution package to the target electronic control unit, and instructs the target electronic control unit to install update software. The target electronic control unit writes the update data received from the OTA master <b>30</b> to the data storage area. When the update software is installed, the process proceeds to Step S<b>806</b>.</p><heading id="h-0025" level="2">Step S<b>806</b></heading><p id="p-0082" num="0081">The control unit <b>39</b> of the OTA master <b>30</b> activates (gives an instruction to activate) the update software installed in the target electronic control unit. More specifically, the control unit <b>39</b> instructs the target electronic control unit that has written the update software to the data storage area to activate the update software. The target electronic control unit is restarted and executes the update software when a specific input operation such as powering OFF is performed. When the activation process for the update software is executed, the software update control process is terminated.</p><heading id="h-0026" level="2">Effects</heading><p id="p-0083" num="0082">As described above, in the network system according to the embodiment of the present disclosure, the center prestores the information (security information) in which the electronic control units mounted on the vehicle and the security levels required for software update are associated with each other. When the center receives the update data download request from the OTA master, the center generates the distribution package encrypted at the security level associated with the electronic control unit to be updated (target electronic control unit), and transmits the distribution package to the OTA master. With this process, the software update can appropriately be executed at the security level associated with the target electronic control unit.</p><p id="p-0084" num="0083">The distribution package may include information that specifies an encryption method applied to the distribution package. With this information, the OTA master that has received the distribution package can easily decrypt the distribution package.</p><p id="p-0085" num="0084">When the security level associated with the target electronic control unit is equal to or higher than the predetermined threshold, that is, the required security level is high, falsification or the like can be suppressed by performing encryption based on the information unique to the vehicle. When the security level associated with the target electronic control unit is lower than the predetermined threshold, that is, the required security level is low, the encryption is performed based on the information common to a plurality of vehicles to facilitate decryption of the distribution package. Thus, the period required for software update can be shortened.</p><p id="p-0086" num="0085">Although the embodiment of the technology of the present disclosure has been described above, the present disclosure can be understood not only as the center but also as, for example, an OTA master communicable with the center, a method to be executed by a center or an OTA master including a processor and a memory, a program, a non-transitory computer-readable storage medium storing the program, or a vehicle including an OTA master. The center may include one or more processors. The OTA master may include one or more processors.</p><p id="p-0087" num="0086">The technology of the present disclosure can be used in a network system for updating software of an electronic control unit.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A center configured to communicate with an over-the-air (OTA) master configured to control software update for electronic control units mounted on a vehicle, the center comprising one or more processors configured to:<claim-text>store security information in which security levels required for the software update are associated with the electronic control units mounted on the vehicle, respectively; and</claim-text><claim-text>generate a distribution package applied encryption at a security level associated with a target electronic control unit based on the security information, the target electronic control unit being an electronic control unit that is a target of the software update.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The center according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the one or more processors are configured to:<claim-text>receive, from the vehicle, version information indicating a version of software of each of the electronic control units;</claim-text><claim-text>determine whether the target electronic control unit is present based on the version information;</claim-text><claim-text>when the one or more processors determine that the target electronic control unit is present, generate the distribution package applied the encryption at the security level associated with the target electronic control unit based on the security information; and</claim-text><claim-text>transmit the distribution package to the OTA master based on a request from the OTA master.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The center according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the one or more processors are configured to generate the distribution package including information that specifies a method for the encryption.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The center according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the one or more processors are configured to, when the security level associated with the target electronic control unit is equal to or higher than a predetermined threshold, generate the distribution package applied the encryption based on information unique to the vehicle.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The center according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the one or more processors are configured to, when the security level associated with the target electronic control unit is lower than a predetermined threshold, generate the distribution package applied the encryption based on information common to a plurality of the vehicles.</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. An over-the-air (OTA) master configured to control software update for electronic control units mounted on a vehicle, the OTA master comprising one or more processors configured to:<claim-text>receive, from a center, a distribution package applied encryption at a security level associated with a target electronic control unit, the target electronic control unit being an electronic control unit that is a target of the software update; and</claim-text><claim-text>control the software update for the target electronic control unit based on the received distribution package.</claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The OTA master according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the one or more processors are configured to:<claim-text>transmit, to the center, version information indicating a version of each of the electronic control units mounted on the vehicle; and</claim-text><claim-text>receive, from the center, the distribution package applied the encryption at the security level associated with the target electronic control unit based on the version information.</claim-text></claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The OTA master according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the one or more processors are configured to decrypt the distribution package based on information that is included in the distribution package and specifies a method for the encryption.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The OTA master according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the one or more processors are configured to decrypt the distribution package based on information unique to the vehicle.</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The OTA master according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the one or more processors are configured to decrypt the distribution package based on information common to a plurality of the vehicles.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. A method to be executed by a center configured to communicate with an over-the-air (OTA) master configured to control software update for electronic control units mounted on a vehicle, the OTA master including one or more processors and a memory, the method comprising:<claim-text>storing security information in which security levels required for the software update are associated with the electronic control units mounted on the vehicle, respectively; and</claim-text><claim-text>generating a distribution package applied encryption at a security level associated with a target electronic control unit based on the security information, the target electronic control unit being an electronic control unit that is a target of the software update.</claim-text></claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. A method to be executed by an over-the-air (OTA) master configured to control software update for electronic control units mounted on a vehicle, the OTA master including one or more processors and a memory, the method comprising:<claim-text>receiving, from a center, a distribution package applied encryption at a security level associated with a target electronic control unit, the target electronic control unit being an electronic control unit that is a target of the software update; and</claim-text><claim-text>controlling the software update for the target electronic control unit based on the received distribution package.</claim-text></claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The center according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a non-transitory storage medium storing instructions that are executable by the one or more processors and that cause the one or more processors to perform functions including:<claim-text>storing the security information in which the security levels required for the software update are associated with the electronic control units mounted on the vehicle, respectively; and</claim-text><claim-text>generating the distribution package applied the encryption at the security level associated with the target electronic control unit based on the security information.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The OTA master according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, further comprising a non-transitory storage medium storing instructions that are executable by the one or more processors and that cause the one or more processors to perform functions including:<claim-text>receiving, from the center, the distribution package applied the encryption at the security level associated with the target electronic control unit; and</claim-text><claim-text>controlling the software update for the target electronic control unit based on the received distribution package.</claim-text></claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. A vehicle comprising the OTA master according to <claim-ref idref="CLM-00006">claim 6</claim-ref>.</claim-text></claim></claims></us-patent-application>