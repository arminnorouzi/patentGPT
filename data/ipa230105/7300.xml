<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230007301A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230007301</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17942274</doc-number><date>20220912</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>19</main-group><subgroup>597</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>19</main-group><subgroup>46</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20141101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>19</main-group><subgroup>597</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20141101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>19</main-group><subgroup>46</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">THREE-DIMENSIONAL DATA STORAGE METHOD, THREE-DIMENSIONAL DATA ACQUISITION METHOD, THREE-DIMENSIONAL DATA STORAGE DEVICE, AND THREE-DIMENSIONAL DATA ACQUISITION DEVICE</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>17132619</doc-number><date>20201223</date></document-id><parent-grant-document><document-id><country>US</country><doc-number>11477482</doc-number></document-id></parent-grant-document></parent-doc><child-doc><document-id><country>US</country><doc-number>17942274</doc-number></document-id></child-doc></relation></continuation><continuation><relation><parent-doc><document-id><country>US</country><doc-number>PCT/JP2019/030842</doc-number><date>20190806</date></document-id><parent-status>PENDING</parent-status></parent-doc><child-doc><document-id><country>US</country><doc-number>17132619</doc-number></document-id></child-doc></relation></continuation><us-provisional-application><document-id><country>US</country><doc-number>62714973</doc-number><date>20180806</date></document-id></us-provisional-application></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Panasonic Intellectual Property Corporation of America</orgname><address><city>Torrance</city><state>CA</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>IGUCHI</last-name><first-name>Noritaka</first-name><address><city>Osaka</city><country>JP</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>SUGIO</last-name><first-name>Toshiyasu</first-name><address><city>Osaka</city><country>JP</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A three-dimensional data storage method includes: acquiring one or more units in which an encoded stream generated by encoding point cloud data is stored; and storing the one or more units into a file. The storing includes storing, in control information for the file, information indicating that data stored in the file is data generated by encoding the point cloud data.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="120.40mm" wi="158.75mm" file="US20230007301A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="219.71mm" wi="170.77mm" orientation="landscape" file="US20230007301A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="183.64mm" wi="134.28mm" file="US20230007301A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="204.13mm" wi="129.79mm" orientation="landscape" file="US20230007301A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="44.28mm" wi="84.16mm" file="US20230007301A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="213.87mm" wi="97.28mm" orientation="landscape" file="US20230007301A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="44.28mm" wi="85.60mm" file="US20230007301A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="213.53mm" wi="98.38mm" orientation="landscape" file="US20230007301A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="44.28mm" wi="86.87mm" file="US20230007301A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="217.76mm" wi="98.21mm" orientation="landscape" file="US20230007301A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="44.28mm" wi="85.77mm" file="US20230007301A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00011" num="00011"><img id="EMI-D00011" he="217.34mm" wi="98.21mm" orientation="landscape" file="US20230007301A1-20230105-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00012" num="00012"><img id="EMI-D00012" he="236.14mm" wi="135.38mm" orientation="landscape" file="US20230007301A1-20230105-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00013" num="00013"><img id="EMI-D00013" he="247.99mm" wi="130.64mm" file="US20230007301A1-20230105-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00014" num="00014"><img id="EMI-D00014" he="155.87mm" wi="141.31mm" file="US20230007301A1-20230105-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00015" num="00015"><img id="EMI-D00015" he="181.02mm" wi="141.31mm" file="US20230007301A1-20230105-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00016" num="00016"><img id="EMI-D00016" he="181.02mm" wi="142.66mm" file="US20230007301A1-20230105-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00017" num="00017"><img id="EMI-D00017" he="246.72mm" wi="122.34mm" file="US20230007301A1-20230105-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00018" num="00018"><img id="EMI-D00018" he="160.02mm" wi="141.31mm" file="US20230007301A1-20230105-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00019" num="00019"><img id="EMI-D00019" he="159.68mm" wi="145.37mm" file="US20230007301A1-20230105-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00020" num="00020"><img id="EMI-D00020" he="191.52mm" wi="130.22mm" file="US20230007301A1-20230105-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00021" num="00021"><img id="EMI-D00021" he="127.51mm" wi="70.36mm" file="US20230007301A1-20230105-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00022" num="00022"><img id="EMI-D00022" he="151.81mm" wi="145.37mm" file="US20230007301A1-20230105-D00022.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00023" num="00023"><img id="EMI-D00023" he="105.49mm" wi="70.70mm" file="US20230007301A1-20230105-D00023.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00024" num="00024"><img id="EMI-D00024" he="135.72mm" wi="70.78mm" file="US20230007301A1-20230105-D00024.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00025" num="00025"><img id="EMI-D00025" he="195.92mm" wi="150.96mm" file="US20230007301A1-20230105-D00025.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00026" num="00026"><img id="EMI-D00026" he="155.87mm" wi="141.31mm" file="US20230007301A1-20230105-D00026.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00027" num="00027"><img id="EMI-D00027" he="181.02mm" wi="144.02mm" file="US20230007301A1-20230105-D00027.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00028" num="00028"><img id="EMI-D00028" he="168.57mm" wi="136.06mm" file="US20230007301A1-20230105-D00028.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00029" num="00029"><img id="EMI-D00029" he="234.95mm" wi="70.19mm" orientation="landscape" file="US20230007301A1-20230105-D00029.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00030" num="00030"><img id="EMI-D00030" he="235.03mm" wi="71.63mm" orientation="landscape" file="US20230007301A1-20230105-D00030.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00031" num="00031"><img id="EMI-D00031" he="231.82mm" wi="152.32mm" file="US20230007301A1-20230105-D00031.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00032" num="00032"><img id="EMI-D00032" he="159.68mm" wi="142.66mm" file="US20230007301A1-20230105-D00032.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00033" num="00033"><img id="EMI-D00033" he="159.68mm" wi="141.56mm" file="US20230007301A1-20230105-D00033.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00034" num="00034"><img id="EMI-D00034" he="190.50mm" wi="153.25mm" file="US20230007301A1-20230105-D00034.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00035" num="00035"><img id="EMI-D00035" he="196.60mm" wi="154.60mm" file="US20230007301A1-20230105-D00035.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00036" num="00036"><img id="EMI-D00036" he="219.54mm" wi="85.09mm" orientation="landscape" file="US20230007301A1-20230105-D00036.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00037" num="00037"><img id="EMI-D00037" he="216.32mm" wi="83.06mm" orientation="landscape" file="US20230007301A1-20230105-D00037.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00038" num="00038"><img id="EMI-D00038" he="199.31mm" wi="153.16mm" file="US20230007301A1-20230105-D00038.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00039" num="00039"><img id="EMI-D00039" he="214.12mm" wi="153.42mm" file="US20230007301A1-20230105-D00039.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00040" num="00040"><img id="EMI-D00040" he="210.90mm" wi="98.13mm" file="US20230007301A1-20230105-D00040.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">BACKGROUND</heading><heading id="h-0002" level="1">1. Technical Field</heading><p id="p-0002" num="0001">The present disclosure relates to a three-dimensional data storage method, a three-dimensional data acquisition method, a three-dimensional data storage device, and a three-dimensional data acquisition device.</p><heading id="h-0003" level="1">2. Description of the Related Art</heading><p id="p-0003" num="0002">Devices or services utilizing three-dimensional data are expected to find their widespread use in a wide range of fields, such as computer vision that enables autonomous operations of cars or robots, map information, monitoring, infrastructure inspection, and video distribution. Three-dimensional data is obtained through various means including a distance sensor such as a rangefinder, as well as a stereo camera and a combination of a plurality of monocular cameras.</p><p id="p-0004" num="0003">Methods of representing three-dimensional data include a method known as a point cloud scheme that represents the shape of a three-dimensional structure by a point cloud in a three-dimensional space. In the point cloud scheme, the positions and colors of a point cloud are stored. While point cloud is expected to be a mainstream method of representing three-dimensional data, a massive amount of data of a point cloud necessitates compression of the amount of three-dimensional data by encoding for accumulation and transmission, as in the case of a two-dimensional moving picture (examples include Moving Picture Experts Group-4 Advanced Video Coding (MPEG-4 AVC) and High Efficiency Video Coding (HEVC) standardized by MPEG).</p><p id="p-0005" num="0004">Meanwhile, point cloud compression is partially supported by, for example, an open-source library (Point Cloud Library) for point cloud-related processing.</p><p id="p-0006" num="0005">Furthermore, a technique for searching for and displaying a facility located in the surroundings of the vehicle by using three-dimensional map data is known (for example, see International Publication WO 2014/020663).</p><heading id="h-0004" level="1">SUMMARY</heading><p id="p-0007" num="0006">There has been a demand for reducing a processing amount or increasing a processing speed in devices processing three-dimensional data.</p><p id="p-0008" num="0007">The present disclosure has an object to provide a three-dimensional data storage method, a three-dimensional data acquisition method, a three-dimensional data storage device, or a three-dimensional data acquisition device that allows a three-dimensional data processing device to reduce a processing amount or increase a processing speed.</p><p id="p-0009" num="0008">In accordance with an aspect of the present disclosure, a three-dimensional data storage method includes: acquiring one or more units in which an encoded stream generated by encoding point cloud data is stored; and storing the one or more units into a file, wherein the storing includes storing information in control information (signaling information) for the file, the information indicating that data stored in the file is data generated by encoding the point cloud data.</p><p id="p-0010" num="0009">In accordance with an aspect of the present disclosure, a three-dimensional data acquisition method includes: acquiring a file storing one or more units in which an encoded stream generated by encoding point cloud data is stored; and acquiring the one or more units from the file, wherein control information for the file includes information indicating that data stored in the file is data generated by encoding the point cloud data.</p><p id="p-0011" num="0010">The present disclosure provides a three-dimensional data storage method, a three-dimensional data acquisition method, a three-dimensional data storage device, or a three-dimensional data acquisition device that allows a three-dimensional data processing device to reduce a processing amount or increase a processing speed.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p-0012" num="0011">These and other objects, advantages and features of the disclosure will become apparent from the following description thereof taken in conjunction with the accompanying drawings that illustrate a specific embodiment of the present disclosure.</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a diagram illustrating a configuration of a three-dimensional data encoding and decoding system according to Embodiment 1;</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a diagram illustrating a structure example of point cloud data according to Embodiment 1;</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a diagram illustrating a structure example of a data file indicating the point cloud data according to Embodiment 1;</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a diagram illustrating types of the point cloud data according to Embodiment 1;</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a diagram illustrating a structure of a first encoder according to Embodiment 1;</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a block diagram illustrating the first encoder according to Embodiment 1;</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a diagram illustrating a structure of a first decoder according to Embodiment 1;</p><p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a block diagram illustrating the first decoder according to Embodiment 1;</p><p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a diagram illustrating a structure of a second encoder according to Embodiment 1;</p><p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a block diagram illustrating the second encoder according to Embodiment 1;</p><p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. <b>11</b></figref> is a diagram illustrating a structure of a second decoder according to Embodiment 1;</p><p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. <b>12</b></figref> is a block diagram illustrating the second decoder according to Embodiment 1;</p><p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. <b>13</b></figref> is a diagram illustrating a protocol stack related to PCC encoded data according to Embodiment 1;</p><p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. <b>14</b></figref> is a diagram illustrating the protocol stack according to Embodiment 1;</p><p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. <b>15</b></figref> is a diagram illustrating a syntax example of a NAL unit according to Embodiment 1;</p><p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. <b>16</b></figref> is a diagram illustrating a syntax example of a NAL unit header according to Embodiment 1;</p><p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. <b>17</b></figref> is a diagram illustrating a semantics example of pcc_codec_type according to Embodiment 1;</p><p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. <b>18</b></figref> is a diagram illustrating a semantics example of pcc_nal_unit_type according to Embodiment 1;</p><p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. <b>19</b></figref> is a flowchart of encoding processing according to Embodiment 1;</p><p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. <b>20</b></figref> is a flowchart of decoding processing by the second decoder according to Embodiment 1;</p><p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. <b>21</b></figref> is a flowchart of decoding processing by the first decoder according to Embodiment 1;</p><p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. <b>22</b></figref> is a diagram illustrating a protocol stack according to Embodiment 2;</p><p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. <b>23</b></figref> is a diagram illustrating a syntax example of a NAL unit for codec 2 according to Embodiment 2;</p><p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. <b>24</b></figref> is a diagram illustrating a syntax example of a NAL unit header for codec 2 according to Embodiment 2;</p><p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. <b>25</b></figref> is a diagram illustrating a semantics example of codec1_nal_unit_type according to Embodiment 2;</p><p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. <b>26</b></figref> is a diagram illustrating a syntax example of a NAL unit for codec 1 according to Embodiment 2;</p><p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. <b>27</b></figref> is a diagram illustrating a syntax example of a NAL unit header for codec 1 according to Embodiment 2;</p><p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. <b>28</b></figref> is a diagram illustrating a semantics example of codec1_nal_unit_type according to Embodiment 2;</p><p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. <b>29</b></figref> is a flowchart of encoding processing according to Embodiment 2;</p><p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. <b>30</b></figref> is a flowchart of decoding processing according to Embodiment 2;</p><p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. <b>31</b></figref> is a diagram illustrating a protocol stack according to Embodiment 3;</p><p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. <b>32</b></figref> is a diagram illustrating a syntax example of a NAL unit according to Embodiment 3;</p><p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. <b>33</b></figref> is a diagram illustrating a syntax example of a NAL unit header according to Embodiment 3;</p><p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. <b>34</b></figref> is a diagram illustrating a semantics example of pcc_nal_unit_type according to Embodiment 3;</p><p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. <b>35</b></figref> is a flowchart of encoding processing according to Embodiment 3;</p><p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. <b>36</b></figref> is a flowchart of decoding processing according to Embodiment 3;</p><p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. <b>37</b></figref> is a flowchart of encoding processing according to Variation of Embodiment;</p><p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. <b>38</b></figref> is a flowchart of decoding processing according to Variation of Embodiment;</p><p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. <b>39</b></figref> is a block diagram of an encoder according to Embodiment 4;</p><p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. <b>40</b></figref> is a block diagram of a decoder according to Embodiment 4;</p><p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. <b>41</b></figref> is a flowchart of encoding processing according to Embodiment 4;</p><p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. <b>42</b></figref> is a flowchart of decoding processing according to Embodiment 4;</p><p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. <b>43</b></figref> is a diagram illustrating a basic structure of ISOBMFF according to Embodiment 5;</p><p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. <b>44</b></figref> is a diagram illustrating a protocol stack according to Embodiment 5;</p><p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. <b>45</b></figref> is a diagram illustrating an example where a NAL unit is stored in a file for codec 1 according to Embodiment 5;</p><p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. <b>46</b></figref> is a diagram illustrating an example where a NAL unit is stored in a file for codec 2 according to Embodiment 5;</p><p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. <b>47</b></figref> is a diagram illustrating a structure of a first multiplexer according to Embodiment 5;</p><p id="p-0060" num="0059"><figref idref="DRAWINGS">FIG. <b>48</b></figref> is a diagram illustrating a structure of a first demultiplexer according to Embodiment 5;</p><p id="p-0061" num="0060"><figref idref="DRAWINGS">FIG. <b>49</b></figref> is a diagram illustrating a structure of a second multiplexer according to Embodiment 5;</p><p id="p-0062" num="0061"><figref idref="DRAWINGS">FIG. <b>50</b></figref> is a diagram illustrating a structure of a second demultiplexer according to Embodiment 5;</p><p id="p-0063" num="0062"><figref idref="DRAWINGS">FIG. <b>51</b></figref> is a flowchart of processing performed by the first multiplexer according to Embodiment 5;</p><p id="p-0064" num="0063"><figref idref="DRAWINGS">FIG. <b>52</b></figref> is a flowchart of processing performed by the second multiplexer according to Embodiment 5;</p><p id="p-0065" num="0064"><figref idref="DRAWINGS">FIG. <b>53</b></figref> is a flowchart of processing performed by the first demultiplexer and the first decoder according to Embodiment 5;</p><p id="p-0066" num="0065"><figref idref="DRAWINGS">FIG. <b>54</b></figref> is a flowchart of processing performed by the second demultiplexer and the second decoder according to Embodiment 5;</p><p id="p-0067" num="0066"><figref idref="DRAWINGS">FIG. <b>55</b></figref> is a diagram illustrating structures of an encoder and a third multiplexer according to Embodiment 6;</p><p id="p-0068" num="0067"><figref idref="DRAWINGS">FIG. <b>56</b></figref> is a diagram illustrating structures of a third demultiplexer and a decoder according to Embodiment 6;</p><p id="p-0069" num="0068"><figref idref="DRAWINGS">FIG. <b>57</b></figref> is a flowchart of processing performed by the third multiplexer according to Embodiment 6;</p><p id="p-0070" num="0069"><figref idref="DRAWINGS">FIG. <b>58</b></figref> is a flowchart of processing performed by the third demultiplexer and the decoder according to Embodiment 6;</p><p id="p-0071" num="0070"><figref idref="DRAWINGS">FIG. <b>59</b></figref> is a flowchart of processing performed by a three-dimensional data storage device according to Embodiment 6; and</p><p id="p-0072" num="0071"><figref idref="DRAWINGS">FIG. <b>60</b></figref> is a flowchart of processing performed by a three-dimensional data acquisition device according to Embodiment 6.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE EMBODIMENTS</heading><p id="p-0073" num="0072">In accordance with an aspect of the present disclosure, a three-dimensional data storage method includes: acquiring one or more units in which an encoded stream generated by encoding point cloud data is stored; and storing the one or more units into a file, wherein the storing includes storing information in control information for the file, the information indicating that data stored in the file is data generated by encoding the point cloud data.</p><p id="p-0074" num="0073">The three-dimensional data storage method allows a device that processes a file generated by the method to early determine, with reference to control information for the file, whether or not data stored in the file is encoded data of point cloud data. It is therefore possible to reduce a processing amount or increase a processing speed of the device.</p><p id="p-0075" num="0074">For example, it is possible that the information further indicates an encoding method used in the encoding of the point cloud data out of a first encoding method and a second encoding method.</p><p id="p-0076" num="0075">The three-dimensional data storage method allows a device that processes a file generated by the method to early determine a codec used for data stored in the file, with reference to control information for the file. It is therefore possible to reduce a processing amount or increase a processing speed of the device.</p><p id="p-0077" num="0076">For example, it is also possible that the first encoding method is a scheme for encoding geometry information representing a position of the point cloud data by an N-ary tree, and encoding attribute information with reference to the geometry information, where N is an integer equal to or greater than 2, and the second encoding method is a scheme for generating a two-dimensional image from the point cloud data, and encoding the two-dimensional image using a video encoding method.</p><p id="p-0078" num="0077">For example, it is further possible that the file is in conformity with ISO Based Media File Format (ISOBMFF).</p><p id="p-0079" num="0078">In accordance with another aspect of the present disclosure, a three-dimensional data acquisition method includes: acquiring a file storing one or more units in which an encoded stream generated by encoding point cloud data is stored; and acquiring the one or more units from the file, wherein control information for the file includes information indicating that data stored in the file is data generated by encoding the point cloud data.</p><p id="p-0080" num="0079">The three-dimensional data acquisition method makes it possible to early determine whether or not data stored in a file is encoded data of point cloud data. It is therefore possible to reduce a processing amount or increase a processing speed of a device performing the method or devices in the subsequent stages.</p><p id="p-0081" num="0080">For example, it is possible that the information further indicates an encoding method used in the encoding of the point cloud data out of a first encoding method and a second encoding method.</p><p id="p-0082" num="0081">The three-dimensional data acquisition method makes it possible to early determine a codec used for data stored in the file, with reference to control information for the file. It is therefore possible to reduce a processing amount or increase a processing speed of a device performing the method or devices in the subsequent stages.</p><p id="p-0083" num="0082">For example, it is also possible that the three-dimensional data acquisition method further includes: acquiring, with reference to the information, one of data encoded by the first encoding method and data encoded using the second encoding method from the point cloud data that is encoded. For example, it is further possible that the first encoding method is a scheme for encoding geometry information representing a position of the point cloud data by an N-ary tree, and encoding attribute information with reference to the geometry information, where N is an integer equal to or greater than 2, and that the second encoding method is a scheme for generating a two-dimensional image from the point cloud data, and encoding the two-dimensional image using a video encoding method.</p><p id="p-0084" num="0083">For example, it is further possible that the file is in conformity with ISOBMFF.</p><p id="p-0085" num="0084">In accordance with still another aspect of the present disclosure, a three-dimensional data storage device, comprising: a processor; and memory, wherein, using the memory, the processor: acquires one or more units in which an encoded stream generated by encoding point cloud data is stored; and stores the one or more units into a file, wherein the storing includes storing information in control information for the file, the information indicating that data stored in the file is data generated by encoding the point cloud data.</p><p id="p-0086" num="0085">The three-dimensional data storage device allows a device that processes a file generated by the three-dimensional data storage method to early determine, with reference to control information for the file, whether or not data stored in the file is encoded data of point cloud data. It is therefore possible to reduce a processing amount or increase a processing speed of the device processing the file.</p><p id="p-0087" num="0086">In accordance with still another aspect of the present disclosure, a three-dimensional data acquisition device includes: a processor; and memory, wherein, using the memory, the processor: acquires a file storing one or more units in which an encoded stream generated by encoding point cloud data is stored; and acquires the one or more units from the file, wherein control information for the file includes information indicating that data stored in the file is data generated by encoding the point cloud data.</p><p id="p-0088" num="0087">The three-dimensional data acquisition device makes it possible to early determine whether or not data stored in a file is encoded data of point cloud data. It is therefore possible to reduce a processing amount or increase a processing speed of three-dimensional data acquisition device or devices in the subsequent stages.</p><p id="p-0089" num="0088">Note that these general or specific aspects may be implemented as a system, a method, an integrated circuit, a computer program, or a computer-readable recording medium such as a Compact Disc Read Only Memory (CD-ROM), or may be implemented as any combination of a system, a method, an integrated circuit, a computer program, and a recording medium. The following describes embodiments with reference to the drawings.</p><p id="p-0090" num="0089">Note that the following embodiments show exemplary embodiments of the present disclosure. The numerical values, shapes, materials, structural components, the arrangement and connection of the structural components, steps, the processing order of the steps, etc. shown in the following embodiments are mere examples, and thus are not intended to limit the present disclosure. Of the structural components described in the following embodiments, structural components not recited in any one of the independent claims that indicate the broadest concepts will be described as optional structural components.</p><heading id="h-0007" level="1">Embodiment 1</heading><p id="p-0091" num="0090">When using encoded data of a point cloud in a device or for a service in practice, required information for the application is desirably transmitted and received in order to reduce the network bandwidth. However, conventional encoding structures for three-dimensional data have no such a function, and there is also no encoding method for such a function.</p><p id="p-0092" num="0091">Embodiment 1 described below relates to a three-dimensional data encoding method and a three-dimensional data encoding device for encoded data of a three-dimensional point cloud that provides a function of transmitting and receiving required information for an application, a three-dimensional data decoding method and a three-dimensional data decoding device for decoding the encoded data, a three-dimensional data multiplexing method for multiplexing the encoded data, and a three-dimensional data transmission method for transmitting the encoded data.</p><p id="p-0093" num="0092">In particular, at present, a first encoding method and a second encoding method are under investigation as encoding methods (encoding schemes) for point cloud data. However, there is no method defined for storing the configuration of encoded data and the encoded data in a system format. Thus, there is a problem that an encoder cannot perform an MUX process (multiplexing), transmission, or accumulation of data.</p><p id="p-0094" num="0093">In addition, there is no method for supporting a format that involves two codecs, the first encoding method and the second encoding method, such as Point Cloud Compression (PCC).</p><p id="p-0095" num="0094">With regard to this embodiment, a configuration of PCC-encoded data that involves two codecs, a first encoding method and a second encoding method, and a method of storing the encoded data in a system format will be described.</p><p id="p-0096" num="0095">A configuration of a three-dimensional data (point cloud data) encoding and decoding system according to this embodiment will be first described. <figref idref="DRAWINGS">FIG. <b>1</b></figref> is a diagram showing an example of a configuration of the three-dimensional data encoding and decoding system according to this embodiment. As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the three-dimensional data encoding and decoding system includes three-dimensional data encoding system <b>4601</b>, three-dimensional data decoding system <b>4602</b>, sensor terminal <b>4603</b>, and external connector <b>4604</b>.</p><p id="p-0097" num="0096">Three-dimensional data encoding system <b>4601</b> generates encoded data or multiplexed data by encoding point cloud data, which is three-dimensional data. Three-dimensional data encoding system <b>4601</b> may be a three-dimensional data encoding device implemented by a single device or a system implemented by a plurality of devices. The three-dimensional data encoding device may include a part of a plurality of processors included in three-dimensional data encoding system <b>4601</b>.</p><p id="p-0098" num="0097">Three-dimensional data encoding system <b>4601</b> includes point cloud data generation system <b>4611</b>, presenter <b>4612</b>, encoder <b>4613</b>, multiplexer <b>4614</b>, input/output unit <b>4615</b>, and controller <b>4616</b>. Point cloud data generation system <b>4611</b> includes sensor information obtainer <b>4617</b>, and point cloud data generator <b>4618</b>.</p><p id="p-0099" num="0098">Sensor information obtainer <b>4617</b> obtains sensor information from sensor terminal <b>4603</b>, and outputs the sensor information to point cloud data generator <b>4618</b>. Point cloud data generator <b>4618</b> generates point cloud data from the sensor information, and outputs the point cloud data to encoder <b>4613</b>.</p><p id="p-0100" num="0099">Presenter <b>4612</b> presents the sensor information or point cloud data to a user. For example, presenter <b>4612</b> displays information or an image based on the sensor information or point cloud data.</p><p id="p-0101" num="0100">Encoder <b>4613</b> encodes (compresses) the point cloud data, and outputs the resulting encoded data, control information (signaling information) obtained in the course of the encoding, and other additional information to multiplexer <b>4614</b>. The additional information includes the sensor information, for example.</p><p id="p-0102" num="0101">Multiplexer <b>4614</b> generates multiplexed data by multiplexing the encoded data, the control information, and the additional information input thereto from encoder <b>4613</b>. A format of the multiplexed data is a file format for accumulation or a packet format for transmission, for example.</p><p id="p-0103" num="0102">Input/output unit <b>4615</b> (a communication unit or interface, for example) outputs the multiplexed data to the outside. Alternatively, the multiplexed data may be accumulated in an accumulator, such as an internal memory. Controller <b>4616</b> (or an application executor) controls each processor. That is, controller <b>4616</b> controls the encoding, the multiplexing, or other processing.</p><p id="p-0104" num="0103">Note that the sensor information may be input to encoder <b>4613</b> or multiplexer <b>4614</b>. Alternatively, input/output unit <b>4615</b> may output the point cloud data or encoded data to the outside as it is.</p><p id="p-0105" num="0104">A transmission signal (multiplexed data) output from three-dimensional data encoding system <b>4601</b> is input to three-dimensional data decoding system <b>4602</b> via external connector <b>4604</b>.</p><p id="p-0106" num="0105">Three-dimensional data decoding system <b>4602</b> generates point cloud data, which is three-dimensional data, by decoding the encoded data or multiplexed data. Note that three-dimensional data decoding system <b>4602</b> may be a three-dimensional data decoding device implemented by a single device or a system implemented by a plurality of devices. The three-dimensional data decoding device may include a part of a plurality of processors included in three-dimensional data decoding system <b>4602</b>.</p><p id="p-0107" num="0106">Three-dimensional data decoding system <b>4602</b> includes sensor information obtainer <b>4621</b>, input/output unit <b>4622</b>, demultiplexer <b>4623</b>, decoder <b>4624</b>, presenter <b>4625</b>, user interface <b>4626</b>, and controller <b>4627</b>.</p><p id="p-0108" num="0107">Sensor information obtainer <b>4621</b> obtains sensor information from sensor terminal <b>4603</b>.</p><p id="p-0109" num="0108">Input/output unit <b>4622</b> obtains the transmission signal, decodes the transmission signal into the multiplexed data (file format or packet), and outputs the multiplexed data to demultiplexer <b>4623</b>.</p><p id="p-0110" num="0109">Demultiplexer <b>4623</b> obtains the encoded data, the control information, and the additional information from the multiplexed data, and outputs the encoded data, the control information, and the additional information to decoder <b>4624</b>.</p><p id="p-0111" num="0110">Decoder <b>4624</b> reconstructs the point cloud data by decoding the encoded data.</p><p id="p-0112" num="0111">Presenter <b>4625</b> presents the point cloud data to a user. For example, presenter <b>4625</b> displays information or an image based on the point cloud data. User interface <b>4626</b> obtains an indication based on a manipulation by the user. Controller <b>4627</b> (or an application executor) controls each processor. That is, controller <b>4627</b> controls the demultiplexing, the decoding, the presentation, or other processing.</p><p id="p-0113" num="0112">Note that input/output unit <b>4622</b> may obtain the point cloud data or encoded data as it is from the outside. Presenter <b>4625</b> may obtain additional information, such as sensor information, and present information based on the additional information. Presenter <b>4625</b> may perform a presentation based on an indication from a user obtained on user interface <b>4626</b>.</p><p id="p-0114" num="0113">Sensor terminal <b>4603</b> generates sensor information, which is information obtained by a sensor. Sensor terminal <b>4603</b> is a terminal provided with a sensor or a camera. For example, sensor terminal <b>4603</b> is a mobile body, such as an automobile, a flying object, such as an aircraft, a mobile terminal, or a camera.</p><p id="p-0115" num="0114">Sensor information that can be generated by sensor terminal <b>4603</b> includes (1) the distance between sensor terminal <b>4603</b> and an object or the reflectance of the object obtained by LIDAR, a millimeter wave radar, or an infrared sensor or (2) the distance between a camera and an object or the reflectance of the object obtained by a plurality of monocular camera images or a stereo-camera image, for example. The sensor information may include the posture, orientation, gyro (angular velocity), position (GPS information or altitude), velocity, or acceleration of the sensor, for example. The sensor information may include air temperature, air pressure, air humidity, or magnetism, for example.</p><p id="p-0116" num="0115">External connector <b>4604</b> is implemented by an integrated circuit (LSI or IC), an external accumulator, communication with a cloud server via the Internet, or broadcasting, for example.</p><p id="p-0117" num="0116">Next, point cloud data will be described. <figref idref="DRAWINGS">FIG. <b>2</b></figref> is a diagram showing a configuration of point cloud data. <figref idref="DRAWINGS">FIG. <b>3</b></figref> is a diagram showing a configuration example of a data file describing information of the point cloud data.</p><p id="p-0118" num="0117">Point cloud data includes data on a plurality of points. Data on each point includes geometry information (three-dimensional coordinates) and attribute information associated with the geometry information. A set of a plurality of such points is referred to as a point cloud. For example, a point cloud indicates a three-dimensional shape of an object.</p><p id="p-0119" num="0118">Geometry information (position), such as three-dimensional coordinates, may be referred to as geometry. Data on each point may include attribute information (attribute) on a plurality of types of attributes. A type of attribute is color or reflectance, for example.</p><p id="p-0120" num="0119">One piece of attribute information may be associated with one piece of geometry information, or attribute information on a plurality of different types of attributes may be associated with one piece of geometry information. Alternatively, a plurality of pieces of attribute information on the same type of attribute may be associated with one piece of geometry information.</p><p id="p-0121" num="0120">The configuration example of a data file shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> is an example in which geometry information and attribute information are associated with each other in a one-to-one relationship, and geometry information and attribute information on N points forming point cloud data are shown.</p><p id="p-0122" num="0121">The geometry information is information on three axes, specifically, an x-axis, a y-axis, and a z-axis, for example. The attribute information is RGB color information, for example. A representative data file is ply file, for example.</p><p id="p-0123" num="0122">Next, types of point cloud data will be described. <figref idref="DRAWINGS">FIG. <b>4</b></figref> is a diagram showing types of point cloud data. As shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, point cloud data includes a static object and a dynamic object.</p><p id="p-0124" num="0123">The static object is three-dimensional point cloud data at an arbitrary time (a time point). The dynamic object is three-dimensional point cloud data that varies with time. In the following, three-dimensional point cloud data associated with a time point will be referred to as a PCC frame or a frame.</p><p id="p-0125" num="0124">The object may be a point cloud whose range is limited to some extent, such as ordinary video data, or may be a large point cloud whose range is not limited, such as map information.</p><p id="p-0126" num="0125">There are point cloud data having varying densities. There may be sparse point cloud data and dense point cloud data.</p><p id="p-0127" num="0126">In the following, each processor will be described in detail. Sensor information is obtained by various means, including a distance sensor such as LIDAR or a range finder, a stereo camera, or a combination of a plurality of monocular cameras. Point cloud data generator <b>4618</b> generates point cloud data based on the sensor information obtained by sensor information obtainer <b>4617</b>. Point cloud data generator <b>4618</b> generates geometry information as point cloud data, and adds attribute information associated with the geometry information to the geometry information.</p><p id="p-0128" num="0127">When generating geometry information or adding attribute information, point cloud data generator <b>4618</b> may process the point cloud data. For example, point cloud data generator <b>4618</b> may reduce the data amount by omitting a point cloud whose position coincides with the position of another point cloud. Point cloud data generator <b>4618</b> may also convert the geometry information (such as shifting, rotating or normalizing the position) or render the attribute information.</p><p id="p-0129" num="0128">Note that, although <figref idref="DRAWINGS">FIG. <b>1</b></figref> shows point cloud data generation system <b>4611</b> as being included in three-dimensional data encoding system <b>4601</b>, point cloud data generation system <b>4611</b> may be independently provided outside three-dimensional data encoding system <b>4601</b>.</p><p id="p-0130" num="0129">Encoder <b>4613</b> generates encoded data by encoding point cloud data according to an encoding method previously defined. In general, there are the two types of encoding methods described below. One is an encoding method using geometry information, which will be referred to as a first encoding method, hereinafter. The other is an encoding method using a video codec, which will be referred to as a second encoding method, hereinafter.</p><p id="p-0131" num="0130">Decoder <b>4624</b> decodes the encoded data into the point cloud data using the encoding method previously defined.</p><p id="p-0132" num="0131">Multiplexer <b>4614</b> generates multiplexed data by multiplexing the encoded data in an existing multiplexing method. The generated multiplexed data is transmitted or accumulated. Multiplexer <b>4614</b> multiplexes not only the PCC-encoded data but also another medium, such as a video, an audio, subtitles, an application, or a file, or reference time information. Multiplexer <b>4614</b> may further multiplex attribute information associated with sensor information or point cloud data.</p><p id="p-0133" num="0132">Multiplexing schemes or file formats include ISOBMFF, MPEG-DASH, which is a transmission scheme based on ISOBMFF, MMT, MPEG-2 TS Systems, or RMP, for example.</p><p id="p-0134" num="0133">Demultiplexer <b>4623</b> extracts PCC-encoded data, other media, time information and the like from the multiplexed data.</p><p id="p-0135" num="0134">Input/output unit <b>4615</b> transmits the multiplexed data in a method suitable for the transmission medium or accumulation medium, such as broadcasting or communication. Input/output unit <b>4615</b> may communicate with another device over the Internet or communicate with an accumulator, such as a cloud server.</p><p id="p-0136" num="0135">As a communication protocol, http, ftp, TCP, UDP or the like is used. The pull communication scheme or the push communication scheme can be used.</p><p id="p-0137" num="0136">A wired transmission or a wireless transmission can be used. For the wired transmission, Ethernet (registered trademark), USB, RS-232C, HDMI (registered trademark), or a coaxial cable is used, for example. For the wireless transmission, wireless LAN, Wi-Fi (registered trademark), Bluetooth (registered trademark), or a millimeter wave is used, for example.</p><p id="p-0138" num="0137">As a broadcasting scheme, DVB-T2, DVB-S2, DVB-C2, ATSC3.0, or ISDB-S3 is used, for example.</p><p id="p-0139" num="0138"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a diagram showing a configuration of first encoder <b>4630</b>, which is an example of encoder <b>4613</b> that performs encoding in the first encoding method. <figref idref="DRAWINGS">FIG. <b>6</b></figref> is a block diagram showing first encoder <b>4630</b>. First encoder <b>4630</b> generates encoded data (encoded stream) by encoding point cloud data in the first encoding method. First encoder <b>4630</b> includes geometry information encoder <b>4631</b>, attribute information encoder <b>4632</b>, additional information encoder <b>4633</b>, and multiplexer <b>4634</b>.</p><p id="p-0140" num="0139">First encoder <b>4630</b> is characterized by performing encoding by keeping a three-dimensional structure in mind. First encoder <b>4630</b> is further characterized in that attribute information encoder <b>4632</b> performs encoding using information obtained from geometry information encoder <b>4631</b>. The first encoding method is referred to also as geometry-based PCC (GPCC).</p><p id="p-0141" num="0140">Point cloud data is PCC point cloud data like a PLY file or PCC point cloud data generated from sensor information, and includes geometry information (position), attribute information (attribute), and other additional information (metadata). The geometry information is input to geometry information encoder <b>4631</b>, the attribute information is input to attribute information encoder <b>4632</b>, and the additional information is input to additional information encoder <b>4633</b>.</p><p id="p-0142" num="0141">Geometry information encoder <b>4631</b> generates encoded geometry information (compressed geometry), which is encoded data, by encoding geometry information. For example, geometry information encoder <b>4631</b> encodes geometry information using an N-ary tree structure, such as an octree. Specifically, in the case of an octree, a current space is divided into eight nodes (subspaces), 8-bit information (occupancy code) that indicates whether each node includes a point cloud or not is generated. A node including a point cloud is further divided into eight nodes, and 8-bit information that indicates whether each of the eight nodes includes a point cloud or not is generated. This process is repeated until a predetermined level is reached or the number of the point clouds included in each node becomes equal to or less than a threshold.</p><p id="p-0143" num="0142">Attribute information encoder <b>4632</b> generates encoded attribute information (compressed attribute), which is encoded data, by encoding attribute information using configuration information generated by geometry information encoder <b>4631</b>. For example, attribute information encoder <b>4632</b> determines a reference point (reference node) that is to be referred to in encoding a current point (current node) to be processed based on the octree structure generated by geometry information encoder <b>4631</b>. For example, attribute information encoder <b>4632</b> refers to a node whose parent node in the octree is the same as the parent node of the current node, of peripheral nodes or neighboring nodes. Note that the method of determining a reference relationship is not limited to this method.</p><p id="p-0144" num="0143">The process of encoding attribute information may include at least one of a quantization process, a prediction process, and an arithmetic encoding process. In this case, &#x201c;refer to&#x201d; means using a reference node for calculating a predicted value of attribute information or using a state of a reference node (occupancy information that indicates whether a reference node includes a point cloud or not, for example) for determining a parameter of encoding. For example, the parameter of encoding is a quantization parameter in the quantization process or a context or the like in the arithmetic encoding.</p><p id="p-0145" num="0144">Additional information encoder <b>4633</b> generates encoded additional information (compressed metadata), which is encoded data, by encoding compressible data of additional information.</p><p id="p-0146" num="0145">Multiplexer <b>4634</b> generates encoded stream (compressed stream), which is encoded data, by multiplexing encoded geometry information, encoded attribute information, encoded additional information, and other additional information. The generated encoded stream is output to a processor in a system layer (not shown).</p><p id="p-0147" num="0146">Next, first decoder <b>4640</b>, which is an example of decoder <b>4624</b> that performs decoding in the first encoding method, will be described. <figref idref="DRAWINGS">FIG. <b>7</b></figref> is a diagram showing a configuration of first decoder <b>4640</b>. <figref idref="DRAWINGS">FIG. <b>8</b></figref> is a block diagram showing first decoder <b>4640</b>. First decoder <b>4640</b> generates point cloud data by decoding encoded data (encoded stream) encoded in the first encoding method in the first encoding method. First decoder <b>4640</b> includes demultiplexer <b>4641</b>, geometry information decoder <b>4642</b>, attribute information decoder <b>4643</b>, and additional information decoder <b>4644</b>.</p><p id="p-0148" num="0147">An encoded stream (compressed stream), which is encoded data, is input to first decoder <b>4640</b> from a processor in a system layer (not shown).</p><p id="p-0149" num="0148">Demultiplexer <b>4641</b> separates encoded geometry information (compressed geometry), encoded attribute information (compressed attribute), encoded additional information (compressed metadata), and other additional information from the encoded data.</p><p id="p-0150" num="0149">Geometry information decoder <b>4642</b> generates geometry information by decoding the encoded geometry information. For example, geometry information decoder <b>4642</b> restores the geometry information on a point cloud represented by three-dimensional coordinates from encoded geometry information represented by an N-ary structure, such as an octree.</p><p id="p-0151" num="0150">Attribute information decoder <b>4643</b> decodes the encoded attribute information based on configuration information generated by geometry information decoder <b>4642</b>. For example, attribute information decoder <b>4643</b> determines a reference point (reference node) that is to be referred to in decoding a current point (current node) to be processed based on the octree structure generated by geometry information decoder <b>4642</b>. For example, attribute information decoder <b>4643</b> refers to a node whose parent node in the octree is the same as the parent node of the current node, of peripheral nodes or neighboring nodes. Note that the method of determining a reference relationship is not limited to this method.</p><p id="p-0152" num="0151">The process of decoding attribute information may include at least one of an inverse quantization process, a prediction process, and an arithmetic decoding process. In this case, &#x201c;refer to&#x201d; means using a reference node for calculating a predicted value of attribute information or using a state of a reference node (occupancy information that indicates whether a reference node includes a point cloud or not, for example) for determining a parameter of decoding. For example, the parameter of decoding is a quantization parameter in the inverse quantization process or a context or the like in the arithmetic decoding.</p><p id="p-0153" num="0152">Additional information decoder <b>4644</b> generates additional information by decoding the encoded additional information. First decoder <b>4640</b> uses additional information required for the decoding process for the geometry information and the attribute information in the decoding, and outputs additional information required for an application to the outside.</p><p id="p-0154" num="0153">Next, second encoder <b>4650</b>, which is an example of encoder <b>4613</b> that performs encoding in the second encoding method, will be described. <figref idref="DRAWINGS">FIG. <b>9</b></figref> is a diagram showing a configuration of second encoder <b>4650</b>. <figref idref="DRAWINGS">FIG. <b>10</b></figref> is a block diagram showing second encoder <b>4650</b>.</p><p id="p-0155" num="0154">Second encoder <b>4650</b> generates encoded data (encoded stream) by encoding point cloud data in the second encoding method. Second encoder <b>4650</b> includes additional information generator <b>4651</b>, geometry image generator <b>4652</b>, attribute image generator <b>4653</b>, video encoder <b>4654</b>, additional information encoder <b>4655</b>, and multiplexer <b>4656</b>.</p><p id="p-0156" num="0155">Second encoder <b>4650</b> is characterized by generating a geometry image and an attribute image by projecting a three-dimensional structure onto a two-dimensional image, and encoding the generated geometry image and attribute image in an existing video encoding scheme. The second encoding method is referred to as video-based PCC (VPCC).</p><p id="p-0157" num="0156">Point cloud data is PCC point cloud data like a PLY file or PCC point cloud data generated from sensor information, and includes geometry information (position), attribute information (attribute), and other additional information (metadata).</p><p id="p-0158" num="0157">Additional information generator <b>4651</b> generates map information on a plurality of two-dimensional images by projecting a three-dimensional structure onto a two-dimensional image.</p><p id="p-0159" num="0158">Geometry image generator <b>4652</b> generates a geometry image based on the geometry information and the map information generated by additional information generator <b>4651</b>. The geometry image is a distance image in which distance (depth) is indicated as a pixel value, for example. The distance image may be an image of a plurality of point clouds viewed from one point of view (an image of a plurality of point clouds projected onto one two-dimensional plane), a plurality of images of a plurality of point clouds viewed from a plurality of points of view, or a single image integrating the plurality of images.</p><p id="p-0160" num="0159">Attribute image generator <b>4653</b> generates an attribute image based on the attribute information and the map information generated by additional information generator <b>4651</b>. The attribute image is an image in which attribute information (color (RGB), for example) is indicated as a pixel value, for example. The image may be an image of a plurality of point clouds viewed from one point of view (an image of a plurality of point clouds projected onto one two-dimensional plane), a plurality of images of a plurality of point clouds viewed from a plurality of points of view, or a single image integrating the plurality of images.</p><p id="p-0161" num="0160">Video encoder <b>4654</b> generates an encoded geometry image (compressed geometry image) and an encoded attribute image (compressed attribute image), which are encoded data, by encoding the geometry image and the attribute image in a video encoding scheme. Note that, as the video encoding scheme, any well-known encoding method can be used. For example, the video encoding scheme is AVC or HEVC.</p><p id="p-0162" num="0161">Additional information encoder <b>4655</b> generates encoded additional information (compressed metadata) by encoding the additional information, the map information and the like included in the point cloud data.</p><p id="p-0163" num="0162">Multiplexer <b>4656</b> generates an encoded stream (compressed stream), which is encoded data, by multiplexing the encoded geometry image, the encoded attribute image, the encoded additional information, and other additional information. The generated encoded stream is output to a processor in a system layer (not shown).</p><p id="p-0164" num="0163">Next, second decoder <b>4660</b>, which is an example of decoder <b>4624</b> that performs decoding in the second encoding method, will be described. <figref idref="DRAWINGS">FIG. <b>11</b></figref> is a diagram showing a configuration of second decoder <b>4660</b>. <figref idref="DRAWINGS">FIG. <b>12</b></figref> is a block diagram showing second decoder <b>4660</b>. Second decoder <b>4660</b> generates point cloud data by decoding encoded data (encoded stream) encoded in the second encoding method in the second encoding method. Second decoder <b>4660</b> includes demultiplexer <b>4661</b>, video decoder <b>4662</b>, additional information decoder <b>4663</b>, geometry information generator <b>4664</b>, and attribute information generator <b>4665</b>.</p><p id="p-0165" num="0164">An encoded stream (compressed stream), which is encoded data, is input to second decoder <b>4660</b> from a processor in a system layer (not shown).</p><p id="p-0166" num="0165">Demultiplexer <b>4661</b> separates an encoded geometry image (compressed geometry image), an encoded attribute image (compressed attribute image), an encoded additional information (compressed metadata), and other additional information from the encoded data.</p><p id="p-0167" num="0166">Video decoder <b>4662</b> generates a geometry image and an attribute image by decoding the encoded geometry image and the encoded attribute image in a video encoding scheme. Note that, as the video encoding scheme, any well-known encoding method can be used. For example, the video encoding scheme is AVC or HEVC.</p><p id="p-0168" num="0167">Additional information decoder <b>4663</b> generates additional information including map information or the like by decoding the encoded additional information.</p><p id="p-0169" num="0168">Geometry information generator <b>4664</b> generates geometry information from the geometry image and the map information. Attribute information generator <b>4665</b> generates attribute information from the attribute image and the map information.</p><p id="p-0170" num="0169">Second decoder <b>4660</b> uses additional information required for decoding in the decoding, and outputs additional information required for an application to the outside.</p><p id="p-0171" num="0170">In the following, a problem with the PCC encoding scheme will be described. <figref idref="DRAWINGS">FIG. <b>13</b></figref> is a diagram showing a protocol stack relating to PCC-encoded data. <figref idref="DRAWINGS">FIG. <b>13</b></figref> shows an example in which PCC-encoded data is multiplexed with other medium data, such as a video (HEVC, for example) or an audio, and transmitted or accumulated.</p><p id="p-0172" num="0171">A multiplexing scheme and a file format have a function of multiplexing various encoded data and transmitting or accumulating the data. To transmit or accumulate encoded data, the encoded data has to be converted into a format for the multiplexing scheme. For example, with HEVC, a technique for storing encoded data in a data structure referred to as a NAL unit and storing the NAL unit in ISOBMFF is prescribed.</p><p id="p-0173" num="0172">At present, a first encoding method (Codec1) and a second encoding method (Codec2) are under investigation as encoding methods for point cloud data. However, there is no method defined for storing the configuration of encoded data and the encoded data in a system format. Thus, there is a problem that an encoder cannot perform an MUX process (multiplexing), transmission, or accumulation of data.</p><p id="p-0174" num="0173">Note that, in the following, the term &#x201c;encoding method&#x201d; means any of the first encoding method and the second encoding method unless a particular encoding method is specified.</p><p id="p-0175" num="0174">In the following, a way of defining a NAL unit according to this embodiment will be described. For example, with a conventional codec, such as HEVC, a NAL unit in one format is defined for one codec. However, there has been no method that supports a format that involves two codecs, that is, the first encoding method and the second encoding method, such as PCC (such a codec will be referred to as a PCC codec, hereinafter).</p><p id="p-0176" num="0175">In this embodiment, a format that is common to the PCC codecs is defined for a NAL unit, and an identifier of a NAL unit that depends on the PCC codec is also defined. <figref idref="DRAWINGS">FIG. <b>14</b></figref> is a diagram showing a protocol stack in such a case. <figref idref="DRAWINGS">FIGS. <b>15</b> to <b>17</b></figref> are diagrams illustrating an example of a NAL unit format common to the codecs. <figref idref="DRAWINGS">FIG. <b>15</b></figref> is a diagram showing a syntax example of a common PCC NAL unit. <figref idref="DRAWINGS">FIG. <b>16</b></figref> is a diagram showing a syntax example of a common PCC NAL unit header. <figref idref="DRAWINGS">FIG. <b>17</b></figref> is a diagram showing a semantics example of pcc_codec_type. <figref idref="DRAWINGS">FIG. <b>18</b></figref> is a diagram showing a semantics example of pcc_nal_unit_type, and shows an example of definitions of the NAL unit type that depends on the codec.</p><p id="p-0177" num="0176">As a NAL unit format, a NAL unit format that is common to the PCC codecs is defined. A NAL unit (pcc_nal_unit) includes a header (pcc_nal_unit_header), a payload (pcc_nal_unit_payload), and a trailing bit (trailing_bits). Regardless of the codec, that is, whether data is to be stored in the first encoding method or the second encoding method, the same format is used.</p><p id="p-0178" num="0177">In the NAL unit header (pcc_nal_unit_header), a codec type (pcc_codec_type) and a NAL unit type (pcc_nal_unit_type) are stored. The codec type indicates whether the PCC codec of the encoded data to be stored in the NAL unit is the first encoding method or the second encoding method.</p><p id="p-0179" num="0178">The NAL unit type indicates the type of the NAL unit that depends on the codec, and the type is defined for each codec. If the codec type is the first encoding method, the NAL unit type indicates a NAL unit type defined for the first encoding method. If the codec type is the second encoding method, the NAL unit type indicates a NAL unit type defined for the second encoding method. That is, the NAL unit type defined for the first encoding method and the NAL unit type defined for the second encoding method are associated with different meanings with the same value.</p><p id="p-0180" num="0179">Note that, in the header, the function of the codec type may be merged with the NAL unit type. For example, a part of the information of the NAL unit type may be used to indicate the codec type.</p><p id="p-0181" num="0180">Next, an encoding process according to this embodiment will be described. <figref idref="DRAWINGS">FIG. <b>19</b></figref> is a flowchart showing an encoding process according to this embodiment. The process in the drawing is a process performed by first encoder <b>4630</b> or second encoder <b>4650</b> defined as described above. In the following, first encoder <b>4630</b> and second encoder <b>4650</b> may not be discriminated, and the encoder may be referred to as encoder <b>4613</b>. The process in the drawing is mainly performed by multiplexer <b>4634</b> shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref> or multiplexer <b>4656</b> shown in <figref idref="DRAWINGS">FIG. <b>10</b></figref>.</p><p id="p-0182" num="0181">Note that the process in the drawing is an example in which PCC data is encoded in any one of the first encoding method and the second encoding method, and it is supposed that which PCC codec is used for the encoding is known. For example, a user, an external device or the like may specify the PCC codec to be used.</p><p id="p-0183" num="0182">First, encoder <b>4613</b> encodes PCC data in any of the codecs, that is, the first encoding method or the second encoding method (S<b>4601</b>).</p><p id="p-0184" num="0183">When the codec used is the second encoding method (if &#x201c;second encoding method&#x201d; in S<b>4602</b>), encoder <b>4613</b> sets pcc_codec_type in the NAL unit header to a value that indicates that data included in the payload of the NAL unit is data encoded in the second encoding method (S<b>4603</b>). Furthermore, encoder <b>4613</b> sets pcc_nal_unit_type in the NAL unit header to the identifier of the NAL unit for the second encoding method (S<b>4604</b>). Encoder <b>4613</b> then generates a NAL unit having the set NAL unit header and including the encoded data in the payload. Encoder <b>4613</b> then transmits the generated NAL unit (S<b>4605</b>).</p><p id="p-0185" num="0184">On the other hand, when the codec used is the first encoding method (if &#x201c;first encoding method&#x201d; in S<b>4602</b>), encoder <b>4613</b> sets pcc_codec_type in the NAL unit header to a value that indicates that data included in the payload of the NAL unit is data encoded in the first encoding method (S<b>4606</b>). Furthermore, encoder <b>4613</b> sets pcc_nal_unit_type in the NAL unit header to the identifier of the NAL unit for the first encoding method (S<b>4607</b>). Encoder <b>4613</b> then generates a NAL unit having the set NAL unit header and including the encoded data in the payload. Encoder <b>4613</b> then transmits the generated NAL unit (S<b>4605</b>).</p><p id="p-0186" num="0185">If the function of pcc_codec_type is included in pcc_nal_unit_type in step S<b>4603</b> or S<b>4606</b>, encoder <b>4613</b> may set pcc_nal_unit_type to indicate whether the codec for the NAL unit is the first encoding method or the second encoding method.</p><p id="p-0187" num="0186">Next, a decoding process by first decoder <b>4640</b> or second decoder <b>4660</b> according to this embodiment will be described. <figref idref="DRAWINGS">FIG. <b>20</b></figref> is a flowchart showing a decoding process by second decoder <b>4660</b>. The process in the drawing is mainly performed by demultiplexer <b>4661</b> shown in <figref idref="DRAWINGS">FIG. <b>12</b></figref>.</p><p id="p-0188" num="0187">Note that the process in the drawing is an example in which PCC data is encoded in any one of the second encoding method and the first encoding method. In this scheme, demultiplexer <b>4661</b> in second decoder <b>4660</b> can identify the codec type of the NAL unit by referring to information included in the NAL unit header. Therefore, demultiplexer <b>4661</b> can output required information to video decoder <b>4662</b> according to the codec type.</p><p id="p-0189" num="0188">First, second decoder <b>4660</b> receives a NAL unit (S<b>4611</b>). For example, the NAL unit is the NAL unit generated in the process by encoder <b>4613</b> described above. That is, the header of the NAL unit includes pcc_codec_type and pcc_nal_unit_type.</p><p id="p-0190" num="0189">Second decoder <b>4660</b> then determines whether pcc_codec_type in the NAL unit header indicates the first encoding method or the second encoding method (S<b>4612</b>).</p><p id="p-0191" num="0190">When pcc_codec_type indicates the second encoding method (if &#x201c;second encoding method&#x201d; in S<b>4612</b>), second decoder <b>4660</b> determines that the data included in the payload of the NAL unit is data encoded in the second encoding method (S<b>4613</b>). Second decoder <b>4660</b> then identifies the data based on the determination that pcc_nal_unit_type in the NAL unit header is the identifier of the NAL unit for the second encoding method (S<b>4614</b>). Second decoder <b>4660</b> then decodes the PCC data in a decoding process for the second encoding method (S<b>4615</b>).</p><p id="p-0192" num="0191">On the other hand, when pcc_codec_type indicates the first encoding method (if &#x201c;first encoding method&#x201d; in S<b>4612</b>), second decoder <b>4660</b> determines that the data included in the payload of the NAL unit is data encoded in the first encoding method (S<b>4616</b>). In this case, second decoder <b>4660</b> does not process the NAL unit (S<b>4617</b>).</p><p id="p-0193" num="0192">If the function of pcc_codec_type is included in pcc_nal_unit_type in step S<b>4612</b>, second decoder <b>4660</b> may refer to pcc_nal_unit_type to determine whether the codec used for the data included in the NAL unit is the first encoding method or the second encoding method.</p><p id="p-0194" num="0193"><figref idref="DRAWINGS">FIG. <b>21</b></figref> is a flowchart showing a decoding process by first decoder <b>4640</b>. The process in the drawing is mainly performed by demultiplexer <b>4641</b> shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>.</p><p id="p-0195" num="0194">Note that the process in the drawing is an example in which PCC data is encoded in any one of the first encoding method and the second encoding method. In this scheme, demultiplexer <b>4641</b> in first decoder <b>4640</b> can identify the codec type of the NAL unit by referring to information included in the NAL unit header. Therefore, demultiplexer <b>4641</b> can output required information to geometry information decoder <b>4642</b> and attribute information decoder <b>4643</b> according to the codec type.</p><p id="p-0196" num="0195">First, first decoder <b>4640</b> receives a NAL unit (S<b>4621</b>). For example, the NAL unit is the NAL unit generated in the process by encoder <b>4613</b> described above. That is, the header of the NAL unit includes pcc_codec_type and pcc_nal_unit_type.</p><p id="p-0197" num="0196">First decoder <b>4640</b> then determines whether pcc_codec_type in the NAL unit header indicates the first encoding method or the second encoding method (S<b>4622</b>).</p><p id="p-0198" num="0197">When pcc_codec_type indicates the second encoding method (if &#x201c;second encoding method&#x201d; in S<b>4622</b>), first decoder <b>4640</b> determines that the data included in the payload of the NAL unit is data encoded in the second encoding method (S<b>4623</b>). In this case, first decoder <b>4640</b> does not process the NAL unit (S<b>4624</b>).</p><p id="p-0199" num="0198">On the other hand, when pcc_codec_type indicates the first encoding method (if &#x201c;first encoding method&#x201d; in S<b>4622</b>), first decoder <b>4640</b> determines that the data included in the payload of the NAL unit is data encoded in the first encoding method (S<b>4625</b>). First decoder <b>4640</b> then identifies the data based on the determination that pcc_nal_unit_type in the NAL unit header is the identifier of the NAL unit for the first encoding method (S<b>4626</b>). First decoder <b>4640</b> then decodes the PCC data in a decoding process for the first encoding method (S<b>4627</b>).</p><heading id="h-0008" level="1">Embodiment 2</heading><p id="p-0200" num="0199">In Embodiment 2, another way of defining a NAL unit will be described. In this embodiment, for a NAL unit, different formats are defined for different PCC codecs. Furthermore, an identifier of the NAL unit is independently defined for each PCC codec.</p><p id="p-0201" num="0200"><figref idref="DRAWINGS">FIG. <b>22</b></figref> is a diagram showing a protocol stack in this case. <figref idref="DRAWINGS">FIG. <b>23</b></figref> is a diagram showing a syntax example of a NAL unit (codec2_nal_unit) for codec 2. <figref idref="DRAWINGS">FIG. <b>24</b></figref> is a diagram showing a syntax example of a NAL unit header (codec2_nal_unit_header) for codec 2. <figref idref="DRAWINGS">FIG. <b>25</b></figref> is a diagram showing a semantics example of codec1_nal_unit_type.</p><p id="p-0202" num="0201"><figref idref="DRAWINGS">FIG. <b>26</b></figref> is a diagram showing a syntax example of a NAL unit (codec1_nal_unit) for codec 1. <figref idref="DRAWINGS">FIG. <b>27</b></figref> is a diagram showing a syntax example of a NAL unit header (codec1_nal_unit_header) for codec 1. <figref idref="DRAWINGS">FIG. <b>28</b></figref> is a diagram showing a semantics example of codec1_nal_unit_type.</p><p id="p-0203" num="0202">A NAL unit format is independently defined for each PCC codec. A NAL unit (codec1_nal_unit, codec2_nal_unit) includes a header (codec1_nal_unit_header, codec2_nal_unit_header), a payload (codec1_nal_unit_payload, codec2_nal_unit_payload), and a trailing bit (trailing_bits). The NAL unit (codec1_nal_unit) for the first encoding method and the NAL unit (codec2_nal_unit) for the second encoding method may have the same configuration or different configurations. The NAL unit for the first encoding method and the NAL unit for the second encoding method may have different sizes.</p><p id="p-0204" num="0203">Data encoded in the first encoding method is stored in a NAL unit for the first encoding method. Data encoded in the second encoding method is stored in a NAL unit for the second encoding method.</p><p id="p-0205" num="0204">In the NAL unit header (codec1_nal_unit_header, codec2_nal_unit_header), the NAL unit type (codec1_nal_unit_type, codec2_nal_unit_type) is stored. The NAL unit type is independent for each codec, and the type is defined for each codec. That is, in a NAL unit for the first encoding method, a NAL unit type defined for the first encoding method is described. In a NAL unit for the second encoding method, a NAL unit type defined for the second encoding method is described.</p><p id="p-0206" num="0205">According to this scheme, the first encoding method and the second encoding method can be handled as different codecs.</p><p id="p-0207" num="0206">Next, an encoding process according to this embodiment will be described. <figref idref="DRAWINGS">FIG. <b>29</b></figref> is a flowchart showing an encoding process according to this embodiment. The process in the drawing is a process performed by first encoder <b>4630</b> or second encoder <b>4650</b> defined as described above. The process in the drawing is mainly performed by multiplexer <b>4634</b> shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref> or multiplexer <b>4656</b> shown in <figref idref="DRAWINGS">FIG. <b>10</b></figref>.</p><p id="p-0208" num="0207">Note that the process in the drawing is an example in which PCC data is encoded in any one of the first encoding method and the second encoding method, and it is supposed that which PCC codec is used for the encoding is known. For example, a user, an external device or the like may specify the PCC codec to be used.</p><p id="p-0209" num="0208">First, encoder <b>4613</b> encodes PCC data in any of the codecs, that is, the first encoding method or the second encoding method (S<b>4631</b>).</p><p id="p-0210" num="0209">When the codec used is the second encoding method (if &#x201c;second encoding method&#x201d; in S<b>4632</b>), encoder <b>4613</b> generates a NAL unit in the NAL unit format for the second encoding method (S<b>4633</b>). Encoder <b>4613</b> then sets codec1_nal_unit_type in the NAL unit header to the identifier of the NAL unit for the second encoding method (S<b>4634</b>). In this way, encoder <b>4613</b> generates a NAL unit having the set NAL unit header and including the encoded data in the payload. Encoder <b>4613</b> transmits the generated NAL unit (S<b>4635</b>).</p><p id="p-0211" num="0210">On the other hand, when the codec used is the first encoding method (if &#x201c;first encoding method&#x201d; in S<b>4632</b>), encoder <b>4613</b> generates a NAL unit in the NAL unit format for the first encoding method (S<b>4636</b>). Encoder <b>4613</b> then sets codec1_nal_unit_type in the NAL unit header to the identifier of the NAL unit for the first encoding method (S<b>4637</b>). In this way, encoder <b>4613</b> generates a NAL unit having the set NAL unit header and including the encoded data in the payload. Encoder <b>4613</b> then transmits the generated NAL unit (S<b>4635</b>).</p><p id="p-0212" num="0211">Next, a decoding process according to this embodiment will be described. <figref idref="DRAWINGS">FIG. <b>30</b></figref> is a flowchart showing a decoding process according to this embodiment. The process in the drawing is a process performed by first decoder <b>4640</b> or second decoder <b>4660</b> defined as described above. In the following, first decoder <b>4640</b> and second decoder <b>4660</b> may not be discriminated, and the decoder may be referred to as decoder <b>4624</b>. The process in the drawing is mainly performed by demultiplexer <b>4641</b> shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref> or demultiplexer <b>4661</b> shown in <figref idref="DRAWINGS">FIG. <b>12</b></figref>.</p><p id="p-0213" num="0212">Note that the process in the drawing is an example in which PCC data is encoded in any one of the first encoding method and the second encoding method, and it is supposed that which PCC codec is used for the encoding is known. For example, information indicating the codec used is included in the transmission signal, the multiplexed data, or the encoded data, and decoder <b>4624</b> determines the codec used by referring to the information. Note that decoder <b>4624</b> may determine the codec used based on a signal obtained separately from these signals.</p><p id="p-0214" num="0213">When the codec used is the second encoding method (if &#x201c;second encoding method&#x201d; in S<b>4641</b>), decoder <b>4624</b> receives a NAL unit in the format for the second encoding method (S<b>4642</b>). Decoder <b>4624</b> then identifies the data using the NAL unit format for the second encoding method and codec1_nal_unit_type for the second encoding method based on the determination that the NAL unit is for the second encoding method (S<b>4643</b>). Decoder <b>4624</b> then decodes the PCC data in a decoding process for the second encoding method (S<b>4644</b>).</p><p id="p-0215" num="0214">On the other hand, when the codec used is the first encoding method (if &#x201c;first encoding method&#x201d; in S<b>4641</b>), decoder <b>4624</b> receives a NAL unit in the format for the first encoding method (S<b>4645</b>). Decoder <b>4624</b> then identifies the data using the NAL unit format for the first encoding method and codec1_nal_unit_type for the first encoding method based on the determination that the NAL unit is for the first encoding method (S<b>4646</b>). Decoder <b>4624</b> then decodes the PCC data in a decoding process for the first encoding method (S<b>4647</b>).</p><heading id="h-0009" level="1">Embodiment 3</heading><p id="p-0216" num="0215">In Embodiment 3, another way of defining a NAL unit will be described. In this embodiment, for a NAL unit, a format that is common to PCC codecs is defined. Furthermore, an identifier of the common PCC codec NAL unit is defined.</p><p id="p-0217" num="0216"><figref idref="DRAWINGS">FIG. <b>31</b></figref> is a diagram showing a protocol stack in this case. <figref idref="DRAWINGS">FIGS. <b>32</b> to <b>34</b></figref> are diagrams showing an example of a common codec NAL unit format. <figref idref="DRAWINGS">FIG. <b>32</b></figref> is a diagram showing a syntax example of a common PCC NAL unit. <figref idref="DRAWINGS">FIG. <b>33</b></figref> is a diagram showing a syntax example of a common PCC NAL unit header. <figref idref="DRAWINGS">FIG. <b>34</b></figref> is a diagram showing a semantics example of pcc_codec_type.</p><p id="p-0218" num="0217">As a NAL unit format, a NAL unit format that is common to the PCC codecs is defined. A NAL unit (pcc_nal_unit) includes a header (pcc_nal_unit_header), a payload (pcc_nal_unit_payload), and a trailing bit (trailing_bits). Regardless of the codec, that is, whether data is to be stored in the first encoding method or the second encoding method, the same format is used.</p><p id="p-0219" num="0218">In the NAL unit header (pcc_nal_unit_header), a NAL unit type (pcc_nal_unit_type) is stored. The NAL unit type is common to the codecs, and a type common to the codecs is defined. That is, a common NAL unit type defined is described for both a NAL unit for the first encoding method and a NAL unit for the second encoding method. In the example shown in <figref idref="DRAWINGS">FIG. <b>34</b></figref>, for example, PCC DataA is encoded data in codec 1, PCC DataB is encoded data in codec 2, PCC MetaDataA is additional information in codec 1, and PCC MetaDataB is additional information in codec 2.</p><p id="p-0220" num="0219">According to this scheme, the first encoding method and the second encoding method can be handled as the same codec.</p><p id="p-0221" num="0220">Next, an encoding process according to this embodiment will be described. <figref idref="DRAWINGS">FIG. <b>35</b></figref> is a flowchart showing an encoding process according to this embodiment. The process in the drawing is a process performed by first encoder <b>4630</b> or second encoder <b>4650</b> defined as described above. The process in the drawing is mainly performed by multiplexer <b>4634</b> shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref> or multiplexer <b>4656</b> shown in <figref idref="DRAWINGS">FIG. <b>10</b></figref>.</p><p id="p-0222" num="0221">Note that the process in the drawing is an example in which PCC data is encoded in any one of the first encoding method and the second encoding method, and it is supposed that which PCC codec is used for the encoding is known. For example, a user, an external device or the like may specify the PCC codec to be used.</p><p id="p-0223" num="0222">First, encoder <b>4613</b> encodes PCC data in any of the codecs, that is, the first encoding method or the second encoding method (S<b>4651</b>). Encoder <b>4613</b> then generates a NAL unit in the common PCC NAL unit format (S<b>4652</b>).</p><p id="p-0224" num="0223">Encoder <b>4613</b> then sets pcc_nal_unit_type in the NAL unit header to the identifier of the common PCC NAL unit (S<b>4653</b>). Encoder <b>4613</b> then transmits the NAL unit having the set NAL unit header and including the encoded data in the payload (S<b>4654</b>).</p><p id="p-0225" num="0224">Next, a decoding process according to this embodiment will be described. <figref idref="DRAWINGS">FIG. <b>36</b></figref> is a flowchart showing a decoding process according to this embodiment. The process in the drawing is a process performed by first decoder <b>4640</b> or second decoder <b>4660</b> defined as described above. The process in the drawing is mainly performed by demultiplexer <b>4641</b> shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref> or demultiplexer <b>4661</b> shown in <figref idref="DRAWINGS">FIG. <b>12</b></figref>.</p><p id="p-0226" num="0225">Note that the process in the drawing is an example in which PCC data is encoded in any one of the first encoding method and the second encoding method.</p><p id="p-0227" num="0226">First, decoder <b>4624</b> determines the codec used for the encoding of the data included in the NAL unit (S<b>4661</b>). For example, decoder <b>4624</b> determines the codec used by referring to pcc_nal_unit_type in the NAL unit header.</p><p id="p-0228" num="0227">When the codec used is the second encoding method (if &#x201c;second encoding method&#x201d; in S<b>4661</b>), decoder <b>4624</b> receives a NAL unit in the common PCC format (S<b>4662</b>). Decoder <b>4624</b> then identifies the data using the common NAL unit format and the common pcc_nal_unit_type based on the determination that the NAL unit is a common NAL unit (S<b>4663</b>). Decoder <b>4624</b> then decodes the PCC data in a decoding process for the second encoding method (S<b>4664</b>).</p><p id="p-0229" num="0228">On the other hand, when the codec used is the first encoding method (if &#x201c;first encoding method&#x201d; in S<b>4661</b>), decoder <b>4624</b> receives a NAL unit in the common PCC format (S<b>4665</b>). Decoder <b>4624</b> then identifies the data using the common NAL unit format and the common pcc_nal_unit_type based on the determination that the NAL unit is a common NAL unit (S<b>4666</b>). Decoder <b>4624</b> then decodes the PCC data in a decoding process for the first encoding method (S<b>4667</b>).</p><p id="p-0230" num="0229">In the following, variations of Embodiments 1 to 3 described above will be described. As another method for indicating the PCC codec type, any of the following methods can also be used.</p><p id="p-0231" num="0230">In Embodiment 1, Embodiment 2, and Embodiment 3, cases where there are two codecs, that is, the first encoding method and the second encoding method, have been described. However, the methods described above can be applied to cases where there are three or more PCC codecs.</p><p id="p-0232" num="0231">In Embodiment 1 and Embodiment 3, identification information for the PCC codec (pcc_codec_type in Embodiment 1 or pcc_nal_unit_type in Embodiment 3) is described in the NAL unit header. However, the identification information for the codec may be stored at another location.</p><p id="p-0233" num="0232">The first encoding method and the second encoding method are not limited to the examples described above and can be any codec. For example, the first encoding method and the second encoding method may be a plurality of codecs resulting from fragmentation of GPCC or a plurality of codecs resulting from fragmentation of VPCC. For example, both the first encoding method and the second encoding method may be VPCC, but different video encoding schemes may be used in the first encoding method and the second encoding method. The video encoding scheme may be AVC or HEVC, for example. One or both of the first encoding method and the second encoding method may be an encoding method including another encoding scheme for a video, an audio, a text application, or the like.</p><p id="p-0234" num="0233">For example, the identification information for the codec may be included in the control information (signaling information) included in the PCC-encoded stream. Here, the control information is metadata or the like, such as a parameter set or supplemental enhancement information (SEI).</p><p id="p-0235" num="0234"><figref idref="DRAWINGS">FIG. <b>37</b></figref> is a flowchart of an encoding process by encoder <b>4613</b> in this case. First, encoder <b>4613</b> encodes PCC data (S<b>4671</b>), and describes the identification information for the PCC codec at a predetermined location (parameter set, for example) in the encoded data (S<b>4672</b>). Encoder <b>4613</b> then generates a NAL unit including the encoded data, and transmits the generated NAL unit (S<b>4673</b>).</p><p id="p-0236" num="0235">The identification information for the PCC codec may be defined as profile, and indicated by metadata. When the same codec is used for the whole of a sequence, a sequence parameter set may include the identification information for the PCC codec. When a different codec is used for encoding of each PCC frame, a parameter set that describes information on each frame may include the identification information for the PCC codec. For example, when a different codec is used for each piece of PCC data, such as when different codecs are used for the geometry information and the attribute information, a parameter set that describes information on each piece of data may include the identification information for the PCC codec. That is, information indicating the codec for the geometry information may be included in control information (a parameter set or the like) for the geometry information, and information indicating the codec for the attribute information may be included in control information (a parameter set or the like) for the attribute information.</p><p id="p-0237" num="0236">Note that the identification information for the codec may be stored at any of the locations described above or may be stored at a plurality of locations. For example, the identification information for the codec may be stored in both the encoded stream and the NAL unit header. When the identification information for the codec is stored at a plurality of locations, the same information may be stored at the plurality of locations, or different information may be stored at the plurality of locations. The &#x201c;different information&#x201d; are information indicating GPCC or VPCC and information indicating any of a plurality of codecs resulting from fragmentation of GPCC or VPCC.</p><p id="p-0238" num="0237">When a NAL unit includes a parameter set, demultiplexer <b>4641</b> or <b>4661</b> included in decoder <b>4624</b> can determine whether the data included in the payload of the NAL unit is data encoded in the first encoding method or data encoded in the second encoding method by analyzing what is described in the parameter set. Therefore, decoder <b>4624</b> can quickly filter a NAL unit that is not required for decoding.</p><p id="p-0239" num="0238"><figref idref="DRAWINGS">FIG. <b>38</b></figref> is a flowchart of a decoding process by decoder <b>4624</b> in this case. First, decoder <b>4624</b> receives a NAL unit (S<b>4675</b>), and identifies a predetermined data that describes the identification information for the PCC codec (the parameter set described above, for example) using pcc_nal_unit_type in the NAL unit header (S<b>4676</b>). Decoder <b>4624</b> then identifies the PCC codec indicated in the predetermined data by analyzing predetermined data (the parameter set, for example) (S<b>4677</b>). Decoder <b>4624</b> then decodes the encoded data using the identified PCC codec (S<b>4678</b>).</p><p id="p-0240" num="0239">Although an example in which the encoded stream is stored in a NAL unit has been shown above, any unit according to a predetermined scheme can be used instead of the NAL unit.</p><heading id="h-0010" level="1">Embodiment 4</heading><p id="p-0241" num="0240">In Embodiment 4, encoder <b>4670</b> having the functions of both first encoder <b>4630</b> and second encoder <b>4650</b> described above and decoder <b>4680</b> having the functions of both first decoder <b>4640</b> and second decoder <b>4660</b> described above will be described.</p><p id="p-0242" num="0241"><figref idref="DRAWINGS">FIG. <b>39</b></figref> is a block diagram showing encoder <b>4670</b> according to this embodiment. Encoder <b>4670</b> includes first encoder <b>4630</b> and second encoder <b>4650</b> described above and multiplexer <b>4671</b>. Multiplexer <b>4671</b> multiplexes encoded data generated by first encoder <b>4630</b> and encoded data generated by second encoder <b>4650</b>, and outputs the resulting encoded data.</p><p id="p-0243" num="0242"><figref idref="DRAWINGS">FIG. <b>40</b></figref> is a block diagram showing decoder <b>4680</b> according to this embodiment. Decoder <b>4680</b> includes first decoder <b>4640</b> and second decoder <b>4660</b> described above and demultiplexer <b>4681</b>. Demultiplexer <b>4681</b> extracts encoded data generated using the first encoding method and encoded data generated using second encoding method from the input encoded data. Demultiplexer <b>4681</b> outputs the encoded data generated using the first encoding method to first decoder <b>4640</b>, and outputs the encoded data generated using the second encoding method to second decoder <b>4660</b>.</p><p id="p-0244" num="0243">With the configuration described above, encoder <b>4670</b> can encode point cloud data by selectively using the first encoding method or the second encoding method. Decoder <b>4680</b> can decode encoded data encoded using the first encoding method, encoded data using the second encoding method, and encoded data encoded using both the first encoding method and the second encoding method.</p><p id="p-0245" num="0244">For example, encoder <b>4670</b> may change the encoding method (between the first encoding method and the second encoding method) on a point-cloud-data basis or on a frame basis. Alternatively, encoder <b>4670</b> may change the encoding method on the basis of an encodable unit.</p><p id="p-0246" num="0245">For example, encoder <b>4670</b> generates encoded data (encoded stream) including the identification information for the PCC codec described above with regard to Embodiment 1 or Embodiment 3.</p><p id="p-0247" num="0246">Demultiplexer <b>4681</b> in decoder <b>4680</b> identifies data using the identification information for the PCC codec described above with regard to Embodiment 1 or Embodiment 3, for example. When the data is data encoded in the first encoding method, demultiplexer <b>4681</b> outputs the data to first decoder <b>4640</b>. When the data is data encoded in the second encoding method, demultiplexer <b>4681</b> outputs the data to second decoder <b>4660</b>.</p><p id="p-0248" num="0247">Encoder <b>4670</b> may transmit, as the control information (signaling information), information indicating whether both the encoding methods are used or any one of the encoding methods is used, in addition to the identification information for the PCC codec.</p><p id="p-0249" num="0248">Next, an encoding process according to this embodiment will be described. <figref idref="DRAWINGS">FIG. <b>41</b></figref> is a flowchart showing an encoding process according to this embodiment. Using the identification information for the PCC codec described above with regard to Embodiment 1, Embodiment 2, Embodiment 3, and variations thereof allows an encoding process ready for a plurality of codecs. Note that although <figref idref="DRAWINGS">FIG. <b>41</b></figref> shows an example in which the scheme according to Embodiment 1 is used, the same process can be applied to the other schemes.</p><p id="p-0250" num="0249">First, encoder <b>4670</b> encodes PCC data in both or one of the codecs, that is, the first encoding method and the second encoding method (S<b>4681</b>).</p><p id="p-0251" num="0250">When the codec used is the second encoding method (if &#x201c;second encoding method&#x201d; in S<b>4682</b>), encoder <b>4670</b> sets pcc_codec_type in the NAL unit header to a value that indicates that data included in the payload of the NAL unit is data encoded in the second encoding method (S<b>4683</b>). Encoder <b>4670</b> then sets pcc_nal_unit_type in the NAL unit header to the identifier of the NAL unit for the second encoding method (S<b>4684</b>). Encoder <b>4670</b> then generates a NAL unit having the set NAL unit header and including the encoded data in the payload. Encoder <b>4670</b> then transmits the generated NAL unit (S<b>4685</b>).</p><p id="p-0252" num="0251">On the other hand, when the codec used is the first encoding method (if &#x201c;first encoding method&#x201d; in S<b>4682</b>), encoder <b>4670</b> sets pcc_codec_type in the NAL unit header to a value that indicates that data included in the payload of the NAL unit is data encoded in the first encoding method (S<b>4686</b>). Encoder <b>4670</b> then sets pcc_nal_unit_type in the NAL unit header to the identifier of the NAL unit for the first encoding method (S<b>4687</b>). Encoder <b>4670</b> then generates a NAL unit having the set NAL unit header and including the encoded data in the payload. Encoder <b>4670</b> then transmits the generated NAL unit (S<b>4685</b>).</p><p id="p-0253" num="0252">Next, a decoding process according to this embodiment will be described. <figref idref="DRAWINGS">FIG. <b>42</b></figref> is a flowchart showing a decoding process according to this embodiment. Using the identification information for the PCC codec described above with regard to Embodiment 1, Embodiment 2, Embodiment 3, and variations thereof allows a decoding process ready for a plurality of codecs. Note that although <figref idref="DRAWINGS">FIG. <b>42</b></figref> shows an example in which the scheme according to Embodiment 1 is used, the same process can be applied to the other schemes.</p><p id="p-0254" num="0253">First, decoder <b>4680</b> receives a NAL unit (S<b>4691</b>). For example, the NAL unit is the NAL unit generated in the process by encoder <b>4670</b> described above.</p><p id="p-0255" num="0254">Decoder <b>4680</b> then determines whether pcc_codec_type in the NAL unit header indicates the first encoding method or the second encoding method (S<b>4692</b>).</p><p id="p-0256" num="0255">When pcc_codec_type indicates the second encoding method (if &#x201c;second encoding method&#x201d; in S<b>4692</b>), decoder <b>4680</b> determines that the data included in the payload of the NAL unit is data encoded in the second encoding method (S<b>4693</b>). Decoder <b>4680</b> then identifies the data based on the determination that pcc_nal_unit_type in the NAL unit header is the identifier of the NAL unit for the second encoding method (S<b>4694</b>). Decoder <b>4680</b> then decodes the PCC data in a decoding process for the second encoding method (S<b>4695</b>).</p><p id="p-0257" num="0256">On the other hand, when pcc_codec_type indicates the first encoding method (if &#x201c;first encoding method&#x201d; in S<b>4692</b>), decoder <b>4680</b> determines that the data included in the payload of the NAL unit is data encoded in the first encoding method (S<b>4696</b>). Decoder <b>4680</b> then identifies the data based on the determination that pcc_nal_unit_type in the NAL unit header is the identifier of the NAL unit for the first encoding method (S<b>4697</b>). Decoder <b>4680</b> then decodes the PCC data in a decoding process for the first encoding method (S<b>4698</b>).</p><p id="p-0258" num="0257">As described above, the three-dimensional data encoding device according to an aspect of the present disclosure generates an encoded stream by encoding three-dimensional data (point cloud data, for example) (in S<b>4671</b> in <figref idref="DRAWINGS">FIG. <b>37</b></figref>, for example), and stores information indicating the encoding method used for the encoding among the first encoding method and the second encoding method (identification information for the codec, for example) in the control information (a parameter set, for example) for the encoded stream (in S<b>4672</b> in <figref idref="DRAWINGS">FIG. <b>37</b></figref>, for example).</p><p id="p-0259" num="0258">With such a configuration, the three-dimensional data decoding device can determine the encoding method used for the encoding from the information stored in the control information, when decoding the encoded stream generated by the three-dimensional data encoding device. Therefore, the three-dimensional data decoding device can correctly decode the encoded stream even when a plurality of encoding methods are used.</p><p id="p-0260" num="0259">The three-dimensional data includes geometry information, for example. In the encoding described above, the three-dimensional data encoding device encodes the geometry information. In the storage described above, the three-dimensional data encoding device stores the information indicating the encoding method used for the encoding of the geometry information among the first encoding method and the second encoding method in the control information for the geometry information.</p><p id="p-0261" num="0260">The three-dimensional data includes geometry information and attribute information, for example. In the encoding described above, the three-dimensional data encoding device encodes the geometry information and the attribute information. In the storage described above, the three-dimensional data encoding device stores the information indicating the encoding method used for the encoding of the geometry information among the first encoding method and the second encoding method in the control information for the geometry information, and stores the information indicating the encoding method used for the encoding of the attribute information among the first encoding method and the second encoding method in the control information for the attribute information.</p><p id="p-0262" num="0261">With such a configuration, different encoding methods can be used for the geometry information and the attribute information, and therefore, the coding efficiency can be improved.</p><p id="p-0263" num="0262">For example, the three-dimensional data encoding method further includes storing the encoded stream in one or more units (NAL units, for example) (in S<b>4673</b> in <figref idref="DRAWINGS">FIG. <b>37</b></figref>, for example).</p><p id="p-0264" num="0263">For example, as described above with reference to <figref idref="DRAWINGS">FIGS. <b>15</b> to <b>18</b></figref> illustrating Embodiment 1, the unit includes information (pcc_nal_unit_type, for example) indicating the type of data included in the unit that has a format that is common to the first encoding method and the second encoding method and is independently defined for the first encoding method and the second encoding method.</p><p id="p-0265" num="0264">For example, as described above with reference to <figref idref="DRAWINGS">FIGS. <b>23</b> to <b>28</b></figref> illustrating Embodiment 2, the unit includes information (codec1_nal_unit_type or codec2_nal_unit_type, for example) indicating the type of data included in the unit that has different formats for the first encoding method and the second encoding method and is independently defined for the first encoding method and the second encoding method.</p><p id="p-0266" num="0265">For example, as described above with reference to <figref idref="DRAWINGS">FIGS. <b>32</b> to <b>34</b></figref> illustrating Embodiment 3, the unit includes information (pcc_nal_unit_type, for example) indicating the type of data included in the unit that has a format that is common to the first encoding method and the second encoding method and is commonly defined for the first encoding method and the second encoding method.</p><p id="p-0267" num="0266">For example, the three-dimensional data encoding device includes a processor and a memory, and the processor performs the processes described above using the memory.</p><p id="p-0268" num="0267">The three-dimensional data decoding device according to this embodiment determines the encoding method used for encoding of an encoded stream generated by encoding of three-dimensional data based on the information indicating the encoding method used for the encoding of the three-dimensional data among the first encoding method and the second encoding method (identification information for the codec, for example) included in the control information (a parameter set, for example) for the encoded stream (in S<b>4677</b> in <figref idref="DRAWINGS">FIG. <b>38</b></figref>, for example), and decodes the encoded stream using the determined encoding method (in S<b>4678</b> in <figref idref="DRAWINGS">FIG. <b>38</b></figref>, for example).</p><p id="p-0269" num="0268">With such a configuration, the three-dimensional data decoding device can determine the encoding method used for the encoding from the information stored in the control information, when decoding the encoded stream. Therefore, the three-dimensional data decoding device can correctly decode the encoded stream even when a plurality of encoding methods are used.</p><p id="p-0270" num="0269">The three-dimensional data includes geometry information, and the encoded stream includes encoded data of the geometry information, for example. In the determination described above, the three-dimensional data decoding device determines the encoding method used for the encoding of the geometry information based on the information indicating the encoding method used for the encoding of the geometry information among the first encoding method and the second encoding method included in the control information for the geometry information included in the encoded stream. In the decoding described above, the three-dimensional data decoding device decodes the encoded data of the geometry information using the determined encoding method used for the encoding of the geometry information.</p><p id="p-0271" num="0270">The three-dimensional data includes geometry information and attribute information, and the encoded stream includes encoded data of the geometry information and encoded data of the attribute information, for example. In the determination described above, the three-dimensional data decoding device determines the encoding method used for the encoding of the geometry information based on the information indicating the encoding method used for the encoding of the geometry information among the first encoding method and the second encoding method included in the control information for the geometry information included in the encoded stream, and determines the encoding method used for the encoding of the attribute information based on the information indicating the encoding method used for the encoding of the attribute information among the first encoding method and the second encoding method included in the control information for the attribute information included in the encoded stream. In the decoding described above, the three-dimensional data decoding device decodes the encoded data of the geometry information using the determined encoding method used for the encoding of the geometry information, and decodes the encoded data of the attribute information using the determined encoding method used for the encoding of the attribute information.</p><p id="p-0272" num="0271">With such a configuration, different encoding methods can be used for the geometry information and the attribute information, and therefore, the coding efficiency can be improved.</p><p id="p-0273" num="0272">For example, the encoded stream is stored in one or more units (NAL units, for example), and the three-dimensional data decoding device further obtains the encoded stream from the one or more units.</p><p id="p-0274" num="0273">For example, as described above with reference to <figref idref="DRAWINGS">FIGS. <b>15</b> to <b>18</b></figref> illustrating Embodiment 1, the unit includes information (pcc_nal_unit_type, for example) indicating the type of data included in the unit that has a format that is common to the first encoding method and the second encoding method and is independently defined for the first encoding method and the second encoding method.</p><p id="p-0275" num="0274">For example, as described above with reference to <figref idref="DRAWINGS">FIGS. <b>23</b> to <b>28</b></figref> illustrating Embodiment 2, the unit includes information (codec1_nal_unit_type or codec1_nal_unit_type, for example) indicating the type of data included in the unit that has different formats for the first encoding method and the second encoding method and is independently defined for the first encoding method and the second encoding method.</p><p id="p-0276" num="0275">For example, as described above with reference to <figref idref="DRAWINGS">FIGS. <b>32</b> to <b>34</b></figref> illustrating Embodiment 3, the unit includes information (pcc_nal_unit_type, for example) indicating the type of data included in the unit that has a format that is common to the first encoding method and the second encoding method and is commonly defined for the first encoding method and the second encoding method.</p><p id="p-0277" num="0276">For example, the three-dimensional data decoding device includes a processor and a memory, and the processor performs the processes described above using the memory.</p><heading id="h-0011" level="1">Embodiment 5</heading><p id="p-0278" num="0277">In Embodiment 5, a method of storing the NAL unit described above with regard to Embodiment 1 in an ISOBMFF file will be described.</p><p id="p-0279" num="0278">ISOBMFF is a file format standard prescribed in ISO/IEC14496-12. ISOBMFF is a standard that does not depend on any medium, and prescribes a format that allows various media, such as a video, an audio, and a text, to be multiplexed and stored.</p><p id="p-0280" num="0279">A basic structure (file) of ISOBMFF will be described. A basic unit of ISOBMFF is a box. A box is formed by type, length, and data, and a file is a set of various types of boxes.</p><p id="p-0281" num="0280"><figref idref="DRAWINGS">FIG. <b>43</b></figref> is a diagram showing a basic structure (file) of ISOBMFF. A file in ISOBMFF includes boxes, such as ftyp that indicates the brand of the file by four-character code (4CC), moov that stores metadata, such as control information (signaling information), and mdat that stores data.</p><p id="p-0282" num="0281">A method for storing each medium in the ISOBMFF file is separately prescribed. For example, a method of storing an AVC video or an HEVC video is prescribed in ISO/IEC14496-15. Here, it can be contemplated to expand the functionality of ISOBMFF and use ISOBMFF to accumulate or transmit PCC-encoded data. However, there has been no convention for storing PCC-encoded data in an ISOBMFF file. In this embodiment, a method of storing PCC-encoded data in an ISOBMFF file will be described.</p><p id="p-0283" num="0282"><figref idref="DRAWINGS">FIG. <b>44</b></figref> is a diagram showing a protocol stack in a case where a common PCC codec NAL unit in an ISOBMFF file. Here, the common PCC codec NAL unit described above with regard to Embodiment 1 is stored in an ISOBMFF file. Although the NAL unit is common to PCC codecs, a storage method for each codec (Carriage of Codec1, Carriage of Codec2) is desirably prescribed, since a plurality of PCC codecs are stored in the NAL unit.</p><p id="p-0284" num="0283">Next, a method of storing a common PCC NAL unit that supports a plurality of PCC codecs in an ISOBMFF file will be described. <figref idref="DRAWINGS">FIG. <b>45</b></figref> is a diagram showing an example in which a common PCC NAL unit is stored in an ISOBMFF file for the storage method for codec 1 (Carriage of Coded). <figref idref="DRAWINGS">FIG. <b>46</b></figref> is a diagram showing an example in which a common PCC NAL unit is stored in an ISOBMFF file for the storage method for codec 2 (Carriage of Codec2).</p><p id="p-0285" num="0284">Here, ftyp is information that is important for identification of the file format, and a different identifier of ftyp is defined for each codec. When PCC-encoded data encoded in the first encoding method (encoding scheme) is stored in the file, ftyp is set to pcc1. When PCC-encoded data encoded in the second encoding method is stored in the file, ftyp is set to pcc2.</p><p id="p-0286" num="0285">Here, pcc1 indicates that PCC codec 1 (first encoding method) is used. pcc2 indicates that PCC codec2 (second encoding method) is used. That is, pcc1 and pcc2 indicate that the data is PCC (encoded three-dimensional data (point cloud data)), and indicate the PCC codec (first encoding method or second encoding method).</p><p id="p-0287" num="0286">In the following, a method of storing a NAL unit in an ISOBMFF file will be described. The multiplexer analyzes the NAL unit header, and describes pcc1 in ftyp of ISOBMFF if pcc_codec_type=Codec1.</p><p id="p-0288" num="0287">The multiplexer analyzes the NAL unit header, and describes pcc2 in ftyp of ISOBMFF if pcc_codec_type=Codec2.</p><p id="p-0289" num="0288">If pcc_nal_unit_type is metadata, the multiplexer stores the NAL unit in moov or mdat in a predetermined manner, for example. If pcc_nal_unit_type is data, the multiplexer stores the NAL unit in moov or mdat in a predetermined manner, for example.</p><p id="p-0290" num="0289">For example, the multiplexer may store the NAL unit size in the NAL unit, as with HEVC.</p><p id="p-0291" num="0290">According to this storage method, the demultiplexer (a system layer) can determine whether the PCC-encoded data is encoded in the first encoding method or the second encoding method by analyzing ftyp included in the file. Furthermore, as described above, by determining whether the PCC-encoded data is encoded in the first encoding method or the second encoding method, the encoded data encoded in any one of the encoding methods can be extracted from the data including both the encoded data encoded in the encoding methods. Therefore, when transmitting the encoded data, the amount of data transmitted can be reduced. In addition, according to this storage method, different data (file) formats do not need to be set for the first encoding method and the second encoding method, and a common data format can be used for the first encoding method and the second encoding method.</p><p id="p-0292" num="0291">Note that, when the identification information for the codec, such as ftyp of ISOBMFF, is indicated in the metadata of the system layer, the multiplexer can store a NAL unit without pcc_nal_unit_type in the ISOBMFF file.</p><p id="p-0293" num="0292">Next, configurations and operations of the multiplexer of the three-dimensional data encoding system (three-dimensional data encoding device) according to this embodiment and the demultiplexer of the three-dimensional data decoding system (three-dimensional data decoding device) according to this embodiment will be described.</p><p id="p-0294" num="0293"><figref idref="DRAWINGS">FIG. <b>47</b></figref> is a diagram showing a configuration of first multiplexer <b>4710</b>. First multiplexer <b>4710</b> includes file converter <b>4711</b> that generates multiplexed data (file) by storing encoded data generated by first encoder <b>4630</b> and control information (NAL unit) in an ISOBMFF file. First multiplexer <b>4710</b> is included in multiplexer <b>4614</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, for example.</p><p id="p-0295" num="0294"><figref idref="DRAWINGS">FIG. <b>48</b></figref> is a diagram showing a configuration of first demultiplexer <b>4720</b>. First demultiplexer <b>4720</b> includes file inverse converter <b>4721</b> that obtains encoded data and control information (NAL unit) from multiplexed data (file) and outputs the obtained encoded data and control information to first decoder <b>4640</b>. First demultiplexer <b>4720</b> is included in demultiplexer <b>4623</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, for example.</p><p id="p-0296" num="0295"><figref idref="DRAWINGS">FIG. <b>49</b></figref> is a diagram showing a configuration of second multiplexer <b>4730</b>. Second multiplexer <b>4730</b> includes file converter <b>4731</b> that generates multiplexed data (file) by storing encoded data generated by second encoder <b>4650</b> and control information (NAL unit) in an ISOBMFF file. Second multiplexer <b>4730</b> is included in multiplexer <b>4614</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, for example.</p><p id="p-0297" num="0296"><figref idref="DRAWINGS">FIG. <b>50</b></figref> is a diagram showing a configuration of second demultiplexer <b>4740</b>. Second demultiplexer <b>4740</b> includes file inverse converter <b>4741</b> that obtains encoded data and control information (NAL unit) from multiplexed data (file) and outputs the obtained encoded data and control information to second decoder <b>4660</b>. Second demultiplexer <b>4740</b> is included in demultiplexer <b>4623</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, for example.</p><p id="p-0298" num="0297"><figref idref="DRAWINGS">FIG. <b>51</b></figref> is a flowchart showing a multiplexing process by first multiplexer <b>4710</b>. First, first multiplexer <b>4710</b> analyzes pcc_codec_type in the NAL unit header, thereby determining whether the codec used is the first encoding method or the second encoding method (S<b>4701</b>).</p><p id="p-0299" num="0298">When pcc_codec_type represents the second encoding method (if &#x201c;second encoding method&#x201d; in S<b>4702</b>), first multiplexer <b>4710</b> does not process the NAL unit (S<b>4703</b>).</p><p id="p-0300" num="0299">On the other hand, when pcc_codec_type represents the first encoding method (if &#x201c;first encoding method&#x201d; in S<b>4702</b>), first multiplexer <b>4710</b> describes pcc1 in ftyp (S<b>4704</b>). That is, first multiplexer <b>4710</b> describes information indicating that data encoded in the first encoding method is stored in the file in ftyp.</p><p id="p-0301" num="0300">First multiplexer <b>4710</b> then analyzes pcc_nal_unit_type in the NAL unit header, and stores the data in a box (moov or mdat, for example) in a predetermined manner suitable for the data type represented by pcc_nal_unit_type (S<b>4705</b>). First multiplexer <b>4710</b> then creates an ISOBMFF file including the ftyp described above and the box described above (S<b>4706</b>).</p><p id="p-0302" num="0301"><figref idref="DRAWINGS">FIG. <b>52</b></figref> is a flowchart showing a multiplexing process by second multiplexer <b>4730</b>. First, second multiplexer <b>4730</b> analyzes pcc_codec_type in the NAL unit header, thereby determining whether the codec used is the first encoding method or the second encoding method (S<b>4711</b>).</p><p id="p-0303" num="0302">When pcc_codec_type represents the second encoding method (if &#x201c;second encoding method&#x201d; in S<b>4712</b>), second multiplexer <b>4730</b> describes pcc2 in ftyp (S<b>4713</b>). That is, second multiplexer <b>4730</b> describes information indicating that data encoded in the second encoding method is stored in the file in ftyp.</p><p id="p-0304" num="0303">Second multiplexer <b>4730</b> then analyzes pcc_nal_unit_type in the NAL unit header, and stores the data in a box (moov or mdat, for example) in a predetermined manner suitable for the data type represented by pcc_nal_unit_type (S<b>4714</b>). Second multiplexer <b>4730</b> then creates an ISOBMFF file including the ftyp described above and the box described above (S<b>4715</b>).</p><p id="p-0305" num="0304">On the other hand, when pcc_codec_type represents the first encoding method (if &#x201c;first encoding method&#x201d; in S<b>4712</b>), second multiplexer <b>4730</b> does not process the NAL unit (S<b>4716</b>).</p><p id="p-0306" num="0305">Note that the process described above is an example in which PCC data is encoded in any one of the first encoding method and the second encoding method. First multiplexer <b>4710</b> and second multiplexer <b>4730</b> store a desired NAL unit in a file by identifying the codec type of the NAL unit. Note that, when the identification information for the PCC codec is included in a location other than the NAL unit header, first multiplexer <b>4710</b> and second multiplexer <b>4730</b> may identify the codec type (first encoding method or second encoding method) based on the identification information for the PCC codec included in the location other than the NAL unit header in step S<b>4701</b> or S<b>4711</b>.</p><p id="p-0307" num="0306">When storing data in a file in step S<b>4706</b> or S<b>4714</b>, first multiplexer <b>4710</b> and second multiplexer <b>4730</b> may store the data in the file after deleting pcc_nal_unit_type from the NAL unit header.</p><p id="p-0308" num="0307"><figref idref="DRAWINGS">FIG. <b>53</b></figref> is a flowchart showing a process performed by first demultiplexer <b>4720</b> and first decoder <b>4640</b>. First, first demultiplexer <b>4720</b> analyzes ftyp in an ISOBMFF file (S<b>4721</b>). When the codec represented by ftyp is the second encoding method (pcc2) (if &#x201c;second encoding method&#x201d; in S<b>4722</b>), first demultiplexer <b>4720</b> determines that the data included in the payload of the NAL unit is data encoded in the second encoding method (S<b>4723</b>). First demultiplexer <b>4720</b> also transmits the result of the determination to first decoder <b>4640</b>. First decoder <b>4640</b> does not process the NAL unit (S<b>4724</b>).</p><p id="p-0309" num="0308">On the other hand, when the codec represented by ftyp is the first encoding method (pcc1) (if &#x201c;first encoding method&#x201d; in S<b>4722</b>), first demultiplexer <b>4720</b> determines that the data included in the payload of the NAL unit is data encoded in the first encoding method (S<b>4725</b>). First demultiplexer <b>4720</b> also transmits the result of the determination to first decoder <b>4640</b>.</p><p id="p-0310" num="0309">First decoder <b>4640</b> identifies the data based on the determination that pcc_nal_unit_type in the NAL unit header is the identifier of the NAL unit for the first encoding method (S<b>4726</b>). First decoder <b>4640</b> then decodes the PCC data using a decoding process for the first encoding method (S<b>4727</b>).</p><p id="p-0311" num="0310"><figref idref="DRAWINGS">FIG. <b>54</b></figref> is a flowchart showing a process performed by second demultiplexer <b>4740</b> and second decoder <b>4660</b>. First, second demultiplexer <b>4740</b> analyzes ftyp in an ISOBMFF file (S<b>4731</b>). When the codec represented by ftyp is the second encoding method (pcc2) (if &#x201c;second encoding method&#x201d; in S<b>4732</b>), second demultiplexer <b>4740</b> determines that the data included in the payload of the NAL unit is data encoded in the second encoding method (S<b>4733</b>). Second demultiplexer <b>4740</b> also transmits the result of the determination to second decoder <b>4660</b>.</p><p id="p-0312" num="0311">Second decoder <b>4660</b> identifies the data based on the determination that pcc_nal_unit_type in the NAL unit header is the identifier of the NAL unit for the second encoding method (S<b>4734</b>). Second decoder <b>4660</b> then decodes the PCC data using a decoding process for the second encoding method (S<b>4735</b>).</p><p id="p-0313" num="0312">On the other hand, when the codec represented by ftyp is the first encoding method (pcc1) (if &#x201c;first encoding method&#x201d; in S<b>4732</b>), second demultiplexer <b>4740</b> determines that the data included in the payload of the NAL unit is data encoded in the first encoding method (S<b>4736</b>). Second demultiplexer <b>4740</b> also transmits the result of the determination to second decoder <b>4660</b>. Second decoder <b>4660</b> does not process the NAL unit (S<b>4737</b>).</p><p id="p-0314" num="0313">As described above, for example, since the codec type of the NAL unit is identified in first demultiplexer <b>4720</b> or second demultiplexer <b>4740</b>, the codec type can be identified in an early stage. Furthermore, a desired NAL unit can be input to first decoder <b>4640</b> or second decoder <b>4660</b>, and an unwanted NAL unit can be removed. In this case, the process of first decoder <b>4640</b> or second decoder <b>4660</b> analyzing the identification information for the codec may be unnecessary. Note that a process of referring to the NAL unit type again and analyzing the identification information for the codec may be performed by first decoder <b>4640</b> or second decoder <b>4660</b>.</p><p id="p-0315" num="0314">Furthermore, if pcc_nal_unit_type is deleted from the NAL unit header by first multiplexer <b>4710</b> or second multiplexer <b>4730</b>, first demultiplexer <b>4720</b> or second demultiplexer <b>4740</b> can output the NAL unit to first decoder <b>4640</b> or second decoder <b>4660</b> after adding pcc_nal_unit_type to the NAL unit.</p><heading id="h-0012" level="1">Embodiment 6</heading><p id="p-0316" num="0315">In Embodiment 6, a multiplexer and a demultiplexer that correspond to encoder <b>4670</b> and decoder <b>4680</b> ready for a plurality of codecs described above with regard to Embodiment 4 will be described. <figref idref="DRAWINGS">FIG. <b>55</b></figref> is a diagram showing configurations of encoder <b>4670</b> and third multiplexer <b>4750</b> according to this embodiment.</p><p id="p-0317" num="0316">Encoder <b>4670</b> encodes point cloud data in both or one of the first encoding method and the second encoding method. Encoder <b>4670</b> may change the encoding method (between the first encoding method and the second encoding method) on a point-cloud-data basis or on a frame basis. Alternatively, encoder <b>4670</b> may change the encoding method on the basis of an encodable unit.</p><p id="p-0318" num="0317">Encoder <b>4670</b> generates encoded data (encoded stream) including the identification information for the PCC codec described above with regard to Embodiments 1 to 4.</p><p id="p-0319" num="0318">Third multiplexer <b>4750</b> includes file converter <b>4751</b>. File converter <b>4751</b> converts a NAL unit output from encoder <b>4670</b> into a PCC data file. File converter <b>4751</b> analyzes the codec identification information included in the NAL unit header, and determines whether the PCC-encoded data is data encoded in the first encoding method, data encoded in the second encoding method, or data encoded in both the encoding methods. File converter <b>4751</b> describes a brand name that allows codec identification in ftyp. For example, when indicating the data is encoded in both the encoding methods, pcc3 is described in ftyp.</p><p id="p-0320" num="0319">Note that, when encoder <b>4670</b> describes the PCC codec identification information in a location other than the NAL unit, file converter <b>4751</b> may determine the PCC codec (encoding method) based on the identification information.</p><p id="p-0321" num="0320"><figref idref="DRAWINGS">FIG. <b>56</b></figref> is a diagram showing configurations of third demultiplexer <b>4760</b> and decoder <b>4680</b> according to this embodiment.</p><p id="p-0322" num="0321">Third demultiplexer <b>4760</b> includes file inverse converter <b>4761</b>. File inverse converter <b>4761</b> analyzes ftyp included in a file, and determines whether the PCC-encoded data is data encoded in the first encoding method, data encoded in the second encoding method, or data encoded in both the encoding methods.</p><p id="p-0323" num="0322">When the PCC-encoded data is data encoded in any one of the encoding methods, the data is input to an appropriate one of first decoder <b>4640</b> and second decoder <b>4660</b>, and is not input to the other decoder. When the PCC-encoded data is data encoded in both the encoding methods, the data is input to decoder <b>4680</b> ready for both the encoding methods.</p><p id="p-0324" num="0323">Decoder <b>4680</b> decodes the PCC-encoded data in both or one of the first encoding method and the second encoding method.</p><p id="p-0325" num="0324"><figref idref="DRAWINGS">FIG. <b>57</b></figref> is a flowchart showing a process performed by third multiplexer <b>4750</b> according to this embodiment.</p><p id="p-0326" num="0325">First, third multiplexer <b>4750</b> analyzes pcc_codec_type in the NAL unit header, thereby determining whether the codec(s) used is the first encoding method, the second encoding method, or both the first encoding method and the second encoding method (S<b>4741</b>).</p><p id="p-0327" num="0326">When the second encoding method is used (if Yes in S<b>4742</b> and &#x201c;second encoding method&#x201d; in S<b>4743</b>), third multiplexer <b>4750</b> describes pcc2 in ftyp (S<b>4744</b>). That is, third multiplexer <b>4750</b> describes information indicating that data encoded in the second encoding method is stored in the file in ftyp.</p><p id="p-0328" num="0327">Third multiplexer <b>4750</b> then analyzes pcc_nal_unit_type in the NAL unit header, and stores the data in a box (moov or mdat, for example) in a predetermined manner suitable for the data type represented by pcc_nal_unit_type (S<b>4745</b>). Third multiplexer <b>4750</b> then creates an ISOBMFF file including the ftyp described above and the box described above (S<b>4746</b>).</p><p id="p-0329" num="0328">When the first encoding method is used (if Yes in S<b>4742</b> and &#x201c;first encoding method&#x201d; in S<b>4743</b>), third multiplexer <b>4750</b> describes pcc1 in ftyp (S<b>4747</b>). That is, third multiplexer <b>4750</b> describes information indicating that data encoded in the first encoding method is stored in the file in ftyp.</p><p id="p-0330" num="0329">Third multiplexer <b>4750</b> then analyzes pcc_nal_unit_type in the NAL unit header, and stores the data in a box (moov or mdat, for example) in a predetermined manner suitable for the data type represented by pcc_nal_unit_type (S<b>4748</b>). Third multiplexer <b>4750</b> then creates an ISOBMFF file including the ftyp described above and the box described above (S<b>4746</b>).</p><p id="p-0331" num="0330">When both the first encoding method and the second encoding method are used (if No in S<b>4742</b>), third multiplexer <b>4750</b> describes pcc3 in ftyp (S<b>4749</b>). That is, third multiplexer <b>4750</b> describes information indicating that data encoded in both the encoding methods is stored in the file in ftyp.</p><p id="p-0332" num="0331">Third multiplexer <b>4750</b> then analyzes pcc_nal_unit_type in the NAL unit header, and stores the data in a box (moov or mdat, for example) in a predetermined manner suitable for the data type represented by pcc_nal_unit_type (S<b>4750</b>). Third multiplexer <b>4750</b> then creates an ISOBMFF file including the ftyp described above and the box described above (S<b>4746</b>).</p><p id="p-0333" num="0332"><figref idref="DRAWINGS">FIG. <b>58</b></figref> is a flowchart showing a process performed by third demultiplexer <b>4760</b> and decoder <b>4680</b>. First, third demultiplexer <b>4760</b> analyzes ftyp included in an ISOBMFF file (S<b>4761</b>). When the codec represented by ftyp is the second encoding method (pcc2) (if Yes in S<b>4762</b> and &#x201c;second encoding method&#x201d; in S<b>4763</b>), third demultiplexer <b>4760</b> determines that the data included in the payload of the NAL unit is data encoded in the second encoding method (S<b>4764</b>). Third demultiplexer <b>4760</b> also transmits the result of the determination to decoder <b>4680</b>.</p><p id="p-0334" num="0333">Decoder <b>4680</b> identifies the data based on the determination that pcc_nal_unit_type in the NAL unit header is the identifier of the NAL unit for the second encoding method (S<b>4765</b>). Decoder <b>4680</b> then decodes the PCC data using a decoding process for the second encoding method (S<b>4766</b>).</p><p id="p-0335" num="0334">When the codec represented by ftyp is the first encoding method (pcc1) (if Yes in S<b>4762</b> and &#x201c;first encoding method&#x201d; in S<b>4763</b>), third demultiplexer <b>4760</b> determines that the data included in the payload of the NAL unit is data encoded in the first encoding method (S<b>4767</b>). Third demultiplexer <b>4760</b> also transmits the result of the determination to decoder <b>4680</b>.</p><p id="p-0336" num="0335">Decoder <b>4680</b> identifies the data based on the determination that pcc_nal_unit_type in the NAL unit header is the identifier of the NAL unit for the first encoding method (S<b>4768</b>). Decoder <b>4680</b> then decodes the PCC data using a decoding process for the first encoding method (S<b>4769</b>).</p><p id="p-0337" num="0336">When ftyp indicates that both the encoding methods are used (pcc3) (if No in S<b>4762</b>), third demultiplexer <b>4760</b> determines that the data included in the payload of the NAL unit is data encoded in both the first encoding method and the second encoding method (S<b>4770</b>). Third demultiplexer <b>4760</b> also transmits the result of the determination to decoder <b>4680</b>.</p><p id="p-0338" num="0337">Decoder <b>4680</b> identifies the data based on the determination that pcc_nal_unit_type in the NAL unit header is the identifier of the NAL unit for the codecs described in pcc_codec_type (S<b>4771</b>). Decoder <b>4680</b> then decodes the PCC data using decoding processes for both the encoding methods (S<b>4772</b>). That is, decoder <b>4680</b> decodes the data encoded in the first encoding method using a decoding process for the first encoding method, and decodes the data encoded in the second encoding method using a decoding process for the second encoding method.</p><p id="p-0339" num="0338">In the following, variations of this embodiment will be described. As types of brands represented by ftyp, the types described below can be indicated by the identification information. Furthermore, a combination of a plurality of the types described below can also be indicated by the identification information.</p><p id="p-0340" num="0339">The identification information may indicate whether the original data object yet to be PCC-encoded is a point cloud whose range is limited or a large point cloud whose range is not limited, such as map information.</p><p id="p-0341" num="0340">The identification information may indicate whether the original data yet to be PCC-encoded is a static object or a dynamic object.</p><p id="p-0342" num="0341">As described above, the identification information may indicate whether the PCC-encoded data is data encoded in the first encoding method or data encoded in the second encoding method.</p><p id="p-0343" num="0342">The identification information may indicate an algorithm used in the PCC encoding. Here, the &#x201c;algorithm&#x201d; means an encoding method that can be used in the first encoding method or the second encoding method, for example.</p><p id="p-0344" num="0343">The identification information may indicate a differentiation between methods of storing the PCC-encoded data into an ISOBMFF file. For example, the identification information may indicate whether the storage method used is a storage method for accumulation or a storage method for real-time transmission, such as dynamic streaming.</p><p id="p-0345" num="0344">Although the method of storing a NAL unit described in Embodiment 1 has been described in Embodiment 5, and the method of storing a NAL unit described in Embodiment 4 has been described in Embodiment 6, the same storage methods can be applied to the NAL unit described in Embodiments 2 and 3 to store the identification information for the PCC codec into an ISOBMFF file.</p><p id="p-0346" num="0345">Although an example in which ISOBMFF is used as a file format has been described in Embodiments 5 and 6, other formats can also be used. For example, the method according to this embodiment can also be used when PCC-encoded data is stored in MPEG-2 TS Systems, MPEG-DASH, MMT, or RMP.</p><p id="p-0347" num="0346">Although an example in which metadata, such as the identification information, is stored in ftyp has been shown above, metadata can also be stored in a location other than ftyp. For example, the metadata may be stored in moov.</p><p id="p-0348" num="0347">As described above, a three-dimensional data storing device (or three-dimensional data multiplexing device or three-dimensional data encoding device) performs the process shown in <figref idref="DRAWINGS">FIG. <b>59</b></figref>.</p><p id="p-0349" num="0348">First, the three-dimensional data storing device (which includes first multiplexer <b>4710</b>, second multiplexer <b>4730</b> or third multiplexer <b>4750</b>, for example) acquires one or more units (NAL units, for example) that store an encoded stream, which is encoded point cloud data (S<b>4781</b>). The three-dimensional data storing device then stores the one or more units in a file (an ISOBMFF file, for example) (S<b>4782</b>). In the storage (S<b>4782</b>), the three-dimensional data storing device also stores information indicating that the data stored in the file is encoded point cloud data (pcc1, pcc2, or pcc3, for example) in the control information (ftyp, for example) (referred to also as signaling information) for the file.</p><p id="p-0350" num="0349">With such a configuration, a device that processes the file generated by the three-dimensional data storing device can quickly determine whether the data stored in the file is encoded point cloud data or not by referring to the control information for the file. Therefore, the processing amount of the device can be reduced, or the processing speed of the device can be increased.</p><p id="p-0351" num="0350">For example, the information indicates the encoding method used for the encoding of the point cloud data among the first encoding method and the second encoding method. Note that the fact that the data stored in the file is encoded point cloud data and the encoding method used for the encoding of the point cloud data among the first encoding method and the second encoding method may be indicated by a single piece of information or different pieces of information.</p><p id="p-0352" num="0351">With such a configuration, a device that processes the file generated by the three-dimensional data storing device can quickly determine the codec used for the data stored in the file by referring to the control information for the file. Therefore, the processing amount of the device can be reduced, or the processing speed of the device can be increased.</p><p id="p-0353" num="0352">For example, the first encoding method is a method (GPCC) that encodes geometry information that represents the position of point cloud data as an N-ary tree (N represents an integer equal to or greater than 2) and encodes attribute information using the geometry information, and the second encoding method is a method (VPCC) that generates a two-dimensional image from point cloud data and encodes the two-dimensional image in a video encoding method.</p><p id="p-0354" num="0353">For example, the file described above is in conformity with ISOBMFF (ISO-based media file format).</p><p id="p-0355" num="0354">For example, the three-dimensional data storing device includes a processor and a memory, and the processor performs the processes described above using the memory.</p><p id="p-0356" num="0355">As described above, a three-dimensional data acquisition device (or three-dimensional data demultiplexing device or three-dimensional data decoding device) performs the process shown in <figref idref="DRAWINGS">FIG. <b>60</b></figref>.</p><p id="p-0357" num="0356">The three-dimensional data acquisition device (which includes first demultiplexer <b>4720</b>, second demultiplexer <b>4740</b>, or third demultiplexer <b>4760</b>, for example) acquires a file (an ISOBMFF file, for example) that stores one or more units (NAL units, for example) that store an encoded stream, which is encoded point cloud data (S<b>4791</b>). The three-dimensional data acquisition device acquires the one or more units from the file (S<b>4792</b>). The control information (ftyp, for example) for the file includes information indicating that the data stored in the file is encoded point cloud data (pcc1, pcc2, or pcc3, for example).</p><p id="p-0358" num="0357">For example, the three-dimensional data acquisition device determines whether the data stored in the file is encoded point cloud data or not by referring to the information. When the three-dimensional data acquisition device determines that the data stored in the file is encoded point cloud data, the three-dimensional data acquisition device generates point cloud data by decoding the encoded point cloud data included in the one or more units. Alternatively, when the three-dimensional data acquisition device determines that the data stored in the file is encoded point cloud data, the three-dimensional data acquisition device outputs information indicating that the data included in the one or more units is encoded point cloud data to a processor in a subsequent stage (first decoder <b>4640</b>, second decoder <b>4660</b>, or decoder <b>4680</b>, for example) (or notifies a processor in a subsequent stage that the data included in the one or more units is encoded point cloud data).</p><p id="p-0359" num="0358">With such a configuration, the three-dimensional data acquisition device can quickly determine whether the data stored in the file is encoded point cloud data or not by referring to the control information for the file. Therefore, the processing amount of the three-dimensional data acquisition device or a device in a subsequent stage can be reduced, or the processing speed of the three-dimensional data acquisition device or a device in a subsequent stage can be increased.</p><p id="p-0360" num="0359">For example, the information represents the encoding method used for the encoding among the first encoding method and the second encoding method. Note that the fact that the data stored in the file is encoded point cloud data and the encoding method used for the encoding of the point cloud data among the first encoding method and the second encoding method may be indicated by a single piece of information or different pieces of information.</p><p id="p-0361" num="0360">With such a configuration, the three-dimensional data acquisition device can quickly determine the codec used for the data stored in the file by referring to the control information for the file. Therefore, the processing amount of the three-dimensional data acquisition device or a device in a subsequent stage can be reduced, or the processing speed of the three-dimensional data acquisition device or a device in a subsequent stage can be increased.</p><p id="p-0362" num="0361">For example, based on the information, the three-dimensional data acquisition device acquires the data encoded in any one of the first encoding method and the second encoding method from the encoded point cloud data including the data encoded in the first encoding method and the data encoded in the second encoding method.</p><p id="p-0363" num="0362">For example, the first encoding method is a method (GPCC) that encodes geometry information that represents the position of point cloud data as an N-ary tree (N represents an integer equal to or greater than 2) and encodes attribute information using the geometry information, and the second encoding method is a method (VPCC) that generates a two-dimensional image from point cloud data and encodes the two-dimensional image in a video encoding method.</p><p id="p-0364" num="0363">For example, the file described above is in conformity with ISOBMFF (ISO-based media file format).</p><p id="p-0365" num="0364">For example, the three-dimensional data acquisition device includes a processor and a memory, and the processor performs the processes described above using the memory.</p><p id="p-0366" num="0365">A three-dimensional data storage device, a three-dimensional data acquisition device, and the like according to the embodiments of the present disclosure have been described above, but the present disclosure is not limited to these embodiments.</p><p id="p-0367" num="0366">Note that each of the processors included in the three-dimensional data storage device, the three-dimensional data acquisition device, and the like according to the above embodiments is typically implemented as a large-scale integrated (LSI) circuit, which is an integrated circuit (IC). These may take the form of individual chips, or may be partially or entirely packaged into a single chip.</p><p id="p-0368" num="0367">Such IC is not limited to an LSI, and thus may be implemented as a dedicated circuit or a general-purpose processor. Alternatively, a field programmable gate array (FPGA) that allows for programming after the manufacture of an LSI, or a reconfigurable processor that allows for reconfiguration of the connection and the setting of circuit cells inside an LSI may be employed.</p><p id="p-0369" num="0368">Moreover, in the above embodiments, the structural components may be implemented as dedicated hardware or may be realized by executing a software program suited to such structural components. Alternatively, the structural components may be implemented by a program executor such as a CPU or a processor reading out and executing the software program recorded in a recording medium such as a hard disk or a semiconductor memory.</p><p id="p-0370" num="0369">The present disclosure may also be implemented as a three-dimensional data storage method, a three-dimensional data acquisition method, or the like executed by the three-dimensional data storage device, the three-dimensional data acquisition device, and the like.</p><p id="p-0371" num="0370">Also, the divisions of the functional blocks shown in the block diagrams are mere examples, and thus a plurality of functional blocks may be implemented as a single functional block, or a single functional block may be divided into a plurality of functional blocks, or one or more functions may be moved to another functional block. Also, the functions of a plurality of functional blocks having similar functions may be processed by single hardware or software in a parallelized or time-divided manner.</p><p id="p-0372" num="0371">Also, the processing order of executing the steps shown in the flowcharts is a mere illustration for specifically describing the present disclosure, and thus may be an order other than the shown order. Also, one or more of the steps may be executed simultaneously (in parallel) with another step.</p><p id="p-0373" num="0372">A three-dimensional data storage device, a three-dimensional data acquisition device, and the like according to one or more aspects have been described above based on the embodiments, but the present disclosure is not limited to these embodiments. The one or more aspects may thus include forms achieved by making various modifications to the above embodiments that can be conceived by those skilled in the art, as well forms achieved by combining structural components in different embodiments, without materially departing from the spirit of the present disclosure.</p><heading id="h-0013" level="1">INDUSTRIAL APPLICABILITY</heading><p id="p-0374" num="0373">The present disclosure is applicable to a three-dimensional data storage device and a three-dimensional data acquisition device.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-01-11" num="01-11"><claim-text><b>1</b>-<b>11</b>. (canceled)</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. A three-dimensional data storage method, comprising:<claim-text>acquiring one or more units in which an encoded information generated by encoding point cloud data is stored; and</claim-text><claim-text>storing the one or more units into a file, wherein</claim-text><claim-text>the file indicates an encoding method used in the encoding of the point cloud data out of a plurality of encoding methods including a first encoding method and a second encoding method,</claim-text><claim-text>the file is in conformity with ISO Based Media File Format (ISOBMFF),</claim-text><claim-text>when the point cloud is encoded by the first encoding method, the generated encoded information is stored in a first unit having a first format,</claim-text><claim-text>when the point cloud is encoded by the second encoding method, the generated encoded information is stored in a second unit having a second format different from the first format, and</claim-text><claim-text>each of the first unit and the second unit includes a header and a payload, the payload including encoded data or metadata, the header including information indicating a type of data included in the payload.</claim-text></claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The three-dimensional data storage method according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the file further indicates that data stored in the file is data generated by encoding the point cloud data.</claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The three-dimensional data storage method according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein<claim-text>the first encoding method is a scheme for encoding geometry information representing a position of the point cloud data by an N-ary tree, and encoding attribute information with reference to the geometry information, where N is an integer equal to or greater than 2, and</claim-text><claim-text>the second encoding method is a scheme for generating a two-dimensional image from the point cloud data, and encoding the two-dimensional image using a video encoding method.</claim-text></claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. A three-dimensional data acquisition method, comprising:<claim-text>acquiring a file storing one or more units in which an encoded information generated by encoding point cloud data is stored; and</claim-text><claim-text>acquiring the one or more units from the file, wherein</claim-text><claim-text>the file indicates an encoding method used in the encoding of the point cloud data out of a plurality of encoding methods including a first encoding method and a second encoding method,</claim-text><claim-text>the file is in conformity with ISO Based Media File Format (ISOBMFF),</claim-text><claim-text>when the point cloud is encoded by the first encoding method, the generated encoded information is stored in a first unit having a first format,</claim-text><claim-text>when the point cloud is encoded by the second encoding method, the generated encoded information is stored in a second unit having a second format different from the first format, and</claim-text><claim-text>each of the first unit and the second unit includes a header and a payload, the payload including encoded data or metadata, the header including information indicating a type of data included in the payload.</claim-text></claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The three-dimensional data acquisition method according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the file further indicates that data stored in the file is data generated by encoding the point cloud data.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The three-dimensional data acquisition method according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein<claim-text>the first encoding method is a scheme for encoding geometry information representing a position of the point cloud data by an N-ary tree, and encoding attribute information with reference to the geometry information, where N is an integer equal to or greater than 2, and</claim-text><claim-text>the second encoding method is a scheme for generating a two-dimensional image from the point cloud data, and encoding the two-dimensional image using a video encoding method.</claim-text></claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. A three-dimensional data storage device, comprising:<claim-text>a processor; and</claim-text><claim-text>memory,</claim-text><claim-text>wherein, using the memory, the processor:<claim-text>acquires one or more units in which an encoded information generated by encoding point cloud data is stored; and</claim-text><claim-text>stores the one or more units into a file, wherein</claim-text></claim-text><claim-text>the file indicates an encoding method used in the encoding of the point cloud data out of a plurality of encoding methods including a first encoding method and a second encoding method,</claim-text><claim-text>the file is in conformity with ISO Based Media File Format (ISOBMFF),</claim-text><claim-text>when the point cloud is encoded by the first encoding method, the generated encoded information is stored in a first unit having a first format,</claim-text><claim-text>when the point cloud is encoded by the second encoding method, the generated encoded information is stored in a second unit having a second format different from the first format, and</claim-text><claim-text>each of the first unit and the second unit includes a header and a payload, the payload including encoded data or metadata, the header including information indicating a type of data included in the payload.</claim-text></claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. A three-dimensional data acquisition device, comprising:<claim-text>a processor; and</claim-text><claim-text>memory,</claim-text><claim-text>wherein, using the memory, the processor:<claim-text>acquires a file storing one or more units in which an encoded information generated by encoding point cloud data is stored; and</claim-text><claim-text>acquires the one or more units from the file, wherein</claim-text></claim-text><claim-text>the file indicates an encoding method used in the encoding of the point cloud data out of a plurality of encoding methods including a first encoding method and a second encoding method,</claim-text><claim-text>the file is in conformity with ISO Based Media File Format (ISOBMFF),</claim-text><claim-text>when the point cloud is encoded by the first encoding method, the generated encoded information is stored in a first unit having a first format,</claim-text><claim-text>when the point cloud is encoded by the second encoding method, the generated encoded information is stored in a second unit having a second format different from the first format, and</claim-text><claim-text>each of the first unit and the second unit includes a header and a payload, the payload including encoded data or metadata, the header including information indicating a type of data included in the payload.</claim-text></claim-text></claim></claims></us-patent-application>