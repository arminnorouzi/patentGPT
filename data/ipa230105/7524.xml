<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230007525A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230007525</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17839596</doc-number><date>20220614</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>CN</country><doc-number>2021 10731782.6</doc-number><date>20210630</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>W</subclass><main-group>28</main-group><subgroup>02</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>W</subclass><main-group>4</main-group><subgroup>40</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>W</subclass><main-group>28</main-group><subgroup>0215</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20180201</date></cpc-version-indicator><section>H</section><class>04</class><subclass>W</subclass><main-group>4</main-group><subgroup>40</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>W</subclass><main-group>80</main-group><subgroup>12</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">METHOD AND DEVICE OF COORDINATING TRANSMISSION TIME OF V2X MESSAGE</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>DENSO CORPORATION</orgname><address><city>Kariya-city</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>ZHU</last-name><first-name>Jian</first-name><address><city>Shanghai-city</city><country>CN</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>SONG</last-name><first-name>Yueqi</first-name><address><city>Shanghai-city</city><country>CN</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A method of coordinating a transmission time of V2X message includes: acquiring, by an application layer module of a V2X device, an ideal time point at which an underlying layer module of the V2X device schedules to transmit the V2X message, the application layer module being configured to manage V2X application scenario and the underlying layer module being configured to manage V2X radio frequency function; determining a processing period for processing the V2X message; determining a waiting period based on the ideal time point and the processing period; transmitting, from the application layer module to the underlying layer module, a message transmission request after elapse of the waiting period from acquiring of the ideal time point; and in response to a reception of the message transmission request in the underlying layer module, transmitting, using the underlying layer module, the V2X message toward outside at the ideal time point.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="131.49mm" wi="112.61mm" file="US20230007525A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="169.08mm" wi="126.83mm" file="US20230007525A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="192.79mm" wi="151.55mm" file="US20230007525A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="189.65mm" wi="151.30mm" file="US20230007525A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="176.19mm" wi="146.64mm" file="US20230007525A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="166.03mm" wi="139.62mm" file="US20230007525A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATION</heading><p id="p-0002" num="0001">The present application claims the benefit of priority from Chinese Patent Application No. 202110731782.6 filed on Jun. 30, 2021. The entire disclosure of the above application is incorporated herein by reference.</p><heading id="h-0002" level="1">TECHNICAL FIELD</heading><p id="p-0003" num="0002">The present disclosure relates to a vehicle-to everything (V2X) communication, and particularly relates to a method and a device of coordinating transmission time of V2X message.</p><heading id="h-0003" level="1">BACKGROUND</heading><p id="p-0004" num="0003">There has been known V2X systems, such as a cellular vehicle to everything (C-V2X) system, which is used to broadcast periodic service data toward outside.</p><heading id="h-0004" level="1">SUMMARY</heading><p id="p-0005" num="0004">A method of coordinating a transmission time of a vehicle-to-everything (V2X) message includes: acquiring, by an application layer module of a V2X device, an ideal time point at which an underlying layer module of the V2X device schedules to transmit the V2X message toward outside, the application layer module being configured to manage a V2X application scenario and the underlying layer module being configured to manage a V2X radio frequency function; determining a processing period required by the V2X device to process the V2X message; determining a waiting period based on the ideal time point and the processing period; transmitting, from the application layer module to the underlying layer module, a message transmission request after elapse of the waiting period from acquiring of the ideal time point; and in response to a reception of the message transmission request in the underlying layer module, transmitting, using the underlying layer module, the V2X message toward outside at the ideal time point.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p-0006" num="0005">Objects, features and advantages of the present disclosure will become apparent from the following detailed description made with reference to the accompanying drawings. In the drawings:</p><p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a flowchart showing an example of a method of coordinating a transmission time of V2X message according to the present disclosure;</p><p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a diagram showing a scenario using the method of coordinating the transmission time of V2X message according to the present disclosure;</p><p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a diagram showing another scenario using the method of coordinating the transmission time of V2X message according to the present disclosure:</p><p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a block diagram showing a configuration of a system that coordinates the transmission time of V2X message according to the present disclosure; and</p><p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a block diagram showing a configuration of a system device that coordinates the transmission time of V2X message according to the present disclosure.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0006" level="1">DETAILED DESCRIPTION</heading><p id="p-0012" num="0011">In V2X systems, such as a cellular vehicle to everything (C-V2X) system, there are applications that broadcast periodic service data. For example, as the periodic service data, Basic Safety Message (BSM), map, Signal Phase and Timing (SPAT, traffic light phase and timing) message, or the like are broadcasted periodically. Hereinafter, these kinds of messages are collectively referred to as V2X message. For example, regular BSM data of own vehicle will be broadcasted at a fixed frequency (for example, 10 Hz) in the absence of an emergency trigger. However, due to the limited channel resource, the C-V2X system considers the factors of V2X periodic service data in the design and provides a semi-persistent scheduling (SPS) communication method in order to optimize allocation of channel resource. In the SPS communication method, the C-V2X system reserves channel resource in the network based on the broadcasting period of service data. However, in an actual application, an operation related to the SPS is executed in an underlying layer module that manages V2X radio frequency function, and an operation related to the V2X service is executed in an application layer module that manages the V2X application scenario. When the application layer module requests the underlying layer module to transmit the BSM service data, the underlying layer module does not immediately respond to the data transmission request from the application layer module due to a reason that, for example, the underlying layer module needs to wait for an activation of the reserved resource. The application layer module has no information about the resource reservation performed by the underlying layer module. Thus, when the application layer module transmits the service request at a strictly fixed frequency of, for example, 10 Hz, the underlying layer module may receive the message transmission request too early or the message transmission request may miss the reserved resource, thereby the data transmission by the underlying layer module may be delayed. For example, when the unit that performs BSM packaging in the application layer module is blocked, or the timer accuracy is insufficient, or the transmission by the underlying layer module is blocked or delayed, it is easy to miss the reserved channel resource. This may cause an increase or decrease in the actual transmission delay time of the BSM. Thus, the communication fails to satisfy low latency and high frequency requirement defined under the C-V2X standard, and may further affect proper operation of C-V2X security application.</p><p id="p-0013" num="0012">The following will give a brief description of one or more aspects of the present disclosure to provide a basic understanding of the present disclosure. This brief description is not an exhaustive overview of all contemplated aspects and is neither intended to identify key or critical elements of all aspects nor attempt to delineate the scope of any or all aspects. Its sole purpose is to describe some concepts of one or more aspects in a simplified form as a prelude to the more detailed description that will be described later.</p><p id="p-0014" num="0013">The present disclosure provides a method of coordinating a transmission time of vehicle-to-everything (V2X) message. The method includes: acquiring, by an application layer module of a V2X device, an ideal time point at which an underlying layer module of the V2X device schedules to transmit the V2X message toward outside, the application layer module being configured to manage a V2X application scenario and the underlying layer module being configured to manage a V2X radio frequency function; determining a processing period required by the V2X device to process the V2X message; determining a waiting period based on the ideal time point and the processing period; transmitting, from the application layer module to the underlying layer module, a message transmission request after elapse of the waiting period from acquiring of the ideal time point; and in response to a reception of the message transmission request in the underlying layer module, transmitting, using the underlying layer module, the V2X message toward outside at the ideal time point.</p><p id="p-0015" num="0014">In one embodiment, in the transmitting of the message transmission request from the application layer module to the underlying layer module, the application layer module prepares the V2X message and transmits the prepared V2X message to the underlying layer module together with the message transmission request.</p><p id="p-0016" num="0015">In one embodiment, the ideal time point occurs at an expected period set by the application layer module, and in the acquiring of the ideal time point by the application layer module: in response to the ideal time point deviating from the expected period, the underlying layer module notifies the application layer module of a first ideal time point determined after detection of the deviation; and the application layer module determines, by calculation, each ideal time point after the first ideal time point until the ideal time point deviates from the expected period again or the expected period is changed by the application layer module.</p><p id="p-0017" num="0016">In one embodiment, the ideal time point occurs at an expected period set by the application layer module, and in the acquiring of the ideal time point by the application layer module: in response to the expected period being changed by the application layer module, the underlying layer module notifies the application layer module of a first ideal time point determined after change of the expected period; and the application layer module determines, by calculation, each ideal time point after the first ideal time point until the expected period is changed again by the application layer module or the ideal time point deviates from the expected period.</p><p id="p-0018" num="0017">In one embodiment, the waiting period M1 is determined by a formula M1=(T1&#x2212;T0)&#x2212;M2, when M2&#x3c;T1&#x2212;T0, M1=(T1&#x2212;T0)&#x2212;M2, when M2&#x2265;T1&#x2212;T0, M1=0, wherein M1 represents the waiting period, T1 represents the ideal time point, T0 represents a time point at which the application layer module acquires the ideal time point T1, and M2 represents the processing period.</p><p id="p-0019" num="0018">In one embodiment, the processing period M2 is set to a fixed value.</p><p id="p-0020" num="0019">In one embodiment, the processing period M2 is set to a dynamic value, and the determining of the processing period M2 includes dynamically determining the processing period based on a busy level P1 of the application layer module and a busy level P2 of the underlying layer module.</p><p id="p-0021" num="0020">In one embodiment, the busy level P1 depends on a processing load CPU1 of the application layer module, the busy level P2 depends on a processing load CPU2 of the underlying layer module, and the processing period M2 is determined by a formula: M2=(P1(CPU1)+P2(CPU2)+M3), wherein M3 represents a sum of time periods except the busy level P1 of the application layer module and the busy level P2 of the underlying layer module.</p><p id="p-0022" num="0021">In one embodiment, the processing period M2 is set to a dynamic value, and the determining of the processing period M2 includes dynamically determining the processing period M2 based on busy levels of multiple sub-modules of the application layer module and busy levels of multiple sub-modules of the underlying layer module.</p><p id="p-0023" num="0022">In one embodiment, the processing period M2 is determined by a formula: M2=(P11(CPU11)+P12(CPU12)+ . . . +P1N(CPU1N)+P21(CPU21)+P22(CPU22)+ . . . +P2L(CPU2L)+M4), wherein, CPU11, CPU12, . . . CPU1N represent processing loads of corresponding sub-modules of the application layer module, CPU21, CPU22, . . . CPU2L represent processing loads of corresponding sub-modules of the underlying layer module, P11, P12, . . . P1N represent busy levels of corresponding sub-modules of the application layer module, P21, P22, . . . P2L represent busy levels of corresponding sub-modules of the underlying layer module, M4 represent a sum of time periods except the busy levels of the multiple sub-modules of the application layer module and the busy levels of the multiple sub-modules of the underlying layer module, and N and L are integers equal to or greater than 2.</p><p id="p-0024" num="0023">The present disclosure provides a device of coordinating a transmission time of a vehicle-to-everything (V2X) message, and the device includes: a memory; and a processor coupled to the memory. The processor is configured to: acquire, by an application layer module of a V2X device, an ideal time point at which an underlying layer module of the V2X device schedules to transmit the V2X message toward outside, the application layer module being configured to manage a V2X application scenario and the underlying layer module being configured to manage a V2X radio frequency function; determine a processing period required by the V2X device to process the V2X message; determine a waiting period based on the ideal time point and the processing period; transmit, from the application layer module to the underlying layer module, a message transmission request after elapse of the waiting period from acquiring of the ideal time point; and in response to a reception of the message transmission request in the underlying layer module, transmit, using the underlying layer module, the V2X message toward outside at the ideal time point.</p><p id="p-0025" num="0024">In one embodiment, in the transmitting of the message transmission request from the application layer module to the underlying layer module, the processor is configured to control the application layer module to prepare the V2X message and transmit the prepared V2X message to the underlying layer module together with the message transmission request.</p><p id="p-0026" num="0025">In one embodiment, the ideal time point occurs at an expected period set by the application layer module, and in the acquiring of the ideal time point by the application layer module, the processor is configured to: in response to the ideal time point deviating from the expected period, control the underlying layer module to notify the application layer module of a first ideal time point determined after detection of the deviation; and control the application layer module to determine, by calculation, each ideal time point after the first ideal time point until the ideal time point deviates from the expected period again or the expected period is changed by the application layer module.</p><p id="p-0027" num="0026">In one embodiment, the ideal time point occurs at an expected period set by the application layer module, and in the acquiring of the ideal time point by the application layer module, the processor is configured to: in response to the expected period being changed by the application layer module, control the underlying layer module to notify the application layer module of a first ideal time point determined after change of the expected period; and control the application layer module to determine, by calculation, each ideal time point after the first ideal time point until the expected period is changed again by the application layer module or the ideal time point deviates from the expected period.</p><p id="p-0028" num="0027">In one embodiment, the processor is configured to determine the waiting period by a formula M1=(T1&#x2212;T0)&#x2212;M2, when M2&#x3c;T1&#x2212;T0, M1=(T1&#x2212;T0)&#x2212;M2, when M2&#x2265;T1&#x2212;T0, M1=0, wherein M1 represents the waiting period, T1 represents the ideal time point, T0 represents a time point at which the application layer module acquires the ideal time point T1, and M2 represents the processing period.</p><p id="p-0029" num="0028">In one embodiment, the processing period M2 is set to a fixed value.</p><p id="p-0030" num="0029">In one embodiment, the processing period M2 is set to a dynamic value, and in the determining of the processing period M2, the processor is configured to dynamically determine the processing period based on a busy level P1 of the application layer module and a busy level P2 of the underlying layer module.</p><p id="p-0031" num="0030">In one embodiment, the busy level P1 depends on a processing load CPU1 of the application layer module, the busy level P2 depends on a processing load CPU2 of the underlying layer module, in the determining of the processing period M2, the processor is configured to determine the processing period by a formula: M2=(P1(CPU1)+P2(CPU2)+M3), wherein M3 represents a sum of time periods except the busy level P1 of the application layer module and the busy level P2 of the underlying layer module.</p><p id="p-0032" num="0031">In one embodiment, the processing period M2 is set to a dynamic value, and in the determining of the processing period M2, the processor is configured to dynamically determine the processing period M2 based on busy levels of multiple sub-modules of the application layer module and busy levels of multiple sub-modules of the underlying layer module.</p><p id="p-0033" num="0032">In one embodiment, the processor is configured to determine the processing period M2 by a formula: M2=(P11(CPU11)+P12(CPU12)+ . . . +P1N(CPU1N)+P21(CPU21)+P22(CPU22)+ . . . +P2L(CPU2L)+M4), wherein, CPU11, CPU12, . . . CPU1N represent processing loads of corresponding sub-modules of the application layer module, CPU21, CPU22, . . . CPU2L represent processing loads of corresponding sub-modules of the underlying layer module, P11, P12, . . . P1N represent busy levels of corresponding sub-modules of the application layer module, P21, P22, . . . P2L represent busy levels of corresponding sub-modules of the underlying layer module, M4 represent a sum of time periods except the busy levels of the multiple sub-modules of the application layer module and the busy levels of the multiple sub-modules of the underlying layer module, and N and L are integers equal to or greater than 2.</p><p id="p-0034" num="0033">The present disclosure provides a computer-readable storage medium storing a computer program for coordinating a transmission time of a vehicle-to-everything (V2X) message, the computer program comprising instructions executable by a processor to perform the method described above.</p><p id="p-0035" num="0034">In order to make the objectives, technical solutions and advantages of the present disclosure more clearly, the present disclosure will be further described in detail below with reference to specific embodiments and accompanying drawings. In the following detailed description, numerous specific details are set forth in order to provide a thorough understanding of the described exemplary embodiments. However, it will be apparent to the person skilled in the art that the described embodiments may be executed without some or all of these specific details. In other exemplary embodiments, well-known structures have not been described in detail to avoid unnecessarily obscuring the concepts of the present disclosure. It should be understood that the specific embodiments described herein are only used to explain the present disclosure, but not to limit the present disclosure. Meanwhile, various aspects described in the embodiments may be combined arbitrarily under a condition that there is no conflict.</p><p id="p-0036" num="0035">In the existing V2X system, the application layer module transmits a V2X message transmission request to the underlying layer module at a strictly fixed frequency. The application layer module has no information about the resource reservation performed by the underlying layer module. The underlying layer module may receive the message transmission request too early or the message transmission request may miss the reserved resource, thereby causing a transmission delay of V2X message. This may cause an increase or decrease in delay time of the V2X message transmission. Thus, the communication fails to satisfy low latency and high frequency requirement defined under the C-V2X standard, and may further affect the proper operation of C-V2X security application.</p><p id="p-0037" num="0036">The present disclosure provides a method and a device, each of which coordinates the transmission time of V2X message. The application layer module and the underlying layer module coordinate the transmission time of V2X message in order to keep the actual transmission interval of V2X messages in stable manner. Thus, an increase or decrease in delay time of the V2X message transmission can be suppressed, and failure to satisfying low latency and high frequency requirement defined under the C-V2X standard can be avoided.</p><p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a flowchart showing an example of a method <b>100</b> that coordinates a transmission time of V2X message according to the present disclosure.</p><p id="p-0039" num="0038">The method <b>100</b> begins at S<b>105</b>. In S<b>105</b>, the application layer module of the V2X device acquires an ideal time point at which the underlying layer module of the V2X device transmits the V2X message toward outside.</p><p id="p-0040" num="0039">In the present disclosure, the application layer module is a module included in the V2X device, and manages the V2X application scenario, for example, the software for managing V2X application scenario. The underlying layer module is a module included in the V2X device, and manages the V2X radio frequency function, for example, the management of software and/or hardware of V2X radio frequency function. In some embodiments, the ideal time point may be a specific time point at which the underlying layer module transmits the message reserved by the SPS.</p><p id="p-0041" num="0040">In some implementations, the application layer module may acquire the ideal time point in different ways. For example, the application layer module may actively request the underlying layer module to inform the ideal time point. In another example, the underlying layer module may actively notify the application layer module of the next ideal time point reserved by the underlying layer module after each reserved ideal time point. In another example, the ideal time point occurs at the expected period of the application layer module. When the reserved ideal time point deviates from the expected period, for example, the next reserved ideal time point no longer advances according to the previously set transmission period due to a change occurred in the V2X network or the like, the underlying layer module may voluntarily notify, to the application layer module, the first reserved ideal time point after occurrence of the deviation, and the application layer module acquires each ideal time point after the first ideal time point by calculation until the ideal time point deviates from the expected period again or the expected period of the application layer module changes. In another example, the ideal time point is set according to the expected period of the application layer module. When the expected period of the application layer module changes, the underlying layer module voluntarily informs the application layer module of the reserved first ideal time point after the change of expected period. Then, the application layer module acquires each ideal time point after the notified first ideal time point by calculation until the expected period of the application layer module changes again or the ideal time point deviates from the expected period.</p><p id="p-0042" num="0041">For example, assuming that the application layer module needs to broadcast V2X messages with a fixed period of 100 milliseconds (ms). In this case, the expected period of the application layer module is set to 100 ms. The application layer module informs the underlying layer module of the expected period of 100 ms, and the underlying layer module performs resource reservation according to the notified period. The underlying layer module reserves the first ideal time point, and notifies the application layer module of the first ideal time point TS0, which is reserved at the period of 100 ms to transmit the V2X messages toward outside with consideration of the resource reservation condition. As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, after the application layer module acquires TS0 in S<b>105</b>, the V2X device continues to perform S<b>110</b>, S<b>115</b>, S<b>120</b>, and S<b>125</b>. The process shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref> is repeatedly executed by the V2X device. After the first ideal time point TS0, the application layer module calculates, in S<b>105</b>, a subsequent ideal time point using a formula T(K)=K*100 ms+TS0, wherein K represents a cumulative count of V2X message transmission after the first ideal time point TS0. That is, each ideal time point after TS0 occurs at the period of 100 ms. After the application layer module acquires each subsequent ideal time point through calculation in S<b>105</b>, the V2X device continues to perform S<b>110</b>, S<b>115</b>, S<b>120</b>, and S<b>125</b>.</p><p id="p-0043" num="0042">After several rounds of V2X message transmission, due to a change in the V2X network, the underlying layer module may detect that the reserved ideal time point does not advance according to the expected period of the application layer module, that is, at the period of 100 ms. When the ideal time point deviates from the expected period, the underlying layer module informs, to the application layer module, the first ideal time point TS1 after the deviation is detected. The first ideal time point TS1 is the time point reserved by the underlying layer module after a change occurs in the V2X network. After the application layer module acquires the first ideal time point TS1 in S<b>105</b>, the V2X device continues to perform S<b>110</b>, S<b>115</b>, S<b>120</b>, and S<b>125</b>. The application layer module calculates a subsequent ideal time point using a formula T(J)=J*100 ms+TS1, wherein J represents a cumulative count of V2X message transmission from the first ideal time point TS1. Each ideal time point after the first ideal time point TS1 successively occurs at the period of 100 ms. After the application layer module acquires each ideal time point by calculation, the V2X device continues to perform S<b>110</b>, S<b>115</b>, S<b>120</b>, and S<b>125</b>.</p><p id="p-0044" num="0043">In some implementations, the expected period at which the application layer module broadcasts V2X messages may be a fixed value, for example, 100 ms. In some implementations, the expected period may change within a range of, for example, from 100 ms to 200 ms. When the expected period changes, the application layer module informs the underlying layer module of the changed expected period (for example, 200 ms), and the underlying layer module reserves channel resource according to the expected period after change. Then, the underlying layer module informs the application layer module of the newly reserved ideal time point TS0&#x2032;. After the application layer module acquires TS0&#x2032; in S<b>105</b>, the V2X device continues to perform S<b>110</b>, S<b>115</b>, S<b>120</b>, and S<b>125</b>, and the application layer module calculates a subsequent ideal time point using a formula T(H)=H*200 ms+TS0&#x2032; based on the ideal time point TS0&#x2032; after change and the expected period of 200 ms after change. Herein, H represents a cumulative count of V2X message transmission after the time point TS0&#x2032;. The ideal time point after TS0&#x2032; continues to appear at the period of 200 ms until the expected period of the application layer module changes again or the underlying layer module detects that the reserved ideal time point deviates from the expected period. After the application layer module acquires each ideal time point through calculation in S<b>105</b>, the V2X device continues to perform S<b>110</b>, S<b>115</b>, S<b>120</b>, and S<b>125</b>.</p><p id="p-0045" num="0044">As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, in S<b>110</b>, a processing period required by the V2X device to process the V2X message is determined. Specifically, the processing period represents a period of time required for the V2X device to prepare and process the V2X message for transmission toward outside. For example, the processing period includes a time period required by the application layer module to prepare the V2X message, a time period required by the operating system of the V2X device for scheduling transmission of the V2X message, a time period required for transmitting a message transmission request from the application layer module to the underlying layer module, and a time period required by the underlying layer module to process the message transmission request. In order to successfully transmit the V2X message, the processing period should be equal to or longer than a sum of the above-described time periods with a certain margin.</p><p id="p-0046" num="0045">In S<b>115</b>, a waiting period is determined based on the ideal time point and the processing period.</p><p id="p-0047" num="0046">Specifically, the waiting period may be determined using the following formula: M1=(T1&#x2212;T0)&#x2212;M2. When M2&#x3c;T1&#x2212;T0, M1=(T1&#x2212;T0)&#x2212;M2. When M2&#x2265;T1&#x2212;T0, M1=0. Here, M1 represents the waiting period, T1 represents the ideal time point, T0 represents the time point at which the application layer module acquires the ideal time point T1, and M2 represents the processing period.</p><p id="p-0048" num="0047">In some implementations, the processing period M2 may be set to a fixed value. For example, the processing period M2 may be set to 30 ms according to actual measurement experience. The value of processing period M2 covers all of the necessary time periods in 99.9% of cases.</p><p id="p-0049" num="0048">In some implementations, the processing period M2 may be set to a dynamic value, and may be dynamically determined based on a busy level of the application layer module and a busy level of the underlying layer module.</p><p id="p-0050" num="0049">In some implementations, the processing period M2 may be set to a dynamic value and may be dynamically determined based on busy levels of multiple sub-modules of the application layer module and busy levels of multiple sub-modules of the underlying layer module.</p><p id="p-0051" num="0050">The following will describe specific calculation examples of the processing period M2 and the waiting period M1 with reference to <figref idref="DRAWINGS">FIG. <b>2</b></figref> and <figref idref="DRAWINGS">FIG. <b>3</b></figref>.</p><p id="p-0052" num="0051">In S<b>120</b>, the application layer module transmits the message transmission request to the underlying layer module in response to an elapse of the waiting period from the acquirement of ideal time point. Specifically, the application layer module may use a timer, which is set to expire in response to the elapse of waiting period. When the timer expires, the application layer module is triggered to transmit the message transmission request to the underlying layer module. In S<b>115</b>, in a case where the determined waiting period M1=0, the application layer module immediately transmits the message transmission request to the underlying layer module without setting the timer.</p><p id="p-0053" num="0052">In one embodiment, the application layer module may collect the V2X message from other sources. For example, the application layer module may collect, using GPS system or in-vehicle network such as CAN, the position of own vehicle, the speed of own vehicle, the yaw angle of own vehicle, and store the collected data in the application layer module. In such an embodiment, the application layer module may start preparing of the V2X message (for example, preparing package data required for the V2X message) after elapse of the waiting period, and then transmit the prepared V2X message to the underlying layer module together with the message transmission request. In another embodiment, the V2X message may be collected by a different module (for example, a collection unit disposed outside the application layer module), and the collected V2X message may be transmitted to the underlying layer module.</p><p id="p-0054" num="0053">In S<b>125</b>, the underlying layer module transmits the V2X message at the ideal time point in response to the received message transmission request. Specifically, after receiving the message transmission request, the underlying layer module processes the message transmission request and prepares for the message transmission before arrival of ideal time point, and then transmits the V2X message at the ideal time point toward outside, such as other vehicles, roadside device, or the like.</p><p id="p-0055" num="0054">In the method <b>100</b>, by the coordination between the application layer module and the underlying layer module, the application layer module can transmit the message transmission request to the underlying layer module at an appropriate time, thereby reducing the problem of transmission delay caused by asynchronous transmission between the application layer module and the underlying layer module in the V2X device. Thus, the actual transmission interval of V2X messages can be stabilized, and the reliability and real-time performance of V2X messages can be improved. This configuration ensures proper operation of safety applications, thereby improving vehicle safety performance.</p><p id="p-0056" num="0055">In order to better understand the method of coordinating the transmission time point of V2X message according to the present disclosure, exemplary scenarios using the method of the present disclosure will be described with reference to <figref idref="DRAWINGS">FIG. <b>2</b></figref> and <figref idref="DRAWINGS">FIG. <b>3</b></figref>.</p><p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a diagram showing a scenario <b>200</b> using the method of coordinating transmission time of V2X message according to the present disclosure.</p><p id="p-0058" num="0057">In the scenario <b>200</b>, it is assumed that the application layer module is configured to broadcast the V2X messages at the fixed period of 100 ms. In this scenario, the application layer module and the underlying layer module may coordinate the transmission time point of V2X messages through the following steps.</p><p id="p-0059" num="0058">(1) Initialize each module in the V2X device. The application layer module informs the underlying layer module of the period of 100 ms, and the underlying layer module performs V2X resource reservation according to the informed transmission period.</p><p id="p-0060" num="0059">(2) Perform time synchronization between the application layer module and the underlying layer module. Specifically, the application layer module and the underlying layer module perform time synchronization in software manner or hardware manner. For example, a time synchronization module may receive GNSS signals and transmit time synchronization information to both of the application layer module and the underlying layer module for synchronize the application layer module with the underlying layer module, for example, with an allowable error of less than 1 ms.</p><p id="p-0061" num="0060">(3) The application layer module acquires the ideal time point (T1 in <figref idref="DRAWINGS">FIG. <b>2</b></figref>) at which the underlying layer module schedules to transmit the V2X message toward outside. For example, the underlying layer module may notify the application layer module of the V2X message transmission time point, which is set at the period of 100 ms and reserved by the underlying layer module according to the V2X resource reservation condition.</p><p id="p-0062" num="0061">(4) The application layer module transmits the message transmission request to the underlying layer module after elapse of the waiting period from the acquirement of ideal time point. The waiting period is calculated as follows.</p><p id="p-0063" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>M</i>1=(<i>T</i>1&#x2212;<i>T</i>0)&#x2212;<i>M</i>2<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0064" num="0062">When M2&#x3c;T1&#x2212;T0, M1=(T1&#x2212;T0)&#x2212;M2.</p><p id="p-0065" num="0063">When M2&#x2265;T1&#x2212;T0, M1=0.</p><p id="p-0066" num="0064">Herein, M1 represents the waiting period, T1 represents the ideal time point, T0 represents the time point at which the application layer module acquires the ideal time point T1 from the underlying layer module, and M2 represents the processing period required by the V2X device to process the V2X message.</p><p id="p-0067" num="0065">As shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, T1&#x2212;T0=80 ms, and the processing period M2 is set to a fixed value of 30 ms.</p><p id="p-0068" num="0066">Thus, the waiting period M1=80 ms&#x2212;30 ms=50 ms.</p><p id="p-0069" num="0067">Therefore, in the scenario <b>200</b>, the application layer module transmits the message transmission request to the underlying layer module after elapse of 50 ms from the time point T0.</p><p id="p-0070" num="0068">In a case where the V2X message is collected by the application layer module, the application layer module may start preparing of the V2X message after elapse of the waiting period M1. The preparing of V2X message may include packing the data required by the V2X message, for example, packing the collected data, such as the position of own vehicle, the speed of own vehicle, the yaw angle of own vehicle and other data as BSM data packets. Then, the application layer module transmits the prepared V2X message to the underlying layer module together with the message transmission request.</p><p id="p-0071" num="0069">(5) The underlying layer module receives the message transmission request from the application layer module, and prepares for transmission of the message before arrival of ideal time point. Specifically, as shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the underlying layer module receives the message transmission request after 5 ms from the transmission of message transmission request, and prepares for the message transmission within remaining 25 ms. As shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the remaining time period of 25 ms is longer than the time period required by the underlying layer module to process the message transmission request (the block with hatching shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>) to provide a certain margin.</p><p id="p-0072" num="0070">(6) At the ideal time point T1, the underlying layer module broadcasts the V2X message on time toward outside, such as other vehicles, roadside device, or the like included in the V2X system.</p><p id="p-0073" num="0071"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a diagram showing another scenario <b>300</b> using the method of coordinating the transmission time of V2X message according to the present disclosure.</p><p id="p-0074" num="0072">In the scenario <b>300</b>, it is assumed that the application layer module is configured to broadcast the V2X messages at the fixed period of 100 ms. In this scenario, the application layer module and the underlying layer module may coordinate the transmission time point of V2X messages through the following steps.</p><p id="p-0075" num="0073">(1) Initialize each module in the V2X device. The application layer module informs the underlying layer module of the transmission period of 100 ms, and the underlying layer module performs V2X resource reservation according to the informed transmission period.</p><p id="p-0076" num="0074">(2) Perform time synchronization between the application layer module and the underlying layer module. Specifically, the application layer module and the underlying layer module perform synchronization in software manner or hardware manner. For example, a time synchronization module may receive GNSS signals and transmit time synchronization information to both of the application layer module and the underlying layer module to synchronize the application layer module with the underlying layer module, for example, with an allowable error of less than 1 ms.</p><p id="p-0077" num="0075">(3) The application layer module acquires the ideal time point (T1 in <figref idref="DRAWINGS">FIG. <b>3</b></figref>) at which the underlying layer module schedules to transmit the V2X message toward outside. For example, the underlying layer module may notify the application layer module of the V2X message transmission time, which is set at the period of 100 ms and reserved by the underlying layer module according to the V2X resource reservation condition.</p><p id="p-0078" num="0076">(4) The application layer module transmits the message transmission request to the underlying layer module after elapse of the waiting period from the acquirement of the ideal time point. The waiting period is calculated as follows.</p><p id="p-0079" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>M</i>1=(<i>T</i>1&#x2212;<i>T</i>0)&#x2212;<i>M</i>2<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0080" num="0077">When M2&#x3c;T1&#x2212;T0, M1=(T1&#x2212;T0)&#x2212;M2.</p><p id="p-0081" num="0078">When M2&#x2265;T1&#x2212;T0, M1=0.</p><p id="p-0082" num="0079">Herein, M1 represents the waiting period, T1 represents the ideal time point, T0 represents the time point at which the application layer module acquires the ideal time point T1 from the underlying layer module, and M2 represents the processing period required by the V2X device to process the V2X message.</p><p id="p-0083" num="0080">As shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, T1&#x2212;T0=80 ms.</p><p id="p-0084" num="0081">Different from the scenario <b>200</b>, in the scenario <b>300</b>, M2 is set to a dynamic value and the value of M2 is set with consideration of the processing load of the system. Specifically, M2 is calculated by the following formula.</p><p id="p-0085" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>M</i>2=(<i>P</i>1(<i>CPU</i>1)+<i>P</i>2(<i>CPU</i>2)+<i>M</i>3)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0086" num="0082">Herein, CPU1 represents a processing load of the application layer module, CPU2 represents a processing load of the underlying layer module, P1(CPU1) represents a busy level related to the processing load of the application layer module, P2(CPU2) represents a busy level related to the processing load of the underlying layer module, and M3 represents a total time period consumed except the time periods related to the busy level P1 of the application layer module and the busy level P2 of the underlying layer module. For example, M3 may include a time period required for the transmission of message transmission request from the application layer module to the underlying layer module, other time periods consumed in the system, and the like.</p><p id="p-0087" num="0083">The application layer module may acquire, by inquiring, that the processing load CPU1 of the application layer module is 32%, and the processing load CPU2 of the underlying layer module is 68%. M3 is empirically set to be 5 ms. Thus, M2=(P1(32%)+P2(68%)+5 ms).</p><p id="p-0088" num="0084">In the scenario <b>300</b>, a delay function is used to set the busy level of each module. Specifically, the delay function includes a table indicating relationship between the processing load and the delay time. After receiving the processing load as an input, the delay function looks up the closest load value in the table indicating relationship between the processing load and delay time, and specifies the corresponding time delay value as an output.</p><p id="p-0089" num="0085">An example of the load-delay relationship table included in the delay function P1 of the application layer module is shown in Table 1 as below.</p><p id="p-0090" num="0000"><tables id="TABLE-US-00001" num="00001"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="offset" colwidth="42pt" align="left"/><colspec colname="1" colwidth="63pt" align="center"/><colspec colname="2" colwidth="112pt" align="center"/><thead><row><entry/><entry namest="offset" nameend="2" rowsep="1">TABLE 1</entry></row><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row><row><entry/><entry>Processing Load</entry><entry>Delay</entry></row><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry/></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="4"><colspec colname="offset" colwidth="42pt" align="left"/><colspec colname="1" colwidth="63pt" align="center"/><colspec colname="2" colwidth="56pt" align="right"/><colspec colname="3" colwidth="56pt" align="left"/><tbody valign="top"><row><entry/><entry>&#x2002;0%</entry><entry>1</entry><entry>ms</entry></row><row><entry/><entry>10%</entry><entry>1.5</entry><entry>ms</entry></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="offset" colwidth="42pt" align="left"/><colspec colname="1" colwidth="63pt" align="center"/><colspec colname="2" colwidth="112pt" align="center"/><tbody valign="top"><row><entry/><entry>. . .</entry><entry>. . .</entry></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="4"><colspec colname="offset" colwidth="42pt" align="left"/><colspec colname="1" colwidth="63pt" align="center"/><colspec colname="2" colwidth="56pt" align="right"/><colspec colname="3" colwidth="56pt" align="left"/><tbody valign="top"><row><entry/><entry>30%</entry><entry>2</entry><entry>ms</entry></row><row><entry/><entry>40%</entry><entry>3</entry><entry>ms</entry></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="offset" colwidth="42pt" align="left"/><colspec colname="1" colwidth="63pt" align="center"/><colspec colname="2" colwidth="112pt" align="center"/><tbody valign="top"><row><entry/><entry>. . .</entry><entry>. . .</entry></row><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0091" num="0086">An example of the load-delay relationship table included in the delay function P2 of the underlying layer module is shown in Table 2 as below.</p><p id="p-0092" num="0000"><tables id="TABLE-US-00002" num="00002"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="offset" colwidth="42pt" align="left"/><colspec colname="1" colwidth="63pt" align="center"/><colspec colname="2" colwidth="112pt" align="center"/><thead><row><entry/><entry namest="offset" nameend="2" rowsep="1">TABLE 2</entry></row><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row><row><entry/><entry>Processing Load</entry><entry>Delay</entry></row><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry/></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="4"><colspec colname="offset" colwidth="42pt" align="left"/><colspec colname="1" colwidth="63pt" align="center"/><colspec colname="2" colwidth="56pt" align="right"/><colspec colname="3" colwidth="56pt" align="left"/><tbody valign="top"><row><entry/><entry>&#x2002;0%</entry><entry>1</entry><entry>ms</entry></row><row><entry/><entry>10%</entry><entry>0.5</entry><entry>ms</entry></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="offset" colwidth="42pt" align="left"/><colspec colname="1" colwidth="63pt" align="center"/><colspec colname="2" colwidth="112pt" align="center"/><tbody valign="top"><row><entry/><entry>. . .</entry><entry>. . .</entry></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="4"><colspec colname="offset" colwidth="42pt" align="left"/><colspec colname="1" colwidth="63pt" align="center"/><colspec colname="2" colwidth="56pt" align="right"/><colspec colname="3" colwidth="56pt" align="left"/><tbody valign="top"><row><entry/><entry>65%</entry><entry>4</entry><entry>ms</entry></row><row><entry/><entry>70%</entry><entry>6</entry><entry>ms</entry></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="offset" colwidth="42pt" align="left"/><colspec colname="1" colwidth="63pt" align="center"/><colspec colname="2" colwidth="112pt" align="center"/><tbody valign="top"><row><entry/><entry>. . .</entry><entry>. . .</entry></row><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0093" num="0087">According to the above-described load-delay relationship table, P1(32%)=2 ms and P2(68%)=6 ms.</p><p id="p-0094" num="0088">Thus, the processing period M2=(P1(32%)+P2(68%)+5 ms)=(2 ms+6 ms+5 ms)=13 ms, and the waiting period M1=80 ms&#x2212;13 ms=67 ms.</p><p id="p-0095" num="0089">Therefore, in the scenario <b>300</b>, the application layer module transmits the message transmission request to the underlying layer module after elapse of 67 ms from the time point T0.</p><p id="p-0096" num="0090">In a case where the V2X message is collected by the application layer module, the application layer may start preparing of the V2X message, such as packing the data required by the V2X message after elapse of the waiting period M1, and then transmits the prepared V2X message together with the message transmission request to the underlying layer module.</p><p id="p-0097" num="0091">It should be noted that the processing load of application layer module and the processing load of underlying layer module may be measured at intervals. Alternatively, the processing load of application layer module and the processing load of underlying layer module may be set as fixed values. For example, values measured at the factory or values obtained through theoretical calculation may be set as the fixed values. The time period M3 may be set to a fixed value, such as a measured value at the factory or a value obtained by theoretical calculation.</p><p id="p-0098" num="0092">(5) The underlying layer module receives the message transmission request from the application layer module, and prepares for the transmission of message before arrival of ideal time point. As shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the underlying layer module receives the message transmission request after 7 ms, that is, the time period required for transmission of the message transmission request from the application layer module to the underlying layer module is 7 ms. Then, the underlying layer module prepares for transmission of the message within 6 ms. As shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the remaining time period of 6 ms is longer than the time period required by the underlying layer module to process the message transmission request (the block with hatching shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>) to provide a certain margin.</p><p id="p-0099" num="0093">(6) At the ideal time point T1, the underlying layer module broadcasts the V2X message on time toward outside, such as other vehicles, roadside device, or the like included in the V2X system.</p><p id="p-0100" num="0094">It should be noted that <figref idref="DRAWINGS">FIG. <b>2</b></figref> and <figref idref="DRAWINGS">FIG. <b>3</b></figref> are only exemplary scenarios, and the present disclosure is not limited to these examples. Although <figref idref="DRAWINGS">FIG. <b>2</b></figref> and <figref idref="DRAWINGS">FIG. <b>3</b></figref> show specific steps, steps may be added, deleted, or combined different from the shown examples in an actual implementation. <figref idref="DRAWINGS">FIG. <b>3</b></figref> shows that the processing period M2 is determined based on the busy levels of the application layer module and the underlying layer module in the V2X device. In another example, the processing period M2 may be determined based on the busy levels of multiple sub-modules of the application layer module and the busy levels of multiple sub-modules of the underlying layer module.</p><p id="p-0101" num="0095"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a block diagram showing a configuration of a system <b>400</b> for coordinating the transmission time of V2X message according to the present disclosure.</p><p id="p-0102" num="0096">As shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the system <b>400</b> includes an application layer module <b>405</b>, an underlying layer module <b>420</b>, a radio frequency module <b>425</b>, and a time synchronization module <b>430</b>. As shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the application layer module <b>405</b>, the underlying layer module <b>420</b>, the time synchronization module <b>430</b> may directly or indirectly connect or communicate with one another through one or more buses <b>435</b>. The radio frequency module <b>425</b> is connected with the underlying layer module <b>420</b>, and the radio frequency module <b>425</b> and the underlying layer module <b>420</b> communicate with one another. For example, the radio frequency module <b>425</b> may be implemented by a wireless communication transceiver or the like.</p><p id="p-0103" num="0097">In an embodiment of the present disclosure, the application layer module <b>405</b> may be configured to: acquire an ideal time point at which the underlying layer module schedules to transmit the V2X message toward outside; determine the processing period required by the V2X device to process the V2X message; determine the waiting period based on the ideal time point and the processing period; and transmit the message transmission request to the underlying layer module after elapse of the waiting period from the acquirement of ideal time point. In one embodiment, the application layer module <b>405</b> may be configured to start preparing of the V2X message after elapse of the waiting period from the acquirement of the ideal time point, and transmit the prepared V2X message to the underlying layer module together with the message transmission request. In one embodiment, in a case where the ideal time point appears according to the expected period of the application layer module, in response to detection of a deviation of ideal time point from the expected period by the underlying layer module, the application layer module <b>405</b> may be configured to calculate the subsequent ideal time point after acquiring the first ideal time point, which is reset in response to the detection of deviation, until the ideal time point deviates from the expected period again or the expected period is changed. In one embodiment, in a case where the expected period of the application layer module changes, the application layer module <b>405</b> may be configured to calculate the subsequent ideal time point after acquiring the first ideal time point, which is reset in response to the change occurred in the expected period, until a change occurs again in the expected period or the ideal time point deviates from the expected period.</p><p id="p-0104" num="0098">As shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the application layer module <b>405</b> may include a data collection unit <b>410</b> configured to collect data of V2X message. For example, the data collection unit <b>410</b> may collect, from the GPS system, the in-vehicle CAN, or the like, data such as the position of own vehicle, the speed of own vehicle, the yaw angle of own vehicle, or the like. The application layer module <b>405</b> may further include a storage unit <b>415</b> to store the data collected by the data collection unit <b>410</b>.</p><p id="p-0105" num="0099">The underlying layer module <b>420</b> may be configured to: inform the application layer module of the reserved next ideal time point after each reserved ideal time point has passed; in response to the reserved ideal time point deviating from the expected period of the application layer module, notify the application layer module of the first ideal time point after deviation; in response to a change of the expected period set in the application layer module, notify the application layer module of the first ideal time point after the change of expected period; and transmit the V2X message toward outside at the ideal time point in response to the reception of the message transmission request.</p><p id="p-0106" num="0100">The radio frequency module <b>425</b> is configured to transmit and receive radio frequency signals and process the radio frequency signals.</p><p id="p-0107" num="0101">The time synchronization module <b>430</b> is configured to perform time synchronization between the application layer module <b>405</b> and the underlying layer module <b>420</b>.</p><p id="p-0108" num="0102"><figref idref="DRAWINGS">FIG. <b>4</b></figref> shows specific modules and units of the system <b>400</b>. It should be understood that these modules and units are exemplary configuration, and the present disclosure is not limited to this configuration. In different implementations, one or more of these modules or units may be combined, split, removed, or additional modules or units may be added. For example, in one implementation, the data collection unit <b>410</b> may be combined with the storage unit <b>415</b> as one unit. In another implementation, the data collection unit <b>410</b> and/or the storage unit <b>415</b> may be disposed outside of the application layer module <b>405</b>.</p><p id="p-0109" num="0103"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a block diagram showing a configuration of a system device <b>500</b> for coordinating the transmission time of V2X message according to the present disclosure.</p><p id="p-0110" num="0104">The device illustrates a general hardware environment in which the present disclosure may be applied in accordance with exemplary embodiments of the present disclosure.</p><p id="p-0111" num="0105">The following will describe the device <b>500</b> with reference to <figref idref="DRAWINGS">FIG. <b>5</b></figref>, which is an exemplary embodiment of a hardware device that may be applied to various aspects of the present disclosure.</p><p id="p-0112" num="0106">The device <b>500</b> may include components that are able to connect or communicate with a bus <b>520</b> via one or more interfaces. For example, the device <b>500</b> may include a bus <b>520</b>, a processor <b>505</b>, a memory <b>510</b>, an input device <b>525</b>, and an output device <b>530</b>.</p><p id="p-0113" num="0107">The processor <b>505</b> may be any type of processor. The processor <b>505</b> may be configured to manage the bus and perform general processing, including executing software stored in the memory. The processor <b>505</b> may also be configured to perform various functions related to coordination of the transmission time of V2X message as described in the present disclosure. For example, the processor <b>505</b> may be configured to: control the application layer module of the V2X device to acquire an ideal time point at which the underlying layer module of the V2X device schedules to transmit the V2X message toward outside, wherein the application layer module is configured to manage the V2X application scenario and the underlying layer module is configured to manage the V2X radio frequency function; determine the processing period required by the V2X device to process the V2X message; determine the waiting period based on the ideal time point and the processing period; control the application layer module to transmit the message transmission request to the underlying layer module after elapse of the waiting period from the acquirement of the ideal time point; and control the underlying layer module to transmit the V2X message at the ideal time point in response to the reception of message transmission request.</p><p id="p-0114" num="0108">The memory <b>510</b> may be any kind of computer-readable non-transitory tangible storage medium that is configured to store data. The memory <b>510</b> may store computer-executable software <b>515</b> comprising computer-readable instructions that, when executed, cause the processor to perform various functions related to coordinating the transmission time of V2X message as described in the present disclosure.</p><p id="p-0115" num="0109">The input device <b>525</b> may be any type of device that is configured to input information.</p><p id="p-0116" num="0110">The output device <b>530</b> may be any type of device for outputting information. In an example, the output device <b>530</b> may be provided by a device that displays information.</p><p id="p-0117" num="0111">The detailed description set forth above in connection with the accompanying drawings describes examples of the present disclosure, but does not represent all examples that may be implemented or that fall within the scope of the claims. The terms &#x201c;example&#x201d; and &#x201c;exemplary&#x201d; as used in this specification indicate &#x201c;serving as an example, instance, or illustration&#x201d; and do not indicate &#x201c;advantageous or advantageous over other examples.&#x201d;</p><p id="p-0118" num="0112">In the present disclosure, the terms &#x201c;one embodiment&#x201d; or &#x201c;an embodiment&#x201d; indicate that a particular feature, structure, or characteristic described in connection with the embodiment is included in at least one embodiment of the present disclosure. Thus, use of these terms may refer to more than one embodiment. Furthermore, the described features, structures or characteristics may be combined in any suitable manner in one or more embodiments.</p><p id="p-0119" num="0113">The description in the present disclosure is provided to enable a person skilled in the art to practice the various aspects of the present disclosure described herein. Various modifications of these aspects will be readily apparent to those skilled in the art, and the general principles defined herein may be applied to other aspects. Thus, the claims are not limited to the aspects described in the present disclosure, but also include all possible scope consistent with the claims linguistically. In the claims, reference to elements in the singular form should not be interpreted as &#x201c;only one&#x201d;, but should be interpreted as &#x201c;one or more&#x201d; unless there is special statement regarding the singular or multiple form. Unless specifically stated otherwise, the term &#x201c;some&#x201d; refers to one or more. Elements of the various aspects described in the present disclosure are all structural and functional equivalents now or hereafter known to the person skilled in the art, and the various aspects are expressly incorporated herein by reference and are intended to be encompassed by the claims.</p><p id="p-0120" num="0114">It should also be noted that the embodiments may be described as processes depicted as flowcharts, flow diagrams, block diagrams, or block diagrams. Although a flowchart may describe the operations as a sequential process, many of these operations can be performed in parallel or concurrently. Additionally, the order of operations may be rearranged.</p><p id="p-0121" num="0115">While various embodiments have been illustrated and described, it should be understood that the embodiments are not limited to the precise arrangements and components described in the present disclosure. Various modifications, substitutions and improvements apparent to those skilled in the art may be made in the arrangement, operation and details of the device disclosed herein without departing from the scope of the claims.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method of coordinating a transmission time of a vehicle-to-everything (V2X) message, the method comprising:<claim-text>acquiring, by an application layer module of a V2X device, an ideal time point at which an underlying layer module of the V2X device schedules to transmit the V2X message toward outside, the application layer module being configured to manage a V2X application scenario and the underlying layer module being configured to manage a V2X radio frequency function;</claim-text><claim-text>determining a processing period required by the V2X device to process the V2X message;</claim-text><claim-text>determining a waiting period based on the ideal time point and the processing period;</claim-text><claim-text>transmitting, from the application layer module to the underlying layer module, a message transmission request after elapse of the waiting period from acquiring of the ideal time point; and</claim-text><claim-text>in response to a reception of the message transmission request in the underlying layer module, transmitting, using the underlying layer module, the V2X message toward outside at the ideal time point.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein,<claim-text>in the transmitting of the message transmission request from the application layer module to the underlying layer module, the application layer module prepares the V2X message and transmits the prepared V2X message to the underlying layer module together with the message transmission request.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein<claim-text>the ideal time point occurs at an expected period set by the application layer module, and</claim-text><claim-text>in the acquiring of the ideal time point by the application layer module:<claim-text>in response to the ideal time point deviating from the expected period, the underlying layer module notifies the application layer module of a first ideal time point determined after detection of the deviation; and</claim-text><claim-text>the application layer module determines, by calculation, each ideal time point after the first ideal time point until the ideal time point deviates from the expected period again or the expected period is changed by the application layer module.</claim-text></claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein<claim-text>the ideal time point occurs at an expected period set by the application layer module, and</claim-text><claim-text>in the acquiring of the ideal time point by the application layer module:<claim-text>in response to the expected period being changed by the application layer module, the underlying layer module notifies the application layer module of a first ideal time point determined after change of the expected period; and</claim-text><claim-text>the application layer module determines, by calculation, each ideal time point after the first ideal time point until the expected period is changed again by the application layer module or the ideal time point deviates from the expected period.</claim-text></claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein<claim-text>the waiting period M1 is determined by a formula M1=(T1&#x2212;T0)&#x2212;M2,</claim-text><claim-text>when M2&#x3c;T1&#x2212;T0, M1=(T1&#x2212;T0)&#x2212;M2,</claim-text><claim-text>when M2&#x2265;T1&#x2212;T0, M1=0,</claim-text><claim-text>wherein M1 represents the waiting period, T1 represents the ideal time point, T0 represents a time point at which the application layer module acquires the ideal time point T1, and M2 represents the processing period.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein<claim-text>the processing period M2 is set to a fixed value.</claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein<claim-text>the processing period M2 is set to a dynamic value, and</claim-text><claim-text>the determining of the processing period M2 includes dynamically determining the processing period based on a busy level P1 of the application layer module and a busy level P2 of the underlying layer module.</claim-text></claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The method according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein<claim-text>the busy level P1 depends on a processing load CPU1 of the application layer module,</claim-text><claim-text>the busy level P2 depends on a processing load CPU2 of the underlying layer module, and</claim-text><claim-text>the processing period M2 is determined by a formula:<claim-text><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>M</i>2=(<i>P</i>1(<i>CPU</i>1)+<i>P</i>2(<i>CPU</i>2)+<i>M</i>3),<?in-line-formulae description="In-line Formulae" end="tail"?></claim-text></claim-text><claim-text>wherein M3 represents a sum of time periods except the busy level P1 of the application layer module and the busy level P2 of the underlying layer module.</claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The method according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein<claim-text>the processing period M2 is set to a dynamic value, and</claim-text><claim-text>the determining of the processing period M2 includes dynamically determining the processing period M2 based on busy levels of multiple sub-modules of the application layer module and busy levels of multiple sub-modules of the underlying layer module.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The method according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein<claim-text>the processing period M2 is determined by a formula:<claim-text><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>M</i>2=(<i>P</i>11(<i>CPU</i>11)+<i>P</i>12(<i>CPU</i>12)+ . . . +<i>P</i>1<i>N</i>(<i>CPU</i>1<i>N</i>)+<i>P</i>21(<i>CPU</i>21)+<i>P</i>22(<i>CPU</i>22)+ . . . +<i>P</i>2<i>L</i>(<i>CPU</i>2<i>L</i>)+<i>M</i>4),<?in-line-formulae description="In-line Formulae" end="tail"?></claim-text></claim-text><claim-text>wherein,</claim-text><claim-text>CPU11, CPU12, . . . CPU1N represent processing loads of corresponding sub-modules of the application layer module,</claim-text><claim-text>CPU21, CPU22, . . . CPU2L represent processing loads of corresponding sub-modules of the underlying layer module,</claim-text><claim-text>P11, P12, . . . P1N represent busy levels of corresponding sub-modules of the application layer module,</claim-text><claim-text>P21, P22, . . . P2L represent busy levels of corresponding sub-modules of the underlying layer module,</claim-text><claim-text>M4 represent a sum of time periods except the busy levels of the multiple sub-modules of the application layer module and the busy levels of the multiple sub-modules of the underlying layer module, and</claim-text><claim-text>N and L are integers equal to or greater than 2.</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. A device of coordinating a transmission time of a vehicle-to-everything (V2X) message, the device comprising:<claim-text>a memory; and</claim-text><claim-text>a processor coupled to the memory, the processor being configured to:<claim-text>acquire, by an application layer module of a V2X device, an ideal time point at which an underlying layer module of the V2X device schedules to transmit the V2X message toward outside, the application layer module being configured to manage a V2X application scenario and the underlying layer module being configured to manage a V2X radio frequency function;</claim-text><claim-text>determine a processing period required by the V2X device to process the V2X message;</claim-text><claim-text>determine a waiting period based on the ideal time point and the processing period;</claim-text><claim-text>transmit, from the application layer module to the underlying layer module, a message transmission request after elapse of the waiting period from acquiring of the ideal time point; and</claim-text><claim-text>in response to a reception of the message transmission request in the underlying layer module, transmit, using the underlying layer module, the V2X message toward outside at the ideal time point.</claim-text></claim-text></claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The device according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein,<claim-text>in the transmitting of the message transmission request from the application layer module to the underlying layer module, the processor is configured to control the application layer module to prepare the V2X message and transmit the prepared V2X message to the underlying layer module together with the message transmission request.</claim-text></claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The device according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein<claim-text>the ideal time point occurs at an expected period set by the application layer module, and</claim-text><claim-text>in the acquiring of the ideal time point by the application layer module, the processor is configured to:<claim-text>in response to the ideal time point deviating from the expected period, control the underlying layer module to notify the application layer module of a first ideal time point determined after detection of the deviation; and</claim-text><claim-text>control the application layer module to determine, by calculation, each ideal time point after the first ideal time point until the ideal time point deviates from the expected period again or the expected period is changed by the application layer module.</claim-text></claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The device according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein<claim-text>the ideal time point occurs at an expected period set by the application layer module, and</claim-text><claim-text>in the acquiring of the ideal time point by the application layer module, the processor is configured to:<claim-text>in response to the expected period being changed by the application layer module, control the underlying layer module to notify the application layer module of a first ideal time point determined after change of the expected period; and</claim-text><claim-text>control the application layer module to determine, by calculation, each ideal time point after the first ideal time point until the expected period is changed again by the application layer module or the ideal time point deviates from the expected period.</claim-text></claim-text></claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The device according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein<claim-text>the processor is configured to determine the waiting period by a formula<claim-text><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>M</i>1=(<i>T</i>1&#x2212;<i>T</i>0)&#x2212;<i>M</i>2,<?in-line-formulae description="In-line Formulae" end="tail"?></claim-text></claim-text><claim-text>when M2&#x3c;T1&#x2212;T0, M1=(T1&#x2212;T0)&#x2212;M2,</claim-text><claim-text>when M2&#x2265;T1&#x2212;T0, M1=0,</claim-text><claim-text>wherein M1 represents the waiting period, T1 represents the ideal time point, T0 represents a time point at which the application layer module acquires the ideal time point T1, and M2 represents the processing period.</claim-text></claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The device according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein<claim-text>the processing period M2 is set to a fixed value.</claim-text></claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The device according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein<claim-text>the processing period M2 is set to a dynamic value, and</claim-text><claim-text>in the determining of the processing period M2, the processor is configured to dynamically determine the processing period based on a busy level P1 of the application layer module and a busy level P2 of the underlying layer module.</claim-text></claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. The device according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein<claim-text>the busy level P1 depends on a processing load CPU1 of the application layer module,</claim-text><claim-text>the busy level P2 depends on a processing load CPU2 of the underlying layer module,</claim-text><claim-text>in the determining of the processing period M2, the processor is configured to determine the processing period by a formula:<claim-text><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>M</i>2=(<i>P</i>1(<i>CPU</i>1)+<i>P</i>2(<i>CPU</i>2)+<i>M</i>3),<?in-line-formulae description="In-line Formulae" end="tail"?></claim-text></claim-text><claim-text>wherein M3 represents a sum of time periods except the busy level P1 of the application layer module and the busy level P2 of the underlying layer module.</claim-text></claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. The device according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein<claim-text>the processing period M2 is set to a dynamic value, and</claim-text><claim-text>in the determining of the processing period M2, the processor is configured to dynamically determine the processing period M2 based on busy levels of multiple sub-modules of the application layer module and busy levels of multiple sub-modules of the underlying layer module.</claim-text></claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. The device according to <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein<claim-text>the processor is configured to determine the processing period M2 by a formula:<claim-text><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>M</i>2=(<i>P</i>11(<i>CPU</i>11)+<i>P</i>12(<i>CPU</i>12)+ . . . +<i>P</i>1<i>N</i>(<i>CPU</i>1<i>N</i>)+<i>P</i>21(<i>CPU</i>21)+<i>P</i>22(<i>CPU</i>22)+ . . . +<i>P</i>2<i>L</i>(<i>CPU</i>2<i>L</i>)+<i>M</i>4)<?in-line-formulae description="In-line Formulae" end="tail"?></claim-text></claim-text><claim-text>wherein,</claim-text><claim-text>CPU11, CPU12, . . . CPU1N represent processing loads of corresponding sub-modules of the application layer module,</claim-text><claim-text>CPU21, CPU22, . . . CPU2L represent processing loads of corresponding sub-modules of the underlying layer module,</claim-text><claim-text>P11, P12, . . . P1N represent busy levels of corresponding sub-modules of the application layer module,</claim-text><claim-text>P21, P22, . . . P2L represent busy levels of corresponding sub-modules of the underlying layer module,</claim-text><claim-text>M4 represent a sum of time periods except the busy levels of the multiple sub-modules of the application layer module and the busy levels of the multiple sub-modules of the underlying layer module, and</claim-text><claim-text>N and L are integers equal to or greater than 2.</claim-text></claim-text></claim><claim id="CLM-00021" num="00021"><claim-text><b>21</b>. A computer-readable storage medium storing a computer program for coordinating a transmission time of a vehicle-to-everything (V2X) message, the computer program comprising instructions executable by a processor to perform the method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>.</claim-text></claim></claims></us-patent-application>