<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230007187A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230007187</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17944233</doc-number><date>20220914</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>JP</country><doc-number>2020-121277</doc-number><date>20200715</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>5</main-group><subgroup>243</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>V</subclass><main-group>20</main-group><subgroup>58</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>5</main-group><subgroup>235</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>5</main-group><subgroup>243</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20220101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>V</subclass><main-group>20</main-group><subgroup>584</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>5</main-group><subgroup>2351</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>5</main-group><subgroup>2355</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">IMAGING CONTROL DEVICE, IMAGING CONTROL METHOD, AND NON-TRANSITORY COMPUTER READABLE RECORDING MEDIUM</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>PCT/JP2021/021514</doc-number><date>20210607</date></document-id><parent-status>PENDING</parent-status></parent-doc><child-doc><document-id><country>US</country><doc-number>17944233</doc-number></document-id></child-doc></relation></continuation></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>JVCKENWOOD Corporation</orgname><address><city>Yokohama-shi</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Ibaraki</last-name><first-name>Takeshi</first-name><address><city>Yokohama-shi</city><country>JP</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Kurashige</last-name><first-name>Norio</first-name><address><city>Yokohama-shi</city><country>JP</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>Matsukawa</last-name><first-name>Nobuyuki</first-name><address><city>Yokohama-shi</city><country>JP</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">Image quality is to be improved. An imaging control device includes: an imaging data obtaining unit that obtains imaging data; a frame setting unit that sets a predetermined frame in the imaging data obtained by the imaging data obtaining unit; a luminance value obtaining unit that obtains luminance values of imaging data in a range of the frame set by the frame setting unit; a representative value calculating unit that calculates a representative value from the luminance values obtained by the luminance value obtaining unit; and a converting unit that performs gamma conversion of the imaging data obtained by the imaging data obtaining unit.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="131.32mm" wi="110.07mm" file="US20230007187A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="149.35mm" wi="112.10mm" file="US20230007187A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="97.37mm" wi="121.07mm" file="US20230007187A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="178.31mm" wi="93.05mm" file="US20230007187A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="179.41mm" wi="93.05mm" file="US20230007187A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="208.28mm" wi="145.97mm" file="US20230007187A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="190.84mm" wi="112.78mm" orientation="landscape" file="US20230007187A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="149.86mm" wi="116.84mm" file="US20230007187A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATION(S)</heading><p id="p-0002" num="0001">This application is a Continuation of PCT international application Ser. No. PCT/JP2021/021514 filed on Jun. 7, 2021 which designates the United States, incorporated herein by reference, and which claims the benefit of priority from Japanese Patent Application No. 2020-121277, filed on Jul. 15, 2020, incorporated herein by reference.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">BACKGROUND</heading><p id="p-0003" num="0002">1. Technical Field</p><p id="p-0004" num="0003">The present disclosure relates to an imaging control device, an imaging control method, and a non-transitory computer readable recording medium.</p><p id="p-0005" num="0004">2. Description of the Related Art</p><p id="p-0006" num="0005">In Japanese Unexamined Patent Application Publication No. 2019-071568, a technique, in which a second gradation conversion curve is generated and gradation conversion of image data is performed by use of the second gradation conversion curve, is described, the second gradation conversion curve resulting from adjustment of a first gradation conversion curve corresponding to a dynamic range of the image data, the adjustment being done so that luminance changes in a bright portion and a dark portion of the image data become visually equivalent to each other. In Japanese Unexamined Patent Application Publication No. 2019-101241, a signal conversion device having a converting unit and a calculating unit is described, the converting unit including a control function having hybrid log gamma characteristics, the calculating unit calculating a parameter value for adjusting a coefficient of a control function that converts an input signal of a bright area set beforehand.</p><p id="p-0007" num="0006">High Dynamic Range (HDR) has less whiteouts, for example, and is thus higher in image quality than Standard Dynamic Range (SDR). There is a demand for even less whiteouts, for example, and thus even higher image quality for HDR of the hybrid log gamma type.</p><heading id="h-0003" level="1">SUMMARY</heading><p id="p-0008" num="0007">To solve the above problem and achieve the object, an imaging control device according to the present disclosure, comprising: an imaging data obtaining unit that obtains imaging data; a frame setting unit that sets a predetermined frame on an image in the imaging data obtained by the imaging data obtaining unit; a luminance value obtaining unit that obtains luminance values of pixels included in imaging data that are in a range of the frame set by the frame setting unit; a representative value calculating unit that calculates a representative value from the luminance values obtained by the luminance value obtaining unit; and a converting unit that performs gamma conversion of the imaging data obtained by the imaging data obtaining unit, wherein the converting unit normalizes the imaging data by setting an upper limit value of luminance values on the basis of the representative value calculated by the representative value calculating unit and performs, by means of a hybrid log gamma transfer function according to the upper limit value of luminance values, the gamma conversion of the imaging data that have been normalized.</p><p id="p-0009" num="0008">An imaging control method according to the present disclosure, including: an imaging data obtaining step of obtaining imaging data; a frame setting step of setting a predetermined frame on an image in the imaging data obtained by the imaging data obtaining step; a luminance value obtaining step of obtaining luminance values of pixels included in imaging data in a range of the frame set by the frame setting step; a representative value calculating step of calculating a representative value from the luminance values obtained by the luminance value obtaining step; and a converting step of performing gamma conversion of the imaging data obtained by the imaging data obtaining step, wherein the converting step includes: normalizing the imaging data by setting an upper limit value of luminance values on the basis of the representative value calculated by the representative value calculating step; and performing, by means of a hybrid log gamma transfer function, gamma conversion of the imaging data that have been normalized.</p><p id="p-0010" num="0009">A non-transitory computer readable recording medium storing therein a program according to the present disclosure that causes a computer, which operates as an imaging control device, to execute: an imaging data obtaining step of obtaining imaging data; a frame setting step of setting a predetermined frame on an image in the imaging data obtained by the imaging data obtaining step; a luminance value obtaining step of obtaining luminance values of pixels included in imaging data in a range of the frame set by the frame setting step; a representative value calculating step of calculating a representative value from the luminance values obtained by the luminance value obtaining step; and a converting step of performing gamma conversion of the imaging data obtained by the imaging data obtaining step, wherein the converting step includes: normalizing the imaging data by setting an upper limit value of luminance values on the basis of the representative value calculated by the representative value calculating step; and performing, by means of a hybrid log gamma transfer function, gamma conversion of the imaging data that have been normalized.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram illustrating an example of a configuration of a vehicle recording device according to an embodiment.</p><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is an explanatory diagram illustrating a group of cells resulting from lengthwise and crosswise divisions of imaging data, according to the embodiment.</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is an explanatory diagram illustrating an example of a frame set in imaging data at a normal time, according to the embodiment.</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is an explanatory diagram illustrating an example of a frame set in imaging data in the daytime, according to the embodiment.</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is an explanatory diagram illustrating an example of a frame set in imaging data in the night-time, according to the embodiment.</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is an explanatory diagram illustrating an example of a frame set in imaging data that are dark overall, according to the embodiment.</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a diagram for explanation of an HLG curve in a case where the peak luminance is 12.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a diagram for explanation of an HLG curve in a case where the peak luminance is 48.</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a diagram illustrating correlations between normalized scene luminance and normalized electric signal levels.</p><p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a flowchart illustrating a flow of processing at an imaging control device according to the embodiment.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">DETAILED DESCRIPTION</heading><p id="p-0021" num="0020">An embodiment of an imaging control device, an imaging control method, and a program according to the present disclosure is hereinafter described in detail by reference to the appended drawings. The present disclosure is not limited by the following embodiment. An imaging system converts imaging data to a video signal and outputs the video signal, the conversion using an HLG curve according to a representative value related to luminance values in the imaging data. With respect to the following embodiment, a vehicle recording device <b>10</b> will be described as an example of the imaging system.</p><heading id="h-0006" level="1">Embodiment</heading><p id="p-0022" num="0021">&#x3c;Configuration of Vehicle Recording Device <b>10</b>&#x3e;</p><p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram illustrating an example of a configuration of the vehicle recording device <b>10</b> according to the embodiment. The vehicle recording device <b>10</b> is, for example, a so-called driving recorder. In addition to being a device that is installed in a vehicle, the vehicle recording device <b>10</b> may be a device that is portable and able to be used in a vehicle. The vehicle recording device <b>10</b> includes a camera (imaging unit) <b>20</b> and an imaging control device <b>40</b>.</p><p id="p-0024" num="0023">The camera <b>20</b> is arranged to capture an image in at least one of a traveling direction of the vehicle or a direction opposite to the traveling direction. With respect to this embodiment, the camera <b>20</b> is described as a camera that captures an image in the traveling direction of the vehicle. With respect to this embodiment, the camera <b>20</b> is described by use of a single camera oriented in one direction that is a forward direction of the vehicle, but the camera <b>20</b> may be a group of plural cameras. The camera <b>20</b> is arranged at, for example, a position that is in a front region of the interior of the vehicle and that enables imaging of a region in front of the vehicle. In this embodiment, the camera <b>20</b> continually captures a video while an accessory power source of the vehicle is on. The camera <b>20</b> outputs imaging data (image data) that have been captured, to an imaging data obtaining unit <b>41</b> of the imaging control device <b>40</b>.</p><p id="p-0025" num="0024">&#x3c;Configuration of Imaging Control Device <b>40</b>&#x3e;</p><p id="p-0026" num="0025">The imaging control device <b>40</b> is an arithmetic processing device (control device) formed of, for example, a central processing unit (CPU). The imaging control device <b>40</b> loads a stored program into a memory and executes commands included in the program. The imaging control device <b>40</b> includes an internal memory not illustrated in the drawings, and the internal memory is used for temporarily storing therein data in the imaging control device <b>40</b>. The imaging control device <b>40</b> includes the imaging data obtaining unit <b>41</b>, a frame setting unit <b>42</b>, a luminance value obtaining unit <b>43</b>, a representative value calculating unit <b>44</b>, and a converting unit <b>45</b>.</p><p id="p-0027" num="0026">The imaging data obtaining unit <b>41</b> obtains imaging data capturing therein surroundings of the vehicle. More particularly, the imaging data obtaining unit <b>41</b> obtains imaging data output by the camera <b>20</b>. The imaging data are data through which images are output consecutively timewise, the images each being formed of a predetermined number of pixels along horizontal and vertical directions.</p><p id="p-0028" num="0027">The frame setting unit <b>42</b> sets a predetermined frame (obtainment range) in the imaging data obtained by the imaging data obtaining unit <b>41</b> and capturing therein the surroundings of the vehicle, the predetermined frame being for selecting and extracting some of pixels on an image (screen) so that the predetermined frame is appropriate as a range of obtainment of luminance values. The position, shape, and size of the frame are set so that the frame becomes appropriate as the range of obtainment of the luminance values from the imaging data. More specifically, the frame setting unit <b>42</b> sets a frame having predetermined position, shape, and size, on an image forming the imaging data from the camera <b>20</b> arranged to capture the image in at least one of the traveling direction of the vehicle or the direction opposite to the traveling direction. In other words, a frame for selection and extraction of some of pixels of an image is provided. The position, shape, and size of the frame are set so that the frame becomes appropriate as the range of obtainment of luminance values from the imaging data. With respect to this embodiment, the frame is described to be in an oblong shape rectangular in horizontal and vertical directions, but without being limited to this oblong shape, the frame may be circular or oval, or may have a combination of any of these shapes. According to the description of this embodiment, one frame is set, but without being limited to one frame, plural frames may be set.</p><p id="p-0029" num="0028">The frame set by the frame setting unit <b>42</b> may include a range in which a road surface is captured in the imaging data, the road surface being in at least one of the traveling direction of the vehicle or the direction opposite to the traveling direction. The position, shape, and size of the frame on the image are set to include the range in which the road surface is captured. In this case, the frame setting unit <b>42</b> may set the frame in a range including a region lower than a central portion of the imaging data. The range in which the road surface is captured accounts for a predetermined proportion or more of the imaging data, and is suitable as the range where the frame for obtainment of the luminance values is set because road surfaces do not have much change in color.</p><p id="p-0030" num="0029">The frame set by the frame setting unit <b>42</b> preferably includes, in addition to the road surface, a range in which a surrounding landscape is captured, the surrounding landscape being, for example, the sky, the sea, or a river. The position, shape, and size of the frame on the image are set to include the surrounding landscape, in addition to the road surface. Including the surrounding landscape will include luminance values of a region other than the road surface. More appropriate luminance values are thereby obtained.</p><p id="p-0031" num="0030">The frame setting unit <b>42</b> may have an image recognizing unit <b>421</b>. The image recognizing unit <b>421</b> recognizes imaging data to set the position, shape, and size of the frame. More specifically, the image recognizing unit <b>421</b> recognizes, for example, a road surface in at least one of the traveling direction of the vehicle or the direction opposite to the traveling direction, in the imaging data. By performing image processing of the imaging data, the image recognizing unit <b>421</b> may recognize, as the road surface, for example, a portion in a region lower than the central portion of the imaging data, the portion being black or gray in color. The image recognizing unit <b>421</b> may recognize, as the road surface, a predetermined range on an image in the imaging data, for example, a region lower than the central portion.</p><p id="p-0032" num="0031">By performing image processing of the imaging data, for example, the image recognizing unit <b>421</b> may recognize presence or absence of the sun and the position of the sun. In a case where the image recognizing unit <b>421</b> performs image processing of the imaging data, and the imaging data are bright overall and has a portion that is in a region above the central portion of the imaging data and that is locally brighter than the surroundings; the image recognizing unit <b>421</b> may recognize that portion as the sun. Furthermore, the image recognizing unit <b>421</b> may recognize the time of day and weather at the time of imaging from the presence or absence of the sun and position of the sun that have been recognized.</p><p id="p-0033" num="0032">By performing image processing of the imaging data, the image recognizing unit <b>421</b> may recognize, for example, a portion illuminated by headlights of the vehicle of its own or another vehicle. In a case where the image recognizing unit <b>421</b> performs image processing of the imaging data, the imaging data is dark overall, and there is a portion brighter than the surroundings, the portion being only in a region lower than the central portion of the imaging data; the image recognizing unit <b>421</b> may recognize that portion as the portion illuminated by the headlights. In a case where an imaging time saved with the imaging data is night-time and there is a portion brighter than the surroundings, the portion being only in the region lower than the central portion of the imaging data; the image recognizing unit <b>421</b> may recognize that portion as the portion illuminated by the headlights.</p><p id="p-0034" num="0033">By performing image processing of the imaging data, for example, the image recognizing unit <b>421</b> may recognize the sky. By performing image processing of the imaging data, the image recognizing unit <b>421</b> may recognize, as the sky, for example, a portion above the central portion of the imaging data, the portion being blue, white, or gray, in color. The image recognizing unit <b>421</b> may recognize, as the sky, a predetermined range in the imaging data, the predetermined range being, for example, above the central portion. Furthermore, on the basis of, for example, information on an imaging time saved with the imaging data, the image recognizing unit <b>421</b> may recognize the night-time sky.</p><p id="p-0035" num="0034">By performing image processing of the imaging data, for example, the image recognizing unit <b>421</b> may recognize the sea and a river. By performing image processing of the imaging data, the image recognizing unit <b>421</b> may recognize, as the sea or a river, for example, a portion lower than the central portion of the imaging data, the portion being blue in color.</p><p id="p-0036" num="0035">By performing image processing of the imaging data, for example, the image recognizing unit <b>421</b> may recognize a surrounding landscape, such as a tunnel.</p><p id="p-0037" num="0036">On the basis of a result of recognition by the image recognizing unit <b>421</b>, the frame setting unit <b>42</b> may set a frame having predetermined position, shape and size, on an image of the imaging data.</p><p id="p-0038" num="0037">A frame set by a frame setting unit <b>21</b> will be described by use of <figref idref="DRAWINGS">FIG. <b>2</b></figref> to <figref idref="DRAWINGS">FIG. <b>6</b></figref>. <figref idref="DRAWINGS">FIG. <b>2</b></figref> is an explanatory diagram illustrating a group of cells resulting from lengthwise and crosswise divisions of imaging data, according to the embodiment. As illustrated in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the frame setting unit <b>42</b> may set a frame having any position, shape, and size by dividing the imaging data into a group of cells of 6 cells lengthwise by 9 cells crosswise, for example.</p><p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is an explanatory diagram illustrating an example of a frame set in imaging data at a normal time, according to the embodiment. The normal time refers to, for example, the daytime in fine weather. As illustrated in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the frame setting unit <b>42</b> sets a frame in a range of the imaging data, the range being lower than a central portion of a screen so that the frame includes a road surface more than anything else. The frame is set in a rectangular shape having a size of, for example, about 50% lengthwise and about 60% crosswise of the imaging data.</p><p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is an explanatory diagram illustrating an example of a frame set in imaging data in the daytime, according to the embodiment. Depending on the time of day, weather, or imaging direction, strong light, such as direct sunlight, may be captured in the daytime and may generate a locally bright portion in the imaging data. Being locally bright corresponds to, for example, pixels having values that are 80% or more of the largest value of luminance (for example, 205 that is 80% of the largest value, 254, for eight bits). On the basis of a result of recognition by the image recognizing unit <b>421</b>, the frame setting unit <b>42</b> sets a position of the frame by avoiding any locally bright portion in the imaging data. In a case where there are any bright pixels in the frame, the frame setting unit <b>42</b> moves the position of the frame in a direction opposite to the positions of the bright pixels in the frame. In a case where the imaging data have been divided lengthwise and crosswise into four and there are bright pixels in the upper right, for example, the frame setting unit <b>42</b> moves the position of the frame to the bottom left. The frame setting unit <b>42</b> may change and set the size of the frame by avoiding the locally bright portion in the imaging data. In a case where the frame setting unit <b>42</b> is unable to move the position of the frame by avoiding the bright pixels, the frame setting unit <b>42</b> may reduce the size of the frame.</p><p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is an explanatory diagram illustrating an example of a frame set in imaging data in the night-time, according to the embodiment. In the night-time, the direction in which a vehicle travels is bright due to headlights of the vehicle and a peripheral dark portion where light from the headlights does not reach becomes dark. In a case where the frame setting unit <b>42</b> has set a frame including a range illuminated by the headlights, the peripheral dark portion where the light from the headlights does not reach becomes dark. On the basis of a result of recognition by the image recognizing unit <b>421</b>, the frame setting unit <b>42</b> may set a position of the frame such that the frame includes the peripheral dark portion or a night-time sky portion. On the basis of the result of recognition by the image recognizing unit <b>421</b>, the frame setting unit <b>42</b> may change and set the size the frame such that the frame includes the peripheral dark portion or the night-time sky portion. The imaging data are able to be determined to be of those in the night time by: the imaging time; or the image recognizing unit <b>421</b> recognizing whether the headlights are on or off.</p><p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is an explanatory diagram illustrating an example of a frame set in imaging data that are dark overall, according to the embodiment. In a case where it is dark in whole, like in a tunnel, for example, the size of the frame may be enlarged for obtainment of luminance values from a wider range. The imaging data are able to be determined to be dark overall by: the luminance mean of pixels in the frame; or the number of pixels having luminance values equal to or larger than a predetermined value or equal to or smaller than a predetermined value, for example.</p><p id="p-0043" num="0042">The luminance value obtaining unit <b>43</b> obtains luminance values of imaging data in the range of the frame. More specifically, the luminance value obtaining unit <b>43</b> obtains a luminance value of each pixel included in the range of the frame.</p><p id="p-0044" num="0043">The representative value calculating unit <b>44</b> calculates a representative value from the luminance values obtained by the luminance value obtaining unit <b>43</b>. For example, the representative value is the median of the luminance values obtained from the imaging data in the range of the frame. The representative value is not necessarily the median of the luminance values, and may be the mode of the luminance values or any of various averages of the luminance values.</p><p id="p-0045" num="0044">The converting unit <b>45</b> performs gamma conversion of the imaging data obtained by the imaging data obtaining unit <b>41</b>. More specifically, on the basis of the representative value calculated by the representative value calculating unit <b>44</b>, the converting unit <b>45</b> normalizes the imaging data by setting the peak luminance that is the upper limit value of luminance values and performs gamma conversion of the normalized imaging data by means of a hybrid log gamma transfer function according to the peak luminance. The smaller the representative value is, for example, the larger this peak luminance may be set.</p><p id="p-0046" num="0045">In this embodiment, the peak luminance is set in a range of 12 or larger and 48 or smaller. The larger the peak luminance is, the wider the dynamic range of HDR becomes.</p><p id="p-0047" num="0046">HLG curves representing hybrid log gamma transfer functions according to the peak luminance will be described by use of <figref idref="DRAWINGS">FIG. <b>7</b></figref> to <figref idref="DRAWINGS">FIG. <b>9</b></figref>. <figref idref="DRAWINGS">FIG. <b>7</b></figref> is a diagram for explanation of an HLG curve in a case where the peak luminance is 12. In <figref idref="DRAWINGS">FIG. <b>7</b></figref>, the horizontal axis represents scene luminance E that has been normalized so that the reference white color in SDR has a luminance level of 1, and the vertical axis represents the signal level E&#x2032; of an electric signal corresponding to the horizontal axis. The hybrid log gamma transfer function has been adjusted so that when white in SDR has reference luminance of 1, the signal for HDR is at 0.5.</p><p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a diagram for explanation of an HLG curve in a case where the peak luminance is 48. Similarly to <figref idref="DRAWINGS">FIG. <b>7</b></figref>, in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, the horizontal axis represents scene luminance E that has been normalized so that the reference white color in SDR has a luminance level of 1, and the vertical axis represents the signal level E&#x2032; of an electric signal corresponding to the horizontal axis.</p><p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a diagram illustrating correlations between normalized scene luminance E and normalized electric signal levels E&#x2032;. In <figref idref="DRAWINGS">FIG. <b>9</b></figref>, the horizontal axis represents E/maxE and the vertical axis represents E&#x2032;/maxE&#x2032;. <figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates HLG curves that have been normalized in ranges of 0 or larger and 1 or smaller along the horizontal axes and vertical axes of <figref idref="DRAWINGS">FIG. <b>7</b></figref> and <figref idref="DRAWINGS">FIG. <b>8</b></figref>. For peak luminance values of 12 or larger and 48 or smaller, HLG curves normalized similarly are obtained, although these HLG curves are not illustrated in <figref idref="DRAWINGS">FIG. <b>9</b></figref>. As described above, the HLG curves used in gamma conversion by the converting unit <b>45</b> are drawn in curves that differ according to the peak luminance.</p><p id="p-0050" num="0049">By using an HLG curve according to the representative value calculated by the representative value calculating unit <b>44</b>, the converting unit <b>45</b> converts the imaging data into an image signal and outputs the image signal, the HLG curve being one of HLG curves that have been normalized. More specifically, the converting unit <b>45</b> converts an image signal that has been normalized, into an image signal, by means of a hybrid log gamma transfer function expressed by Equation 1. Herein, E is scene luminance and has been normalized with a reference white level. Herein, E&#x2032; is signal level. Herein, &#x3b3; is signal level corresponding to the reference white level and &#x3b3;=0.5. Herein, a, b, and c are constants and are defined for each HLG curve. For example, a=0.17883277, b=0.28466892, and c=0.55991073.</p><p id="p-0051" num="0000"><maths id="MATH-US-00001" num="00001"><math overflow="scroll"> <mtable>  <mtr>   <mtd>    <mrow>     <msup>      <mi>E</mi>      <mo>&#x2032;</mo>     </msup>     <mo>=</mo>     <mrow>      <mo>{</mo>      <mtable>       <mtr>        <mtd>         <mrow>          <mi>r</mi>          <mo>&#x2062;</mo>          <msqrt>           <mi>E</mi>          </msqrt>         </mrow>        </mtd>        <mtd>         <mrow>          <mn>0</mn>          <mo>&#x2264;</mo>          <mi>E</mi>          <mo>&#x2264;</mo>          <mn>1</mn>         </mrow>        </mtd>       </mtr>       <mtr>        <mtd>         <mrow>          <mrow>           <mi>a</mi>           <mo>&#x2062;</mo>           <mrow>            <mi>ln</mi>            <mo>&#x2061;</mo>            <mo>(</mo>            <mrow>             <mi>E</mi>             <mo>-</mo>             <mi>b</mi>            </mrow>            <mo>)</mo>           </mrow>          </mrow>          <mo>+</mo>          <mi>c</mi>         </mrow>        </mtd>        <mtd>         <mrow>          <mn>1</mn>          <mo>&#x3c;</mo>          <mi>E</mi>         </mrow>        </mtd>       </mtr>      </mtable>     </mrow>    </mrow>   </mtd>   <mtd>    <mrow>     <mo>(</mo>     <mn>1</mn>     <mo>)</mo>    </mrow>   </mtd>  </mtr> </mtable></math></maths></p><p id="p-0052" num="0050">&#x3c;Information Processing at Imaging Control Device <b>40</b>&#x3e;</p><p id="p-0053" num="0051">A flow of processing at the imaging control device <b>40</b> will be described next by use of <figref idref="DRAWINGS">FIG. <b>10</b></figref>. <figref idref="DRAWINGS">FIG. <b>10</b></figref> is a flowchart illustrating the flow of the processing at the imaging control device <b>40</b> according to the embodiment. In this embodiment, while the vehicle recording device <b>10</b> is in operation, the camera <b>20</b> is continually imaging and continually executing the processing illustrated in <figref idref="DRAWINGS">FIG. <b>10</b></figref>. The processing illustrated in <figref idref="DRAWINGS">FIG. <b>10</b></figref> may be executed per frame or may be executed every few frames or at predetermined time intervals, for example.</p><p id="p-0054" num="0052">Firstly, the imaging control device <b>40</b> obtains, by means of the imaging data obtaining unit <b>41</b>, imaging data output by the camera <b>20</b> (Step S<b>1</b>). The processing by the imaging control device <b>40</b> proceeds to Step S<b>2</b> after Step S<b>1</b>.</p><p id="p-0055" num="0053">After the processing at Step S<b>1</b>, the imaging control device <b>40</b> sets, by means of the frame setting unit <b>42</b>, a predetermined frame in the imaging data (Step S<b>2</b>). The imaging control device <b>40</b> sets, by means of the frame setting unit <b>42</b>, the frame at a predetermined position and having predetermined shape and size, in the imaging data from the camera <b>20</b>. The position, shape, and size of the frame are set so that the frame becomes appropriate as a range of obtainment of luminance values from the imaging data. The processing by the imaging control device <b>40</b> proceeds to Step S<b>3</b> after Step S<b>2</b>.</p><p id="p-0056" num="0054">After the processing at Step S<b>2</b>, the imaging control device <b>40</b> obtains, by means of the luminance value obtaining unit <b>43</b>, luminance values from imaging data in the range of the frame (Step S<b>3</b>). The processing by the imaging control device <b>40</b> proceeds to Step S<b>4</b> after Step S<b>3</b>.</p><p id="p-0057" num="0055">After the processing at Step S<b>3</b>, the imaging control device <b>40</b> calculates, by means of the representative value calculating unit <b>44</b>, a representative value from the luminance values obtained by the luminance value obtaining unit <b>43</b> (Step S<b>4</b>). The imaging control device <b>40</b> calculates, by means of the representative value calculating unit <b>44</b>, as the representative value, the median of the luminance values obtained from the imaging data in the range of the frame, for example. The processing by the imaging control device <b>40</b> proceeds to Step S<b>5</b> after Step S<b>4</b>.</p><p id="p-0058" num="0056">After the processing at Step S<b>4</b>, the imaging control device <b>40</b> normalizes, by means of the converting unit <b>45</b>, the imaging data by setting an upper limit value of luminance, on the basis of the representative value (Step S<b>5</b>). The processing by the imaging control device <b>40</b> proceeds to Step S<b>6</b> after Step S<b>5</b>.</p><p id="p-0059" num="0057">After the processing at Step S<b>5</b>, the imaging control device <b>40</b> performs, by means of the converting unit <b>45</b>, gamma conversion of the normalized imaging data by using a hybrid log gamma transfer function corresponding to the peak luminance set at Step S<b>5</b>, and outputs the converted imaging data (Step S<b>6</b>). The processing by the imaging control device <b>40</b> is ended after Step S<b>6</b>.</p><p id="p-0060" num="0058">&#x3c;Effects&#x3e;</p><p id="p-0061" num="0059">As described above, in this embodiment, on the basis of a representative value related to luminance values from imaging data, the imaging data are subjected to gamma conversion by use of a hybrid log gamma transfer function according to the peak luminance of the imaging data, and an image signal is output. This embodiment enables conversion of the imaging data by use of the hybrid log gamma transfer function according to the imaging data. The embodiment enables setting of a dynamic range correspondingly to the imaging data. The embodiment enables more minimization of whiteouts in HDR images of the HLG type than in conventional HDR images. The embodiment enables improvement in image quality of output data.</p><p id="p-0062" num="0060">This embodiment enables a frame to be set on the basis of a result of recognition by the image recognizing unit <b>421</b>, the frame being suitable for each set of imaging data. The embodiment enables more appropriate calculation of a representative value and thus enables improvement in image quality of output data.</p><p id="p-0063" num="0061">In this embodiment, a frame at a predetermined position and having predetermined shape and size is set in any one of sets of imaging data from the camera <b>20</b> arranged to capture an image in at least one of a traveling direction of a vehicle or a direction opposite to the traveling direction. This embodiment enables the preferred frame to be set in the imaging data by recognition of the imaging data from the camera <b>20</b> arranged to capture the image in at least one of the traveling direction of the vehicle or the direction opposite to the traveling direction.</p><p id="p-0064" num="0062">In this embodiment, a frame set by the frame setting unit <b>42</b> includes a road surface in imaging data, the road surface being in at least one of a traveling direction of a vehicle or a direction opposite to the traveling direction. This embodiment enables the frame including the road surface to be set in the imaging data by recognition of the road surface from the imaging data. The embodiment enables output of output data high in image quality and suitable for driving recorders.</p><p id="p-0065" num="0063">In this embodiment, a frame is set by recognition of: presence or absence of the sun and a position of the sun; a portion illuminated by headlights; the sky; the sea and a river; and/or any surrounding landscape. This embodiment enables an appropriate frame to be set according to the imaging data. The embodiment enables output of output data high in image quality according to the imaging data.</p><p id="p-0066" num="0064">[Others]</p><p id="p-0067" num="0065">Each component of the vehicle recording device <b>10</b> are functionally and/or conceptually illustrated in the drawings, and is not necessarily configured physically as illustrated in the drawings. That is, the specific form of each device is not limited to the one illustrated in the drawings, and all or part of each device may be functionally or physically separated or integrated in any units according to the processing load on the device and the use situation of the device.</p><p id="p-0068" num="0066">The configuration of the vehicle recording device <b>10</b> is implemented as, for example, software, by means of a method that causes the vehicle recording device <b>10</b> to operate in the vehicle recording device <b>10</b> or a program loaded into a memory and executed by a computer that causes the vehicle recording device <b>10</b> to operate. With respect to the embodiment, functional blocks implemented by cooperation of these pieces of hardware or pieces of software have been described above. That is, these functional blocks may be implemented in any of various forms, by hardware only, software only, or a combination of hardware and software.</p><p id="p-0069" num="0067">The above described components include those that are easily anticipated by persons skilled in the art, and those that are substantially the same. Furthermore, any of the above described configurations may be combined as appropriate. In addition, without departing from the gist of the present disclosure, various omissions, substitutions, or modifications of the configurations are possible.</p><p id="p-0070" num="0068">An example where the present disclosure is applied to the imaging system that is the vehicle recording device <b>10</b>, such as a driving recorder, has been described above, but the present disclosure is not limited to this example. The imaging system is also applicable to, for example, a video camera, a smartphone, or broadcasting equipment.</p><p id="p-0071" num="0069">The imaging control device, the imaging control method, and the program according to the present disclosure are able to be used for, for example, driving recorders, video cameras, smartphones, or broadcasting equipment.</p><p id="p-0072" num="0070">According to the present disclosure, an effect of achieving higher image quality is exerted.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-math idrefs="MATH-US-00001" nb-file="US20230007187A1-20230105-M00001.NB"><img id="EMI-M00001" he="6.35mm" wi="76.20mm" file="US20230007187A1-20230105-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. An imaging control device, comprising:<claim-text>an imaging data obtaining unit that obtains imaging data;</claim-text><claim-text>a frame setting unit that sets a predetermined frame on an image in the imaging data obtained by the imaging data obtaining unit;</claim-text><claim-text>a luminance value obtaining unit that obtains luminance values of pixels included in imaging data that are in a range of the frame set by the frame setting unit;</claim-text><claim-text>a representative value calculating unit that calculates a representative value from the luminance values obtained by the luminance value obtaining unit; and</claim-text><claim-text>a converting unit that performs gamma conversion of the imaging data obtained by the imaging data obtaining unit, wherein</claim-text><claim-text>the converting unit normalizes the imaging data by setting an upper limit value of luminance values on the basis of the representative value calculated by the representative value calculating unit and performs, by means of a hybrid log gamma transfer function according to the upper limit value of luminance values, the gamma conversion of the imaging data that have been normalized.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The imaging control device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the frame is set to include a range in the imaging data, the range being where a road surface in at least one of a traveling direction of a vehicle or a direction opposite to the traveling direction is captured.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The imaging control device according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein<claim-text>the frame setting unit further includes an image recognizing unit, and</claim-text><claim-text>the frame is set to not include a range illuminated by headlights of the vehicle or another vehicle, on the basis of a result of recognition by the image recognizing unit.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. An imaging control method, including:<claim-text>an imaging data obtaining step of obtaining imaging data;</claim-text><claim-text>a frame setting step of setting a predetermined frame on an image in the imaging data obtained by the imaging data obtaining step;</claim-text><claim-text>a luminance value obtaining step of obtaining luminance values of pixels included in imaging data in a range of the frame set by the frame setting step;</claim-text><claim-text>a representative value calculating step of calculating a representative value from the luminance values obtained by the luminance value obtaining step; and</claim-text><claim-text>a converting step of performing gamma conversion of the imaging data obtained by the imaging data obtaining step, wherein</claim-text><claim-text>the converting step includes: normalizing the imaging data by setting an upper limit value of luminance values on the basis of the representative value calculated by the representative value calculating step; and performing, by means of a hybrid log gamma transfer function, gamma conversion of the imaging data that have been normalized.</claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. A non-transitory computer readable recording medium storing therein a program that causes a computer, which operates as an imaging control device, to execute:<claim-text>an imaging data obtaining step of obtaining imaging data;</claim-text><claim-text>a frame setting step of setting a predetermined frame on an image in the imaging data obtained by the imaging data obtaining step;</claim-text><claim-text>a luminance value obtaining step of obtaining luminance values of pixels included in imaging data in a range of the frame set by the frame setting step;</claim-text><claim-text>a representative value calculating step of calculating a representative value from the luminance values obtained by the luminance value obtaining step; and</claim-text><claim-text>a converting step of performing gamma conversion of the imaging data obtained by the imaging data obtaining step, wherein</claim-text><claim-text>the converting step includes: normalizing the imaging data by setting an upper limit value of luminance values on the basis of the representative value calculated by the representative value calculating step; and performing, by means of a hybrid log gamma transfer function, gamma conversion of the imaging data that have been normalized.</claim-text></claim-text></claim></claims></us-patent-application>