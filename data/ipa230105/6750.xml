<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006751A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006751</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17781520</doc-number><date>20201216</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>DE</country><doc-number>10 2019 220 096.6</doc-number><date>20191218</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>J</subclass><main-group>3</main-group><subgroup>06</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>L</subclass><main-group>9</main-group><subgroup>40</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>J</subclass><main-group>3</main-group><subgroup>0682</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>63</main-group><subgroup>0428</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>67</main-group><subgroup>12</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">METHOD FOR SECURING THE TIME SYNCHRONIZATION OF AN ETHERNET ON-BOARD NETWORK</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Continental Automotive GmbH</orgname><address><city>Hannover</city><country>DE</country></address></addressbook><residence><country>DE</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Zinner</last-name><first-name>Helge</first-name><address><city>Hannover</city><country>DE</country></address></addressbook></inventor></inventors></us-parties><pct-or-regional-filing-data><document-id><country>WO</country><doc-number>PCT/EP2020/086467</doc-number><date>20201216</date></document-id><us-371c12-date><date>20220601</date></us-371c12-date></pct-or-regional-filing-data></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A method for securing the time synchronization of an Ethernet on-board network of a motor vehicle, by: determining a delay time of a first signal on a first connecting path between a first control unit of the network and a second control unit of the network; determining a maximum speed of the first connecting path on the basis of the delay time; and determining a type of a transmission medium of the first connecting path on the basis of the maximum speed. The determination of the delay time of a first signal, the determination of the maximum speed of the first connecting path, and the determination of the type of a transmission medium of the first connecting path result in an entropy source being formed that is used to ascertain at least one dynamic key for the connecting path to encrypt a time synchronization message for the connecting path.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="83.14mm" wi="126.32mm" file="US20230006751A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="131.49mm" wi="128.35mm" file="US20230006751A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="180.93mm" wi="133.86mm" file="US20230006751A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="139.53mm" wi="130.73mm" file="US20230006751A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="150.88mm" wi="116.33mm" file="US20230006751A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="201.08mm" wi="94.32mm" orientation="landscape" file="US20230006751A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="157.56mm" wi="111.17mm" file="US20230006751A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="155.62mm" wi="130.39mm" file="US20230006751A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="150.88mm" wi="138.43mm" file="US20230006751A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="140.46mm" wi="141.82mm" file="US20230006751A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="154.60mm" wi="122.00mm" file="US20230006751A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00011" num="00011"><img id="EMI-D00011" he="144.36mm" wi="139.19mm" file="US20230006751A1-20230105-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00012" num="00012"><img id="EMI-D00012" he="128.02mm" wi="100.84mm" file="US20230006751A1-20230105-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00013" num="00013"><img id="EMI-D00013" he="177.88mm" wi="121.41mm" file="US20230006751A1-20230105-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00014" num="00014"><img id="EMI-D00014" he="159.26mm" wi="138.85mm" file="US20230006751A1-20230105-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00015" num="00015"><img id="EMI-D00015" he="146.56mm" wi="123.02mm" file="US20230006751A1-20230105-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00016" num="00016"><img id="EMI-D00016" he="180.93mm" wi="118.03mm" file="US20230006751A1-20230105-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00017" num="00017"><img id="EMI-D00017" he="163.07mm" wi="106.34mm" file="US20230006751A1-20230105-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATIONS</heading><p id="p-0002" num="0001">This application is the U.S. National Phase Application of PCT International Application No. PCT/EP2020/086467, filed Dec. 16, 2020, which claims priority to German Patent Application No. 10 2019 220 096.6, filed Dec. 18, 2019, the contents of such applications being incorporated by reference herein.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">FIELD OF THE INVENTION</heading><p id="p-0003" num="0002">The present invention relates to communication networks containing network devices synchronized to one another.</p><heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading><p id="p-0004" num="0003">Automobile manufacturers (OEMs) and tier-1 suppliers in the automotive industry are preparing the next generation of architecture for vehicle controllers or electronic control devices/control units, ECUs. One development is what is known as the &#x201c;zone-oriented architecture&#x201d;, in which control devices are grouped into zones, such as e.g. a front right door zone. A difference from previous architectures is that the controllers are located at specific physical or spatial positions in order to optimally capture the data from the sensors positioned there. As such, for example a control unit that collects data from a sensor in the front right door may be positioned in the front right door zone.</p><p id="p-0005" num="0004">The localization or distribution of software execution for features and applications to other controllers and processors is also under consideration. Such localization or distribution may be part of an optimization and may also be used in the event of an error or failure, e.g. of a control device. This localization or distribution is known as dynamic migration or simply migration. Mass production for the dynamic migration of software to other control devices/processors within the vehicle is expected soon.</p><p id="p-0006" num="0005">Ethernet may be the network of choice for connecting control devices in a network. Ethernet technology is becoming increasingly popular for the electrical systems of vehicles and supplier products. The use of Ethernet technology requires an effective synchronization concept.</p><p id="p-0007" num="0006">Existing Ethernet systems may use an implementation of the time synchronization standard IEEE 802.1AS. Two variants that have attracted particular attention are the selection of the 802.1AS-Rev and the time domain of the 802.1AS-Rev, the latter being a mandatory requirement for the former. Other protocols outside of the physical transmission standards are Ethernet AVB and its successor Ethernet TSN. Ethernet AVB has already been introduced for automobiles in mass production. An essential substandard for Ethernet TSN and AVB is the time synchronization standard IEEE 802.1AS, which depends on the main standard IEEE 802.1 for higher layer LAN protocols (bridging). Both standards use the IEEE 1588 Precision Time Protocol (PTP) to establish a common time base in an Ethernet network.</p><p id="p-0008" num="0007">On layer 3 of the OSI layer model, Ethernet connections support a large number of switching protocols for the transmission of data packets between transmitters and receivers. In the higher protocol layers, the segmentation of the data stream into packets, the process communication between communicating systems, the translation of data into a system-independent form and finally the provision of functions for applications take place.</p><p id="p-0009" num="0008">Almost all Ethernet communication networks used in vehicles use a protocol relating to time synchronization that provides a global network time base that is synchronous in all network devices. The prevalence of time-synchronized network devices is expected to continue to increase in the future.</p><p id="p-0010" num="0009">The IEEE 802.1AS standard provides such a protocol relating to time synchronization. Based on a so-called &#x201c;best clock&#x201d; in the network, also known as a grandmaster or grandmaster clock, a master-slave clock hierarchy is set up. The grandmaster provides the time base for the network, to which all other network devices in the network are synchronized. The grandmaster is determined by means of the so-called Best Master Clock Algorithm (BMCA) and is announced within the network. To do this, IEEE 802.1AS compatible network devices send Announce messages containing information about their internal clock to other network devices that are directly connected. The information about the internal clocks provides an indication of the accuracy of the respective clock, the reference or time reference thereof and other properties that can be used to determine the best clock in the network. A recipient of such an Announce message compares the information received with the features of its own internal clock and any messages already received from another port with information relating to clocks of other network devices, and accepts a clock in another network device if it has better clock parameters. After a short time, the best clock in the network has been ascertained, which then becomes the grandmaster in the network. Based on the grandmaster, messages relating to time synchronization are broadcast over the network. A network device that receives a message relating to time synchronization does not simply forward it, but rather corrects the time information for the previously ascertained delay time on the connection by way of which it receives messages relating to time synchronization from a directly connected network device, and also for the internal processing time, before it retransmits the message relating to time synchronization with the corrected time information.</p><p id="p-0011" num="0010">In the case of the clock hierarchy according to IEEE 802.1AS and the generalized precision time protocol (gPTP) defined therein, only a single network device always provides the best clock in the network. This network device therefore controls and regulates the whole time of the vehicle. All other clocks in network devices in the network are governed exclusively by this one clock. Some vehicle manufacturers even synchronize networks of other standards, for example CAN, by way of this Ethernet time master, which means that almost all network devices in the vehicle are informed of the system time by the network device that provides the grandmaster. As a result, a single network device is defined as a single point of failure in the network or the vehicle, the failure or manipulation of which device can have serious effects on the operational safety of the vehicle. As such, for example in vehicles with a high degree of driver support by appropriate systems or with systems for (semi)autonomous driving, a large volume of sensor data captured within a narrow time window must be processed together in order to derive appropriate control signals for actuators in the vehicle. The most accurate possible time registration for sensor data may also be of great importance for documentation purposes, for example when storing in log files that can be analyzed in order to reconstruct malfunctions or operating errors. The latter is of great interest in particular to insurance companies and law enforcement agencies. Safe, synchronized provision of the time information is thus essential.</p><p id="p-0012" num="0011">To detect attacks of this type, DE 10 2012 216 689 B4, incorporated herein by reference, proposes monitoring delay times of messages relating to time synchronization within the communication network. An additional network device connected between two network devices that intercepts and forwards messages will inevitably alter the delay time of the messages, even if the forwarded message is not altered.</p><p id="p-0013" num="0012">Taking the example of using AUTOSAR considerations too, almost all data interchanged between the control units are transmitted by means of IP, and therefore the IP layer, i.e. all features and services of the IP layer are used. Here the focus is on IP-Sec. IPsec, short for Internet Protocol Security, is a suite of protocols intended to allow secure communication over IP networks. The goal is to provide encryption-based security at network level. IPsec affords this possibility by virtue of the connectionless integrity and also the access control and authentication of the data. In addition, IPsec ensures the confidentiality and authenticity of the packet sequence through encryption.</p><p id="p-0014" num="0013">The time synchronization, as can be seen from the example of gPTP or 802.1AS, is not transmitted via the IP layer, but rather is not yet protected in the vehicle. Comparable protocols such as IPSec do not yet exist on the lower layers in automobiles, or would lead to much higher costs, e.g. MACSEC. In general, the messages are transported by means of Ethernet. Ethernet is the actual transport protocol here, i.e. the messages are not transported via the IP layer. The protection mechanisms that are implemented and available there cannot be used.</p><p id="p-0015" num="0014">Thus, today's methods and protocols relating to time synchronization do not provide any easy options for protection. Each network device can easily infer which network device in the network is the grandmaster from the messages relating to time synchronization that are sent as simple multicast Ethernet frames to multiple or all network devices in the network. Protection mechanisms on higher protocol layers such as IPSEC or TLS and the like are not yet able to take effect on this level. On the other hand, if the time synchronization messages are sent via IP, the accuracy of the clock synchronization, or of the actual data fusion, is lost. The manipulation can have serious effects if, for example, data relating to sensor fusion are altered and data from e.g. a camera and a radar that do not belong together, however, are fused.</p><p id="p-0016" num="0015">A few approaches for detecting changes in the configuration or structure of a communication network using the time synchronization of the network are known from the prior art. An unauthorized change to the configuration of the network may, by way of example, comprise the interposition of a network device to prepare for an attack, which intercepts messages for analysis and, if necessary, retransmits altered messages. This can be used to prevent or at least disrupt safe and proper operation.</p><heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading><p id="p-0017" num="0016">An aspect of the invention is a method, a control device that implements the method, and an on-board network that ensure improved protection of the time synchronization.</p><p id="p-0018" num="0017">In one embodiment of the method for securing the time synchronization of an Ethernet on-board network <b>2</b> of a motor vehicle <b>1</b>, the following steps are carried out:<ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0000">    <ul id="ul0002" list-style="none">        <li id="ul0002-0001" num="0018">determining a delay time <b>9</b> of a first signal <b>10</b> on a first connecting path <b>6</b> between a first control unit <b>3</b> of the Ethernet on-board network <b>2</b> and a second control unit <b>4</b> of the Ethernet on-board network <b>2</b>;</li>        <li id="ul0002-0002" num="0019">determining a maximum speed <b>11</b> of the first connecting path <b>6</b> on the basis of the delay time <b>9</b>; and</li>        <li id="ul0002-0003" num="0020">determining a type of a transmission medium <b>12</b> of the first connecting path <b>6</b> on the basis of the maximum speed <b>11</b>,</li>    </ul>    </li></ul></p><p id="p-0019" num="0021">The determination of the delay time <b>9</b> of a first signal <b>10</b> and the determination of the maximum speed <b>11</b> of the first connecting path and the determination of the type of a transmission medium <b>12</b> of the first connecting path <b>6</b> result in an entropy source being formed that is used to ascertain at least one dynamic key <b>28</b> for the connecting path <b>6</b> that is used to encrypt a time synchronization message for the connecting path <b>6</b>.</p><p id="p-0020" num="0022">In a further embodiment of the method, the dynamic key <b>28</b> for the connecting path <b>6</b> is formed in such a way that it is unique per unit time and for each link and in the Ethernet on-board network.</p><p id="p-0021" num="0023">A further embodiment of the invention is distinguished in that the dynamic key <b>28</b> for the connecting path <b>6</b> is generated by combining a point-to-point line delay and the message frequency.</p><p id="p-0022" num="0024">A further embodiment of the invention is distinguished in that the type of the transmission medium <b>12</b> is communicated to a program <b>13</b> in the Ethernet on-board network <b>2</b> and a connecting path selection <b>14</b> of the program <b>13</b> is adapted according to the type of the transmission medium <b>12</b> and the program <b>13</b> records all information of the entropy source and the dynamic key <b>28</b> for the connecting path <b>6</b> is generated.</p><p id="p-0023" num="0025">In a further embodiment of the method, the type of the transmission medium <b>12</b> is determined as optical, copper or wireless.</p><p id="p-0024" num="0026">A further embodiment of the invention is distinguished in that a transmission security value <b>15</b>, which describes a probability of loss of data transmitted by way of the first connecting path <b>6</b>, is assigned to the first connecting path <b>6</b> on the basis of the type of the transmission medium <b>12</b>.</p><p id="p-0025" num="0027">A further embodiment of the method is distinguished in that delay times of a plurality of signals on the first connecting path <b>6</b> are determined and the fastest delay time of the plurality of signals is selected, the maximum speed <b>11</b> of the first connecting path <b>6</b> being determined on the basis of the fastest delay time.</p><p id="p-0026" num="0028">A further embodiment of the method is distinguished in that a delay time <b>16</b> of a second signal <b>17</b> on a second connecting path <b>7</b>, which is different from the first connecting path <b>6</b>, between the first control unit <b>3</b> and the second control unit <b>4</b> is determined, and a maximum speed <b>11</b> of the second connecting path <b>7</b> is determined, a type of the transmission medium <b>19</b> of the second connecting path <b>7</b> being determined on the basis of the maximum speed <b>11</b> of the second connecting path <b>7</b>.</p><p id="p-0027" num="0029">A further embodiment of the method is distinguished in that the method is performed after the first control unit <b>3</b> changes from a normal operating mode to an energy-saving mode and/or from the energy-saving mode to the normal operating mode.</p><p id="p-0028" num="0030">In a further embodiment, the delay time <b>9</b> of the first signal <b>10</b> is determined using the first control unit <b>3</b> and a delay time <b>21</b> of a third signal <b>22</b> on a third connecting path <b>8</b>, which is connected to the first control unit <b>3</b> only indirectly, between the second control unit <b>4</b> and a third control unit <b>5</b> of the Ethernet on-board network <b>2</b> is determined using the third control unit <b>5</b>, the determination of the delay time <b>21</b> of the third signal <b>22</b> being triggered by a service message <b>20</b> sent from the first control unit <b>3</b> to the third control unit <b>5</b>.</p><p id="p-0029" num="0031">The embodiment of the control unit for an Ethernet on-board network <b>2</b>, which, as first control unit <b>3</b>, is designed:<ul id="ul0003" list-style="none">    <li id="ul0003-0001" num="0000">    <ul id="ul0004" list-style="none">        <li id="ul0004-0001" num="0032">to send a signal <b>10</b> to a second control unit <b>4</b> of the Ethernet on-board network <b>2</b> and to receive the signal <b>10</b> from the second control unit <b>4</b>;</li>        <li id="ul0004-0002" num="0033">to determine a delay time <b>9</b> of the signal <b>10</b> on a connecting path <b>6</b> to the second control unit <b>4</b>;</li>        <li id="ul0004-0003" num="0034">to determine a maximum speed <b>11</b> of the connecting path <b>6</b> on the basis of the delay time <b>9</b>; and</li>        <li id="ul0004-0004" num="0035">to determine a type of a transmission medium <b>12</b> of the connecting path <b>6</b> on the basis of the maximum speed <b>11</b>,</li>    </ul>    </li></ul></p><p id="p-0030" num="0036">wherein the control unit <b>3</b> comprises at least<ul id="ul0005" list-style="none">    <li id="ul0005-0001" num="0000">    <ul id="ul0006" list-style="none">        <li id="ul0006-0001" num="0037">a microprocessor <b>402</b>,</li>        <li id="ul0006-0002" num="0038">a volatile memory <b>404</b> and nonvolatile memory <b>406</b>,</li>        <li id="ul0006-0003" num="0039">at least two communication interfaces <b>408</b>,</li>        <li id="ul0006-0004" num="0040">and a synchronizable timer <b>410</b>,</li>    </ul>    </li></ul></p><p id="p-0031" num="0041">and the nonvolatile memory <b>406</b> contains program instructions that, when executed by the microprocessor <b>402</b>, implement at least one embodiment of the method according to an aspect of the invention as claimed in claims <b>1</b> to <b>10</b> and the entropy source is formed in the volatile and/or nonvolatile memory <b>404</b>, <b>406</b>, said entropy source being used to form the dynamic keys <b>28</b> for the connecting paths <b>6</b>.</p><p id="p-0032" num="0042">An embodiment of the Ethernet on-board network <b>2</b> for a motor vehicle <b>1</b>, having a first control unit <b>3</b> and a second control unit <b>4</b>, wherein the control units <b>3</b>, <b>4</b> are connected to one another by way of at least one connecting path <b>6</b>, <b>7</b>, and the first control unit <b>3</b> is designed as claimed in claim <b>11</b>.</p><p id="p-0033" num="0043">Another embodiment of the Ethernet on-board network is distinguished in that the Ethernet on-board network <b>2</b> has a third control unit <b>5</b>, which is connected to the first control unit <b>3</b> only indirectly and is connected to the second control unit <b>4</b> directly by way of a third connecting path <b>8</b>, wherein the third control unit <b>5</b> is designed to determine a delay time <b>21</b> of a third signal <b>22</b> on the third connecting path <b>8</b>, wherein the first control unit <b>3</b> is designed to trigger the determination of the delay time <b>21</b> of the third signal <b>22</b> by way of a service message <b>20</b> to the third control unit <b>5</b>.</p><p id="p-0034" num="0044">One embodiment is represented by a computer program product. The computer program product comprises instructions that, when the program is executed by a computer, cause said computer to perform the method <b>200</b>.</p><p id="p-0035" num="0045">One embodiment is provided on a computer-readable medium on which the computer program product.</p><p id="p-0036" num="0046">One embodiment is provided in a vehicle having multiple control units <b>3</b>, <b>4</b>, <b>5</b>, comprising an Ethernet on-board network.</p><p id="p-0037" num="0047">An aspect of the invention increases security in the area of Ethernet and thus closes security gaps. Furthermore, a standardizable approach is specified that facilitates the use of Ethernet in vehicles for automotive.</p><p id="p-0038" num="0048">This method involves the control unit ascertaining a delay time for the data transfer via the on-board network to a second control unit. The important factor is that the delay time is ascertained in some form on the basis of an actual physical condition of the transmission path from the first control unit to the second control unit, i.e. there is a physical condition or property of the transmission path that, when it changes, results in a change in the ascertained delay time. An individual and constantly changing key is generated on the basis of the line delay and the message frequency. This key is unique per unit time and also different per link, and there is no key twice in the network.</p><p id="p-0039" num="0049">In other words, the time synchronization messages are encrypted using a dynamic key that can be derived from individual parameters relating to the connection partner that form an entropy source.</p><p id="p-0040" num="0050">Generation of the key from the combination of point-to-point line delay and the frequency of the crystal makes the key particularly resistant to attempts to circumvent it, since firstly the key is constantly changing and secondly it will be different on each link in the vehicle network. The two values can either be used directly in combination or can be expanded by other static values, which must be known to both control devices or control units, such as for example the address, in order to generate the keys.</p><p id="p-0041" num="0051">In this context, the consideration of the previously ascertained delay time and the message frequency is an entropy source that further increases security. Typical random number generators for computers and in particular for embedded systems or network components are not &#x201c;true&#x201d; random number generators in the sense that a nondeterministic physical process, such as for example electronic noise or radioactive decay, is converted into a digital signal. Rather, pseudo-random number generators are used here. Starting from initialization, these generators generate numerical sequences in a deterministic manner and are often also reliant on quasi-random system events for initialization.</p><p id="p-0042" num="0052">The effect provided by the method, namely protection against unauthorized eavesdropping, distortion of communication and against the exchange of devices, can also be achieved in other ways and with an even higher security level, for example by using hardware encryption, which is employed on the control unit or the on-board network.</p><p id="p-0043" num="0053">In vehicles, on the other hand, it is generally not economical to equip all subscribers connected to the network with hardware equipment sufficient for seamlessly encrypted communication. The method described requires significantly fewer hardware resources and can be put into action using existing implementations, thus significantly increasing the security level without this necessarily being linked to higher production costs for the on-board network or devices connected thereto.</p><p id="p-0044" num="0054">As described above, a major advantage of the method is that it can make use of the line leading from the first subscriber to the second subscriber as a means for the hardware-related generation of entropy for the random production of the time encryption even without using additional hardware. This method may be implemented in particular in the form of software that can be distributed as an update or upgrade for existing software or firmware of subscribers in the network and in this respect is an independent solution.</p><p id="p-0045" num="0055">The quality of the execution of software-based applications (e.g. automated driving) can advantageously be increased by an aspect of the invention, in particular without additional financial outlay. The on-board network according to an aspect of the invention is improved in terms of costs and reliability. As a result, the meta information can be generated from the control units or the on-board network using software-based methods, so as then to create a higher level of functionality from this.</p><p id="p-0046" num="0056">Advantageously, an aspect of the invention allows the security of a vehicle network to be increased significantly and very easily. The use of the newly introduced Ethernet protocol in automobiles necessitates mechanisms that make use of simple techniques and given properties of technologies in order to be able to do without expensive implementations and further additional hardware. Earlier detection of attacks and abnormal behavior by means of early analysis of the communication paths allows gaps and errors to be identified before the vehicle is delivered. The on-board network according to an aspect of the invention is improved in terms of costs and reliability. The testability of the on-board network is defined more clearly by an aspect of the invention, and test costs can be saved as a result. An aspect of the invention also affords a transparent security functionality.</p><p id="p-0047" num="0057">The method presented ensures that every link in the vehicle and thus also every link in every vehicle worldwide has a different encryption. The on-board network is thus significantly more secure than comparable systems, since the key is constantly changing and is additionally based on a secure entropy source.</p><p id="p-0048" num="0058">An aspect of the invention allows an increase in the quality of distributed applications such as for example sensor fusion. An advantage resulting from the application-specific determination of a better clock is in an improvement in the time synchronization for the selected application. This allows the maximum possible accuracy to be attained from this protocol, or similar protocols that have only one timing node. This results in more accurate synchronizations, which means that it is possible to dispense with more expensive crystals and components. This can also have an impact on buffer storage that is otherwise required, which can then be dispensed with or is made smaller. Fusions of different data, such as for example camera and radar, can thus be improved and made more accurate. Furthermore, the logging of data can be made even more precise.</p><p id="p-0049" num="0059">An aspect of the invention achieves platform-independent software of higher quality. This method allows the software to be made more flexible and advantageously allows information from the underlying system to be used without having permanently programmed it into the software beforehand. An aspect of the invention permits software developers and software architects to provide software/applications that can be tailored to the requirements of the application more flexibly and precisely. Incorporating the cited methods into software allows optimization to take place in each case or within the control device. This means that software becomes more platform independent.</p><p id="p-0050" num="0060">An advantage of an aspect of this invention is that the usual hardware does not have to be changed, but rather the existing hardware can continue to be used. The new method can be integrated into an existing network without damaging existing devices or control units. A standard that is used is not violated because the existing protocol can be used.</p><p id="p-0051" num="0061">The selected network devices can start sending the encrypted messages relating to time synchronization as soon as the unique clock identification of the grandmaster clock ascertained during the initialization has been sent to all network devices. However, it is also possible to start sending the encrypted messages relating to time synchronization only when a first time synchronization of all network devices in the network has been completed.</p><p id="p-0052" num="0062">The control units are connected to one another via physical interfaces. Messages relating to time synchronization are sent via a logical port defined for the interface, which means that there are point-to-point connections for the time synchronization between two network devices even when</p><p id="p-0053" num="0063">physical transmission media are shared. In the present description, the term interface is used synonymously with the term port, unless the context reveals otherwise.</p><p id="p-0054" num="0064">A computer program product according to an aspect of the invention contains instructions that, when executed by a computer, cause said computer to perform one or more embodiments and further developments of the method described above.</p><p id="p-0055" num="0065">The computer program product may be stored on a computer-readable medium or data carrier. The data carrier may be in a physical embodiment, for example as a hard disk, CD, DVD, flash memory or the like; however, the data carrier, or the medium, may also comprise a modulated electrical, electromagnetic or optical signal that can be received by a computer by means of an appropriate receiver and can be stored in the memory of the computer.</p><p id="p-0056" num="0066">A control unit, at least according to an aspect of the invention, comprises at least one physical communication interface in addition to a microprocessor and nonvolatile and volatile memory and also a timer. The components of the control unit are communicatively connected to one another by means of one or more data lines or data buses. The memory of the control unit contains computer program instructions that, when executed by the microprocessor, configure the network device to implement one or more embodiments of the method described above.</p><p id="p-0057" num="0067">The method according to an aspect of the invention can be implemented using existing network devices, wherein if necessary only adjustments in the software or in the state machines used for receiving and processing messages relating to time synchronization are required in order to use only the messages relating to time synchronization that come from the grandmaster clock ascertained during the initialization to synchronize the clocks, but still to forward the additional messages relating to time synchronization and not simply delete them. As a result, only low additional costs are incurred for the implementation, if at all. Even existing systems can be configured to implement the method, by way of appropriately changed software. Another advantage of the method according to an aspect of the invention is that the particular underlying hardware platform is irrelevant as long as it supports synchronization according to the IEEE 802.1AS standard.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0058" num="0068">An aspect of the invention will be explained below by way of example with reference to the drawing. In the drawing:</p><p id="p-0059" num="0069"><figref idref="DRAWINGS">FIG. <b>1</b></figref> shows a schematic plan view of a motor vehicle having an exemplary embodiment of an Ethernet on-board network according to the invention;</p><p id="p-0060" num="0070"><figref idref="DRAWINGS">FIG. <b>2</b></figref> shows a schematic representation of the Ethernet on-board network having a first control unit, a second control unit and a third control unit, which are connected by way of a first connecting path, a second connecting path and a third connecting path;</p><p id="p-0061" num="0071"><figref idref="DRAWINGS">FIG. <b>3</b></figref> shows a flowchart for the encryption of the time synchronization messages for determining a type of a transmission medium of the respective connecting path;</p><p id="p-0062" num="0072"><figref idref="DRAWINGS">FIG. <b>4</b></figref> shows a representation of the link delay of two connected control devices and measurement of the message frequency;</p><p id="p-0063" num="0073"><figref idref="DRAWINGS">FIG. <b>5</b></figref> shows a flowchart in which new keys are generated recurrently;</p><p id="p-0064" num="0074"><figref idref="DRAWINGS">FIG. <b>6</b></figref> shows a flowchart for the measurement of the delay, which forms the first parameter for the key;</p><p id="p-0065" num="0075"><figref idref="DRAWINGS">FIG. <b>7</b></figref> shows a flowchart for the determination of the individual crystal frequency, which forms the second parameter for the key;</p><p id="p-0066" num="0076"><figref idref="DRAWINGS">FIG. <b>8</b></figref> shows a flowchart for the calculation of the key and for the sending of the messages;</p><p id="p-0067" num="0077"><figref idref="DRAWINGS">FIG. <b>9</b></figref> shows a flowchart for the use of a key over time;</p><p id="p-0068" num="0078"><figref idref="DRAWINGS">FIG. <b>10</b></figref> shows a flowchart for the determination of a type of a transmission medium of the respective connecting path;</p><p id="p-0069" num="0079"><figref idref="DRAWINGS">FIG. <b>11</b></figref> shows a flowchart for the adaptation of a program in the Ethernet on-board network;</p><p id="p-0070" num="0080"><figref idref="DRAWINGS">FIG. <b>12</b></figref> shows a flowchart for the determination and storage of a delay time of a signal;</p><p id="p-0071" num="0081"><figref idref="DRAWINGS">FIG. <b>13</b></figref> shows a flowchart for the creation of a reference value list of delay times;</p><p id="p-0072" num="0082"><figref idref="DRAWINGS">FIG. <b>14</b></figref> shows a flowchart for the illustrative adaptation of a program in the Ethernet on-board network;</p><p id="p-0073" num="0083"><figref idref="DRAWINGS">FIG. <b>15</b></figref> shows encrypted links using the generated dynamic key from the communication of the control units;</p><p id="p-0074" num="0084"><figref idref="DRAWINGS">FIG. <b>16</b></figref> shows the design of a control unit; and</p><p id="p-0075" num="0085"><figref idref="DRAWINGS">FIG. <b>17</b></figref> shows a sequence for decoding.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><p id="p-0076" num="0086">Identical or similar elements may be referenced using the same reference signs in the figures.</p><heading id="h-0006" level="1">DESCRIPTION OF EXEMPLARY EMBODIMENTS</heading><p id="p-0077" num="0087"><figref idref="DRAWINGS">FIG. <b>1</b></figref> shows a plan view of a motor vehicle <b>1</b>. The motor vehicle <b>1</b> has an Ethernet on-board network <b>2</b>. The Ethernet on-board network <b>2</b> in turn has, according to the exemplary embodiment, a plurality of control units <b>3</b>, <b>4</b>, <b>5</b>, which can also be referred to as control apparatuses or control devices. In this case, the control units are connected to one another by way of connecting paths. On account of the existing topology of the Ethernet on-board network <b>2</b> in the exemplary embodiment, there are multiple parallel communication paths between the control units. The connecting paths may be formed from different media types or materials, for example.</p><p id="p-0078" num="0088">As the number of Ethernet variants increases, the dynamic change in the connection speed will also be used, for example. This means, for example, that the speed can be changed at runtime. For example, a 10 Gbit/s connecting path can be changed to 100 Mbit/s so that energy is saved. Since this is a dynamic function, it may be the case that the on-board network is in a different form after delivery or after initial installation in the motor vehicle than after a software update or in a fault situation, for instance.</p><p id="p-0079" num="0089">The Ethernet on-board network <b>2</b> has at least one first control unit <b>3</b>, a second control unit <b>4</b> and, in addition, a third control unit <b>5</b>. The first control unit <b>3</b> is connected to the second control unit <b>4</b> by a first connecting path <b>6</b>. Furthermore, the first control unit <b>3</b> according to the exemplary embodiment is also connected to the second control unit <b>4</b> by a second connecting path <b>7</b>.</p><p id="p-0080" num="0090">The first control unit <b>3</b>, the second control unit <b>4</b> and/or the third control unit <b>5</b> may be in the form of a control device or network switch, for example. The second control unit <b>4</b> and the third control unit <b>5</b> are connected to one another by a third connecting path <b>8</b>.</p><p id="p-0081" num="0091">According to the exemplary embodiment from <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the first control unit <b>3</b> and the second control unit <b>4</b> are connected to one another directly by way of the first connecting path <b>6</b>, whereas the first control unit <b>3</b> and the second control unit <b>4</b> are connected only indirectly by way of the second connecting path <b>7</b>, since the second connecting path <b>7</b> is divided into two parts by a further control unit. According to another exemplary embodiment, the second connecting path <b>7</b> can also connect the first control unit <b>3</b> and the second control unit <b>4</b> to one another directly, however.</p><p id="p-0082" num="0092"><figref idref="DRAWINGS">FIG. <b>2</b></figref> shows a further exemplary embodiment of the Ethernet on-board network <b>2</b>. The Ethernet on-board network <b>2</b> has the first control unit <b>3</b>, the second control unit <b>4</b> and the third control unit <b>5</b>. Furthermore, the Ethernet on-board network <b>2</b> also has the first connecting path <b>6</b>, the second connecting path <b>7</b> and the third connecting path <b>8</b>. According to the exemplary embodiment, a delay time <b>9</b> of a first signal <b>10</b> on the first connecting path <b>6</b> is determined. The delay time <b>9</b> describes the length of time for which the first signal <b>10</b> is in transit from the first control unit <b>3</b> to the second control unit <b>4</b>, or vice versa, via the first connecting path <b>6</b>. A maximum speed <b>11</b> of the first connecting path <b>6</b> is determined on the basis of the delay time <b>9</b> of the first signal <b>10</b>. The maximum speed <b>11</b> of the first connecting path <b>6</b> varies in this case depending on the length of the cable, the speed of the transmission and/or the media type, or the type of transmission medium, for example. A type of a transmission medium <b>12</b> of the first connecting path <b>6</b> is determined on the basis of the maximum speed <b>11</b>.</p><p id="p-0083" num="0093">According to the exemplary embodiment, the type of the transmission medium <b>12</b> is defined as optical, copper or wireless. In the case of optical, the first connecting path <b>6</b> is in the form of an optical fiber connection, for example. In the case of copper, the first connecting path is formed, for example, by cables having twisted pairs of wires, for example an unshielded twisted pair (UTP) cable. In the case of wireless, the first connecting path <b>6</b> is substantially in the form of a radio link and the first control unit <b>3</b> and/or the second control unit <b>4</b> has/have a radio receiver and/or a radio transmitter, or is/are connected thereto.</p><p id="p-0084" num="0094">In connection with the sequence shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the control units <b>3</b> average a delay time for the data transfer via the on-board network to the control units <b>4</b>. The important factor is that the delay time is ascertained in some form on the basis of an actual physical condition of the transmission path from the first control unit <b>3</b> to the control unit <b>4</b>, i.e. there is a physical condition or property of the transmission path that, when it changes, results in a change in the ascertained delay time.</p><p id="p-0085" num="0095">This presented method involves one control unit <b>3</b> ascertaining a delay time for the data transfer via the network to the control unit <b>4</b>. This can be carried out in any desired manner. For example, the delay time may occur in the course of a time synchronization between the first subscriber and the second subscriber, for instance according to the time synchronization standard IEEE 802.1AS and the PTP protocol contained therein. As such, for example the &#x201c;Delay Request&#x201d; and &#x201c;Peer Delay&#x201d; messages implemented as part of this protocol can be used as data packets, as shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>. However, the method is not restricted to this. The important factor is only that the delay time is ascertained in some form on the basis of an actual physical condition of the transmission path from the first subscriber/control unit <b>3</b> to the second subscriber/control unit <b>4</b>, i.e. there is a physical condition or property of the transmission path that, when it changes, results in a change in the ascertained delay time.</p><p id="p-0086" num="0096">Furthermore, the first control unit <b>3</b> ascertains the message frequency, which in principle is derived from the speed of the PLL and crystal, of the opposite control unit <b>4</b>. From these two values, which change constantly due to temperature, aging, etc., the control unit <b>3</b> derives a key for encrypting these time messages.</p><p id="p-0087" num="0097">The time synchronization messages are encrypted using the generated dynamic key, which, expressed in general terms, can be derived from individual parameters relating to the connection partner.</p><p id="p-0088" num="0098">An individual and constantly changing key is generated on the basis of the line delay <b>221</b> and the message frequency <b>213</b>. This key is unique per unit time and also different per link. As a result of this approach, there is no key twice in the network, as shown in <figref idref="DRAWINGS">FIG. <b>15</b></figref>. Generation of the keys from the combination of point-to-point line delay and the frequency of the crystal makes the key particularly resistant to attempts to circumvent it, since firstly the key is constantly changing and secondly it will be different on each link in the vehicle network.</p><p id="p-0089" num="0099">The two values can either be used directly in combination or can be expanded by other static values, which must be known to both control devices, such as for example the address, in order to generate the keys.</p><p id="p-0090" num="0100">The respective control unit, the method being able to be executed on both control units, or subscribers/link partners, ascertains a random value therefrom in order to obtain the individual key for the encryption, which key is valid only for a short time. As shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the key changes recurrently, based on the previous measurements, which do not represent any additional effort since they are used for time synchronization.</p><p id="p-0091" num="0101">The type of the transmission medium <b>12</b> is communicated to a program <b>13</b> in the Ethernet on-board network <b>2</b>. The program <b>13</b> may be present, for example, in the first control unit <b>3</b>, the second control unit <b>4</b> or the third control unit <b>5</b> or a further control unit of the Ethernet on-board network <b>2</b>. The type of the transmission medium <b>12</b> is taken as a basis for adapting a connecting path selection <b>14</b>. As such, the program <b>13</b> can use the connecting path selection <b>14</b>, for example, to send data by way of a different connecting path than before the connecting path selection. However, the program <b>13</b> can also interrupt the sending of data by way of the connecting path selection <b>14</b>, for example, and can resume it at a later time.</p><p id="p-0092" num="0102">According to the exemplary embodiment, a transmission security value <b>15</b> is assigned to the first connecting path <b>6</b> on the basis of the type of the transmission medium <b>12</b>. The transmission security value describes a probability of loss of data transmitted by way of the connecting path. That is to say that the transmission security value <b>15</b> permits a statement about how reliably the data can be transmitted by way of the first connecting path. This is supplied to the entropy source <b>200</b>. If a security limit value is not reached, for example, and the data can be transmitted only unreliably, then it must be expected that the data will reach their destination with a delay or, if it is not worth sending the data again on account of the requirement for the data to be up to date, will not reach their destination at all.</p><p id="p-0093" num="0103">According to a further exemplary embodiment, delay times of a plurality of signals on the first connecting path <b>6</b> are determined and the fastest delay time of the plurality of signals is selected. The maximum speed <b>11</b> of the first connecting path <b>6</b> is then determined on the basis of the fastest delay time.</p><p id="p-0094" num="0104">A control unit starts the delay measurement and waits to receive the link partner messages. Based on receipt of the messages using the PTP example, the line delay can be measured as shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>. If one link partner starts the delay measurement, the other link partner will inevitably notice this and should also start a measurement so that these two measurements can also generate a related measured value, as shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>.</p><p id="p-0095" num="0105">To explain, the procedure is demonstrated here using the example of PTP. PTP defines three mechanisms: Measurement of the line delay between neighboring nodes, determination of the best clock and exchange of time information. The purpose of the peer delay mechanism is to measure the delay between two connected ports. The measured delay time is used to correct the time information of the nodes and to include this time. Delay_Request messages are sent cyclically by both communication partners independently of one another. If the respective node is IEEE 802.1AS compatible, it will respond with a Delay_Response and a Pdelay_Resp_Follow_Up</p><p id="p-0096" num="0106">message. These messages are provided with a hardware timestamp upon arrival and are forwarded to the PTP application. This allows the latency and the time difference to the neighboring port to be determined. A port, the initiator, starts the measurement by sending a Delay_Request message to the port connected to it, the responder, and generating an exit timestamp t<b>1</b>. This exit timestamp denotes a hardware timestamp that is written as late as possible on leaving the Ethernet transceiver. When this packet arrives, the responder generates a timestamp t<b>2</b>. In response, the responder sends a Delay_Response message. In this message it transmits the reception timestamp t<b>2</b> of the Delay_Request message. When this message leaves the responder, the responder in turn generates a timestamp t<b>3</b>, which is sent out in an immediately subsequent Delay_Response_Follow_Up message. When the initiator receives the Delay_Response message, it generates a timestamp t<b>4</b>. The initiator can use the four timestamps t<b>1</b> to t<b>4</b> to calculate the average delay time for the routes covered.</p><p id="p-0097" num="0107">PTP defines a master/slave clock hierarchy with a best clock within an AVB network. The time base for the nodes in this network is derived from this clock, the grandmaster. The Best Master Clock Algorithm (BMCA) is used to determine this clock type and to announce this information in the network. IEEE 802.1AS compatible systems send cyclic Announce messages to their neighboring nodes with information about the best clock in the AVB cloud. The recipient of such a message compares this information with the features of its clock and any messages already received from another port. A time synchronization spanning tree is set up on the basis of these messages. In the course of this, each port is assigned one of four port statuses. The port that has a shorter path to the grandmaster than its link partner is provided with the &#x201c;master port&#x201d; status. The &#x201c;slave&#x201d; status is assigned when no other port at this node has this status yet. Disabled is selected by the port that cannot fully support the PTP protocol. The &#x201c;passive&#x201d; status is selected if none of the other three statuses apply.</p><p id="p-0098" num="0108">The time information is finally exchanged by way of the Sync_Follow_Up mechanism. The master ports cyclically send Sync and Follow_Up messages to the neighboring link partner. When the sync message leaves the master port, a timestamp is generated that is immediately transmitted in a subsequent Follow_Up message. This timestamp corresponds to the current time of the grandmaster at the time at which the Sync message is sent. The messages originating from the grandmaster are not forwarded, but rather regenerated in each node, including the switches. The measurement to determine the individual crystal frequency, derived from the message frequency, then starts. The frequency can be calculated on the basis of the receipt of the messages using the PTP example, as shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>. It is not always evident that the link partner is also measuring the frequency at the same time, which is why the frequency measurement should be carried out constantly.</p><p id="p-0099" num="0109">The type of the transmission medium <b>12</b> for the second connecting path <b>7</b> and/or the third connecting path <b>8</b> can also be determined analogously to the approach described above. The respective recorded values are different, remain secret and stored in the control device each time and are also not transmitted over the network&#x2014;nor do they have to be. Discovery of the key by mere trial and error is sufficiently improbable. An individual key is generated by taking the two values into account. First, the frequency of each crystal is different, and second, the line delay of each link is different. Here, two fluctuating values are added together, giving a third value&#x2014;the value of the key&#x2014;that is even harder to guess. The line delay may typically be in the range of 50-500 nanoseconds and the frequency is a parameter and is given in +/&#x2212; ppm. The round-trip line delay is based on the same channel, which is why the calculated values on both sides of the link are identical. The parameters therefore do not have to be exchanged.</p><p id="p-0100" num="0110">The NRR determines the measured ratio between the frequency of the LocalClock unit of the Timeaware system at the other end of the connection connected to this port and the frequency of the LocalClock unit of this timed system.</p><p id="p-0101" num="0000">Time Awareness System can be Equated with Control Unit Here.</p><p id="p-0102" num="0111">The NRR is also available to both partners without its needing to be exchanged. The sending node knows exactly when the message was sent (hardware timestamp) and the receiving node knows from the previous line measurement exactly when this message was sent.</p><p id="p-0103" num="0112">This means that both partners have the same values for generating the key at almost the same time. One link partner encrypts using these two values resulting from the last measurement and the other link partner decrypts using its last values.</p><p id="p-0104" num="0113">There is thus also provision for a delay time <b>16</b> of a second signal <b>17</b> on the second connecting path <b>7</b> to be determined. A maximum speed <b>18</b> of the second connecting path <b>7</b> is then determined on the basis of the delay time <b>16</b> of the second signal <b>17</b>. A type of the transmission medium <b>19</b> of the second connecting path <b>7</b> is in turn determined on the basis of the maximum speed <b>18</b> of the second connecting path <b>7</b>.</p><p id="p-0105" num="0114">It is advantageous to use the current key Al as long as no new line measurement is carried out, as suggested in <figref idref="DRAWINGS">FIG. <b>10</b></figref>. In this way, the link partner always knows which key to use if no new line measurement has been initiated beforehand. A new key should/can be either generated cyclically, e.g. predefined frequency, or started as required, by a trigger or always directly before important messages are sent.</p><p id="p-0106" num="0115">Both the first control unit <b>3</b> and the second control unit <b>4</b> and also the third control unit <b>5</b> can be operated in a normal operating mode or in an energy-saving mode. In the energy-saving mode, the respective control unit consumes less energy than in the normal operating mode. For example, in the energy-saving mode, the speed of a port of the respective control unit can be reduced in comparison with the speed in the normal operating mode. The reduced speed of the port then also affects the respective maximum speed of the respective connecting path.</p><p id="p-0107" num="0116">According to a further exemplary embodiment, a service message <b>20</b> can be sent from the first control unit <b>3</b> to the third control unit <b>8</b>. The determination of a delay time <b>21</b> of a third signal <b>22</b> is then triggered by the service message <b>20</b>. The third signal <b>22</b> is sent between the second control unit <b>4</b> and the third control unit <b>5</b>. According to the exemplary embodiment, the delay time <b>21</b> of the third signal <b>22</b> is determined by the third control unit <b>5</b>.</p><p id="p-0108" num="0117"><figref idref="DRAWINGS">FIG. <b>7</b></figref> provides a general description of the method for determining the delay time. The delay time <b>9</b> of the first signal <b>10</b> is determined in a step S<b>1</b>. The type of the transmission medium <b>12</b> is determined in a step S<b>2</b>. Finally, the program <b>13</b> is adapted in a step S<b>3</b>.</p><p id="p-0109" num="0118"><figref idref="DRAWINGS">FIG. <b>8</b></figref> shows a flowchart for the calculation of the respective parameters or the respective parameters that are assigned to the type of the transmission medium <b>12</b>. The delay time <b>9</b> of the first signal <b>10</b> is determined in a step S<b>4</b>. As a result, the type of the transmission medium <b>12</b> can be determined in a step S<b>5</b>. The type of the transmission medium <b>12</b> may in turn comprise the following parameters: speed <b>23</b>, medium <b>24</b>, cable length <b>25</b>, power transmission <b>26</b>, bit error rate <b>27</b>. Finally, the adaptation of the program <b>13</b> and the connecting path selection <b>14</b> then follow in a step S<b>6</b>.</p><p id="p-0110" num="0119">According to the exemplary embodiment, it is proposed that the delay time of the signals between connected control units or controllers be measured. Methods of the standard IEEE 1588 or IEEE 802.1AS, for example, can be used to measure the delay times <b>9</b>, <b>16</b> and <b>21</b>. Methods can also be provided by TTEthernet (time triggered Ethernet), for example, in order to determine the respective delay time <b>9</b>, <b>16</b> and <b>21</b>.</p><p id="p-0111" num="0120"><figref idref="DRAWINGS">FIG. <b>9</b></figref> shows the determination of the respective delay time <b>9</b>, <b>16</b> and <b>21</b>. Local and nonlocal querying of the delay time are described. The program <b>13</b>, which is executed in particular on at least one control unit, preferably first of all locally determines the local delay time, or the delay times if more than one control unit is directly connected. Other control units are then preferably queried for their delay time to the neighbor by way of a service-oriented method, for example SOME/IP (Scalable Service-Oriented Middleware over IP). This can be implemented either centrally or in a decentralized manner. The querying can either be carried out once, on system startup, definition or after a software update, or can be performed cyclically in order to detect dynamic changes. These data are then stored and assigned for the first time, in particular including the addresses of the control units.</p><p id="p-0112" num="0121">The respective delay time to the directly connected control units is determined in a step S<b>7</b>. The respective delay times of other connecting paths are queried in a step S<b>8</b>. The respective delay times and the associated connection partners thereof are stored in a step S<b>9</b>.</p><p id="p-0113" num="0122"><figref idref="DRAWINGS">FIG. <b>10</b></figref> shows a further method for deriving the other speeds on the basis of a reference measurement. If, for example, the current temperature is very high or poor cables are used, prestored values may possibly be too inaccurate. It is therefore proposed that the application, or the program <b>13</b>, itself carries out measurements on its own control unit, in particular in light of its own parameters and other speeds that can then be derived and calculated therefrom.</p><p id="p-0114" num="0123">One analysis per local Ethernet port is carried out in a step S<b>10</b>. A test for whether channel parameters are known is performed in a step S<b>11</b>. If this is not the case, a step S<b>12</b> follows and the method ends. If this is the case, a step S<b>13</b> follows, in which the respective delay time <b>9</b>, <b>16</b> and <b>21</b> is determined. The storage takes place in a step S<b>14</b> and the determined delay time is related to the channel parameters. A list of reference values is created in a step S<b>15</b>.</p><p id="p-0115" num="0124"><figref idref="DRAWINGS">FIG. <b>13</b></figref> shows possible optimization by means of knowledge of the type of the transmission medium <b>12</b>, <b>19</b>. A decision is made as to whether the type of the transmission medium <b>12</b>, <b>19</b> is copper in a step S<b>16</b>. If this is the case, a step S<b>17</b> follows, in which it is confirmed that PoDL (Power over Data Lines), that is to say the supply of power via Ethernet, is possible. If the decision in step S<b>16</b> is that the medium is not copper, a step S<b>18</b> follows. A check to ascertain whether the type of the transmission medium <b>12</b> is optical is performed in step S<b>18</b>. If this is the case, a step S<b>19</b> follows. In step S<b>19</b> it is found that the bit error rate is therefore lower and the reliability of this connecting path is therefore higher. The option of deactivating RX (receiving unit) or TX (transmitting unit) of the control unit <b>3</b>, <b>4</b>, <b>5</b> if it is not required is provided in a step S<b>20</b>.</p><p id="p-0116" num="0125">If the decision in step S<b>18</b> is that the medium, or the type, of the transmission medium <b>12</b> is not optical, it is assumed in a step S<b>21</b> that the respective connecting path, as the relevant connecting path, is in the form of a direct MII (Media Independent Interface) connection. In this case, the respective control unit is suitable, for example, for IEEE P802.1CB (Frame Replication and Elimination for Redundancy).</p><p id="p-0117" num="0126">Further options arise from the knowledge of the transmission speed. Combined with the current data streams, data can be deliberately transmitted using a high bandwidth connection, for example, and other connecting paths that are not required can therefore be deactivated, thus making it possible to save energy.</p><p id="p-0118" num="0127">In addition, for high bandwidth connections, there is the option of using redundancy mechanisms (e.g. IEEE 802.1CB). Since the data are continuously transmitted in a redundant manner in this case, a high bandwidth is required for this purpose. It is also conceivable to adapt the application depending on the speed of the transmission path. A camera can adapt the resolution of the image data to be transmitted depending on the speed of the link or the connecting path <b>6</b>, <b>7</b>, <b>8</b>, for example.</p><p id="p-0119" num="0128">In addition to a microprocessor <b>402</b>, the control unit <b>3</b>, <b>4</b>, <b>5</b> comprises volatile and nonvolatile memory <b>404</b>, <b>406</b>, two communication interfaces <b>408</b> and a synchronizable timer <b>410</b>. The elements of the network device are communicatively connected to one another by way of one or more data connections or data buses <b>412</b>. The nonvolatile memory <b>406</b> contains program instructions that, when executed by the microprocessor <b>402</b>, implement at least one embodiment of the method according to an aspect of the invention and the entropy source is formed in the volatile and/or nonvolatile memory <b>404</b>, <b>406</b>, said entropy source then being used to form the dynamic keys <b>28</b> for the connecting paths <b>6</b>. The decoding sequence of the dynamic key during decryption is shown in <figref idref="DRAWINGS">FIG. <b>17</b></figref>.</p><heading id="h-0007" level="1">LIST OF REFERENCE SIGNS</heading><p id="p-0120" num="0129"><b>1</b> Motor vehicle</p><p id="p-0121" num="0130"><b>2</b> Ethernet on-board network</p><p id="p-0122" num="0131"><b>3</b> First control unit</p><p id="p-0123" num="0132"><b>4</b> Second control unit</p><p id="p-0124" num="0133"><b>5</b> Third control unit</p><p id="p-0125" num="0134"><b>6</b> First connecting path</p><p id="p-0126" num="0135"><b>7</b> Second connecting path</p><p id="p-0127" num="0136"><b>8</b> Third connecting path</p><p id="p-0128" num="0137"><b>9</b> Delay time of the first signal</p><p id="p-0129" num="0138"><b>10</b> First signal</p><p id="p-0130" num="0139"><b>11</b> Maximum speed of the first connecting path</p><p id="p-0131" num="0140"><b>12</b> Type of transmission medium of the first connecting path</p><p id="p-0132" num="0141"><b>13</b> Program</p><p id="p-0133" num="0142"><b>14</b> Connecting path selection</p><p id="p-0134" num="0143"><b>15</b> Transmission security value</p><p id="p-0135" num="0144"><b>16</b> Delay time of the second signal</p><p id="p-0136" num="0145"><b>17</b> Second signal</p><p id="p-0137" num="0146"><b>18</b> Maximum speed of the second connecting path</p><p id="p-0138" num="0147"><b>19</b> Type of transmission medium of the second connecting path</p><p id="p-0139" num="0148"><b>20</b> Service message</p><p id="p-0140" num="0149"><b>21</b> Delay time of the third signal</p><p id="p-0141" num="0150"><b>22</b> Third signal</p><p id="p-0142" num="0151"><b>23</b> Speed</p><p id="p-0143" num="0152"><b>24</b> Medium</p><p id="p-0144" num="0153"><b>25</b> Cable length</p><p id="p-0145" num="0154"><b>26</b> Power transmission</p><p id="p-0146" num="0155"><b>27</b> Bit error rate</p><p id="p-0147" num="0156"><b>28</b> Dynamic key</p><p id="p-0148" num="0157"><b>29</b> Time synchronization message</p><p id="p-0149" num="0158"><b>200</b> Entropy source</p><p id="p-0150" num="0159"><b>211</b> Sending at time t<b>1</b></p><p id="p-0151" num="0160"><b>212</b> Reception at time t<b>4</b></p><p id="p-0152" num="0161"><b>213</b> Reception at time t<b>4</b></p><p id="p-0153" num="0162"><b>221</b> Reception at time t<b>2</b></p><p id="p-0154" num="0163"><b>222</b> Sending at time t<b>3</b></p><p id="p-0155" num="0164"><b>223</b> Delayed sending at time t<b>3</b></p><p id="p-0156" num="0165"><b>300</b> Encrypted message at time t<b>5</b></p><p id="p-0157" num="0166"><b>400</b> Control unit</p><p id="p-0158" num="0167"><b>402</b> Microprocessor</p><p id="p-0159" num="0168"><b>404</b> RAM</p><p id="p-0160" num="0169"><b>406</b> ROM</p><p id="p-0161" num="0170"><b>408</b> Communication interface</p><p id="p-0162" num="0171"><b>410</b> Timer</p><p id="p-0163" num="0172"><b>412</b> Bus/communication interface</p><p id="p-0164" num="0173"><b>1001</b> Receive an encrypted message</p><p id="p-0165" num="0174"><b>1002</b> Start measurement of the line delay and frequency measurement</p><p id="p-0166" num="0175"><b>1003</b> Request the last line measurement and frequency parameters</p><p id="p-0167" num="0176"><b>1004</b> Generate the key</p><p id="p-0168" num="0177"><b>1005</b> Decrypt the message</p><p id="p-0169" num="0178">A<b>1</b> Calculation of line delay <b>1</b> and calculation of crystal frequency <b>1</b></p><p id="p-0170" num="0179">A<b>2</b> Calculation of line delay <b>2</b> and calculation of crystal frequency <b>2</b></p><p id="p-0171" num="0180">B<b>1</b> Calculation of line delay <b>1</b> and calculation of crystal frequency <b>1</b></p><p id="p-0172" num="0181">B<b>2</b> Calculation of line delay <b>2</b> and calculation of crystal frequency <b>2</b></p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method for securing the time synchronization of an Ethernet on-board network of a motor vehicle, the method comprising:<claim-text>determining a delay time of a first signal on a first connecting path between a first control unit of the Ethernet on-board network and a second control unit of the Ethernet on-board network;</claim-text><claim-text>determining a maximum speed of the first connecting path on the basis of the delay time; and</claim-text><claim-text>determining a type of a transmission medium of the first connecting path on the basis of the maximum speed,</claim-text><claim-text>wherein the determination of the delay time of a first signal and the determination of the maximum speed of the first connecting path and the determination of the type of a transmission medium of the first connecting path result in an entropy source being formed that is used to ascertain at least one dynamic key for the connecting path that is used to encrypt a time synchronization message for the connecting path.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the dynamic key for the connecting path is unique per unit time and for each link and in the Ethernet on-board network.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the dynamic key for the connecting path is generated by combining a point-to-point line delay and the message frequency.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein<claim-text>the type of the transmission medium is communicated to a program in the Ethernet on-board network and a connecting path selection of the program is adapted according to the type of the transmission medium and the program records all information of the entropy source and the dynamic key for the connecting path is generated.</claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein<claim-text>the type of the transmission medium is determined as optical, copper or wireless.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a transmission security value, which describes a probability of loss of data transmitted by way of the first connecting path, is assigned to the first connecting path on the basis of the type of the transmission medium.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein delay times of a plurality of signals on the first connecting path are determined and the fastest delay time of the plurality of signals is selected, the maximum speed of the first connecting path being determined on the basis of the fastest delay time.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a delay time of a second signal on a second connecting path, which is different from the first connecting path, between the first control unit and the second control unit is determined, and a maximum speed of the second connecting path is determined, a type of the transmission medium of the second connecting path being determined on the basis of the maximum speed of the second connecting path.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the method is performed after the first control unit changes from a normal operating mode to an energy-saving mode and/or from the energy-saving mode to the normal operating mode.</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the delay time of the first signal is determined using the first control unit and a delay time of a third signal on a third connecting path, which is connected to the first control unit only indirectly, between the second control unit and a third control unit of the Ethernet on-board network is determined using the third control unit, the determination of the delay time of the third signal being triggered by a service message sent from the first control unit to the third control unit.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. A control unit for an Ethernet on-board network, which, a first control unit, is designed:<claim-text>to send a signal to a second control unit of the Ethernet on-board network and to receive the signal from the second control unit;</claim-text><claim-text>to determine a delay time of the signal on a connecting path to the second control unit;</claim-text><claim-text>to determine a maximum speed of the connecting path on the basis of the delay time; and</claim-text><claim-text>to determine a type of a transmission medium of the connecting path on the basis of the maximum speed,</claim-text></claim-text><claim-text>the control unit comprising at least:<claim-text>a microprocessors;</claim-text><claim-text>a volatile memory and nonvolatile memory;</claim-text><claim-text>at least two communication interfaces; and</claim-text><claim-text>a synchronizable timer <b>410</b>,</claim-text></claim-text><claim-text>wherein the nonvolatile memory contains program instructions that, when executed by the microprocessor, implement at least one embodiment of the method according to the invention as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref> and the entropy source is formed in the volatile and/or the nonvolatile memory, said entropy source being used to form the dynamic keys for the connecting paths.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. An Ethernet on-board network for a motor vehicle, comprising a first control unit and a second control unit, wherein the control units are connected to one another by way of at least one connecting path, and the first control unit is designed as claimed in <claim-ref idref="CLM-00011">claim 11</claim-ref>.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The Ethernet on-board network as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein<claim-text>the Ethernet on-board network has a third control unit, which is connected to the first control unit only indirectly and is connected to the second control unit directly by way of a third connecting path, wherein the third control unit is designed to determine a delay time of a third signal on the third connecting path, wherein the first control unit is designed to trigger the determination of the delay time of the third signal by way of a service message to the third control unit.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. A non-transitory computer program product comprising instructions that, when the program is executed by a computer, cause said computer to perform the method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. A non-transitory computer-readable medium on which the computer program product as claimed in <claim-ref idref="CLM-00012">claim 12</claim-ref> is stored.</claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. A vehicle having multiple control units as claimed in <claim-ref idref="CLM-00012">claim 12</claim-ref>, comprising an Ethernet on-board network.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The method as claimed in <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the dynamic key for the connecting path is generated by combining a point-to-point line delay and the message frequency.</claim-text></claim></claims></us-patent-application>