<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230003540A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230003540</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17931790</doc-number><date>20220913</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>JP</country><doc-number>2020-045571</doc-number><date>20200316</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>C</subclass><main-group>21</main-group><subgroup>36</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>C</subclass><main-group>21</main-group><subgroup>32</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>C</subclass><main-group>21</main-group><subgroup>3658</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>C</subclass><main-group>21</main-group><subgroup>32</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">TRAVELING TRACK GENERATION DEVICE AND TRAVELING TRACK GENERATION METHOD</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>PCT/JP2021/010170</doc-number><date>20210312</date></document-id><parent-status>PENDING</parent-status></parent-doc><child-doc><document-id><country>US</country><doc-number>17931790</doc-number></document-id></child-doc></relation></continuation></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>DENSO CORPORATION</orgname><address><city>Kariya-city</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>KITAHARA</last-name><first-name>GENKI</first-name><address><city>Kariya-city</city><country>JP</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">An entry point and an exit point are specified in a non-lane section. A lane definition line is searched to be continuous in a longitudinal direction of the road from the entry point to the exit point. A virtual lane marking line is generated to connect between the lane marking line on an entry side and the lane marking line on an exit side, based on the lane definition line detected as a search result. A travelling track is generated as a trajectory on which a vehicle is scheduled to travel, based on the virtual lane marking line.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="92.88mm" wi="90.34mm" file="US20230003540A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="232.58mm" wi="148.67mm" file="US20230003540A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="236.90mm" wi="128.69mm" file="US20230003540A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="236.05mm" wi="157.73mm" file="US20230003540A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="213.61mm" wi="161.63mm" file="US20230003540A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="201.68mm" wi="134.20mm" file="US20230003540A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="92.79mm" wi="124.71mm" file="US20230003540A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="171.03mm" wi="133.18mm" file="US20230003540A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="188.98mm" wi="161.12mm" file="US20230003540A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATION</heading><p id="p-0002" num="0001">The present application is a continuation application of International Patent Application No. PCT/JP2021/010170 filed on Mar. 12, 2021, which designated the U.S. and claims the benefit of priority from Japanese Patent Application No. 2020-045571 filed on Mar. 16, 2020. The entire disclosures of all of the above applications are incorporated herein by reference.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">TECHNICAL FIELD</heading><p id="p-0003" num="0002">The present disclosure relates to a traveling track generation device and a traveling track generation method.</p><heading id="h-0003" level="1">BACKGROUND</heading><p id="p-0004" num="0003">There is known a technique for controlling the travelling of a vehicle (hereinafter referred to as lane reference control) with reference to the lane marking line that divides the traffic lanes in which the vehicles are traveling. In the lane reference control, a traveling track on which the vehicle travels is generated with reference to the lane marking line. Then, the vehicle control is performed based on the generated traveling track.</p><p id="p-0005" num="0004">The area inside the intersection has no lane marking lines. A conceivable technique teaches a device for generating a traveling track for traveling in an intersection. The device in the conceivable technique aligns both ends of the trajectory when the vehicle actually travels in the intersection with the entry side lane network and the exit side lane network.</p><heading id="h-0004" level="1">SUMMARY</heading><p id="p-0006" num="0005">According to an example, an entry point and an exit point are specified in a non-lane section. A lane definition line is searched to be continuous in a longitudinal direction of the road from the entry point to the exit point. A virtual lane marking line is generated to connect between the lane marking line on an entry side and the lane marking line on an exit side, based on the lane definition line detected as a search result. A travelling track is generated as a trajectory on which a vehicle is scheduled to travel, based on the virtual lane marking line.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0007" num="0006">The above and other objects, features and advantages of the present disclosure will become more apparent from the following detailed description made with reference to the accompanying drawings. In the drawings:</p><p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a diagram showing a configuration of a vehicle control system <b>10</b> including a vehicle control device;</p><p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a diagram illustrating an non-lane section, an entry point, and an exit point;</p><p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a diagram showing a process executed by a map position estimation unit in <figref idref="DRAWINGS">FIG. <b>1</b></figref>;</p><p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a diagram showing a process executed by the map route generation unit in <figref idref="DRAWINGS">FIG. <b>1</b></figref>;</p><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a diagram showing a process to be executed when it is determined to execute the non-lane section control;</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a diagram showing detailed processing of S<b>33</b> in <figref idref="DRAWINGS">FIG. <b>5</b></figref>;</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a diagram showing a non-lane section different from that of <figref idref="DRAWINGS">FIG. <b>2</b></figref>;</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a diagram showing a non-lane section different from <figref idref="DRAWINGS">FIGS. <b>2</b> and <b>7</b></figref>;</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a diagram showing detailed processing of S<b>34</b> in <figref idref="DRAWINGS">FIG. <b>5</b></figref>;</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a diagram showing a process executed by the traveling control unit; and</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>11</b></figref> is a diagram showing processing of a point specifying unit in the second embodiment.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0006" level="1">DETAILED DESCRIPTION</heading><p id="p-0019" num="0018">In order to perform lane reference control, it may be desirable that lane marking lines exists for dividing the travelling lane on both the left and right sides of the vehicle. The inside of the intersection is not an area where the lane reference control is executed because the vehicle may turn left or right. However, although it may be desired to execute the lane reference control, there is an area where the lane marking line to be referred to does not exist. For example, a branching area, a merging area and the like has no lane marking line. Since the number of lanes increases or decreases in the branching/merging area, there is an area where the lane marking line is temporarily interrupted. In addition, there may be an area where the road width widens before the toll gate, and even in such an area, there is no lane marking line. Further, even if the number of lanes does not increase or decrease, there may be a region where the lane marking line does not exist in a part of the longitudinal direction of the road.</p><p id="p-0020" num="0019">Since there is no lane marking line on either the left or right side, the section where the traffic lane is not defined by the lane marking line is hereinafter referred to as a non-lane section. It is conceivable to apply the technique disclosed in Patent Literature 1 to this non-lane section, the locus when the vehicle actually travels is stored in the map data, and the locus is used as the traveling track. However, if the map data includes the trajectory when the vehicle actually travels for the non-lane section, the map data capacity becomes too large.</p><p id="p-0021" num="0020">The present embodiments are made based on this circumstance, and an object thereof is to provide a traveling track generation device and a traveling track generation method for generating a traveling track in a non-lane section while suppressing an increase in map data capacity.</p><p id="p-0022" num="0021">One embodiment relating to a traveling track generation device for achieving the above objectives is a travelling track generation device including:</p><p id="p-0023" num="0022">a point specifying unit that specifies an entry point and an exit point in a non-lane section in which no lane marking line is disposed on at least one of a right side and a left side in a width direction of a road, and a traffic lane is not defined by a lane marking line;</p><p id="p-0024" num="0023">a search unit that searches for a lane definition line that is continuously disposed along a longitudinal direction of the road from a side of the entry point to a side of the exit point specified by the point specifying unit;</p><p id="p-0025" num="0024">a virtual lane marking line generation unit that generates a virtual lane marking line for connecting between a lane marking line on the side of the entry point and a lane marking line on the side of the exit point in the non-lane section corresponding to the entry point and the exit point, based on the lane definition line detected as a search result of the search unit; and</p><p id="p-0026" num="0025">a travelling track generation unit that generates a travelling track as a trajectory on which a vehicle is scheduled to travel, based on the virtual lane marking line.</p><p id="p-0027" num="0026">This traveling track generation device specifies the entry point and the exit point of the non-lane section, searches for the lane definition line for generating the virtual lane marking line based on the entry point and the exit point, and generates the virtual lane marking line connecting the lane marking line on the entry side and the lane marking line on the exit side of the non-lane section based on the searched lane definition line.</p><p id="p-0028" num="0027">The traveling track generation unit processed this virtual lane marking line in the same manner as an actually existing lane marking line to generate a traveling track. Therefore, even if there is a non-lane section, it is possible to generate a traveling track in the same manner as in a section where there is actually a lane marking line. Further, since the virtual lane marking line is not stored in the map data, it is possible to suppress an increase in the map data capacity.</p><p id="p-0029" num="0028">One embodiment relating to a traveling track generation method for achieving the above object is a method executed by the traveling track generation device and including:</p><p id="p-0030" num="0029">specifying an entry point and an exit point in a non-lane section in which no lane marking line is disposed on at least one of a right side and a left side in a width direction of a road, and a traffic lane is not defined by a lane marking line;</p><p id="p-0031" num="0030">searching for a lane definition line that is continuously disposed in a longitudinal direction of a road from a side of a specified entry point to a side of a specified exit point;</p><p id="p-0032" num="0031">generating a virtual lane marking line connecting a lane marking line on an entry side and a lane marking line on an exit side in the non-lane section corresponding to the entry point and the exit point, based on the lane definition line detected as a search result; and</p><p id="p-0033" num="0032">generating a travelling track as a trajectory on which a vehicle is scheduled to travel, based on the virtual lane marking line.</p><p id="p-0034" num="0033">The following will describe an embodiment of the present disclosure with reference to the drawings. <figref idref="DRAWINGS">FIG. <b>1</b></figref> is a diagram showing a configuration of a vehicle control system <b>10</b> including a vehicle control device <b>100</b> that also functions as a traveling track generation device. The vehicle control system <b>10</b> includes a vehicle control device <b>100</b> mounted on the vehicle <b>3</b> and a server <b>20</b> installed at a place different from the vehicle <b>3</b>.</p><heading id="h-0007" level="1">Configuration of Server <b>20</b></heading><p id="p-0035" num="0034">The server <b>20</b> includes a map memory <b>21</b>, a communication unit <b>22</b>, and a server-side control unit <b>23</b>. The map memory <b>21</b> includes a rewritable non-volatile storage medium, and high-precision map data is stored in the storage medium. The high-precision map data includes data representing information in the width direction of the road in addition to data representing the shape in the longitudinal direction of the road. The information in the width direction of the road includes information indicating the number of lanes, the position of the lane marking line L, the type of the lane marking line L, the road sign, the road edge line, and the like.</p><p id="p-0036" num="0035">Further, in the present embodiment, the high-precision map data includes the coordinates of the entry point PIN and the exit point POUT of the non-lane section NLS. The non-lane section NLS is a section in which the position of the traffic lane cannot be defined by the lane marking line L because there is no lane marking line L on at least one of the right side and the left side. Here, it is defined that there is a lane marking line L in a section where road markings for defining lanes such as broken lines and road studs are continuous at specified intervals. Further, the non-lane section NLS is a section in which there are areas having lane marking lines L on both the left and right sides in the front and rear in the longitudinal direction of the road, and the lane can be estimated from the lane marking lines L in the front and rear in the longitudinal direction of the road. The non-lane section NLS is a section in which at least one of the left and right lane marking lines L does not exist in the estimated lane.</p><p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a diagram illustrating an non-lane section NLS, an entry point PIN, and an exit point POUT. In the non-lane section NLS, since there is no lane marking line L at least on the left or right, even if there is another lane marking line L, the distance between the lane marking line L adjacent to another lane marking line L or the road boundary line is longer than the lane width.</p><p id="p-0038" num="0037">In <figref idref="DRAWINGS">FIG. <b>2</b></figref>, lane marking lines L<b>1</b> and L<b>3</b> exist at intervals of a lane width on the left and right sides of the position where the vehicle <b>3</b> is disposed, but the lane marking line L<b>1</b> on the left side in the traveling direction of the vehicle <b>3</b> is curved toward the side away from the other lane marking line L<b>3</b>. Therefore, in the y coordinate, which is the coordinate along the road, the non-lane section NLS starts from y<b>1</b>. When the y coordinate becomes y<b>2</b>, the lane marking line L<b>2</b> is appeared, and the non-lane section NLS ends at y<b>2</b>.</p><p id="p-0039" num="0038">The position of the entry point PIN in the longitudinal direction of the road is an arbitrary point disposed between a predetermined distance before entering the non-lane section NLS and a point entering the non-lane section NLS. The predetermined distance is about several meters to several tens of meters. The position of the entry point PIN in the road width direction is at or near the center of the lane in the width direction.</p><p id="p-0040" num="0039">The position of the exit point POUT in the longitudinal direction of the road is an arbitrary point disposed between the position of exiting the non-lane section NLS to a predetermined distance after exiting the non-lane section NLS. The predetermined distance is the same as in the case of the entry point PIN. The position of the exit point POUT in the road width direction is at or near the center of the road in the width direction. In <figref idref="DRAWINGS">FIG. <b>2</b></figref>, since the road branches, the exit point POUT is shown as two exit points POUTA and POUTB.</p><p id="p-0041" num="0040">The communication unit <b>22</b> is a communication unit capable of wide area wireless communication. The server-side control unit <b>23</b> is configured to include at least one processor. For example, the server-side control unit <b>23</b> can be realized by a computer including a processor, a non-volatile memory, RAM, I/O, and a bus line connecting these configurations. The server-side control unit <b>23</b> controls the map memory <b>21</b> and the communication unit <b>22</b>. For example, the server-side control unit <b>23</b> extracts high-precision map data to be transmitted from the map memory <b>21</b> to the vehicle control device <b>100</b>, and transmits the extracted high-precision map data from the communication unit <b>22</b> to the vehicle control device <b>100</b>.</p><heading id="h-0008" level="1">Configurations of Vehicle Control Device <b>100</b></heading><p id="p-0042" num="0041">The vehicle control device <b>100</b> includes a camera <b>110</b>, a vehicle behavior sensor <b>120</b>, a GNSS receiver <b>130</b>, a communication unit <b>140</b>, a memory <b>150</b>, and a control unit <b>160</b>. These are mounted on the vehicle <b>3</b>. The camera <b>110</b> detects an object existing around the vehicle <b>3</b> through image processing. The objects detected by the camera <b>110</b> includes a lane marking line L drawn on the road surface, a road edge line, and the like. In place of or in addition to the camera <b>110</b>, other devices such as LIDAR may be provided to detect objects disposed around the vehicle <b>3</b>.</p><p id="p-0043" num="0042">The vehicle behavior sensor <b>120</b> includes a speed sensor, an acceleration sensor, and a yaw rate sensor. The speed sensor detects the speed of the vehicle <b>3</b>. The acceleration sensor detects the acceleration acting on the vehicle <b>3</b>. The acceleration sensor detects the acceleration in the front-rear direction of the vehicle <b>3</b> and the yaw angle of the vehicle <b>3</b> based on the detected values.</p><p id="p-0044" num="0043">The GNSS receiver <b>130</b> receives a navigation signal transmitted by a navigation satellite included in the GNSS (Global Navigation Satellite System), which is a satellite navigation system, and sequentially calculates the current position based on the received navigation signal.</p><p id="p-0045" num="0044">The communication unit <b>140</b> is capable of wide area communication. The communication unit <b>140</b> can perform wide area wireless communication with the communication unit <b>22</b> included in the server <b>20</b>.</p><p id="p-0046" num="0045">The memory <b>150</b> includes a writable storage medium such as a flash memory, and stores high-precision map data downloaded from the server <b>20</b>.</p><p id="p-0047" num="0046">The control unit <b>160</b> includes at least one processor. For example, the control unit <b>160</b> can be realized by a computer including a processor, a non-volatile memory, RAM, I/O, and a bus line connecting these configurations. The non-volatile memory stores a program for operating a general-purpose computer as a control unit <b>160</b>. When the processor executes the program stored in the non-volatile memory while using the temporary storage function of the RAM, the control unit <b>160</b> functions as the current position determination unit <b>161</b>, the map management unit <b>162</b>, the map position estimation unit <b>163</b>, and the map route generation unit <b>164</b> and a travel control unit <b>165</b>. Execution of the operations corresponds to an execution of a method implemented by the program. The method corresponding to the program includes a traveling track generation method.</p><p id="p-0048" num="0047">The current position determination unit <b>161</b> sequentially determines the current position of the vehicle <b>3</b> by sequentially acquiring the current position determined by the GNSS receiver <b>130</b>. The current position of the vehicle <b>3</b> can also be determined by a method other than satellite navigation using the GNSS receiver <b>130</b>. For example, the current position may be sequentially determined by autonomous navigation based on the vehicle behavior detected by the vehicle behavior sensor <b>120</b>, or hybrid navigation that combines autonomous navigation and satellite navigation using the GNSS receiver <b>130</b>.</p><p id="p-0049" num="0048">The map management unit <b>162</b> manages the high-precision map data stored in the memory <b>150</b>. The map management unit <b>162</b> downloads high-precision map data in a range determined based on the current position determined by the current position determination unit <b>161</b> every time the vehicle travels a certain distance from the server <b>20</b> via the communication unit <b>140</b>. Then, the downloaded high-precision map data is stored in the memory <b>150</b>. When the high-precision map data is already stored in the memory <b>150</b>, the high-precision map data stored in the memory <b>150</b> is updated with the downloaded high-precision map data this time.</p><p id="p-0050" num="0049">The map position estimation unit <b>163</b> estimates the current position of the vehicle <b>3</b> on the high-precision map. <figref idref="DRAWINGS">FIG. <b>3</b></figref> shows a process executed by the map position estimation unit <b>163</b>. The map position estimation unit <b>163</b> executes the process shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> in a position estimation cycle set to about several tens of milliseconds to several hundreds of milliseconds.</p><p id="p-0051" num="0050">Step (hereinafter, the step is omitted) in S<b>11</b>, the current position of the vehicle <b>3</b> is acquired from the current position determination unit <b>161</b>. In S<b>12</b>, high-precision map data in a predetermined range in the traveling direction including the current position is extracted from the high-precision map data downloaded from the server <b>20</b> and stored in the memory <b>150</b>. The extracted data is stored in the RAM. The process of S<b>12</b> may be executed in a cycle longer than the position estimation cycle.</p><p id="p-0052" num="0051">In S<b>13</b>, data that recognizes the periphery of the vehicle <b>3</b>, such as image data captured by the camera <b>110</b>, is acquired. In S<b>14</b>, the current position of the vehicle <b>3</b> on the high-precision map data is estimated by matching the high-precision map data extracted in S<b>12</b> with the peripheral recognition data acquired in S<b>13</b>. The estimated current position has an accuracy that can determine the relative position of the vehicle <b>3</b> with respect to the lane marking line L.</p><p id="p-0053" num="0052">The map track generation unit <b>164</b> generates a travel track of the vehicle <b>3</b> on a high-precision map. <figref idref="DRAWINGS">FIG. <b>4</b></figref> shows a process executed by the map track generation unit <b>164</b>. The map track generation unit <b>164</b> executes the process shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref> for each preset track generation cycle. The track generation cycle is the same as or longer than the cycle in which the map position estimation unit <b>163</b> estimates the current position.</p><p id="p-0054" num="0053">In S<b>21</b>, the latest travel schedule road is determined. The latest travel schedule road is a road on which the vehicle <b>3</b> will travel from the current position when the vehicle travels by the length of the travel track or a little longer than that. Even if the vehicle <b>3</b> travels only to determine the latest travel schedule road, when the roads on which the vehicle travels are the same, the road currently being traveled is equal to the latest travel schedule road. If there is a branch point while the vehicle <b>3</b> travels only to determine the latest travel schedule road, and when the route is being guided, the vehicle travels along the guide route, and the latest travel schedule road is determined. If there is a branch point while the vehicle <b>3</b> travels only to determine the latest travel schedule road, and when the route guidance is not executed, a plurality of travel schedule roads passing through each of the branched roads are determined.</p><p id="p-0055" num="0054">S<b>22</b> is a process as a non-lane section determination unit. In S<b>22</b>, when the vehicle travels on the travel schedule road determined in S<b>21</b> with reference to the high-precision map data and the position of the vehicle <b>3</b> on the high-precision map, it is determined whether or not there is a non-lane section NLS. If the determination result of S<b>22</b> is &#x201c;NO&#x201d;, the process proceeds to S<b>23</b>.</p><p id="p-0056" num="0055">In S<b>23</b>, it is determined to execute the lane section control in the lane reference control. The lane section control is a normal lane reference control, and is a control executed when the lane marking line L exists on both the left and right sides of the lane in which the vehicle <b>3</b> travels. In the lane section control, the lane marking lines L on the left and right sides of the lane in which the vehicle <b>3</b> is traveling are detected by in-vehicle sensors such as the camera <b>110</b>, and the position in the road width direction is determined on the road on which the vehicle <b>3</b> travels, based on the lane marking lines L on both the left and right sides.</p><p id="p-0057" num="0056">When the determination result of S<b>22</b> is &#x201c;YES&#x201d;, the process proceeds to S<b>24</b>. In S<b>24</b>, it is determined to execute the non-lane section control in the lane reference control. The non-lane section control is a control in which a virtual lane marking line VL is generated for the non-lane section NLS, and the virtual lane marking line VL is used in place of the lane marking line L to perform the lane reference control.</p><p id="p-0058" num="0057">If S<b>23</b> or S<b>24</b> is executed, the process proceeds to S<b>25</b>. S<b>25</b> is a process as a traveling track generation unit. In S<b>25</b>, the lane marking line L or the virtual lane marking VL existing on both sides of the lane in which the vehicle <b>3</b> is traveling is referred to, and a traveling track in which the vehicle <b>3</b> is scheduled to travel is generated. The traveling track may be, for example, the center line in the road width direction of the lane marking line L or the virtual marking line VL existing on both sides of the lane in which the vehicle <b>3</b> is traveling. The length of the traveling track is, for example, several tens of meters to several hundreds of meters.</p><p id="p-0059" num="0058">When it is determined to execute the non-lane section control, the process shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref> is executed. In <figref idref="DRAWINGS">FIG. <b>5</b></figref>, S<b>31</b> is a process as a point specifying unit. In S<b>31</b>, the map position estimation unit <b>163</b> refers to the high-precision map data extracted in S<b>12</b>, and specifies the coordinates of the entry point PIN and the exit point POUT of the non-lane section NLS. As shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, there may be a plurality of exit points POUT. When there are a plurality of exit points POUT in the high-precision map data to be referred to and there are a plurality of travel schedule roads determined in S<b>21</b>, the coordinates of the exit point POUT are specified for each travel schedule road.</p><p id="p-0060" num="0059">S<b>33</b> is a process as a search unit, and, in S<b>33</b>, a lane definition line for conversion is searched using high-precision map data as a search target. The lane definition line is a line that defines the position of the lane in the width direction, and includes the lane marking line L and the road edge line.</p><p id="p-0061" num="0060">Specifically, in S<b>33</b>, the detailed processing shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref> is executed. In S<b>331</b>, the lane marking line L closest to the entry point PIN and the exit point POUT is determined. The distance between the entry point PIN or exit point POUT and the lane marking line L is the shortest distance between the entry point PIN or exit point POUT and the lane marking line L. That is, the radius of the circle when the circle centered on the entry point PIN or exit point POUT is in contact with the lane marking line L is the distance between the entry point PIN or exit point POUT and the lane marking line L.</p><p id="p-0062" num="0061">The entry point PIN and the exit point POUT are set at positions where lane marking lines L are located on both sides of the lane. Therefore, the lane marking line L adjacent to the entry point PIN and the exit point POUT can be determined respectively. Further, normally, the entry point PIN and the exit point POUT are set at the center in the width direction of the lane. Therefore, two lane marking lines L adjacent to the entry point PIN and the exit point POUT are usually determined.</p><p id="p-0063" num="0062">In S<b>332</b>, it is determined whether or not there is a common lane marking line L between the lane marking line L closest to the entry point PIN and the lane marking line L closest to the exit point POUT determined in S<b>331</b>. In other words, it is determined whether or not one of the lane marking lines L closest to the entry point PIN determined in S<b>331</b> and one of the lane marking lines L closest to the exit point POUT are the same. The lane marking lines L closest to the entry point PIN are the lane marking lines L on both the left and right sides that defines the lane in which the entry point PIN is located. Further, the lane marking lines L closest to the exit point POUT are the lane marking lines L on both the left and right sides that defines the lane in which the exit point POUT is located. If the determination result of S<b>332</b> is &#x201c;YES&#x201d;, the process proceeds to S<b>335</b>, and it is determined to adopt the lane marking line L as the lane marking line L for conversion.</p><p id="p-0064" num="0063">In the example of <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the lane marking lines L adjacent to the entry point PIN are the lane marking line L<b>1</b> and the lane marking line L<b>3</b>. When traveling to the left at the branch, the lane marking lines L adjacent to the exit point POUTA are the lane marking line L<b>1</b> and the lane marking line L<b>2</b>. In this case, the lane marking line L<b>1</b> becomes the lane marking line L common to the entry point PIN and the exit point POUTA. Further, when traveling to the right on the branch, the lane marking line L<b>3</b> becomes the lane marking line L common to both the entry point PIN and the exit point POUTA. Therefore, in the case of the example shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the determination result of S<b>332</b> is &#x201c;YES&#x201d;.</p><p id="p-0065" num="0064"><figref idref="DRAWINGS">FIG. <b>7</b></figref> illustrates another non-lane section NLS. The non-lane section NLS shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref> is a non-lane section NLS existing at the exit of the toll road. In <figref idref="DRAWINGS">FIGS. <b>7</b></figref>, L<b>11</b>, L<b>12</b>, L<b>13</b>, L<b>14</b>, L<b>15</b>, and L<b>16</b> are lane marking lines L. It is assumed that the entry point PIN and the exit point POUT shown in the drawing are specified by the process of S<b>31</b>. The lane marking line L closest to the entry point PIN is the lane marking line L<b>11</b> and the lane marking line L<b>15</b>. The lane marking line L closest to the exit point POUT is the lane marking line L<b>12</b> and the lane marking line L<b>13</b>. Therefore, since there is no lane marking line L common to the lane marking line L closest to the entry point PIN and the lane marking line L closest to the exit point POUT, the determination result of S<b>332</b> is &#x201c;NO&#x201d;. If the determination result of S<b>332</b> is &#x201c;NO&#x201d;, the process proceeds to S<b>333</b>.</p><p id="p-0066" num="0065">In S<b>333</b>, it is determined whether or not there is a lane marking line L that is the closest lane marking line L and intersects with the road width direction line WL passing through the other point of the entry point PIN and the exit point POUT. When there is a lane marking line L that is closest to the entry point PIN and intersects the road width direction line WL that passes through the exit point POUT, or there is a lane marking line L that is closest to the exit point POUT and intersects with the road width direction line WL passing through the entry point PIN, the determination result of S<b>333</b> is &#x201c;YES&#x201d;. In the example of <figref idref="DRAWINGS">FIG. <b>7</b></figref>, the lane marking line L<b>11</b> intersects the road width direction line WL. Therefore, in the example of <figref idref="DRAWINGS">FIG. <b>7</b></figref>, the determination result of S<b>333</b> is &#x201c;YES&#x201d;. If the determination result of S<b>333</b> is &#x201c;YES&#x201d;, the process proceeds to S<b>335</b>, and it is determined to adopt the lane marking line L as the lane marking line L for conversion.</p><p id="p-0067" num="0066">If the determination result of S<b>333</b> is &#x201c;NO&#x201d;, the process proceeds to S<b>334</b>. In S<b>334</b>, it is determined whether or not there is a lane marking line L that intersects both the road width direction line WL passing through the entry point PIN and the road width direction line WL passing through the exit point POUT. <figref idref="DRAWINGS">FIG. <b>8</b></figref> illustrates an non-lane section NLS different from that of <figref idref="DRAWINGS">FIGS. <b>2</b> and <b>7</b></figref>.</p><p id="p-0068" num="0067">In <figref idref="DRAWINGS">FIGS. <b>8</b></figref>, L<b>21</b>, L<b>22</b>, L<b>23</b>, L<b>24</b>, L<b>25</b>, L<b>26</b>, L<b>27</b>, and L<b>28</b> are lane marking lines L. It is assumed that the entry point PIN and the exit point POUT shown in the drawing are specified by the process of S<b>31</b>. The lane marking line L closest to the entry point PIN is the lane marking line L<b>22</b> and the lane marking line L<b>23</b>. The lane marking line L closest to the exit point POUT is the lane marking line L<b>25</b> and the lane marking line L<b>26</b>. In the example shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref>, since there is no lane marking line L common to the lane marking line L closest to the entry point PIN and the lane marking line L closest to the exit point POUT, the determination result of S<b>332</b> is &#x201c;NO&#x201d;. Further, for these lane marking lines L<b>22</b>, L<b>23</b>, L<b>25</b>, and L<b>26</b>, the determination result of S<b>333</b> is also &#x201c;NO&#x201d;.</p><p id="p-0069" num="0068">Therefore, in the case of the example of <figref idref="DRAWINGS">FIG. <b>8</b></figref>, the determination in S<b>334</b> is executed. In the example of <figref idref="DRAWINGS">FIG. <b>8</b></figref>, the lane marking line L<b>21</b> is a lane marking line L that intersects the two road width direction lines WL. Further, the lane marking line L<b>28</b> is also a lane marking line L that intersects with the two road width direction lines WL. As described above, when there are a plurality of lane marking lines L for which the determination result of S<b>334</b> is &#x201c;YES&#x201d;, the lane marking line L close to the entry point PIN is adopted. Alternatively, the lane marking line L near the exit point POUT may be adopted.</p><p id="p-0070" num="0069">If the determination result of S<b>334</b> is &#x201c;NO&#x201d;, the process proceeds to S<b>336</b>. In S<b>336</b>, it is determined to adopt the road edge line as the lane definition line for conversion. There are two road edge lines on the left and right sides, but in S<b>336</b>, the road edge line on the side closer to the entry point PIN and the exit point POUT is adopted. For example, in the example of <figref idref="DRAWINGS">FIG. <b>8</b></figref>, it is assumed that the lane marking lines L<b>21</b> and L<b>28</b> are not the lane marking lines L but the road edge lines. In this case, the road edge line at the position of the lane marking line L<b>21</b> is adopted.</p><p id="p-0071" num="0070">The description is returned to <figref idref="DRAWINGS">FIG. <b>5</b></figref>. After searching for the lane definition line for conversion in S<b>33</b>, the process proceeds to S<b>34</b>. S<b>34</b> is a process as a virtual lane marking generation unit, and generates a virtual lane marking line VL. The processing of S<b>34</b> is shown in detail in <figref idref="DRAWINGS">FIG. <b>9</b></figref>. In <figref idref="DRAWINGS">FIG. <b>9</b></figref>, in S<b>341</b>, the connection point PC to which the virtual lane marking VL is connected is determined. The connection point PC may be the point that is prepared by shifting the entry point PIN and the exit point POUT in the road width direction so as to overlap the lane marking line L that is not continuous between the entry point PIN and the exit point POUT. Further, it may be an end point on the NLS side of the non-lane section in the lane marking line L. <figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates the connection point PC in the former case. <figref idref="DRAWINGS">FIG. <b>7</b></figref> illustrates a connection point PC in the latter case.</p><p id="p-0072" num="0071">In S<b>342</b>, a line segment for conversion is determined. The line segment for conversion is a line segment separated by the road width direction line WL passing through the connection point PC determined in S<b>341</b> among the lane definition lines for conversion searched in S<b>33</b>.</p><p id="p-0073" num="0072">In S<b>343</b>, the line segment for conversion determined in S<b>342</b> is converted, and the virtual lane marking line VL connected between the two connection point PCs determined in S<b>341</b> is determined. For the conversion process, for example, parallel movement, rotation movement, and enlargement/reduction processing are used. The enlargement/reduction processing may include not only scaling with the same vertical and horizontal ratios, but also scaling with different vertical and horizontal ratios. In addition, if the curve of the virtual lane marking line VL is not smooth, a smoothing process may be added.</p><p id="p-0074" num="0073"><figref idref="DRAWINGS">FIG. <b>2</b></figref>, <figref idref="DRAWINGS">FIG. <b>7</b></figref>, and <figref idref="DRAWINGS">FIG. <b>8</b></figref> show the virtual lane marking line VL determined in S<b>343</b>, respectively. In <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the end of the lane marking line L<b>2</b> on the non-lane section NLS side protrudes from the virtual lane marking line VL to the non-lane section NLS side. The portion protruding toward the NLS side of the non-lane section from the virtual lane marking line VL corresponding to the line L<b>2</b> is treated as not existing in terms of control.</p><p id="p-0075" num="0074">Next, the process executed by the traveling control unit <b>165</b> will be described. The travel control unit <b>165</b> executes lane reference control. In the lane reference control, the vehicle <b>3</b> is controlled so that the vehicle <b>3</b> travels along the traveling track generated in S<b>25</b>.</p><p id="p-0076" num="0075"><figref idref="DRAWINGS">FIG. <b>10</b></figref> shows a process executed by the traveling control unit <b>165</b> when it is determined in S<b>24</b> of <figref idref="DRAWINGS">FIG. <b>4</b></figref> to execute the non-lane section control.</p><p id="p-0077" num="0076">In S<b>41</b>, the distance from the current position of the vehicle <b>3</b> and the high-precision map data to the start point of the non-lane section NLS is calculated. In S<b>42</b>, it is determined whether or not the entry point PIN has been passed. If the decision result at S<b>42</b> is NO, the process returns to S<b>41</b>. While repeating S<b>41</b> to S<b>42</b>, the lane section control is executed. On the other hand, when the determination result of S<b>42</b> is YES, the process proceeds to S<b>43</b>.</p><p id="p-0078" num="0077">In S<b>43</b>, the non-lane section control, that is, the traveling control using the virtual lane marking line VL set in advance before entering the non-lane section NLS as the lane marking line L is started. In S<b>44</b>, it is determined whether or not the vehicle <b>3</b> has passed the exit point POUT. If the determination result of S<b>44</b> is NO, the determination of S<b>44</b> is executed again while continuing the non-lane section control. If the determination result of S<b>44</b> becomes YES, the process proceeds to S<b>45</b>. In S<b>45</b>, it returns to the lane section control.</p><heading id="h-0009" level="1">Summary of Embodiment</heading><p id="p-0079" num="0078">The vehicle control device <b>100</b> of the present embodiment described above specifies the entry point PIN and the exit point POUT of the non-lane section NLS (at S<b>31</b>), and searches for the lane definition line to generate the virtual lane marking line VL based on the entry point PIN and the exit point POUT (at S<b>33</b>). Then, based on the searched lane definition line, a virtual lane marking line VL that connects the lane marking line L on the entry side and the lane marking line L on the exit side of the non-lane section NLS is generated (at S<b>34</b>).</p><p id="p-0080" num="0079">In S<b>25</b>, this virtual lane marking line VL is treated in the same manner as the lane marking line L that actually exists to generate a traveling track. Therefore, even if there is a non-lane section NLS, it is possible to generate a traveling track in the same manner as in a section where there is actually a lane marking line L.</p><p id="p-0081" num="0080">Further, since the vehicle control device <b>100</b> does not store the virtual lane marking line VL in the high-precision map data, it is possible to suppress an increase in the map data capacity.</p><p id="p-0082" num="0081">Further, the vehicle control device <b>100</b> determines whether or not there is a non-lane section NLS on the travel schedule road of the vehicle <b>3</b> while the vehicle <b>3</b> is traveling (at S<b>22</b>), and generates the virtual lane marking VL with respect to the non-lane section NLS on the travel schedule road. By doing so, the amount of calculation can be reduced as compared with the case where the virtual lane marking VL is generated even for the non-lane section NLS on the road on which the vehicle <b>3</b> does not travel.</p><p id="p-0083" num="0082">Further, in the present embodiment, the entry point PIN and the exit point POUT of the non-lane section NLS are stored in the high-precision map data, and when the virtual lane marking line VL is generated, the entry point PIN and the exit point POUT are specified by referring to the high-precision map data. Therefore, the virtual lane marking line VL can be generated more quickly than in the case where the process of setting the entry point PIN and the exit point POUT is required during traveling.</p><heading id="h-0010" level="1">Second Embodiment</heading><p id="p-0084" num="0083">The second embodiment is different from the first embodiment in the method of specifying the exit point POUT. In the first embodiment, if the road on which the vehicle <b>3</b> travels has a branch and the route guidance is not executed, a plurality of travel schedule roads to pass through each of the branched roads are determined. Then, when there are a plurality of travel schedule roads, the coordinates of the exit point POUT are specified for each travel schedule road, and the virtual lane marking line VL is generated for each of all the specified exit points POUT.</p><p id="p-0085" num="0084">On the other hand, in the second embodiment, when there are a plurality of exit point candidates, one exit point POUT is specified from the plurality of exit point candidates. The exit point candidate is a candidate for the exit point POUT to be combined with the entry point PIN to generate the line VL. The exit point candidate is an exit point POUT that can be combined with the entry point PIN when the entry point PIN is determined.</p><p id="p-0086" num="0085">The exit point POUT that can be combined with the entry point PIN is the exit point POUT on the opposite side of the entry point PIN with one non-lane section NLS therebetween. The two exit points POUTA and POUTB shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref> are both exit points POUT that can be combined with the entry point PIN shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>. Although only one exit point POUT is shown in <figref idref="DRAWINGS">FIGS. <b>7</b> and <b>8</b></figref>, the exit point POUT also exists in the lane next to the exit point POUT shown in those drawings. For example, in <figref idref="DRAWINGS">FIG. <b>7</b></figref>, the exit point POUT also exists in the lane defined by the lane marking lines L<b>11</b> and L<b>12</b>. The entry point PIN shown in <figref idref="DRAWINGS">FIGS. <b>7</b> and <b>8</b></figref> also have a plurality of exit points POUT that can be combined.</p><p id="p-0087" num="0086"><figref idref="DRAWINGS">FIG. <b>11</b></figref> shows the processing of the point specifying unit in the second embodiment. The process shown in <figref idref="DRAWINGS">FIG. <b>11</b></figref> is executed in S<b>31</b> of <figref idref="DRAWINGS">FIG. <b>5</b></figref>. In S<b>311</b>, the coordinates of the entry point PIN on the latest travel schedule road are specified. The method of specifying the coordinates of the entry point PIN is the same as that of S<b>31</b> of the first embodiment.</p><p id="p-0088" num="0087">In S<b>312</b>, it is determined whether or not there are a plurality of exit point candidates. The exit point candidate here is an exit point POUT that can be combined with the entry point PIN determined in S<b>311</b>. If the determination result of S<b>312</b> is &#x201c;NO&#x201d;, the process proceeds to S<b>313</b>.</p><p id="p-0089" num="0088">When proceeding to S<b>313</b>, only one exit point candidate can be combined with the entry point PIN specified in S<b>311</b>. In S<b>313</b>, the exit point candidate is specified as an exit point POUT used for searching the lane definition line.</p><p id="p-0090" num="0089">When the determination result of S<b>312</b> is &#x201c;YES&#x201d;, the process proceeds to S<b>314</b>. In S<b>314</b>, the route guidance is executed in the vehicle <b>3</b>, and it is determined whether or not the guidance route used in the route guidance can be acquired. The guidance route can be obtained from, for example, a route guidance device mounted on the vehicle <b>3</b>. Further, the guidance route may be acquired from an information terminal having a route guidance function, for example, a smartphone, which is brought into the vehicle <b>3</b> and used. When the determination result of S<b>314</b> is &#x201c;YES&#x201d;, the process proceeds to S<b>315</b>.</p><p id="p-0091" num="0090">In S<b>315</b>, the guide route is acquired, and it is determined whether or not there is one exit point POUT that is most suitable for the guide route among the plurality of exit point candidates. The optimum exit point POUT for the guidance route will be specifically described. In the example of <figref idref="DRAWINGS">FIG. <b>2</b></figref>, when the guide route is a path traveling to the left on the branch, the exit point POUTA becomes the optimum exit point POUT for the guide route. In the example of <figref idref="DRAWINGS">FIG. <b>7</b></figref>, there are a plurality of exit point candidates before the toll gate. Even if the route guidance is provided, it is usually not decided which toll gate is the most suitable for the route guidance. Therefore, in the example of <figref idref="DRAWINGS">FIG. <b>7</b></figref>, it may be determined that there is no optimum exit point POUT for the guide route.</p><p id="p-0092" num="0091">It should be noted that, based on the direction indicated by the guidance route after passing through the toll gate, one exit point POUT optimal for the guidance route may be determined from a plurality of exit point candidates before the toll gate. Specifically, if the guidance route after passing through the toll gate indicates a straight direction, the exit point POUT in the lane in which the vehicle <b>3</b> travels straight at the entry point PIN may be the optimum exit point POUT for the guidance route. If it is shown that the guidance route after passing through the toll gate goes to the right, the rightmost exit point candidate among the plurality of exit point candidates is set as the optimum exit point POUT for the guidance route. If it is shown that the guidance route after passing through the toll gate goes to the left, the leftmost exit point candidate among the plurality of exit point candidates is set as the optimum exit point POUT for the guidance route.</p><p id="p-0093" num="0092">In the example of <figref idref="DRAWINGS">FIG. <b>8</b></figref>, the non-lane section NLS and the sections before and after the non-lane section NLS are straight roads. The guide route in the section shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref> may often indicate a straight travel. When the guide route in the section shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref> indicates the straight travel, the exit point POUT in the lane in which the vehicle travels when traveling straight on the entry point PIN specified in S<b>311</b> may be set as the optimum exit point POUT for the guide route. Here, if the guidance route indicates that the vehicle will turn left or right within a predetermined distance, the exit point POUT next to the lane going straight may be the optimum exit point for the guidance route. Further, since the road shown in <figref idref="DRAWINGS">FIG. <b>8</b></figref> has no branching or merging, it can be considered that any exit point POUT may be passed. That is, in the example of <figref idref="DRAWINGS">FIG. <b>8</b></figref>, it may be determined that there is no one optimum exit point POUT for the guide route.</p><p id="p-0094" num="0093">When the determination result of S<b>315</b> is &#x201c;YES&#x201d;, the process proceeds to S<b>316</b>. In S<b>316</b>, one of the plurality of exit point candidates, which is most suitable for the guide route, is selected as the exit point POUT used for searching the lane definition line.</p><p id="p-0095" num="0094">In the processing of S<b>314</b> to S<b>316</b>, as a rule for selecting one exit point from a plurality of exit point candidates (hereinafter referred to as an exit point selection rule), if a guide route can be acquired, an exit point POUT suitable for the guide route is selected. It means that the exit point selection rule of such is applied.</p><p id="p-0096" num="0095">If the determination result of S<b>314</b> is &#x201c;NO&#x201d;, the process proceeds to S<b>317</b>. In S<b>317</b>, the exit point candidate in which the most vehicles are estimated to travel among the plurality of exit point candidates is selected as the exit point POUT used for searching the lane definition line. In this case, as the exit point selection rule, the exit point selection rule of selecting the exit point POUT where the most vehicles are estimated to travel is applied from among the plurality of exit candidate points.</p><p id="p-0097" num="0096">A plurality of methods for selecting the exit point POUT, which is estimated that the most vehicles travel, will be described. The method described below can be used alone or in combination of a plurality of methods.</p><p id="p-0098" num="0097">The first method is a method in which the exit point POUT estimated to be traveled by the largest number of vehicles is determined in advance for each approach point PIN. The exit point POUT, which is estimated to be travelled by the most vehicles, is determined in advance by the server <b>20</b>.</p><p id="p-0099" num="0098">The server <b>20</b> collects the travel trajectories of a large number of vehicles, and determines the exit point POUT on which the most vehicles travel among the plurality of exit point candidates for each entry point PIN based on the collected travel trajectories. Then, the information is included in the high-precision map data to be delivered to the vehicle <b>3</b>. In S<b>317</b>, one exit point POUT is selected with reference to the high-precision map data.</p><p id="p-0100" num="0099">A second method of selecting the exit point POUT, which is estimated to be travelled by the most vehicles among the plurality of exit point candidates, will be described. The second method is a method in which a lane type is included in the high-precision map data, and the exit point POUT estimated to be traveled by the largest number of vehicles is selected by using the lane type. An example of a lane type is the main lane. When the main lane is included as the lane type, the lane type can be used to distinguish between the main lane and lanes other than the main lane. There are branch lanes in lane types other than the main lane. Other examples of lane types other than the main lane include acceleration lanes, deceleration lanes, and climbing lanes. When the main lane and the non-main lane can be distinguished by the lane type, the exit point POUT on the main lane is set as the exit point POUT where the most vehicles are estimated to travel.</p><p id="p-0101" num="0100">The third method is a method in which the exit point POUT capable of traveling with the least kinetic energy among the plurality of exit point candidates is set as the exit point POUT estimated to be traveled by the largest number of vehicles. The exit point POUT where the degree to which the vehicle traveling to the entry point PIN changes the traveling direction is the smallest may be set as the exit point POUT which requires the least kinetic energy. Further, if there is a height difference between the plurality of exit point candidates, the exit point POUT with the smallest height difference from the entry point PIN may be set as the exit point POUT with the least kinetic energy.</p><p id="p-0102" num="0101">The first method, the second method, and the third method may be used in combination. For example, when the exit point POUT estimated to be travelled by many vehicles cannot be selected by the first method, the second method and the third method may be used in order. Alternatively, the third method may be used when the exit point POUT, which is estimated to be travelled by many vehicles, cannot be selected by the first method.</p><p id="p-0103" num="0102">Alternatively, only the third method may be used in S<b>317</b>. The third method may also be used as an exit point selection rule different from the rule for selecting the exit point POUT where the most vehicles are estimated to travel.</p><p id="p-0104" num="0103">When the exit point POUT is specified or selected in S<b>313</b>, S<b>316</b>, and S<b>317</b>, the process proceeds to S<b>33</b> in <figref idref="DRAWINGS">FIG. <b>5</b></figref>. After S<b>33</b>, the same processing as in the first embodiment is executed.</p><p id="p-0105" num="0104">In this second embodiment, when there are a plurality of exit point candidates (&#x201c;YES&#x201d; in S<b>312</b>), one exit point POUT is selected from the plurality of exit point candidates based on a preset exit point selection rule. When there are a plurality of exit point candidates, the amount of calculation can be suppressed rather than generating a virtual lane marking line VL for all the exit point candidates.</p><p id="p-0106" num="0105">Although the embodiments have been described above, the disclosed technology is not limited to the above-described embodiment, and the following modifications are included in the present disclosure, and various modifications can be made without departing from the spirit of the present disclosure. In the following description, elements having the same reference symbols as those used so far are the same as elements having the same reference symbols in the above embodiment, except when specifically mentioned. When only a part of the configuration is described, the embodiment described above can be applied to other parts of the configuration.</p><heading id="h-0011" level="1">First Modification</heading><p id="p-0107" num="0106">In the embodiment, the entry point PIN and the exit point POUT of the non-lane section NLS are stored in the high-precision map data. Alternatively, the entry point PIN and the exit point POUT may be determined based on the position of the lane marking line L stored in the high-precision map data.</p><p id="p-0108" num="0107">For example, the position of the entry point PIN in the road longitudinal direction is set to a position where the non-lane section NLS starts, that is, a position where the lane marking line L is interrupted, or a position before a predetermined distance from that position. The position of the entry point PIN in the road width direction may be the center in the width direction of the lane. Similarly, the position of the exit point POUT in the road longitudinal direction is set to a position where the non-lane section NLS ends, that is, a position where the lane marking line L re-starts, or a position advanced by a predetermined distance from that position. The position of the exit point POUT in the road width direction is the center in the width direction of the lane.</p><p id="p-0109" num="0108">By doing so, it is not necessary to store the entry point PIN and the exit point POUT in the high-precision map data. Therefore, the data capacity of the high-precision map data can be further reduced.</p><heading id="h-0012" level="1">Second Modification</heading><p id="p-0110" num="0109">In the embodiment, an example in which the vehicle control device <b>100</b> mounted on the vehicle <b>3</b> functions as a traveling track generation device has been described. Alternatively, the traveling track generation device may not be mounted on the vehicle <b>3</b>. For example, the server <b>20</b> may function as a traveling track generation device. Further, the traveling track may not need to be generated while the vehicle <b>3</b> is traveling, and the traveling track may be generated before traveling.</p><heading id="h-0013" level="1">Third Modification</heading><p id="p-0111" num="0110">The control unit <b>160</b> and the method described in the present disclosure may be implemented by a special purpose computer including a processor programmed to perform one or more functions embodied by a computer program. Alternatively, the control unit <b>160</b> and the method described in the present disclosure may be implemented by a dedicated hardware logic circuit. Alternatively, the control unit <b>160</b> and the method described in the present disclosure may be implemented by one or more dedicated computers configured by a combination of a processor executing a computer program and one or more hardware logic circuits. The hardware logic circuits may be, for example, ASIC or FPGA.</p><p id="p-0112" num="0111">The storage medium for storing the computer program is not limited to ROM. Alternatively, the computer program may be stored in a computer-readable, non-transitory tangible storage medium as instructions to be executed by a computer. For example, the program may be stored in a flash memory.</p><p id="p-0113" num="0112">The controllers and methods described in the present disclosure may be implemented by a special purpose computer created by configuring a memory and a processor programmed to execute one or more particular functions embodied in computer programs. Alternatively, the controllers and methods described in the present disclosure may be implemented by a special purpose computer created by configuring a processor provided by one or more special purpose hardware logic circuits. Alternatively, the controllers and methods described in the present disclosure may be implemented by one or more special purpose computers created by configuring a combination of a memory and a processor programmed to execute one or more particular functions and a processor provided by one or more hardware logic circuits. The computer programs may be stored, as instructions being executed by a computer, in a tangible non-transitory computer-readable medium.</p><p id="p-0114" num="0113">It is noted that a flowchart or the processing of the flowchart in the present application includes sections (also referred to as steps), each of which is represented, for instance, as S<b>11</b>. Further, each section can be divided into several sub-sections while several sections can be combined into a single section. Furthermore, each of thus configured sections can be also referred to as a device, module, or means.</p><p id="p-0115" num="0114">While the present disclosure has been described with reference to embodiments thereof, it is to be understood that the disclosure is not limited to the embodiments and constructions. The present disclosure is intended to cover various modification and equivalent arrangements. In addition, while the various combinations and configurations, other combinations and configurations, including more, less or only a single element, are also within the spirit and scope of the present disclosure.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A travelling track generation device comprising:<claim-text>a point specifying unit that specifies an entry point and an exit point in a non-lane section in which no lane marking line is disposed on at least one of a right side and a left side in a width direction of a road, and a traffic lane is not defined by a lane marking line;</claim-text><claim-text>a search unit that searches for a lane definition line that is continuous in a longitudinal direction of the road from a side of the entry point to a side of the exit point specified by the point specifying unit;</claim-text><claim-text>a virtual lane marking line generation unit that generates a virtual lane marking line connecting between the lane marking line on an entry side and the lane marking line on an exit side corresponding to the entry point and the exit point, based on the lane definition line detected as a search result of the search unit; and</claim-text><claim-text>a travelling track generation unit that generates a travelling track as a trajectory on which a vehicle is scheduled to travel, based on the virtual lane marking line, wherein:</claim-text><claim-text>the search unit determines whether the lane marking line closest to the entry point and the lane marking line closest to the exit point are a same marking line; and</claim-text><claim-text>when the lane marking line closest to the entry point and the lane marking line closest to the exit point are the same lane marking line, the virtual lane marking line generation unit generates the virtual lane marking line using the same lane marking line.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The travelling track generation device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:<claim-text>a non-lane section determination unit that determines whether a travel schedule road of the vehicle includes the non-lane section while the vehicle is traveling, wherein:</claim-text><claim-text>when the non-lane section determination unit determines that the travel schedule road includes the non-lane section, the virtual lane marking line generation unit generates the virtual lane marking line with respect to the non-lane section.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The travelling track generation device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:<claim-text>coordinates of the entry point and the exit point are stored in a map data; and</claim-text><claim-text>the point specifying unit specifies the entry point and the exit point according to the map data.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The travelling track generation device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:<claim-text>a map data stores a position of the lane marking line; and</claim-text><claim-text>the point specifying unit specifies the entry point and the exit point of the non-lane section based on the position of the lane marking line stored in the map data.</claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The travelling track generation device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:<claim-text>when there are a plurality of exit points that are combined with the entry point, the point specifying unit specifies one of the exit points from the plurality of exit points based on a predetermined exit point selection rule.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The travelling track generation device according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein:<claim-text>the exit point selection rule includes a rule for selecting the exit point that matches a guidance route when the guidance route for guiding the vehicle is acquired.</claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The travelling track generation device according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein:<claim-text>the exit point selection rule includes a rule for selecting the exit point that is estimated to be travelled by most vehicles.</claim-text></claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The travelling track generation device according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein:<claim-text>when the plurality of exit points that are combined with the entry point include the exit point on a main lane and the exit point other than the main lane, the exit point on the main lane is set to be the exit point that is estimated to be travelled by the most vehicles.</claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The travelling track generation device according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein:<claim-text>the exit point selection rule includes a rule of selecting the exit point that has a minimum degree with which the vehicle traveling to the entry point changes a traveling direction, among the plurality of exit points that are combined with the entry point.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The travelling track generation device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:<claim-text>the search unit searches the lane definition line using a map data as a search target along a road width direction at the entry point and the exit point.</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The travelling track generation device according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein:<claim-text>when the lane marking line closest to the entry point and the lane marking line closest to the exit point are not the same lane marking line, the search unit determines whether the lane marking line closest to one of the entry point and the exit point intersects with a road width direction line passing through the other of the entry point and the exit point; and</claim-text><claim-text>when the lane marking line closest to one of the entry point and the exit point intersects with the road width direction line passing through the other of the entry point and the exit point, the virtual lane marking line generation unit generates the virtual lane marking line using the lane marking line closest to the one of the entry point and the exit point.</claim-text></claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The travelling track generation device according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein:<claim-text>when the lane marking line closest to one of the entry point and the exit point does not intersect with the road width direction line passing through the other of the entry point and the exit point, the search unit determines whether a lane marking line exists to intersect with both the road width direction line passing through the entry point and the road width direction line passing through the exit point; and</claim-text><claim-text>when the lane marking line exists to intersect with both the road width direction line passing through the entry point and the road width direction line passing through the exit point, the virtual lane marking line generation unit generates the virtual lane marking line using the lane marking line intersecting with both the road width direction lines.</claim-text></claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The travelling track generation device according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein:<claim-text>when the lane marking line does not exist to intersect with both the road width direction line passing through the entry point and the road width direction line passing through the exit point, the virtual lane marking line generation unit generates the virtual lane marking line using one of road edge lines closer to the entry point and the exit point between the road edge lines disposed on a right side and a left side of the road.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The travelling track generation device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:<claim-text>one or more processors; and</claim-text><claim-text>a memory coupled to the one or more processors and storing program instructions that when executed by the one or more processors cause the one or more processors to provide at least: the point specifying unit; the search unit; the virtual lane marking line generation unit; and the travelling track generation unit.</claim-text></claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. A travelling track generation method comprising:<claim-text>specifying an entry point and an exit point in a non-lane section in which no lane marking line is disposed on at least one of a right side and a left side in a width direction of a road, and a traffic lane is not defined by a lane marking line;</claim-text><claim-text>searching for a lane definition line that is continuous in a longitudinal direction of the road from a side of a specified entry point to a side of a specified exit point;</claim-text><claim-text>generating a virtual lane marking line connecting between the lane marking line on an entry side and the lane marking line on an exit side corresponding to the entry point and the exit point, based on the lane definition line detected as a search result; and</claim-text><claim-text>generating a travelling track as a trajectory on which a vehicle is scheduled to travel, based on the virtual lane marking line, wherein:</claim-text><claim-text>the searching includes: determining whether the lane marking line closest to the entry point and the lane marking line closest to the exit point are a same marking line; and</claim-text><claim-text>the generating of the virtual lane marking line includes: generating the virtual lane marking line using the same lane marking line when the lane marking line closest to the entry point and the lane marking line closest to the exit point are the same lane marking line.</claim-text></claim-text></claim></claims></us-patent-application>