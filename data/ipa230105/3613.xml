<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230003614A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230003614</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17944517</doc-number><date>20220914</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>M</subclass><main-group>11</main-group><subgroup>00</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>02</class><subclass>B</subclass><main-group>6</main-group><subgroup>122</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>02</class><subclass>B</subclass><main-group>6</main-group><subgroup>12</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>M</subclass><main-group>11</main-group><subgroup>31</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>M</subclass><main-group>11</main-group><subgroup>33</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>02</class><subclass>B</subclass><main-group>6</main-group><subgroup>122</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>02</class><subclass>B</subclass><main-group>6</main-group><subgroup>12004</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">Characterizing Integrated Photonics Devices</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>17011401</doc-number><date>20200903</date></document-id><parent-grant-document><document-id><country>US</country><doc-number>11460372</doc-number></document-id></parent-grant-document></parent-doc><child-doc><document-id><country>US</country><doc-number>17944517</doc-number></document-id></child-doc></relation></continuation></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Ciena Corporation</orgname><address><city>Hanover</city><state>MD</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Simard</last-name><first-name>Alexandre D.</first-name><address><city>Quebec</city><country>CA</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Poulin</last-name><first-name>Michel</first-name><address><city>Quebec</city><country>CA</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>Latrasse</last-name><first-name>Christine</first-name><address><city>Quebec</city><country>CA</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">An integrated circuit comprises: at least one photonic layer that includes one or more optical waveguides; a first optical coupler that couples at least a first optical mode outside of the photonic layer to a first waveguide in the photonic layer; a photonic device that includes one or more ports in the photonic layer; a first multi-port optical coupler that includes three or more ports in the photonic layer, including a first port optically coupled to the first optical coupler, a second port optically coupled to a first port of the photonic device, and a third port optically coupled to a first optical reflector configured to send substantially all optical power emitted from the third port of the first multi-port optical coupler back to the third port of the first multi-port optical coupler.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="103.80mm" wi="158.75mm" file="US20230003614A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="221.49mm" wi="142.66mm" file="US20230003614A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="236.30mm" wi="116.50mm" orientation="landscape" file="US20230003614A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="224.20mm" wi="162.90mm" orientation="landscape" file="US20230003614A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="232.92mm" wi="150.20mm" file="US20230003614A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="190.08mm" wi="142.32mm" file="US20230003614A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="199.98mm" wi="173.14mm" orientation="landscape" file="US20230003614A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="241.98mm" wi="160.87mm" orientation="landscape" file="US20230003614A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="241.98mm" wi="160.87mm" orientation="landscape" file="US20230003614A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="241.98mm" wi="162.64mm" orientation="landscape" file="US20230003614A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="199.98mm" wi="173.14mm" orientation="landscape" file="US20230003614A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00011" num="00011"><img id="EMI-D00011" he="208.28mm" wi="162.90mm" orientation="landscape" file="US20230003614A1-20230105-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00012" num="00012"><img id="EMI-D00012" he="174.84mm" wi="103.38mm" file="US20230003614A1-20230105-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATION(S)</heading><p id="p-0002" num="0001">This application is a continuation of and claims the benefit of U.S. Provisional Application Patent Ser. No. 17/011,401, filed Sep. 3, 2020, which is incorporated herein by reference.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">TECHNICAL FIELD</heading><p id="p-0003" num="0002">This disclosure relates to characterizing integrated photonics devices.</p><heading id="h-0003" level="1">BACKGROUND</heading><p id="p-0004" num="0003">Photonic integrated circuits (PICs) often include a variety of photonic devices and optical waveguides for transporting optical waves around into and out of such devices (e.g., splitters, modulators, interferometers, resonators, multimode interference (MMI) couplers, photodetectors, etc.). A waveguide is a structure that confines and guides the propagation of an electromagnetic wave. Some electromagnetic waves have a spectrum that has a peak wavelength that falls in a particular range of optical wavelengths (e.g., between about 100 nm to about 1 mm, or some subrange thereof), also referred to as &#x201c;optical waves,&#x201d; &#x201c;light waves,&#x201d; or simply &#x201c;light,&#x201d; and waveguides for light will be referred to herein as &#x201c;optical waveguides&#x201d;. These optical waveguides may be implemented, for example, by forming a core structure from a material having a higher refractive index (e.g., silicon, or silicon nitride) surrounded by a cladding (also called a &#x201c;buffer&#x201d;) comprising one or more materials (or air) that have a lower refractive index. For example, the core structure may be formed by the silicon layer over a buried oxide (BOX) layer (e.g., silicon dioxide) of a substrate, such as a silicon-on-insulator (SOI) wafer, while the cladding would be formed by the oxide of the BOX layer and the silicon dioxide deposited on top of the core structure. The cladding may in some cases be formed by a single lower-index material (or air), or by multiple different lower-index materials (or air). In some cases, there may be losses associated with coupling light into or out of optical waveguides within a PIC, and such losses may limit the ability to accurately characterize photonic devices in the PIC.</p><heading id="h-0004" level="1">SUMMARY</heading><p id="p-0005" num="0004">In one aspect, in general, an integrated circuit comprises: at least one photonic layer that includes one or more optical waveguides; a first optical coupler that couples at least a first optical mode outside of the photonic layer to a first waveguide in the photonic layer; a photonic device that includes one or more ports in the photonic layer; a first multi-port optical coupler that includes three or more ports in the photonic layer, including a first port optically coupled to the first optical coupler, a second port optically coupled to a first port of the photonic device, and a third port optically coupled to a first optical reflector configured to send substantially all optical power emitted from the third port of the first multi-port optical coupler back to the third port of the first multi-port optical coupler.</p><p id="p-0006" num="0005">Aspects can include one or more of the following features.</p><p id="p-0007" num="0006">The integrated circuit further comprises: a second optical coupler that couples at least a second optical mode outside of the photonic layer to a second waveguide in the photonic layer; and a second multi-port optical coupler that includes three or more ports in the photonic layer, including a first port optically coupled to the second optical coupler, a second port optically coupled to a second port of the photonic device, and a third port optically coupled to a second optical reflector configured to send substantially all optical power emitted from the third port of the second multi-port optical coupler back to the third port of the second multi-port optical coupler.</p><p id="p-0008" num="0007">The photonic device includes the first port, the second port, a third port that provides an alternative path for input received at the first port, and a fourth port that provides an alternative path for output emitted from the second port.</p><p id="p-0009" num="0008">The integrated circuit further comprises: a third optical coupler that couples a third optical mode outside of the photonic layer to a third waveguide in the photonic layer; and a third multi-port optical coupler that includes three or more ports in the photonic layer, including a first port optically coupled to the third optical coupler, a second port optically coupled to a third port of the photonic device, and a third port optically coupled to a third optical reflector configured to send substantially all optical power emitted from the third port of the third multi-port optical coupler back to the third port of the third multi-port optical coupler.</p><p id="p-0010" num="0009">The integrated circuit further comprises: a second optical coupler that couples a second optical mode outside of the photonic layer to a second waveguide in the photonic layer; a third optical coupler that couples a third optical mode outside of the photonic layer to a third waveguide in the photonic layer; a second multi-port optical coupler that includes three or more ports in the photonic layer, including a first port optically coupled to the second optical coupler, a second port isolated from the photonic device, and a third port optically coupled to a second optical reflector configured to send substantially all optical power emitted from the third port of the second multi-port optical coupler back to the third port of the second multi-port optical coupler; and a third multi-port optical coupler that includes three or more ports in the photonic layer, including a first port optically coupled to the third optical coupler, a second port optically isolated from the photonic device and coupled to the second port of the second multi-port optical coupler, and a third port optically coupled to a third optical reflector configured to send substantially all optical power emitted from the third port of the third multi-port optical coupler back to the third port of the third multi-port optical coupler.</p><p id="p-0011" num="0010">The photonic device comprises an electro-optical component that includes at least one optical input or output port and at least one electrical input or output port.</p><p id="p-0012" num="0011">The electro-optical component comprises a photodiode.</p><p id="p-0013" num="0012">The first optical coupler comprises a grating coupler or an edge coupler.</p><p id="p-0014" num="0013">The photonic layer includes one or more optical delay lines configured to provide different propagation delays: (1) between the first multi-port optical coupler and the first optical reflector, and (2) between the first multi-port optical coupler and the photonic device.</p><p id="p-0015" num="0014">The first optical reflector comprises a Sagnac loop reflector.</p><p id="p-0016" num="0015">The photonic layer includes one or more variable optical attenuators configured to provide control of optical power propagating within different portions of the photonic layer.</p><p id="p-0017" num="0016">The integrated circuit further comprises: a second optical coupler that couples a second optical mode outside of the photonic layer to a second waveguide in the photonic layer that is optically coupled to the first port of the photonic device and optically coupled to the second port of the first multi-port optical coupler; and a third optical coupler that couples a third optical mode outside of the photonic layer to a third waveguide in the photonic layer that is optically coupled to a second port of the photonic device and optically coupled to the second port of the first multi-port optical coupler; wherein the second port of the first multi-port optical coupler is optically coupled to the first port of the photonic device by receiving a portion of an optical wave that is received by the second optical coupler and at least partially transmitted to the first port of the photonic device.</p><p id="p-0018" num="0017">In another aspect, in general, a method for characterizing a photonic device in a photonic layer of an integrated circuit comprises: coupling an optical wave into a first optical coupler in the photonic layer; providing an output signal from the photonic device in response to the photonic device receiving a first portion of the optical wave; providing a second portion of the optical wave from the first optical coupler, wherein the second portion of the optical wave was not coupled into the photonic device; and characterizing at least one of an optical transmission characteristic or an optical reflection characteristic of the photonic device based at least in part on the second portion of the optical wave and the output signal.</p><p id="p-0019" num="0018">Aspects can include one or more of the following features.</p><p id="p-0020" num="0019">The output signal comprises at least one of an optical wave, a current, or a voltage.</p><p id="p-0021" num="0020">The characterizing includes performing time filtering to distinguish the second portion of the optical wave and the output signal based at least in part on one or more optical delay lines in the photonic layer.</p><p id="p-0022" num="0021">At least one of providing the output signal or providing the second portion of the optical wave is performed while attenuating at least one optical wave in a waveguide in the photonic layer.</p><p id="p-0023" num="0022">The characterizing includes subtracting a value based on the second portion of the optical wave from a value based on the output signal.</p><p id="p-0024" num="0023">The output signal from the photonic device comprises an optical wave from the photonic device, and the characterizing is based at least in part on a first output optical wave coupled out of a second optical coupler in the photonic layer in a first time period including a portion of the optical wave from the photonic device, and a second output optical wave coupled out of the second optical coupler in a second time period including a portion of the second portion of the optical wave.</p><p id="p-0025" num="0024">In another aspect, in general, an integrated circuit comprises: at least one photonic layer that includes one or more optical waveguides; a first grating coupler that couples at least a first optical mode outside of the photonic layer to a first waveguide in the photonic layer; a photonic device that includes one or more ports in the photonic layer; a first optical splitter that includes three or more ports in the photonic layer, including a first port optically coupled to the first grating coupler, a second port optically coupled to a first port of the photonic device, and a third port optically coupled to a first Sagnac loop reflector.</p><p id="p-0026" num="0025">The integrated circuit can include: a second grating coupler that couples at least a second optical mode outside of the photonic layer to a second waveguide in the photonic layer; a third grating coupler that couples a third optical mode outside of the photonic layer to a third waveguide in the photonic layer; a second optical splitter that includes three or more ports in the photonic layer, including a first port optically coupled to the second grating coupler, a second port isolated from the photonic device, and a third port optically coupled to a second Sagnac loop reflector; and a third optical splitter that includes three or more ports in the photonic layer, including a first port optically coupled to the third grating coupler, a second port optically isolated from the photonic device and coupled to the second port of the second optical splitter, and a third port optically coupled to a third Sagnac loop reflector.</p><p id="p-0027" num="0026">Aspects can have one or more of the following advantages.</p><p id="p-0028" num="0027">The techniques described herein can be used to determine optical characteristics of photonic devices such as the insertion loss of on-chip optical circuits and components in one or more layers of a PIC, also called a device-under-test (DUT). In silicon photonics (SiP), one type of optical coupler used for wafer-level-testing is a surface grating coupler. But, grating couplers often include sub-micrometer features, and variation of the precise dimensions of those features during fabrication can lead to relatively large variability in their spectral response (e.g., a coupling efficiency response as a function of wavelength). This variability can significantly increase the uncertainty of measurements of characteristics of a DUT using light that has been provided using such a grating coupler, such as insertion loss of the DUT. The techniques described herein are able to substantially remove the variability of the optical coupler spectral response from the DUT measurement. For example, the reflection measurements enabled by the optical reflectors used in some examples described herein can be used to cancel the effects of the optical couplers from the DUT measurements. Other advantages include improving the robustness of the characterization to multi-path interference (MPI), and enabling the characterization of a reflection and phase response of a DUT.</p><p id="p-0029" num="0028">Other features and advantages will become apparent from the following description, and from the figures and claims.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0030" num="0029">The disclosure is best understood from the following detailed description when read in conjunction with the accompanying drawings. It is emphasized that, according to common practice, the various features of the drawings are not to-scale. On the contrary, the dimensions of the various features are arbitrarily expanded or reduced for clarity.</p><p id="p-0031" num="0030"><figref idref="DRAWINGS">FIGS. <b>1</b>A and <b>1</b>B</figref> are schematic diagrams of an example device circuit and corresponding calibration circuit, respectively.</p><p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. <b>2</b>A</figref> is a schematic diagram of an example coupling interface.</p><p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. <b>2</b>B</figref> is a schematic diagram of an example device circuit.</p><p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a schematic diagram of an example device circuit for a DUT with an electrical output port.</p><p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a schematic diagram of an example device circuit for a DUT with multiple output ports.</p><p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a schematic diagram of an example device circuit for a working device.</p><p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a schematic diagram of an example device circuit with an additional port.</p><p id="p-0038" num="0037"><figref idref="DRAWINGS">FIGS. <b>7</b>A and <b>7</b>B</figref> are schematic diagrams of example device circuits with delay components.</p><p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a schematic diagram of an example device circuit with variable optical attenuators and delay components.</p><p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a schematic diagram of an example device circuit with variable optical attenuators and an additional port.</p><p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a schematic diagram of an example device circuit in an alternative arrangement.</p><p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. <b>11</b></figref> is a flowchart of an example characterization method.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0006" level="1">DETAILED DESCRIPTION</heading><p id="p-0043" num="0042">For measurements of optical characteristics (e.g., insertion loss) of a DUT in a PIC, light for making the measurement typically comes from an optical fiber located near the top surface of the PIC. One type of optical coupler used to couple light from an optical fiber into the DUT, and from the DUT into an optical fiber, is a grating coupler (GC). The DUTs being tested can be within PICs that are formed in each cell on a wafer (e.g., a silicon wafer for a SiP device) for wafer-level-testing (WLT). For example, a WLT station can be used to perform many measurements of many DUTs on each cell on the wafer in a short amount of time. Each cell, which will be used to form a respective die after the wafer is diced, can include one or more DUTs distributed over different locations on the die that represent a copy of each type of photonic device used in a product photonic circuit on the die. For example, in a single cell area there may be 30 devices fabricated as a DUT to be tested for characterizing different types of photonic devices used in product photonic circuit(s) on the cell. This cell is reproduced, by step lithography for example, over the whole wafer area, so that one particular DUT appears across multiple locations on the wafer. This step process is a potential source of fabrication variability in the GC response. Other sources of fabrication variability can include position-dependent etching rates, etching anisotropy, etc. A given cell pattern can be repeated over the whole wafer. A cell can contain many circuits, components, etc. A die is formed by dicing (also called singulating) all or part of each cell. So, a single cell can provide one or more dies.</p><p id="p-0044" num="0043">One way to remove the variability due to the responses of the GCs from the measurement of a &#x201c;device circuit&#x201d; with a DUT is to fabricate a separate &#x201c;calibration circuit&#x201d; adjacent to (or in proximity to) the device circuit that includes the GCs but does not include the DUT. For example, the components in the calibration circuit are isolated from the DUT (e.g., either by providing a calibration circuit that is a copy of the device circuit with the DUT removed, or by providing a calibration circuit with a &#x201c;disconnected&#x201d; DUT without any waveguides connecting any of the ports of the components in the calibration circuit to the DUT), as shown in more detail in the examples herein. However, even when generalized DUT characteristics are determined based on an average of an ensemble of measurements of many device circuit and calibration circuit pairs, for an individual DUT characterization, there may be a relatively large uncertainty due to the variability between the GCs in the device circuit and the calibration circuit. As a result, precise characterization of individual on-chip components, which may be required for design validation for example, may be challenging. As an example of an unfortunate consequence of such uncertainty in individual DUT characterization, a die selected to be good after wafer-level testing may finally be rejected after being diced and packaged, reducing yield and increasing the product fabrication costs. Device circuits for characterizing DUTs as described herein are configured to include features that enable test measurements to be performed that at least partially compensate for this potential uncertainty. A corresponding calibration circuit is not necessary for this compensation in the device circuit to be effective, but can still optionally be used in some implementations, as described in more detail below.</p><p id="p-0045" num="0044">Referring to <figref idref="DRAWINGS">FIG. <b>1</b>A</figref>, an example of a device circuit <b>100</b> includes a DUT <b>102</b> to be characterized on a portion <b>103</b> of a chip, an optical coupler <b>104</b>A for coupling input light from an off-chip optical source <b>106</b>A (e.g., a laser), and an optical coupler <b>104</b>B for coupling output light to an off-chip detector <b>108</b>B (e.g., a photodiode detection circuit). The examples illustrated in many of the figures will include surface grating couplers as the optical couplers, but in other examples, the optical couplers could be implemented using different photonic circuit elements such as an edge coupler that arranges an end of a waveguide to extend to the edge of the chip for alignment with another waveguide on a different chip, or for alignment with a core of an optical fiber that is butt coupled, for example. Some optical couplers could involve the use of one or more of: spot size converters, lensed-fibers, free-beam coupling using lenses, prism couplers, or other couplers or coupling mechanisms.</p><p id="p-0046" num="0045">In this example, the DUT <b>102</b> has two ports, with a first port that may be configured for receiving an optical wave as input and a second port that may be configured for providing an optical wave as output with respect to transmission in a particular direction designated as &#x201c;forward propagation&#x201d; through the DUT. In some cases, it is useful to also characterize transmission in the opposite direction with respect to &#x201c;reverse propagation&#x201d; through the DUT. For example, a given DUT may be designed to allow bidirectional transmission through its ports (e.g., a reciprocal photonic device), or may be designed to provide different behavior for transmission through its ports in opposite directions (e.g., a non-reciprocal photonic device). Also, in other examples, a DUT with more than a single input port and/or a single output port can be characterized using these techniques, as described in more detail below.</p><p id="p-0047" num="0046">In this example, the device circuit <b>100</b> also includes off-chip optical circulators <b>109</b>A and <b>109</b>B to enable light to be coupled to and from the DUT <b>102</b> in the forward propagation direction described above and to and from the DUT <b>102</b> in the reverse propagation direction as follows. Using other ports of the off-chip optical circulators <b>109</b>A and <b>109</b>B, the device circuit <b>100</b> also uses the optical coupler <b>104</b>B for coupling input light from an off-chip optical source <b>106</b>B (e.g., a laser), and uses the optical coupler <b>104</b>A for coupling output light to an off-chip detector <b>108</b>A (e.g., a photodiode detection circuit). In other examples, instead of using separate optical sources <b>106</b>A and <b>106</b>B and separate detectors <b>108</b>A and <b>108</b>B for the different directions, a single optical source and/or a single detector can be shared using a switch or other optical routing device(s) to change the optical coupler <b>104</b>A or <b>104</b>B to which the optical source or detector is connected while a given measurement is being performed.</p><p id="p-0048" num="0047">The device circuit <b>100</b> also includes optical reflectors <b>110</b>A and <b>110</b>B that are arranged within the device circuit <b>100</b> using multi-port optical couplers <b>112</b>A and <b>112</b>B to provide auxiliary signals that can be used to compensate for the variability in the spectral response of each of the optical couplers <b>104</b>A and <b>104</b>B. In this example, the multi-port optical couplers <b>112</b>A and <b>112</b>B are 1&#xd7;2 optical splitters with an even 50/50 splitting ratio, but other types of couplers that include at least one input port and at least two output ports could be used, and the splitting ratio could be different in other examples. As used herein, an optical reflector includes any on-chip circuit element that is capable of sending back substantially all of the optical power emitted from a location in the circuit back to that location. One example of an optical reflector that works well in a photonic integrated circuit is a Sagnac loop reflector (or simply &#x201c;Sagnac reflector&#x201d;), as described in more detail below. The examples referenced in many of the figures will include Sagnac reflectors as the optical reflectors, but in other examples, the optical reflectors could be implemented using different circuit elements (e.g., Bragg reflectors).</p><p id="p-0049" num="0048">In this example, when the light is coupled into the optical coupler <b>104</b>A, half of the optical power is sent towards the DUT <b>102</b> using one output port of the multi-port optical coupler <b>112</b>A. The light emitted from the other output port of the multi-port optical coupler <b>112</b>A is sent into the optical reflector <b>110</b>A, which reflects substantially all of the optical power back to the multi-port optical coupler <b>112</b>A. By energy conservation, given the <b>50</b>/<b>50</b> splitting ratio of the 1&#xd7;2 optical splitter used as the multi-port optical coupler <b>112</b>A, about half of that reflected optical power is emitted back out of the input port of the multi-port optical coupler <b>112</b>A towards the optical coupler <b>104</b>A. The optical circulator <b>109</b>A sends this reflected auxiliary signal to the detector <b>108</b>A to provide a detected signal that will be used to remove the spectral responses of the optical couplers <b>104</b>A and <b>104</b>B from the DUT measurements.</p><p id="p-0050" num="0049">A corresponding calibration circuit <b>120</b> is shown in <figref idref="DRAWINGS">FIG. <b>1</b>B</figref>. Such a calibration circuit <b>120</b> is useful to characterize the on-chip circuit elements other than the DUT <b>102</b> (e.g., losses due to reflectors, splitters, waveguides, or other circuit elements that may be used in other implementations). The calibration circuit <b>120</b> is fabricated on a portion <b>123</b> in proximity to the portion <b>103</b> of the same chip. The calibration circuit <b>120</b> includes an optical coupler <b>124</b>A for coupling input light from an off-chip optical source <b>126</b>A (e.g., a laser), and an optical coupler <b>124</b>B for coupling output light to an off-chip detector <b>128</b>B (e.g., a photodiode detection circuit). The calibration circuit <b>120</b> also includes off-chip optical circulators <b>129</b>A and <b>129</b>B to enable measurement in the reverse propagation direction. So, the calibration circuit <b>120</b> also uses the optical coupler <b>124</b>B for coupling input light from an off-chip optical source <b>126</b>B (e.g., a laser), and uses the optical coupler <b>124</b>A for coupling output light to an off-chip detector <b>128</b>A (e.g., a photodiode detection circuit). As in the device circuit <b>100</b>, when the light is coupled into the optical coupler <b>124</b>A, half of the optical power is sent towards a waveguide section omitting a DUT using one output port of a multi-port optical coupler <b>132</b>A. The light emitted from the other output port of the multi-port optical coupler <b>132</b>A is sent into the optical reflector <b>130</b>A, which reflects substantially all of the optical power back to the multi-port optical coupler <b>132</b>A. Again, by energy conservation, about half of that reflected optical power is emitted back out of the input port of the multi-port optical coupler <b>132</b>A towards the optical coupler <b>124</b>A. The optical circulator <b>129</b>A sends this reflected auxiliary signal to the detector <b>128</b>A to provide a detected signal that will be used to remove the spectral responses of the optical couplers <b>124</b>A and <b>124</b>B from the calibration measurements.</p><p id="p-0051" num="0050">Various alternative implementations can be used for the device circuit <b>100</b> and the calibration circuit <b>120</b>. In some implementations, the same changes are made in both circuits to preserve the correspondence between the circuits. For example, if 1&#xd7;2 optical splitters with an asymmetric splitting ratio other than 50/50 is used for the multi-port optical couplers <b>112</b>A and <b>112</b>B, then a 1&#xd7;2 optical splitter with the same asymmetric splitting ratio is also used for the multi-port optical couplers <b>132</b>A and <b>132</b>B. In some implementations, a first splitting ratio could be used for the couplers <b>112</b>A and <b>132</b>A, and another splitting ratio could be used for the couplers <b>112</b>B and <b>132</b>B. But, two different calibration circuits would be used, with one calibration circuit having identical 1&#xd7;2 optical splitters with the first splitting ratio, and another separate calibration circuit having identical 1&#xd7;2 optical splitters with the second splitting ratio. A common splitting ratio used for all four couplers <b>112</b>A, <b>112</b>B, <b>132</b>A, and <b>132</b>B is useful for some measurements, such as measurements for characterizing both transmission through and reflection from a DUT. Also, as mentioned above for the device circuit <b>100</b>, alternative implementations of the calibration circuit <b>120</b> can be modified to use a single optical source and/or a single detector that is shared using a switch or other optical routing device(s) to change the optical coupler to which the optical source or detector is connected while a given measurement is being performed.</p><p id="p-0052" num="0051">Even without the use of the calibration circuit <b>120</b>, the effects of the spectral responses of the optical couplers <b>104</b>A and <b>104</b>B can be removed from the measurements of the spectral response of the DUT <b>100</b> using the reflection measurements due to the optical reflectors <b>110</b>A and <b>110</b>B. Without the effects of the optical couplers <b>104</b>A and <b>104</b>B, the measurement uncertainty becomes dominated by the effects of the multi-port optical couplers <b>112</b>A and <b>112</b>B. But, the fabrication variability of multi-port optical couplers such as 1&#xd7;2 optical splitters is much smaller than the fabrication variability of fiber-to-chip optical couplers such as grating couplers, for example, due to the larger tolerance to fabrication errors, and due to the fact that the spectral response of an on-chip 1&#xd7;2 optical splitter does not depend on the physical positioning of an optical fiber.</p><p id="p-0053" num="0052">In some implementations, the optical couplers <b>104</b>A and <b>104</b>B used in the device circuit <b>100</b> are not identical. For example, the optical coupler <b>104</b>A can be a grating coupler that is configured to couple light to or from a transverse electric (TE) mode and the optical coupler <b>104</b>B can be a grating coupler that is configured to coupled can be designed to couple light to or from a transfers magnetic (TM) mode. Such a configuration can be used, for example to characterize polarization crosstalk in a DUT, which quantifies how much an input configured for a TE mode leaks into an output configured for a TM mode.</p><p id="p-0054" num="0053">For a DUT with any number of input and/or output ports, <figref idref="DRAWINGS">FIG. <b>2</b>A</figref> shows a particular example of a testing interface <b>200</b> that can be used between a grating coupler <b>202</b> and the DUT (not shown) to couple an optical input fiber or output fiber to an input or output port of the DUT, respectively, via the grating coupler <b>202</b>. In this example, the multi-port optical coupler used to split off some light for reflection is a 1&#xd7;2 optical splitter <b>204</b> that provides one path from the grating coupler <b>202</b> to an interface port <b>206</b>, and another path from the grating coupler <b>202</b> to a Sagnac reflector <b>208</b>. The Sagnac reflector <b>208</b> splits light received at an input port of an internal 1&#xd7;2 optical splitter <b>210</b> both ways around a looped waveguide forming a closed path between the two output ports of the 1&#xd7;2 optical splitter <b>210</b>. <figref idref="DRAWINGS">FIG. <b>2</b>B</figref> shows an example of a device circuit <b>220</b> formed from two such testing interfaces. One testing interface <b>222</b>A is coupled to a grating coupler <b>224</b>A, and another testing interface <b>222</b>B is coupled to a grating coupler <b>224</b>B, on either side of a 2-port DUT <b>226</b>.</p><p id="p-0055" num="0054">The large variability associated with the grating coupler <b>202</b> is partly due to the small (e.g., nanometer size) structures used to form the curved grating teeth. For example, in some implementations, the teeth have a half-period of about 300 nm and their height is in the range of around 50 to 120 nm. A slight variation of these structural dimensions can significantly modify the optical effective index, which changes the optimal diffraction angle between the waveguide mode and the optical fiber mode, and the coupling efficiency between the two modes. A variation of these structural dimensions can also significantly modify the optical group index, which is directly related to the 3-dB bandwidth of the spectral response of the grating coupler <b>202</b>. The duty-cycle (DC) of the teeth can also significantly influence the optical mode associated with the grating structure, and therefore influences the optical effective and group indexes. In some cases, variations in one or more of these structural dimensions can result from relatively small over-etching or under-etching and photoresist non-uniformity across the wafer during fabrication, which affect the DC and the height of the teeth. The variation of the initial silicon thickness can also have a significant impact on the mode index. Any of these fabrication non-uniformities may vary throughout a wafer, which can contribute to the high variability of the spectral response of grating couplers across the wafer.</p><p id="p-0056" num="0055">Another source of variability of the measurement of the spectral response of light being coupled between an optical fiber and a grating coupler comes from the position and/or angle of the optical fiber. If the position and/or angle of the optical fiber are different from one grating coupler to another, the amount of light that is successfully coupled (instead of lost) will generally be different. The shape of the spectral response (i.e., variation over wavelength) will generally be different as well. The dependency on the position of the fiber also makes on-chip coupling potentially less reliable.</p><p id="p-0057" num="0056">An example of a potential impact of the relatively large variability associated with a grating coupler when attempting to characterize a DUT such as a 1&#xd7;2 optical splitter is uncertainty in measuring the splitting ratio. For example, for a 1&#xd7;2 optical splitter with a nominal 50/50 splitting ratio, a measurement uncertainty of&#xb1;0.7 dB due to the grating coupler can result in an uncertainty in the splitting ratio measurement of&#xb1;8%. An uncertainty of this magnitude can have a drastic impact in establishing optical power budgets for complex SiP based devices. The large variability can also impact the ability to generate reliable S-parameter matrix models of individual components from experimental data, and thus impact the ability to properly simulate a cascade of components.</p><p id="p-0058" num="0057">Using the DUT characterization techniques described herein, the contribution of a high variability optical coupler such as the grating couplers <b>224</b>A and <b>224</b>B in the device circuit <b>220</b>, or in similar device circuits that use a testing interface such as the testing interface <b>200</b> for the optical coupler, can be rigorously removed from a measurement, reducing the uncertainty associated with characterizing the DUT <b>226</b>. Instead, any remaining uncertainty may be associated with the (smaller) variability of other optical components in the device circuit.</p><p id="p-0059" num="0058">Without intending to be bound by theory, example equations are presented below, which can be used to characterize transmission characteristics of a DUT based on measurements performed using a device circuit as shown in <figref idref="DRAWINGS">FIG. <b>2</b>B</figref>. Using these equations, a transmission insertion loss for a 2-port DUT can be computed (e.g., using a computing system that is coupled to, or receives data from the off-chip detectors coupled to the circuit). Furthermore, by measuring the insertion loss at multiple different wavelengths (e.g., wavelengths across the C-band) an insertion loss spectrum can be computed. In the following equations, the wavelength dependence is not explicitly indicated for simplicity. Also, second or higher order terms related to parasitic reflections coming from the optical couplers and from the DUT are also omitted for simplicity, since their effect can be neglected without significantly affecting the results.</p><p id="p-0060" num="0059">In this example, a linear coefficient T<sub>lin </sub>(between 0 and 1) can be defined to characterize either the transmission or reflection loss characteristics of a component (e.g., transmission between any two ports of an N-port component or reflection from any ports of an N-port component). To further simplify the calculations, these (unitless) linear coefficients will be converted into &#x201c;insertion loss variables&#x201d; L that indicate insertion loss in units of decibels (dB), with a insertion loss variable of 0 dB indicating no insertion loss, based on the following relationships between the linear coefficients and the insertion loss variables:</p><p id="p-0061" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>L=</i>10 log(<i>T</i><sub>lin</sub>)&#x2003;&#x2003;[dB]<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0062" num="0060">Using such insertion loss variables defined in units of dB (rather than transmission through or reflection from a component in linear terms) enables the effect of a concatenation of individual optical components to be computed by summing insertion loss variables of each of the individual optical components (instead of multiplying their linear coefficients). Additionally, for convenience of notation, the following notation will be used. Referring again to <figref idref="DRAWINGS">FIG. <b>2</b>B</figref>, DUT is the insertion loss variable for the device-under-test <b>226</b>. GC<sub>1 </sub>and GC<sub>2 </sub>are insertion loss variables for the grating couplers <b>224</b>A and <b>224</b>B coupled to Port <b>1</b> and Port <b>2</b>, respectively. T<sub>&#x3b1;</sub><sup>1&#xd7;2 </sup>and T<sub>1&#xd7;2</sub><sup>&#x3b2;</sup>are the insertion loss variables for the 1&#xd7;2 optical splitters <b>228</b>A and <b>228</b>B. The variables S<sub>a </sub><sup>1&#xd7;2</sup>, S<sub>b</sub><sup>1&#xd7;2</sup>, (S<sub>a</sub><sup>1&#xd7;2</sup>)&#x2032;, and (S<sub>b</sub><sup>1&#xd7;2</sup>)&#x2032; are the splitting ratios of those 1&#xd7;2 optical splitters. In particular, S<sub>a</sub><sup>1&#xd7;2 </sup>and S<sub>b</sub><sup>1&#xd7;2 </sup>are the splitting ratios of the ports of the 1&#xd7;2 splitters going toward the DUT <b>226</b>, and (S<sub>a</sub><sup>1&#xd7;2</sup>)&#x2032; and (S<sub>b</sub><sup>1&#xd7;2</sup>)&#x2032; are the splitting ratios for the complementary ports that go to the Sagnac reflectors <b>230</b>A and <b>230</b>B, respectively. For the splitters, S<sub>a</sub><sup>1&#xd7;2</sup>+(S<sub>a</sub><sup>1&#xd7;2</sup>)&#x2032;=1 and S<sub>b</sub><sup>1&#xd7;2</sup>+(S<sub>b</sub><sup>1&#xd7;2</sup>)&#x2032;=1. An ideal 1&#xd7;2 splitter should have T<sub>a,b</sub><sup>1&#xd7;2</sup>=0 dB and S<sub>a,b</sub><sup>1&#xd7;2</sup>=(S<sub>a,b</sub><sup>1&#xd7;2</sup>)&#x2032; &#x2212;3 dB. SR<sub>1 </sub>and SR<sub>2 </sub>are the insertion loss variables representing the (potentially lossy) reflection from the Sagnac reflectors <b>230</b>A and <b>230</b>B, respectively.</p><p id="p-0063" num="0061">The equations that represent the measurements used to characterize the DUT <b>226</b> using the example device circuit <b>220</b> are:</p><p id="p-0064" num="0000"><maths id="MATH-US-00001" num="00001"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mi>M</mi>    <mrow>     <mn>1</mn>     <mo>&#x2062;</mo>     <mn>2</mn>    </mrow>   </msub>   <mo>[</mo>   <mi>dB</mi>   <mo>]</mo>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>S</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <mrow>     <mi>D</mi>     <mo>&#x2062;</mo>     <mi>U</mi>     <mo>&#x2062;</mo>     <mi>T</mi>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>b</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>S</mi>     <mi>b</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>2</mn>     </msub>    </mrow>   </mrow>   <mo>=</mo>   <mrow>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>2</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>b</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>S</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>S</mi>     <mi>b</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <mrow>     <mi>D</mi>     <mo>&#x2062;</mo>     <mi>U</mi>     <mo>&#x2062;</mo>     <mi>T</mi>    </mrow>   </mrow>  </mrow> </mrow></math></maths><maths id="MATH-US-00001-2" num="00001.2"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mi>M</mi>    <mrow>     <mn>1</mn>     <mo>&#x2062;</mo>     <mn>1</mn>    </mrow>   </msub>   <mo>[</mo>   <mi>dB</mi>   <mo>]</mo>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msup>     <mrow>      <mo>(</mo>      <msubsup>       <mi>S</mi>       <mi>a</mi>       <mrow>        <mn>1</mn>        <mo>&#xd7;</mo>        <mn>2</mn>       </mrow>      </msubsup>      <mo>)</mo>     </mrow>     <mo>&#x2032;</mo>    </msup>    <mo>+</mo>    <mrow>     <mi>S</mi>     <mo>&#x2062;</mo>     <msub>      <mi>R</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msup>     <mrow>      <mo>(</mo>      <msubsup>       <mi>S</mi>       <mi>a</mi>       <mrow>        <mn>1</mn>        <mo>&#xd7;</mo>        <mn>2</mn>       </mrow>      </msubsup>      <mo>)</mo>     </mrow>     <mo>&#x2032;</mo>    </msup>    <mo>+</mo>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>   </mrow>   <mo>=</mo>   <mrow>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <msup>      <mrow>       <mo>(</mo>       <msubsup>        <mi>S</mi>        <mi>a</mi>        <mrow>         <mn>1</mn>         <mo>&#xd7;</mo>         <mn>2</mn>        </mrow>       </msubsup>       <mo>)</mo>      </mrow>      <mo>&#x2032;</mo>     </msup>    </mrow>    <mo>+</mo>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <msubsup>      <mi>T</mi>      <mi>a</mi>      <mrow>       <mn>1</mn>       <mo>&#xd7;</mo>       <mn>2</mn>      </mrow>     </msubsup>    </mrow>    <mo>+</mo>    <mrow>     <mi>S</mi>     <mo>&#x2062;</mo>     <msub>      <mi>R</mi>      <mn>1</mn>     </msub>    </mrow>   </mrow>  </mrow> </mrow></math></maths><maths id="MATH-US-00001-3" num="00001.3"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mi>M</mi>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <mn>2</mn>    </mrow>   </msub>   <mo>[</mo>   <mi>dB</mi>   <mo>]</mo>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>2</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>b</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msup>     <mrow>      <mo>(</mo>      <msubsup>       <mi>S</mi>       <mi>b</mi>       <mrow>        <mn>1</mn>        <mo>&#xd7;</mo>        <mn>2</mn>       </mrow>      </msubsup>      <mo>)</mo>     </mrow>     <mo>&#x2032;</mo>    </msup>    <mo>+</mo>    <mrow>     <mi>S</mi>     <mo>&#x2062;</mo>     <msub>      <mi>R</mi>      <mn>2</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>b</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msup>     <mrow>      <mo>(</mo>      <msubsup>       <mi>S</mi>       <mi>b</mi>       <mrow>        <mn>1</mn>        <mo>&#xd7;</mo>        <mn>2</mn>       </mrow>      </msubsup>      <mo>)</mo>     </mrow>     <mo>&#x2032;</mo>    </msup>    <mo>+</mo>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>2</mn>     </msub>    </mrow>   </mrow>   <mo>=</mo>   <mrow>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>2</mn>     </msub>    </mrow>    <mo>+</mo>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <msup>      <mrow>       <mo>(</mo>       <msubsup>        <mi>S</mi>        <mi>b</mi>        <mrow>         <mn>1</mn>         <mo>&#xd7;</mo>         <mn>2</mn>        </mrow>       </msubsup>       <mo>)</mo>      </mrow>      <mo>&#x2032;</mo>     </msup>    </mrow>    <mo>+</mo>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <msubsup>      <mi>T</mi>      <mi>b</mi>      <mrow>       <mn>1</mn>       <mo>&#xd7;</mo>       <mn>2</mn>      </mrow>     </msubsup>    </mrow>    <mo>+</mo>    <mrow>     <mi>S</mi>     <mo>&#x2062;</mo>     <msub>      <mi>R</mi>      <mn>2</mn>     </msub>    </mrow>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0065" num="0000">where M<sub>ij </sub>are the collective insertion loss measurements from port j to port i, which can be obtained through three separate measurements. M<sub>21 </sub>does not need to be measured, since energy conservation leads to M<sub>ij</sub>=M<sub>ji</sub>. But, M<sub>21 </sub>can be measured for validation or averaging out noise. The spectral response for the DUT <b>226</b> can be determined based on these insertion loss measurements as follows:</p><p id="p-0066" num="0000"><maths id="MATH-US-00002" num="00002"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mi>M</mi>    <mrow>     <mn>1</mn>     <mo>&#x2062;</mo>     <mn>2</mn>    </mrow>   </msub>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mn>1</mn>      <mo>&#x2062;</mo>      <mn>1</mn>     </mrow>    </msub>    <mn>2</mn>   </mfrac>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mn>2</mn>      <mo>&#x2062;</mo>      <mn>2</mn>     </mrow>    </msub>    <mn>2</mn>   </mfrac>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mi>G</mi>    <mo>&#x2062;</mo>    <msub>     <mi>C</mi>     <mn>1</mn>    </msub>   </mrow>   <mo>+</mo>   <mrow>    <mi>G</mi>    <mo>&#x2062;</mo>    <msub>     <mi>C</mi>     <mn>2</mn>    </msub>   </mrow>   <mo>+</mo>   <msubsup>    <mi>T</mi>    <mi>a</mi>    <mrow>     <mn>1</mn>     <mo>&#xd7;</mo>     <mn>2</mn>    </mrow>   </msubsup>   <mo>+</mo>   <msubsup>    <mi>T</mi>    <mi>b</mi>    <mrow>     <mn>1</mn>     <mo>&#xd7;</mo>     <mn>2</mn>    </mrow>   </msubsup>   <mo>+</mo>   <msubsup>    <mi>S</mi>    <mi>a</mi>    <mrow>     <mn>1</mn>     <mo>&#xd7;</mo>     <mn>2</mn>    </mrow>   </msubsup>   <mo>+</mo>   <msubsup>    <mi>S</mi>    <mi>b</mi>    <mrow>     <mn>1</mn>     <mo>&#xd7;</mo>     <mn>2</mn>    </mrow>   </msubsup>   <mo>+</mo>   <mrow>    <mi>D</mi>    <mo>&#x2062;</mo>    <mi>U</mi>    <mo>&#x2062;</mo>    <mi>T</mi>   </mrow>   <mo>-</mo>   <mrow>    <mo>(</mo>    <mrow>     <mrow>      <mi>G</mi>      <mo>&#x2062;</mo>      <msub>       <mi>C</mi>       <mn>1</mn>      </msub>     </mrow>     <mo>+</mo>     <msup>      <mrow>       <mo>(</mo>       <msubsup>        <mi>S</mi>        <mi>a</mi>        <mrow>         <mn>1</mn>         <mo>&#xd7;</mo>         <mn>2</mn>        </mrow>       </msubsup>       <mo>)</mo>      </mrow>      <mo>&#x2032;</mo>     </msup>     <mo>+</mo>     <msubsup>      <mi>T</mi>      <mi>a</mi>      <mrow>       <mn>1</mn>       <mo>&#xd7;</mo>       <mn>2</mn>      </mrow>     </msubsup>     <mo>+</mo>     <mfrac>      <mrow>       <mi>S</mi>       <mo>&#x2062;</mo>       <msub>        <mi>R</mi>        <mn>1</mn>       </msub>      </mrow>      <mn>2</mn>     </mfrac>    </mrow>    <mo>)</mo>   </mrow>   <mo>-</mo>   <mrow>    <mo>(</mo>    <mrow>     <mrow>      <mi>G</mi>      <mo>&#x2062;</mo>      <msub>       <mi>C</mi>       <mn>2</mn>      </msub>     </mrow>     <mo>+</mo>     <msup>      <mrow>       <mo>(</mo>       <msubsup>        <mi>S</mi>        <mi>b</mi>        <mrow>         <mn>1</mn>         <mo>&#xd7;</mo>         <mn>2</mn>        </mrow>       </msubsup>       <mo>)</mo>      </mrow>      <mo>&#x2032;</mo>     </msup>     <mo>+</mo>     <msubsup>      <mi>T</mi>      <mi>b</mi>      <mrow>       <mn>1</mn>       <mo>&#xd7;</mo>       <mn>2</mn>      </mrow>     </msubsup>     <mo>+</mo>     <mfrac>      <mrow>       <mi>S</mi>       <mo>&#x2062;</mo>       <msub>        <mi>R</mi>        <mn>2</mn>       </msub>      </mrow>      <mn>2</mn>     </mfrac>    </mrow>    <mo>)</mo>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0067" num="0062">After regrouping the similar terms, this can be expressed as the following device circuit equation:</p><p id="p-0068" num="0000"><maths id="MATH-US-00003" num="00003"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mi>M</mi>    <mrow>     <mn>1</mn>     <mo>&#x2062;</mo>     <mn>2</mn>    </mrow>   </msub>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mn>1</mn>      <mo>&#x2062;</mo>      <mn>1</mn>     </mrow>    </msub>    <mn>2</mn>   </mfrac>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mn>2</mn>      <mo>&#x2062;</mo>      <mn>2</mn>     </mrow>    </msub>    <mn>2</mn>   </mfrac>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mi>D</mi>    <mo>&#x2062;</mo>    <mi>U</mi>    <mo>&#x2062;</mo>    <mi>T</mi>   </mrow>   <mo>-</mo>   <munder>    <munder>     <mrow>      <mo>(</mo>      <mrow>       <mfrac>        <mrow>         <mi>S</mi>         <mo>&#x2062;</mo>         <msub>          <mi>R</mi>          <mn>1</mn>         </msub>        </mrow>        <mn>2</mn>       </mfrac>       <mo>+</mo>       <mfrac>        <mrow>         <mi>S</mi>         <mo>&#x2062;</mo>         <msub>          <mi>R</mi>          <mn>2</mn>         </msub>        </mrow>        <mn>2</mn>       </mfrac>      </mrow>      <mo>)</mo>     </mrow>     <mo>&#xfe38;</mo>    </munder>    <mrow>     <mi>Reflector</mi>     <mo>&#x2062;</mo>     <mtext>  </mtext>     <mi>loss</mi>    </mrow>   </munder>   <mo>+</mo>   <munder>    <munder>     <mrow>      <mrow>       <mo>(</mo>       <mrow>        <msubsup>         <mi>S</mi>         <mi>a</mi>         <mrow>          <mn>1</mn>          <mo>&#xd7;</mo>          <mn>2</mn>         </mrow>        </msubsup>        <mo>-</mo>        <msup>         <mrow>          <mo>(</mo>          <msubsup>           <mi>S</mi>           <mi>a</mi>           <mrow>            <mn>1</mn>            <mo>&#xd7;</mo>            <mn>2</mn>           </mrow>          </msubsup>          <mo>)</mo>         </mrow>         <mo>&#x2032;</mo>        </msup>       </mrow>       <mo>)</mo>      </mrow>      <mo>+</mo>      <mrow>       <mo>(</mo>       <mrow>        <msubsup>         <mi>S</mi>         <mi>b</mi>         <mrow>          <mn>1</mn>          <mo>&#xd7;</mo>          <mn>2</mn>         </mrow>        </msubsup>        <mo>-</mo>        <msup>         <mrow>          <mo>(</mo>          <msubsup>           <mi>S</mi>           <mi>b</mi>           <mrow>            <mn>1</mn>            <mo>&#xd7;</mo>            <mn>2</mn>           </mrow>          </msubsup>          <mo>)</mo>         </mrow>         <mo>&#x2032;</mo>        </msup>       </mrow>       <mo>)</mo>      </mrow>     </mrow>     <mo>&#xfe38;</mo>    </munder>    <mrow>     <mn>1</mn>     <mo>&#xd7;</mo>     <mn>2</mn>     <mo>&#x2062;</mo>     <mtext>  </mtext>     <mi>Splitter</mi>     <mo>&#x2062;</mo>     <mtext>  </mtext>     <mi>asymmetry</mi>    </mrow>   </munder>  </mrow> </mrow></math></maths></p><p id="p-0069" num="0063">From this equation, it can be seen that this DUT characterization technique completely removes the GC spectral responses but leaves a term related to the insertion losses of the reflectors and a term related to the asymmetry between the ports of the two 1&#xd7;2 splitters in the device circuit <b>220</b>. This equation also shows that the imprecision of this technique for characterizing the DUT is related to the variability of the reflectors and splitters, which are components that are generally more robust to fabrication errors than structures such as grating couplers that involved sub-micrometer structures. Furthermore, the properties of those components do not depend on the position of the optical fiber, eliminating that source of variability. To the extent that these terms are negligible, no calibration circuit is needed. But, the effect of these terms can be mitigated or essentially removed by a calibration measurement from a corresponding calibration circuit in which the DUT is replaced by an essentially lossless waveguide.</p><p id="p-0070" num="0064">An equation for a calibration circuit can be obtained from the equation above, but without a DUT (i.e., DUT=0 dB insertion loss) to yield:</p><p id="p-0071" num="0000"><maths id="MATH-US-00004" num="00004"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mi>M</mi>    <mrow>     <mn>12</mn>     <mo>,</mo>     <mi>cal</mi>    </mrow>   </msub>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mn>11</mn>      <mo>,</mo>      <mi>cal</mi>     </mrow>    </msub>    <mn>2</mn>   </mfrac>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mn>22</mn>      <mo>,</mo>      <mi>cal</mi>     </mrow>    </msub>    <mn>2</mn>   </mfrac>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mo>-</mo>    <munder>     <munder>      <mrow>       <mo>(</mo>       <mrow>        <mfrac>         <mrow>          <mi>S</mi>          <mo>&#x2062;</mo>          <msub>           <mi>R</mi>           <mn>1</mn>          </msub>         </mrow>         <mn>2</mn>        </mfrac>        <mo>+</mo>        <mfrac>         <mrow>          <mi>S</mi>          <mo>&#x2062;</mo>          <msub>           <mi>R</mi>           <mn>2</mn>          </msub>         </mrow>         <mn>2</mn>        </mfrac>       </mrow>       <mo>)</mo>      </mrow>      <mo>&#xfe38;</mo>     </munder>     <mrow>      <mi>Reflector</mi>      <mo>&#x2062;</mo>      <mtext>  </mtext>      <mi>loss</mi>     </mrow>    </munder>   </mrow>   <mo>+</mo>   <munder>    <munder>     <mrow>      <mrow>       <mo>(</mo>       <mrow>        <msubsup>         <mi>S</mi>         <mi>a</mi>         <mrow>          <mn>1</mn>          <mo>&#xd7;</mo>          <mn>2</mn>         </mrow>        </msubsup>        <mo>-</mo>        <msup>         <mrow>          <mo>(</mo>          <msubsup>           <mi>S</mi>           <mi>a</mi>           <mrow>            <mn>1</mn>            <mo>&#xd7;</mo>            <mn>2</mn>           </mrow>          </msubsup>          <mo>)</mo>         </mrow>         <mo>&#x2032;</mo>        </msup>       </mrow>       <mo>)</mo>      </mrow>      <mo>+</mo>      <mrow>       <mo>(</mo>       <mrow>        <msubsup>         <mi>S</mi>         <mi>b</mi>         <mrow>          <mn>1</mn>          <mo>&#xd7;</mo>          <mn>2</mn>         </mrow>        </msubsup>        <mo>-</mo>        <msup>         <mrow>          <mo>(</mo>          <msubsup>           <mi>S</mi>           <mi>b</mi>           <mrow>            <mn>1</mn>            <mo>&#xd7;</mo>            <mn>2</mn>           </mrow>          </msubsup>          <mo>)</mo>         </mrow>         <mo>&#x2032;</mo>        </msup>       </mrow>       <mo>)</mo>      </mrow>     </mrow>     <mo>&#xfe38;</mo>    </munder>    <mrow>     <mn>1</mn>     <mo>&#xd7;</mo>     <mn>2</mn>     <mo>&#x2062;</mo>     <mtext>  </mtext>     <mi>Splitter</mi>     <mo>&#x2062;</mo>     <mtext>  </mtext>     <mi>asymmetry</mi>    </mrow>   </munder>  </mrow> </mrow></math></maths></p><p id="p-0072" num="0065">The right hand side of this calibration circuit equation can be regrouped into two terms, each term being associated with the circuitry used to characterize one of the grating couplers (with grating couplers <b>224</b>A and <b>224</b>B labeled as GC1 and GC2, respectively):</p><p id="p-0073" num="0000"><maths id="MATH-US-00005" num="00005"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mi>M</mi>    <mrow>     <mn>12</mn>     <mo>,</mo>     <mi>cal</mi>    </mrow>   </msub>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mn>11</mn>      <mo>,</mo>      <mi>cal</mi>     </mrow>    </msub>    <mn>2</mn>   </mfrac>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mn>22</mn>      <mo>,</mo>      <mi>cal</mi>     </mrow>    </msub>    <mn>2</mn>   </mfrac>  </mrow>  <mo>=</mo>  <mrow>   <munder>    <munder>     <mrow>      <mo>(</mo>      <mrow>       <msubsup>        <mi>S</mi>        <mi>a</mi>        <mrow>         <mn>1</mn>         <mo>&#xd7;</mo>         <mn>2</mn>        </mrow>       </msubsup>       <mo>-</mo>       <msup>        <mrow>         <mo>(</mo>         <msubsup>          <mi>S</mi>          <mi>a</mi>          <mrow>           <mn>1</mn>           <mo>&#xd7;</mo>           <mn>2</mn>          </mrow>         </msubsup>         <mo>)</mo>        </mrow>        <mo>&#x2032;</mo>       </msup>       <mo>-</mo>       <mfrac>        <mrow>         <mi>S</mi>         <mo>&#x2062;</mo>         <msub>          <mi>R</mi>          <mn>1</mn>         </msub>        </mrow>        <mn>2</mn>       </mfrac>      </mrow>      <mo>)</mo>     </mrow>     <mo>&#xfe38;</mo>    </munder>    <mrow>     <mi>Circuit</mi>     <mo>&#x2062;</mo>     <mtext>  </mtext>     <mi>for</mi>     <mo>&#x2062;</mo>     <mtext>  </mtext>     <mi>GC</mi>     <mo>&#x2062;</mo>     <mn>1</mn>    </mrow>   </munder>   <mo>+</mo>   <munder>    <munder>     <mrow>      <mo>(</mo>      <mrow>       <msubsup>        <mi>S</mi>        <mi>b</mi>        <mrow>         <mn>1</mn>         <mo>&#xd7;</mo>         <mn>2</mn>        </mrow>       </msubsup>       <mo>-</mo>       <msup>        <mrow>         <mo>(</mo>         <msubsup>          <mi>S</mi>          <mi>b</mi>          <mrow>           <mn>1</mn>           <mo>&#xd7;</mo>           <mn>2</mn>          </mrow>         </msubsup>         <mo>)</mo>        </mrow>        <mo>&#x2032;</mo>       </msup>       <mo>-</mo>       <mfrac>        <mrow>         <mi>S</mi>         <mo>&#x2062;</mo>         <msub>          <mi>R</mi>          <mn>2</mn>         </msub>        </mrow>        <mn>2</mn>       </mfrac>      </mrow>      <mo>)</mo>     </mrow>     <mo>&#xfe38;</mo>    </munder>    <mrow>     <mi>Circuit</mi>     <mo>&#x2062;</mo>     <mtext>  </mtext>     <mi>for</mi>     <mo>&#x2062;</mo>     <mtext>  </mtext>     <mi>GC</mi>     <mo>&#x2062;</mo>     <mn>2</mn>    </mrow>   </munder>  </mrow> </mrow></math></maths></p><p id="p-0074" num="0066">Since this technique relies on the low variability of these photonic components to remove (or de-embed), the GC spectral responses from the overall spectral response, this assumption can be used to rewrite the calibration circuit equation as:</p><p id="p-0075" num="0000"><maths id="MATH-US-00006" num="00006"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mi>M</mi>    <mrow>     <mrow>      <mn>1</mn>      <mo>&#x2062;</mo>      <mn>2</mn>     </mrow>     <mo>,</mo>     <mrow>      <mi>c</mi>      <mo>&#x2062;</mo>      <mi>a</mi>      <mo>&#x2062;</mo>      <mi>l</mi>     </mrow>    </mrow>   </msub>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mrow>       <mn>1</mn>       <mo>&#x2062;</mo>       <mn>1</mn>      </mrow>      <mo>,</mo>      <mrow>       <mi>c</mi>       <mo>&#x2062;</mo>       <mi>a</mi>       <mo>&#x2062;</mo>       <mi>l</mi>      </mrow>     </mrow>    </msub>    <mn>2</mn>   </mfrac>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mrow>       <mn>2</mn>       <mo>&#x2062;</mo>       <mn>2</mn>      </mrow>      <mo>,</mo>      <mrow>       <mi>c</mi>       <mo>&#x2062;</mo>       <mi>a</mi>       <mo>&#x2062;</mo>       <mi>l</mi>      </mrow>     </mrow>    </msub>    <mn>2</mn>   </mfrac>  </mrow>  <mo>=</mo>  <mrow>   <mn>2</mn>   <mo>&#x2062;</mo>   <munder>    <munder>     <mrow>      <mo>(</mo>      <mrow>       <msup>        <mi>S</mi>        <mrow>         <mn>1</mn>         <mo>&#xd7;</mo>         <mn>2</mn>        </mrow>       </msup>       <mo>-</mo>       <msup>        <mrow>         <mo>(</mo>         <msup>          <mi>S</mi>          <mrow>           <mn>1</mn>           <mo>&#xd7;</mo>           <mn>2</mn>          </mrow>         </msup>         <mo>)</mo>        </mrow>        <mo>&#x2032;</mo>       </msup>       <mo>-</mo>       <mfrac>        <mrow>         <mi>S</mi>         <mo>&#x2062;</mo>         <mi>R</mi>        </mrow>        <mn>2</mn>       </mfrac>      </mrow>      <mo>)</mo>     </mrow>     <mo>&#xfe38;</mo>    </munder>    <mrow>     <mo>&#x2211;</mo>     <mrow>      <mo>=</mo>      <mrow>       <mi>calibration</mi>       <mo>&#x2062;</mo>       <mtext>  </mtext>       <mi>term</mi>      </mrow>     </mrow>    </mrow>   </munder>  </mrow> </mrow></math></maths></p><p id="p-0076" num="0000">where &#x3a3; is a generalized calibration term that is assumed to have a relatively low variability. Similarly, to characterize a 2-port DUT, the device circuit equation above can be rewritten as:</p><p id="p-0077" num="0000"><maths id="MATH-US-00007" num="00007"><math overflow="scroll"> <mrow>  <mrow>   <mi>D</mi>   <mo>&#x2062;</mo>   <mi>U</mi>   <mo>&#x2062;</mo>   <mi>T</mi>  </mrow>  <mo>=</mo>  <mrow>   <msub>    <mi>M</mi>    <mrow>     <mn>1</mn>     <mo>&#x2062;</mo>     <mn>2</mn>    </mrow>   </msub>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mn>1</mn>      <mo>&#x2062;</mo>      <mn>1</mn>     </mrow>    </msub>    <mn>2</mn>   </mfrac>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mn>2</mn>      <mo>&#x2062;</mo>      <mn>2</mn>     </mrow>    </msub>    <mn>2</mn>   </mfrac>   <mo>-</mo>   <mrow>    <mn>2</mn>    <mo>&#x2062;</mo>    <mi>&#x3a3;</mi>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0078" num="0067">The device equation and calibration equation together can be used to determine the insertion loss of the DUT. The calibration term X can be estimated using measurements from the calibration circuit, and then twice this calibration term can be subtracted from the results of the device circuit measurements to yield the insertion loss of the DUT. For other device circuit that use only a single grating coupler, as in the example of FIG. <b>3</b>below for a 2-port DUT with an optical input port and an electronic output port, a similar device equation can be written as follows:</p><p id="p-0079" num="0000"><maths id="MATH-US-00008" num="00008"><math overflow="scroll"> <mrow>  <mrow>   <mi>D</mi>   <mo>&#x2062;</mo>   <mi>U</mi>   <mo>&#x2062;</mo>   <mi>T</mi>  </mrow>  <mo>=</mo>  <mrow>   <msub>    <mi>M</mi>    <mrow>     <mn>1</mn>     <mo>&#x2062;</mo>     <mn>2</mn>    </mrow>   </msub>   <mo>-</mo>   <mfrac>    <msub>     <mi>M</mi>     <mrow>      <mn>1</mn>      <mo>&#x2062;</mo>      <mn>1</mn>     </mrow>    </msub>    <mn>2</mn>   </mfrac>   <mo>-</mo>   <mi>&#x3a3;</mi>  </mrow> </mrow></math></maths></p><p id="p-0080" num="0068">The calibration term X is not dependent on the alignment of the optical fiber or the position of the DUT on the wafer, assuming a good device reproducibility, but is only dependent upon the reflector's insertion loss and the splitting ratio asymmetry. If different types of splitter and/or reflector structures are used on a wafer, there can be a corresponding type of calibration circuit used to determine the value of a corresponding calibration term X.</p><p id="p-0081" num="0069">In some cases, in addition to, or instead of, measuring insertion loss of a DUT, the reflection from a DUT can be measured. In that case, the delay between the reflection from the DUT and reflection from the reflectors in the testing interface should be large enough to ensure that both of these signals can be sufficiently separated in time to be measured independently (using appropriate instrumentation, such as an optical vector analyzer, for example).</p><p id="p-0082" num="0070">The following equation can be used for calculating the reflection spectrum coming from the calibration circuit:</p><p id="p-0083" num="0000"><maths id="MATH-US-00009" num="00009"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mi>M</mi>    <mn>11</mn>   </msub>   <mo>[</mo>   <mi>dB</mi>   <mo>]</mo>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msup>     <mrow>      <mo>(</mo>      <msubsup>       <mi>S</mi>       <mi>a</mi>       <mrow>        <mn>1</mn>        <mo>&#xd7;</mo>        <mn>2</mn>       </mrow>      </msubsup>      <mo>)</mo>     </mrow>     <mo>&#x2032;</mo>    </msup>    <mo>+</mo>    <mrow>     <mi>S</mi>     <mo>&#x2062;</mo>     <msub>      <mi>R</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msup>     <mrow>      <mo>(</mo>      <msubsup>       <mi>S</mi>       <mi>a</mi>       <mrow>        <mn>1</mn>        <mo>&#xd7;</mo>        <mn>2</mn>       </mrow>      </msubsup>      <mo>)</mo>     </mrow>     <mo>&#x2032;</mo>    </msup>    <mo>+</mo>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>   </mrow>   <mo>=</mo>   <mrow>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <msup>      <mrow>       <mo>(</mo>       <msubsup>        <mi>S</mi>        <mi>a</mi>        <mrow>         <mn>1</mn>         <mo>&#xd7;</mo>         <mn>2</mn>        </mrow>       </msubsup>       <mo>)</mo>      </mrow>      <mo>&#x2032;</mo>     </msup>    </mrow>    <mo>+</mo>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <msubsup>      <mi>T</mi>      <mi>a</mi>      <mrow>       <mn>1</mn>       <mo>&#xd7;</mo>       <mn>2</mn>      </mrow>     </msubsup>    </mrow>    <mo>+</mo>    <msub>     <mi>SR</mi>     <mn>1</mn>    </msub>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0084" num="0071">The reflection coming from the DUT from port <b>1</b> (DUT<sub>11</sub>) path is given by:</p><p id="p-0085" num="0000"><maths id="MATH-US-00010" num="00010"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mi>M</mi>    <mrow>     <mn>11</mn>     <mo>,</mo>     <mrow>      <mi>D</mi>      <mo>&#x2062;</mo>      <mi>U</mi>      <mo>&#x2062;</mo>      <mi>T</mi>     </mrow>    </mrow>   </msub>   <mo>[</mo>   <mi>dB</mi>   <mo>]</mo>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>S</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <mrow>     <mi>D</mi>     <mo>&#x2062;</mo>     <mi>U</mi>     <mo>&#x2062;</mo>     <mi>T</mi>    </mrow>    <mo>+</mo>    <msubsup>     <mi>S</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>   </mrow>   <mo>=</mo>   <mrow>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <msubsup>      <mi>S</mi>      <mi>a</mi>      <mrow>       <mn>1</mn>       <mo>&#xd7;</mo>       <mn>2</mn>      </mrow>     </msubsup>    </mrow>    <mo>+</mo>    <mrow>     <mn>2</mn>     <mo>&#x2062;</mo>     <msubsup>      <mi>T</mi>      <mi>a</mi>      <mrow>       <mn>1</mn>       <mo>&#xd7;</mo>       <mn>2</mn>      </mrow>     </msubsup>    </mrow>    <mo>+</mo>    <mrow>     <mi>D</mi>     <mo>&#x2062;</mo>     <mi>U</mi>     <mo>&#x2062;</mo>     <msub>      <mi>T</mi>      <mn>11</mn>     </msub>    </mrow>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0086" num="0072">To obtain the reflection spectral response of the DUT the following equation can be used:</p><p id="p-0087" num="0000"><maths id="MATH-US-00011" num="00011"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mi>M</mi>    <mrow>     <mn>11</mn>     <mo>,</mo>     <mrow>      <mi>D</mi>      <mo>&#x2062;</mo>      <mi>U</mi>      <mo>&#x2062;</mo>      <mi>T</mi>     </mrow>    </mrow>   </msub>   <mo>-</mo>   <msub>    <mi>M</mi>    <mrow>     <mn>1</mn>     <mo>&#x2062;</mo>     <mn>1</mn>    </mrow>   </msub>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mi>D</mi>    <mo>&#x2062;</mo>    <mi>U</mi>    <mo>&#x2062;</mo>    <msub>     <mi>T</mi>     <mrow>      <mn>1</mn>      <mo>&#x2062;</mo>      <mn>1</mn>     </mrow>    </msub>   </mrow>   <mo>+</mo>   <mrow>    <mn>2</mn>    <mo>&#x2062;</mo>    <mrow>     <mo>(</mo>     <mrow>      <msubsup>       <mi>S</mi>       <mi>a</mi>       <mrow>        <mn>1</mn>        <mo>&#xd7;</mo>        <mn>2</mn>       </mrow>      </msubsup>      <mo>-</mo>      <msup>       <mrow>        <mo>(</mo>        <msubsup>         <mi>S</mi>         <mi>a</mi>         <mrow>          <mn>1</mn>          <mo>&#xd7;</mo>          <mn>2</mn>         </mrow>        </msubsup>        <mo>)</mo>       </mrow>       <mo>&#x2032;</mo>      </msup>      <mo>-</mo>      <mfrac>       <mrow>        <mi>S</mi>        <mo>&#x2062;</mo>        <msub>         <mi>R</mi>         <mn>1</mn>        </msub>       </mrow>       <mn>2</mn>      </mfrac>     </mrow>     <mo>)</mo>    </mrow>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0088" num="0073">Once again, the same generalized calibration term X can be found in this equation. As a result, the reflection from the DUT can be obtained from:</p><p id="p-0089" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>DUT<sub>11</sub>=M<sub>11,DUT </sub>&#x2212;M<sub>11</sub>&#x2212;2&#x3a3;<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0090" num="0074">Since the calibration term representing the reflector loss and splitter asymmetry can be removed using a calibration circuit, as shown, these DUT characterization techniques can be used with 1&#xd7;2 splitters that do not split the light equally between their two output ports. As a result, any splitting ratio can be used if there is a calibration circuit to remove the &#x201c;systematic error&#x201d; added by the splitter asymmetry term. Thus, the splitter choice can be made to minimize its variability more than to maximize the splitting ratio evenness. In some cases, if the DUT to be characterized is significantly lossy, it could be advantageous to use a splitter with a splitting ratio that differs from relatively even 50/50 ratio (e.g., use a 90/10 splitting ratio with 90% of the light sent to the DUT and 10% sent to the reflector). In some implementations, the choice of splitting ratio can be based on increasing (e.g., maximizing) the signal-to-noise ratio for either or both the DUT insertion loss and/or reflection measurements.</p><p id="p-0091" num="0075">These DUT characterization techniques are applicable to the characterization of a variety of types of optical devices that may be included in a PIC. In some cases, for a purely optical DUT, the optical insertion loss is being characterized. Alternatively, these DUT characterization techniques can be used to characterize electro-optical components that include one or more electrical input or output ports. <figref idref="DRAWINGS">FIG. <b>3</b></figref> shows an example device circuit <b>300</b> for an electro-optical DUT <b>302</b> that has an optical input port and an electrical output port, such as a photodiode. The DUT <b>302</b> is on a portion <b>303</b> of a chip that includes an optical coupler <b>304</b> for coupling input light from an off-chip optical source <b>306</b> (e.g., a laser), and an off-chip detector <b>308</b> (e.g., a photodiode detection circuit) that detects a reflection signal coupled back out through the optical coupler <b>304</b> and an off-chip optical circulator <b>309</b>. There is also an optical reflector <b>310</b> and a multi-port optical coupler <b>312</b> for providing the reflection signal. In the case of a photodiode as the DUT <b>302</b>, a bias voltage is applied to the photodiode and a current (e.g., a photocurrent) from the photodiode is measured using an appropriate off-chip detection circuit <b>314</b>. Alternatively, a voltage can be provided to the off-chip detection circuit <b>314</b> using an on-chip transimpedance amplifier to convert the photocurrent to a voltage. In this case, the same calibration circuit <b>120</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b>B</figref> can also be used to remove the calibration term representing the reflector loss and splitter asymmetry for the device circuit <b>300</b>. But, in this case, the calculation accounts for the fact that the device circuit <b>300</b> includes only a single 1&#xd7;2 optical splitter <b>312</b>, and the calibration circuit <b>120</b> includes two 1&#xd7;2 optical splitters <b>132</b>A and <b>132</b>B.</p><p id="p-0092" num="0076">These DUT characterization techniques are also applicable to optical devices having multiple optical input ports and/or multiple output ports. <figref idref="DRAWINGS">FIG. <b>4</b></figref> shows an example device circuit <b>400</b> for a 3-port DUT <b>402</b> that has an optical input port and two optical output ports, such as a 1&#xd7;2 optical splitter. In this case, the on-chip testing interface used to calibrate grating couplers and the corresponding off-chip instrumentation is duplicated for each of the input and output ports of the DUT <b>402</b> for which the insertion loss is to be characterized. The DUT <b>402</b> is on a portion <b>403</b> of a chip that includes optical couplers <b>404</b>A, <b>404</b>B, and <b>404</b>C for coupling input light from off-chip optical sources <b>406</b>A, <b>406</b>B, and <b>406</b>C (e.g., lasers), and off-chip detectors <b>408</b>A, <b>408</b>B, and <b>408</b>C (e.g., photodiode detection circuits) that detect reflection signals coupled back out through the respective optical couplers and off-chip optical circulators <b>409</b>A, <b>409</b>B, and <b>409</b>C. There are also optical reflectors <b>410</b>A, <b>410</b>B, and <b>410</b>C and multi-port optical couplers <b>412</b>A, <b>412</b>B, and <b>412</b>C for providing those reflection signals. In this case, the same calibration circuit <b>120</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b>B</figref> can also be used to remove the calibration term representing the reflector loss and splitter asymmetry for the device circuit <b>400</b>.</p><p id="p-0093" num="0077"><figref idref="DRAWINGS">FIG. <b>5</b></figref> shows an example of a device circuit <b>500</b> that can be used to characterize a working device <b>502</b> as the DUT. Instead of characterizing a device representing a single component as a sample of other components that are fabricated on a wafer, this example shows one way in which the DUT characterization techniques could be used for a working device that may include complex optical circuits as part of a commercial product. The working device <b>502</b> is on a portion <b>503</b> of a chip that includes optical couplers <b>504</b>A and <b>504</b>B for coupling input light from off-chip optical sources <b>506</b>A and <b>506</b>B (e.g., lasers), and off-chip detectors <b>508</b>A and <b>508</b>B (e.g., photodiode detection circuits) that detect reflection signals coupled back out through the respective optical couplers and off-chip optical circulators <b>509</b>A and <b>509</b>B. There are also optical reflectors <b>510</b>A and <b>510</b>B and multi-port optical couplers <b>512</b>A and <b>512</b>B for providing those reflection signals. In this example, the working device <b>502</b> includes a first input port and first output port that are coupled to the on-chip testing interfaces and off-chip instrumentation as before, and also includes an additional input port and an additional output port that are coupled to device interfaces <b>516</b>A and <b>516</b>B that provide alternative paths for sending and receiving working input and output signals, respectively. These device interfaces <b>516</b>A and <b>516</b>B can be part of the same portion <b>503</b> of the chip that includes the working device <b>502</b>, providing an ability to validate the working device <b>502</b> as part of a commercial product, without requiring any reconfiguration between testing characterization and actual product use. The device interfaces <b>516</b>A and <b>516</b>B would be the user ports for connecting to the working device <b>502</b> during operation of the commercial product whereas ports <b>504</b>A and <b>504</b>B are used for connecting to the testing interfaces for characterization of the working device <b>502</b>.</p><p id="p-0094" num="0078">The DUT characterization techniques can also include procedures to characterize the DUT reflection, as described above, and to remove unwanted parasitic reflection coming from multi-path interferences. As SiP circuits grow in terms of number of integrated components, precise characterization of optical components can become more important. For example, precise characterization of scattering parameters as elements of a scattering matrix (also called &#x201c;S-parameter characterization&#x201d;) of each component or sub-component may be required in some cases. Since these matrices may contain a reflection term, a precise characterization of the DUT reflection may be needed. The following are three example techniques for such characterization: an &#x201c;extra port&#x201d; technique, a &#x201c;data processing&#x201d; technique, and a &#x201c;variable optical attenuator (VOA)&#x201d; technique. In addition to enabling characterization of the DUT reflection, both the data processing and the VOA techniques also enable removal of unwanted parasitic reflections from the measurements.</p><p id="p-0095" num="0079">In the extra port technique, to characterize the reflection of a DUT, a device circuit can be modified to prevent the superposition of the reflected signal from the DUT and from the Sagnac reflector (or other component causing at least a partial reflection). This superposition of optical fields would create an interference pattern that may prevent some of the data processing used to perform the characterization. To circumvent this potential issue, a different device circuit <b>600</b>, as shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref>, can use an &#x201c;extra-port&#x201d; technique that makes use of three optical ports for a 2-port DUT <b>602</b>. In this example, there are three grating couplers <b>604</b>A, <b>604</b>B, and <b>604</b>C coupled to Port <b>1</b>, Port <b>2</b>, and Port <b>3</b>, respectively. There are 1&#xd7;2 optical splitters <b>606</b> arranged as shown to connect a Sagnac reflector <b>608</b>. Measurements using all three ports will enable characterization of the insertion loss and reflection characteristics of the DUT <b>602</b>, while preventing the DUT reflection from coming out of the same port reflection from the Sagnac reflector <b>608</b>.</p><p id="p-0096" num="0080">If the higher order terms coming from multiple reflections are neglected, measurements M<sub>11 </sub>and M<sub>22 </sub>will provide the reflection information for the DUT <b>600</b> combined with the GC<sub>1 </sub>and GC<sub>2 </sub>responses, respectively. M<sub>12 </sub>contains the insertion loss from transmission through the DUT <b>600</b> combined with the GC<sub>1 </sub>and GC<sub>2 </sub>responses. M<sub>13 </sub>and M<sub>23 </sub>contain the information for GC<sub>1 </sub>and GC<sub>3</sub>, and GC<sub>2 </sub>and GC<sub>3</sub>, respectively. Finally, M<sub>33 </sub>contains the information for GC<sub>3</sub>. Thus, M<sub>33 </sub>can be used to find the response of GC<sub>3</sub>. Then this information combined with M<sub>13 </sub>and M<sub>23 </sub>enables calculation of the responses for GC<sub>1 </sub>and GC<sub>2</sub>. As a result, M<sub>11</sub>, M<sub>22 </sub>and M<sub>12 </sub>then provide the characterization information for the DUT <b>600</b>. Equations similar to those given above can be used to compute the insertion loss and reflection spectral responses. Also, a calibration circuit without the DUT can be used to determine a calibration term representing the systematic errors of the circuit (e.g., splitter asymmetry and reflector losses).</p><p id="p-0097" num="0081">Thus, for the measurement in transmission, there are four unknowns (3 GCs and 1 DUT). The four measurements used to characterize the transmission insertion loss spectral response are M<sub>12</sub>, M<sub>13</sub>, M<sub>23 </sub>and M<sub>33</sub>. After these measurements, to characterize the reflection spectral response, measurements M<sub>11 </sub>and M<sub>22 </sub>are sufficient since, at this point, GC<sub>1 </sub>and GC<sub>2 </sub>are known. To improve the performance of this extra port technique, the directivity of the 1&#xd7;2 optical splitters can be a criterion used for selection, where &#x201c;directivity&#x201d; indicates how much of the light is going toward port p<b>3</b> of element <b>606</b> when the light comes from port p<b>2</b> (or similarly how much of the light is going toward port p<b>2</b> when the light comes from port p<b>3</b>). A device with good directivity will have light from port p<b>2</b> going to port p <b>1</b> (and some to a loss mode) but no light going toward the other port p<b>3</b>, for example.</p><p id="p-0098" num="0082">In the data processing technique, to characterize the reflection of a DUT, a device circuit can be modified to include delay components (e.g., optical delay lines) as shown in <figref idref="DRAWINGS">FIG. <b>7</b>A</figref> or as shown in <figref idref="DRAWINGS">FIG. <b>7</b>B</figref>. For example, an optical delay line can be implemented using a long waveguide section that is curved around a path that adds additional propagation delay, but has a large enough radius of curvature to avoid significant bend losses. <figref idref="DRAWINGS">FIG. <b>7</b>A</figref> shows an example of a device circuit <b>700</b> for a 2-port DUT <b>702</b> that includes a testing interface <b>704</b>A coupled to a grating coupler <b>706</b>A for Port <b>1</b>, and another testing interface <b>704</b>B coupled to a grating coupler <b>706</b>B for Port <b>2</b>, on either side of the DUT <b>702</b>. In this example, there are also delay components <b>709</b>A and <b>709</b>B in the testing interface <b>704</b>A after the optical splitter <b>708</b>A, and delay components <b>709</b>C and <b>709</b>D in the testing interface <b>704</b>B after the optical splitter <b>708</b>B. There are also Sagnac reflectors <b>710</b>A and <b>710</b>B within each testing interface <b>704</b>A and <b>704</b>B, respectively. <figref idref="DRAWINGS">FIG. <b>7</b>B</figref> shows an alternative example of a device circuit <b>720</b> in which the circuit components are the same except for the placement of the delay component <b>709</b>A within the Sagnac reflector <b>710</b>A and the delay component <b>709</b>C within the Sagnac reflector <b>710</b>B. The reflection measurements made in these examples can be implemented by replacing the off-chip (e.g., laser, circulator, and photodetector) by a device such as an optical vector analyzer (OVA). In addition to an intensity spectral response, an OVA provides an associated phase spectral response as well. Obtaining both the intensity and phase of the measured reflection spectra M<sub>ii </sub>enables Fourier analysis (e.g., computation of a fast Fourier transform (FFT) of these reflection spectra), which enables a time response to be computed. Due to the different delays in the device circuit, the reflections caused by the Sagnac reflector and the DUT will arrive at two different times. Thus, time filtering can be performed on the time responses to isolate these different reflections. The reflection coming from the Sagnac reflector can be used as described herein, while the other reflection signal can be used (when calibrated by the Sagnac reflector signal) to characterize the DUT reflection. Also, by obtaining both the intensity spectral response and phase spectral response of the DUT, a complex spectral response characterizing the DUT can be computed, which can be useful for circuit simulations.</p><p id="p-0099" num="0083">Another potential benefit of the data processing technique comes from the time filtering capability for both reflected and transmitted signals. The measurements Mij associated with transmission can also be obtained using the OVA. As before, higher order terms coming from multiple reflections are ignored in this example. As a result, if the grating couplers and other components in the device circuit are significantly reflective, oscillations may appear in the transmission and reflection measurements, which are artifacts of the device circuit that are not removed by measurements in the corresponding calibration circuit (without the DUT). However, by appropriate selection of the time delays provided by the delay components <b>709</b>A, <b>709</b>B, <b>709</b>C, and <b>709</b>D and/or other delay components (e.g., another delay component can be added between each grating coupler and the connected optical splitter), the multiple reflections will arrive at the OVA at different times than the signals reflected from the DUT and the Sagnac reflectors, enabling them to be filtered out using time-based filtering. For example, the difference between a time delay D<b>1</b> associated with the delay components <b>709</b>A and <b>709</b>C and a time delay D<b>2</b> associated with the delay components <b>709</b>B and <b>709</b>D can be a few picoseconds.</p><p id="p-0100" num="0084">In the VOA technique, instead of using an OVA to obtain the complex spectral response for the different measurements, and performing Fourier analysis to retrieve the DUT reflection, variable optical attenuators (VOAs) can be included in the device circuit to attenuate or completely block signals going into some parts of the device circuit. For example, <figref idref="DRAWINGS">FIG. <b>8</b></figref> shows a device circuit <b>800</b> similar to the device circuit <b>700</b> of <figref idref="DRAWINGS">FIG. <b>7</b>A</figref> but including VOA <b>801</b>, VOA <b>802</b>, VOA <b>803</b>, and VOA <b>804</b>, and <figref idref="DRAWINGS">FIG. <b>9</b></figref> shows a device circuit <b>900</b> similar to the device circuit <b>600</b> of <figref idref="DRAWINGS">FIG. <b>6</b></figref> but including VOA <b>901</b>, VOA <b>902</b>, VOA <b>903</b>, VOA <b>904</b>, VOA <b>905</b>, and VOA <b>906</b>. In some implementations, these VOAs are operated in one of two modes: all-pass mode in which there is essentially no attenuation applied, or a blocking mode in which significant attenuation is applied to block essentially all optical power from passing. In the following, a notation is used where the x in M<sub>y</sub>, indicates which VOA is in a in a blocking mode, y indicates the output port and z indicates the input port. Referring to <figref idref="DRAWINGS">FIG. <b>8</b></figref>, for the M<sub>11 </sub>measurement, if the VOA <b>802</b> is in the blocking mode (yielding measurement M<sub>11</sub><sup>2</sup>), the response will not contain information coming from the DUT <b>702</b> whereas if the VOA <b>801</b> is in the blocking mode (yielding measurement M<sub>11</sub><sup>1</sup>), the measurement will not contain information from the Sagnac reflector <b>710</b>A. So, M<sub>11</sub><sup>1 </sup>and M<sub>11</sub><sup>2 </sup>can be used to characterize both the grating couplers <b>706</b>A and <b>706</b>B and the reflection of the DUT <b>702</b> independently. For the M<sub>12 </sub>measurement, the VOA <b>801</b> and the VOA <b>803</b> can also be set in blocking mode to prevent MPI that could result from an imperfect splitter directivity.</p><p id="p-0101" num="0085">Similarly, <figref idref="DRAWINGS">FIG. <b>9</b></figref> shows an example in which similar measurements can be made for the &#x201c;extra-port&#x201d; technique. The six VOAs <b>901</b>, <b>902</b>, <b>903</b>, <b>904</b>, <b>905</b>, and <b>906</b> are used to remove the grating coupler response from the optical measurement of a reflective DUT <b>602</b> while preventing the reflection from the DUT <b>602</b> from coming out of the same port as a signal reflected from the Sagnac reflector <b>608</b>. Generally, the VOAs prevent MPI coming from other components.</p><p id="p-0102" num="0086">In other examples, various alternatives of the VOA technique can include replacing VOAs with other components. For example, instead of using VOAs to block access to certain paths of a circuit, the splitter/VOA functionality in these examples could be replicated by using a tunable splitter.</p><p id="p-0103" num="0087">In an alternative DUT characterization technique, if only the transmission of the DUT needs to be characterized, the optical couplers before and after the DUT do not have to be characterized independently but can instead be characterized together and measured as one unknown parameter. For example, if VOAs and/or delay elements are included in the device circuit, the summation of the insertion losses of the two optical couplers can be identified together. In this example, no Sagnac reflectors are needed in the device circuit. <figref idref="DRAWINGS">FIG. <b>10</b></figref> shows an example of this alternative technique, where a device circuit <b>1000</b> includes a DUT <b>1002</b>, a grating coupler <b>1004</b>A for Port <b>1</b> connected to an optical splitter <b>1006</b>A, and a grating coupler <b>1004</b>B for Port <b>2</b> connected to an optical splitter <b>1006</b>B. In one path of the device circuit <b>1000</b> is the DUT <b>1002</b> with different delay components <b>1021</b> and <b>1022</b> on either side of the DUT <b>1002</b>. The device circuit <b>1000</b> also includes a second path in which the optical splitter <b>1006</b>A and the optical splitter <b>1006</b>B are connected directly by a waveguide. There are also four VOAs, with VOA <b>1011</b>, VOA <b>1012</b>, VOA <b>1013</b>, and VOA <b>1014</b> each controlling transfer of optical power between a port of one of the optical splitters and a path of the device circuit <b>1000</b>.</p><p id="p-0104" num="0088">The measurements M<sub>12 </sub><sup>1</sup>and M<sub>12</sub><sup>2 </sup>(where, again, the x in M<sub>yz</sub><sup>x</sup>, indicates which VOA is in a in a blocking mode, y indicates the output port and z indicates the input port) are sufficient for characterizing the DUT <b>1002</b>. In this case, neglecting the terms coming from multiple reflections yields:</p><p id="p-0105" num="0000"><maths id="MATH-US-00012" num="00012"><math overflow="scroll"> <mrow>  <mrow>   <msubsup>    <mi>M</mi>    <mrow>     <mn>1</mn>     <mo>&#x2062;</mo>     <mn>2</mn>    </mrow>    <mn>1</mn>   </msubsup>   <mo>[</mo>   <mi>dB</mi>   <mo>]</mo>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msup>     <mrow>      <mo>(</mo>      <msubsup>       <mi>S</mi>       <mi>a</mi>       <mrow>        <mn>1</mn>        <mo>&#xd7;</mo>        <mn>2</mn>       </mrow>      </msubsup>      <mo>)</mo>     </mrow>     <mo>&#x2032;</mo>    </msup>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>b</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msup>     <mrow>      <mo>(</mo>      <msubsup>       <mi>S</mi>       <mi>b</mi>       <mrow>        <mn>1</mn>        <mo>&#xd7;</mo>        <mn>2</mn>       </mrow>      </msubsup>      <mo>)</mo>     </mrow>     <mo>&#x2032;</mo>    </msup>    <mo>+</mo>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>2</mn>     </msub>    </mrow>   </mrow>   <mo>=</mo>   <mrow>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>2</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>b</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msup>     <mrow>      <mo>(</mo>      <msubsup>       <mi>S</mi>       <mi>a</mi>       <mrow>        <mn>1</mn>        <mo>&#xd7;</mo>        <mn>2</mn>       </mrow>      </msubsup>      <mo>)</mo>     </mrow>     <mo>&#x2032;</mo>    </msup>    <mo>+</mo>    <msup>     <mrow>      <mo>(</mo>      <msubsup>       <mi>S</mi>       <mi>b</mi>       <mrow>        <mn>1</mn>        <mo>&#xd7;</mo>        <mn>2</mn>       </mrow>      </msubsup>      <mo>)</mo>     </mrow>     <mo>&#x2032;</mo>    </msup>   </mrow>  </mrow> </mrow></math></maths><maths id="MATH-US-00012-2" num="00012.2"><math overflow="scroll"> <mrow>  <mrow>   <msubsup>    <mi>M</mi>    <mrow>     <mn>1</mn>     <mo>&#x2062;</mo>     <mn>2</mn>    </mrow>    <mn>2</mn>   </msubsup>   <mo>[</mo>   <mi>dB</mi>   <mo>]</mo>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>S</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <mrow>     <mi>D</mi>     <mo>&#x2062;</mo>     <mi>U</mi>     <mo>&#x2062;</mo>     <mi>T</mi>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>b</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>S</mi>     <mi>b</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>2</mn>     </msub>    </mrow>   </mrow>   <mo>=</mo>   <mrow>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>1</mn>     </msub>    </mrow>    <mo>+</mo>    <mrow>     <mi>G</mi>     <mo>&#x2062;</mo>     <msub>      <mi>C</mi>      <mn>2</mn>     </msub>    </mrow>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>T</mi>     <mi>b</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>S</mi>     <mi>a</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <msubsup>     <mi>S</mi>     <mi>b</mi>     <mrow>      <mn>1</mn>      <mo>&#xd7;</mo>      <mn>2</mn>     </mrow>    </msubsup>    <mo>+</mo>    <mrow>     <mi>D</mi>     <mo>&#x2062;</mo>     <mi>U</mi>     <mo>&#x2062;</mo>     <mi>T</mi>    </mrow>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0106" num="0089">So, subtracting these two equations gives:</p><p id="p-0107" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>M<sub>12</sub><sup>2</sup><i>&#x2212;M</i><sub>12</sub><sup>1</sup><i>=GC</i><sub>1</sub><i>+GC</i><sub>2</sub><i>+T</i><sub>a</sub><sup>1&#xd7;2</sup><i>+T</i><sub>b</sub><sup>1&#xd7;2</sup><i>+S</i><sub>a</sub><sup>1&#xd7;2</sup><i>+S</i><sub>b</sub><sup>1&#xd7;2</sup><i>+DUT</i>&#x2212;(<i>GC</i><sub>1</sub><i>+GC</i><sub>2</sub><i>+T</i><sub>a</sub><sup>1&#xd7;2</sup><i>+T</i><sub>b</sub><sup>1&#xd7;2</sup>+(<i>S</i><sub>a</sub><sup>1&#xd7;2</sup>)&#x2032;+(<i>S</i><sub>b</sub><sup>1&#xd7;2</sup>)&#x2032;)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0108" num="0000">After regrouping the terms, we have:</p><p id="p-0109" num="0000"><maths id="MATH-US-00013" num="00013"><math overflow="scroll"> <mrow>  <mrow>   <msubsup>    <mi>M</mi>    <mrow>     <mn>1</mn>     <mo>&#x2062;</mo>     <mn>2</mn>    </mrow>    <mn>2</mn>   </msubsup>   <mo>-</mo>   <msubsup>    <mi>M</mi>    <mrow>     <mn>1</mn>     <mo>&#x2062;</mo>     <mn>2</mn>    </mrow>    <mn>1</mn>   </msubsup>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mi>D</mi>    <mo>&#x2062;</mo>    <mi>U</mi>    <mo>&#x2062;</mo>    <mi>T</mi>   </mrow>   <mo>+</mo>   <munder>    <munder>     <mrow>      <mrow>       <mo>(</mo>       <mrow>        <msubsup>         <mi>S</mi>         <mi>a</mi>         <mrow>          <mn>1</mn>          <mo>&#xd7;</mo>          <mn>2</mn>         </mrow>        </msubsup>        <mo>-</mo>        <msup>         <mrow>          <mo>(</mo>          <msubsup>           <mi>S</mi>           <mi>a</mi>           <mrow>            <mn>1</mn>            <mo>&#xd7;</mo>            <mn>2</mn>           </mrow>          </msubsup>          <mo>)</mo>         </mrow>         <mo>&#x2032;</mo>        </msup>       </mrow>       <mo>)</mo>      </mrow>      <mo>+</mo>      <mrow>       <mo>(</mo>       <mrow>        <msubsup>         <mi>S</mi>         <mi>b</mi>         <mrow>          <mn>1</mn>          <mo>&#xd7;</mo>          <mn>2</mn>         </mrow>        </msubsup>        <mo>-</mo>        <msup>         <mrow>          <mo>(</mo>          <msubsup>           <mi>S</mi>           <mi>b</mi>           <mrow>            <mn>1</mn>            <mo>&#xd7;</mo>            <mn>2</mn>           </mrow>          </msubsup>          <mo>)</mo>         </mrow>         <mo>&#x2032;</mo>        </msup>       </mrow>       <mo>)</mo>      </mrow>     </mrow>     <mo>&#xfe38;</mo>    </munder>    <mrow>     <mn>1</mn>     <mo>&#xd7;</mo>     <mn>2</mn>     <mo>&#x2062;</mo>     <mtext>  </mtext>     <mi>Splitter</mi>     <mo>&#x2062;</mo>     <mtext>  </mtext>     <mi>asymetry</mi>    </mrow>   </munder>  </mrow> </mrow></math></maths></p><p id="p-0110" num="0090">This alternative DUT characterization technique can be used with a device circuit without a corresponding calibration circuit if the optical splitters have a low asymmetry. Or, a calibration circuit can be used to characterize the systematic optical splitter asymmetry. So, the resulting uncertainty in the measurements to characterize the DUT depends on the variability of the optical splitters but not on the asymmetry.</p><p id="p-0111" num="0091">In an example of a time filtering approach, if the VOAs are removed, and instead delay components are used to make sure that both measurements (M<sub>12</sub><sup>1 </sup>and M<sub>12</sub><sup>2</sup>) arrive the output port at two different times, an OVA can be used to characterize the transmission using time filtering applied to the signals (e.g., using processing techniques as described herein). A potential benefit of this time filtering approach is the ability to avoid the electrical contacts that would otherwise be used for the VOAs, at the expense of performing more complex processing and potentially more expensive off-chip equipment (e.g., one or more lasers and one or more photodetectors may be less expensive than an OVA system).</p><p id="p-0112" num="0092"><figref idref="DRAWINGS">FIG. <b>11</b></figref> shows a flowchart of an example method <b>1100</b> for characterizing a photonic device (DUT) in a photonic layer of an integrated circuit. The method <b>1100</b> includes coupling (<b>1110</b>) an optical wave into a first optical coupler in the photonic layer. The method <b>1100</b> includes receiving (<b>1120</b>) an output signal from the photonic device in response to the photonic device receiving a first portion of the optical wave. The method <b>1100</b> includes receiving (<b>1130</b>) a second portion of the optical wave from the first optical coupler, where the second portion of the optical wave was not coupled into the photonic device. The receiving the output signal (e.g., an optical output signal or an electronic output signal) and the receiving of the second portion of the optical wave (e.g., reflected and coupled back out of the first optical coupler) can be done concurrently, or in any order. The method <b>1100</b> also includes characterizing (<b>1140</b>) at least one of an optical transmission characteristic or an optical reflection characteristic of the photonic device based at least in part on the received second portion of the optical wave and the received output signal.</p><p id="p-0113" num="0093">While the disclosure has been described in connection with certain embodiments, it is to be understood that the disclosure is not to be limited to the disclosed embodiments but, on the contrary, is intended to cover various modifications and equivalent arrangements included within the scope of the appended claims, which scope is to be accorded the broadest interpretation so as to encompass all such modifications and equivalent structures as is permitted under the law.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-math idrefs="MATH-US-00001 MATH-US-00001-2 MATH-US-00001-3" nb-file="US20230003614A1-20230105-M00001.NB"><img id="EMI-M00001" he="23.62mm" wi="76.20mm" file="US20230003614A1-20230105-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00002" nb-file="US20230003614A1-20230105-M00002.NB"><img id="EMI-M00002" he="12.36mm" wi="76.20mm" file="US20230003614A1-20230105-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00003" nb-file="US20230003614A1-20230105-M00003.NB"><img id="EMI-M00003" he="16.26mm" wi="76.20mm" file="US20230003614A1-20230105-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00004" nb-file="US20230003614A1-20230105-M00004.NB"><img id="EMI-M00004" he="16.26mm" wi="76.20mm" file="US20230003614A1-20230105-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00005" nb-file="US20230003614A1-20230105-M00005.NB"><img id="EMI-M00005" he="16.26mm" wi="76.20mm" file="US20230003614A1-20230105-M00005.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00006" nb-file="US20230003614A1-20230105-M00006.NB"><img id="EMI-M00006" he="9.14mm" wi="76.20mm" file="US20230003614A1-20230105-M00006.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00007" nb-file="US20230003614A1-20230105-M00007.NB"><img id="EMI-M00007" he="5.25mm" wi="76.20mm" file="US20230003614A1-20230105-M00007.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00008" nb-file="US20230003614A1-20230105-M00008.NB"><img id="EMI-M00008" he="5.25mm" wi="76.20mm" file="US20230003614A1-20230105-M00008.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00009" nb-file="US20230003614A1-20230105-M00009.NB"><img id="EMI-M00009" he="7.37mm" wi="76.20mm" file="US20230003614A1-20230105-M00009.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00010" nb-file="US20230003614A1-20230105-M00010.NB"><img id="EMI-M00010" he="6.69mm" wi="76.20mm" file="US20230003614A1-20230105-M00010.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00011" nb-file="US20230003614A1-20230105-M00011.NB"><img id="EMI-M00011" he="5.67mm" wi="76.20mm" file="US20230003614A1-20230105-M00011.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00012 MATH-US-00012-2" nb-file="US20230003614A1-20230105-M00012.NB"><img id="EMI-M00012" he="15.16mm" wi="76.20mm" file="US20230003614A1-20230105-M00012.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00013" nb-file="US20230003614A1-20230105-M00013.NB"><img id="EMI-M00013" he="6.69mm" wi="76.20mm" file="US20230003614A1-20230105-M00013.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. An integrated circuit, comprising:<claim-text>at least one photonic layer that includes one or more optical waveguides;</claim-text><claim-text>a first optical coupler that couples at least a first optical mode outside of the photonic layer to a first waveguide in the photonic layer;</claim-text><claim-text>an electro-optical component that includes at least one optical input port in the photonic layer and at least one electrical output port;</claim-text><claim-text>a first multi-port optical coupler that includes three or more ports in the photonic layer, including<claim-text>a first port optically coupled to the first optical coupler,</claim-text><claim-text>a second port optically coupled to the optical input port of the electro-optical component, and</claim-text></claim-text><claim-text>a third port optically coupled to a first optical reflector configured to send substantially all optical power emitted from the third port of the first multi-port optical coupler back to the third port of the first multi-port optical coupler.</claim-text></claim-text></claim><claim id="CLM-002-4" num="002-4"><claim-text><b>2</b>.-<b>4</b>. (canceled)</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising<claim-text>a second optical coupler that couples a second optical mode outside of the photonic layer to a second waveguide in the photonic layer;</claim-text><claim-text>a third optical coupler that couples a third optical mode outside of the photonic layer to a third waveguide in the photonic layer;</claim-text><claim-text>a second multi-port optical coupler that includes three or more ports in the photonic layer, including<claim-text>a first port optically coupled to the second optical coupler,</claim-text><claim-text>a second port isolated from the electro-optical component, and</claim-text><claim-text>a third port optically coupled to a second optical reflector configured to send substantially all optical power emitted from the third port of the second multi-port optical coupler back to the third port of the second multi-port optical coupler; and</claim-text></claim-text><claim-text>a third multi-port optical coupler that includes three or more ports in the photonic layer, including<claim-text>a first port optically coupled to the third optical coupler,</claim-text><claim-text>a second port optically isolated from the electro-optical component and coupled to the second port of the second multi-port optical coupler, and</claim-text><claim-text>a third port optically coupled to a third optical reflector configured to send substantially all optical power emitted from the third port of the third multi-port optical coupler back to the third port of the third multi-port optical coupler.</claim-text></claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. (canceled)</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the electro-optical component comprises a photodiode.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first optical coupler comprises a grating coupler or an edge coupler.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the photonic layer includes one or more optical delay lines configured to provide different propagation delays: (1) between the first multi-port optical coupler and the first optical reflector, and (2) between the first multi-port optical coupler and the electro-optical component.</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first optical reflector comprises a Sagnac loop reflector.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the photonic layer includes one or more variable optical attenuators configured to provide control of optical power propagating within different portions of the photonic layer.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. (canceled)</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. A method for characterizing a photonic device in a photonic layer of an integrated circuit, comprising:<claim-text>coupling an optical wave into a first optical coupler in the photonic layer;</claim-text><claim-text>providing an output signal from the photonic device in response to the photonic device receiving a first portion of the optical wave;</claim-text><claim-text>providing a second portion of the optical wave from the first optical coupler, wherein the second portion of the optical wave was not coupled into the photonic device; and</claim-text><claim-text>characterizing at least one of an optical transmission characteristic or an optical reflection characteristic of the photonic device based at least in part on the second portion of the optical wave and the output signal.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the output signal comprises at least one of an optical wave, a current, or a voltage.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the characterizing includes performing time filtering to distinguish the second portion of the optical wave and the output signal based at least in part on one or more optical delay lines in the photonic layer.</claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein at least one of providing the output signal or providing the second portion of the optical wave is performed while attenuating at least one optical wave in a waveguide in the photonic layer.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the characterizing includes subtracting a value based on the second portion of the optical wave from a value based on the output signal.</claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the output signal from the photonic device comprises an optical wave from the photonic device, and the characterizing is based at least in part on a first output optical wave coupled out of a second optical coupler in the photonic layer in a first time period including a portion of the optical wave from the photonic device, and a second output optical wave coupled out of the second optical coupler in a second time period including a portion of the second portion of the optical wave.</claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. An integrated circuit, comprising:<claim-text>at least one photonic layer that includes one or more optical waveguides;</claim-text><claim-text>a first grating coupler that couples at least a first optical mode outside of the photonic layer to a first waveguide in the photonic layer;</claim-text><claim-text>an electro-optical component that includes at least one optical input port in the photonic layer and at least one electrical output port;</claim-text><claim-text>a first optical splitter that includes three or more ports in the photonic layer, including<claim-text>a first port optically coupled to the first grating coupler,</claim-text><claim-text>a second port optically coupled to the optical input port of the electro-optical component, and</claim-text><claim-text>a third port optically coupled to a first-Sagnac loop reflector.</claim-text></claim-text></claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. (canceled)</claim-text></claim><claim id="CLM-00021" num="00021"><claim-text><b>21</b>. The integrated circuit of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the first port is directly connected to the first optical coupler by the first waveguide.</claim-text></claim><claim id="CLM-00022" num="00022"><claim-text><b>22</b>. The integrated circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first port is directly connected to the first optical coupler by the first waveguide.</claim-text></claim><claim id="CLM-00023" num="00023"><claim-text><b>23</b>. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the photonic device comprises an electro-optical component that includes at least one optical input port in the photonic layer and at least one electrical output port.</claim-text></claim><claim id="CLM-00024" num="00024"><claim-text><b>24</b>. The method of <claim-ref idref="CLM-00023">claim 23</claim-ref>, wherein the electro-optical component comprises a photodiode.</claim-text></claim><claim id="CLM-00025" num="00025"><claim-text><b>25</b>. The method of <claim-ref idref="CLM-00023">claim 23</claim-ref>, wherein the coupling of the optical wave is performed by a first optical coupler that couples at least a first optical mode outside of the photonic layer to a first waveguide in the photonic layer, and the first waveguide is optically coupled to a first multi-port optical coupler that includes three or more ports in the photonic layer, including<claim-text>a first port optically coupled to the first optical coupler,</claim-text><claim-text>a second port optically coupled to the optical input port of the electro-optical component, and</claim-text><claim-text>a third port optically coupled to a first optical reflector configured to send substantially all optical power emitted from the third port of the first multi-port optical coupler back to the third port of the first multi-port optical coupler.</claim-text></claim-text></claim><claim id="CLM-00026" num="00026"><claim-text><b>26</b>. The method of <claim-ref idref="CLM-00025">claim 25</claim-ref>, wherein the first port is directly connected to the first optical coupler by the first waveguide.</claim-text></claim></claims></us-patent-application>