<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230004466A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230004466</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17929345</doc-number><date>20220902</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>F</subclass><main-group>11</main-group><subgroup>14</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>F</subclass><main-group>16</main-group><subgroup>27</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>F</subclass><main-group>11</main-group><subgroup>1469</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>F</subclass><main-group>11</main-group><subgroup>1464</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20190101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>F</subclass><main-group>16</main-group><subgroup>27</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>F</subclass><main-group>2201</main-group><subgroup>84</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">REPLICATION FOR CYBER RECOVERY FOR MULTIPLE TIER DATA</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>17069463</doc-number><date>20201013</date></document-id><parent-grant-document><document-id><country>US</country><doc-number>11436103</doc-number></document-id></parent-grant-document></parent-doc><child-doc><document-id><country>US</country><doc-number>17929345</doc-number></document-id></child-doc></relation></continuation></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>EMC IP Holding Company LLC</orgname><address><city>Hopkinton</city><state>MA</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Madan</last-name><first-name>Nitin</first-name><address><city>Cupertino</city><state>CA</state><country>US</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Gunda</last-name><first-name>Kalyan C.</first-name><address><city>Bangalore</city><country>IN</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>Bhanjois</last-name><first-name>Bhimsen</first-name><address><city>Fremont</city><state>CA</state><country>US</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">Replication of a filesystem or a mount point or share may replicate all data that it consists of irrespective of where the data is stored. Replication protects data irrespective of location. One method is to replicate the filesystem namespace as is while skipping the data outside of the appliance/machine so that replication cost and time are reasonable. The data outside of the machine, like cloud/tape data is protected differently. One example method includes a data protection operation configured to replication a namespace associated with multiple data tiers. During replication, data from one of the tiers is skipped while all of the namespace metadata is replicated. The recovery restores the namespace metadata and the data that was replicated from the other tier. This may be performed in connection with cyber security, for example when replicating multi-tier data to a vault.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="93.64mm" wi="158.75mm" file="US20230004466A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="196.60mm" wi="116.84mm" orientation="landscape" file="US20230004466A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="214.38mm" wi="129.29mm" orientation="landscape" file="US20230004466A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="196.93mm" wi="146.47mm" orientation="landscape" file="US20230004466A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">FIELD OF THE INVENTION</heading><p id="p-0002" num="0001">Embodiments of the present invention generally relate to data protection. More particularly, at least some embodiments of the invention relate to systems, hardware, software, computer-readable media, and methods for data protection operations including replication operations and cyber security operations.</p><heading id="h-0002" level="1">BACKGROUND</heading><p id="p-0003" num="0002">Data protection is an import aspect of computing environments. If an entity fails to protect their data, any type of data loss can prove problematic or even catastrophic from the entity's perspective and from the perspective of their customers. Fortunately, there are many ways to protect data today and most entities have some form of data protection.</p><p id="p-0004" num="0003">While many entities have data protection, there is still room for improvement for a variety of reasons. For example, not all entities store data in the same manner. For example, some entities may store all of their data locally. Other entities may use cloud-based storage or a hybrid storage arrangement. Further, the computing environment may also differ. Applications may be run using physical machines, virtual machines, or other arrangements. These arrangements, and others, can complicate data protection operations.</p><p id="p-0005" num="0004">In addition, data protection systems may not simply protect from data corruption or data loss. Data protection systems may also need to consider and protect against cyber threats such as ransomware.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0006" num="0005">In order to describe the manner in which at least some of the advantages and features of the invention may be obtained, a more particular description of embodiments of the invention will be rendered by reference to specific embodiments thereof which are illustrated in the appended drawings. Understanding that these drawings depict only typical embodiments of the invention and are not therefore to be considered to be limiting of its scope, embodiments of the invention will be described and explained with additional specificity and detail through the use of the accompanying drawings.</p><p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. <b>1</b></figref> discloses aspects of a computing environment that includes a data protection system configured to perform data protection operations;</p><p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates an example of a data protection operation performing data protection operations in a computing environment;</p><p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates an example of a method for performing a data protection operation that includes a replication operation;</p><p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrates an example of a method for performing a data protection operation such as a recovery operation; and</p><p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. <b>5</b></figref> illustrates an example of a method for performing a replication operation.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0004" level="1">DETAILED DESCRIPTION OF SOME EXAMPLE EMBODIMENTS</heading><p id="p-0012" num="0011">Embodiments of the present invention generally relate to data protection and data protection operations. More particularly, at least some embodiments of the invention relate to systems, hardware, software, computer-readable media, and methods for data protection operations including, by way of example, backup operations, recovery operations, replication operations, vault operations, multi-tier data protection operations, cyber-recovery operations, security operations, or the like or combination thereof.</p><p id="p-0013" num="0012">More specifically, example embodiments of the invention relate to replicating data that is stored on multiple tiers. Embodiments of the invention further relate to security operations to secure or protect the data from threats such as ransomware and other cyber threats. Embodiments of the invention may be implemented in, by way of example only, DELLEMC Data Domain and Retention Lock.</p><p id="p-0014" num="0013">Replication, by way of example only, includes copying data from a source or production site to a target or destination site such that the backup copy is the same as the production copy. Replication may be implemented such that writes occurring at the production site are also written to the destination site. In one example, this is achieved using snapshots. When a snapshot of source data is taken, the snapshot copy or the data corresponding to the snapshot is written to the destination site. In one example, where snapshots are taken repeatedly over time, a snapshot may identify data that has changed since a prior snapshot. In this case, the replication time may be shorter because the amount of data that has changed is usually much less than the amount of data that has not changed and has already been replicated. A snapshot may also copy all data from the production site, at the time the snapshot was taken, to the destination site.</p><p id="p-0015" num="0014">In one example, embodiments of the invention replicate production data to a target or destination. The target may be a vault that is configured to apply a retention lock to the replicated data. In other words, once the data from the source (the production site) is copied into the vault, the data can no longer be changed or deleted once the retention lock is applied. This protects the data against threats such as ransomware.</p><p id="p-0016" num="0015">For example, source data may be attacked and modified. The operation of the data protection system may even replicate or copy the modified data to the vault. However, previous copies of the data are not changed at the vault because of the retention lock. This ensures that a valid and recent copy of the data is available based on various protection settings and other factors associated with the vault. In one example, the vault may have more than one copy. One copy may be subject to a retention lock and the other a replica of the source.</p><p id="p-0017" num="0016">Embodiments of the invention further relate to protecting multi-tier data. For example, a production site may use data that is stored on a local or active tier and in a cloud tier. Embodiments of the invention include data protection operations for production data that may be stored in more than one tier such as a local tier and a cloud tier. The local tier may also be referred to as a production tier. Generally, the local or production tier is an on-premise tier that is distinct from data stored in a cloud tier.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>1</b></figref> illustrates a data protection system that is configured to perform data protection operations for multiple tiers of data. <figref idref="DRAWINGS">FIG. <b>1</b></figref> illustrates a replication appliance <b>104</b> (e.g., DELLEMC Data Domain) that is configured to perform data protection operations including replication operations. The replication appliance <b>104</b>, which is an example of a data protection system, is configured to protect data, which may be organized in various manners and may include data, virtual machines, applications, or the like, associated with a production site <b>102</b>. The production site <b>102</b> includes a local tier or local data <b>110</b> and a cloud tier or cloud data <b>112</b>. In addition to performing replication operations, embodiments of the invention also include security operations to protect from cyber threats such as ransomware. In one example, the replication operation also provides protection from threats such as ransomware. In one example, the security operation may be integrated into or executed as part of the replication operation.</p><p id="p-0019" num="0018">The local data <b>110</b> may be stored locally to the production site <b>102</b> or on-premise. The local data <b>110</b> may include data, virtual machines, applications, or any other configuration that may be replicated or protected. The cloud data <b>112</b> may include data stored in the cloud and may also include data of different types. The cloud data <b>112</b> may be stored as blocks, objects, or the like.</p><p id="p-0020" num="0019">The replication appliance <b>104</b> may perform or direct snapshot operations in the production site <b>102</b> and then replicate the resulting snapshots. More specifically, the local data <b>110</b> and the cloud data <b>112</b> may be part of a single namespace. A namespace, by way of example, may be associated with a snapshot. The production site <b>102</b> may have multiple namespaces and may generate snapshots for each namespace. Each namespace could be replicated separately. In this example, a snapshot <b>116</b> of a namespace may include or reference both local data <b>110</b> and cloud data <b>112</b>. The snapshot <b>116</b> thus references data spread across or located on different tiers.</p><p id="p-0021" num="0020">In <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the snapshot <b>116</b> is replicated to a vault <b>108</b>, which stores the replicated data or snapshot <b>116</b> as backups <b>114</b>. When multiple snapshots are stored or included in the backups <b>114</b>, the production site <b>102</b> can recover to various points in time include a point in time that does not include corrupted or compromised data.</p><p id="p-0022" num="0021">In this example, the vault <b>108</b>, which may be an appliance similar to the appliance <b>104</b>, is associated with an air gap <b>106</b>. The air gap <b>106</b> functions such that the vault <b>108</b> is connected to a network or to the replication appliance <b>104</b> only when necessary. When replication is not being performed, the vault <b>108</b> is disconnected or separated from most or all network connections. More specifically, the network connections, after replication, with systems outside the vault is broken or stopped. There may be other connections with other systems in the vault that remain. This helps prevent the vault <b>108</b> from being the subject of a cyber-attack. In addition, a retention lock may be applied to the backups <b>114</b>. This helps ensure that compromised data that may be replicated to the vault <b>108</b> in a given snapshot does not impact or affect previously stored copies, snapshot, or other backups <b>114</b>.</p><p id="p-0023" num="0022">If the snapshot were required to include all of the relevant local data <b>110</b> and cloud data <b>112</b>, the replication of the data would experience issues when, for example, the cloud data <b>112</b> is not accessible or because the connection to the cloud data <b>112</b> is slower. More specifically, when the vault is providing cyber protection, which includes the air gap <b>106</b>, the amount of time the production site <b>102</b> is connected to the vault <b>108</b> should be minimized.</p><p id="p-0024" num="0023">The replication performed by the replication appliance <b>104</b> is configured to replicate a snapshot such that cyber threats are minimized or reduced by ensuring that the air gap <b>106</b> is open as little as possible. Generally, this is achieved by selectively replicating a snapshot. More specifically, the replication appliance <b>104</b> may not actually replicate the cloud data. The namespace metadata, however, would be replicated. This accounts for the fact that an attack on the production site <b>102</b> may not be occurring at the cloud data <b>112</b>.</p><p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates an example of a data protection system that replicates multi-tier data from a production site to a target or destination site. <figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates a replication appliance <b>208</b> configured to replicate data from both a production tier <b>202</b> and a cloud tier <b>212</b> to, in this example, a vault <b>210</b>. However, the replication could be to a target destination in the cloud or another site and the vault <b>210</b> may not be associated with an air gap.</p><p id="p-0026" num="0025">In one example, replication is performed based on a namespace basis. The namespace may be a logical partition of a filesystem, for example. In this example, the namespace <b>204</b> includes at least a part of the production tier <b>202</b>, which is local to a production site, and a portion of a cloud tier <b>212</b>, which is cloud-based.</p><p id="p-0027" num="0026">In one example, the replication operation replicates a snapshot of the namespace by copying the namespace metadata <b>214</b> to the vault <b>210</b> during replication. The namespace metadata <b>214</b> references all of the data in the snapshot and includes metadata for the production tier <b>202</b> and metadata for the cloud tier <b>212</b>. When replicating the data in the namespace <b>204</b>, data from the cloud tier <b>212</b> is skipped and is not replicated from the cloud tier <b>212</b> to the vault <b>210</b>. More specifically, as a file (block, chunk, etc.) is replicated, the source or location of the file is determined. If the location is the cloud tier <b>212</b>, the data corresponding to the file is skipped and is not replicated. If the location is the production tier <b>202</b>, the data <b>206</b> corresponding to the file is included and replicated to the vault <b>210</b>.</p><p id="p-0028" num="0027">As a result of this replication, the vault <b>210</b>, for each snapshot, may include namespace metadata <b>214</b> and data <b>216</b>. The namespace metadata <b>214</b> may reference data in the cloud tier/data <b>212</b> and in the local tier/data <b>206</b>, but the data <b>216</b> does not include data from the cloud tier <b>212</b>. The data <b>216</b> only includes the local data <b>206</b> corresponding to the snapshot or corresponding to the replication.</p><p id="p-0029" num="0028">When storing the data <b>216</b>, it may be necessary to adjust checksums or other verification methods associated with the snapshot to account for the data that was not retrieved from the cloud tier <b>212</b>, which is not included in the data <b>216</b>.</p><p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates an example method for replicating data. The method <b>300</b> includes a snapshot operation. Thus, the replication may begin after the snapshot is initiated and performed. The data corresponding to the snapshot or to the namespace can then be replicated. The elements of the method <b>300</b> may be performed in various orders and some elements may be performed concurrently. For example, an appliance may replicate the snapshot in batches, where each batch includes data and/or metadata.</p><p id="p-0031" num="0030">In the method <b>300</b>, the namespace metadata is replicated <b>302</b> by the replication appliance <b>208</b> to the vault <b>210</b>. The namespace metadata <b>302</b> may point to the data in the production tier <b>202</b> and in the cloud tier <b>212</b> being copied or replicated. Because the data subject to the snapshot may include the local data <b>206</b> and data from the cloud tier <b>212</b>, the namespace metadata <b>302</b> may point to locations in the production tier <b>202</b> and in the cloud tier <b>212</b>.</p><p id="p-0032" num="0031">The method <b>300</b> then replicates <b>304</b> the local or production tier <b>202</b>. More specifically, this is achieved by copying the data <b>206</b> associated with the snapshot <b>218</b> to the vault <b>214</b>. Data associated with the snapshot <b>218</b> that is located in the cloud tier <b>212</b> is skipped <b>306</b> and is not replicated or copied to the vault <b>210</b>. After the snapshot <b>218</b> is replicated, the data <b>216</b> only includes data from the local data <b>206</b> in the local tier. Safeguards, such as checksums, are adjusted <b>308</b> to account for the skipped data from the cloud tier <b>212</b>.</p><p id="p-0033" num="0032"><figref idref="DRAWINGS">FIGS. <b>2</b> and <b>3</b></figref> illustrate an example of providing data protection in the context of cyber threats. In many instances, because the production tier <b>202</b> is distinct (e.g., located at different locations) from the cloud tier <b>212</b>, an attack on the production tier <b>202</b> may not impact the data in the cloud tier <b>212</b>. As a result, the data in the production tier <b>202</b> is protected from threats such as ransomware. Advantageously, the snapshot-based replication is not impeded by latencies (read times, download times, etc.) associated with the cloud tier <b>212</b>.</p><p id="p-0034" num="0033">Advantageously, replication performed by the replication appliance <b>208</b> does not fall behind if the cloud tier <b>212</b> is not available or is slow. Further, the amount of time that the air gap is closed is controlled and not unnecessarily extended based on cloud connectivity and other cloud related latencies. Embodiments of the invention minimize and/or prevent any effect on the production site or namespace <b>204</b> in terms of namespace, resource usage, performance, and the like.</p><p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrates an example of a recovery operation. In this example, the recovery operation operates to recovery the data from the vault (or other backup site). In this case, the data from the production tier is restored or recovered along with the namespace metadata. Once restored, the namespace metadata will point to the data in the cloud tier that already exists. In one example, the data in the cloud tier may have changed and the namespace metadata may not reference data that has changed. In other words, the backup of the namespace does not reference new data that may have been added. In one example, snapshots of the cloud are taken and, after recovery, those snapshots can be used for the data that is new or has changed. More specifically, to restore a consistent state from both the vault and the cloud, a recovered namespace may be reconciled with the cloud namespace, which could be a snapshot or a namespace change log (e.g., a journal of changes) that can be replayed or applied. The journal may store copies of the changes as the changes occurred. Thus, the cloud namespace can be recreated to an appropriate time using one or more of the journal entries. Thus, replaying the journal or a snapshot can result in a reconciled namespace.</p><p id="p-0036" num="0035">When performing the recovery operation, the copy or snapshot being restored from the vault is made available. Once available, the namespace metadata is replicated <b>402</b> to the production site. The local data in the copy being recovered is replicated <b>404</b> to the production tier <b>404</b> from the vault. Data corresponding to the cloud tier is skipped <b>406</b> in the method <b>400</b> at least because the cloud data was not copied to the vault. Once the namespace data is restored, however, the cloud tier is available because the restored namespace data points to the data in the cloud tier.</p><p id="p-0037" num="0036">Because the data from the cloud tier is not copied to the vault, this prevents the cloud data from being accessed from the vault. Even if a file pointing to the cloud tier is accessed on the vault, the attempt may fail because the vault may not have external or network access. As previously stated, the vault may be restricted such that only the source (e.g., the replication appliance <b>208</b>) can access the vault.</p><p id="p-0038" num="0037">Advantageously, embodiments of the invention allow snapshots or other data protection operations to be performed without copying data from the cloud tier to the vault. Because copying data from the cloud tier involves egress transactions, cost is incurred. The amount of time that the vault is open (the air gap is closed) is also reduced by embodiments of the invention. Further, local data can be replicated even when the cloud is not available.</p><p id="p-0039" num="0038">In another example, embodiments of the invention may also protect the cloud tier against cyber threats such as ransomware. Stated differently, the cloud data may be replicated differently. <figref idref="DRAWINGS">FIG. <b>5</b></figref> illustrates a method for replicating both the production tier and the cloud tier. Elements <b>502</b>, <b>504</b>, <b>506</b>, and <b>508</b> are similar to elements <b>302</b>, <b>304</b>, <b>306</b>, and <b>308</b> of <figref idref="DRAWINGS">FIG. <b>3</b></figref> and have been previously described.</p><p id="p-0040" num="0039">If there is a desire to protect the cloud tier from cyber threats in addition to the production tier, various operations can be performed on the cloud tier. For example, the snapshot may also trigger <b>510</b> cloud replication. For example, objects representing a file may be within the same region or regions and can be replicated to another target or region in the cloud. In one example, the cloud tier <b>212</b> may be replicated to another region (e.g., the cloud may have multiple regions as failure domains. These regions can be referred to or used during recovery. Alternatively, or in addition, versioning and retention locks are enabled <b>512</b> on the data in the cloud tier and/or on the replicated cloud data. This retention lock protects the cloud tier data and prevents the cloud tier data from being tampered with. Another example is where the vault is in the cloud, which means data is being replicated to the target appliance (e.g., virtual) in the cloud. In that case, the region for the source and the vault might be different. The option to create a protected cloud copy through in-cloud replication will bring a copy in the vault. Data transfer between the cloud regions through an appliance may not be necessary in this case.</p><p id="p-0041" num="0040">In both <b>510</b> and <b>512</b>, retention locks are applied <b>514</b> to the metadata of the filesystem and/or of the data. In other words, the cloud tier may be associated with the namespace metadata and/or with metadata specific to the cloud tier. This metadata stored in the cloud tier is subject to the retention lock.</p><p id="p-0042" num="0041">These elements ensure that, if ransomware reaches the cloud tier via the replication appliance, the objects cannot be written to or deleted because of the retention locks.</p><p id="p-0043" num="0042">Embodiments of the invention include replicating a namespace that has data in multiple tiers. In one example, the namespace of the replica is kept the same as the source so that failback can occur. In other words, snapshots make a copy of the namespace. This enables the ability to revert to a known namespace in the vault or at the production site in case of attack. Further, the namespace is kept consistent because there are references to the data in the cloud in the replicas (but no access in one example from the vault). There is no need, in one example, to directly reference the data in order to snapshot or replicate the namespace. When the snapshots or backups are stored in a vault, access to the data stored in the cloud tier is restricted from within the vault. Finally, cloud data, in addition to local data, can be protected against cyber threats such as ransomware.</p><p id="p-0044" num="0043">Embodiments of the invention, such as the examples disclosed herein, may be beneficial in a variety of respects. For example, and as will be apparent from the present disclosure, one or more embodiments of the invention may provide one or more advantageous and unexpected effects, in any combination, some examples of which are set forth below. It should be noted that such effects are neither intended, nor should be construed, to limit the scope of the claimed invention in any way. It should further be noted that nothing herein should be construed as constituting an essential or indispensable element of any invention or embodiment. Rather, various aspects of the disclosed embodiments may be combined in a variety of ways so as to define yet further embodiments. Such further embodiments are considered as being within the scope of this disclosure. As well, none of the embodiments embraced within the scope of this disclosure should be construed as resolving, or being limited to the resolution of, any particular problem(s). Nor should any such embodiments be construed to implement, or be limited to implementation of, any particular technical effect(s) or solution(s). Finally, it is not required that any embodiment implement any of the advantageous and unexpected effects disclosed herein.</p><p id="p-0045" num="0044">The following is a discussion of aspects of example operating environments for various embodiments of the invention. This discussion is not intended to limit the scope of the invention, or the applicability of the embodiments, in any way.</p><p id="p-0046" num="0045">In general, embodiments of the invention may be implemented in connection with systems, software, and components, that individually and/or collectively implement, and/or cause the implementation of, data protection operations. More generally, the scope of the invention embraces any operating environment in which the disclosed concepts may be useful.</p><p id="p-0047" num="0046">At least some embodiments of the invention provide for the implementation of the disclosed functionality in existing backup platforms, examples of which include the Dell-EMC DataDomain storage environment and Retention Lock. In general however, the scope of the invention is not limited to any particular data backup platform or data storage environment.</p><p id="p-0048" num="0047">New and/or modified data collected and/or generated in connection with some embodiments, may be stored in a data protection environment that may take the form of a public or private cloud storage environment, an on-premises storage environment, and hybrid storage environments that include public and private elements. Any of these example storage environments, may be partly, or completely, virtualized. The storage environment may comprise, or consist of, a datacenter which is operable to service read, write, delete, backup, restore, and/or cloning, operations initiated by one or more clients or other elements of the operating environment. Where a backup comprises groups of data with different respective characteristics, that data may be allocated, and stored, to different respective targets in the storage environment, where the targets each correspond to a data group having one or more particular characteristics.</p><p id="p-0049" num="0048">Example cloud computing environments, which may or may not be public, include storage environments that may provide data protection functionality for one or more clients. Another example of a cloud computing environment is one in which processing, data protection, and other, services may be performed on behalf of one or more clients. Some example cloud computing and/or storage environments in connection with which embodiments of the invention may be employed include, but are not limited to, Microsoft Azure, Amazon AWS, Dell EMC Cloud Storage Services, and Google Cloud. More generally however, the scope of the invention is not limited to employment of any particular type or implementation of cloud computing environment. The cloud storage may include public, hybrid, and/or private cloud.</p><p id="p-0050" num="0049">In addition to the cloud environment, the operating environment may also include one or more clients that are capable of collecting, modifying, and creating, data. As such, a particular client may employ, or otherwise be associated with, one or more instances of each of one or more applications that perform such operations with respect to data. Such clients may comprise physical machines, or virtual machines (VM)</p><p id="p-0051" num="0050">Particularly, devices in the operating environment may take the form of software, physical machines, or VMs, or any combination of these, though no particular device implementation or configuration is required for any embodiment. Similarly, data protection system components such as databases, storage servers, storage volumes (LUNs), storage disks, replication services, backup servers, restore servers, backup clients, and restore clients, for example, may likewise take the form of software, physical machines or virtual machines (VM), though no particular component implementation is required for any embodiment. Where VMs are employed, a hypervisor or other virtual machine monitor (VMM) may be employed to create and control the VMs. The term VM embraces, but is not limited to, any virtualization, emulation, or other representation, of one or more computing system elements, such as computing system hardware. A VM may be based on one or more computer architectures, and provides the functionality of a physical computer. A VM implementation may comprise, or at least involve the use of, hardware and/or software. An image of a VM may take the form of a .VMX file and one or more .VMDK files (VM hard disks) for example.</p><p id="p-0052" num="0051">As used herein, the term &#x2018;data&#x2019; is intended to be broad in scope. Thus, that term embraces, by way of example and not limitation, data segments such as may be produced by data stream segmentation processes, data chunks, data blocks, atomic data, emails, objects of any type, files of any type including media files, word processing files, spreadsheet files, and database files, as well as contacts, directories, sub-directories, volumes, and any group of one or more of the foregoing.</p><p id="p-0053" num="0052">Example embodiments of the invention are applicable to any system capable of storing and handling various types of objects, in analog, digital, or other form. Although terms such as document, file, segment, block, or object may be used by way of example, the principles of the disclosure are not limited to any particular form of representing and storing data or other information. Rather, such principles are equally applicable to any object capable of representing information.</p><p id="p-0054" num="0053">As used herein, the term &#x2018;backup&#x2019; is intended to be broad in scope. As such, example backups in connection with which embodiments of the invention may be employed include, but are not limited to, full backups, partial backups, clones, snapshots, and incremental or differential backups. Embodiments further apply to archives. Any data that is stored in a multi-tier appliance that may replicate to a vault can be used with embodiments of the invention.</p><p id="p-0055" num="0054">It is noted that any of the disclosed processes, operations, methods, and/or any portion of any of these, may be performed in response to, as a result of, and/or, based upon, the performance of any preceding process(es), methods, and/or, operations. Correspondingly, performance of one or more processes, for example, may be a predicate or trigger to subsequent performance of one or more additional processes, operations, and/or methods. Thus, for example, the various processes that may make up a method may be linked together or otherwise associated with each other by way of relations such as the examples just noted.</p><p id="p-0056" num="0055">Following are some further example embodiments of the invention. These are presented only by way of example and are not intended to limit the scope of the invention in any way.</p><p id="p-0057" num="0056">Embodiment 1. A method, comprising: initiating a data protection operation at a production site, the data protection operation including a replication operation, replicating namespace metadata associated with a cloud tier and a production tier to a target site, wherein the namespace metadata identifies data in the production tier and data in the cloud tier, and replicating the data from the namespace to the target site, wherein data from the production tier is replicated to the target site and data from the cloud tier is not replicated to the target site, wherein the replicated data and the replicated namespace data comprise a backup.</p><p id="p-0058" num="0057">Embodiment 2. The method of embodiment 1, further comprising taking a snapshot of the namespace and replicating the snapshot to the target site.</p><p id="p-0059" num="0058">Embodiment 3. The method of embodiments 1 and/or 2, wherein the target site comprises a vault that is associated with an air gap that is closed only when replicating the data from the production tier and the namespace metadata to the vault.</p><p id="p-0060" num="0059">Embodiment 4. The method of embodiments 1, 2 and/or 3, further comprising evaluating a location of data associated with the snapshot, wherein data is replicated when the location of the data is the production tier and wherein data is skipped when the location of the data is the cloud tier.</p><p id="p-0061" num="0060">Embodiment 5. The method of embodiments 1, 2, 3, and/or 4, further comprising applying a retention lock to the backup in the target site.</p><p id="p-0062" num="0061">Embodiment 6. The method of embodiments 1, 2, 3, 4, and/or 5, further comprising triggering a cloud-based replication of data in the cloud tier when performing the replication operation.</p><p id="p-0063" num="0062">Embodiment 7. The method of embodiments 1, 2, 3, 4, 5, and/or 6, further comprising enabling versioning and retention locks in the cloud tier.</p><p id="p-0064" num="0063">Embodiment 8. The method of embodiments 1, 2, 3, 4, 5, 6, and/or 7, further comprising applying retention locks to metadata associated with the replicated cloud data and replicated metadata associated with the cloud data.</p><p id="p-0065" num="0064">Embodiment 9. The method of embodiments 1, 2, 3, 4, 5, 6, 7, and/or 8, further comprising recovering the backup from the vault by copying the namespace metadata to the production tier and copying the data associated with the production tier to the production tier.</p><p id="p-0066" num="0065">Embodiment 10. The method of embodiments 1, 2, 3, 4, 5, 6, 7, 8, and/or 9, further comprising opening the target site to access the backup for a recovery operation.</p><p id="p-0067" num="0066">Embodiments 11. A method for performing any of the operations, methods, or processes, or any portion of any of these, disclosed herein.</p><p id="p-0068" num="0067">Embodiment 12. A non-transitory storage medium having stored therein instructions that are executable by one or more hardware processors to perform operations comprising the operations of any one or more or portions thereof of embodiments 1 through 11.</p><p id="p-0069" num="0068">The embodiments disclosed herein may include the use of a special purpose or general-purpose computer including various computer hardware or software modules, as discussed in greater detail below. A computer may include a processor and computer storage media carrying instructions that, when executed by the processor and/or caused to be executed by the processor, perform any one or more of the methods disclosed herein, or any part(s) of any method disclosed.</p><p id="p-0070" num="0069">As indicated above, embodiments within the scope of the present invention also include computer storage media, which are physical media for carrying or having computer-executable instructions or data structures stored thereon. Such computer storage media may be any available physical media that may be accessed by a general purpose or special purpose computer.</p><p id="p-0071" num="0070">By way of example, and not limitation, such computer storage media may comprise hardware storage such as solid state disk/device (SSD), RAM, ROM, EEPROM, CD-ROM, flash memory, phase-change memory (&#x201c;PCM&#x201d;), or other optical disk storage, magnetic disk storage or other magnetic storage devices, or any other hardware storage devices which may be used to store program code in the form of computer-executable instructions or data structures, which may be accessed and executed by a general-purpose or special-purpose computer system to implement the disclosed functionality of the invention. Combinations of the above should also be included within the scope of computer storage media. Such media are also examples of non-transitory storage media, and non-transitory storage media also embraces cloud-based storage systems and structures, although the scope of the invention is not limited to these examples of non-transitory storage media.</p><p id="p-0072" num="0071">Computer-executable instructions comprise, for example, instructions and data which, when executed, cause a general purpose computer, special purpose computer, or special purpose processing device to perform a certain function or group of functions. As such, some embodiments of the invention may be downloadable to one or more systems or devices, for example, from a website, mesh topology, or other source. As well, the scope of the invention embraces any hardware system or device that comprises an instance of an application that comprises the disclosed executable instructions.</p><p id="p-0073" num="0072">Although the subject matter has been described in language specific to structural features and/or methodological acts, it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather, the specific features and acts disclosed herein are disclosed as example forms of implementing the claims.</p><p id="p-0074" num="0073">As used herein, the term &#x2018;module&#x2019; or &#x2018;component&#x2019; may refer to software objects or routines that execute on the computing system. The different components, modules, engines, and services described herein may be implemented as objects or processes that execute on the computing system, for example, as separate threads. While the system and methods described herein may be implemented in software, implementations in hardware or a combination of software and hardware are also possible and contemplated. In the present disclosure, a &#x2018;computing entity&#x2019; may be any computing system as previously defined herein, or any module or combination of modules running on a computing system.</p><p id="p-0075" num="0074">In at least some instances, a hardware processor is provided that is operable to carry out executable instructions for performing a method or process, such as the methods and processes disclosed herein. The hardware processor may or may not comprise an element of other hardware, such as the computing devices and systems disclosed herein.</p><p id="p-0076" num="0075">In terms of computing environments, embodiments of the invention may be performed in client-server environments, whether network or local environments, or in any other suitable environment. Suitable operating environments for at least some embodiments of the invention include cloud computing environments where one or more of a client, server, or other machine may reside and operate in a cloud environment.</p><p id="p-0077" num="0076">Any one or more of the entities disclosed, or implied, herein and/or elsewhere herein, may take the form of, or include, or be implemented on, or hosted by, a physical computing device. As well, where any of the aforementioned elements comprise or consist of a virtual machine (VM), that VM may constitute a virtualization of any combination of physical components.</p><p id="p-0078" num="0077">For example, the physical computing device may include a memory which may include one, some, or all, of random access memory (RAM), non-volatile memory (NVM) such as NVRAM for example, read-only memory (ROM), and persistent memory, one or more hardware processors, non-transitory storage media, UI device, and data storage. One or more of the memory components of the physical computing device may take the form of solid-state device (SSD) storage. As well, one or more applications may be provided that comprise instructions executable by one or more hardware processors to perform any of the operations, or portions thereof, disclosed herein.</p><p id="p-0079" num="0078">Such executable instructions may take various forms including, for example, instructions executable to perform any method or portion thereof disclosed herein, and/or executable by/at any of a storage site, whether on-premises at an enterprise, or a cloud computing site, client, datacenter, data protection site including a cloud storage site, or backup server, to perform any of the functions disclosed herein. As well, such instructions may be executable to perform any of the other operations and methods, and any portions thereof, disclosed herein.</p><p id="p-0080" num="0079">The present invention may be embodied in other specific forms without departing from its spirit or essential characteristics. The described embodiments are to be considered in all respects only as illustrative and not restrictive. The scope of the invention is, therefore, indicated by the appended claims rather than by the foregoing description. All changes which come within the meaning and range of equivalency of the claims are to be embraced within their scope.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method comprising:<claim-text>initiating a recovery operation of a namespace using a backup of the namespace stored in a vault, wherein the backup includes local data and cloud metadata that are associated with a namespace, wherein cloud data identified by the cloud metadata is not included in the backup;</claim-text><claim-text>recovering the namespace by copying the local data in the backup stored in the vault and the cloud metadata stored in the backup to a local tier without copying the cloud data to a cloud tier; and</claim-text><claim-text>accessing the cloud data using the cloud metadata recovered to the local tier.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the cloud metadata points to data in the cloud tier after being restored to the local tier.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising recovering cloud snapshots to the cloud tier.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising reconciling the cloud metadata and data in the cloud tier after recovering the cloud snapshots.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the cloud snapshots are not stored in the vault and are stored in a different region of a cloud or in a different cloud.</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising reconciling the recovered cloud metadata based on changes in the cloud tier are stored in one or more snapshots or a journal of changes.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, further comprising recreating the recovered cloud metadata to an appropriate point in time.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising generating the backup of the namespace by:<claim-text>initiating a data protection operation at a production site, the data protection operation including a replication operation, wherein the production site includes a production tier that is local and a cloud tier that is different from the production tier;</claim-text><claim-text>replicating namespace metadata associated with the cloud tier and the production tier to a target site, wherein the namespace metadata identifies data in the production tier and data in the cloud tier; and</claim-text><claim-text>replicating the data from the namespace to the target site, wherein data from the production tier is replicated to the target site and data from the cloud tier is not replicated to the target site, wherein the replicated data and the replicated namespace metadata comprise a backup.</claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising initiating the recovery operation when access to the vault is allowed by a controlled air gap.</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. A non-transitory storage medium having stored therein instructions that are executable by one or more hardware processors to perform operations comprising:<claim-text>initiating a recovery operation of a namespace using a backup of the namespace stored in a vault, wherein the backup includes local data and cloud metadata that are associated with a namespace, wherein cloud data identified by the cloud metadata is not included in the backup;</claim-text><claim-text>recovering the namespace by copying the local data in the backup stored in the vault and the cloud metadata stored in the backup to a local tier without copying the cloud data to a cloud tier; and</claim-text><claim-text>accessing the cloud data using the cloud metadata recovered to the local tier.</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The non-transitory storage medium of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the cloud metadata points to data in the cloud tier after being restored to the local tier.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The non-transitory storage medium of <claim-ref idref="CLM-00011">claim 11</claim-ref>, further comprising recovering cloud snapshots to the cloud tier.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The non-transitory storage medium of <claim-ref idref="CLM-00012">claim 12</claim-ref>, further comprising reconciling the cloud metadata and data in the cloud tier after recovering the cloud snapshots.</claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The non-transitory storage medium of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the cloud snapshots are not stored in the vault and are stored in a different region of a cloud or in a different cloud.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The non-transitory storage medium of <claim-ref idref="CLM-00011">claim 11</claim-ref>, further comprising reconciling the recovered cloud metadata based on changes in the cloud tier are stored in one or more snapshots or a journal of changes.</claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The non-transitory storage medium of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising recreating the recovered cloud metadata to an appropriate point in time.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The non-transitory storage medium of <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising generating the backup of the namespace by:<claim-text>initiating a data protection operation at a production site, the data protection operation including a replication operation, wherein the production site includes a production tier that is local and a cloud tier that is different from the production tier;</claim-text><claim-text>replicating namespace metadata associated with the cloud tier and the production tier to a target site, wherein the namespace metadata identifies data in the production tier and data in the cloud tier; and</claim-text><claim-text>replicating the data from the namespace to the target site, wherein data from the production tier is replicated to the target site and data from the cloud tier is not replicated to the target site, wherein the replicated data and the replicated namespace metadata comprise a backup.</claim-text></claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. The non-transitory storage medium of <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising initiating the recovery operation when access to the vault is allowed by a controlled air gap.</claim-text></claim></claims></us-patent-application>