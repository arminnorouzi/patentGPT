<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230003805A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230003805</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17781080</doc-number><date>20201124</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>DE</country><doc-number>10 2019 218 591.6</doc-number><date>20191129</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>R</subclass><main-group>31</main-group><subgroup>382</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>R</subclass><main-group>31</main-group><subgroup>367</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>R</subclass><main-group>31</main-group><subgroup>374</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>R</subclass><main-group>31</main-group><subgroup>389</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20190101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>R</subclass><main-group>31</main-group><subgroup>382</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20190101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>R</subclass><main-group>31</main-group><subgroup>367</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20190101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>R</subclass><main-group>31</main-group><subgroup>374</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20190101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>R</subclass><main-group>31</main-group><subgroup>389</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">METHOD FOR ESTIMATING THE STATE OF AN ENERGY STORE</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Robert Bosch GmbH</orgname><address><city>Stuttgart</city><country>DE</country></address></addressbook><residence><country>DE</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Kroener</last-name><first-name>Christoph</first-name><address><city>Rosstal</city><country>DE</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Kleinheinz</last-name><first-name>Felix</first-name><address><city>Stuttgart</city><country>DE</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>Stroebel</last-name><first-name>Marco</first-name><address><city>Stuttgart</city><country>DE</country></address></addressbook></inventor><inventor sequence="03" designation="us-only"><addressbook><last-name>Birke</last-name><first-name>Peter</first-name><address><city>Jettingen</city><country>DE</country></address></addressbook></inventor></inventors></us-parties><pct-or-regional-filing-data><document-id><country>WO</country><doc-number>PCT/EP2020/083112</doc-number><date>20201124</date></document-id><us-371c12-date><date>20220531</date></us-371c12-date></pct-or-regional-filing-data></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">The invention relates to a method for estimating the state of an energy store comprising at least one electrochemical battery cell (<b>12, 14, 16, 18, 20, 22, 24, 26, 28</b>) using a battery management system (BMS) which comprises an impedance spectroscopy chip, having at least the following steps: a) determining the frequency-dependent impedance of the at least one electrochemical battery cell (<b>12, 14, 16, 18, 20, 22, 24, 26, 28</b>) using a data set recording taken in real-time, b) training an artificial neural network (<b>60</b>) with temperature-based training spectra as the input and a specification for temperature values belonging to each training spectrum as the output, c) taking into consideration a battery cell-to-battery cell variance (<b>30</b>) between the electrochemical battery cells (<b>12, 14, 16, 18, 20, 22, 24, 26, 28</b>) when testing the artificial neural network (<b>60</b>) using weighting functions ascertained during step b) and test spectra and estimating the temperature values belonging to the test spectra according to the weighting functions ascertained in step b), and d) estimating at least one internal state (SoC, SoH, T<sub>int</sub>) of the at least one electrochemical battery cell (<b>12, 14, 16, 18, 20, 22, 24, 26, 28</b>) of the energy store using the trained artificial neural network (<b>6</b>).</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="103.46mm" wi="158.75mm" file="US20230003805A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="214.63mm" wi="140.04mm" orientation="landscape" file="US20230003805A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="160.10mm" wi="148.25mm" file="US20230003805A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="217.25mm" wi="145.20mm" orientation="landscape" file="US20230003805A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading><p id="p-0002" num="0001">The invention relates to a method for estimating the state of an energy store, in particular at least one electrochemical battery cell.</p><p id="p-0003" num="0002">DE 10 2016 219 621 A1 relates to a method for adjusting calculation parameters for temperature determination in an energy store. At least one battery module is provided, which comprises at least one battery cell, in particular for an electrically driven vehicle. The following steps are performed at preset times: a state is identified in which a dependence of the internal temperature value (T<sub>int</sub>) on an external temperature value (T<sub>ext</sub>), which corresponds to a temperature outside the at least one battery cell, is known. An actual internal temperature value of the energy store is determined. A present value (X) of an internal physical variable of the energy store is determined, which internal physical variable varies with a known dependency on the internal temperature (T<sub>int</sub>) of the energy store. An internal temperature value (T<sub>int</sub>) for the energy store is calculated from the determined value (X) using a previous set of calculation parameters (f(X)). The actual internal temperature value is compared with the calculated internal temperature value (T<sub>int</sub>), and the set of calculation parameters (f(X)) is adapted when the calculated internal temperature value (T<sub>int</sub>) deviates from the actual internal temperature value.</p><p id="p-0004" num="0003">US 2018 143 257 A1 relates to a method for analyzing battery information. The battery information is determined both via passive and via active data acquisition. These parameters are combined with a decision algorithm, for developing internal battery parameters. Analysis processes include a particle filter analysis, a neural network analysis and autoregression methods for analyzing the internal battery parameters and enable battery state identification. Passive and active measurement methods are used which are recorded via a number of distributed sensors for estimating and predicting the state and the power of the electrochemical cells, batteries and battery systems. Three operations are performed which are generally processed sequentially, namely 1) state estimation and prediction of internal battery parameters based on observations and embedded knowledge, 2) state interpretation of calculated parameters, and 3) calculation of a state estimation and prediction. In order to perform these operations, a BCM system (battery condition monitoring system) is used. The BCM system performs training and learning processes which use embedded training, stochastic optimization, probability methods such as algorithms for estimating and predicting met and future values for the internal parameters of the battery under observation.</p><p id="p-0005" num="0004">US 2013/069660 A1 relates to a method for estimating the state of a system for electrochemical storage of electrical energy, such as, for example, a battery. Impedance measurements are performed for various internal states of batteries of one and the same type as the battery to be analyzed, wherein an electrical signal is given in addition to the current passing through the batteries. A resonant circuit is used for modeling the impedances. Then, a relationship is calibrated between the state of charge (SoC) and/or the state of health (SoH) and the parameters of the resonant circuit by means of statistical analysis. Finally, the relationship of the equivalent electrical resonant circuit, which is defined for the battery, is analyzed for estimating the internal state of this battery.</p><p id="p-0006" num="0005">The determination of the temperature of an electrochemical energy store, such as, for example, lithium-ion cells, is performed by means of reading temperature sensors, which are fixedly installed in the battery management system (BMS), on the surface of the electrochemical cell or in the vicinity thereof. The implementation of a temperature sensor in the existing battery management system is complex and expensive, however. Therefore, battery packs comprising a plurality of electrochemical cells generally only have a few temperature sensors, generally one, for cost reasons.</p><p id="p-0007" num="0006">As an alternative to the temperature sensors there are parameterized temperature models, for example on the basis of thermal equivalent circuit diagrams. Such models can enable an estimation of the cell temperature of the battery cell using external parameters such as cell current, thermal mass, thermal conductivity and/or ambient temperature.</p><p id="p-0008" num="0007">Impedance-based methods for temperature determination ignore the effect of the battery cell-to-battery cell variance and the influence on the estimation accuracy associated therewith. The battery cell-to-battery cell variance describes the discrepancy between the respective internal resistances of electrochemical battery cells of identical design. Nonuniform aging and production and/or storage conditions of electrochemical battery cells of identical design result in an increased battery cell-to-battery cell variance. Impedance-based state estimators, in this case state estimators for the temperature, should represent this influence in the estimation in order to increase the accuracy.</p><heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading><p id="p-0009" num="0008">The invention proposes a method for estimating the state of an energy store comprising at least one electrochemical battery cell by means of a battery management system, which comprises an impedance measurement chip, said method comprising at least the following method steps:</p><p id="p-0010" num="0009">a) determining the frequency-dependent impedance of the at least one electrochemical battery cell by means of a data set recording performed in real time,</p><p id="p-0011" num="0010">b) training an artificial neural network with temperature-dependent training spectra as input and preset for a temperature value belonging to each training spectrum as output,</p><p id="p-0012" num="0011">c) taking into consideration a battery cell-to-battery cell variance between the electrochemical battery cells during testing of the artificial neural network in accordance with method step b) with the weighting functions determined during method step b) with test spectra and estimating the temperatures belonging to the test spectra with weighting functions determined during method step b),</p><p id="p-0013" num="0012">d) determining at least one internal state (SoC, SoH, T<sub>int</sub>) of the at least one electrochemical battery cell of the energy store by means of the trained artificial neural network during testing of the trained artificial neural network in accordance with method step c).</p><p id="p-0014" num="0013">As a development of the method proposed according to the invention, the data set in accordance with method step a) is preset for the artificial neural network at an input layer in accordance with method step b) as training data set and an associated temperature value is preset as output, with the result that the artificial neural network determines weighting functions in the training phase.</p><p id="p-0015" num="0014">In the method proposed according to the invention, a temperature of the at least one electrochemical battery cell is known as output to the artificial neural network in relation to the data set in accordance with method step a) during training.</p><p id="p-0016" num="0015">In the method proposed according to the invention, weightings of a plurality of nodes are parameterized within an artificial neural network by a training algorithm, in particular by means of an error feedback method, until a desired input/output ratio is set, i.e. input values of the artificial neural network are in each case correctly assigned to output values.</p><p id="p-0017" num="0016">As a development of the method proposed according to the invention, the artificial neural network is provided with at least one input layer, at least one hidden layer and at least one output layer having at least one node. The data sets of the input layer which were obtained in accordance with method step a) are given to the artificial neural network, wherein the output of the at least one internal state SoC, SoH, T<sub>int </sub>of the at least one electrochemical battery cell which was estimated by the artificial neural network during testing takes place at the output layer.</p><p id="p-0018" num="0017">In the method proposed according to the invention, data sets of impedance data in the frequency range of between 0.1 Hz and 10 kHz are recorded for training in accordance with method step b), and real parts and imaginary parts are calculated from the impedance data and passed on to the artificial neural network in accordance with method step b) for training.</p><p id="p-0019" num="0018">In the method proposed according to the invention, the artificial neural network is designed in such a way that, in accordance with method step b), a number of nodes which corresponds to a supporting number of measurement frequencies in the frequency range during the data recording is preset in the input layer.</p><p id="p-0020" num="0019">Up to 15 nodes are arranged in at least one hidden layer of the artificial neural network used within the scope of the method proposed according to the invention for estimating temperatures by means of determined impedance data sets.</p><p id="p-0021" num="0020">Furthermore, the invention relates to the use of the method for estimating the internal state or an internal state parameter of an energy store (SoC, SoH, T<sub>int</sub>), in particular a battery store having at least one lithium-ion battery cell, in electrically driven vehicles.</p><p id="p-0022" num="0021">Advantages of the invention</p><p id="p-0023" num="0022">Owing to the solution proposed according to the invention, it is possible using mobile impedance spectroscopy to more reliably estimate an internal cell temperature for each individual battery cell of a battery pack. As a result, the number of fixedly installed temperature sensors required can be reduced to a minimum, which results in a reduction in the costs of a battery pack. The more accurate information now present on an internal battery cell temperature can advantageously be used for the implementation of safety functions, for example disconnection of the battery owing to high thermal loading and/or as input variable for more accurate cell aging models. A more accurate estimation of a residual remaining use time is now possible. Owing to the method proposed according to the invention, more accurate determination of the mean internal cell temperature of an electrochemical battery cell can be achieved. Until now, this has only been possible by virtue of the implementation of a temperature sensor in the interior of a battery cell. In solutions to date, the temperature of a battery cell can only be determined via a temperature sensor on the surface of the battery cell or with the aid of an estimation via the resistance over a family of characteristics. The parameterization required for these determination methods is firstly complex and secondly requires a relatively long measurement time, which can now be saved when using the method proposed according to the invention.</p><p id="p-0024" num="0023">In the method proposed according to the invention, by virtue of training of an artificial neural network with large data volumes, in particular impedance data volumes, a battery cell-to-battery cell variance can also be taken into consideration in the artificial neural network for state estimation of the energy store. The battery cell-to-battery cell variance of an electrochemical battery cell describes the differences as regards characteristic cell variables such as, for example, internal resistance and/or cell capacity, which can be caused by nonuniform production and/or delivery and/or storage. These effects are intensified in the case of nonuniform aging of the battery cells.</p><p id="p-0025" num="0024">The method proposed according to the invention enables a more reliable estimation of further internal states such as a state of health (SoH) and a state of charge (SoC). Further states can be determined from the present impedance data which reflect a frequency-dependent resistance of the electrochemical battery cells. For example, a recorded impedance curve for electrochemical battery cells can be assigned to individual battery states (SoC, SoH). As a result, there is a connection possibility for the use of central processing units, in the case of cloud computing for evaluating interconnected vehicles with installed impedance sensor systems which are ideally integrated in the battery management system.</p><p id="p-0026" num="0025">The estimation of the SoH (state of health) is relatively inaccurate and very complex with the previously used methods. By virtue of the method proposed according to the invention, an estimation can be brought about which determines the SoH more simply for the battery cells when the vehicle is at a standstill. Furthermore, the artificial neural network can be adapted via cloud updates to the aging battery cells by means of the solution proposed according to the invention. As a result, the accuracy in the temperature estimation and the SoC (state of charge) estimation is also adapted in a simple manner. As a result, in turn the accuracy which can be achieved in the temperature estimation and in the SoC estimation is markedly improved.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0027" num="0026">The invention will be described in more detail below with reference to the drawings, in which:</p><p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. <b>1</b></figref> shows a schematic illustration of a battery cell-to-battery cell variance for a plurality of battery cells of identical design,</p><p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. <b>2</b></figref> shows an exemplary network structure of an artificial neural network for temperature estimation with the aid of impedance data, and</p><p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. <b>3</b></figref> an estimation accuracy for an internal cell temperature for three used battery cells under load in a frequency range of between 0.1 Hz and 10 kHz.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0004" level="1">DETAILED DESCRIPTION</heading><p id="p-0031" num="0030">In the description below of the embodiments of the invention, identical or similar elements are denoted by the same reference symbols, wherein these elements have not been described again in individual cases. The figures represent the subject of the invention only schematically.</p><p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. <b>1</b></figref> shows a battery cell-to-battery cell variance <b>30</b> for a plurality of battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> of identical design. In the illustration shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, impedance data for a first battery cell <b>12</b>, a second battery cell <b>14</b>, a third battery cell <b>16</b>, a fourth battery cell <b>18</b>, a fifth battery cell <b>20</b>, a sixth battery cell <b>22</b>, a seventh battery cell <b>24</b>, an eighth battery cell <b>26</b> and a ninth battery cell <b>28</b> are plotted in a Nyquist plot <b>10</b>.</p><p id="p-0033" num="0032">In the Nyquist plot <b>10</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, a real part <b>48</b> (Z<sub>real </sub>in m&#x3a9;) is plotted on an x axis while an imaginary part <b>50</b> (Zima<sub>imag </sub>in m&#x3a9;) of the corresponding impedance values is plotted on the y axis.</p><p id="p-0034" num="0033">The battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> compared with one another here are, for example, lithium-iron-phosphate (LFeP) cells. Using the Nyquist plot <b>10</b> it is also possible for other electrochemical system cells, i.e. other lithium-ion battery cells, to be investigated. The Nyquist plot <b>10</b> can be used for all impedance spectra irrespective of that which is being investigated. The plot itself has nothing to do with the battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> compared with one another here and is merely a form of illustration which makes it possible to illustrate relationships. The method proposed according to the invention using an artificial neural network <b>60</b> enables the use of all electrochemical cells which can have the widest variety of chemical compositions. Lithium-ion battery cells merely describe a small section of this range.</p><p id="p-0035" num="0034">In the Nyquist plot <b>10</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, accordingly different battery cell-to-battery cell variances <b>30</b> are recorded. These are given to an artificial neural network <b>60</b> (cf. illustration shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>) for training. In the training phase, in which temperatures belonging to the input spectra, for example, are preset as output values, the artificial neural network <b>60</b> determines weighting functions. The artificial neural network <b>60</b> adapts the internal parameters, i.e. the weighting functions, during the training phase in such a way that, during processing of the input data with the artificial neural network <b>60</b>, a calculated value largely corresponds to the previously preset output value. In the test phase, on the other hand, the computation parameters are fixed within the artificial neural network <b>60</b>. Therefore, input data are given in the artificial neural network <b>60</b>, and these data are processed within the artificial neural network <b>60</b> in such a way, which takes place as part of computation operations, that an output value is achieved which specifies, for example, with a very high degree of accuracy, the actual temperature of a battery cell <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b>.</p><p id="p-0036" num="0035">As can furthermore be seen from the Nyquist plot <b>10</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the impedance data which are set in the case of eight different temperature values are recorded in each case for the nine battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b>. Thus, for example, a first temperature 32 is &#x2212;10&#xb0; C., a second temperature 34 is 0&#xb0; C., a third temperature 36 is 10&#xb0; C., while a fourth temperature 38 is 20&#xb0; C. (approximately room temperature). Furthermore, in the Nyquist plot <b>10</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, a fifth temperature 40 is plotted, which is 30&#xb0; C., in addition a sixth temperature 42, which corresponds to 40&#xb0; C., a seventh temperature 44, which corresponds to 50&#xb0; C., and finally an eighth temperature 46, which corresponds to 60&#xb0; C. It is apparent from the illustration in accordance with the Nyquist plot <b>10</b> in <figref idref="DRAWINGS">FIG. <b>1</b></figref> that the scatter of the cell data, i.e. the battery cell-to-battery cell variance <b>30</b>, is not inconsiderable.</p><p id="p-0037" num="0036">Accordingly, as the temperature of the battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> increases, the internal resistance is reduced owing to quicker electrochemical reactions at the electrodes, the electrolyte and their boundary layers. The data set illustrated in <figref idref="DRAWINGS">FIG. <b>1</b></figref> as Nyquist plot <b>10</b> is given to an artificial neural network <b>60</b> shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>.</p><p id="p-0038" num="0037">The illustration in <figref idref="DRAWINGS">FIG. <b>2</b></figref> shows a network architecture for an artificial neural network <b>60</b> for estimating the temperature with the aid of impedance data. An input vector <b>62</b> comprises impedance data as the real part <b>48</b> Re_Z and/or imaginary part <b>50</b> Im_Z. Here, other data could also be used, such as the impedance and the phase, which can be calculated from the real part <b>48</b> and the imaginary part <b>50</b>. A hidden layer <b>70</b> can comprise, for example, up to 15 neurons and, with the aid of impedance training data, learns a pattern for temperature prediction. However, other network architectures could also be used which comprise a plurality of hidden layers <b>70</b> in which in each case more than 15 nodes 72 are implemented. In addition to the temperature, further states such as the state of charge (SoC) and a state of health (SoH) can also be estimated.</p><p id="p-0039" num="0038">As can be seen from <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the artificial neural network <b>60</b> illustrated in this figure comprises an input layer <b>64</b>, which contains a number of nodes <b>66</b>. In the network architecture illustrated in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the nodes <b>66</b> of the input layer <b>64</b> are identified by N<sub>11</sub>, N<sub>12</sub>, N<sub>13</sub>, N<sub>14</sub>, . . . N<sub>1</sub><sub><sub2>2n</sub2></sub>.</p><p id="p-0040" num="0039">An input vector <b>62</b>, which is given to the input layer <b>64</b> of the artificial neural network <b>60</b> in accordance with the illustration in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, is reproduced by individual impedance data, or, for example, the imaginary and real parts <b>50</b> and <b>48</b>, respectively, thereof, thus, for example, Z<sub>Re(f1)</sub>, Z<sub>Im(f1)</sub>, which are given to the nodes <b>66</b> N<sub>13 </sub>and N<sub>12</sub>, respectively, in addition, for example Z<sub>Re(f2)</sub>, Z<sub>Im(f2)</sub>, which are both given to the nodes <b>66</b> N<sub>13 </sub>and N<sub>14</sub>, and so on. It is apparent from the network architecture illustrated in <figref idref="DRAWINGS">FIG. <b>2</b></figref> that the individual nodes <b>66</b> of the input layer <b>64</b> are connected to the hidden layer <b>70</b>, for example, via edges <b>68</b>. The at least one hidden layer <b>70</b>, which is part of the artificial neural network <b>60</b>, likewise comprises a plurality of nodes <b>72</b> identified as N<sub>21</sub>, N<sub>22</sub>, N<sub>23</sub>, N<sub>24</sub>, ... N<sub>2</sub><sub><sub2>2n</sub2></sub>. Edges <b>74</b> again run around the individual nodes <b>72</b> of the at least one hidden layer <b>70</b> to an output layer <b>70</b>. There is only one node <b>78</b>, identified as N<b>31</b>, in the output layer <b>76</b> illustrated in <figref idref="DRAWINGS">FIG. <b>2</b></figref>. This produces an output, i.e. an internal cell temperature at the output, i.e. the estimated value <b>80</b> T<sub>int </sub>of the respective battery cell <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b>.</p><p id="p-0041" num="0040">If, for example, the abovementioned nine battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> are investigated by virtue of their electrochemical impedance spectra being recorded and at the same time their cell temperature being detected via a separate sensor, the determined data set, i.e. the electrochemical impedance spectrum, is passed on as input and the respective temperature is passed on as output to the artificial neural network <b>60</b> in order to perform the training phase of the artificial neural network <b>60</b>, for example, for seven of the nine battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b>. This means that, now, respective data sets in the form of impedance spectra are passed on as input and temperatures for a battery cell <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> are passed on as output for each of seven selected ones of the in total nine battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> to the artificial neural network <b>60</b> in order to perform the training phase at the artificial neural network <b>60</b>. The artificial neural network <b>60</b> is accordingly told that the respective impedance spectra represent the input and the respective output value corresponds to the associated temperature and must assume this value. Now, computation operations take place within the artificial neural network <b>60</b>, which determines internal weighting functions during the training phase such that, after mathematical processing of the input data taking into consideration determined network weighting functions, the output value appears. When the weighting functions within the artificial neural network <b>60</b> are so good that the output value is met, storage thereof takes place.</p><p id="p-0042" num="0041">In the subsequent test phase of the artificial neural network <b>60</b>, the data sets of the two still remaining ones of the in total nine battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> are now used. In this case, only the impedance spectra are passed on as input to the artificial neural network <b>60</b>. These are now mathematically processed with the weighting functions previously determined and then stored during the training phase, and, at the end, an output value is estimated. This output value, within the context of the test phase of the artificial neural network <b>60</b>, reflects the temperature estimated thereby of the respective battery cell <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b>. This estimated temperature for the respective battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> is compared with the actually measured temperature of these two battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> at the end, cf. illustration shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>.</p><p id="p-0043" num="0042">The data shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref> are given to the artificial neural network <b>60</b> embodied in a network architecture shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref> for training, for example, seven of the nine battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> and, for testing, the data or impedance spectra of two of the nine battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> as part of the input vector <b>62</b> at the input layer <b>64</b>. In relation to this data set, i.e. the impedance spectra, the corresponding temperature is known as output value to the artificial neural network <b>60</b>. The data set of the input vector <b>62</b> is given to the input layer <b>64</b> of the artificial neural network <b>60</b> illustrated in <figref idref="DRAWINGS">FIG. <b>2</b></figref> as part of a feedforward structure, for example, as training data or teaching data. In the present context, feedforward should be understood to mean that there is an input into the function or the artificial neural network <b>60</b> on the input side, i.e. on the input layer <b>64</b> of the artificial neural network <b>60</b>, and an output, which arises at the output layer <b>76</b> or at the node <b>78</b>, is calculated. Within the artificial neural network <b>60</b>, weightings of individual neurons in the artificial neural network <b>60</b> are adapted until a desired input-to-output ratio is present. This takes place within a training algorithm. In the training algorithm of the artificial neural network <b>60</b>, as part of an error feedback or backpropagation, an error is minimized until a desired input-to-output ratio is present. The impedance data of the impedance measurement are present as input vector <b>62</b> at the input layer <b>64</b>. The number of nodes <b>66</b> contained in the input layer <b>64</b> is dependent on, among other factors, the supporting number used of measurement frequencies in the frequency range. In the present example of the artificial neural network <b>60</b>, a node <b>78</b>, which reflects an estimated temperature T<sub>int </sub>of the recorded impedance measurement, is positioned at the output layer <b>76</b>. The number of layers between the input layer <b>64</b> and the output layer <b>76</b> can vary, depending on the number of hidden layers <b>70</b> therebetween. This may be at least <b>1</b> and can be optimized corresponding to the input data used.</p><p id="p-0044" num="0043">Impedance data recorded under laboratory conditions train the artificial neural network <b>60</b>. Now, new unknown measurement data can be presented to the trained artificial neural network <b>60</b>. These data are used in the test phase of the artificial neural network <b>60</b>. In this test phase, output values are estimated, wherein weighting functions which were determined, optimized and weighted in the training phase are used.</p><p id="p-0045" num="0044">For the temperature estimation by way of impedance spectroscopy under load, an estimation of the influence of a load current is necessary. For temperatures above 0&#xb0; C., it has become apparent that a frequency range for the measurement of from 0.1 Hz to 10 kHz results in a negligible error.</p><p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. <b>3</b></figref> shows an illustration of an estimation accuracy <b>84</b> for an internal cell temperature for used battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> illustrated therein under load within a frequency range of from 0.1 Hz to 10 kHz.</p><p id="p-0047" num="0046">In the illustration shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the characteristic of the estimation accuracy <b>84</b> for an internal cell temperature for three used ones of the in total nine battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> under load within a frequency range of from 0.1 Hz to 10 kHz is recorded. The temperature characteristic <b>82</b> extends from &#x2212;10&#xb0; C. to approximately 40&#xb0; C. The individual values for the estimation accuracy <b>84</b> are indicated by a cross for a first load current <b>86</b> and by a circle for a second load current <b>88</b>. The illustration shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> shows an error to be expected in the temperature estimation of the internal cell temperature T<sub>int </sub>taking into consideration the battery cell-to-battery cell variance <b>30</b>. A superimposed direct current as artificial load results in a temperature error of &#x3c;8&#xb0; C. The error range is primarily defined by the cell scatter, i.e. the battery cell-to-battery cell variance <b>30</b>, since comparison measurements without load current <b>86</b>, <b>88</b> are approximately of the same order of magnitude.</p><p id="p-0048" num="0047">It is possible to read, for example, from the illustration shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> how great an error in a temperature estimation is at different temperatures for various battery cells <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> under different loads. For example, the temperature of 20&#xb0; C. marks the highest point on the x axis. Compared with the y axis, this demonstrates that an error of +4&#xb0; C. has arisen in the temperature estimation. This means that the artificial neural network <b>60</b> has predicted a temperature of 24&#xb0; C. although the actual temperature was only 20&#xb0; C.; accordingly an error of +4&#xb0; C. has occurred. The conclusion from <figref idref="DRAWINGS">FIG. <b>3</b></figref> is that in each case one temperature for a battery cell <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> can be estimated for various actual temperatures with the artificial neural network <b>60</b> via the impedance spectra, and that the discrepancy, i.e. the error (y axis) in the estimation accuracy <b>84</b> for the estimated temperature is only a few degrees Celsius from the actual temperature (x axis).</p><p id="p-0049" num="0048">The solution proposed according to the invention can advantageously be used in energy storage systems which have electrochemical battery cells, in particular lithium-ion battery cells. In a particularly advantageous manner, the battery management system assigned to this energy storage system can use an impedance measurement chip. In addition, the method proposed according to the invention can be used in energy storage systems in which information on the cell temperature of the battery cell <b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b> is required and no temperature sensors are available. Battery management systems which are used in particular in plug-in hybrids, in hybrid vehicles and in electric vehicles can be equipped with the method proposed according to the invention, and in particular battery management systems to be expected in the future can be correspondingly retrofitted or prepared.</p><p id="p-0050" num="0049">The invention is not restricted to the exemplary embodiments described here and the aspects highlighted therein. Rather, a large number of modifications which are within the scope of a person skilled in the art is possible within the scope specified in the claims.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method for estimating the state of an energy store comprising at least one electrochemical battery cell (<b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b>) by means of a battery management system (BMS), which comprises an impedance spectroscopy chip, said method comprising at least the following method steps:<claim-text>a) determining the frequency-dependent impedance of the at least one electrochemical battery cell (<b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b>) by means of a data set recording performed in real time,</claim-text><claim-text>b) training an artificial neural network (<b>60</b>) with temperature-dependent training spectra as input and a preset for a temperature value belonging to each training spectrum as output,</claim-text><claim-text>c) taking into consideration a battery cell-to-battery cell variance (<b>30</b>) between the electrochemical battery cells (<b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b>) during testing of the artificial neural network (<b>60</b>) with weighting functions, determined during method step b), and test spectra and estimating the temperature values belonging to the test spectra in accordance with the weighting functions determined in method step b), and d) estimating at least one internal state (SoC, SoH, Tint) of the at least one electrochemical battery cell (<b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b>) of the energy store by means of the trained artificial neural network (<b>60</b>).</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the data set in accordance with method step a) is given to the artificial neural network (<b>60</b>) at an input layer (<b>64</b>) in accordance with method step b) as training data set, a temperature value is passed on as output, and, in the training phase in accordance with method step b), weighting functions are determined, optimized and stored.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the temperature of the at least one electrochemical battery cell (<b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b>) is known to the artificial neural network (<b>60</b>) in relation to the data set in accordance with method step a).</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein weightings of a plurality of nodes (<b>66</b>, <b>72</b>, <b>78</b>) are parameterized within the artificial neural network (<b>60</b>) by a training algorithm until a desired input/output ratio is set and input values of the artificial neural network (<b>60</b>) are correctly assigned to output values.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the artificial neural network (<b>60</b>) is provided with an input layer (<b>64</b>), at least one hidden layer (<b>70</b>) and an output layer (<b>76</b>) having at least one node (<b>66</b>, <b>72</b>, <b>78</b>).</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method as claimed in <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the data sets determined in accordance with method step a) are given at the input layer (<b>64</b>) to the artificial neural network (<b>60</b>).</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method as claimed in <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the output of the at least one internal state (SoC, SoH, T<sub>int</sub>) of the at least one electrochemical battery cell (<b>12</b>, <b>14</b>, <b>16</b>, <b>18</b>, <b>20</b>, <b>22</b>, <b>24</b>, <b>26</b>, <b>28</b>) is performed in the output layer (<b>76</b>).</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The method as claimed in <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein at least one variable determined by impedance spectroscopy is passed on to the input layer (<b>64</b>) of the artificial neural network (<b>60</b>).</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein data sets of impedance data in the frequency range of between 0.1 Hz and 10 kHz are given to the artificial neural network (<b>60</b>) for training the artificial neural network (<b>60</b>) in accordance with method step b).</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a number of nodes (<b>66</b>) which corresponds to a supporting number of measurement frequencies in the frequency range during the data recording is provided in the input layer (<b>64</b>) in the artificial neural network (<b>60</b>) in accordance with method step b).</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein up to 15 nodes (<b>72</b>) are arranged in the hidden layer (<b>70</b>) of the artificial neural network (<b>60</b>) for learning temperature predictions by means of measured impedance data sets.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein, for the temperature estimation by impedance measurement, an estimation of the influence of at least one load current (<b>86</b>, <b>88</b>) or a load current (<b>86</b>) of 0 A is performed.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The use of the method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref> for estimating the internal state (SoC, SoH, T<sub>int</sub>) of an energy store in electrically driven vehicles.</claim-text></claim></claims></us-patent-application>