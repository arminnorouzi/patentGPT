<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230005110A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230005110</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17851347</doc-number><date>20220628</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>JP</country><doc-number>2021-110880</doc-number><date>20210702</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>T</subclass><main-group>5</main-group><subgroup>00</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>1</main-group><subgroup>60</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>T</subclass><main-group>5</main-group><subgroup>008</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>1</main-group><subgroup>6005</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>1</main-group><subgroup>6027</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>T</subclass><main-group>2207</main-group><subgroup>10024</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">INFORMATION PROCESSING APPARATUS, INFORMATION PROCESSING METHOD, AND STORAGE MEDIUM FOR STORING PROGRAM</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>CANON KABUSHIKI KAISHA</orgname><address><city>Tokyo</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>KAGAWA</last-name><first-name>Hidetsugu</first-name><address><city>Kanagawa</city><country>JP</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Suwa</last-name><first-name>Tetsuya</first-name><address><city>Kanagawa</city><country>JP</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>Yazawa</last-name><first-name>Maya</first-name><address><city>Kanagawa</city><country>JP</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A minimum luminance value of a display luminance information is larger than a minimum luminance value of a print luminance information. And in a conversion, a luminance value of a dark region of input image data is converted to a luminance value of a dark region of output image data such that a contrast of a dark region that includes the minimum luminance value of the print luminance information becomes closer to a contrast of a dark region that includes the minimum luminance value of the display luminance information.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="148.84mm" wi="152.74mm" file="US20230005110A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="169.84mm" wi="154.77mm" file="US20230005110A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="227.84mm" wi="145.29mm" file="US20230005110A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="177.63mm" wi="114.38mm" file="US20230005110A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="135.04mm" wi="140.21mm" file="US20230005110A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="218.27mm" wi="135.55mm" file="US20230005110A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="135.04mm" wi="142.58mm" file="US20230005110A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="141.65mm" wi="145.20mm" file="US20230005110A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="224.71mm" wi="152.48mm" file="US20230005110A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading><heading id="h-0002" level="1">Field of the Invention</heading><p id="p-0002" num="0001">The present invention relates to an information processing apparatus for converting a dynamic range of luminance, an information processing method and a storage medium for storing a program.</p><heading id="h-0003" level="1">Description of the Related Art</heading><p id="p-0003" num="0002">In recent years, with the improvement in the performance of image capturing devices, it has become possible to acquire high dynamic range image data (HDR image data) as image capturing data such as moving images and still images. A document &#x201c;Recommendation ITU-R BT.2100-2 (07/2018) Image parameter values for high dynamic range television for use in production and international programme exchange&#x201d; specifies two methods for video transfer functions for HDR image data. Displays for displaying HDR image based on HDR image data have also improved in the maximum luminance that they can display, so it is possible to simultaneously display an image from an extremely-bright highlight side to a shadow side at a high image quality.</p><p id="p-0004" num="0003">Meanwhile, a range of luminance represented by a conventional sRGB or AdobeRGB is about 80 to 120 nits in a unit of luminance determined by the International System of Units. Content represented using such a conventional luminance range is called SDR (Standard Dynamic Range). SDR content can be confirmed by being displayed on an SDR display that supports sRGB and AdobeRGB. It is also possible to display SDR content on an HDR display using an SDR luminance range.</p><p id="p-0005" num="0004">Japanese Patent Laid-Open No. 2011-86976 discloses image processing for correcting contrast degradation when converting a dynamic range using a single tone curve.</p><heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading><p id="p-0006" num="0005">The present invention provides an information processing apparatus for suppressing a difference in appearance to a user between an image displayed on a display based on image data and an image on printed matter based on that image data, an information processing method, and a storage medium for storing a program.</p><p id="p-0007" num="0006">The information processing apparatus according to the present invention an information processing apparatus comprising: a first acquisition unit configured to acquire input image data; a second acquisition unit configured to acquire display luminance information that includes a maximum luminance value and a minimum luminance value in displaying on a display device and print luminance information that includes a maximum luminance value and a minimum luminance value to be reproduced on printed matter to be outputted by a printing apparatus; and a conversion unit configured to, in order to cause the printing apparatus to perform output based on the input image data for which display is performed on the display device, convert a first luminance range of the input image data to a second luminance range that is smaller than the first luminance range and then generate output image data having the second luminance range, wherein the minimum luminance value of the display luminance information is larger than the minimum luminance value of the print luminance information, and the conversion unit converts a luminance value of a dark region of the input image data to a luminance value of a dark region of the output image data such that a contrast of a dark region that includes the minimum luminance value of the print luminance information becomes closer to a contrast of a dark region that includes the minimum luminance value of the display luminance information.</p><p id="p-0008" num="0007">By virtue of the present invention, it is possible to suppress a difference in appearance to a user between an image displayed on a display based on image data and an image on a printed matter based on that image data.</p><p id="p-0009" num="0008">Further features of the present invention will become apparent from the following description of exemplary embodiments with reference to the attached drawings.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a diagram illustrating a configuration of a system.</p><p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a diagram illustrating a display luminance characteristic of a display.</p><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a diagram illustrating a configuration of an image processing unit.</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a flowchart for explaining processing until printing is performed by a printing apparatus.</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a diagram for explaining creation of a dynamic range conversion table.</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a flowchart for explaining processing for dynamic range conversion.</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a diagram for explaining creation of the dynamic range conversion table.</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a diagram illustrating a display luminance characteristic of a display when exposed to bright illumination.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a diagram illustrating a user interface screen for acquiring display luminance information.</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a diagram illustrating conversion of a dynamic range of luminance.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0006" level="1">DESCRIPTION OF THE EMBODIMENTS</heading><p id="p-0020" num="0019">Hereinafter, embodiments will be described in detail with reference to the attached drawings. Note, the following embodiments are not intended to limit the scope of the claimed invention. Multiple features are described in the embodiments, but limitation is not made an invention that requires all such features, and multiple such features may be combined as appropriate. Furthermore, in the attached drawings, the same reference numerals are given to the same or similar configurations, and redundant description thereof is omitted.</p><p id="p-0021" num="0020">When performing display on a display based on HDR data, an image displayed on a display and an image on printed matter based on the HDR data may appear different to a user depending on the minimum luminance of the display, for example.</p><p id="p-0022" num="0021">By virtue of the present disclosure, it is possible to suppress a difference in appearance to the user between an image displayed on a display based on image data and an image on a printed matter based on that image data.</p><heading id="h-0007" level="1">First Embodiment</heading><p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a diagram illustrating an example of a configuration of a system in the present embodiment. The system is configured to include, for example, an image processing apparatus <b>101</b>, an HDR display (display device) <b>108</b>, and a printing apparatus <b>110</b>. This configuration is an example, and may include devices other than those illustrated in <figref idref="DRAWINGS">FIG. <b>1</b></figref>. Further, a plurality of devices of <figref idref="DRAWINGS">FIG. <b>1</b></figref> may be integrated into one device, such as the image processing apparatus <b>101</b> being integrated into the printing apparatus <b>110</b>, for example. Additional blocks may also be included in the blocks that each device in <figref idref="DRAWINGS">FIG. <b>1</b></figref> has. Each block that each device has may be divided into a plurality of blocks, or one block including a plurality of blocks may be used.</p><p id="p-0024" num="0023">A host PC or the like serving as an information processing apparatus, for example, is used as the image processing apparatus <b>101</b>. The image processing apparatus <b>101</b> is configured to include a CPU <b>102</b>, a RAM <b>103</b>, an HDD <b>104</b>, a display interface (I/F) <b>105</b>, an input I/F <b>106</b>, a data transfer I/F <b>107</b>, and an image processing unit <b>111</b>. Each unit is connected to each other via an internal bus so as be capable of communication.</p><p id="p-0025" num="0024">The CPU <b>102</b> executes each processing, such as various kinds of processing related to the operation of the present embodiment, using the RAM <b>103</b> as a work area in accordance with a program held in the HDD <b>104</b>. The CPU <b>102</b> is one example of a processor and other types of processors may be used. For example, other types of processors such as a GPU (Graphics Processing Unit) and a DSP (Digital Signal Processor) may be additionally or alternatively used. Some or all of the processing performed by the CPU <b>102</b> may be performed by hardware capable of performing that processing, such as an ASIC (Application Specific Integrated Circuit) or a FPGA (Field-Programmable Gate Array). The RAM <b>103</b> is a volatile storage area and is used, for example, as a work memory. The HDD <b>104</b> is a non-volatile storage area and stores programs and data according to the present embodiment, an OS (Operating System), and the like.</p><p id="p-0026" num="0025">The display I/F <b>105</b> is an interface for transmitting and receiving data to and from the HDR display <b>108</b>. For example, HDMI&#xae; (High-Definition Multimedia Interface), DisplayPort, and the like are used as methods of connection for the display I/F <b>105</b>.</p><p id="p-0027" num="0026">The HDR display <b>108</b> is capable of displaying high dynamic range image data (HDR image data) and is capable of simultaneously displaying a wide range from a highlight side to a shadow side of an image at a high image quality.</p><p id="p-0028" num="0027">For example, Recommendation BT.2100 by ITU-R (International Telecommunication Union Wireless Radio communication Sector) specifies two transfer functions as video transfer functions for HDR image data. The two transfer functions are: Hybrid Log Gamma (HLG) and Perceptual Quantization (PQ). Regarding the transfer functions, the transfer functions and the number of bits are defined so that the discontinuity of tone is not visually detected in the transmission of an image. A video method is specified by three transfer functions. One is an opto-electronic transfer function (OETF), which is a transfer function on an image capturing side. Another is an electro-optical transfer function (EOTF), which is a transfer function on a display side. Yet another is an opto-optical transfer function (OOTF), which represents an overall characteristic of display light from scene light. OOTF is a transfer function which corrects the difference in appearance due to the difference between an image capturing environment and a display environment. The HLG method is a method that treats what is between black and white as relative tones and specifies the above image-capturing-side OETF. The display-side EOTF is configured by an inverse function of the OETF and the OOTF which represents the overall characteristic of display light from scene light. In the HLG method, system gamma, which determines the characteristic of the OOTF, is applied only to a luminance component. The system gamma is determined in accordance with the luminance of a display taking into account the difference in appearance on a display in which the maximum luminance value that can be displayed is different. The PQ method is a method in which the luminance on the display side is expressed by absolute values of up to 10,000 cd/m2 (hereinafter referred to as nits) and defines the above display-side EOTF. The image-capturing-side OETF is configured by the OOTF and an inverse function of the EOTF.</p><p id="p-0029" num="0028">When displaying HDR image data on an SDR display or printing with a printing apparatus, it is necessary to perform dynamic range conversion using a tone curve or the like to a dynamic range of luminance that can be reproduced by that device. For example, dynamic range conversion is performed using a tone curve that reduces the contrast in a region where the luminance is high as illustrated in <figref idref="DRAWINGS">FIG. <b>10</b></figref>.</p><p id="p-0030" num="0029">The input I/F <b>106</b> is an interface for inputting information from a device that accepts user operation, such as a keyboard, a pointing device, or a touch panel (not illustrated). The above-described device may be external to or included in the image processing apparatus <b>101</b>. The data transfer I/F <b>107</b> is an interface for transmitting and receiving data to and from the printing apparatus <b>110</b>. For example, a USB (Universal Serial Bus), IEEE 1394, and the like are used as methods of connection for the data transfer I/F <b>107</b>. For example, the CPU <b>102</b> generates printing data that can be processed by the printing apparatus <b>110</b> from image data and transfers the printing data to the printing apparatus <b>110</b> in accordance with an instruction (such as a command) by a user using the operation unit <b>109</b> or a program held in the HDD <b>104</b>. For example, an inkjet printing method or the like is used as the printing method of the printing apparatus <b>110</b>. In the present embodiment, the printing method is not limited to this, and a printing apparatus of an electrophotographic method may be used, for example. The medium of each interface in <figref idref="DRAWINGS">FIG. <b>1</b></figref> may be either wired or wireless.</p><p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a diagram illustrating a display luminance characteristic of a display. Hereinafter, a liquid crystal display having a contrast ratio of 1300:1 will be described as an example. In <figref idref="DRAWINGS">FIG. <b>2</b></figref>, a luminance characteristic <b>201</b> indicates a display luminance characteristic of a display. A luminance characteristic <b>202</b> indicates a reproduced luminance characteristic of printed matter. The horizontal axis indicates the luminance value of image data to be inputted, and the vertical axis indicates the luminance value to be outputted.</p><p id="p-0032" num="0031">When displaying the maximum luminance value to be displayed by the display at a luminance of 1000 nits, since the contrast ratio is 1300:1, the minimum luminance value becomes 0.77 nit. Meanwhile, when printing is executed on glossy paper by an inkjet printer used for photography printing, there is a combination of a printer and paper by which the density of black becomes 2.6. When the density 2.6 is converted to reflectance, it is 0.25%. When 100 nits of light, which is a typical luminance for observing printed matter, is applied on this black, it becomes 0.25 nit. In such an environment, the black displayed on the display is brighter than the black on the printed material, so for the user, the contrast for the dark region appears to be lower on the display. That is, the image displayed on the display and the printed matter appear to be different to the user.</p><p id="p-0033" num="0032">In the present embodiment, when output image data is generated from input image data displayed on a display by converting the luminance range and printed matter is outputted based on that output image data, the minimum luminance value of the output image data is set based on the minimum luminance value of the input image data. Such a configuration can suppress a difference in appearance to the user between an image being displayed on a display and printed matter.</p><p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a diagram illustrating a configuration of the image processing unit <b>111</b>. In the image processing unit <b>111</b>, HDR image data, display luminance information of a display that performs display based on the HDR image data, and print luminance information are inputted to the dynamic range conversion unit <b>112</b>. The display luminance information and print luminance information will be described later. In the dynamic range conversion unit <b>112</b>, conversion to image data of a luminance dynamic range (hereinafter, simply referred to as dynamic range) that can be inputted to an output image generation unit <b>113</b> is performed using each inputted information. The dynamic range of image data to be inputted to the output image generation unit <b>113</b> becomes narrower than the dynamic range of HDR image data to be inputted. A dynamic range that can be inputted to the output image generation unit <b>113</b> is, for example, a dynamic range of the maximum luminance value 100 cd/m2 in SDR data to be inputted on a typical printer. It may also be a dynamic range of when printed matter is exposed to illumination. In the present embodiment, the dynamic range conversion unit <b>112</b> generates image data converted from a dynamic range of 1000 nits to a dynamic range of 100 nits. The output image generation unit <b>113</b> generates data that can be printed by a printhead of an inkjet printer with respect to the image data outputted from the dynamic range conversion unit <b>112</b>. Image data outputted from the dynamic range conversion unit <b>112</b> is, for example, RGB image data represented by a Red, Green, and Blue color space.</p><p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a flowchart for explaining the processing for conversion of a dynamic range for printing HDR image data to be displayed on a display by the printing apparatus <b>110</b>. The processing of <figref idref="DRAWINGS">FIG. <b>4</b></figref> is realized, for example, by the CPU <b>102</b> reading and executing a program stored in the HDD <b>104</b>.</p><p id="p-0036" num="0035">In step S<b>101</b>, the image processing unit <b>111</b> acquires HDR image data to be displayed on the HDR display <b>108</b> as input image data. In step S<b>101</b>, a configuration may be taken so as to acquire HDR image data held in the HDD <b>104</b> or acquire HDR image data from an external device via the data transfer I/F <b>107</b>. In the present embodiment, RGB image data whose maximum luminance value of the dynamic range is 1000 nits will be described as an example of HDR image data.</p><p id="p-0037" num="0036">In step S<b>102</b>, the image processing unit <b>111</b> acquires the display luminance information of the HDR display <b>108</b> currently displaying the image. The display luminance information includes, for example, the maximum luminance value, the minimum luminance value, and the contrast ratio of the HDR display <b>108</b>. These pieces of display luminance information are acquired from the HDR display <b>108</b> via the display I/F <b>105</b>. Alternatively, the display luminance information may be stored in advance in the HDD <b>104</b> and acquired from the HDD <b>104</b>. In the present embodiment, the display luminance information is acquired from the HDR display <b>108</b>, and for example, it is assumed that the maximum luminance value is 1000 nits and the minimum luminance value is 0.77 nit as the display luminance information. The minimum luminance value may be calculated from the maximum luminance value and the contrast ratio. For example, if the contrast ratio is 1300:1, the minimum luminance can be calculated by Equation (1).</p><p id="p-0038" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>minimum luminance value=maximum luminance value&#xd7;(1/1300) &#x2003;&#x2003;(1)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0039" num="0037">In step S<b>103</b>, the image processing unit <b>111</b> acquires the maximum luminance value and the minimum luminance value that can be reproduced by the printing apparatus <b>110</b> as the print luminance information on printing by the printing apparatus <b>110</b>. The print luminance information is acquired from the printing apparatus <b>110</b> via the data transfer I/F <b>107</b>. Alternatively, the print luminance information may be stored in advance in the HDD <b>104</b> and acquired from the HDD <b>104</b>. The print luminance information may be, aside from luminance, L* which represents brightness or may be stored as an ICC profile. In other words, it may be in any form that can be converted into luminance information. In the present embodiment, the maximum luminance value is set to 100 nits and the minimum luminance value is set to 0.25 nit as the print luminance information, for example.</p><p id="p-0040" num="0038">In step S<b>104</b>, the image processing unit <b>111</b> generates a luminance dynamic range conversion table. The dynamic range conversion table is a table in a lookup table (LUT) format used for when performing dynamic range conversion on luminance components in step S<b>105</b>.</p><p id="p-0041" num="0039">A description will be given on a method for creating a dynamic range conversion table in step S<b>104</b> with reference to <figref idref="DRAWINGS">FIG. <b>5</b></figref>. In <figref idref="DRAWINGS">FIG. <b>5</b></figref>, the horizontal axis represents the luminance of an input image, and the vertical axis represents the luminance of an output image. A dotted line <b>501</b> represents a line where the input luminance and the output luminance coincide. A solid line <b>502</b> represents the correspondence between the input luminance and the output luminance for when performing dynamic range conversion.</p><p id="p-0042" num="0040">Dimax is the maximum luminance value of the input image, and 1000 nits is set, for example. Domax is the maximum luminance value of the output image, and 100 nits, which is the maximum luminance value of the print luminance information acquired in step S<b>103</b>, is set, for example. For example, 18 nits is set as a reference point Dia and Dio where the input luminance and the output luminance coincide. Dia and Dio are set based on a predetermined reflectance as a reference. Since exposure is adjusted to a grey with an 18% reflectance at the time of image capturing, luminance is based on an 18% reflectance. If the luminance corresponding to 100% reflectance is 100 nits, 18% reflectance becomes 18 nits.</p><p id="p-0043" num="0041">Domin is the minimum luminance value of the output image. In the present embodiment, the minimum luminance value of the display luminance information acquired in step S<b>102</b> is 0.77 nit, and the minimum luminance value of the print luminance information of the printing apparatus <b>110</b> acquired in step S<b>103</b> is 0.25 nit, for example. Since the black displayed on the HDR display <b>108</b> is brighter than the black reproduced on the printing apparatus <b>110</b>, 0.77 nit is set as Domin so that the black on the printed matter matches that of the display on the display. Here, when the minimum luminance value of the display luminance information is smaller than the minimum luminance value of the print luminance information of the printing apparatus <b>110</b>, 0 nit is set as Domin.</p><p id="p-0044" num="0042">The image processing unit <b>111</b> generates a dynamic range conversion curve by connecting Domin, the point of intersection of Dia and Doa, and the point of intersection of Dimax and Domax so as to be a smooth curve by performing spline interpolation. The curve generated by spline interpolation is converted into a one-dimensional LUT format. Although spline interpolation is used in the present embodiment, another configuration such as histogram smoothing processing for smoothing a histogram of an image may be used.</p><p id="p-0045" num="0043">In step S<b>105</b>, the image processing unit <b>111</b> converts the dynamic range of luminance for generating output image data for printing by the printing apparatus <b>110</b> from the input image data acquired in step S<b>101</b> using the dynamic range conversion table generated in step S<b>104</b>. The dynamic range conversion in step S<b>105</b> will be described with reference to the flowchart of <figref idref="DRAWINGS">FIG. <b>6</b></figref>.</p><p id="p-0046" num="0044">In step S<b>201</b> of <figref idref="DRAWINGS">FIG. <b>6</b></figref>, the image processing unit <b>111</b> separates input image data into a luminance component and a chrominance component. For example, when input image data is a RGB color space, the image processing unit <b>111</b> converts the input image data into a YCbCr color space using Equations (2) to (4). Here, Y is the luminance component and CbCr is the chrominance component. Further, a color space into which conversion is performed is not limited to the YCbCr color space and conversion into an ICtCp color space may be performed, for example.</p><p id="p-0047" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Y=</i>0.299&#xd7;<i>R+</i>0.587&#xd7;<i>G+</i>0.114&#xd7;<i>B </i>&#x2003;&#x2003;(2)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0048" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Cb=&#x2212;</i>0.169&#xd7;<i>R&#x2212;</i>0.331&#xd7;<i>G+</i>0.5&#xd7;<i>B </i>&#x2003;&#x2003;(3)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0049" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Cr=</i>0.5&#xd7;<i>R&#x2212;</i>0.419&#xd7;<i>G&#x2212;</i>0.081&#xd7;<i>B </i>&#x2003;&#x2003;(4)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0050" num="0045">In step S<b>202</b>, the image processing unit <b>111</b> performs frequency separation processing so as to separate the luminance component generated in step S<b>201</b> into a low-frequency component and a high-frequency component. This is because the processing is switched between low and high frequency components based on the Retinex theory. The Retinex theory is a model of how the human brain captures colors and light. In this theory, the intensity of light entering the eyes is expressed by the product of reflectance of an object and light illuminating that object, and it is assumed that luminance and color perceived by a person are largely dependent on the amount of relative change from the surroundings rather than the absolute optical amounts. The absolute optical amount means the light illuminating an object, and the amount of relative change is the reflectance of an object.</p><p id="p-0051" num="0046">In step S<b>202</b>, the low frequency component of an image is separated and extracted as an illumination light component illuminating an object. A low-pass filter is applied to separate the low-frequency component. The method for processing may be applying a spatial filter or first converting into a spatial frequency by FFT (Fast Fourier Transform) and then reversing by IFFT (Inverse Fast Fourier Transform) after filtering. The target frequency may be determined from the paper size and viewing distance for when viewing printed matter by taking into account human visual characteristics. For extraction of the high-frequency component, a high-pass filter may be applied, or an original image may be divided by the acquired low-frequency component.</p><p id="p-0052" num="0047">In step S<b>203</b>, the image processing unit <b>111</b> performs dynamic range conversion processing on the low-frequency component separated in step S<b>202</b>. The image processing unit <b>111</b> converts the luminance component using the dynamic range conversion table generated in step S<b>104</b>.</p><p id="p-0053" num="0048">In step S<b>204</b>, the image processing unit <b>111</b> executes contrast correction processing on the high-frequency component. The contrast correction processing is processing of multiplying the value of the high-frequency component by a coefficient k. When faithfully approximating to the input data, k=approximately 1, and when deterioration such as ink bleeding on printed matter is further taken into account, k is set to a value greater than or equal to 1.</p><p id="p-0054" num="0049">In step S<b>205</b>, the image processing unit <b>111</b> recombines the data on which the dynamic range conversion has been executed in step S<b>203</b> and the data on which the contrast correction processing has been executed in step S<b>204</b>. In step S<b>206</b>, the image processing unit <b>111</b> combines the luminance component and the chrominance component and converts the combined luminance component and chrominance component into an RGB color space using Equations (5) to (7).</p><p id="p-0055" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>R=Y+</i>1.402&#xd7;<i>Cr </i>&#x2003;&#x2003;(5)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0056" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>G=Y&#x2212;</i>0.344&#xd7;<i>Cb&#x2212;</i>0.714&#xd7;<i>Cr </i>&#x2003;&#x2003;(6)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0057" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>B=Y+</i>1.772&#xd7;<i>Cb </i>&#x2003;&#x2003;(7)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0058" num="0050">After step S<b>206</b>, the processing of <figref idref="DRAWINGS">FIG. <b>6</b></figref> ends, and the processing proceeds to step S<b>106</b> of <figref idref="DRAWINGS">FIG. <b>4</b></figref>. In step S<b>106</b>, the output image generation unit <b>113</b> converts the image data that has been subjected to dynamic range conversion in step S<b>105</b> into data that can be processed by the printing apparatus <b>110</b> such as print data corresponding to the ejection of ink from a printhead and then outputs the data.</p><p id="p-0059" num="0051">As described above, in the present embodiment, as illustrated in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, the minimum luminance value of display luminance information is set as the minimum luminance value of output image. With such a configuration, dynamic range conversion is performed so as to bring the contrast of a dark region of printed matter closer to the contrast of a dark region of a display. As a result, it is possible to perform control so as to suppress the difference in the appearance of an image displayed on the display and the appearance of an image on the printed matter printed by the printing apparatus.</p><heading id="h-0008" level="1">Second Embodiment</heading><p id="p-0060" num="0052">Hereinafter, a second embodiment will be described regarding the points that are different from the first embodiment. A description will be given on a method for generating a dynamic range conversion table in step S<b>104</b> of <figref idref="DRAWINGS">FIG. <b>4</b></figref> in the present embodiment with reference to <figref idref="DRAWINGS">FIG. <b>7</b></figref>. A solid line <b>703</b> in <figref idref="DRAWINGS">FIG. <b>7</b></figref> represents the correspondence between the input luminance and the output luminance for when performing dynamic range conversion. Dis is a point in a shadow portion of input luminance, and Dos is the output luminance corresponding thereto. In the first embodiment, the minimum luminance value of an output image is set based on the display luminance information and the print luminance information. In the present embodiment, a luminance conversion line for the shadow portion is set based on the display luminance information and the print luminance information.</p><p id="p-0061" num="0053">A luminance that is smaller than Dia and brighter than the minimum luminance value is set as Dis in <figref idref="DRAWINGS">FIG. <b>7</b></figref>. In present embodiment, Dis=9 which is a half value of Dia=18 is set, for example. Then, Dos corresponding to Dis is set using Equation (8). In Equation (8), m is a coefficient.</p><p id="p-0062" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Dos=Dis+m</i>&#xd7;(minimum luminance value of the display luminance&#x2212;minimum luminance value of the printing apparatus) &#x2003;&#x2003;(8)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0063" num="0054">The minimum luminance value of the display luminance information acquired in step S<b>102</b> is 0.77 nit, and the minimum luminance value of the print luminance information of the printing apparatus <b>110</b> acquired in step S<b>103</b> is 0.25 nit, for example. In that case, when m=4, Dos=9+4&#xd7;(0.77&#x2212;0.25)=11.08 is calculated from Equation (8). Here, when the minimum luminance value of the display luminance information is smaller than the minimum luminance value of the print luminance information of the printing apparatus <b>110</b>, Dos takes on a negative value; however, in that case, Dos=Dis. Dimax, Domax, Dia, and Doa are the same as the description in the first embodiment.</p><p id="p-0064" num="0055">The image processing unit <b>111</b> performs spline interpolation so that a smooth curve is generated through each control point and an origin determined as described above. The curve generated by spline interpolation is such that Dos becomes an inflection point as illustrated in <figref idref="DRAWINGS">FIG. <b>7</b></figref> and is converted into a one-dimensional LUT format. Although spline interpolation is used in the present embodiment, another configuration such as histogram smoothing processing for smoothing a histogram of an image may be used.</p><p id="p-0065" num="0056">As described above, according to the present embodiment, a shadow portion of a dynamic range conversion table is controlled to be brighter as the minimum luminance value of the display luminance information becomes brighter than the minimum luminance value of the print luminance information of a printing apparatus. By controlling the shadow portion to be brighter by dynamic range conversion processing, a difference in contrast between a dark region on display of a display and on printed matter is suppressed. As a result, it is possible to perform control so as to suppress the difference in the appearance of an image displayed on the display and the appearance of an image on the printed matter printed by the printing apparatus.</p><p id="p-0066" num="0057">Hereinafter, a case in which printed matter outputted from the printing apparatus <b>110</b> is observed under brighter illumination than in the case of the reproduced luminance characteristic of printed matter illustrated in <figref idref="DRAWINGS">FIG. <b>2</b></figref> will be described. <figref idref="DRAWINGS">FIG. <b>8</b></figref> represents the display luminance characteristic of a display and the reproduced luminance characteristic of printed matter. A display luminance characteristic <b>801</b> of the display is the same as the display luminance characteristic <b>201</b> of the display of <figref idref="DRAWINGS">FIG. <b>2</b></figref>. A luminance characteristic <b>802</b> is a reproduced luminance characteristic for when printed matter is illuminated. However, a case where brighter illumination than in <figref idref="DRAWINGS">FIG. <b>2</b></figref> is applied on the printed matter is envisioned. A black on printed matter that is 0.25 nit when exposed to light of 100 nits becomes 0.5 nit when exposed to light of 200 nits, proportionally. That is, the luminance characteristic <b>802</b> indicates the luminance characteristic for when exposed to light of 200 nits.</p><p id="p-0067" num="0058">In this case, the dynamic range conversion table of luminance is also created as in the first embodiment and the second embodiment. Hereinafter, the processing in step S<b>103</b> of <figref idref="DRAWINGS">FIG. <b>4</b></figref> in the present case will be described. Steps S<b>101</b> and S<b>102</b> is the same as in the description of the first embodiment and the second embodiment, so their description will be omitted.</p><p id="p-0068" num="0059">In step S<b>103</b>, the image processing unit <b>111</b> acquires, as the print luminance information, the maximum luminance value and the minimum luminance value reproduced by the printing apparatus <b>110</b> for when illumination such as light of 200 nits that is brighter than a reference is applied. The maximum luminance value and the minimum luminance value for when illumination that is brighter than the reference is applied can be calculated from the luminance value and the illumination condition for when the illumination of reference luminance is applied. That is, since a luminance value is proportional to luminance of illumination, the maximum luminance value and the minimum luminance value for when illumination that is brighter than the reference is applied are calculated by multiplying the ratio of illumination conditions with the maximum luminance value and the minimum luminance value for when reference illumination is applied. Steps S<b>104</b> to S<b>106</b> subsequent to step S<b>103</b> are processed as in the description of the first embodiment and the second embodiment.</p><p id="p-0069" num="0060">In this way, it is possible to create a luminance dynamic range conversion table by calculating the print luminance information corresponding to any illumination condition based on the print luminance information corresponding to an illumination condition serving as a reference.</p><p id="p-0070" num="0061">In the above-described embodiments, in step S<b>102</b>, the image processing unit <b>111</b> may acquire the display luminance information of the HDR display <b>108</b> via a user interface screen. <figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates a screen <b>901</b> for acquiring the display luminance information. A text box <b>902</b> is an input region for inputting the minimum luminance value of the HDR display <b>108</b>, and a text box <b>903</b> is an input region for inputting the maximum luminance value of the HDR display <b>108</b>. The user operates the operation unit <b>109</b> to input luminance values to the text boxes <b>902</b> and <b>903</b>. The image processing unit <b>111</b> acquires the values inputted to the text boxes <b>902</b> and <b>903</b> and sets them as the minimum luminance value and the maximum luminance value of the display luminance information.</p><p id="p-0071" num="0062">By allowing the user to input the luminance values as in <figref idref="DRAWINGS">FIG. <b>9</b></figref>, it becomes possible for the user to manipulate the contrast of a dark region of printed matter outputted from the printing apparatus <b>110</b>. That is, even when there are individual differences in a difference between the appearance of an image displayed on a desired display and the appearance on printed matter outputted by the printing apparatus <b>110</b>, it is possible to appropriately perform control so as to suppress the difference in appearance.</p><heading id="h-0009" level="1">Other Embodiments</heading><p id="p-0072" num="0063">Embodiment(s) of the present invention can also be realized by a computer of a system or apparatus that reads out and executes computer executable instructions (e.g., one or more programs) recorded on a storage medium (which may also be referred to more fully as &#x2018;non-transitory computer-readable storage medium&#x2019;) to perform the functions of one or more of the above-described embodiment(s) and/or that includes one or more circuits (e.g., application specific integrated circuit (ASIC)) for performing the functions of one or more of the above-described embodiment(s), and by a method performed by the computer of the system or apparatus by, for example, reading out and executing the computer executable instructions from the storage medium to perform the functions of one or more of the above-described embodiment(s) and/or controlling the one or more circuits to perform the functions of one or more of the above-described embodiment(s). The computer may comprise one or more processors (e.g., central processing unit (CPU), micro processing unit (MPU)) and may include a network of separate computers or separate processors to read out and execute the computer executable instructions. The computer executable instructions may be provided to the computer, for example, from a network or the storage medium. The storage medium may include, for example, one or more of a hard disk, a random-access memory (RAM), a read only memory (ROM), a storage of distributed computing systems, an optical disk (such as a compact disc (CD), digital versatile disc (DVD), or Blu-ray Disc (BD)&#x2122;, a flash memory device, a memory card, and the like.</p><p id="p-0073" num="0064">While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all such modifications and equivalent structures and functions.</p><p id="p-0074" num="0065">This application claims the benefit of Japanese Patent Application No. 2021-110880, filed Jul. 2, 2021, which is hereby incorporated by reference herein in its entirety.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. An information processing apparatus comprising:<claim-text>a first acquisition unit configured to acquire input image data;</claim-text><claim-text>a second acquisition unit configured to acquire display luminance information that includes a maximum luminance value and a minimum luminance value in displaying on a display device and print luminance information that includes a maximum luminance value and a minimum luminance value to be reproduced on printed matter to be outputted by a printing apparatus; and</claim-text><claim-text>a conversion unit configured to, in order to cause the printing apparatus to perform output based on the input image data for which display is performed on the display device, convert a first luminance range of the input image data to a second luminance range that is smaller than the first luminance range and then generate output image data having the second luminance range, wherein</claim-text><claim-text>the minimum luminance value of the display luminance information is larger than the minimum luminance value of the print luminance information, and</claim-text><claim-text>the conversion unit converts a luminance value of a dark region of the input image data to a luminance value of a dark region of the output image data such that a contrast of a dark region that includes the minimum luminance value of the print luminance information becomes closer to a contrast of a dark region that includes the minimum luminance value of the display luminance information.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The information processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the conversion unit converts the luminance value of the input image data to the luminance value of the output image data using a conversion curve in which the luminance value of the input image data and the luminance value of the output image data are associated.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The information processing apparatus according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein<claim-text>in the conversion curve, the minimum luminance value of the display luminance information is set as a minimum luminance value of the second luminance range.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The information processing apparatus according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein in the conversion curve, a correspondence relationship of luminance values between a dark region of the first luminance range and a dark region of the second luminance range is convex on a side of the second luminance range.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The information processing apparatus according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the conversion curve is set based on a predetermined luminance value of the dark region of the first luminance range.</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The information processing apparatus according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the conversion curve is set such that a point of intersection of the predetermined luminance value and a luminance value in which a difference between the minimum luminance value of the display luminance information and the minimum luminance value of the print luminance information has been added to the predetermined luminance value is an inflection point.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The information processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a dark region of the first luminance range and a dark region of the second luminance range are set based on a predetermined reflectance.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The information processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the conversion unit is stored in the information processing apparatus as a lookup table.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The information processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the second acquisition unit acquires the display luminance information via a user interface screen.</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The information processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the second acquisition unit acquires the print luminance information based on an illumination condition that is a reference.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The information processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising: a control unit configured to cause the printing apparatus to perform output based on the output image data generated by the conversion unit.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The information processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the input image data is HDR (High Dynamic Range) image data.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. An information processing method comprising:<claim-text>acquiring input image data;</claim-text><claim-text>acquiring display luminance information that includes a maximum luminance value and a minimum luminance value in display on a display device and print luminance information that includes a maximum luminance value and a minimum luminance value to be reproduced on printed matter to be outputted by a printing apparatus; and</claim-text><claim-text>in order to cause the printing apparatus to perform output based on the input image data for which display is performed on the display device, converting a first luminance range of the input image data to a second luminance range that is smaller than the first luminance range and then generating output image data having the second luminance range, wherein</claim-text><claim-text>the minimum luminance value of the display luminance information is larger than the minimum luminance value of the print luminance information, and</claim-text><claim-text>a luminance value of a dark region of the input image data is converted to a luminance value of a dark region of the output image data such that a contrast of a dark region that includes the minimum luminance value of the print luminance information becomes closer to a contrast of a dark region that includes the minimum luminance value of the display luminance information.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The information processing method according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the luminance value of the input image data is converted to the luminance value of the output image data using a conversion curve in which the luminance value of the input image data and the luminance value of the output image data are associated.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The information processing method according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein<claim-text>in the conversion curve, the minimum luminance value of the display luminance information is set as a minimum luminance value of the second luminance range.</claim-text></claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The information processing method according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein in the conversion curve, a correspondence relationship of luminance values between a dark region of the first luminance range and a dark region of the second luminance range is convex on a side of the second luminance range.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The information processing method according to <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the conversion curve is set based on a predetermined luminance value of the dark region of the first luminance range.</claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. The information processing method according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the input image data is HDR (High Dynamic Range) image data.</claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. A non-transitory computer-readable storage medium storing a program configured to cause a computer to function to:<claim-text>acquiring input image data;</claim-text><claim-text>acquiring display luminance information that includes a maximum luminance value and a minimum luminance value in display on a display device and print luminance information that includes a maximum luminance value and a minimum luminance value to be reproduced on printed matter to be outputted by a printing apparatus; and</claim-text><claim-text>in order to cause the printing apparatus to perform output based on the input image data for which display is performed on the display device, converting a first luminance range of the input image data to a second luminance range that is smaller than the first luminance range and then generating output image data having the second luminance range,</claim-text><claim-text>wherein</claim-text><claim-text>the minimum luminance value of the display luminance information is larger than the minimum luminance value of the print luminance information, and</claim-text><claim-text>a luminance value of a dark region of the input image data is converted to a luminance value of a dark region of the output image data such that a contrast of a dark region that includes the minimum luminance value of the print luminance information becomes closer to a contrast of a dark region that includes the minimum luminance value of the display luminance information.</claim-text></claim-text></claim></claims></us-patent-application>