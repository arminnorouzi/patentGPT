<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006591A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006591</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17784428</doc-number><date>20201216</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>IL</country><doc-number>271478</doc-number><date>20191216</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>P</subclass><main-group>23</main-group><subgroup>14</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>P</subclass><main-group>25</main-group><subgroup>03</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>P</subclass><main-group>27</main-group><subgroup>06</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>02</class><subclass>P</subclass><main-group>3</main-group><subgroup>18</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>23</main-group><subgroup>14</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20160201</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>25</main-group><subgroup>03</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>27</main-group><subgroup>06</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>02</class><subclass>P</subclass><main-group>3</main-group><subgroup>18</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">OPTIMIZED BRUSHLESS DC (BLDC) MOTOR DRIVE SYSTEM</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>IRP NEXUS GROUP LTD</orgname><address><city>Nes Ziona</city><country>IL</country></address></addressbook><residence><country>IL</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>ZNATY</last-name><first-name>Uriel</first-name><address><city>Herzliya</city><country>IL</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>BEN YAACOV</last-name><first-name>Shmuel</first-name><address><city>Tel Yitzhak</city><country>IL</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>PRICE</last-name><first-name>Paul</first-name><address><city>Nes-Ziona</city><country>IL</country></address></addressbook></inventor></inventors></us-parties><pct-or-regional-filing-data><document-id><country>WO</country><doc-number>PCT/IL2020/051293</doc-number><date>20201216</date></document-id><us-371c12-date><date>20220610</date></us-371c12-date></pct-or-regional-filing-data></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A drive system for a BLDC motor having poles implemented by separate coils that are activated in corresponding phases, which comprises a controller for controlling the level and phase of input voltages supplied to the separate coils; a controlled inverter with outputs, for applying phase-separated input voltages to each of the separate coils at desired timing for each input voltage, determined by the controller; a power source for feeding power to the controlled inverter; an up/down DC-DC converter for converting the feeding power to the input voltages according to a command signal provided by the controller. The controller is adapted to sample the instantaneous angle of the rotor of the BLDC motor; sample the input voltage input voltage and the current of each phase to obtain the input power P; and for each input voltage, calculate the phase difference value that corresponds to the input power and feeds the phase difference value to the up/down DC-DC converter, thereby causing the up/down DC-DC converter to apply each input voltage to its corresponding coil at a specific timing for obtaining an optimal match between each input voltage and the current that is being built up in the corresponding coil.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="90.42mm" wi="136.48mm" file="US20230006591A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="210.99mm" wi="151.38mm" file="US20230006591A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="213.61mm" wi="152.48mm" file="US20230006591A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="230.04mm" wi="185.59mm" file="US20230006591A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="214.71mm" wi="168.49mm" file="US20230006591A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="221.40mm" wi="108.80mm" file="US20230006591A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="227.58mm" wi="138.51mm" file="US20230006591A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="225.47mm" wi="186.86mm" file="US20230006591A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="126.49mm" wi="102.45mm" file="US20230006591A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="129.46mm" wi="154.94mm" file="US20230006591A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="206.08mm" wi="154.94mm" file="US20230006591A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00011" num="00011"><img id="EMI-D00011" he="162.05mm" wi="132.25mm" file="US20230006591A1-20230105-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00012" num="00012"><img id="EMI-D00012" he="120.99mm" wi="87.63mm" file="US20230006591A1-20230105-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">FIELD OF THE INVENTION</heading><p id="p-0002" num="0001">The present invention relates to the field of DC motor drive systems. More particularly, the invention relates to a method and circuitry for performing efficient bidirectional power transfer and accurate phase correction of DC motor drives.</p><heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading><p id="p-0003" num="0002">In brushless motors, there is a permanent magnet which is a part of the rotor and surrounding several coils which are a part of the stator. When a coil is activated, the generated magnetic field attracts/detracts one of the poles of the rotor magnets in order to start and maintain rotation. Then the next coil is activated and so on. <figref idref="DRAWINGS">FIG. <b>1</b></figref> (prior art) shows a motor in which the permanent magnets are in the center, surrounded by several coils that function as controlled electromagnets. <figref idref="DRAWINGS">FIG. <b>2</b></figref> (prior art) shows a motor in which several coils that function as controlled electromagnets the permanent magnets are in the center, surrounded by permanent magnets.</p><p id="p-0004" num="0003"><figref idref="DRAWINGS">FIGS. <b>3</b><i>a </i>and <b>3</b><i>b </i></figref>show star and triangular motor topology, respectively. Most of the motors are implemented in a star topology, which has less power losses than the triangular configuration which may have a parasitic circulating current. Generally, the model of a motor can be illustrated by a star connection of three equivalent circuits, each of which consisting of a serial connection of an inductor L, a resistor R and a voltage source representing the electromotive force (EMF) generated when the inductor passes (via rotation) a permanent magnet, as shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>. The magnitude of the EMF depends on the rotation velocity of the rotor. Therefore, increasing the applied voltage (at points A, B and C) increases the rotor's rotation velocity.</p><p id="p-0005" num="0004"><figref idref="DRAWINGS">FIG. <b>5</b></figref> (prior art) shows a typical motor drive circuit using an inverter that generates the required voltages (A, B and C) and phase differences. For optimal operation, the current in each branch should be in phase with the EMF sensed by the motor poles, as shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref> (showing a six step operation). It can be seen that the phase of each branch is shifted by 120&#xb0; with respect to the other branches. The current flowing in the motor is proportional to the torque applied to the rotor. For example, if the motor drives a car on a steep road, the current increases due to higher required torque.</p><p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. <b>7</b></figref> (prior art) shows a motor drive circuit where the speed is controlled by the magnitude of a variable input voltage Vin. Alternatively, it is possible to control the motor speed by applying a constant Vin and using PWM to control the effective current that reaches each branch. The input voltage may also be sinusoidal, generated by PWM, in order to obtain a smoother rotation pattern. However, PWM suffers from high switching losses in continuous drive, acceleration and especially in deceleration (braking) when power regeneration is desired.</p><p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. <b>8</b></figref> (prior art) shows a motor drive circuit where the coils are separated and the input voltage is applied individually to each coil. This has an advantage, since each coil can receive the maximum possible input voltage and therefore, higher speeds and better dynamics can be obtained. However, separate coils may suffer from currents unbalance due to differences in voltage drops of phases and timing imperfection.</p><p id="p-0008" num="0007">When motors are driven continuously, being accelerated or decelerated, there exists a phase-shift between the phase voltages and the EMF voltages. The magnitude of this phase difference is a function of the phase impedance (equivalent R and L), the magnitude of the current and the rotating magnetic field frequency as shown in <figref idref="DRAWINGS">FIG. <b>9</b></figref> for a six-step drive. This entails the generation of unwanted reactive power, which lowers the motor efficiency due to the increased losses.</p><p id="p-0009" num="0008">One of the known solutions to this problem is called Field Oriented Control (FOC), which is illustrated schematically in <figref idref="DRAWINGS">FIG. <b>10</b></figref>. According to this solution, by measuring the currents I<sub>B </sub>and I<sub>C </sub>in two branches, it is possible to calculate the correct phase of applying the input voltage Vin to each branch (phase), for example, using the Clarke-Park transformation (in which phase currents and voltages are expressed in terms of current and voltages space vectors). However, FOC (which assumes sinusoidal magnetic field) is less accurate for rectangular pulses of Vin and requires considerable computing power.</p><p id="p-0010" num="0009">It is therefore an object of the present invention to provide a method and circuitry for an efficient bidirectional motor drive and phase correction of motor drives, which is more accurate than prior art methods.</p><p id="p-0011" num="0010">Other objects and advantages of the invention will become apparent as the description proceeds.</p><heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading><p id="p-0012" num="0011">Method for efficiently providing drive power to a BLDC motor, comprising the steps of:<ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0000">    <ul id="ul0002" list-style="none">        <li id="ul0002-0001" num="0012">a) providing a BLDC motor having separate coils;</li>        <li id="ul0002-0002" num="0013">b) providing a controller for controlling the level and phase of input voltages supplied to the separate coils;</li>        <li id="ul0002-0003" num="0014">c) providing a controlled inverter with outputs, for applying phase-separated input voltages to each of the separate coils at desired timing for each input voltage, determined by the controller;</li>        <li id="ul0002-0004" num="0015">d) providing a power source for feeding power to the controlled inverter; the controller is adapted to:</li>        <li id="ul0002-0005" num="0016">e) sample the instantaneous angle &#x3c6; of the rotor of the BLDC motor;</li>        <li id="ul0002-0006" num="0017">f) measure the input power P to all phases; and</li>        <li id="ul0002-0007" num="0018">g) for each input voltage, calculate the phase difference &#x394;&#x3c6; value and the inverter's modulation level that corresponds to the input power P and feed the phase difference value to the controlled inverter.</li>    </ul>    </li></ul></p><p id="p-0013" num="0019">The phase difference &#x394;&#x3c6; value may be calculated for obtaining one or more of the following:<ul id="ul0003" list-style="none">    <li id="ul0003-0001" num="0000">    <ul id="ul0004" list-style="none">        <li id="ul0004-0001" num="0020">desired angular velocity</li>        <li id="ul0004-0002" num="0021">desired torque;</li>        <li id="ul0004-0003" num="0022">desired phase current.</li>    </ul>    </li></ul></p><p id="p-0014" num="0023">In one aspect, an up/down DC-DC converter is provided for converting the feeding power to the input voltages according to a command signal provided by the controller.</p><p id="p-0015" num="0024">The power source may be one of the following:<ul id="ul0005" list-style="none">    <li id="ul0005-0001" num="0000">    <ul id="ul0006" list-style="none">        <li id="ul0006-0001" num="0025">a battery;</li>        <li id="ul0006-0002" num="0026">an AC power grid followed by a bridge rectifier.</li>    </ul>    </li></ul></p><p id="p-0016" num="0027">The inverter's modulation type may be Pulse Width Modulation (PWM) or Space Vector Modulation (SVM).</p><p id="p-0017" num="0028">The DC-DC converter may be selected from the group of:<ul id="ul0007" list-style="none">    <li id="ul0007-0001" num="0000">    <ul id="ul0008" list-style="none">        <li id="ul0008-0001" num="0029">bidirectional converter;</li>        <li id="ul0008-0002" num="0030">bidirectional Buck/boost converter;</li>        <li id="ul0008-0003" num="0031">bidirectional multiphase converter.</li>    </ul>    </li></ul></p><p id="p-0018" num="0032">In one aspect, the method comprises the following steps:<ul id="ul0009" list-style="none">    <li id="ul0009-0001" num="0000">    <ul id="ul0010" list-style="none">        <li id="ul0010-0001" num="0033">a) providing a BLDC motor having separate coils;</li>        <li id="ul0010-0002" num="0034">b) providing a controller for controlling the level and phase of input voltages supplied to the separate coils;</li>        <li id="ul0010-0003" num="0035">c) providing a controlled inverter with outputs, for applying phase-separated input voltages to each of the separate coils at desired timing for each input voltage, determined by the controller;</li>        <li id="ul0010-0004" num="0036">d) providing a power source for feeding power to the controlled inverter;</li>        <li id="ul0010-0005" num="0037">e) providing an up/down DC-DC converter for converting the feeding power to the input voltages according to a command signal provided by the controller, the controller is adapted to:</li>        <li id="ul0010-0006" num="0038">f) sample the instantaneous angle &#x3c6; of the rotor of the BLDC motor;</li>        <li id="ul0010-0007" num="0039">g) sample the input voltage Vin and the current I of each phase to obtain the input power P; and</li>        <li id="ul0010-0008" num="0040">h) for each Vin, calculate the phase difference &#x394;&#x3c6; value that corresponds to the input power P and feeds the phase difference value to the up/down DC-DC converter, thereby causing the up/down DC-DC converter to apply each Vin to its corresponding coil at a specific timing for obtaining an optimal match between each Vin and the current that is being built up in the corresponding coil.</li>    </ul>    </li></ul></p><p id="p-0019" num="0041">The up/down DC-DC converter may be bidirectional, for allowing excess power generated in the motor to flow back to the power source, for during regeneration operating mode, where the voltage E across the motor's coils is greater than the input voltage Vin.</p><p id="p-0020" num="0042">A drive system for a BLDC motor having poles implemented by separate coils that are activated in corresponding phases, which comprises:<ul id="ul0011" list-style="none">    <li id="ul0011-0001" num="0000">    <ul id="ul0012" list-style="none">        <li id="ul0012-0001" num="0043">a) a controller for controlling the level and phase of input voltages supplied to the separate coils;</li>        <li id="ul0012-0002" num="0044">b) a controlled inverter with outputs, for applying phase-separated input voltages to each of the separate coils at desired timing for each input voltage, determined by the controller;</li>        <li id="ul0012-0003" num="0045">c) a power source for feeding power to the controlled inverter;</li>        <li id="ul0012-0004" num="0046">d) an up/down DC-DC converter for converting the feeding power to the input voltages according to a command signal provided by the controller, the controller is adapted to:</li>        <li id="ul0012-0005" num="0047">e) sample the instantaneous angle &#x3c6; of the rotor of the BLDC motor;</li>        <li id="ul0012-0006" num="0048">f) sample the input voltage Vin and the current I of each phase to obtain the input power P; and</li>        <li id="ul0012-0007" num="0049">g) for each Vin, calculate the phase difference &#x394;&#x3c6; value that corresponds to the input power P and feeds the phase difference value to the up/down DC-DC converter, thereby causing the up/down DC-DC converter to apply each Vin to its corresponding coil at a specific timing for obtaining an optimal match between each Vin and the current that is being built up in the corresponding coil.</li>    </ul>    </li></ul></p><p id="p-0021" num="0050">The drive system may comprise:<ul id="ul0013" list-style="none">    <li id="ul0013-0001" num="0000">    <ul id="ul0014" list-style="none">        <li id="ul0014-0001" num="0051">a) a bidirectional bridge connected to a power source having a constant voltage V<sub>B </sub>and being adapted to operate as a rectifier to one direction or as an inverter to the opposite direction;</li>        <li id="ul0014-0002" num="0052">b) a bidirectional Buck-boost converter connected to the bidirectional bridge;</li>        <li id="ul0014-0003" num="0053">c) a plurality of bridges, each of which distributing an input voltage Vin to a corresponding coil of the motor;</li>        <li id="ul0014-0004" num="0054">where the controller is adapted to:</li>        <li id="ul0014-0005" num="0055">d) calculate phase difference &#x394;&#x3c6; that corresponds to each value of power P and generate appropriate signals to the gates of the plurality of bridges;</li>        <li id="ul0014-0006" num="0056">e) push more power into the bidirectional bridge upon detecting that voltage V<sub>B </sub>decreases, and to return power into the power source upon detecting that voltage V<sub>B </sub>increases.</li>    </ul>    </li></ul></p><p id="p-0022" num="0057">Up/down conversion may be performed in a relatively high frequency, while operating a plurality of bridges with relatively low frequency.</p><p id="p-0023" num="0058">The drive system may be adapted to operate with a constant current or a constant power which are delivered to the motor.</p><p id="p-0024" num="0059">In one aspect, during a regeneration operating mode when the voltage E across the motor's coils is greater that the input voltage Vin, the regeneration current is directed to flow via diodes.</p><p id="p-0025" num="0060">During a regeneration operating mode when the voltage E across the motor's coils is greater than the input voltage Vin, the regeneration current may be directed to flow via transistors, parallelly connected to the diodes to reduce power losses.</p><p id="p-0026" num="0061">The drive system may comprise:<ul id="ul0015" list-style="none">    <li id="ul0015-0001" num="0000">    <ul id="ul0016" list-style="none">        <li id="ul0016-0001" num="0062">a) a first comparator for measuring the current and compared the current to a desired reference current I<sub>ref </sub>and for outputting the difference between I</li>        <li id="ul0016-0002" num="0063">b) a second comparator which receives the output of the first comparator and samples the voltage Vin; and</li>        <li id="ul0016-0003" num="0064">c) a second phase compensator for changing the voltage Vin in a direction that causes the current I to be equal to the reference current I<sub>ref</sub>.</li>    </ul>    </li></ul></p><p id="p-0027" num="0065">Whenever the control is a power-based control, the system may comprise:<ul id="ul0017" list-style="none">    <li id="ul0017-0001" num="0000">    <ul id="ul0018" list-style="none">        <li id="ul0018-0001" num="0066">a) a comparator for comparing the product of the current I and the voltage Vin to a desired reference power P<sub>ref</sub>.</li>        <li id="ul0018-0002" num="0067">b) a first phase compensator that receives the difference between P and P<sub>ref</sub>;</li>        <li id="ul0018-0003" num="0068">c) a second comparator which receives the difference and samples the voltage Vin;</li>        <li id="ul0018-0004" num="0069">d) a second phase compensator for changing the voltage Vin in a direction that causes the power P to be equal to the reference power P<sub>ref</sub>.</li>    </ul>    </li></ul></p><p id="p-0028" num="0070">In one aspect, several Buck-boost converters generate voltages V<sub>A</sub>, V<sub>B </sub>and V<sub>C</sub>, for time periods with desired duty cycles, for distributing the power between three stages that operate in parallel, to obtain ripple cancelation effect.</p><p id="p-0029" num="0071">The magnitude of the required phase-advance may be obtained by measuring the DC input power to the inverter, based on a pre-stored lookup table.</p><p id="p-0030" num="0072">The motor may be fed by a current source, which provides the desired current to the phases.</p><p id="p-0031" num="0073">Whenever the power source is a battery, the control circuit may comprise a bidirectional converter that is operated as a Buck converter in the forward direction and as a Boost converter in the reverse direction, for operation with a constant current or a constant voltage which are delivered to the motor.</p><p id="p-0032" num="0074">In the forward direction, controller adjusts the voltage or current fed to the motor per the required speed and in regeneration mode, the controller adjusts the braking torque by adjusting the reverse current.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0033" num="0075">The above and other characteristics and advantages of the invention will be better understood through the following illustrative and non-limitative detailed description of preferred embodiments thereof, with reference to the appended drawings, wherein:</p><p id="p-0034" num="0076"><figref idref="DRAWINGS">FIG. <b>1</b></figref> (prior art) shows a motor with three poles, in which the permanent magnets are in the center, surrounded by several coils that function as controlled electromagnets;</p><p id="p-0035" num="0077"><figref idref="DRAWINGS">FIG. <b>2</b></figref> (prior art) shows a motor in which several coils that function as controlled electromagnets the permanent magnets are in the center, surrounded by permanent magnets;</p><p id="p-0036" num="0078"><figref idref="DRAWINGS">FIGS. <b>3</b><i>a </i>and <b>3</b><i>b </i></figref>(prior art) show star and triangular motor topology, respectively;</p><p id="p-0037" num="0079"><figref idref="DRAWINGS">FIG. <b>4</b></figref> (prior art) shows a model of a motor can be illustrated by a star connection;</p><p id="p-0038" num="0080"><figref idref="DRAWINGS">FIG. <b>5</b></figref> (prior art) shows a typical control circuit using an inverter that generates the required voltages and phase differences;</p><p id="p-0039" num="0081"><figref idref="DRAWINGS">FIG. <b>6</b></figref> (prior art) shows an optimal phase match between the current and the voltage in each branch;</p><p id="p-0040" num="0082"><figref idref="DRAWINGS">FIG. <b>7</b></figref> (prior art) shows a motor drive circuit where the speed is controlled by the magnitude of the input voltage;</p><p id="p-0041" num="0083"><figref idref="DRAWINGS">FIG. <b>8</b></figref> (prior art) shows a motor drive circuit where the coils are separated and the input voltage is applied individually to each coil;</p><p id="p-0042" num="0084"><figref idref="DRAWINGS">FIG. <b>9</b></figref> shows a mismatch between the phases of the current and the voltage in each branch;</p><p id="p-0043" num="0085"><figref idref="DRAWINGS">FIG. <b>10</b></figref> shows the concept of Field Oriented Control (FOC);</p><p id="p-0044" num="0086"><figref idref="DRAWINGS">FIG. <b>11</b></figref> shows a basic feeding path for each phase, which consists of a series connection of an inductor, followed by a resistor, which represents losses;</p><p id="p-0045" num="0087"><figref idref="DRAWINGS">FIG. <b>12</b></figref> shows simulation results of the obtained phase correction value &#x394;&#x3c6; as a function of power;</p><p id="p-0046" num="0088"><figref idref="DRAWINGS">FIG. <b>13</b></figref> shows a control apparatus that implements the method proposed by the present invention;</p><p id="p-0047" num="0089"><figref idref="DRAWINGS">FIG. <b>14</b></figref> illustrates an embodiment in which the motor is fed by a current source;</p><p id="p-0048" num="0090"><figref idref="DRAWINGS">FIG. <b>15</b><i>a </i></figref>illustrates a possible circuit <b>117</b>, which is an exemplary implementation of the apparatus of <figref idref="DRAWINGS">FIG. <b>12</b></figref> or <figref idref="DRAWINGS">FIG. <b>14</b></figref> above in which the power source is a battery;</p><p id="p-0049" num="0091"><figref idref="DRAWINGS">FIG. <b>15</b><i>b </i></figref>illustrates an embodiment of the invention in which the power source is the power line;</p><p id="p-0050" num="0092"><figref idref="DRAWINGS">FIGS. <b>16</b><i>a</i>-<b>16</b><i>d </i></figref>illustrate possible regeneration operating modes, according to an embodiment of the invention;</p><p id="p-0051" num="0093"><figref idref="DRAWINGS">FIG. <b>17</b></figref> illustrates a current-based voltage control, according to an embodiment of the invention;</p><p id="p-0052" num="0094"><figref idref="DRAWINGS">FIG. <b>18</b></figref> illustrates a power-based control, according to an embodiment of the invention;</p><p id="p-0053" num="0095"><figref idref="DRAWINGS">FIG. <b>19</b></figref> shows another embodiment, in which the up/down converter comprises a number of parallel and interleaved Buck-boost converters;</p><p id="p-0054" num="0096"><figref idref="DRAWINGS">FIG. <b>20</b></figref> shows a mode of operation that allows distributing the power between three stages that operate in parallel and as a result, obtaining better power dissipation and less heating of the transistors;</p><p id="p-0055" num="0097"><figref idref="DRAWINGS">FIG. <b>21</b></figref> shows a cancelation effect that allows the average current Iav and the voltage across capacitor C<b>1</b> to have lower ripple; and</p><p id="p-0056" num="0098"><figref idref="DRAWINGS">FIG. <b>22</b></figref> shows an embodiment in which the up-down converter is formed by a multilevel converter consisting of two half bridges in a totem pole configuration.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">DETAILED DESCRIPTION OF PREFERRED EMBODIMENTS</heading><p id="p-0057" num="0099">The present invention proposes a method and circuitry for a bidirectional drive and phase correction of motor drives, for motors with separated coils.</p><p id="p-0058" num="0100">The basic concept of the phase correction is based on signal processing in the time domain. <figref idref="DRAWINGS">FIG. <b>11</b></figref> shows a basic feeding path for each phase, which consists of a series connection of an inductor L, followed by a resistor R, which represents losses. Normally, the resistor is very small so it can be assumed that If E represents the EMF generated in the motor coil, then:</p><p id="p-0059" num="0000"><maths id="MATH-US-00001" num="00001"><math overflow="scroll"> <mtable>  <mtr>   <mtd>    <mrow>     <mrow>      <mi>L</mi>      <mo>&#x2062;</mo>      <mfrac>       <mi>dI</mi>       <mi>dt</mi>      </mfrac>     </mrow>     <mo>=</mo>     <mrow>      <msub>       <mi>V</mi>       <mi>in</mi>      </msub>      <mo>-</mo>      <mi>E</mi>     </mrow>    </mrow>   </mtd>   <mtd>    <mrow>     <mo>(</mo>     <mrow>      <mi>Eq</mi>      <mo>.</mo>      <mtext>   </mtext>      <mn>1</mn>     </mrow>     <mo>)</mo>    </mrow>   </mtd>  </mtr> </mtable></math></maths></p><p id="p-0060" num="0101">The current flowing in the branch is</p><p id="p-0061" num="0000"><maths id="MATH-US-00002" num="00002"><math overflow="scroll"> <mtable>  <mtr>   <mtd>    <mrow>     <mi>I</mi>     <mo>=</mo>     <mrow>      <mfrac>       <mn>1</mn>       <mi>L</mi>      </mfrac>      <mo>&#x2062;</mo>      <mrow>       <mo>&#x222b;</mo>       <mrow>        <mrow>         <mo>(</mo>         <mrow>          <mi>Vin</mi>          <mo>-</mo>          <mi>E</mi>         </mrow>         <mo>)</mo>        </mrow>        <mo>&#x2062;</mo>        <mi>dt</mi>       </mrow>      </mrow>     </mrow>    </mrow>   </mtd>   <mtd>    <mrow>     <mo>(</mo>     <mrow>      <mi>Eq</mi>      <mo>.</mo>      <mtext>   </mtext>      <mn>2</mn>     </mrow>     <mo>)</mo>    </mrow>   </mtd>  </mtr> </mtable></math></maths></p><p id="p-0062" num="0102">where E is the EMF of the motor.</p><p id="p-0063" num="0000"><maths id="MATH-US-00003" num="00003"><math overflow="scroll"> <mtable>  <mtr>   <mtd>    <mrow>     <mrow>      <mi>Imax</mi>      <mo>=</mo>      <mrow>       <mrow>        <mfrac>         <mi>Veff</mi>         <mi>L</mi>        </mfrac>        <mo>&#xb7;</mo>        <mi>&#x394;</mi>       </mrow>       <mo>&#x2062;</mo>       <mi>t</mi>      </mrow>     </mrow>     <mo>&#x2062;</mo>     <mtext></mtext>     <mi>and</mi>    </mrow>   </mtd>   <mtd>    <mrow>     <mo>(</mo>     <mrow>      <mi>Eq</mi>      <mo>.</mo>      <mtext>   </mtext>      <mn>3</mn>     </mrow>     <mo>)</mo>    </mrow>   </mtd>  </mtr> </mtable></math></maths><maths id="MATH-US-00003-2" num="00003.2"><math overflow="scroll"> <mtable>  <mtr>   <mtd>    <mrow>     <mrow>      <mi>&#x394;</mi>      <mo>&#x2062;</mo>      <mi>t</mi>     </mrow>     <mo>=</mo>     <mfrac>      <mrow>       <mi>Imax</mi>       <mo>&#xb7;</mo>       <mi>L</mi>      </mrow>      <mi>Veff</mi>     </mfrac>    </mrow>   </mtd>   <mtd>    <mrow>     <mo>(</mo>     <mrow>      <mi>Eq</mi>      <mo>.</mo>      <mtext>   </mtext>      <mn>4</mn>     </mrow>     <mo>)</mo>    </mrow>   </mtd>  </mtr> </mtable></math></maths></p><p id="p-0064" num="0103">where Veff is the effective voltage over the inductor L and &#x394;t is the time needed to start applying Vin, in order to correct the unwanted phase difference between the developed voltage and the phase current.</p><p id="p-0065" num="0104">The phase correction is related to &#x394;t by:</p><p id="p-0066" num="0000"><maths id="MATH-US-00004" num="00004"><math overflow="scroll"> <mtable>  <mtr>   <mtd>    <mrow>     <mi>&#x394;&#x3c6;</mi>     <mo>=</mo>     <mrow>      <mrow>       <mfrac>        <mi>RPM</mi>        <mrow>         <mn>6</mn>         <mo>&#x2062;</mo>         <mn>0</mn>        </mrow>       </mfrac>       <mo>&#xb7;</mo>       <mn>360</mn>       <mo>&#xb7;</mo>       <mi>p</mi>       <mo>&#xb7;</mo>       <mi>&#x394;</mi>      </mrow>      <mo>&#x2062;</mo>      <mi>t</mi>     </mrow>    </mrow>   </mtd>   <mtd>    <mrow>     <mo>(</mo>     <mrow>      <mi>Eq</mi>      <mo>.</mo>      <mtext>   </mtext>      <mn>5</mn>     </mrow>     <mo>)</mo>    </mrow>   </mtd>  </mtr> </mtable></math></maths></p><p id="p-0067" num="0105">where &#x3c1; is the number of poles in the motor.</p><p id="p-0068" num="0106">If the torque is given by M, then the mechanical power Pm is</p><p id="p-0069" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Pm=&#x3c9;M=</i>2&#x3c0;<i>f&#xb7;M</i>&#x2003;&#x2003;(Eq. 6)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0070" num="0000">and finally, the torque M is proportional to the current I and thus from (5) and (6):</p><p id="p-0071" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>&#x394;&#x3c6;&#x2248;<i>K</i><sub>1</sub><i>&#xb7;pm</i>&#x2003;&#x2003;(Eq. 7)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0072" num="0107">Where K<sub>1 </sub>is a constant.</p><p id="p-0073" num="0108">The electrical power Pe is given by the ratio between the mechanical power Pm and the efficiency &#x3b7; such that:</p><p id="p-0074" num="0000"><maths id="MATH-US-00005" num="00005"><math overflow="scroll"> <mrow>  <mi>Pe</mi>  <mo>=</mo>  <mfrac>   <mi>Pm</mi>   <mi>&#x3b7;</mi>  </mfrac> </mrow></math></maths></p><p id="p-0075" num="0109">and assuming high efficiency,</p><p id="p-0076" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>&#x394;&#x3c6;&#x2248;<i>K</i><sub>2</sub><i>&#xb7;&#xb7;Pe </i><?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0077" num="0000">where K<sub>1 </sub>is a constant that takes into account the efficiency and can be measured for a given motor drive family and stored in a look-up table for each value of input DC power to the system. This in lieu of the conventional FOC.</p><p id="p-0078" num="0110">The above derivation implies that the magnitude of the required phase-advance can be obtained by measuring the DC input power to the inverter, while K<b>2</b> can be based on a pre-stored lookup table.</p><p id="p-0079" num="0111">This considerably reduces the computing power required for deriving the phase advance in real-time. Furthermore, since it is based on a lookup table that is specific to each type of motor, it is highly accurate. The validity of the phase advance algorithm of the present invention, detailed above, has been validated experimentally. Typical results are shown in <figref idref="DRAWINGS">FIG. <b>12</b></figref> which documents the required phase advance as a function of input DC power for various motor speeds. These results demonstrate the fact that the relationship between the required phase shift and input DC power is for all practical purposes is unique for a given motor family and can be used to adjust the phase shift to the optimal point.</p><p id="p-0080" num="0112"><figref idref="DRAWINGS">FIG. <b>13</b></figref> shows a control apparatus that implements of the above method. The apparatus <b>110</b> comprises a power source <b>111</b> for feeding the input power to the motor, a bidirectional DC-DC converter <b>112</b>, a controlled inverter <b>113</b> for providing the input voltage Vin to the three phases A, B and C of the controlled BLDC motor <b>114</b> and a controller <b>116</b>, which provides the phase correction to the controlled inverter <b>113</b>. The instantaneous angle &#x3c6; of the rotor <b>115</b> is measured (sampled) and fed into controller <b>116</b>, which also samples the input voltage Vin and the current I of each phase and obtains the input power P. The phase difference value &#x394;&#x3c6; that corresponds to each value of power P is retrieved from a look-up table that is stored in advance in a memory (not shown) and fed into the controlled inverter <b>113</b>, which provides Vin to each phase with the appropriate angle (i.e., phase separated input voltages), such that there will be an optimal match between the voltage and the current of each coil.</p><p id="p-0081" num="0113">By calculating the phase difference &#x394;&#x3c6; value, the desired angular velocity co, the desired torque and the desired phase current may be obtained.</p><p id="p-0082" num="0114">In another embodiment of the invention, illustrated by <figref idref="DRAWINGS">FIG. <b>14</b></figref>, the motor is fed by a current source and hence, the current shape is determined by the drive and not by the impedance of the phases. In this configuration, the up-down converter acts like a current source to feed the desired current to the phases.</p><p id="p-0083" num="0115"><figref idref="DRAWINGS">FIG. <b>15</b></figref> illustrates a possible circuit <b>117</b>, which is an exemplary implementation of the apparatus of <figref idref="DRAWINGS">FIG. <b>12</b></figref> or <figref idref="DRAWINGS">FIG. <b>14</b></figref> above in which the power source is a battery. The circuit comprises a bidirectional converter <b>120</b> that is operated as a Buck converter in the forward direction and as a Boost converter in the reverse direction (three bridges <b>121</b><i>a</i>, <b>121</b><i>b </i>and <b>121</b><i>c </i>for the separated coils of phases A, B and C, respectively). This configuration enables the operation with a constant current or a constant voltage which are delivered to the motor. The difference being (a) the control algorithm and (b) the size of capacitor Cb. In voltage mode, the control controls the voltage across Cb while in current mode, the control is of the current while Cb is used to reduce the high frequency ripple and spikes. In the forward direction, controller <b>116</b> adjusts the voltage or current fed to the motor per the required speed. In the regeneration mode, the controller adjusts the braking torque by adjusting the reverse current.</p><p id="p-0084" num="0116"><figref idref="DRAWINGS">FIG. <b>15</b><i>b </i></figref>illustrates an embodiment of the invention in which the power source is the power line. Controller <b>116</b> adjust the motor forward and reverse motor current while the controller <b>121</b> of the rectifier/inverter <b>119</b> keeps voltage V<sub>B </sub>constant at all time. Upon detecting that voltage V<sub>B </sub>decreases, controller <b>122</b> pushes more power from power line <b>118</b> into bridge <b>119</b> and upon detecting that voltage V<sub>B </sub>increases, controller <b>122</b> returns power into grid <b>118</b> (i.e., power regeneration). Buck-boost converter <b>120</b> uses is controlled by <b>116</b> to feed energy to the motor <b>114</b> using up/down conversion in a relatively high PWM switching frequency, while the switching frequency of the motor inverter bridges <b>121</b><i>a</i>, <b>121</b><i>b </i>and <b>121</b><i>c </i>operate at the low frequency of the motor's electrical frequency.</p><p id="p-0085" num="0117">Controller <b>116</b> controls the input/output power P, by the up/down converter, calculates phase difference &#x394;&#x3c6; value and the inverter's modulation level that correspond to each value of power P and generates appropriate signals to the gates of bridges <b>121</b><i>a</i>, <b>121</b><i>b </i>and <b>121</b><i>c. </i></p><p id="p-0086" num="0118"><figref idref="DRAWINGS">FIG. <b>16</b></figref> illustrates a regeneration operating mode, according to an embodiment of the invention. In this case, the voltage E across the motor's separate coils is greater than the input voltage Vin and regeneration current I may flow via diodes D<sub>3 </sub>and D<sub>2 </sub>as shown in <figref idref="DRAWINGS">FIG. <b>16</b><i>a </i></figref>or via diodes D<sub>4 </sub>and D<sub>1 </sub>as shown in <figref idref="DRAWINGS">FIG. <b>16</b><i>b</i></figref>. Alternatively, in order to reduce power loss, current I may flow via transistors Q<sub>3 </sub>and Q<sub>2 </sub>as shown in <figref idref="DRAWINGS">FIG. <b>16</b><i>c </i></figref>or via transistors Q<sub>4 </sub>and Q<sub>1 </sub>as shown in <figref idref="DRAWINGS">FIG. <b>16</b><i>d</i></figref>, since the voltage drop across a conducting transistor is lower than across a conducting diode.</p><p id="p-0087" num="0119"><figref idref="DRAWINGS">FIG. <b>17</b></figref> illustrates a current-based voltage control, according to an embodiment of the invention. In this case, the voltage V is measured and compared by comparator <b>140</b> to a desired reference voltage V<sub>ref</sub>. The difference between V and V<sub>ref </sub>is fed into a first phase compensator <b>141</b>, the output of which is input into a second comparator <b>142</b> which samples the voltage I. A second phase compensator <b>143</b> feeds a PWM modulator that controls the up/down converter to force I to be equal to I<sub>ref </sub></p><p id="p-0088" num="0120"><figref idref="DRAWINGS">FIG. <b>18</b></figref> illustrates a power-based control, according to an embodiment of the invention. In this case, both the current I and the voltage Vin are measured and their product P is compared by comparator <b>140</b> to a desired reference power P<sub>ref</sub>. The difference between P and P<sub>ref </sub>is fed into a first phase compensator <b>141</b>, the output of which is input into a second comparator <b>141</b> which samples the voltage Vin. A second phase compensator <b>143</b> changes the voltage Vin in a direction that causes the power P to be equal to the reference power P<sub>ref</sub>.</p><p id="p-0089" num="0121"><figref idref="DRAWINGS">FIG. <b>19</b></figref> shows another embodiment, in which the up/down converter comprises a number of parallel and interleaved Buck-boost converters (instead of one Buck-boost converter <b>120</b>, as shown in <figref idref="DRAWINGS">FIG. <b>12</b></figref>). In this example, there are three Buck-boost converter <b>120</b><i>a </i>(consisting of a serial connection of Q<sub>1 </sub>and Q<sub>2</sub>), <b>120</b><i>b </i>(consisting of a serial connection of Q<sub>3 </sub>and Q<sub>4</sub>) and <b>120</b><i>c </i>(consisting of a serial connection of Q<sub>5 </sub>and Q<sub>6</sub>), which generate voltages V<sub>A</sub>, V<sub>B </sub>and V<sub>C</sub>, respectively, where the output inductors are L<sub>1</sub>, L<sub>2 </sub>and L<sub>3 </sub>and the output capacitor is C<sub>1</sub>.</p><p id="p-0090" num="0122">When Q<sub>1 </sub>conducts, the voltage V<sub>A </sub>is generated for part of the time period T<sub>1 </sub>and then falls down to zero when Q<sub>2 </sub>conducts. When Q<sub>3 </sub>conducts, the voltage V<sub>B </sub>is generated for part of the time period T<sub>2 </sub>and then falls down to zero when Q<sub>4 </sub>conducts. When Q<sub>5 </sub>conducts, the voltage V<sub>C </sub>is generated for part of the time period T<sub>3 </sub>and then falls down to zero when Q<sub>6 </sub>conducts. The total period time for this system is T=T<sub>1</sub>+T<sub>2</sub>+T<sub>3</sub>. This mode of operation (shown in <figref idref="DRAWINGS">FIG. <b>20</b></figref>) allows distributing the power between three stages that operate in parallel and as a result, obtaining better power dissipation and less heating of the transistors. Since the generated voltage pulses V<sub>A</sub>, V<sub>B </sub>and V<sub>C </sub>are shifted in time, the resulting currents I<sub>L1</sub>, I<sub>12 </sub>and I<sub>L3 </sub>in coils L<sub>1</sub>, L<sub>2 </sub>and L<sub>3 </sub>are also shifted in time. This provides an additional advantage since currents I<sub>L1</sub>, I<sub>12 </sub>and I<sub>L3 </sub>are added to each other on capacitor C<sub>1 </sub>and the resulting average current I<sub>av </sub>and the voltage across capacitor C<sub>1 </sub>has a lower ripple (depending on the duty cycle), resulting from cancelation, as shown in <figref idref="DRAWINGS">FIG. <b>21</b></figref>. This cancelation effect also allows using smaller inductors I<sub>L1</sub>, I<sub>12 </sub>and I<sub>L3</sub>.</p><p id="p-0091" num="0123">It should be noted that the embodiment of <figref idref="DRAWINGS">FIG. <b>21</b></figref> (that is directed to a motor with three poles) may be extended to any number of N poles by including N Buck-boost converters and N corresponding output inductors L<sub>1</sub>, L<sub>2</sub>, . . . , L<sub>N </sub>(all connected to the output capacitor is C<sub>1</sub>), while obtaining the above advantages.</p><p id="p-0092" num="0124">In an alternative embodiment of the invention, illustrated in a generic form in <figref idref="DRAWINGS">FIG. <b>22</b></figref>, the up-down converter <b>120</b> is formed by a multilevel converter consisting of two half bridges in a totem pole configuration. Q<b>11</b>, Q<b>12</b> and L<b>1</b> form one Buck/Boost converter, while Q<b>21</b>, Q<b>22</b> and L<sub>2 </sub>form a second Buck/Boost converter. The outputs of the two Buck/Boost converters are serially connected to form one output that feeds the inverter. The two converters can be operated in a step-down mode for feeding the motor and in a step-up (Boost) mode in the reverse direction (regeneration). The advantage of the embodiment of <figref idref="DRAWINGS">FIG. <b>22</b></figref> is that the maximum voltage drop of each transistor is V<sub>B</sub>/2 which enables the use of lower voltage, but faster transistors, thereby lowering switching losses. Furthermore, by operating the two converters interleaved, ripple current cancelation can be achieved.</p><p id="p-0093" num="0125">Although illustrated by one half bridge per converter, as will be clear to a person skilled in the art, the circuit of <figref idref="DRAWINGS">FIG. <b>22</b></figref> can be realized by several half bridges in parallel for higher current capability and current ripple reduction.</p><p id="p-0094" num="0126">The above examples and description have of course been provided only for the purpose of illustrations, and are not intended to limit the invention in any way. As will be appreciated by the skilled person, the invention can be carried out in a great variety of ways, employing more than one technique from those described above, all without exceeding the scope of the invention.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-math idrefs="MATH-US-00001" nb-file="US20230006591A1-20230105-M00001.NB"><img id="EMI-M00001" he="5.67mm" wi="76.20mm" file="US20230006591A1-20230105-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00002" nb-file="US20230006591A1-20230105-M00002.NB"><img id="EMI-M00002" he="6.01mm" wi="76.20mm" file="US20230006591A1-20230105-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00003 MATH-US-00003-2" nb-file="US20230006591A1-20230105-M00003.NB"><img id="EMI-M00003" he="16.59mm" wi="76.20mm" file="US20230006591A1-20230105-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00004" nb-file="US20230006591A1-20230105-M00004.NB"><img id="EMI-M00004" he="5.25mm" wi="76.20mm" file="US20230006591A1-20230105-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00005" nb-file="US20230006591A1-20230105-M00005.NB"><img id="EMI-M00005" he="6.01mm" wi="76.20mm" file="US20230006591A1-20230105-M00005.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method for efficiently providing drive power to a BLDC motor, comprising:<claim-text>a) providing a BLDC motor having separate coils;</claim-text><claim-text>b) providing a controller for controlling the level and phase of input voltages supplied to said separate coils;</claim-text><claim-text>c) providing a controlled inverter with outputs, for applying phase separated input voltages to each of said separate coils at desired timing for each input voltage, determined by said controller;</claim-text><claim-text>d) providing a power source for feeding power to said controlled inverter;</claim-text><claim-text>said controller is adapted to:</claim-text><claim-text>e) sample the instantaneous angle &#x3c6; of the rotor of said BLDC motor;</claim-text><claim-text>f) measure the input power P to all phases; and</claim-text><claim-text>g) for each input voltage, calculate the phase difference &#x394;&#x3c6; value and the inverter's modulation level that correspond to said input power P and feed said phase difference value to said controlled inverter.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the phase difference &#x394;&#x3c6; value is calculated for obtaining one or more of the following:<claim-text>desired angular velocity &#x3c9;</claim-text><claim-text>desired torque;</claim-text><claim-text>desired phase current.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising providing an up/down DC-DC converter for converting the feeding power to said input voltages according to a command signal provided by the controller.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the power source is one of the following:<claim-text>a battery;</claim-text><claim-text>an AC power grid followed by a bridge rectifier.</claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the inverter's modulation type is Pulse Width Modulation (PWM) or Space Vector Modulation (SVM).</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the DC-DC converter is selected from the group of:<claim-text>bidirectional converter;</claim-text><claim-text>bidirectional Buck/boost converter;</claim-text><claim-text>bidirectional multiphase converter.</claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, comprising:<claim-text>a) providing a BLDC motor having separate coils;</claim-text><claim-text>b) providing a controller for controlling the level and phase of input voltages supplied to said separate coils;</claim-text><claim-text>c) providing a controlled inverter with outputs, for applying phase separated input voltages to each of said separate coils at desired timing for each input voltage, determined by said controller;</claim-text><claim-text>d) providing a power source for feeding power to said controlled inverter;</claim-text><claim-text>e) providing an up/down DC-DC converter for converting said feeding power to said input voltages according to a command signal provided by said controller, said controller is adapted to:</claim-text><claim-text>f) sample the instantaneous angle &#x3c6; of the rotor of said BLDC motor;</claim-text><claim-text>g) sample the input voltage Vin and the current I of each phase to obtain the input power P; and</claim-text><claim-text>h) for each Vin, calculate the phase difference &#x394;&#x3c6; is value that corresponds said input power P and feed said phase difference value to said up/down DC-DC converter, thereby causing said up/down DC-DC converter to apply each Vin to its corresponding coil at a specific timing for obtaining an optimal match between said each Vin and the current that is being built up in said corresponding coil.</claim-text></claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The method according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the up/down DC-DC converter is bidirectional, for allowing excess power generated in the motor to flow back to the power source, for during regeneration operating mode, where the voltage E across the motor's coils is greater than the input voltage Vin.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. A drive system for a BLDC motor having poles implemented by separate coils that are activated in corresponding phases, comprising:<claim-text>a) a controller for controlling the level and phase of input voltages supplied to said separate coils;</claim-text><claim-text>b) a controlled inverter with outputs, for applying phase separated input voltages to each of said separate coils at desired timing for each input voltage, determined by said controller;</claim-text><claim-text>c) a power source for feeding power to said controlled inverter;</claim-text><claim-text>d) an up/down DC-DC converter for converting said feeding power to said input voltages according to a command signal provided by said controller, said controller is adapted to:</claim-text><claim-text>e) sample the instantaneous angle &#x3c6; of the rotor of said BLDC motor;</claim-text><claim-text>f) sample the input voltage Vin and the current I of each phase to obtain the input power P; and</claim-text><claim-text>g) for each Vin, calculate the phase difference &#x394;&#x3c6; value that corresponds said input power P and feed said phase difference value to said up/down DC-DC converter, thereby causing said up/down DC-DC converter to apply each Vin to its corresponding coil at a specific timing for obtaining an optimal match between said each Vin and the current that is being built up in said corresponding coil.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The drive system according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, comprising:<claim-text>a) a bidirectional bridge connected to a power source having a constant voltage V<sub>B </sub>and being adapted to operate as a rectifier to one direction or as an inverter to the opposite direction;</claim-text><claim-text>b) a bidirectional Buck-boost converter connected to said bidirectional bridge;</claim-text><claim-text>c) a plurality of bridges, each of which distributing an input voltage Vin to a corresponding coil of said motor;</claim-text></claim-text><claim-text>wherein, the controller is adapted to:<claim-text>d) calculate phase difference &#x394;&#x3c6; that corresponds to each value of power P and generate appropriate signals to the gates of said plurality of bridges;</claim-text><claim-text>e) push more power into said bidirectional bridge upon detecting that voltage V<sub>B </sub>decreases, and to return power into said power source upon detecting that voltage V<sub>B </sub>increases.</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The drive system according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, in which up/down conversion is performed in a relatively high frequency, while operating plurality of bridges with relatively low frequency.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The drive system according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, adapted to operate with a constant current or a constant power which are delivered to the motor.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The drive system according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, in which during a regeneration operating mode when the voltage E across the motor's coils is greater than the input voltage Vin, the regeneration current is directed to flow via diodes.</claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The drive system according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, in which during a regeneration operating mode when the voltage E across the motor's coils is greater than the input voltage Vin, the regeneration current is directed to flow via transistors, parallelly connected to said diodes to reduce power losses.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The drive system according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, comprising:<claim-text>a) a first comparator for measuring the current and compared said current to a desired reference current I<sub>ref </sub>and for outputting the difference between I</claim-text><claim-text>b) a second comparator which receives the output of said first comparator and samples the voltage Vin; and</claim-text><claim-text>c) a second phase compensator for changing the voltage Vin in a direction that causes the current I to be equal to the reference current I<sub>ref</sub>.</claim-text></claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The drive system according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, in which whenever the control is a power-based control, said system comprises:<claim-text>a) a comparator for comparing the product of the current I and the voltage Vin to a desired reference power P<sub>ref</sub>.</claim-text><claim-text>b) a first phase compensator that receives the difference between P and P<sub>ref</sub>;</claim-text><claim-text>c) a second comparator which receives said difference and samples the voltage Vin;</claim-text><claim-text>d) a second phase compensator for changing the voltage Vin in a direction that causes the power P to be equal to the reference power P<sub>ref</sub>.</claim-text></claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The drive system according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, in which several Buck-boost converters generate voltages V<sub>A</sub>, V<sub>B </sub>and V<sub>C</sub>, for time periods with desired duty cycles, for distributing the power between three stages that operate in parallel, to obtain ripple cancelation effect.</claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. The drive system according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, in which the magnitude of the required phase-advance is obtained by measuring the DC input power to the inverter, based on a pre-stored lookup table.</claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. The drive system according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, in which the motor is fed by a current source, which provides the desired current to the phases.</claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. The drive system according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, in which whenever the power source is a battery, the control circuit comprises a bidirectional converter that is operated as a Buck converter in the forward direction and as a Boost converter in the reverse direction, for operation with a constant current or a constant voltage which are delivered to the motor.</claim-text></claim><claim id="CLM-00021" num="00021"><claim-text><b>21</b>. The drive system according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, in which in the forward direction, the controller adjusts the voltage or current fed to the motor per the required speed and in regeneration mode, said controller adjusts the braking torque by adjusting the reverse current.</claim-text></claim></claims></us-patent-application>