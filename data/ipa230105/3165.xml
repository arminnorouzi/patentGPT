<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230003166A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230003166</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17851132</doc-number><date>20220628</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>NL</country><doc-number>2028589</doc-number><date>20210630</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>F</section><class>02</class><subclass>B</subclass><main-group>37</main-group><subgroup>22</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>F</section><class>02</class><subclass>D</subclass><main-group>41</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>F</section><class>02</class><subclass>B</subclass><main-group>37</main-group><subgroup>22</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>F</section><class>02</class><subclass>D</subclass><main-group>41</main-group><subgroup>0047</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>F</section><class>02</class><subclass>D</subclass><main-group>2200</main-group><subgroup>101</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>F</section><class>02</class><subclass>D</subclass><main-group>2200</main-group><subgroup>024</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>F</section><class>02</class><subclass>D</subclass><main-group>2200</main-group><subgroup>703</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">METHOD FOR CONTROLLING A COMPRESSION RELEASE BRAKE MECHANISM IN A COMBUSTION ENGINE</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>DAF Trucks N.V.</orgname><address><city>Eindhoven</city><country>NL</country></address></addressbook><residence><country>NL</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>HERMANS</last-name><first-name>Niek Laurentius Adrianus</first-name><address><city>Best</city><country>NL</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">The invention concerns a method for controlling a compression release brake mechanism in an combustion engine comprising an air inlet system and an exhaust manifold connected to a turbocharger provided with a variable turbine geometry (VTG) turbine, said exhaust manifold further comprising an exhaust gas recirculation (EGR) channel for recirculation of exhaust gas towards the air inlet system, wherein said turbine is further connected to a back pressure valve (BPV) provided in an exhaust channel, the method comprising<ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0000">    <ul id="ul0002" list-style="none">        <li id="ul0002-0001" num="0000">determining a desired exhaust manifold gas pressure level on the basis of a measured engine speed and a desired braking torque;</li>        <li id="ul0002-0002" num="0000">continuously monitoring a set of control parameters, including at least two of cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio;</li>        <li id="ul0002-0003" num="0000">controlling said BPV and said VTG by said control parameters, to drive one of the control parameters to a set maximum level; and</li>        <li id="ul0002-0004" num="0000">controlling the EGR by said control parameters in a closed loop to allow exhaust gas to recirculate towards the air inlet system while driving a second of the set of control parameters to a set maximum level.</li>    </ul>    </li></ul></p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="79.93mm" wi="158.75mm" file="US20230003166A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="208.53mm" wi="123.53mm" orientation="landscape" file="US20230003166A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="115.57mm" wi="150.20mm" orientation="landscape" file="US20230003166A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="203.12mm" wi="105.07mm" orientation="landscape" file="US20230003166A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="219.37mm" wi="134.11mm" orientation="landscape" file="US20230003166A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="127.34mm" wi="128.19mm" orientation="landscape" file="US20230003166A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="130.39mm" wi="129.71mm" orientation="landscape" file="US20230003166A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="141.14mm" wi="130.89mm" orientation="landscape" file="US20230003166A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">FIELD OF THE INVENTION</heading><p id="p-0002" num="0001">The invention relates to a method for controlling a compression release brake mechanism in a combustion engine, and, in particular, to a method and system for controlling a compression release brake mechanism in an internal combustion engine comprising a turbocharger with variable turbine geometry, a compression release brake controller for use in such system and a computer program product using such method.</p><heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading><p id="p-0003" num="0002">Engine braking is a concept known from e.g. EP1389270. During engine braking, exhaust valves may be selectively opened to convert, at least temporarily, a power producing internal combustion engine into a power absorbing air compressor. Thus an engine brake system controls a lift of the exhaust valves, e.g. by a hydraulic actuator. At the beginning of the compression stroke the exhaust valves are opened and high pressurized air from the exhaust manifold flows back into the cylinder which increases the initial pressure during compression; this process is called BGR (Back Gas Recirculation). Subsequently the exhaust valves close again to increase pressure during the second half of the compression stroke. Near the end of the compression stroke the exhaust valves are opened again dissipating the energy instead of returning it to the drivetrain as positive power during the power stroke; this process is called CR (Compression Release). This sequence of events can generate high amounts of retarding power.</p><p id="p-0004" num="0003">In US2015144097A1 a control system is disclosed wherein a variable turbine geometry (VTG) type turbocharger is used for engine brake purposes. The resistance of the turbine and energy delivered by the turbine to the compressor can be controlled by adjusting the flow area of the intake of the turbine. When using such VTG, adjustment of the flow area may be achieved by rotating the turbine vanes in a certain position or transferring a sliding wall within the turbine to a certain position. Adjustment of the VTG has a direct effect on the pressure in the inlet and exhaust manifolds. The braking torque of a compression brake in an IC engine depends on the gas pressure in the inlet and exhaust manifolds so that the control of the flow area of the VTG provides the possibility to control the braking torque. In particular, varying the flow area of the VTG controls the braking torque.</p><p id="p-0005" num="0004">A closed loop control adjusts the vane or sliding wall, position of the turbine such that for a particular set of engine parameters, maximum braking torque can be achieved.</p><p id="p-0006" num="0005">For known engine brake control systems however it is difficult to maintain maximum braking torque at high motor speeds and/or at high altitudes, reason why engine braking is engineered in control loops that cannot fully utilize the braking capacity.</p><p id="p-0007" num="0006">Hence, there is a need in the art for improved method and systems for controlling engine braking of an engine comprising a variable turbine geometry turbocharger in order to provide improved braking capability while observing engine hardware limitations.</p><p id="p-0008" num="0007">It is an object of the present invention to further advance the field of engine braking to address these and other challenges.</p><heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading><p id="p-0009" num="0008">The invention concerns a method for controlling a compression release brake mechanism in a combustion engine comprising an air inlet system and an exhaust manifold connected to a turbocharger provided with a variable turbine geometry (VTG) turbine, said exhaust manifold further comprising an exhaust gas recirculation (EGR) channel for recirculation of exhaust gas towards the air inlet system, wherein said turbine is further connected to a back pressure valve (BPV) provided in an exhaust channel, the method comprising<ul id="ul0003" list-style="none">    <li id="ul0003-0001" num="0000">    <ul id="ul0004" list-style="none">        <li id="ul0004-0001" num="0009">determining a desired exhaust manifold gas pressure level on the basis of a measured engine speed and a desired braking torque;</li>        <li id="ul0004-0002" num="0010">continuously monitoring a set of control parameters, including at least two of cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio;</li>        <li id="ul0004-0003" num="0011">controlling said BPV and said VTG by said control parameters, to drive one of the control parameters to a set maximum level; and</li>        <li id="ul0004-0004" num="0012">controlling the EGR by said control parameters in a closed loop to allow exhaust gas to recirculate towards the air inlet system while driving a second of the set of control parameters to a set maximum level.</li>    </ul>    </li></ul></p><p id="p-0010" num="0013">The invention has an advantage that the exhaust manifold gas pressure can be controlled by the EGR valve in an additional air path towards the air inlet via the EGR. The engine brake performance can thus be optimized to at least two hardware limitations of a set of control parameters, including cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio, to optimize braking capability while keeping said limitatations within predetermined maximum hardware constraints. The control parameters may be suitably derived from other control parameters and a model. This results in increased engine brake performance, and/or a lower load on the VTG turbine. Furthermore, by increasing the amount of inlet pressure via this additional air path, altitude performance can be increase.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTIONS OF THE DRAWINGS</heading><p id="p-0011" num="0014">The invention will be further elucidated in the figures:</p><p id="p-0012" num="0015"><figref idref="DRAWINGS">FIG. <b>1</b></figref> provides a combustion engine and basic control scheme of EGR, VTG and BTV;</p><p id="p-0013" num="0016"><figref idref="DRAWINGS">FIG. <b>2</b></figref> provides a control scheme according to an embodiment of the invention;</p><p id="p-0014" num="0017"><figref idref="DRAWINGS">FIG. <b>3</b></figref> (A-D) shows a number of typical control parameter values as a function of engine speed;</p><p id="p-0015" num="0018"><figref idref="DRAWINGS">FIG. <b>4</b></figref> (A-H) shows non-limiting exemplary qualitative behavior of a compression release brake mechanism that is controlled in a range <b>0</b>-20% of the EGR valve opening</p><p id="p-0016" num="0019"><figref idref="DRAWINGS">FIG. <b>5</b></figref> shows a further exemplary embodiment wherein an EGR valve is controlled in closed loop to provide a desired braking torque;</p><p id="p-0017" num="0020"><figref idref="DRAWINGS">FIG. <b>6</b></figref> shows another exemplary embodiment wherein an EGR valve is controlled in closed loop to provide a desired braking torque;</p><p id="p-0018" num="0021"><figref idref="DRAWINGS">FIG. <b>7</b></figref> shows still another exemplary embodiment wherein an EGR valve is controlled in closed loop to provide a desired braking torque;</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">DETAILED DESCRIPTION</heading><p id="p-0019" num="0022">Aspects of the invention pertain to a method for controlling a compression release brake mechanism in a combustion engine comprising an air inlet system and an exhaust manifold connected to a turbocharger provided with a variable turbine geometry (VTG) turbine, said exhaust manifold further comprising an exhaust gas recirculation (EGR) channel for recirculation of exhaust gas towards the air inlet system, wherein said turbine is further connected to a back pressure valve (BPV) provided in an exhaust channel. The method comprises<ul id="ul0005" list-style="none">    <li id="ul0005-0001" num="0000">    <ul id="ul0006" list-style="none">        <li id="ul0006-0001" num="0023">determining a desired exhaust manifold gas pressure level on the basis of a measured engine speed and a desired braking torque;</li>        <li id="ul0006-0002" num="0024">continuously monitoring a set of control parameters, including at least two of: cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio;</li>        <li id="ul0006-0003" num="0025">controlling said BPV and said VTG by said control parameters, to drive a first of the set of control parameters to a set maximum level; and</li>        <li id="ul0006-0004" num="0026">controlling the EGR valve by said control parameters in a closed loop to allow exhaust gas to recirculate towards the air inlet system while driving a second of the set of control parameters to a set maximum level.</li>    </ul>    </li></ul></p><p id="p-0020" num="0027">The EGR valve may be controlled, at least partly in time, continuously to drive the second of the set of control parameters to a set maximum level, until for a third of the set of control parameters a maximum set value is reached.</p><p id="p-0021" num="0028">An EGR valve position may be controlled in open loop when a turbocharger speed falls below a preset level.</p><p id="p-0022" num="0029">The turbine speed may controlled in a closed loop fashion as the first of the control parameters, wherein the exhaust back pressure is provided as the second of the control parameters.</p><p id="p-0023" num="0030">The desired exhaust manifold gas pressure may be determined on the basis of an exhaust manifold gas pressure function p exh=f(n,P s); preferably said predetermined exhaust manifold gas pressure function being implemented as a look-up table in a memory comprising exhaust manifold gas pressure values stored as a function of at least the engine speed and braking torque.</p><p id="p-0024" num="0031">The desired exhaust manifold gas pressure may be a function dependent on ambient air pressure p exh=f(n,p a ,P s) or air inlet manifold pressure p exh=f(n,p i,P s).</p><p id="p-0025" num="0032">The back pressure valve may be controlled using a predetermined back pressure valve function for determining position information of said back pressure valve as a function of at least said engine speed and said desired braking torque Y BPV=f(n,P s); preferably said predetermined back pressure valve function being implemented as a look-up table in a memory comprising back pressure valve position values stored as a function of at least engine speed and braking torque.</p><p id="p-0026" num="0033">The back pressure function may be further dependent on ambient air pressure Y BPV=f(n,p a ,P s) or the air inlet manifold pressure Y BPV=f(n,p i ,P s).</p><p id="p-0027" num="0034">Controlling said variable turbine geometry may comprises: receiving a desired exhaust manifold gas pressure;</p><p id="p-0028" num="0035">determining a desired variable turbine geometry using said desired exhaust manifold gas pressure and said measured exhaust manifold gas pressure;</p><p id="p-0029" num="0036">sending a control signal associated with said desired variable turbine geometry to one or more actuators for configuring said turbine into said desired variable turbine geometry.</p><p id="p-0030" num="0037">Controlling said back pressure valve may comprise:</p><p id="p-0031" num="0038">determining a back pressure valve position;</p><p id="p-0032" num="0039">sending a control signal associated with said back pressure valve position to at least one actuator for configuring said back pressure value into said back pressure valve position.</p><p id="p-0033" num="0040">Controlling said variable turbine geometry may comprise actuating one or more rotatable vanes of a variable geometry turbine; and/or, a sliding wall within the turbine.</p><p id="p-0034" num="0041">A request for a desired braking torque may be received by an engine control unit.</p><p id="p-0035" num="0042">Further aspects pertain to a compression release brake controller in an engine, comprising an exhaust manifold connected to a turbine provided with a variable turbine geometry wherein said turbine is further connected to a back pressure valve for controlling the pressure drop over said turbine. The compression release brake controller may be configured for<ul id="ul0007" list-style="none">    <li id="ul0007-0001" num="0000">    <ul id="ul0008" list-style="none">        <li id="ul0008-0001" num="0043">determining a desired exhaust manifold gas pressure level on the basis of a measured engine speed and a desired braking torque;</li>        <li id="ul0008-0002" num="0044">continuously monitoring a set of control parameters, including at least two of cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio;</li>        <li id="ul0008-0003" num="0045">controlling said BPV and said VTG by said control parameters, to drive one of the control parameters to a set maximum level; and</li>        <li id="ul0008-0004" num="0046">controlling the EGR by said control parameters in a closed loop to allow exhaust gas to recirculate towards the air inlet system while driving a second of the set of control parameters to a set maximum level.</li>    </ul>    </li></ul></p><p id="p-0036" num="0047">Further aspects pertain to a combustion engine comprising an air inlet system and an exhaust manifold connected to a turbocharger provided with a variable turbine geometry (VTG) turbine, said exhaust manifold further comprising an exhaust gas recirculation (EGR) channel for recirculation of exhaust gas towards the air inlet system, wherein said turbine is further connected to a back pressure valve (BPV) provided in an exhaust channel; said engine further comprising</p><p id="p-0037" num="0048">means for monitoring control parameters, including at least two of cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio; and a compression release brake controller as disclosed herewith.</p><p id="p-0038" num="0049">Further aspects pertain to a computer program product, implemented on computer-readable non-transitory storage medium, the computer program product configured for, when run on a computer, executing the method steps as disclosed herewith.</p><p id="p-0039" num="0050">Another aspect of the invention pertains to a truck, provided with a combustion engine controlled according to any of the described embodiments.</p><p id="p-0040" num="0051">The invention is described more fully hereinafter with reference to the accompanying drawings, in which embodiments of the invention are shown. In the drawings, the absolute and relative sizes of systems, components, layers, and regions may be exaggerated for clarity. Embodiments may be described with reference to schematic and/or cross-section illustrations of possibly idealized embodiments and intermediate structures of the invention. In the description and drawings, like numbers refer to like elements throughout. Relative terms as well as derivatives thereof should be construed to refer to the orientation as then described or as shown in the drawing under discussion. These relative terms are for convenience of description and do not require that the system be constructed or operated in a particular orientation unless stated otherwise.</p><p id="p-0041" num="0052">Turning to <figref idref="DRAWINGS">FIG. <b>1</b></figref>, there is shown a combustion engine <b>100</b> of a conventional design. The combustion engine has following features: an air inlet system <b>106</b> and an exhaust manifold <b>108</b> is provided for the cylinder section <b>104</b>. A turbocharger <b>112</b>, including a variable turbine geometry (VTG) turbine <b>115</b> is provided, that powers compressor <b>113</b>, e.g. via a shaft <b>114</b>. The exhaust manifold <b>108</b> further comprising an exhaust gas recirculation (EGR) channel <b>109</b> for recirculation of exhaust gas towards the air inlet system <b>106</b>, wherein said turbine <b>115</b> is further connected to a back pressure valve <b>120</b> (BPV) provided in an exhaust channel . Turbo cooler <b>110</b>, inlet pressure sensor <b>125</b>, outlet pressure sensor <b>124</b>, VTG actuator <b>116</b> and BPV actuator <b>122</b> and engine speed sensor <b>126</b> are illustrated. It is noted that the engine brake release mechanism is not explained in detail since it is deemed known to the skilled person and can be extracted from e.g. EP1389270 and US2015144097A1, incorporated by reference.</p><p id="p-0042" num="0053">A typical control by ECU <b>118</b> can be as follows: a desired exhaust manifold gas pressure level is determined on the basis of a measured engine speed and a desired braking torque demand <b>130</b>. Such desired values are in practice set or actively controlled in accordance with a maximum acceptable cylinder pressure, or any other limiting hardware constraint. In order to control the exhaust manifold gas pressure level, a number of control parameters is continuously monitored, including at least two of cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio. It is noted that these control parameters may not be measured directly, but may also be monitored indirectly, e.g. by calibrating a suitable model and using said model to determine said control parameters in a per se known manner, e.g. via a lookup table. For example, the turbine expansion ratio may be measured by an ambient pressure sensor <b>128</b> and an outlet pressure sensor, or may be derived from a turbine model.</p><p id="p-0043" num="0054">Furthermore, in the embodiment, the BPV <b>120</b> and VTG <b>115</b> are controlled by said control parameters, to provide said desired exhaust gas pressure level based on a comparison of at least a measured and desired exhaust manifold gas pressure level, wherein the BPV valve <b>120</b> is controlled to a maximum expansion ratio of the VTG <b>115</b>. It is noted that in this specific control scheme the continuously variable control is performed via the VTG <b>115</b> in a closed loop, while BPV <b>120</b> and EGR <b>109</b> are controlled in open loop, wherein it is preferable that the VTG <b>115</b> operates at high speed, to optimize the in-cylinder trapped mass by increased function of compressor <b>113</b>. During engine braking with a compression release brake mechanism, without further precautions, there is a risk that the turbo speed increases above the turbo speed limit. As a consequence the pre turbine pressure cannot be increased further which limits the braking torque. To avoid this torque limitation the BPV <b>120</b> can be closed to a certain extent to reduce the pressure drop (expansion ratio) over the turbine reducing the turbo speed. This provides the opportunity to close the VTG <b>115</b> further which increases pre turbine pressure (P<b>3</b>) .</p><p id="p-0044" num="0055">In a prior art control mode, to reduce the possible braking torque of the compression release brake mechanism with an already fully opened</p><p id="p-0045" num="0056">VTG <b>115</b>, the EGR channel <b>109</b> can be opened to as a protection measure in case the pre turbine pressure becomes too high. While in such control mode the EGR valve actuator <b>119</b> opens EGR channel <b>109</b>, it merely opens as a safety precaution in case certain threshold conditions are met and the VTG <b>115</b> meets a hardware limitation, notably, an excess turbine speed.</p><p id="p-0046" num="0057">In a prior art control method, as at least two of these control parameters for controlling the braking torque, including cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio, are controlled by a single back pressure valve actuator, where the most dominant variable will &#x2018;overrule&#x2019; the others. This results in a situation where only one of the variables can reach a maximum allowed condition.</p><p id="p-0047" num="0058">Now turning to <figref idref="DRAWINGS">FIG. <b>2</b></figref>, a modified control scheme is presented according to an aspect of the invention. In this scheme an EGR control is provided wherein an EGR valve is at least partly in time continuously controlled in a closed loop to allow exhaust gas to recirculate towards the air inlet system while targeting a predetermined cylinder pressure, that may be controlled to reach a maximum set level, in accordance with an engine hardware specification. In this embodiment a first control parameter may therefore be the setting of the pre-turbine pressure, which calls for a continuous control of the VTG. A second control parameter may be the cylinder pressure, which calls for continuous control of the EGR valve. In this control scheme, the BPV may be open-loop or closed loop controlled.</p><p id="p-0048" num="0059">Thus, the EGR control may be arranged to be controlled continuously to a maximum allowed cylinder pressure. In the control scheme, it is checked whether the turbocharger speed may remain at a set maximum allowed speed, which is preferential to maximize a mass stream of intake air into the cylinder. However, with increasing EGR valve opening, the amount of flow through the VTG will reduce eventually, after which the EGR valve may be kept in the current open position and is not further opened. It is noted, that the cylinder pressure may be measured directly, but can also be derived from a model, based on the exhaust and/or intake manifold gas pressure level and/or corresponding temperatures, turbocharge pressure, delta pressure over the intake air filter, egr outlet temperature, delta pressure over the egr, compressor load/speed or combinations thereof. Thus, the control parameters for controlling the braking torque, notably, the cylinder pressure may be suitably derived from other control parameters and a model, which can be varied by many variations known to the skilled person.</p><p id="p-0049" num="0060">Additional to the closed loop control to obtain a maximum allowed cylinder pressure, a threshold control may be implemented that takes over the EGR control in case a maximum allowed turbocharger speed is reached. In that case, the EGR valve is no longer closed but may remain in an open position, e.g. a last stored position, or a position that is derived from a calibration table. Thus, while the EGR is controlled in a closed-loop control, when a threshold is reached for one of the set of control parameters, including at least one of cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio, the closed-loop control may switch to open loop control.</p><p id="p-0050" num="0061">Notably, while the shown embodiment of <figref idref="DRAWINGS">FIG. <b>2</b></figref> provides improved engine brake capability by maximizing the cylinder pressure, improved engine brake capability may also be provided by another suitable choice of a control parameter, e.g. to optimize to a maximum turbocharger speed, and limit the speed in case a maximum cylinder pressure is reached. It is shown that the engine brake capability is thus optimized to at least two hardware limitations of a set of control parameters, including cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio, to optimize braking capability while keeping said limitations within predetermined maximum hardware constraints.</p><p id="p-0051" num="0062">In more detail, <figref idref="DRAWINGS">FIG. <b>3</b></figref> shows a typical behavior of hardware limitations during engine braking. The engine brake performance according to the invention can be optimized to at least two hardware limitations of a set of control parameters, including cylinder pressure (<b>3</b>A), turbine expansion ratio (<b>3</b>B), exhaust manifold pressure (<b>3</b>C), and turbine speed (<b>3</b>D), to optimize braking capability while keeping said limitations within predetermined maximum hardware constraints. The cylinder pressure may be measured directly or derived from inlet pressure and outlet pressure sensors and/or a corresponding model that predicts these values. The exhaust manifold pressure may be a suitable control parameter to provide a set maximum cylinder pressure, while turbine expansion ratio and turbine speed are kept within hardware limits. However, in an alternative control scheme, another one of the control parameters may be a suitable control parameter for providing a set parameter value of another control parameter. The turbine expansion ratio may be derived from ambient pressure sensor and an exhaust manifold sensor. The turbine inlet pressure may be measured by an exhaust manifold sensor. The turbospeed may be measured directly, or derived from a turbine map that correlates speed and pressure over the turbine. The control parameters may thus be suitably derived from other control parameters and a model as explained hereabove.</p><p id="p-0052" num="0063"><figref idref="DRAWINGS">FIG. <b>4</b></figref> shows non-limiting exemplary qualitative behavior of a compression release brake mechanism that is controlled, in part by a continuously variable EGR valve in particular, in a range 0-20% of the EGR valve opening.</p><p id="p-0053" num="0064">Pre-turbine pressure (<figref idref="DRAWINGS">FIG. <b>4</b><i>a</i></figref>): Pre-turbine pressure (P<b>3</b>) may be controlled via variable VGT position control. When opening the EGR valve mass flow through the VGT will reduce, VGT may be controlled to a more closed position to compensate for the flow reduction and maintain target P<b>3</b>.</p><p id="p-0054" num="0065">Turbocharger speed (<figref idref="DRAWINGS">FIG. <b>4</b>B</figref>): Turbocharger speed may be limited to a design limit by closing the BPV and reduce ER. When the EGR valve opens the mass flow through the turbine will effectively reduce. However, with increasing flow directed though the EGR channel the turbine speed may drop below the maximum. In the area of <b>0</b>-20% EGR valve opening the BPV may slightly open to keep the turbospeed maximum.</p><p id="p-0055" num="0066">Cylinder Pressure (<figref idref="DRAWINGS">FIG. <b>4</b>C</figref>): Due to the turbocharger speed limit the cylinder pressure is below limit. When the EGR valve opens the total mass flow (fresh +EGR) towards the cylinder increases (see plot total mass trapped) and increases the cylinder pressure towards the limit. When the cylinder pressure limit is reached the BPV is closing rapidly to reduce pressure which impact braking torque.</p><p id="p-0056" num="0067">Turbine Expansion ratio (<figref idref="DRAWINGS">FIG. <b>4</b>D</figref>): The turbine expansion ratio (ER) may be impacted but will normally not reach a limit value at engine speeds in an area where the EGR valve may be dominant.</p><p id="p-0057" num="0068">It is shown, that by suitable control of the EGR valve opening position in a range between 0 and 35%, more particular, 0-20, the turbo charger speed can be kept to a maximum set pressure level, while the cylinder pressure is also at a maximum level.</p><p id="p-0058" num="0069">Engine Brake Power (<figref idref="DRAWINGS">FIG. <b>4</b>E</figref>): (shown as negative torque) Brake power increases (becomes more negative) when the total trapped mass increases. When the EGR valve is opened further (in this case &#x3e;20%) the trapped mass stays equal but the intake manifold conditions become less efficient and brake power drops again.</p><p id="p-0059" num="0070">Compressor flow (<figref idref="DRAWINGS">FIG. <b>4</b>F</figref>): Compressor flow is a result of the turbocharge speed (and PR of compressor). When the turbospeed drops due to increased opening of the EGR valve a &#x2018;fresh&#x2019; intake air flow of the compressor will reduce and be replaced by less efficient &#x2018;hot&#x2019; EGR flow (see <figref idref="DRAWINGS">FIG. <b>4</b>G</figref>). Normally the turbospeed may be controlled via the BPV, but from 20% EGR valve onwards the cylinder pressure can be controlled via the BPV and therefore the compressor flow reduces.</p><p id="p-0060" num="0071">EGR mass flow (<figref idref="DRAWINGS">FIG. <b>4</b>G</figref>): With increased EGR valve opening the mass flow will increase.</p><p id="p-0061" num="0072">Total mass trapped at IVC (<figref idref="DRAWINGS">FIG. <b>4</b>H</figref>) This is the mass flow that effectively reaches the cylinders and will result in brake power. This is the &#x2018;sum&#x2019; of the &#x2018;fresh&#x2019; compressor mass flow and the &#x2018;hot&#x2019; EGR mass flow.</p><p id="p-0062" num="0073">In <figref idref="DRAWINGS">FIG. <b>5</b></figref> a further exemplary embodiment is shown, where the EGR is controlled in a closed loop to allow exhaust gas to recirculate towards the air inlet system while driving a control parameter to a set maximum level. In this example also, closed loop control may be terminated when a turbocharger speed drops below a set speed value, which is preferably kept as high as possible, in particular close to a maximum allowed turbocharger speed. In such case a current EGR valve position may be maintained or at least will not be further opened. In the closed loop control of the EGR a target may be to control on target boost pressure level, and open the valve to increase the boost pressure. The boost pressure level may be temperature dependent, and may correlate via a calibration map, wherein a predetermined calibration map is provided that provides optimal settings for temperature and pressure values.</p><p id="p-0063" num="0074">In <figref idref="DRAWINGS">FIG. <b>6</b></figref> a still further exemplary embodiment is shown, where the EGR is controlled in a closed loop to allow exhaust gas to recirculate towards the air inlet system. In contrast to <figref idref="DRAWINGS">FIG. <b>5</b></figref>, as control variables can also be used a pressure ratio PR over the compressor, together with the compressor speed and a delta pressure (e.g. measured in a venturi duct) over the EGR and corresponding EGR outlet temperature.</p><p id="p-0064" num="0075">In <figref idref="DRAWINGS">FIG. <b>7</b></figref> a still further exemplary embodiment is shown, where the EGR is controlled in a closed loop to allow exhaust gas to recirculate towards the air inlet system. Here a set exhaust pressure level and boost pressure level may be derived from a pressure difference over the air filter that is measured or monitored and determines an input flow of air. This can be further adjusted by an EGR delta pressure, together with an EGR cooler outlet temperature.</p><p id="p-0065" num="0076">One embodiment of the disclosure may be implemented as a program product for use with a computer system. The program(s) of the program product define functions of the embodiments (including the methods described herein) and can be contained on a variety of computer-readable storage media. The computer-readable storage media can be a non-transitory storage medium. Illustrative computer-readable storage media include, but are not limited to: (i) non-writable storage media (e.g., read-only memory devices within a computer such as CD-ROM disks readable by a CD-ROM drive, ROM chips or any type of solid-state non-volatile semiconductor memory) on which information is permanently stored; and (ii) writable storage media (e.g., floppy disks within a diskette drive or hard-disk drive or any type of solid-state random-access semiconductor memory, flash memory) on which alterable information is stored. It is thus believed that the operation and construction of the present invention will be apparent from the foregoing description and drawings appended thereto. For the purpose of clarity and a concise description features are described herein as part of the same or separate embodiments, however, it will be appreciated that the scope of the invention may include embodiments having combinations of all or some of the features described. The invention applies not only to automotive applications where the combustion motor is used for traction power, but also to other industrial applications where an electric motor is used. It will be clear to the skilled person that the invention is not limited to any embodiment herein described and that modifications are possible which may be considered within the scope of the appended claims. Also kinematic inversions are considered inherently disclosed and can be within the scope of the invention. In the claims, any reference signs shall not be construed as limiting the claim. The terms &#x2018;comprising&#x2019; and &#x2018;including&#x2019; when used in this description or the appended claims should not be construed in an exclusive or exhaustive sense but rather in an inclusive sense. Thus expression as &#x2018;including&#x2019; or &#x2018;comprising&#x2019; as used herein does not exclude the presence of other elements, additional structure or additional acts or steps in addition to those listed. Furthermore, the words &#x2018;a&#x2019; and &#x2018;an&#x2019; shall not be construed as limited to &#x2018;only one&#x2019;, but instead are used to mean &#x2018;at least one&#x2019;, and do not exclude a plurality. Features that are not specifically or explicitly described or claimed may additionally be included in the structure of the invention without departing from its scope. Expressions such as: &#x201c;means for . . . &#x201d; should be read as: &#x201c;component configured for . . . &#x201d; or &#x201c;member constructed to . . . &#x201d; and should be construed to include equivalents for the structures disclosed. The use of expressions like: &#x201c;critical&#x201d;, &#x201c;preferred&#x201d;, &#x201c;especially preferred&#x201d; etc. is not intended to limit the invention. To the extent that structure, material, or acts are considered to be essential they are inexpressively indicated as such. Additions, deletions, and modifications within the purview of the skilled person may generally be made without departing from the scope of the invention, as determined by the claims.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method for controlling a compression release brake mechanism in a combustion engine comprising an air inlet system and an exhaust manifold connected to a turbocharger provided with a variable turbine geometry (VTG) turbine, said exhaust manifold further comprising an exhaust gas recirculation (EGR) channel for recirculation of exhaust gas towards the air inlet system, wherein said turbine is further connected to a back pressure valve (BPV) provided in an exhaust channel, the method comprising<claim-text>determining a desired exhaust manifold gas pressure level on the basis of a measured engine speed and a desired braking torque;</claim-text><claim-text>continuously monitoring a set of control parameters, including at least two of: cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio;</claim-text><claim-text>controlling said BPV and said VTG by said control parameters, to drive a first of the set of control parameters to a set maximum level; and</claim-text><claim-text>controlling the EGR valve by said control parameters in a closed loop to allow exhaust gas to recirculate towards the air inlet system while driving a second of the set of control parameters to a set maximum level.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said EGR valve is controlled continuously to drive the second of the set of control parameters to a set maximum level, until for a third of the set of control parameters a maximum set value is reached.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein an EGR valve position is controlled in open loop when a turbocharger speed falls below a preset level.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said turbine speed is controlled in a closed loop fashion as the first of the control parameters, wherein the exhaust back pressure is provided as the second of the control parameters.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said desired exhaust manifold gas pressure is determined on the basis of an exhaust manifold gas pressure function p exh=f(n,P s);</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said desired exhaust manifold gas pressure is a function dependent on ambient air pressure p exh=f(n,p a ,P s) or air inlet manifold pressure p exh=f(n,p i ,P s).</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method according <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said back pressure valve is controlled using a predetermined back pressure valve function for determining position information of said back pressure valve as a function of at least said engine speed and said desired braking torque Y BPV=f(n,P s);</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The method according to <claim-ref idref="CLM-00007">claim 7</claim-ref> wherein said back pressure function is further dependent on ambient air pressure Y BPV=f(n,p a ,P s) or the air inlet manifold pressure Y BPV=f(n,p i ,P s).</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein controlling said variable turbine geometry comprises:<claim-text>receiving a desired exhaust manifold gas pressure;</claim-text><claim-text>determining a desired variable turbine geometry using said desired exhaust manifold gas pressure and said measured exhaust manifold gas pressure;</claim-text><claim-text>sending a control signal associated with said desired variable turbine geometry to one or more actuators for configuring said turbine into said desired variable turbine geometry.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The method according <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein controlling said back pressure valve comprises:<claim-text>determining a back pressure valve position;</claim-text><claim-text>sending a control signal associated with said back pressure valve position to at least one actuator for configuring said back pressure value into said back pressure valve position.</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein controlling said variable turbine geometry comprises actuating one or more rotatable vanes of a variable geometry turbine; and/or, a sliding wall within the turbine.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:<claim-text>receiving a request for a desired braking torque.</claim-text></claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. A compression release brake controller in an engine comprising an exhaust manifold connected to a turbine provided with a variable turbine geometry wherein said turbine is further connected to a back pressure valve for controlling the pressure drop over said turbine, said controller being configured for<claim-text>determining a desired exhaust manifold gas pressure level on the basis of a measured engine speed and a desired braking torque;</claim-text><claim-text>continuously monitoring a set of control parameters, including at least two of cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio;</claim-text><claim-text>controlling said BPV and said VTG by said control parameters, to drive one of the control parameters to a set maximum level; and</claim-text><claim-text>controlling the EGR by said control parameters in a closed loop to allow exhaust gas to recirculate towards the air inlet system while driving a second of the set of control parameters to a set maximum level.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. A combustion engine comprising an air inlet system and an exhaust manifold connected to a turbocharger provided with a variable turbine geometry (VTG) turbine, said exhaust manifold further comprising an exhaust gas recirculation (EGR) channel for recirculation of exhaust gas towards the air inlet system, wherein said turbine is further connected to a back pressure valve (BPV) provided in an exhaust channel; said engine further comprising.<claim-text>means for monitoring control parameters, including at least two of cylinder pressure, exhaust manifold pressure, turbine speed and turbine expansion ratio;</claim-text><claim-text>and a compression release brake controller according to <claim-ref idref="CLM-00013">claim 13</claim-ref>.</claim-text></claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. A computer program product, implemented on computer-readable non-transitory storage medium, the computer program product configured for, when run on a computer, executing the method steps according to <claim-ref idref="CLM-00001">claim 1</claim-ref>.</claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The method according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein said exhaust manifold gas pressure function is implemented as a look-up table in a memory comprising exhaust manifold gas pressure values stored as a function of at least the engine speed and braking torque.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The method according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein said back pressure valve function is implemented as a look-up table in a memory comprising back pressure valve position values stored as a function of at least engine speed and braking torque.</claim-text></claim></claims></us-patent-application>