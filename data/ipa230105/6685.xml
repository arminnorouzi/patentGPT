<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006686A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006686</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17782766</doc-number><date>20191210</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>03</class><subclass>M</subclass><main-group>1</main-group><subgroup>34</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>03</class><subclass>M</subclass><main-group>1</main-group><subgroup>34</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc></classifications-cpc><invention-title id="d2e43">AD Converter</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Nippon Telegraph and Telephone Corporation</orgname><address><city>Tokyo</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Minotani</last-name><first-name>Tadashi</first-name><address><city>Musashino-shi, Tokyo</city><country>JP</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Matsunaga</last-name><first-name>Kenichi</first-name><address><city>Musashino-shi, Tokyo</city><country>JP</country></address></addressbook></inventor></inventors></us-parties><pct-or-regional-filing-data><document-id><country>WO</country><doc-number>PCT/JP2019/048287</doc-number><date>20191210</date></document-id><us-371c12-date><date>20220606</date></us-371c12-date></pct-or-regional-filing-data></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">An AD converter includes: an integration unit <b>22</b> that uses an input voltage as an initial value and repeats an operation of integrating one or both of two types of unit voltages with the input voltage, thereby generating an integrated voltage; a switching threshold voltage unit <b>23</b> that includes two types of threshold voltages causing the operation of integrating to be terminated; a comparator <b>24</b> that compares the integrated voltage with the threshold voltages; an integration determination unit <b>11</b> that, before the operation of integrating is started, causes the comparator <b>24</b> to compare the input voltage with a rough adjustment threshold voltage corresponding to a larger one of the unit voltages; a unit voltage switching control unit <b>12</b> that, when the rough adjustment threshold voltage is larger than the input voltage, controls the integration unit <b>22</b> to generate the integrated voltage by using the two types of unit voltages; and a single unit voltage control unit <b>13</b> that, when the rough adjustment threshold voltage is smaller than the input voltage, controls the integration unit <b>22</b> to generate the integrated voltage by using only a smaller one of the unit voltages.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="130.56mm" wi="158.75mm" file="US20230006686A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="171.37mm" wi="153.92mm" orientation="landscape" file="US20230006686A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="83.31mm" wi="129.29mm" file="US20230006686A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="188.89mm" wi="154.09mm" orientation="landscape" file="US20230006686A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="146.98mm" wi="88.31mm" file="US20230006686A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="166.54mm" wi="153.59mm" orientation="landscape" file="US20230006686A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="194.65mm" wi="153.92mm" orientation="landscape" file="US20230006686A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">TECHNICAL FIELD</heading><p id="p-0002" num="0001">The present invention relates to an AD converter.</p><heading id="h-0002" level="1">BACKGROUND ART</heading><p id="p-0003" num="0002">An AD converter includes a DA converter unit that outputs a known voltage, a sample holding unit that holds a voltage value of an analog input, and a comparator. It sequentially changes an output value of the DA converter unit and uses, as a converted value in the AD converter, a digital value when the minimum output value of the DA converter unit at which an output of the comparator changes from a low output voltage to a high output voltage is set (Non Patent Literature 1).</p><p id="p-0004" num="0003">For the AD converter, it is important to reduce nonlinearity so as to reduce an error between an input voltage value and a converted value (code), and the nonlinearity includes differential nonlinearity and integral nonlinearity (Non Patent Literature 2). If the differential nonlinearity is larger than a minimum unit voltage (LSB) defined in the AD converter, a phenomenon called a missing code occurs in which a converted value (code) corresponding to an input voltage value is not output (Non Patent Literature 3). In a case where this missing code has occurred, output of the same code for different input voltage values also occurs, thereby a relationship between the input voltage value and the converted value (code) becomes nonmonotonic.</p><heading id="h-0003" level="1">CITATION LIST</heading><heading id="h-0004" level="1">Non-Patent Literature</heading><p id="p-0005" num="0004">Non-Patent Literature 1: Overview and Mechanism of A/D conversion in MEMEs support page[searched on Sep. 10, 2018], Internet (URL: http://memes.sakura.ne.jp/memes/?page_id=1120)</p><p id="p-0006" num="0005">Non-Patent Literature 2: Understanding A/D Converter Performance Specifications [searched on Sep. 9, 2019], Internet (URL: http://ww1.microchip.com/downloads/jp/AppNotes/00693A_JP.pdf)</p><p id="p-0007" num="0006">Non-Patent Literature 3: Latest Glossary of Analog Device Basic Terminologies&#x2014;DNL and INL&#x2014;[searched on Sep. 9, 2019], Internet (URL: http://www.tij.co.jp/lsds/ti_ja/analog/glossary/dnl_inl.page)</p><heading id="h-0005" level="1">SUMMARY OF THE INVENTION</heading><heading id="h-0006" level="1">Technical Problem</heading><p id="p-0008" num="0007">When a missing code occurs and a relationship between an input voltage value and a converted value (code) in the AD converter is nonmonotonic, not only an error between an input voltage value calculated from the converted value and an actual input voltage value is large, but also the accuracy of signal analysis in later stages of the AD converter deteriorates because there is an input voltage value that is actually input but does not exist in a converted value.</p><p id="p-0009" num="0008">The present invention has been made in view of this problem, and it is an object of the present invention to provide an AD converter that does not cause a missing code and prevents the accuracy of signal analysis in later stages of the AD converter from deteriorating.</p><heading id="h-0007" level="1">Means for Solving the Problem</heading><p id="p-0010" num="0009">An AD converter according to one aspect of the present invention includes: an integration unit that uses an input voltage as an initial value and repeats an operation of integrating one or both of two types of unit voltages with the input voltage, thereby generating an integrated voltage; a switching threshold voltage unit that includes two types of threshold voltages causing the operation of integrating to be terminated; a comparator that compares the integrated voltage with the threshold voltages; an integration determination unit that, before the operation of integrating is started, causes the comparator to compare the input voltage with a rough adjustment threshold voltage corresponding to a larger one of the unit voltages; a unit voltage switching control unit that, when the rough adjustment threshold voltage is larger than the input voltage, controls the integration unit to generate the integrated voltage by using the two types of unit voltages; and a single unit voltage control unit that, when the rough adjustment threshold voltage is smaller than the input voltage, controls the integration unit to generate the integrated voltage by using only a smaller one of the unit voltages.</p><p id="p-0011" num="0010">Further, an AD converter according to another aspect of the present invention includes: a unit voltage check integration unit that uses an input voltage as an initial value and repeats an operation of integrating one or both of two types of unit voltages with the input voltage, thereby generating an integrated voltage and also generates a check voltage larger than a larger one of the unit voltages; a threshold voltage unit that includes a threshold voltage causing the operation of integrating to be terminated; a comparator that compares the integrated voltage with the threshold voltage; an integration determination unit that, before the operation of integrating is started, causes the comparator to compare a sum voltage with the threshold voltage, the sum voltage being a sum of the input voltage and the check voltage; a unit voltage switching control unit that, when the threshold voltage is larger than the check voltage, controls the unit voltage check integration unit to generate the integrated voltage by using the two types of unit voltages; and a single unit voltage control unit that, when the threshold voltage is smaller than the check voltage, controls the unit voltage check integration unit to generate the integrated voltage by using only a smaller one of the unit voltages.</p><heading id="h-0008" level="1">Effects of the Invention</heading><p id="p-0012" num="0011">According to the present invention, an AD converter that does not cause a missing code and prevents the accuracy of signal analysis in later stages of the AD converter from deteriorating can be provided.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0009" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a functional block diagram illustrating a configuration example of an AD converter according to a first embodiment of the present invention.</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a diagram schematically illustrating changes in an integrated voltage at the time of an integration operation.</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a functional block diagram illustrating a configuration example of a modification of the AD converter illustrated in <figref idref="DRAWINGS">FIG. <b>1</b></figref>.</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a diagram illustrating an equivalent circuit model of an integration unit illustrated in <figref idref="DRAWINGS">FIG. <b>3</b></figref>.</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a functional block diagram illustrating a configuration example of an AD converter according to a second embodiment of the present invention.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a functional block diagram illustrating a configuration example of a modification of the AD converter illustrated in <figref idref="DRAWINGS">FIG. <b>5</b></figref>.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0010" level="1">DESCRIPTION OF EMBODIMENTS</heading><p id="p-0019" num="0018">Hereinafter, embodiments of the present invention will be described with reference to drawings. The same components in a plurality of drawings are denoted by the same reference numerals and the description will not be repeated.</p><heading id="h-0011" level="1">First Embodiment</heading><p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a functional block diagram of an AD converter according to a first embodiment of the present invention. The AD converter <b>100</b> illustrated in <figref idref="DRAWINGS">FIG. <b>1</b></figref> includes a control unit <b>10</b> and an integration conversion unit <b>20</b>. The control unit <b>10</b> includes an integration determination unit <b>11</b>, a unit voltage switching control unit <b>12</b>, and a single unit voltage control unit <b>13</b>. The integration conversion unit <b>20</b> includes an input unit <b>21</b>, an integration unit <b>22</b>, a switching threshold voltage unit <b>23</b>, and a comparator <b>24</b>. The integration unit <b>22</b> includes a first switch SW<b>1</b>, a second switch SW<b>2</b>, a capacitance Co, and a positive current source <b>220</b>.</p><p id="p-0021" num="0020">The AD converter converts an input voltage Vin into a digital value by comparing an integrated voltage Vo, which is generated by integrating a unit voltage with the input voltage as an initial value in the integration unit <b>22</b>, with a threshold voltage Vt by the comparator <b>24</b>. As for a unit voltage that is a unit of the amount of change in the integrated voltage, there are two types of unit voltages in the AD converter a rough adjustment unit voltage VG<b>2</b> that is a relatively large unit voltage, and a fine adjustment unit voltage VG<b>1</b> that is a minimum unit voltage. There is provided a function of checking which of a difference between the threshold voltage Vt and the input voltage Vin and the rough adjustment unit voltage is larger, performing, when the rough adjustment unit voltage is larger than the difference, integration up to the threshold voltage only with the fine adjustment unit voltage, and performing, when the rough adjustment unit voltage is smaller than the difference, integration up to the threshold voltage by using the rough adjustment unit voltage and the fine adjustment unit voltage.</p><p id="p-0022" num="0021">In addition, in this embodiment, a switching threshold voltage unit <b>23</b> is provided which has two types of thresholds of a rough adjustment threshold voltage used in integration with the rough adjustment unit voltage, and a fine adjustment threshold voltage used in integration with the fine adjustment unit voltage.</p><p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates an example of integration at the time of conversion. After the integrated voltage in the integration unit <b>22</b> is initialized with the input voltage Vin, the number of integrations k2 at which the integrated voltage obtained by integration using the rough adjustment unit voltage VG<b>2</b> exceeds the rough adjustment threshold voltage for the first time is first measured, and next, the number of integrations k1+1 at which, in using the fine adjustment unit voltage VG<b>1</b>, it exceeds the fine adjustment threshold voltage Vt for the first time is measured. Whether the integrated voltage exceeds the rough adjustment threshold voltage or the fine adjustment threshold voltage is detected by the comparator <b>24</b>. When the integrated voltage and the fine adjustment threshold voltage Vt become equal, the following expression holds.</p><p id="p-0024" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>Math. 1<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0025" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Vt=k</i>2<i>VG</i>2+(<i>k</i>1+&#x3b4;<i>k</i>1)<i>VG</i>1+<i>V</i>in&#x2003;&#x2003;(1)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0026" num="0023">In the expression (1), &#x3b4;k1 is a real number of 0 or greater and smaller than 1 and &#x3b4;k1 VG<b>1</b> represents a difference between Vt and an integrated voltage in the k1-th integration. The Vt, VG<b>2</b>, and VG<b>1</b> become known parameters after circuit design and manufacture and due to calibration during operation, and therefore the Vin can be determined by an error of VG<b>1</b> from the expression (1) and measured k2 and k1.</p><p id="p-0027" num="0024">When the accuracy of voltage is improved in the AD converter that uses the integration unit <b>22</b>, the unit voltage needs to be reduced and accordingly, the time for integration up to the threshold voltage becomes longer, that is, a conversion time becomes longer. In order to prevent prolongation of conversion time while improving the accuracy of voltage, a method of performing integration with a relatively large rough adjustment unit voltage and then performing integration with a fine adjustment unit voltage corresponding to a desired voltage resolution is promising.</p><p id="p-0028" num="0025">In the above method, integration is performed with a rough adjustment unit voltage first and therefore, when an input voltage is larger than a rough adjustment threshold voltage, it may exceed a fine adjustment threshold voltage Vt by one integration with the rough adjustment unit voltage. In this case, a conversion operation ends at k1=0 without performing integration with a fine adjustment integrated voltage. The accuracy at this time is VG<b>2</b> and an error becomes larger in comparison with a case of the expression (1). In addition, when the input voltage Vin satisfies the following expression, although the minimum unit voltage in the AD converter <b>100</b> is the fine adjustment integration unit VG<b>1</b>, every Vin after conversion becomes a single value of Vt-VG<b>2</b> and the same phenomenon as a missing code occurs.</p><p id="p-0029" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>Math. 2<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0030" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>V</i>in&#x3c;<i>Vt&#x3c;V</i>in+<i>VG</i>2&#x2003;&#x2003;(7)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0031" num="0026">To prevent this phenomenon, in this embodiment, the input voltage Vin is compared with the rough adjustment threshold voltage before integration, if the rough adjustment threshold voltage is larger than the input voltage Vin, integration is performed in a unit voltage switching mode in which integration is performed using the rough adjustment unit voltage and the fine adjustment unit voltage, and if the rough adjustment threshold voltage is smaller than the input voltage Vin, integration is performed in a single unit voltage mode in which integration is performed with only the fine adjustment unit voltage.</p><p id="p-0032" num="0027">The AD converter <b>100</b> of this embodiment includes the integration conversion unit <b>20</b> that has two types of integration units which are units of the amount of change in an integrated voltage, two types of threshold voltages which determine an end point of integration, and the comparator <b>24</b> which compares the integrated voltage with the threshold voltages, and that integrates the integrated voltage until reaching the threshold voltage, and the control unit <b>10</b> that has the integration determination unit <b>11</b> which performs processing of comparing an initial value of the integrated voltage with the threshold voltage before the integration is started, the unit voltage switching control unit <b>12</b> which, when the initial value of the integrated voltage is smaller than the threshold voltage, causes execution as processing of the integration conversion unit <b>20</b>, and the single unit voltage control unit <b>13</b> which, when the initial value of the integrated voltage is larger than the threshold voltage, causes execution as processing of the integration conversion unit <b>20</b>.</p><p id="p-0033" num="0028">The integration conversion unit <b>20</b> in this embodiment has the integration unit <b>22</b> that generates an integrated voltage, the input unit <b>21</b> that provides an initial value to the integration unit <b>22</b>, the switching threshold voltage unit <b>23</b> that provides a rough adjustment threshold voltage and a fine adjustment threshold voltage which cause an end point of integration in integration with a rough adjustment unit voltage and integration with a fine adjustment unit voltage, and the comparator <b>24</b> that outputs a result of comparing the integrated voltage with the rough adjustment threshold voltage or the fine adjustment threshold voltage.</p><p id="p-0034" num="0029">The integration unit <b>22</b> has a positive current source <b>220</b> that has two types of current values corresponding to the rough adjustment unit voltage and the fine adjustment unit voltage and outputs a charge which causes an integrated voltage to be generated, a capacitance Co that accumulates the charge to generate the integrated voltage, a first switch SW<b>1</b> that is connected in accumulating the charge from the positive current source <b>220</b> into the capacitance Co, and a second switch SW<b>2</b> that is connected when an initial value is accumulated in the capacitance.</p><p id="p-0035" num="0030">Switching between the first and second switches SW<b>1</b> and SW<b>2</b>, between the current values of the positive current source <b>220</b>, and between the thresholds of the switching threshold voltage unit <b>23</b> is controlled using operation control signals of CHG, HLD, and MAGP from the control unit <b>10</b>.</p><p id="p-0036" num="0031">The integration conversion unit <b>20</b> first sets, in converting an input voltage Vin into a digital value, a state in which the rough adjustment threshold voltage is being output from the switching threshold voltage unit <b>23</b>, and outputs, by the input unit <b>21</b>, the input voltage Vin as an initial value to the integration unit <b>22</b>, and causes the second switch SW<b>2</b> to be connected in the integration unit <b>22</b>, thereby initializing the capacitance Co with the input voltage Vin. Next, the integration determination unit <b>11</b> of the control unit <b>10</b> determines a mode based on a result of comparison between the initial value of the integration unit <b>22</b> and the rough adjustment threshold voltage by the comparator <b>24</b>.</p><p id="p-0037" num="0032">When the rough adjustment threshold voltage is larger than the initial value, by means of the unit voltage switching control unit <b>12</b>, the positive current source <b>220</b> is first set to correspond to the rough adjustment unit voltage and in this state, integration is performed until it can be checked by a change of a comparison signal which is output from the comparator <b>24</b> that the integrated voltage Vo has exceeded the rough adjustment threshold voltage, and the number of integrations k2 is measured. After that, the threshold voltage is set to the fine adjustment threshold voltage and the positive current source <b>220</b> is set to correspond to the fine adjustment unit voltage and in this state, integration is performed until it can be checked by a change of the comparison signal that the integrated voltage Vo has exceeded the fine adjustment threshold voltage, and the number of integrations k1 is measured. Based on the obtained k2 and k1, a converted value of the Vin is obtained.</p><p id="p-0038" num="0033">When the rough adjustment threshold voltage is smaller than the initial value, the threshold voltage is set to the fine adjustment threshold voltage and the positive current source <b>220</b> is set to correspond to the fine adjustment unit voltage and in this state, integration is performed until it can be checked by a change of the comparison signal that the integrated voltage Vo has exceeded the fine adjustment threshold voltage, and the number of integrations k1 is measured. Based on the obtained k1, a converted value of the Vin is obtained.</p><p id="p-0039" num="0034">As described above, the AD converter <b>100</b> of this embodiment includes the integration unit <b>22</b> that uses an input voltage Vin as an initial value and repeats the operation of integrating one or both of two types of unit voltages with the input voltage Vin, thereby generating an integrated voltage, the switching threshold voltage unit <b>23</b> that includes two types of threshold voltages which cause the operation of integrating to be terminated, the comparator <b>24</b> that compares the integrated voltage with the threshold voltages, the integration determination unit <b>11</b> that, before the operation of integrating is started, causes the comparator <b>24</b> to compare the input voltage Vin with a rough adjustment threshold voltage corresponding to a larger one of the unit voltages, the unit voltage switching control unit <b>12</b> that, when the rough adjustment threshold voltage is larger than the input voltage Vin, controls the integration unit <b>22</b> to generate the integrated voltage by using the two types of unit voltages, and the single unit voltage control unit <b>13</b> that, when the rough adjustment threshold voltage is smaller than the input voltage Vin, controls the integration unit <b>22</b> to generate the integrated voltage by using only a smaller one of the unit voltages. According to this, an integrating type AD converter that, even if an input voltage is close to a threshold, does not cause a missing code and prevents the accuracy of signal analysis in later stages of the AD converter from deteriorating can be provided.</p><heading id="h-0012" level="2">Modification 1</heading><p id="p-0040" num="0035"><figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates a modification of the integration unit <b>22</b> of the first embodiment. An integration unit <b>25</b> of Modification 1 illustrated in <figref idref="DRAWINGS">FIG. <b>3</b></figref> is different from the integration unit <b>22</b> in <figref idref="DRAWINGS">FIG. <b>1</b></figref> in that a difference arithmetic unit <b>250</b> is provided between the capacitance Co and a ground. The difference arithmetic unit <b>250</b> includes a base voltage unit <b>251</b> and a switching switch <b>252</b>.</p><p id="p-0041" num="0036">In a configuration in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, conversion is impossible when the input voltage Vin is equal to or higher than the fine adjustment threshold voltage. However, in a configuration in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, when the input voltage Vin is equal to or higher than the fine adjustment threshold voltage, the range of input voltage Vin can be extended by performing processing of holding a difference between the input voltage Vin and a base voltage which is generated by the base voltage unit <b>251</b>, in the capacitance Co by using the difference arithmetic unit <b>250</b>.</p><p id="p-0042" num="0037"><figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrates an equivalent circuit when a difference between the input voltage Vin and a base voltage Vbs is taken in a conversion state. The Cp represents a parasitic capacitance for wiring, the switching switch <b>252</b>, and input of the comparator <b>24</b>. In a case where the input voltage Vin is larger than a reference voltage, a<b>20</b> and c<b>20</b> of the switching switch <b>252</b> in the difference arithmetic unit <b>250</b> are connected when the second switch SW<b>2</b> is connected in a conversion state. At this time, the equivalent circuit becomes as in <figref idref="DRAWINGS">FIG. <b>4</b>(<i>a</i>)</figref>. Next, after the second switch SW<b>2</b> is disconnected, a<b>20</b> and b<b>20</b> of the switching switch <b>252</b> in the difference arithmetic unit <b>250</b> are connected (<figref idref="DRAWINGS">FIG. <b>4</b> (<i>b</i>)</figref>). In <figref idref="DRAWINGS">FIGS. <b>4</b> (<i>a</i>) and (<i>b</i>)</figref>, charges accumulated in the Co and Cp are stored and therefore, the following expression (3) is established and an initial voltage value Vo,0 before integration is started is expressed by an expression (4).</p><p id="p-0043" num="0000"><maths id="MATH-US-00001" num="00001"><math overflow="scroll"> <mtable>  <mtr>   <mtd>    <mrow>     <mi>Math</mi>     <mo>.</mo>     <mtext>   </mtext>     <mn>3</mn>    </mrow>   </mtd>   <mtd>    <mi>&#xf3ba;</mi>   </mtd>  </mtr>  <mtr>   <mtd>    <mrow>     <mrow>      <mrow>       <mrow>        <mi>Cp</mi>        <mo>&#x2062;</mo>        <mtext>   </mtext>        <mi>Vin</mi>       </mrow>       <mo>+</mo>       <mrow>        <mi>Co</mi>        <mo>&#x2061;</mo>        <mo>(</mo>        <mrow>         <mi>Vin</mi>         <mo>-</mo>         <mi>Vbs</mi>        </mrow>        <mo>)</mo>       </mrow>      </mrow>      <mo>=</mo>      <mrow>       <mi>Cp</mi>       <mo>&#x2062;</mo>       <mtext>   </mtext>       <mi>Vo</mi>      </mrow>     </mrow>     <mo>,</mo>     <mrow>      <mn>0</mn>      <mo>+</mo>      <mrow>       <mi>Co</mi>       <mo>&#x2062;</mo>       <mtext>   </mtext>       <mi>Vo</mi>      </mrow>     </mrow>     <mo>,</mo>     <mn>0</mn>    </mrow>   </mtd>   <mtd>    <mpadded width="0em" lspace="0em" depth="-0.2ex" height="0.2ex">     <mrow>      <mo>(</mo>      <mn>3</mn>      <mo>)</mo>     </mrow>    </mpadded>   </mtd>  </mtr> </mtable></math></maths><maths id="MATH-US-00001-2" num="00001.2"><math overflow="scroll"> <mtable>  <mtr>   <mtd>    <mrow>     <mi>Vo</mi>     <mo>,</mo>     <mrow>      <mn>0</mn>      <mo>=</mo>      <mrow>       <mi>Vin</mi>       <mo>-</mo>       <mrow>        <mfrac>         <mi>Co</mi>         <mrow>          <mi>Co</mi>          <mo>+</mo>          <mi>Cp</mi>         </mrow>        </mfrac>        <mo>&#x2062;</mo>        <mi>Vbs</mi>       </mrow>      </mrow>     </mrow>    </mrow>   </mtd>   <mtd>    <mpadded width="0em" lspace="0em" depth="-0.1ex" height="0.1ex">     <mrow>      <mo>(</mo>      <mn>4</mn>      <mo>)</mo>     </mrow>    </mpadded>   </mtd>  </mtr> </mtable></math></maths></p><p id="p-0044" num="0038">As described above, the integration unit <b>25</b> in Modification 1 includes the base voltage unit <b>251</b> that generates a base voltage Vbs lower than an input voltage, and the switching switch <b>252</b> that switches, between a ground voltage and the base voltage Vbs, a target to which a terminal of the capacitance Co on a side to be connected to a ground potential is connected, the capacitance Co holding the integrated voltage. As a result, by appropriately setting the base voltage Vbs, Vo,0 can be made within a voltage range of an output terminal of the positive current source <b>220</b> even if the input voltage Vin is outside the voltage range of the output terminal of the positive current source <b>220</b>. Since the subsequent processing is the same as that of the AD converter in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, description thereof will be omitted.</p><p id="p-0045" num="0039">According to this configuration, an AD converter that, even if an input range is larger than a threshold or is close to the threshold, does not cause a missing code and prevents the accuracy of signal analysis in later stages of the AD converter from deteriorating can be provided.</p><heading id="h-0013" level="1">Second Embodiment</heading><p id="p-0046" num="0040"><figref idref="DRAWINGS">FIG. <b>5</b></figref> illustrates a block diagram of an AD converter according to a second embodiment of the present invention. The AD converter <b>200</b> illustrated in <figref idref="DRAWINGS">FIG. <b>5</b></figref> includes a control unit <b>30</b> and an integration conversion unit <b>40</b>. The control unit <b>30</b> includes an integration determination unit <b>31</b>, a unit voltage switching control unit <b>32</b>, and a single unit voltage control unit <b>33</b>. The integration conversion unit <b>40</b> includes an input unit <b>21</b>, a unit voltage check integration unit <b>42</b>, a threshold voltage unit <b>43</b>, and a comparator <b>24</b>. The unit voltage check integration unit <b>42</b> includes a first switch SW<b>1</b>, a second switch SW<b>2</b>, a third switch SW<b>3</b>, a capacitance Co, a resistance unit <b>420</b>, and a positive current source <b>220</b>.</p><p id="p-0047" num="0041">The AD converter <b>200</b> converts an input voltage Vin into a digital value by comparing an integrated voltage Vo, which is generated by integrating a unit voltage with the input voltage Vin as an initial value in the integration unit <b>42</b>, with a threshold voltage Vt by the comparator <b>24</b>. As for a unit voltage that is a unit of the amount of change in the integrated voltage, there are two types of unit voltages in the AD converter a rough adjustment unit voltage VG<b>2</b> that is a relatively large unit voltage, and a fine adjustment unit voltage VG<b>1</b> that is a minimum unit voltage. There is provided a function of checking which of a difference between the threshold voltage and the input voltage and the rough adjustment unit voltage is larger, by using the unit voltage check integration unit <b>42</b>, performing, when the rough adjustment unit voltage is larger than the difference, integration up to the threshold voltage only with the fine adjustment unit voltage, and performing, when the rough adjustment unit voltage is smaller than the difference, integration up to the threshold voltage by using the rough adjustment unit voltage and the fine adjustment unit voltage.</p><p id="p-0048" num="0042">The AD converter <b>200</b> of this embodiment includes the integration conversion unit <b>40</b> that has two types of integration units which are units of the amount of change in an integrated voltage, a threshold voltage which determines an end point of integration, and the comparator <b>24</b> which compares the integrated voltage with the threshold voltage, and that integrates the integrated voltage until reaching the threshold voltage, and the control unit <b>30</b> that has the integration determination unit <b>31</b> which, before the integration is started, causes processing of comparing an initial value of the integrated voltage with the threshold voltage to be performed, the unit voltage switching control unit <b>32</b> which, when the initial value of the integrated voltage is smaller than the threshold voltage, causes execution as processing of the integration conversion unit <b>40</b>, and the single unit voltage control unit <b>33</b> which, when the initial value of the integrated voltage is larger than the threshold voltage, causes execution as processing of the integration conversion unit <b>40</b>.</p><p id="p-0049" num="0043">The integration conversion unit <b>40</b> in this embodiment has the threshold voltage unit <b>43</b> that provides a threshold voltage that determines an end point of integration, the unit voltage check integration unit <b>42</b> that has a function of checking by a check voltage that the input voltage Vin is close to a threshold and generates an integrated voltage, the input unit <b>21</b> that provides an initial value to the unit voltage check integration unit <b>42</b>, and the comparator <b>24</b> that outputs a result of comparing the integrated voltage with the threshold voltage.</p><p id="p-0050" num="0044">The unit voltage check integration unit <b>42</b> has the positive current source <b>220</b> that has two types of current values corresponding to the rough adjustment unit voltage and the fine adjustment unit voltage and outputs a charge which causes an integrated voltage to be generated, a capacitance Co that accumulates the charge to generate the integrated voltage, the first switch SW<b>1</b> that is connected in accumulating the charge from the positive current source <b>220</b> into the capacitance Co, the second switch SW<b>2</b> that is connected in accumulating an initial value into the capacitance Co, and the resistance unit <b>420</b> and the third switch SW<b>3</b> that cause a check voltage larger than the rough adjustment unit voltage to be generated.</p><p id="p-0051" num="0045">In converting an input voltage Vin into a digital value, the input voltage Vin is output to the unit voltage check integration unit <b>42</b> as an initial value by the input unit <b>21</b> and the second switch SW<b>2</b> is connected in the unit voltage check integration unit <b>42</b>, thereby causing the capacitance Co to be initialized by the input voltage Vin. Next, the integration determination unit <b>31</b> of the control unit <b>30</b> determines which of the initial value of the integrated voltage and the threshold voltage is larger.</p><p id="p-0052" num="0046">In determining which of the initial value of the integrated voltage and the threshold voltage is larger, the positive current source <b>220</b> is set to a current value corresponding to the rough adjustment unit voltage and the third switch SW<b>3</b> is connected, thereby causing the resistance unit <b>420</b> to generate a check voltage larger than the rough adjustment unit voltage. At this time, the integrated voltage becomes the sum of the check voltage and the input voltage Vin. When the integrated voltage is smaller than the threshold voltage Vt, it is determined that the input voltage Vin is not close to a threshold, and the unit voltage switching control unit controls the integration conversion unit <b>40</b> to perform integration. When the integrated voltage is larger than the threshold voltage Vt, it is determined that the input voltage is close to the threshold, and the single unit voltage control unit <b>33</b> controls the integration conversion unit <b>40</b> to perform integration. The subsequent operation is the same as that of the AD converter <b>100</b>.</p><p id="p-0053" num="0047">As described above, the AD converter <b>200</b> of this embodiment includes the unit voltage check integration unit <b>42</b> that uses an input voltage Vin as an initial value and repeats the operation of integrating one or both of two types of unit voltages with the input voltage, thereby generating an integrated voltage and also generates a check voltage larger than a larger one of the unit voltages, the threshold voltage unit <b>43</b> that includes a threshold voltage causing the operation of integrating to be terminated, the comparator <b>24</b> that compares the integrated voltage with the threshold voltage, the integration determination unit <b>31</b> that, before the operation of integrating is started, causes the comparator <b>24</b> to compare a sum voltage with the threshold voltage, the sum voltage being a sum of the input voltage Vin and the check voltage, the unit voltage switching control unit <b>32</b> that, when the threshold voltage is larger than the check voltage, controls the unit voltage check integration unit <b>42</b> to generate the integrated voltage by using the two types of unit voltages, and the single unit voltage control unit <b>33</b> that, when the threshold voltage is smaller than the check voltage, controls the unit voltage check integration unit <b>42</b> to generate the integrated voltage by using only a smaller one of the unit voltages. According to this, an AD converter that, even if an input voltage is close to a threshold, does not cause a missing code and prevents the accuracy of signal analysis in later stages of the AD converter from deteriorating can be provided.</p><heading id="h-0014" level="2">Modification 2</heading><p id="p-0054" num="0048"><figref idref="DRAWINGS">FIG. <b>6</b></figref> illustrates a modification of the unit voltage check integration unit <b>42</b>. A unit voltage check integration unit <b>44</b> of Modification 2 illustrated in <figref idref="DRAWINGS">FIG. <b>6</b></figref> is different from <figref idref="DRAWINGS">FIG. <b>5</b></figref> in that a difference arithmetic unit <b>440</b> is provided between the capacitance Co and the ground. The difference arithmetic unit <b>440</b> includes a base voltage unit <b>441</b> and a switching switch <b>442</b>.</p><p id="p-0055" num="0049">In a configuration in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, conversion is impossible when the input voltage Vin is equal to or higher than the fine adjustment threshold voltage. However, in a configuration in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, when the input voltage Vin is equal to or higher the fine adjustment threshold voltage, the range of input voltage Vin can be extended by performing processing of holding a difference between the input voltage Vin and a base voltage which is generated by the base voltage unit <b>441</b>, in the capacitance Co by using the difference arithmetic unit <b>440</b>. The other operations are the same as the AD converter <b>200</b>.</p><heading id="h-0015" level="1">REFERENCE SIGNS LIST</heading><p id="p-0056" num="0000"><ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0000">    <ul id="ul0002" list-style="none">        <li id="ul0002-0001" num="0050"><b>10</b>, <b>30</b> control unit</li>        <li id="ul0002-0002" num="0051"><b>11</b>, <b>31</b> integration determination unit</li>        <li id="ul0002-0003" num="0052"><b>12</b>, <b>32</b> unit voltage switching control unit</li>        <li id="ul0002-0004" num="0053"><b>13</b>, <b>33</b> single unit voltage control unit</li>        <li id="ul0002-0005" num="0054"><b>20</b>, <b>40</b> integration conversion unit</li>        <li id="ul0002-0006" num="0055"><b>21</b> input unit</li>        <li id="ul0002-0007" num="0056"><b>22</b>, <b>25</b> integration unit</li>        <li id="ul0002-0008" num="0057"><b>23</b> switching threshold unit</li>        <li id="ul0002-0009" num="0058"><b>24</b> comparator</li>        <li id="ul0002-0010" num="0059"><b>42</b>, <b>44</b> unit voltage check integration unit</li>        <li id="ul0002-0011" num="0060"><b>43</b> threshold voltage unit</li>        <li id="ul0002-0012" num="0061"><b>100</b>, <b>200</b> AD converter</li>        <li id="ul0002-0013" num="0062"><b>251</b>, <b>441</b> base voltage unit</li>        <li id="ul0002-0014" num="0063"><b>252</b>, <b>442</b> switching switch</li>    </ul>    </li></ul></p><?detailed-description description="Detailed Description" end="tail"?></description><us-math idrefs="MATH-US-00001 MATH-US-00001-2" nb-file="US20230006686A1-20230105-M00001.NB"><img id="EMI-M00001" he="12.70mm" wi="76.20mm" file="US20230006686A1-20230105-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. An AD converter, comprising:<claim-text>an integration unit that uses an input voltage as an initial value and repeats an operation of integrating one or both of two types of unit voltages with the input voltage, thereby generating an integrated voltage;</claim-text><claim-text>a switching threshold voltage unit that includes two types of threshold voltages causing the operation of integrating to be terminated;</claim-text><claim-text>a comparator that compares the integrated voltage with the threshold voltages;</claim-text><claim-text>an integration determination unit that, before the operation of integrating is started, causes the comparator to compare the input voltage with a rough adjustment threshold voltage corresponding to a larger one of the unit voltages;</claim-text><claim-text>a unit voltage switching control unit that, when the rough adjustment threshold voltage is larger than the input voltage, controls the integration unit to generate the integrated voltage by using the two types of unit voltages; and</claim-text><claim-text>a single unit voltage control unit that, when the rough adjustment threshold voltage is smaller than the input voltage, controls the integration unit to generate the integrated voltage by using only a smaller one of the unit voltages.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The AD converter according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein<claim-text>the integration unit includes:</claim-text><claim-text>a base voltage unit that generates a base voltage lower than the input voltage; and</claim-text><claim-text>a switching switch that switches, between a ground potential and the base voltage, a target to which a terminal of a capacitance on a side to be connected to the ground potential is connected, the capacitance holding the integrated voltage.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. An AD converter, comprising:<claim-text>a unit voltage check integration unit that uses an input voltage as an initial value and repeats an operation of integrating one or both of two types of unit voltages with the input voltage, thereby generating an integrated voltage and also generates a check voltage larger than a larger one of the unit voltages;</claim-text><claim-text>a threshold voltage unit that includes a threshold voltage causing the operation of integrating to be terminated;</claim-text><claim-text>a comparator that compares the integrated voltage with the threshold voltage;</claim-text><claim-text>an integration determination unit that, before the operation of integrating is started, causes the comparator to compare a sum voltage with the threshold voltage, the sum voltage being a sum of the input voltage and the check voltage;</claim-text><claim-text>a unit voltage switching control unit that, when the threshold voltage is larger than the check voltage, controls the unit voltage check integration unit to generate the integrated voltage by using the two types of unit voltages; and</claim-text><claim-text>a single unit voltage control unit that, when the threshold voltage is smaller than the check voltage, controls the unit voltage check integration unit to generate the integrated voltage by using only a smaller one of the unit voltages.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The AD converter according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein<claim-text>the unit voltage check integration unit includes:</claim-text><claim-text>a base voltage unit that generates a base voltage lower than the input voltage; and</claim-text><claim-text>a switching switch that switches, between a ground potential and the base voltage, a target to which a terminal of a capacitance on a side to be connected to the ground potential is connected, the capacitance holding the integrated voltage.</claim-text></claim-text></claim></claims></us-patent-application>