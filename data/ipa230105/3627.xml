<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230003628A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230003628</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17854420</doc-number><date>20220630</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>N</subclass><main-group>9</main-group><subgroup>10</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>E</section><class>21</class><subclass>B</subclass><main-group>49</main-group><subgroup>08</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>N</subclass><main-group>9</main-group><subgroup>10</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>E</section><class>21</class><subclass>B</subclass><main-group>49</main-group><subgroup>08</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">SYSTEM AND METHOD FOR MEASURING DOWNHOLE MUD FLOW DENSITY</invention-title><us-related-documents><us-provisional-application><document-id><country>US</country><doc-number>63216920</doc-number><date>20210630</date></document-id></us-provisional-application></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only"><addressbook><last-name>Peters</last-name><first-name>Volker</first-name><address><city>Celle</city><country>DE</country></address></addressbook><residence><country>DE</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Peters</last-name><first-name>Volker</first-name><address><city>Celle</city><country>DE</country></address></addressbook></inventor></inventors></us-parties><assignees><assignee><addressbook><orgname>Baker Hughes Oilfield Operations LLC</orgname><role>02</role><address><city>Houston</city><state>TX</state><country>US</country></address></addressbook></assignee></assignees></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A system and method of determining a density of a drilling fluid in a wellbore. The system includes a drill string in the wellbore, the drill string including a downhole rotor. A drilling fluid flowing through the drill string in the wellbore causes the downhole rotor to rotate relative to the drill string. A brake is configured to apply a first brake torque to the downhole rotor to place the downhole rotor in a first state. A torque measurement system is configured to determine the applied first brake torque. A rotor speed measurement system is configured to measure a first downhole rotor speed of the downhole rotor having the drilling fluid flowing therethrough with the downhole rotor in the first state. A processor is configured to determine a density of the drilling fluid from the measured first downhole rotor speed, and the determined applied first brake torque.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="113.71mm" wi="158.75mm" file="US20230003628A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="232.16mm" wi="154.43mm" file="US20230003628A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="176.28mm" wi="133.52mm" file="US20230003628A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="183.39mm" wi="143.09mm" orientation="landscape" file="US20230003628A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="244.94mm" wi="167.05mm" orientation="landscape" file="US20230003628A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATIONS</heading><p id="p-0002" num="0001">This application claims the benefit of an earlier filing date from U.S. Provisional Application Ser. No. 63/216,920 filed Jun. 30, 2021, the entire disclosure of which is incorporated herein by reference.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">BACKGROUND</heading><p id="p-0003" num="0002">In the resource recovery industry, knowledge of a property of a fluid in a wellbore, such as fluid density, can be used when performing various downhole operations, such as mud pulse telemetry, acoustic logging, etc. As an example, a mud pulse telemetry system includes a pulser at the downhole location that generates a pressure pulse in mud flowing through the wellbore. Data is transmitted by having the pressure pulse travel through the mud to a sensor at the surface location. The signal strength of the pressure pulse depends on various mud properties, such as primarily flow rate, mud density, and the settings of the pulser. Therefore, when the mud properties change, the settings for creating the pressure pulse can be changed accordingly to prevent excessive pressure pulses, damage or other discrepancies. Such changes are made based on mud property measurements. For accurate pulser adjustments, there is a need to have the mud measurements made downhole near the location of the pulser.</p><heading id="h-0003" level="1">SUMMARY</heading><p id="p-0004" num="0003">A method of determining a density of a drilling fluid in a wellbore. A drill string is conveyed into the wellbore, the drill string including a downhole rotor. The drilling fluid is flowed through the drill string in the wellbore causing the downhole rotor to rotate relative to the drill string. A first brake torque is applied to the downhole rotor to place the downhole rotor in a first state. The applied first brake torque is determined. A first downhole rotor speed of the downhole rotor having the drilling fluid flowing therethrough is measured with the downhole rotor in the first state. A density of the drilling fluid is determined from the measured first downhole rotor speed, and the determined applied first brake torque.</p><p id="p-0005" num="0004">A system for determining a density of a drilling fluid in a wellbore. The system includes a drill string in the wellbore, the drill string including a downhole rotor, a drilling fluid flowing through the drill string in the wellbore causing the downhole rotor to rotate relative to the drill string, a brake configured to apply a first brake torque to the downhole rotor to place the downhole rotor in a first state, a torque measurement system configured to determine the applied first brake torque, a rotor speed measurement system configured to measure a first downhole rotor speed of the downhole rotor having the drilling fluid flowing therethrough with the downhole rotor in the first state, and a processor configured to determine a density of the drilling fluid from the measured first downhole rotor speed, and the determined applied first brake torque.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0006" num="0005">The following descriptions should not be considered limiting in any way. With reference to the accompanying drawings, like elements are numbered alike:</p><p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. <b>1</b></figref> shows a wellbore system in an illustrative embodiment;</p><p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. <b>2</b></figref> shows a schematic representation of a downhole pulser system;</p><p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. <b>3</b></figref> shows a graph illustrating a relation between downhole rotor speed and mud flow rate through a downhole rotor at different mud densities; and</p><p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. <b>4</b></figref> shows a flow chart illustrating a process for determining a mud density related parameter.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">DETAILED DESCRIPTION</heading><p id="p-0011" num="0010">A detailed description of one or more embodiments of the disclosed apparatus and method are presented herein by way of exemplification and not limitation with reference to the Figures.</p><p id="p-0012" num="0011">Referring to <figref idref="DRAWINGS">FIG. <b>1</b></figref>, a wellbore system <b>100</b> is shown in an illustrative embodiment. The wellbore system <b>100</b> can be a drilling system, as shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, or any other suitable system, such as a completion system, etc. The wellbore system <b>100</b> includes a drill string <b>102</b> for drilling a wellbore <b>104</b> in a formation <b>106</b>. The drill string <b>102</b> extends downhole into the wellbore <b>104</b> from a surface location <b>110</b>. The drill string <b>102</b> includes a drill bit <b>108</b> at an end thereof and defines an inner bore <b>112</b> and an annulus <b>114</b> between the drill string <b>102</b> and a wall of the wellbore <b>104</b>. Rotation of the drill bit <b>108</b> creates cuttings <b>116</b> at a bottom of the wellbore <b>104</b>.</p><p id="p-0013" num="0012">The wellbore system <b>100</b> further includes a mud pit <b>120</b> at the surface location <b>110</b> having a drilling mud <b>118</b> (also referred to as &#x201c;drilling fluid&#x201d; or simply &#x201c;mud&#x201d;) stored therein. A standpipe <b>122</b> serves as a conduit for flow of the drilling mud <b>118</b> from the mud pit <b>120</b> to an entry of the drill string <b>102</b> at a top of the drill string <b>102</b>. A return line <b>124</b> allows for flow of drilling mud <b>118</b> from the drill string <b>102</b> back to the mud pit <b>120</b>. During drilling, a mud pump <b>126</b> in the standpipe <b>122</b> pumps the drilling mud <b>118</b> from the mud pit <b>120</b> through the standpipe <b>122</b> and into the drill string <b>102</b>. The drilling mud <b>118</b> flows downhole through the inner bore <b>112</b> of the drill string <b>102</b> and exits the drill string <b>102</b> via the drill bit <b>108</b> at the bottom of the wellbore <b>104</b>. The drilling mud <b>118</b> then flows upward to the surface location <b>110</b> through the annulus <b>114</b> and returns to the mud pit <b>120</b> via the return line <b>124</b>. In the annulus <b>114</b>, the drilling mud <b>118</b> carries the cuttings <b>116</b> from the wellbore <b>104</b> to the surface location <b>110</b>. Various devices at the surface location <b>110</b> (not shown) can be used to separate the cuttings <b>116</b> from the drilling mud <b>118</b> before the drilling mud <b>118</b> is deposited back into the mud pit <b>120</b>.</p><p id="p-0014" num="0013">A control system <b>140</b> controls various operations of the wellbore system <b>100</b>. The control system <b>140</b> includes a processor <b>142</b> and a memory storage device <b>144</b>. The memory storage device <b>144</b> can be a solid-state device. One or more programs <b>146</b> are stored on the memory storage device <b>144</b>. The processor <b>142</b> accesses the programs <b>146</b> to control operation of the wellbore system <b>100</b> based, in part, on various parameter determined using the methods disclosed herein. In one aspect, the control system <b>140</b> controls operation of the mud pump <b>126</b>, thereby controlling a mud flow rate through the drill string <b>102</b>.</p><p id="p-0015" num="0014">The drill string <b>102</b> includes a bottomhole assembly <b>130</b> (BHA) at downhole location. The bottomhole assembly <b>130</b> performs various downhole operations, such as measuring one or more parameters of interest, for example by fluid testing, formation testing, etc. The bottomhole assembly <b>130</b> includes a pulser <b>132</b> that is part of a mud pulser telemetry system. The pulser <b>132</b> includes a passageway for fluid to flow through and a valve operable to open and close the passageway. The valve can be operated to obstruct the passageway, either fully or partially, to reduce or interrupt the flow of fluid through the passageway, thereby generating a pressure pulse in the fluid.</p><p id="p-0016" num="0015">A sensor <b>134</b> of the mud pulse telemetry system can be disposed in the inner bore of the drill string <b>102</b> at the surface location <b>110</b>. Additionally, or alternatively, a sensor <b>136</b> can be disposed in the return line <b>124</b>. The sensor <b>134</b> and/or the sensor <b>136</b> can be an acoustic sensor or a pressure sensor in various embodiments and are used to measure the pressure pulse generated in the mud by the pulser <b>132</b>.</p><p id="p-0017" num="0016">In order to communicate data from downhole to the surface location <b>110</b>, the pulser <b>132</b> is activated to generate a pressure pulse in the mud traveling through the drill string <b>102</b>. In general, activating the pulser <b>132</b> generates a positive pressure pulse and a negative pressure pulse. The negative pressure pulse travels down hole from the pulser <b>132</b> through the inner bore <b>112</b>, passes out of the drill string <b>102</b> via the drill bit <b>108</b> and travels uphole through the annulus <b>114</b> to be detected at sensor <b>136</b>. The positive pressure pulse travels uphole through the inner bore <b>112</b> of the drill string <b>102</b> and is detected at the sensor <b>134</b>. Sensor <b>134</b> and sensor <b>136</b> are in communication with control system <b>140</b> and measurements of the pressure pulse can be sent form the sensor <b>134</b> and/or sensor <b>136</b> to the control system <b>140</b>. Using this method various temporal patterns of pressure pulses can be generated at the pulser <b>132</b> and interpreted at the control system <b>140</b> in order to communicate data to the surface location <b>110</b>.</p><p id="p-0018" num="0017">The strength of the pulse when it is received at the uphole sensors is based on the magnitude of the pressure pulse, also referred to as the signal strength, generated by the pulser <b>132</b> but also on various mud properties. The signal strength itself is affected by mud properties such as a flow rate of the mud and a mud density. Various operating parameters of the pulser <b>132</b> such as, but not limited to, the degree to which the valve closes the passageway and the speed of the valve, can be controlled or adjusted in order to control or adjust the strength or intensity of the pressure pulse generated by the pulser <b>132</b> such as a parallel connection or a combination of a parallel and a serial connection.</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>2</b></figref> shows a schematic representation of a downhole pulser system <b>200</b> for operating the pulser <b>132</b>. The downhole pulser system <b>200</b> includes the pulser <b>132</b>, a downhole rotor <b>202</b>, such as a motor or a turbine having a part that rotates relative to the drill string <b>102</b> in response to the flow of the drilling mud <b>118</b> through the downhole rotor, an alternator <b>204</b> that converts a mechanical rotation at the downhole rotor <b>202</b> into an electrical current for powering the pulser <b>132</b> and other components of the bottomhole assembly <b>130</b>, an electrical load <b>206</b> (also referred to as electrical resistance), and the pulser <b>132</b>. The electrical load <b>206</b> is shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref> as being in series between the alternator <b>204</b> and the pulser <b>132</b>. However, other wiring configurations of the electrical load <b>206</b>, the alternator <b>204</b> and the pulser <b>132</b> are possible in alternate embodiments.</p><p id="p-0020" num="0019">In various embodiments, the electrical load <b>206</b> is a resistive element that can be switched into and out of the circuit between the alternator <b>204</b> and the pulser <b>132</b>. The presence of the electrical load <b>206</b> causes a mechanical resistance to rotation at the alternator, which causes a braking torque (also referred to herein as brake torque) to be applied, via the alternator <b>204</b>, at the downhole rotor <b>202</b>, thereby activating a brake to reduce a downhole rotor speed. The electrical load <b>206</b> can therefore be used as a brake device to apply a selected braking torque at the downhole rotor <b>202</b>. As discussed herein, the downhole rotor <b>202</b> is in a first state or a substantially unloaded state when the electrical load <b>206</b> is not present within the circuit. The downhole rotor <b>202</b> is placed into a second state or a loaded state when the electrical load <b>206</b> is introduced into the circuit, causing a brake torque to be applied to the downhole rotor. Alternatively, the first and second state can be selected by applying a brake at a first (low) load and at a second (high) load, causing the first state and the second state to represent two defined loading states and thus two defined braking states of the downhole rotor. In an alternate embodiment, more than a first and second state can be selected, such as a third state, a fourth state, etc.</p><p id="p-0021" num="0000">The magnitude of the resistance provided by the resistive element can be adjusted or controlled to control the amount of braking torque applied to the downhole rotor <b>202</b>. In one embodiment, a transistor, such as a pulse width modulated transistor can be used to control the magnitude of the electrical load <b>206</b> on the alternator <b>204</b>. In another embodiment, the phase of the alternator <b>204</b> can be altered or shortened to create the brake torque. In various embodiments, the electrical load <b>206</b> can be any electronic device being used downhole, including the pulser <b>132</b>.</p><p id="p-0022" num="0020">A downhole processor <b>208</b> is in communication with the electrical load <b>206</b> and the pulser <b>132</b>. The downhole processor <b>208</b> can send signals to the pulser <b>132</b> to generate a pulse and to adjust an operating parameter of the pulser <b>132</b> (e.g., an amount of valve closure, a valve speed, etc.) to achieve a selected signal strength for the resulting pressure pulse. The downhole processor <b>208</b> can also control a magnitude of the electrical resistance at the electrical load <b>206</b>, thereby controlling a magnitude of a braking torque at the downhole rotor <b>202</b>. The speed of the downhole rotor <b>202</b> is related to the electrical torque applied at the alternator <b>204</b>. In general, the higher the braking torque, the lower the speed (also known as rotational velocity, e.g., revolutions per minute or rpm) of the downhole rotor. Therefore, the braking torque can be controlled to control the rotational velocity. In an embodiment, the downhole processor <b>208</b> reduces the rotational velocity to obtain a selected downhole rotor speed based on a relation discussed below with respect to <figref idref="DRAWINGS">FIG. <b>3</b></figref>.</p><p id="p-0023" num="0021">An electrical sensor <b>212</b> measures an electrical resistance at the electrical load <b>206</b>. A rotation sensor <b>214</b> measures a rotation rate or downhole rotor speed of the downhole rotor <b>202</b>. Additional sensors (not shown) can be used to measure operating parameter of the pulser system <b>200</b>. These sensor measurements can be sent to the downhole processor <b>208</b> to enable the downhole processor <b>208</b> to obtain measurements and perform the methods disclosed herein.</p><p id="p-0024" num="0022">In an alternate embodiment, the downhole pulser system <b>200</b> includes a mechanical brake <b>216</b> that can be used as the brake device. The brake can be a friction brake, a viscous brake, an eddy current brake, or other suitable mechanism to generate a braking moment. The mechanical brake <b>216</b> can be activated by the downhole processor <b>208</b> to apply a mechanical brake torque to the downhole rotor <b>202</b>. The mechanical brake can be used to switch between one or more levels of brake torque and thus decelerate the downhole rotor to a reduced speed level. In case of an eddy current brake, the brake may be switched between one or more levels, by switching between one or more resistors through which the eddy current that is generated by the movement of the rotating downhole rotor flows through. Sensors (not shown) on the mechanical brake <b>216</b> can measure the braking torque and send this data to the downhole processor <b>208</b>. Sensors to measure the braking torque may include strain gauges, or force measurement devices including spring elements or other elastically deformable elements. In case of an eddy current brake, the sensor may be a current sensor or magnetic field sensor that is sensitive to the eddy current that is generated by the rotation of the downhole rotor. Alternatively, or in addition, alternator <b>204</b> in conjunction with electrical load <b>206</b> can be used to determine the braking torque by measuring one or more of current through electrical load <b>206</b>, voltage drop at electrical load <b>206</b>, and the rotating speed of alternator <b>204</b>. From the rotating speed of alternator <b>204</b>, the rotor speed of the downhole rotor <b>202</b> can be determined.</p><p id="p-0025" num="0023">The signal strength of a pressure pulse recorded at sensors <b>134</b> and <b>136</b> is dependent on various mud characteristics, such as mud flow rate and mud density at the pulser <b>132</b>, as well as operating parameters of the pulser, such as valve speed and the degree of passageway obstruction. The pulse pressure at a selected valve setting (obstruction) is related approximately linearly to the mud density and quadratically to the mud flow rate. The mud flow rate and the mud density can vary over various ranges while pulser <b>132</b> is in use, thereby affecting the signal strength over time. Thus, the downhole processor <b>208</b> monitors the mud characteristics and adjusts the operating parameters of the pulser <b>132</b> to maintain a selected signal strength base on the change in the mud characteristic, as discussed below.</p><p id="p-0026" num="0024">The downhole rotor speed in the first state (i.e., with no brake torque or a predefined low level of brake torque applied) is related to the mud flow rate. Therefore, the mud flow rate can be determined by measuring a rotation rate or downhole rotor speed of the downhole rotor <b>202</b> when the downhole rotor is in the first state.</p><p id="p-0027" num="0025">The mud density can be determined by measuring the downhole rotor speed with the downhole rotor <b>202</b> in both the first state and the second state (i.e., brake torque or a predefined high level of brake torque applied). The rotation sensor <b>214</b> measures a first downhole rotor speed with the downhole rotor in the first state, while the flow rate of the mud through the downhole rotor is constant. It is to be understood that a constant flow rate is considered to be established when the downhole rotor speed at the first state remains within a predetermined range for a selected duration. Once the first downhole rotor speed has been measured, a braking torque is applied to the downhole rotor <b>202</b> to place the downhole rotor in the second state. The braking torque can be a specified or predetermined braking torque. In the second state, rotation sensor <b>214</b> measures a second downhole rotor speed. Although the mud flow is generally not directly measurable when the downhole rotor is in the second state, it is assumed that the mud flow rate remains constant over the duration of the measurement while the downhole rotor is in the second state. The mud density is determined from the value of the braking torque and the difference between the first downhole rotor speed and the second downhole rotor speed, as will be discussed with respect to <figref idref="DRAWINGS">FIG. <b>3</b></figref>. This sequence can be repeated multiple times to obtain multiple measurements, which allows for a statistical analysis of the multiples in which a mean value as well as maximum and minimum values, variances, standard deviations, and the like can be determined. These multiple measurements can be used to derive a more precise measurement of mud density.</p><p id="p-0028" num="0026">In order to verify that the flow rate does not change as the downhole rotor changes between the first and the second state, a verification measurement can be made of the downhole rotor speed after the second measurement, with the parameters of the downhole rotor returning to that of the first state. In a scenario in which the difference between the first downhole rotor speed measurement and the verification measurement exceeds a threshold, the flow rate is assumed to be not constant enough to obtain a precise measurement. In such a scenario, the measurements can be flagged, aborted and/or repeated. In various embodiments, a duration of a measurement can be relatively short. In one embodiment, a duration of a measurement when the downhole rotor is in one state can be about 0.1 seconds. In another embodiment, the duration for the measurement can be several seconds or minutes. In yet another embodiment, the downhole rotor speed and braking torque (sometimes also referred to as braking load or brake load) can be monitored continuously over the entire duration of a drilling operation. When the duration of the measurement is short (i.e., below about 1 second), the measurement of the second downhole rotor speed with the downhole rotor in the second state and the subsequent verification measurement can be obtained directly once the measurement of the downhole rotor in the first state has been made. Mud flow rates can be assumed to be constant unless the mud pump <b>126</b> has been turned on or shut down in a preselected time interval. A constant flow rate is considered to be established when the downhole rotor speed at the first state remains within a predetermined range for a selected duration. Even when the mud flow rate is not fully constant over an extended period of time, one can still derive valid measurements by alternating the duration of the measurement appropriate to the downhole rotor state. A typical range for a braking torque is between about 0.5 Nm and 20 Nm, depending on the size of the downhole rotor and the flow rate of the mud.</p><p id="p-0029" num="0027">Once the mud density and flow rate have been determined, an operating parameter of the pulser <b>132</b> can be adjusted to provide a suitable signal strength based on the mud density and the flow rate. In various embodiments, the signal strength can be determined using an equation or stored values (such as a lookup table between or of signal strength mud density and mud flow rate, respectively).</p><p id="p-0030" num="0028">In another embodiment, the mud density measurement can be transmitted to the surface (e.g. using the mud pulse telemetry device). Various models can be adjusted using the mud density to determine a downhole equivalent circulating density (ECD) or other critical parameters affecting the drilling process.</p><p id="p-0031" num="0029">In another example, the determined mud density can be used to adjust and correct an acoustic measurement such as used for formation evaluation, for example. The speed of sound is an illustrative parameter of the mud which is affected by the mud density. Thus, knowledge of the mud density can be used to correct acoustic measurements that rely on the speed of sound. Similar corrections can be made using other mud parameters that affect acoustic measurements and which are affected by mud density. Other examples where acoustic properties are affected by mud density include acoustic telemetry.</p><p id="p-0032" num="0030"><figref idref="DRAWINGS">FIG. <b>3</b></figref> shows a graph <b>300</b> illustrating a relation between downhole rotor speed and mud flow rate through the downhole rotor <b>202</b> at different mud densities. <figref idref="DRAWINGS">FIG. <b>3</b></figref> is created for a downhole rotor <b>202</b> that is part of a turbine system including the downhole rotor. Flow rate is shown along the abscissa in liters per minute (1 pm) and turbine speed is shown along the ordinate axis as rotational velocity in revolutions per minute (rpm). For illustrative purposes, six performance lines show the relation between turbine speed and flow rate at four different densities and three different braking torques. The turbine speed refers to a rotation rate of the part of the turbine <b>202</b> that rotates in response to flow of mud through the turbine. As evident from the graph <b>300</b>, turbine speed is related to the mud flow rate, for a given mud density and braking torque. For example, in graph <b>300</b>, turbine speed is mostly linearly related to the mud flow rate, for a given mud density. Those skilled in the art will appreciate that the linear function may be an approximation and other functions may be suited to more accurately describe the relationship between turbine speed and mud flow rate. For example, the relationship between turbine speed and mud flow rate may be more accurately approximated by a higher degree polynomial (such as a polynomial of 2<sup>nd </sup>degree, 3<sup>rd </sup>degree etc.), a polynomial with negative, rational or irrational exponents, or an exponential function or any combination thereof. These performance lines can be determined by performing tests in a laboratory prior to deployment of, or independently of use of, the pulser <b>132</b> in the wellbore. Alternatively, they can be calculated by an analytic or numeric algorithm. The performance lines can be stored as values in a lookup table or as functional parameters for a functional relationship, for example in a database <b>210</b> or any kind of memory accessible by the downhole processor <b>208</b>. For example, the measured values can be interpolated by one or more interpolation functions, such as a linear function, a higher degree polynomial (such as a polynomial of 2<sup>nd </sup>degree, 3<sup>rd </sup>degree etc.), a polynomial with negative, rational or irrational exponents, or an exponential function or any combination thereof (for example, a piecewise interpolation).</p><p id="p-0033" num="0031">Performance line <b>302</b> shows the relation between turbine speed and flow rate for a turbine having no (or relatively low) brake load applied. For example, performance line <b>302</b> may show the relation between turbine speed and flow rate for a turbine when no active brake is activated but the braking torque is only caused by the internal friction of the turbine and/or parts rotated by the turbine, such as alternator <b>204</b>. In the case of no or relatively low brake load applied, the rotation rate of the turbine will reside along performance line <b>302</b> for any mud density. Performance lines <b>304</b>, <b>306</b>, <b>308</b> show the relation between turbine speed and flow rate when a first specified (i.e., known and constant) brake torque is applied to the turbine at different mud densities. Line <b>304</b> refers to a performance line when the density of the mud is a high density (e.g., 2 kilogram per liter) and when the first specified brake torque is applied to the turbine. Performance line <b>306</b> shows the relation between turbine speed and flow rate when the specified brake torque is applied to the turbine and the density of the mud is a medium density (e.g. 1.5 kilograms per liter). Performance line <b>308</b> shows the relation between turbine speed and flow rate when the specified brake torque is applied to the turbine and the density of the mud is a low density (e.g., 1 kilograms per liter). The turbine speed achieved by applying the specified brake load is measured and used to identify a performance line and therefore the mud density.</p><p id="p-0034" num="0032">As an example, turbine <b>202</b> is operated with no load at a no load rotation rate at a constant no load flow rate, as shown at point <b>310</b> along performance line <b>302</b>. With the specified first braking torque applied, the first rotation rate is determined (point <b>312</b> along performance line <b>304</b>), then the density can be determined as a first density value because the performance point falls on line <b>304</b>. If, with the same first braking torque applied, the first rotation rate is lower (point <b>314</b> along performance line <b>308</b>), then the density can be determined as a lower first density value.</p><p id="p-0035" num="0033">Performance lines <b>334</b>, <b>336</b>, <b>338</b> show the relation between turbine speed and flow rate when a second specified (i.e., known and constant) brake torque is applied to the turbine at different mud densities. In graph <b>300</b>, the second specified brake torque is higher than the first specified brake torque. Line <b>334</b> refers to a performance line when the density of the mud is a high density (e.g., 2 kilogram per liter) and when the second specified brake torque is applied to the turbine. Performance line <b>336</b> shows the relation between turbine speed and flow rate when the second specified brake torque is applied to the turbine and the density of the mud is a medium density (e.g. 1.5 kilograms per liter). Performance line <b>338</b> shows the relation between turbine speed and flow rate when the second specified brake torque is applied to the turbine and the density of the mud is a low density (e.g., 1 kilograms per liter). The turbine speed achieved by applying the second specified brake load is measured and used to identify a performance line and therefore the mud density. In another embodiment, the mud density can be determined by specifying the second turbine speed for the turbine when the second specified brake load is applied and determining the second braking torque that achieves this specified second turbine speed in order to determine mud density. In this embodiment, rotation sensor <b>214</b> measures a first turbine speed with the turbine <b>202</b> in the first state when the first specified brake load is applied. A second braking torque is applied to the turbine <b>202</b> until the second turbine speed is constant (i.e., the second state is achieved). The mud flow rate is kept constant between the first state and the second state, e.g., by verification measurements or other means as explained hereinabove. The electrical sensor <b>212</b> measures the electrical load that achieves the second turbine speed. The downhole processor <b>208</b> determines the braking torque and thus the corresponding mud density from the electrical load.</p><p id="p-0036" num="0034">While only seven performance lines are shown in graph <b>300</b> for illustrative purposes, it is understood that more performance lines can be determined during laboratory testing and stored in the database <b>210</b>. In addition, when a turbine speed does not directly lie on a performance line stored into the database <b>210</b>, interpolation using those performance lines that are stored in the database <b>210</b> can be used to determine the density.</p><p id="p-0037" num="0035">From <figref idref="DRAWINGS">FIG. <b>3</b></figref>, it is evident that the performance lines diverge at lower speeds leading to greater resolution at low flow rates. A first flow rate can be selected with a desired resolution for testing. While the pulser <b>132</b> is generally operable using mud flowing at a second flow rate which is a high mud flow rate, the mud flow rate can be reduced to a low flow rate to perform mud density testing. The pulser <b>132</b> can be paused and the mud flow rate can be reduced from the second flow rate to the first flow rate suitable for mud density testing at increased resolution. Once the mud density has been determined, the mud flow rate can be increased from the first flow rate to the second flow rate at which the pulser <b>132</b> operates.</p><p id="p-0038" num="0036"><figref idref="DRAWINGS">FIG. <b>4</b></figref> shows a flow chart illustrating a process <b>400</b> to measure a mud density or a mud density related parameter in accordance with one or more embodiments of this disclosure. Process <b>400</b> includes several steps illustrated by blocks in <figref idref="DRAWINGS">FIG. <b>4</b></figref>. In block <b>410</b>, a turbine is conveyed into a wellbore. While <figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrates process <b>400</b> using a turbine, it is clear that other systems includes a downhole rotor can be used as well without deviating from the scope of this disclosure. The turbine may be part of a drill string, such as the drill string shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>. The drill string is configured to drill a wellbore into a subsurface formation. The turbine may be connected to an alternator that generates electrical power when rotated by the turbine.</p><p id="p-0039" num="0037">In step <b>420</b>, drilling fluid or mud will be pumped through the turbine, the mud flow causing the turbine to rotate. The pump for pumping the mud through the turbine, may be located at the earth's surface or may be located downhole within the wellbore, such as a part of the drill string. In step <b>430</b>, a first braking torque may be applied to the turbine causing to the turbine to rotate at a lower rotational velocity than it would if no braking torque was applied. To apply the first braking torque, a brake may be operated, such as by rotating an alternator by the turbine thereby creating an electrical current and connecting an electrical resistance to the output of the alternator in a way that the electrical current will flow through the electrical resistance. The resistance may be preselected to create the desired braking torque to the turbine, for example by modeling or test measurements. The resistance values may then be used to determine the applied first braking torque. In an alternate embodiment, the first braking torque may be applied by a mechanical brake where rotating elements of the turbine are in frictional contact with braking elements that do not rotate or that rotate at different rotational velocity than the turbine. The force that is used to create the frictional contact between the rotating elements of the turbine and the braking elements may be preselected to create the desired braking torque to the turbine, for example by modeling or test measurements. In another alternate embodiment, the first braking torque may be applied by an eddy current brake. In yet another embodiment, the first braking torque may be applied by the internal friction of the turbine and/or the alternator that is operatively coupled to the turbine.</p><p id="p-0040" num="0038">Block <b>440</b> illustrates a step, where one or more constant turbine speed parameter thresholds are chosen or selected. Constant turbine speed parameter thresholds are threshold values of constant turbine speed parameters and may be used to determine or define if the turbine has achieved a constant turbine speed. Constant turbine speed parameters may include one or more of a waiting time (e.g., a waiting time after the mud pump started to operate), mud pump speed variation (e.g., statistical pump speed fluctuations, or systematic pump speed deviation, such as a bias or a trend of pump speed over time), and turbine speed variation (e.g., statistical turbine speed fluctuations, or systematic turbine speed deviation, such as a bias or a trend of turbine speed over time). Mud pump speed variations or turbine speed variations may be expressed as absolute variations or relative variations (e.g., relative to an average, such as a percentage of a speed variation relative to a speed average or the like). Typical examples for constant turbine speed parameter threshold values are a waiting time of 1 second or more after starting the mud pump (for example, 10 seconds or more), statistical turbine speed fluctuations of less than 20% of the highest measured value during a selected time interval (for example, 10% or less), or a systematic turbine speed variation (e.g., trend) of less than 10% within a selected time interval (for example, 5% or less). While <figref idref="DRAWINGS">FIG. <b>4</b></figref> shows steps <b>410</b>-<b>500</b> of process <b>400</b> in a consecutive way, those skilled in the art will understand that the order of one or more of steps <b>410</b>-<b>500</b> can be exchanged without deviating from the scope of this disclosure, if not stated otherwise. For example, while step <b>440</b> is shown between steps <b>430</b> and <b>450</b>, it is clear that preselecting the one or more constant turbine speed parameter threshold (step <b>440</b>) can occur at a different point of time, such as before applying the first braking torque (step <b>430</b>).</p><p id="p-0041" num="0039">In block <b>450</b>, one or more constant turbine speed parameter will be measured to determine if the turbine is at a constant speed. The one or more measured constant turbine speed parameters will be compared with the constant turbine speed parameter threshold values to determine if the turbine has achieved a constant rotational velocity. Once it has been defined that the turbine achieved a constant rotational velocity, a first mud flow rate and a first turbine speed is measured, in blocks <b>455</b> and <b>460</b>, respectively. Measuring the first mud flow rate can be done in several ways. For example, a turbine (such as turbine <b>202</b>) can be rotated by the mud flow (or a portion of the mud flow). When the turbine is operatively connected to an alternator (such as alternator <b>204</b>) that has an output connection (not shown) and is configured to output power such as an output current and/or an output voltage, the output current and/or the output voltage can be measured and used to determine the first mud flow rate. The first mud flow rate can also be determined by other flow meters, such as an obstruction flowmeter, electromagnetic flowmeters, or ultrasonic flowmeters. In one embodiment, the first mud flow rate is measured at the surface location <b>110</b> and the measured first mud flow rate is communicated downhole to downhole processor <b>208</b> for further processing. The measured first mud flow rate and the first turbine speed value will be stored to a memory (for example, the data base <b>210</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref>) or a buffer of a controller or processor, such as the downhole processor <b>208</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref>.</p><p id="p-0042" num="0040">In step <b>465</b>, the first braking torque is measured as described above. When the turbine is operatively connected to an alternator (such as alternator <b>204</b>) that has an output connection (not shown) and is configured to output power such as an output current and/or an output voltage, the output current and/or the output voltage can be measured and used to determine the first braking torque. Alternatively, if the first braking torque is applied by one or more preselected resistances, the resistance values can be used to determine the first braking torque. The determined first braking torque will be stored to a memory (for example, the data base <b>210</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref>) or a buffer of a controller or processor, such as the downhole processor <b>208</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref>.</p><p id="p-0043" num="0041">In step <b>470</b>, a second braking torque&#x2014;different than the first braking torque&#x2014;may be applied to the turbine causing to the turbine to rotate at a different rotational velocity than it would if no braking torque or the first braking torque was applied. To apply the second braking torque, a brake may be operated, such as by rotating an alternator by the turbine thereby creating an electrical current and connecting an electrical resistance to the output of the alternator in a way that the electrical current will flow through the electrical resistance. The resistance may be preselected to create the desired braking torque to the turbine, for example by modeling or test measurements. The resistance values may then be used to determine the applied second braking torque. In an alternate embodiment, the second braking torque may be applied by a mechanical brake where rotating elements of the turbine are in frictional contact with braking elements that do not rotate or that rotate at different rotational velocity than the turbine. The force that is used to create the frictional contact between the rotating elements of the turbine and the braking elements may be preselected to create the desired braking torque to the turbine, for example by modeling or test measurements. In another alternate embodiment, the second braking torque may be applied by an eddy current brake. In yet another embodiment, the second braking torque may be applied by the internal friction of the turbine and/or the alternator that is operatively coupled to the turbine.</p><p id="p-0044" num="0042">In block <b>480</b>, one or more constant turbine speed parameter will be measured to determine if the turbine is at a constant speed. The one or more measured constant turbine speed parameters will be compared with the constant turbine speed parameter threshold values to determine if the turbine has achieved a constant rotational velocity. Once it has been defined that the turbine achieved a constant rotational velocity, a second mud flow rate and a second turbine speed is measured, in blocks <b>485</b> and <b>490</b>, respectively. Measuring the second mud flow rate can be done in several ways. For example, a turbine (such as turbine <b>202</b>) can be rotated by the mud flow (or a portion of the mud flow). When the turbine is operatively connected to an alternator (such as alternator <b>204</b>) that has an output connection (not shown) and is configured to output power such as an output current and/or an output voltage, the output current and/or the output voltage can be measured and used to determine the second mud flow rate. The second mud flow rate can also be determined by other flow meters, such as an obstruction flowmeter, electromagnetic flowmeters, or ultrasonic flowmeters. In one embodiment, the second mud flow rate is measured at the surface location <b>110</b> and the measured second mud flow rate is communicated downhole to downhole processor <b>208</b> for further processing. The measured second mud flow rate and the second turbine speed value will be stored to a memory (for example, the data base <b>210</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref>) or a buffer of a controller or processor, such as the downhole processor <b>208</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref>. In an alternate embodiment, the second mud flow rate will not be measured but assumed to be equal to the measured first mud flow rate.</p><p id="p-0045" num="0043">In step <b>495</b>, the second braking torque is measured as described above. When the turbine is operatively connected to an alternator (such as alternator <b>204</b>) that has an output connection (not shown) and is configured to output power such as an output current and/or an output voltage, the output current and/or the output voltage can be measured and used to determine the second braking torque. Alternatively, if the second braking torque is applied by one or more preselected resistances, the resistance values can be used to determine the second braking torque. The determined second braking torque will be stored to a memory (for example, the data base <b>210</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref>) or a buffer of a controller or processor, such as the downhole processor <b>208</b> of <figref idref="DRAWINGS">FIG. <b>2</b></figref>.</p><p id="p-0046" num="0044">In block <b>500</b>, the first and second turbine speed data will be used to determine the mud density or a mud density related parameter. The measured values will be used to determine the mud density or the mud density related parameter with the values or the interpolation of the values that are illustrated in chart <b>300</b> of <figref idref="DRAWINGS">FIG. <b>3</b></figref>. In an alternate embodiment, the measured values will be used to determine the mud density or the mud density related parameter with the algorithm that is used to create the values or the interpolation of the values that are illustrated in the chart of <figref idref="DRAWINGS">FIG. <b>3</b></figref>. In yet another alternate embodiment, it may be helpful to calculate a relationship between the first and second turbine speed, such as a ratio or a difference or the like of the first and second turbine speed and calculate the mud density from the calculated relationship between the first and second turbine speed. Similarly, it may be helpful to calculate a relationship between the first and second flow rate, such as a ratio or a difference or the like of the first and second flow rate and calculate the mud density from the calculated relationship between the first and second flow rate.</p><p id="p-0047" num="0045">Those skilled in the art will understand that one or more steps illustrated in <figref idref="DRAWINGS">FIG. <b>4</b></figref> are optional depending on how the mud density or the mud density related parameter is determined. For example, in one embodiment, only one of the first or second braking torque, only one of the first and the second flow rate, and only one of the first and the second turbine speed is used to directly calculate the mud density or the mud density related parameter. For example, by using only one measured braking torque, the corresponding flow rate, and the corresponding turbine speed, the corresponding point in chart <b>300</b> can be directly identified and the corresponding mud density can be read or calculated.</p><p id="p-0048" num="0046">In one embodiment, the first flow rate and the second flow rate is assumed to be constant. That is, the difference between the first and the second flow rate is assumed to be small enough so that it can be neglected when determining the mud density with a desired accuracy. In this case, only the first and second braking torque, and the first and second turbine speed can be used to determine the mud density or the mud density related parameter.</p><p id="p-0049" num="0047">In one embodiment, in step <b>430</b>, the first braking torque is relatively low so that the relationship between mud flow rate and turbine speed does not depend on the mud density (or that the dependence on mud density is neglectable within the context of this disclosure). For example, a relatively low first braking torque would be created if no active brake is applied to the turbine and/or the alternator, but the braking torque is only applied by the internal friction of the turbine and/or the alternator. In an alternate embodiment, the relatively low first braking torque is created by applying an active brake to the turbine and/or the alternator but it is significantly lower than the second braking torque. As shown by performance line <b>302</b> in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, in this case the relationship between flow rate and turbine speed would not depend on the mud density. In this case, step <b>455</b>, determining the first flow rate and step <b>460</b>, measuring the first turbine speed can be done by using performance line <b>302</b> in <figref idref="DRAWINGS">FIG. <b>3</b></figref>. For example, by measuring the first turbine speed (step <b>460</b>), the first flow rate can be determined by using the performance line <b>302</b> in <figref idref="DRAWINGS">FIG. <b>3</b></figref>. Similarly, by measuring the first flow rate (step <b>455</b>), the first turbine speed can be determined by using the performance line <b>302</b> in <figref idref="DRAWINGS">FIG. <b>3</b></figref>.</p><p id="p-0050" num="0048">Set forth below are some embodiments of the foregoing disclosure:</p><p id="p-0051" num="0049">Embodiment 1. A method of determining a density of a drilling fluid in a wellbore. A drill string is conveyed into the wellbore, the drill string including a downhole rotor. The drilling fluid is flowed through the drill string in the wellbore causing the downhole rotor to rotate relative to the drill string. A first brake torque is applied to the downhole rotor to place the downhole rotor in a first state. The applied first brake torque is determined. A first downhole rotor speed of the downhole rotor having the drilling fluid flowing therethrough is measured with the downhole rotor in the first state. A density of the drilling fluid is determined from the measured first downhole rotor speed, and the determined applied first brake torque.</p><p id="p-0052" num="0050">Embodiment 2. The method any prior embodiment, further including measuring a first flow rate of the drilling fluid flow with the downhole rotor in the first state and using the measured first flow rate to determine the density of the drilling fluid.</p><p id="p-0053" num="0051">Embodiment 3. The method of any prior embodiment, further including applying a second brake torque to the downhole rotor to place the downhole rotor in a second state, measuring a second downhole rotor speed of the downhole rotor having the drilling fluid flowing therethrough with the downhole rotor in the second state, and determining the density of the drilling fluid from the measured second downhole rotor speed.</p><p id="p-0054" num="0052">Embodiment 4. The method of any prior embodiment, wherein the dependency of the second downhole rotor speed on the mud density is neglected when determining the density of the drilling fluid.</p><p id="p-0055" num="0053">Embodiment 5. The method of any prior embodiment, wherein the measured second downhole rotor speed is used to determine the first flow rate of the drilling fluid flow with the downhole rotor in the first state.</p><p id="p-0056" num="0054">Embodiment 6. The method of any prior embodiment, further including determining the applied second brake torque and determining the density of the drilling fluid from the determined applied second brake torque.</p><p id="p-0057" num="0055">Embodiment 7. The method of any prior embodiment, wherein the drill string further includes an alternator operatively connected to the downhole rotor, the alternator including an output connection, wherein the first brake torque is applied to the downhole rotor by connecting an electrical resistance to the output connection.</p><p id="p-0058" num="0056">Embodiment 8. The method of any prior embodiment, wherein the first downhole rotor speed is measured by measuring at least one of an output voltage of the alternator and an output current of the alternator.</p><p id="p-0059" num="0057">Embodiment 9. The method of any prior embodiment, wherein the first brake torque is measured by measuring at least one of an output voltage of the alternator and an output current of the alternator.</p><p id="p-0060" num="0058">Embodiment 10. The method of claim <b>1</b>, wherein the drill string further comprises an alternator operatively connected to the downhole rotor and configured to power a pulser system that provides communication from the drill string to a location at the earth's system, further comprising using the determined density to adjust an operating parameter of the pulser system.</p><p id="p-0061" num="0059">Embodiment 11. A system for determining a density of a drilling fluid in a wellbore. The system includes a drill string in the wellbore, the drill string including a downhole rotor, a drilling fluid flowing through the drill string in the wellbore causing the downhole rotor to rotate relative to the drill string, a brake configured to apply a first brake torque to the downhole rotor to place the downhole rotor in a first state, a torque measurement system configured to determine the applied first brake torque, a rotor speed measurement system configured to measure a first downhole rotor speed of the downhole rotor having the drilling fluid flowing therethrough with the downhole rotor in the first state, and a processor configured to determine a density of the drilling fluid from the measured first downhole rotor speed, and the determined applied first brake torque.</p><p id="p-0062" num="0060">Embodiment 12. The system of any prior embodiment, further including a flow rate measurement system configured to measure a first flow rate of the drilling fluid flow with the downhole rotor in the first state, wherein the processor is configured to use the measured first flow rate to determine the density of the drilling fluid</p><p id="p-0063" num="0061">Embodiment 13. The system of any prior embodiment, wherein the brake is configured to apply a second brake torque to the downhole rotor to place the downhole rotor in a second state, wherein the rotor speed measurement system is configured to measure a second downhole rotor speed of the downhole rotor having the drilling fluid flowing therethrough with the downhole rotor in the second state, and wherein the processor is configured to determine the density of the drilling fluid from the measured second downhole rotor speed.</p><p id="p-0064" num="0062">Embodiment 14. The system of any prior embodiment, wherein the processor is configured to neglect the dependency of the second downhole rotor speed on the mud density when determining the density of the drilling fluid.</p><p id="p-0065" num="0063">Embodiment 15. The system of any prior embodiment, wherein the processor is configured to use the measured second downhole rotor speed to determine the first flow rate of the drilling fluid flow with the downhole rotor in the first state.</p><p id="p-0066" num="0064">Embodiment 16. The system of any prior embodiment, wherein the processor is configured to determine the applied second brake torque and to determine the density of the drilling fluid from the determined applied second brake torque.</p><p id="p-0067" num="0065">Embodiment 17. The system of any prior embodiment, wherein the drill string further includes an alternator operatively connected to the downhole rotor, the alternator including an output connection, and wherein the brake includes an electrical resistance and wherein the brake applies the first brake torque to the downhole rotor by connecting the electrical resistance to the output connection.</p><p id="p-0068" num="0066">Embodiment 18. The system of any prior embodiment, wherein the rotor speed measurement system is configured to measure the first downhole rotor speed by measuring at least one of an output voltage of the alternator and an output current of the alternator.</p><p id="p-0069" num="0067">Embodiment 19. The system of any prior embodiment, wherein the torque measurement system is configured to measure the first brake torque by measuring at least one of an output voltage of the alternator and an output current of the alternator.</p><p id="p-0070" num="0068">Embodiment 20. The system of any prior embodiment, wherein the drill string further comprises an alternator operatively connected to the downhole rotor and a pulser system configured to provide communication from the drill string to a location at the earth's surface, wherein the processor is configured to use the determined density to adjust an operating parameter of the pulser system.</p><p id="p-0071" num="0069">The use of the terms &#x201c;a&#x201d; and &#x201c;an&#x201d; and &#x201c;the&#x201d; and similar referents in the context of describing the invention (especially in the context of the following claims) are to be construed to cover both the singular and the plural, unless otherwise indicated herein or clearly contradicted by context. Further, it should be noted that the terms &#x201c;first,&#x201d; &#x201c;second,&#x201d; and the like herein do not denote any order, quantity, or importance, but rather are used to distinguish one element from another. The modifier &#x201c;about&#x201d; used in connection with a quantity is inclusive of the stated value and has the meaning dictated by the context (e.g., it includes the degree of error associated with measurement of the particular quantity).</p><p id="p-0072" num="0070">The teachings of the present disclosure may be used in a variety of well operations. These operations may involve using one or more treatment agents to treat a formation, the fluids resident in a formation, a wellbore, and/or equipment in the wellbore, such as production tubing. The treatment agents may be in the form of liquids, gases, solids, semi-solids, and mixtures thereof. Illustrative treatment agents include, but are not limited to, fracturing fluids, acids, steam, water, brine, anti-corrosion agents, cement, permeability modifiers, drilling muds, emulsifiers, demulsifiers, tracers, flow improvers etc. Illustrative well operations include, but are not limited to, hydraulic fracturing, stimulation, tracer injection, cleaning, acidizing, steam injection, water flooding, cementing, etc.</p><p id="p-0073" num="0071">While the invention has been described with reference to an exemplary embodiment or embodiments, it will be understood by those skilled in the art that various changes may be made and equivalents may be substituted for elements thereof without departing from the scope of the invention. In addition, many modifications may be made to adapt a particular situation or material to the teachings of the invention without departing from the essential scope thereof. Therefore, it is intended that the invention not be limited to the particular embodiment disclosed as the best mode contemplated for carrying out this invention, but that the invention will include all embodiments falling within the scope of the claims. Also, in the drawings and the description, there have been disclosed exemplary embodiments of the invention and, although specific terms may have been employed, they are unless otherwise stated used in a generic and descriptive sense only and not for purposes of limitation, the scope of the invention therefore not being so limited.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method of determining a density of a drilling fluid in a wellbore, comprising:<claim-text>conveying a drill string into the wellbore, the drill string comprising a downhole rotor;</claim-text><claim-text>flowing the drilling fluid through the drill string in the wellbore causing the downhole rotor to rotate relative to the drill string;</claim-text><claim-text>applying a first brake torque to the downhole rotor to place the downhole rotor in a first state;</claim-text><claim-text>determining the applied first brake torque;</claim-text><claim-text>measuring a first downhole rotor speed of the downhole rotor having the drilling fluid flowing therethrough with the downhole rotor in the first state; and</claim-text><claim-text>determining a density of the drilling fluid from the measured first downhole rotor speed, and the determined applied first brake torque.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising measuring a first flow rate of the drilling fluid flow with the downhole rotor in the first state and using the measured first flow rate to determine the density of the drilling fluid.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising applying a second brake torque to the downhole rotor to place the downhole rotor in a second state;<claim-text>measuring a second downhole rotor speed of the downhole rotor having the drilling fluid flowing therethrough with the downhole rotor in the second state; and</claim-text><claim-text>determining the density of the drilling fluid from the measured second downhole rotor speed.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the dependency of the second downhole rotor speed on the mud density is neglected when determining the density of the drilling fluid.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the measured second downhole rotor speed is used to determine the first flow rate of the drilling fluid flow with the downhole rotor in the first state.</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising determining the applied second brake torque and determining the density of the drilling fluid from the determined applied second brake torque.</claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the drill string further comprises an alternator operatively connected to the downhole rotor, the alternator comprising an output connection, wherein the first brake torque is applied to the downhole rotor by connecting an electrical resistance to the output connection.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The method of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the first downhole rotor speed is measured by measuring at least one of an output voltage of the alternator and an output current of the alternator.</claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The method of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the first brake torque is measured by measuring at least one of an output voltage of the alternator and an output current of the alternator</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the drill string further comprises an alternator operatively connected to the downhole rotor and configured to power a pulser system that provides communication from the drill string to a location at the earth's system, further comprising using the determined density to adjust an operating parameter of the pulser system.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. A system for determining a density of a drilling fluid in a wellbore, comprising:<claim-text>a drill string in the wellbore, the drill string comprising a downhole rotor;</claim-text><claim-text>a drilling fluid flowing through the drill string in the wellbore causing the downhole rotor to rotate relative to the drill string;</claim-text><claim-text>a brake configured to apply a first brake torque to the downhole rotor to place the downhole rotor in a first state;</claim-text><claim-text>a torque measurement system configured to determine the applied first brake torque;</claim-text><claim-text>a rotor speed measurement system configured to measure a first downhole rotor speed of the downhole rotor having the drilling fluid flowing therethrough with the downhole rotor in the first state; and</claim-text><claim-text>a processor configured to determine a density of the drilling fluid from the measured first downhole rotor speed, and the determined applied first brake torque.</claim-text></claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, further comprising a flow rate measurement system configured to measure a first flow rate of the drilling fluid flow with the downhole rotor in the first state, wherein the processor is configured to use the measured first flow rate to determine the density of the drilling fluid.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the brake is configured to apply a second brake torque to the downhole rotor to place the downhole rotor in a second state;<claim-text>wherein the rotor speed measurement system is configured to measure a second downhole rotor speed of the downhole rotor having the drilling fluid flowing therethrough with the downhole rotor in the second state;</claim-text><claim-text>and wherein the processor is configured to determine the density of the drilling fluid from the measured second downhole rotor speed.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The system of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the processor is configured to neglect the dependency of the second downhole rotor speed on the mud density when determining the density of the drilling fluid.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The system of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the processor is configured to use the measured second downhole rotor speed to determine the first flow rate of the drilling fluid flow with the downhole rotor in the first state.</claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The system of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the processor is configured to determine the applied second brake torque and to determine the density of the drilling fluid from the determined applied second brake torque.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the drill string further comprises an alternator operatively connected to the downhole rotor, the alternator comprising an output connection, and wherein the brake comprises an electrical resistance and wherein the brake applies the first brake torque to the downhole rotor by connecting the electrical resistance to the output connection.</claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. The system of <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the rotor speed measurement system is configured to measure the first downhole rotor speed by measuring at least one of an output voltage of the alternator and an output current of the alternator.</claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. The system of <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the torque measurement system is configured to measure the first brake torque by measuring at least one of an output voltage of the alternator and an output current of the alternator.</claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the drill string further comprises an alternator operatively connected to the downhole rotor and a pulser system configured to provide communication from the drill string to a location at the earth's surface, wherein the processor is configured to use the determined density to adjust an operating parameter of the pulser system.</claim-text></claim></claims></us-patent-application>