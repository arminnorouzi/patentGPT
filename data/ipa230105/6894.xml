<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230006895A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230006895</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17782081</doc-number><date>20200116</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="regional"><country>EP</country><doc-number>19383072.6</doc-number><date>20191203</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>L</subclass><main-group>41</main-group><subgroup>50</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>L</subclass><main-group>67</main-group><subgroup>51</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>41</main-group><subgroup>5058</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20220501</date></cpc-version-indicator><section>H</section><class>04</class><subclass>L</subclass><main-group>67</main-group><subgroup>51</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">Discovery of a Service-Providing Network Function</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Telefonaktiebolaget LM Ericsson (publ)</orgname><address><city>Stockholm</city><country>SE</country></address></addressbook><residence><country>SE</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>Martinez de la Cruz</last-name><first-name>Pablo</first-name><address><city>Madrid</city><country>ES</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>Garcia Martin</last-name><first-name>Miguel Angel</first-name><address><city>Madrid</city><country>ES</country></address></addressbook></inventor></inventors></us-parties><pct-or-regional-filing-data><document-id><country>WO</country><doc-number>PCT/EP2020/051004</doc-number><date>20200116</date></document-id><us-371c12-date><date>20220602</date></us-371c12-date></pct-or-regional-filing-data></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">There is provided mechanisms for enabling discovery of a service-providing NF in a 3GPP communication network. A method is performed by a Network Repository Function. The method comprises registering locality information of service-providing NFs according to locality attribute of each service-providing NF. Each locality attribute comprises structured values of location information of its service-providing NF. The method comprises obtaining a request from a service-requesting NF for one of the service-providing NFs. The request specifies a preferred locality of the requested service-providing NF. The preferred locality indicates, in terms of structured values of location information, geographical location where the service-requesting NF is deployed. The method comprises identifying, out of the service-providing NFs, that service-providing NF which has a locality attribute that best matches the preferred locality, whereby the service-providing NF closest to the geographical location where the service-requesting NF is deployed is identified. The method comprises providing a response to the service-requesting NF. The response comprises the locality attribute of the identified service-providing NF, thereby enabling discovery of the service-providing NF.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="123.02mm" wi="158.67mm" file="US20230006895A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="144.70mm" wi="160.61mm" file="US20230006895A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="231.48mm" wi="123.87mm" file="US20230006895A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="244.69mm" wi="145.71mm" file="US20230006895A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="231.48mm" wi="123.87mm" file="US20230006895A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="231.48mm" wi="123.87mm" file="US20230006895A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="251.54mm" wi="158.83mm" file="US20230006895A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="250.27mm" wi="164.08mm" file="US20230006895A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="251.54mm" wi="163.83mm" file="US20230006895A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">TECHNICAL FIELD</heading><p id="p-0002" num="0001">Embodiments presented herein relate to methods, a Network Repository Function, a service-providing Network Function (NF), computer program, and a computer program product for enabling discovery of the service-providing NF in a third generation partnership project (3GPP) communication network. Further embodiments presented herein relate to a method, a service-requesting NF, a computer program, and a computer program product for discovery of the service-providing NF in the 3GPP communication network.</p><heading id="h-0002" level="1">BACKGROUND</heading><p id="p-0003" num="0002">The Core Network (CN) of the fifth generation (5G) telecommunication network comprises functional entities called Network Functions (NFs). System functionality is achieved by a set of NFs providing services to other authorized NFs to access their services. An NF service is one type of capability exposed by a NF Service Producer to other authorized NF service consumers, through a service-based interface (SBI). An NF service may support one or more NF service operation(s).</p><p id="p-0004" num="0003">Discovery of services produced by NFs of the 5G Core Network is supported by a Network Repository Function (NRF). To do so, the NRF maintains a profile of the NF instances and their supported services. The NRF accepts registration information of the NF producers and provides discovery information of NF instances to NF consumers.</p><p id="p-0005" num="0004">When an NF is instantiated, it registers, according to an NF service registration procedure, with the NRF the services that it is producing. Whenever any of the pieces of registration data is needed, or periodically, the NF produces might update its registration data with the NRF. One such piece of registration data is the so-called locality attribute, that is used to convey the approximate location where the NF is deployed. When an NF consumer, such as an Access and Mobility Management Function, needs to discover another NF, such a Session Management Function or a Unified Data Management function, or a particular service provided by another NF, the NF consumer invokes an NF service discovery procedure.</p><p id="p-0006" num="0005">When an NF consumer needs to discover another NF (i.e., an NF producer) or another NF service, the NF consumer invokes Nnrf_NFDiscovery services. Upon doing so, the NF consumer may include in the query Uniform Resource Identifier (URI) parameters that filter the results of the NF producer that it is trying to discover. One of such attributes is the preferred-locality, which according to 3GPP TS 29.510 clause 6.2.3.2.3.1 is a string that contains the preferred target NF producer locality. When present, the NRF shall prefer NF profiles of NF producers with a locality attribute that matches the requested preferred-locality. The NRF may return additional NF producers in the response not matching the preferred target NF locality, e.g. if no NF profile is found matching the preferred target NF locality. The NRF should set a lower priority for any additional NF producers in the response not matching the preferred target NF locality than those matching the preferred target NF locality.</p><p id="p-0007" num="0006">Thus, once an NF producer has registered its NFProfile with the NRF, including a given locality, for example, &#x201c;DC44&#x201d;, an NF consumer that tries to discover those services could include the preferred-locality filter in the NF Service discovery procedure, for example setting a value to &#x201c;DC44&#x201d;, so that the NRF would preferable return the address of NF producers or services deployed at such a locality.</p><p id="p-0008" num="0007">However, one issue with the existing locality attribute and its corresponding preferred-locality parameter is that it allows the NF consumer to discover a NF producer that is located in the same locality (e.g., same datacenter) where the NF consumer is deployed. However, if a NF producer is not available in the same locality where the NF consumer is deployed, the existing locality attribute and its corresponding preferred-locality parameter do not offer means for evaluating which of other available NF producer is the closest one to the geographical location where the NF consumer is deployed.</p><p id="p-0009" num="0008">Hence, there is still a need for improved discovery of NF producers in a 3GPP communication network.</p><heading id="h-0003" level="1">SUMMARY</heading><p id="p-0010" num="0009">An object of embodiments herein is to provide efficient discovery of NF producers in a 3GPP communication network.</p><p id="p-0011" num="0010">According to a first aspect there is presented a method for enabling discovery of a service-providing NF in a 3GPP communication network. The method is performed by a Network Repository Function. The method comprises registering locality information of service-providing NFs according to locality attribute of each service-providing NF. Each locality attribute comprises structured values of location information of its service-providing NF. The method comprises obtaining a request from a service-requesting NF for one of the service-providing NFs. The request specifies a preferred locality of the requested service-providing NF. The preferred locality indicates, in terms of structured values of location information, geographical location where the service-requesting NF is deployed. The method comprises identifying, out of the service-providing NFs, that service-providing NF which has a locality attribute that best matches the preferred locality, whereby the service-providing NF closest to the geographical location where the service-requesting NF is deployed is identified. The method comprises providing a response to the service-requesting NF. The response comprises the locality attribute of the identified service-providing NF, thereby enabling discovery of the service-providing NF.</p><p id="p-0012" num="0011">According to a second aspect there is presented a Network Repository Function for enabling discovery of a service-providing NF in a 3GPP communication network. The Network Repository Function comprises processing circuitry. The processing circuitry is configured to cause the Network Repository Function to register locality information of service-providing NFs according to locality attribute of each service-providing NF. Each locality attribute comprises structured values of location information of its service-providing NF. The processing circuitry is configured to cause the Network Repository Function to obtain a request from a service-requesting NF for one of the service-providing NFs. The request specifies a preferred locality of the requested service-providing NF. The preferred locality indicates, in terms of structured values of location information, geographical location where the service-requesting NF is deployed. The processing circuitry is configured to cause the Network Repository Function to identify, out of the service-providing NFs, that service-providing NF which has a locality attribute that best matches the preferred locality, whereby the service-providing NF closest to the geographical location where the service-requesting NF is deployed is identified. The processing circuitry is configured to cause the Network Repository Function to provide a response to the service-requesting NF. The response comprises the locality attribute of the identified service-providing NF, thereby enabling discovery of the service-providing NF.</p><p id="p-0013" num="0012">According to a third aspect there is presented a computer program for enabling discovery of a service-providing NF in a 3GPP communication network. The computer program comprises computer program code which, when run on processing circuitry of a Network Repository Function, causes the Network Repository Function to perform a method according to the first aspect.</p><p id="p-0014" num="0013">According to a fourth aspect there is presented a method for discovery of a service-providing NF in a 3GPP communication network. The method is performed by a service-requesting NF. The method comprises providing a request to a Network Repository Function for a service-providing NF. The request specifies a preferred locality of the requested service-providing NF. The preferred locality indicates, in terms of structured values of location information, geographical location where the service-requesting NF is deployed. The method comprises obtaining a response from the Network Repository Function. The response comprises the locality attribute of a service-providing NF as identified. The service-providing NF has a locality attribute that best matches the preferred locality, whereby the service-providing NF closest to the geographical location where the service-requesting NF is deployed is identified. The service-requesting NF thereby discovers the service-providing NF.</p><p id="p-0015" num="0014">According to a fifth aspect there is presented a service-requesting NF for discovery of a service-providing NF in a 3GPP communication network. The service-requesting NF comprises processing circuitry. The processing circuitry is configured to cause the service-requesting NF to provide a request to a Network Repository Function for a service-providing NF. The request specifies a preferred locality of the requested service-providing NF. The preferred locality indicates, in terms of structured values of location information, geographical location where the service-requesting NF is deployed. The processing circuitry is configured to cause the service-requesting NF to obtain a response from the Network Repository Function. The response comprises the locality attribute of a service-providing NF as identified. The service-providing NF has a locality attribute that best matches the preferred locality, whereby the service-providing NF closest to the geographical location where the service-requesting NF is deployed is identified. The service-requesting NF thereby discovers the service-providing NF.</p><p id="p-0016" num="0015">According to a sixth aspect there is presented a computer program for discovery of a service-providing NF in a 3GPP communication network <b>100</b>. The computer program comprises computer program code which, when run on processing circuitry of a service-requesting NF, causes the service-requesting NF to perform a method according to the fourth aspect.</p><p id="p-0017" num="0016">According to a seventh aspect there is presented a method for enabling discovery of a service-providing NF in a 3GPP communication network. The method is performed by the service-providing NF. The method comprises registering, with a Network Repository Function, locality information of the service-providing NF according to locality attribute of the service-providing NF. The locality attribute comprises structured values of location information of the service-providing NF, thereby enabling discovery of the service-providing NF.</p><p id="p-0018" num="0017">According to an eight aspect there is presented a service-providing NF for enabling discovery of the service-providing NF in a 3GPP communication network. The service-providing NF comprises processing circuitry. The processing circuitry is configured to cause the service-providing NF to register, with a Network Repository Function, locality information of the service-providing NF according to locality attribute of the service-providing NF. The locality attribute comprises structured values of location information of the service-providing NF, thereby enabling discovery of the service-providing NF.</p><p id="p-0019" num="0018">According to a tenth aspect there is presented a computer program for enabling discovery of a service-providing NF in a 3GPP communication network. The computer program comprises computer program code which, when run on processing circuitry of a service-providing NF, causes the service-providing NF to perform a method according to the seventh aspect.</p><p id="p-0020" num="0019">According to an eleventh aspect there is presented a computer program product comprises a computer program according to at least one of the third aspect. The sixth aspect, and the tenth aspect and a computer readable storage medium on which the computer program is stored. The computer readable storage medium can be a non-transitory computer readable storage medium.</p><p id="p-0021" num="0020">According to an eleventh aspect there is presented a system. The system comprises a Network Repository Function as herein disclosed, a service-requesting NF as herein disclosed, and a service-providing NF as herein disclosed.</p><p id="p-0022" num="0021">Advantageously these methods, this Network Repository Function, this service-requesting NF, this service-providing NF, these computer programs, this computer program product, and this system provide efficient discovery of NF producers in the 3GPP communication network.</p><p id="p-0023" num="0022">Advantageously these methods, this Network Repository Function, this service-requesting NF, this service-providing NF, these computer programs, this computer program product, and this system enable the service-requesting NF to discover closer instances of service-providing NFs according to different proximity criteria, which ultimately achieves better performance or higher efficiency in the NF operation.</p><p id="p-0024" num="0023">Advantageously these methods, this Network Repository Function, this service-requesting NF, this service-providing NF, these computer programs, this computer program product, and this system enable the service-requesting NF to classify discovered instances of service-providing NFs by geographical proximity, as well as selecting the geographically closer service-providing NF, in order to minimize the latency of the future communication between the service-requesting NF and the selected service-providing NF.</p><p id="p-0025" num="0024">Other objectives, features and advantages of the enclosed embodiments will be apparent from the following detailed disclosure, from the attached dependent claims as well as from the drawings.</p><p id="p-0026" num="0025">Generally, all terms used in the claims are to be interpreted according to their ordinary meaning in the technical field, unless explicitly defined otherwise herein. All references to &#x201c;a/an/the element, apparatus, component, means, module, action, etc.&#x201d; are to be interpreted openly as referring to at least one instance of the element, apparatus, component, means, module, action, etc., unless explicitly stated otherwise.</p><p id="p-0027" num="0026">The actions of any method disclosed herein do not have to be performed in the exact order disclosed, unless explicitly stated.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0028" num="0027">The inventive concept is now described, by way of example, with reference to the accompanying drawings, in which:</p><p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a schematic diagram illustrating a communication network according to embodiments;</p><p id="p-0030" num="0029"><figref idref="DRAWINGS">FIGS. <b>6</b> and <b>7</b></figref> are signalling diagrams according to embodiments;</p><p id="p-0031" num="0030"><figref idref="DRAWINGS">FIGS. <b>2</b>, <b>4</b>, and <b>5</b></figref> are flowcharts of methods according to embodiments;</p><p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a schematic illustration of a weighted graph according to an embodiment;</p><p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. <b>8</b></figref> is a schematic diagram showing functional units of a Network Repository Function according to an embodiment;</p><p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. <b>9</b></figref> is a schematic diagram showing functional modules of a Network Repository Function according to an embodiment;</p><p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. <b>10</b></figref> is a schematic diagram showing functional units of a service-requesting NF according to an embodiment;</p><p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. <b>11</b></figref> is a schematic diagram showing functional modules of a service-requesting NF according to an embodiment;</p><p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. <b>12</b></figref> is a schematic diagram showing functional units of a service-providing NF according to an embodiment;</p><p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. <b>13</b></figref> is a schematic diagram showing functional modules of a service-providing NF according to an embodiment; and</p><p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. <b>14</b></figref> shows one example of a computer program product comprising computer readable means according to an embodiment.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">DETAILED DESCRIPTION</heading><p id="p-0040" num="0039">The inventive concept will now be described more fully hereinafter with reference to the accompanying drawings, in which certain embodiments of the inventive concept are shown. This inventive concept may, however, be embodied in many different forms and should not be construed as limited to the embodiments set forth herein; rather, these embodiments are provided by way of example so that this disclosure will be thorough and complete, and will fully convey the scope of the inventive concept to those skilled in the art. Like numbers refer to like elements throughout the description. Any action or feature illustrated by dashed lines should be regarded as optional.</p><p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a schematic diagram illustrating a communication network <b>100</b> where embodiments presented herein can be applied. The communication network <b>100</b> represents a reference architecture of a fifth generation telecommunication system (5GS) and comprises the following entities: and Authentication Server Function (AUSF), an Access and Mobility Management Function (AMF), a Data Network (DN), e.g. operator services, Internet access or 3rd party services, a Network Exposure Function (NEF), a Network Repository Function (NRF), a Network Slice Selection Function (NSSF), a Policy Control Function (PCF), a Session Management Function (SMF), a Unified Data Management (UDM) function, a Unified Data Repository (UDR), a User Plane Function (UPF), an Application Function (AF), a User Equipment (UE), a (Radio) Access Network ((R)AN), a Network Data Analytics Function (NWDAF), a Binding Support Function (BSF), and a Charging Function (CHF). Service based interfaces are represented by the format Nxyz (e.g., Nnssf, Nnef, etc.) and point to point interfaces are represented by the format Nx (e.g. N1, N2, etc.). The NSSF, NEF, NRF, PCF, UDM, AF, BSF, UDR, AUSF, AMF, SMF, NWDAF, and CHF are all examples of possible NF producers (hereinafter denoted service-producing NFs <b>400</b>) and possible NF consumers (hereinafter denoted service-requesting NFs <b>300</b>).</p><p id="p-0042" num="0041">As noted above there is a need for efficient discovery of NF producers in a 3GPP communication network.</p><p id="p-0043" num="0042">In more detail, in case there is no match between the requested preferred-locality and the registered locality attributes, it is possible that the NRF <b>200</b> uses the requested preferred-locality and the registered locality to build a list of NFs that are sorted by priority. However, the NRF <b>200</b> does currently not have any means to build this priority list based on just unconnected strings, such as &#x201c;DC33&#x201d; or &#x201c;DC22&#x201d;. The NRF <b>200</b> currently therefore is without information as to whether DC33 refers to a data center location that is deployed closer to the requested, and thus, should have a higher priority than DC22, or vice versa. Thus, one issue with existing solutions lies in that an exact match is required between the locality attribute registered by a service-providing NF <b>400</b> and the preferred-locality parameter requested by the service-requesting NF <b>300</b>. Both parameters are currently specified as unstructured strings.</p><p id="p-0044" num="0043">According to the herein disclosed embodiments, the values of the locality attribute of the NFProfile and the preferred-locality parameter of the NFDiscovery query are structured according to granularity of the locality.</p><p id="p-0045" num="0044">The embodiments disclosed herein in particular relate to mechanisms for discovery of, and enabling discovery of, a service-providing NF <b>400</b> in a 3GPP communication network <b>100</b>. In order to obtain such mechanisms there is provided a Network Repository Function <b>200</b>, a method performed by the Network Repository Function <b>200</b>, a computer program product comprising code, for example in the form of a computer program, that when run on processing circuitry of the Network Repository Function <b>200</b>, causes the Network Repository Function <b>200</b> to perform the method. In order to obtain such mechanisms there is further provided a service-requesting NF <b>300</b>, a method performed by the service-requesting NF <b>300</b>, and a computer program product comprising code, for example in the form of a computer program, that when run on processing circuitry of the service-requesting NF <b>300</b>, causes the service-requesting NF <b>300</b> to perform the method. In order to obtain such mechanisms there is further provided a service-providing NF <b>400</b>, a method performed by the service-providing NF <b>400</b>, and a computer program product comprising code, for example in the form of a computer program, that when run on processing circuitry of the service-providing NF <b>400</b>, causes the service-providing NF <b>400</b> to perform the method.</p><p id="p-0046" num="0045">Reference is now made to <figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrating a method for enabling discovery of a service-providing NF <b>400</b> in a 3GPP communication network <b>100</b> as performed by the Network Repository Function <b>200</b> according to an embodiment.</p><p id="p-0047" num="0046">During, for example, an NF Service Registration procedure or an NF Service Update procedure, the service-providing NFs <b>400</b> include as much locality information as is available. This information is assumed to be received by the Network Repository Function <b>200</b>. Hence, the Network Repository Function <b>200</b> is configured to perform action S<b>102</b>:</p><p id="p-0048" num="0047">S<b>102</b>: The Network Repository Function <b>200</b> registers locality information of service-providing NFs <b>400</b> according to locality attribute of each service-providing NF <b>400</b>. Each locality attribute comprises structured values of location information of its service-providing NF <b>400</b>.</p><p id="p-0049" num="0048">During, for example, an NF Service Discovery procedure, from a service-requesting NF <b>300</b> includes the minimum preferred-locality information that is acceptable for not degrading the communication between the service-requesting NF <b>300</b> and the service-providing NF <b>400</b>. Hence, the Network Repository Function <b>200</b> is configured to perform action S<b>104</b>:</p><p id="p-0050" num="0049">S<b>104</b>: The Network Repository Function <b>200</b> obtains a request from a service-requesting NF <b>300</b> for one of the service-providing NFs <b>400</b>. The request specifies a preferred locality of the requested service-providing NF <b>400</b>. The preferred locality indicates, in terms of structured values of location information, geographical location where the service-requesting NF <b>300</b> is deployed.</p><p id="p-0051" num="0050">S<b>106</b>: The Network Repository Function <b>200</b> identifies, out of the service-providing NFs <b>400</b>, at least that service-providing NF <b>400</b> which has a locality attribute that best matches the preferred locality, whereby the service-providing NF <b>400</b> closest to the geographical location where the service-requesting NF <b>300</b> is deployed is identified.</p><p id="p-0052" num="0051">The Network Repository Function <b>200</b> returns the registered locality of each identified service-providing NF <b>400</b>. Hence, the Network Repository Function <b>200</b> is configured to perform action S<b>108</b>:</p><p id="p-0053" num="0052">S<b>108</b>: The Network Repository Function <b>200</b> provides a response to the service-requesting NF <b>300</b>. The response comprises the locality attribute of the identified service-providing NF <b>400</b>, thereby enabling discovery of the service-providing NF <b>400</b>.</p><p id="p-0054" num="0053">The Network Repository Function <b>200</b> might set higher priority to service-providing NFs <b>400</b> with higher locality-wise match with the service-requesting NF <b>300</b>.</p><p id="p-0055" num="0054">Embodiments relating to further details of enabling discovery of a service-providing NF <b>400</b> in a 3GPP communication network <b>100</b> as performed by the Network Repository Function <b>200</b> will now be disclosed.</p><p id="p-0056" num="0055">According to an embodiment, the preferred locality does not exactly match any of the locality attributes. However, even if there is no exact match, the Network Repository Function <b>200</b> in action S<b>106</b> still identifies at least one service-providing NF <b>400</b> and in action S<b>108</b> informs the service-requesting NF <b>300</b> about the at least one identifies service-providing NF <b>400</b>.</p><p id="p-0057" num="0056">There could be different opportunities as to when the locality information of the service-providing NFs <b>400</b> is registered by the Network Repository Function <b>200</b> in action S<b>102</b>. In general terms, the service-providing NFs <b>400</b> might be associated with new, or updated, locality information upon service registration or service update. The Network Repository Function <b>200</b> might then be provided with the new, or updated, locality information and register the new, or updated, locality information, as in action S<b>102</b>. Hence, according to an embodiment, the locality information of the service-providing NFs <b>400</b> is registered upon service registration of the service-providing NFs <b>400</b> and/or service update of the service-providing NFs <b>400</b>.</p><p id="p-0058" num="0057">The structured values of location information might be ordered, or otherwise structured. According to an embodiment, the structured values of location information are structured from most detailed location information to least detailed location information.</p><p id="p-0059" num="0058">There could be different examples of structured values of location information. According to an embodiment, the structured values of location information are specified in terms of two or more of: sub data center, data center, district, city, province, area, state, region, country, continent. Thus, in some examples the locality attribute of the NFProfile, and the preferred-locality parameter of the NFDiscovery service, have the following overall structure:</p><p id="p-0060" num="0000">country:region:state:area:province:city:district:datacenter:subdatacenter</p><p id="p-0061" num="0059">According to an embodiment, the locality attribute that best matches the preferred locality is identified by having as detailed location information as possible in common with the structured values of location information of the service-requesting NF <b>300</b>. When using such structured values of location information, a Network Repository Function <b>200</b> attempting to match a locality attribute with a preferred-locality parameter might thus filter and sort the NF Profiles lexicographically by longest leftmost string match.</p><p id="p-0062" num="0060">There could be different ways to encode the structured values of location information.</p><p id="p-0063" num="0061">According to an embodiment, the structured values of location information are encoded using a Domain Name System (DNS) syntax composed of labels separated by dots. Thus, in some examples each of the structured locality attribute of the NFProfile and the preferred-locality parameter of the NFDiscovery service is encoded using a DNS-like mechanism, similar to the one used to encode fully qualified domain names (FQDNs), but in reverse order, so that the coarse-most locality component is encoded on the left, and the fine-grained locality component is encoded on the right. The following is an example of structured values of location information encoded in this way:</p><p id="p-0064" num="0000">usa.east.ny.nyc.manhattan.midtown.dc12.subdatacenter33</p><p id="p-0065" num="0062">According to another embodiment, the structured values of location information are encoded using a Lightweight Directory Access Protocol (LDAP) Data Interchange Format (LDIF) structure. Thus, in some examples each of the structured locality attribute of the NFProfile and the preferred-locality parameter of the NFDiscovery service is encoded using an LDAP LDIF-like mechanism. The following is an example of structured values of location information encoded in this way:</p><p id="p-0066" num="0000">c=usa,dc=east,s=ny,ou=manhattan,ou=midtown,ou=dc12,cn=subdatacenter33</p><p id="p-0067" num="0063">There could be different types of responses that in S<b>108</b> are provided from the Network Repository Function <b>200</b> to the service-requesting NF <b>300</b>. According to an embodiment, the response comprises an array of at least one NF profile object. Each NF profile object comprises at least a locality attribute of one identified service-providing NF <b>400</b>.</p><p id="p-0068" num="0064">Each NF profile object might be associated with its own priority value. Thus, according to an embodiment, one priority value for each NF profile object is indicated in the array of NF profile objects. In some aspects, the priority value is explicit. Each NF profile object might thus comprise an explicit priority value. In other aspects, the priority value is implicit. For example, when the NF profile objects are ordered from highest to lowest priority (or vice versa) then the priority value might be implicit and given by the order.</p><p id="p-0069" num="0065">There could be different ways to assign priority values to the NF profile objects. According to an embodiment, the priority value per NF profile object is proportional to a cost, such as geographical distance, between the service-providing NF <b>400</b> of that NF profile object and the service-requesting NF <b>300</b>. Other types of costs according to which the priority value could be proportional are delay, bandwidth, throughput, congestion, quality of service, channel quality, etc. between the service-providing NF <b>400</b> of that NF profile object and the service-requesting NF <b>300</b>.</p><p id="p-0070" num="0066">In some examples, the Network Repository Function <b>200</b> implements a table that aids the Network Repository Function <b>200</b> into prioritizing the list of available service-providing NFs <b>400</b>. Such a table might comprise an entry in a column and an entry in a row for each possible location of datacenters or areas within a data center, such as a sub data center, where the service-providing NFs <b>400</b> are deployed, so that the rows represent the preferred-locality parameter, and the columns represent the locality attribute of the NF profile. The intersection of a row and a column is populated with the priority value of selecting a certain service-providing NF <b>400</b> for a given service-requesting NF <b>300</b>.</p><p id="p-0071" num="0067">Table 1 shows and example of such a table. According to Table 1, assume that a service-requesting NF <b>300</b> indicates that is preferred-locality is &#x201c;dallas&#x201d;. When building the results, when the Network Repository Function <b>200</b> finds a suitable service-providing NF <b>400</b> whose locality attribute is set to &#x201c;sanfrancisco&#x201d;, the</p><p id="p-0072" num="0068">Network Repository Function <b>200</b> assigns a priority of 1736; if the locality attribute is set to &#x201c;losangeles&#x201d;, the Network Repository Function <b>200</b> assigns a priority of 2174; if the locality attribute is set to &#x201c;dallas&#x201d;, the Network Repository Function <b>200</b> assigns a priority of 0, and so on. The overall effect is that when the service-requesting NF <b>300</b> receives the list of available service-providing NFs <b>400</b>, the service-providing NFs <b>400</b> are sorted in terms of priority, so that a service-providing NF <b>400</b> in Dallas has the highest priority of 0, whereas if it is located in Atlanta, the priority is set to 781, and if it is located in Los Angeles the priority is set to 1436, and so on. The service-requesting NF <b>300</b> is thereby enabled to select the service-providing NF <b>400</b> with the highest priority, meaning that the selected service-providing NF <b>400</b> is as closely deployed to the service-requesting NF <b>300</b> as possible. According to this table, a low priority value thus indicates high priority and vice versa.</p><p id="p-0073" num="0000"><tables id="TABLE-US-00001" num="00001"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="1"><colspec colname="1" colwidth="217pt" align="center"/><thead><row><entry namest="1" nameend="1" rowsep="1">TABLE 1</entry></row></thead><tbody valign="top"><row><entry namest="1" nameend="1" align="center" rowsep="1"/></row><row><entry>Example of provisioning of priority attributes using a table</entry></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="2"><colspec colname="1" colwidth="49pt" align="left"/><colspec colname="2" colwidth="168pt" align="center"/><tbody valign="top"><row><entry>Preferred-</entry><entry>Locality</entry></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="6"><colspec colname="1" colwidth="49pt" align="left"/><colspec colname="2" colwidth="42pt" align="center"/><colspec colname="3" colwidth="42pt" align="center"/><colspec colname="4" colwidth="21pt" align="center"/><colspec colname="5" colwidth="28pt" align="center"/><colspec colname="6" colwidth="35pt" align="center"/><tbody valign="top"><row><entry>locality</entry><entry>sanfrancisco</entry><entry>losangeles</entry><entry>dallas</entry><entry>atlanta</entry><entry>newyork</entry></row><row><entry namest="1" nameend="6" align="center" rowsep="1"/></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="6"><colspec colname="1" colwidth="49pt" align="left"/><colspec colname="2" colwidth="42pt" align="char" char="."/><colspec colname="3" colwidth="42pt" align="char" char="."/><colspec colname="4" colwidth="21pt" align="char" char="."/><colspec colname="5" colwidth="28pt" align="char" char="."/><colspec colname="6" colwidth="35pt" align="char" char="."/><tbody valign="top"><row><entry>Sanfrancisco</entry><entry>0</entry><entry>382</entry><entry>1736</entry><entry>2482</entry><entry>2902</entry></row><row><entry>Losangeles</entry><entry>382</entry><entry>0</entry><entry>1436</entry><entry>2174</entry><entry>2789</entry></row><row><entry>dallas</entry><entry>1736</entry><entry>1436</entry><entry>0</entry><entry>781</entry><entry>1549</entry></row><row><entry>Atlanta</entry><entry>3482</entry><entry>2174</entry><entry>781</entry><entry>0</entry><entry>873</entry></row><row><entry>Newyork</entry><entry>2902</entry><entry>2789</entry><entry>1549</entry><entry>873</entry><entry>0</entry></row><row><entry namest="1" nameend="6" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0074" num="0069">There could be different ways to populate Table 1. In some aspects, the table is manually populated. In other aspects, the Network Repository Function <b>200</b> implements a network interface through which it is enabled to obtain the priority values. As an example, when the priority values represent geographical distance, the Network Repository Function <b>200</b> might have a network interface to a Geographic Information System (GIS), and when a new entry is added, the distance between each two locations is used to derive the priority value. In the example of Table 1 the derivation function merely equals the distance in miles between the two locations to the priority that the Network Repository Function <b>200</b> should use between these locations.</p><p id="p-0075" num="0070">In some aspects, the priority values are based on, or combined with, live network data of the 3GPP communication network <b>100</b> as obtained by the Network Repository Function <b>200</b>. Thus, the information in Table 1 might be based on, or combined with, live network data. The entries in Table 1 might be updated by periodically updated by live network data in order for the priority values for each entry in the table to be computed and the entries to be updated with the updated priority values.</p><p id="p-0076" num="0071">Thus, according to an embodiment, a priority value is assigned to each of the service-providing NFs <b>400</b> based on live data received from the 3GPP communication network <b>100</b>. The live data pertains to at least one of network latency and network throughput between the service-requesting NF <b>300</b> and the service-providing NFs <b>400</b>. There could be different types of live data. Some non-limiting examples of live data are observed network latency, throughput, and administrative attributes such as cost.</p><p id="p-0077" num="0072">In some aspects the priority values are determined by means of using a weighted graph, where each vertex represents a location and the edge between two vertices contains the priority value. Thus, according to an embodiment, the service-providing NF <b>400</b> is identified based on using a weighted graph reflecting the cost. There would be different examples of weighted graphs. In some examples the weighted graph is an edge-weighted graph. <figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates the same information as in Table 1 but represented instead as a weighted graph <b>500</b>. The weighted graph <b>500</b> has five vertices <b>510</b><i>a</i>, <b>510</b><i>b</i>, <b>510</b><i>c</i>, <b>510</b><i>d</i>, <b>510</b><i>e</i>. In comparison to Table 1, vertex <b>510</b><i>a </i>thus corresponds to &#x201c;sanfransisco&#x201d;, vertex <b>510</b><i>b </i>corresponds to vertex newyork, vertex <b>510</b><i>c </i>corresponds to losangeles, vertex <b>610</b><i>d </i>corresponds to dallas and vertex <b>510</b><i>e </i>corresponds to atlanta. The value of the edges corresponds to the priority values in Table 1.</p><p id="p-0078" num="0073">Reference is now made to <figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrating a method for discovery of a service-providing NF <b>400</b> in a 3GPP communication network <b>100</b> as performed by the service-requesting NF <b>300</b> according to an embodiment.</p><p id="p-0079" num="0074">S<b>202</b>: The service-requesting NF <b>300</b> provides a request to a Network Repository Function <b>200</b> for a service-providing NF <b>400</b>. The request specifies a preferred locality of the requested service-providing NF <b>400</b>. The preferred locality indicates, in terms of structured values of location information, geographical location where the service-requesting NF <b>300</b> is deployed.</p><p id="p-0080" num="0075">S<b>204</b>: The service-requesting NF <b>300</b> obtains a response from the Network Repository Function <b>200</b>. The response comprises the locality attribute of a service-providing NF <b>400</b> as identified. The service-providing NF <b>400</b> has a locality attribute that best matches the preferred locality, whereby the service-providing NF <b>400</b> closest to the geographical location where the service-requesting NF <b>300</b> is deployed is identified. The service-requesting NF <b>300</b> thereby discovers the service-providing NF <b>400</b>.</p><p id="p-0081" num="0076">The embodiments, aspects, and examples as disclosed above and relating to the Network Repository Function <b>200</b> apply also to the service-requesting NF <b>300</b> and are therefore not repeated here.</p><p id="p-0082" num="0077">Reference is now made to <figref idref="DRAWINGS">FIG. <b>5</b></figref> illustrating a method for enabling discovery of a service-providing NF <b>400</b> in a 3GPP communication network 100 as performed by the service-providing NF <b>400</b> according to an embodiment.</p><p id="p-0083" num="0078">S<b>302</b>: The service-providing NF <b>400</b> registers with a Network Repository Function <b>200</b>, locality information of the service-providing NF <b>400</b> according to locality attribute of the service-providing NF <b>400</b>. The locality attribute comprises structured values of location information of the service-providing NF <b>400</b>. The service-providing NF <b>400</b> thereby enables the service-requesting NF <b>300</b> to discover the service-providing NF <b>400</b>.</p><p id="p-0084" num="0079">The embodiments, aspects, and examples as disclosed above and relating to the Network Repository Function <b>200</b> apply also to the service-providing NF <b>400</b> and are therefore not repeated here.</p><p id="p-0085" num="0080">Reference is now made to the signalling diagram of <figref idref="DRAWINGS">FIG. <b>6</b></figref> illustrating a method for a service-providing NF <b>400</b> registering its locality information with the Network Repository Function <b>200</b> based on embodiments as disclosed above.</p><p id="p-0086" num="0081">S<b>401</b>: The service-providing NF <b>400</b> provides, and thereby registers, its locality information with the Network Repository Function <b>200</b> according to a locality attribute of the service-providing NF <b>400</b>. The locality information might be provided in an Nnrf_NFManagement_NFRegister_request message.</p><p id="p-0087" num="0082">S<b>402</b>: The Network Repository Function <b>200</b> stores, and thereby registers, the locality information of the service-providing NFs <b>400</b> according to the locality attribute.</p><p id="p-0088" num="0083">S<b>403</b>: The Network Repository Function <b>200</b> responds to the service-providing NF <b>400</b> and acknowledges receipt of the locality information. The Network Repository Function <b>200</b> might respond with an Nnrf_NFManagement_NFRegister_response message.</p><p id="p-0089" num="0084">Reference is now made to the signalling diagram of <figref idref="DRAWINGS">FIG. <b>7</b></figref> illustrating a method for a service-requesting NF <b>300</b> requesting a service-providing NF <b>400</b> from the Network Repository Function <b>200</b> based on embodiments as disclosed above.</p><p id="p-0090" num="0085">S<b>501</b>: The service-requesting NF <b>300</b> provides a request to the Network Repository Function <b>200</b> for a service-providing NF <b>400</b>. The request might be provided in an Nnrf_NFDiscovery_request message.</p><p id="p-0091" num="0086">S<b>502</b>: The Network Repository Function <b>200</b> identifies, out of the service-providing NFs <b>400</b>, at least that service-providing NF <b>400</b> which has a locality attribute that best matches the preferred locality.</p><p id="p-0092" num="0087">S<b>503</b>: The Network Repository Function <b>200</b> provides a response to the service-requesting NF <b>300</b>. The response comprises the locality attribute of the identified service-providing NF <b>400</b>. The Network Repository Function <b>200</b> might respond with an Nnrf_NFDiscovery_request_response message.</p><p id="p-0093" num="0088"><figref idref="DRAWINGS">FIG. <b>8</b></figref> schematically illustrates, in terms of a number of functional units, the components of a Network Repository Function <b>200</b> according to an embodiment. Processing circuitry <b>210</b> is provided using any combination of one or more of a suitable central processing unit (CPU), multiprocessor, microcontroller, digital signal processor (DSP), etc., capable of executing software instructions stored in a computer program product <b>1410</b><i>a </i>(as in <figref idref="DRAWINGS">FIG. <b>14</b></figref>), e.g. in the form of a storage medium <b>230</b>. The processing circuitry <b>210</b> may further be provided as at least one application specific integrated circuit (ASIC), or field programmable gate array (FPGA).</p><p id="p-0094" num="0089">Particularly, the processing circuitry <b>210</b> is configured to cause the Network Repository Function <b>200</b> to perform a set of operations, or actions, as disclosed above. For example, the storage medium <b>230</b> may store the set of operations, and the processing circuitry <b>210</b> may be configured to retrieve the set of operations from the storage medium <b>230</b> to cause the Network Repository Function <b>200</b> to perform the set of operations. The set of operations may be provided as a set of executable instructions. Thus the processing circuitry <b>210</b> is thereby arranged to execute methods as herein disclosed.</p><p id="p-0095" num="0090">The storage medium <b>230</b> may also comprise persistent storage, which, for example, can be any single one or combination of magnetic memory, optical memory, solid state memory or even remotely mounted memory.</p><p id="p-0096" num="0091">The Network Repository Function <b>200</b> may further comprise a communications interface <b>220</b> for communications with other entities, functions, nodes, and devices of the communication network <b>100</b>. As such the communications interface <b>220</b> may comprise one or more transmitters and receivers, comprising analogue and digital components.</p><p id="p-0097" num="0092">The processing circuitry <b>210</b> controls the general operation of the Network Repository Function <b>200</b> e.g. by sending data and control signals to the communications interface <b>220</b> and the storage medium <b>230</b>, by receiving data and reports from the communications interface <b>220</b>, and by retrieving data and instructions from the storage medium <b>230</b>. Other components, as well as the related functionality, of the Network Repository Function <b>200</b> are omitted in order not to obscure the concepts presented herein.</p><p id="p-0098" num="0093"><figref idref="DRAWINGS">FIG. <b>9</b></figref> schematically illustrates, in terms of a number of functional modules, the components of a Network Repository Function <b>200</b> according to an embodiment. The Network Repository Function <b>200</b> of <figref idref="DRAWINGS">FIG. <b>9</b></figref> comprises a number of functional modules; a register module <b>210</b><i>a </i>configured to perform action S<b>102</b>, an obtain module <b>210</b><i>b </i>configured to perform action S<b>104</b>, an identify module <b>210</b><i>c </i>configured to perform action S<b>106</b>, and a provide module <b>210</b><i>d </i>configured to perform action S<b>108</b>. The Network Repository Function <b>200</b> of <figref idref="DRAWINGS">FIG. <b>9</b></figref> may further comprise a number of optional functional modules, as exemplified by functional module <b>210</b><i>e</i>. In general terms, each functional module <b>210</b><i>a</i>-<b>210</b><i>e </i>may be implemented in hardware or in software. Preferably, one or more or all functional modules <b>210</b><i>a</i>-<b>210</b><i>e </i>may be implemented by the processing circuitry <b>210</b>, possibly in cooperation with the communications interface <b>220</b> and the storage medium <b>230</b>. The processing circuitry <b>210</b> may thus be arranged to from the storage medium <b>230</b> fetch instructions as provided by a functional module <b>210</b><i>a</i>-<b>210</b><i>e </i>and to execute these instructions, thereby performing any actions of the Network Repository Function <b>200</b> as disclosed herein.</p><p id="p-0099" num="0094"><figref idref="DRAWINGS">FIG. <b>10</b></figref> schematically illustrates, in terms of a number of functional units, the components of a service-requesting NF <b>300</b> according to an embodiment. Processing circuitry <b>310</b> is provided using any combination of one or more of a suitable central processing unit (CPU), multiprocessor, microcontroller, digital signal processor (DSP), etc., capable of executing software instructions stored in a computer program product <b>1410</b><i>b </i>(as in <figref idref="DRAWINGS">FIG. <b>14</b></figref>), e.g. in the form of a storage medium <b>330</b>. The processing circuitry <b>310</b> may further be provided as at least one application specific integrated circuit (ASIC), or field programmable gate array (FPGA).</p><p id="p-0100" num="0095">Particularly, the processing circuitry <b>310</b> is configured to cause the service-requesting NF <b>300</b> to perform a set of operations, or actions, as disclosed above. For example, the storage medium <b>330</b> may store the set of operations, and the processing circuitry <b>310</b> may be configured to retrieve the set of operations from the storage medium <b>330</b> to cause the service-requesting NF <b>300</b> to perform the set of operations. The set of operations may be provided as a set of executable instructions. Thus the processing circuitry <b>310</b> is thereby arranged to execute methods as herein disclosed.</p><p id="p-0101" num="0096">The storage medium <b>330</b> may also comprise persistent storage, which, for example, can be any single one or combination of magnetic memory, optical memory, solid state memory or even remotely mounted memory.</p><p id="p-0102" num="0097">The service-requesting NF <b>300</b> may further comprise a communications interface <b>320</b> for communications with other entities, functions, nodes, and devices of the communication network <b>100</b>. As such the communications interface <b>320</b> may comprise one or more transmitters and receivers, comprising analogue and digital components.</p><p id="p-0103" num="0098">The processing circuitry <b>310</b> controls the general operation of the service-requesting NF <b>300</b> e.g. by sending data and control signals to the communications interface <b>320</b> and the storage medium <b>330</b>, by receiving data and reports from the communications interface <b>320</b>, and by retrieving data and instructions from the storage medium <b>330</b>. Other components, as well as the related functionality, of the service-requesting NF <b>300</b> are omitted in order not to obscure the concepts presented herein.</p><p id="p-0104" num="0099"><figref idref="DRAWINGS">FIG. <b>11</b></figref> schematically illustrates, in terms of a number of functional modules, the components of a service-requesting NF <b>300</b> according to an embodiment. The service-requesting NF <b>300</b> of <figref idref="DRAWINGS">FIG. <b>11</b></figref> comprises a number of functional modules; a provide module <b>310</b><i>a </i>configured to perform action S<b>202</b> and an obtain module <b>310</b><i>b </i>configured to perform action S<b>204</b>. The service-requesting NF <b>300</b> of <figref idref="DRAWINGS">FIG. <b>11</b></figref> may further comprise a number of optional functional modules, as exemplified by functional module <b>310</b><i>c</i>. In general terms, each functional module <b>310</b><i>a</i>-<b>310</b><i>c </i>may be implemented in hardware or in software. Preferably, one or more or all functional modules <b>310</b><i>a</i>-<b>310</b><i>c </i>may be implemented by the processing circuitry <b>310</b>, possibly in cooperation with the communications interface <b>320</b> and the storage medium <b>330</b>. The processing circuitry <b>310</b> may thus be arranged to from the storage medium <b>330</b> fetch instructions as provided by a functional module <b>310</b><i>a</i>-<b>310</b><i>c </i>and to execute these instructions, thereby performing any actions of the service-requesting NF <b>300</b> as disclosed herein.</p><p id="p-0105" num="0100"><figref idref="DRAWINGS">FIG. <b>12</b></figref> schematically illustrates, in terms of a number of functional units, the components of a service-providing NF <b>400</b> according to an embodiment. Processing circuitry <b>410</b> is provided using any combination of one or more of a suitable central processing unit (CPU), multiprocessor, microcontroller, digital signal processor (DSP), etc., capable of executing software instructions stored in a computer program product <b>1410</b><i>c </i>(as in <figref idref="DRAWINGS">FIG. <b>14</b></figref>), e.g. in the form of a storage medium <b>430</b>. The processing circuitry <b>410</b> may further be provided as at least one application specific integrated circuit (ASIC), or field programmable gate array (FPGA).</p><p id="p-0106" num="0101">Particularly, the processing circuitry <b>410</b> is configured to cause the service-providing NF <b>400</b> to perform a set of operations, or actions, as disclosed above. For example, the storage medium <b>430</b> may store the set of operations, and the processing circuitry <b>410</b> may be configured to retrieve the set of operations from the storage medium <b>430</b> to cause the service-providing NF <b>400</b> to perform the set of operations. The set of operations may be provided as a set of executable instructions. Thus the processing circuitry <b>410</b> is thereby arranged to execute methods as herein disclosed.</p><p id="p-0107" num="0102">The storage medium <b>430</b> may also comprise persistent storage, which, for example, can be any single one or combination of magnetic memory, optical memory, solid state memory or even remotely mounted memory.</p><p id="p-0108" num="0103">The service-providing NF <b>400</b> may further comprise a communications interface <b>420</b> for communications with other entities, functions, nodes, and devices of the communication network <b>100</b>. As such the communications interface <b>420</b> may comprise one or more transmitters and receivers, comprising analogue and digital components.</p><p id="p-0109" num="0104">The processing circuitry <b>410</b> controls the general operation of the service-providing NF <b>400</b> e.g. by sending data and control signals to the communications interface <b>420</b> and the storage medium <b>430</b>, by receiving data and reports from the communications interface <b>420</b>, and by retrieving data and instructions from the storage medium <b>430</b>. Other components, as well as the related functionality, of the service-providing NF <b>400</b> are omitted in order not to obscure the concepts presented herein.</p><p id="p-0110" num="0105"><figref idref="DRAWINGS">FIG. <b>13</b></figref> schematically illustrates, in terms of a number of functional modules, the components of a service-providing NF <b>400</b> according to an embodiment. The service-providing NF <b>400</b> of <figref idref="DRAWINGS">FIG. <b>13</b></figref> comprises a register module <b>410</b><i>a </i>configured to perform action S<b>302</b>. The service-providing NF <b>400</b> of <figref idref="DRAWINGS">FIG. <b>13</b></figref> may further comprise a number of optional functional modules, as exemplified by functional module <b>410</b><i>b</i>. In general terms, each functional module <b>410</b><i>a</i>-<b>410</b><i>b </i>may be implemented in hardware or in software. Preferably, one or more or all functional modules <b>410</b><i>a</i>-<b>410</b><i>b </i>may be implemented by the processing circuitry <b>410</b>, possibly in cooperation with the communications interface <b>420</b> and the storage medium <b>430</b>. The processing circuitry <b>410</b> may thus be arranged to from the storage medium <b>430</b> fetch instructions as provided by a functional module <b>410</b><i>a</i>-<b>410</b><i>b </i>and to execute these instructions, thereby performing any actions of the service-providing NF <b>400</b> as disclosed herein.</p><p id="p-0111" num="0106">A system comprises the Network Repository Function <b>200</b> at least one service-requesting NF <b>300</b> and at least one service-providing NF <b>400</b>. Any of the Network Repository Function <b>200</b>, the service-requesting NF <b>300</b> and the service-providing NF <b>400</b> may be provided as a respective standalone device or as a part of at least one further device. For example, the Network Repository Function <b>200</b>, the service-requesting NF <b>300</b> and the service-providing NF <b>400</b> may be provided in a node of the core network. Alternatively, functionality of the Network Repository Function <b>200</b>, the service-requesting NF <b>300</b> and the service-providing NF <b>400</b> may be distributed between at least two devices, or nodes. These at least two nodes, or devices, may either be part of the same network part (such as the radio access network or the core network) or may be spread between at least two such network parts. In general terms, instructions that are required to be performed in real time may be performed in a device, or node, operatively closer to the cell than instructions that are not required to be performed in real time.</p><p id="p-0112" num="0107">Thus, a first portion of the instructions performed by the Network Repository Function <b>200</b>, the service-requesting NF <b>300</b> and the service-providing NF <b>400</b> may be executed in a respective first device, and a second portion of the of the instructions performed by the Network Repository Function <b>200</b>, the service-requesting NF <b>300</b> and the service-providing NF <b>400</b> may be executed in a respective second device; the herein disclosed embodiments are not limited to any particular number of devices on which the instructions performed by the Network Repository Function <b>200</b>, the service-requesting NF <b>300</b> and the service-providing NF <b>400</b> may be executed. Hence, the methods according to the herein disclosed embodiments are suitable to be performed by a Network Repository Function <b>200</b>, a service-requesting NF <b>300</b> and a service-providing NF <b>400</b> residing in a cloud computational environment. Therefore, although a single processing circuitry <b>210</b>, <b>310</b>, <b>410</b> is illustrated in <figref idref="DRAWINGS">FIGS. <b>8</b>, <b>10</b>, <b>12</b></figref> the processing circuitry <b>210</b>, <b>310</b>, <b>410</b> may be distributed among a plurality of devices, or nodes. The same applies to the functional modules <b>210</b><i>a</i>-<b>210</b><i>e</i>, <b>310</b><i>a</i>-<b>310</b><i>c</i>, <b>410</b><i>a</i>-<b>410</b><i>b </i>of <figref idref="DRAWINGS">FIGS. <b>9</b>, <b>11</b>, <b>13</b></figref> and the computer programs <b>1420</b><i>a</i>, <b>1420</b><i>b</i>, <b>1420</b><i>c </i>of <figref idref="DRAWINGS">FIG. <b>14</b></figref>.</p><p id="p-0113" num="0108"><figref idref="DRAWINGS">FIG. <b>14</b></figref> shows one example of a computer program product <b>1410</b><i>a</i>, <b>1410</b><i>b</i>, <b>1410</b><i>c </i>comprising computer readable means <b>1430</b>. On this computer readable means <b>1430</b>, a computer program <b>1420</b><i>a </i>can be stored, which computer program <b>1420</b><i>a </i>can cause the processing circuitry <b>210</b> and thereto operatively coupled entities and devices, such as the communications interface <b>220</b> and the storage medium <b>230</b>, to execute methods according to embodiments described herein. The computer program <b>1420</b><i>a </i>and/or computer program product <b>1410</b><i>a </i>may thus provide means for performing any actions of the Network Repository Function <b>200</b> as herein disclosed. On this computer readable means <b>1430</b>, a computer program <b>1420</b><i>b </i>can be stored, which computer program <b>1420</b><i>b </i>can cause the processing circuitry <b>310</b> and thereto operatively coupled entities and devices, such as the communications interface <b>320</b> and the storage medium <b>330</b>, to execute methods according to embodiments described herein. The computer program <b>1420</b><i>b </i>and/or computer program product <b>1410</b><i>b </i>may thus provide means for performing any actions of the service-requesting NF <b>300</b> as herein disclosed. On this computer readable means <b>1430</b>, a computer program <b>1420</b><i>c </i>can be stored, which computer program <b>1420</b><i>c </i>can cause the processing circuitry <b>410</b> and thereto operatively coupled entities and devices, such as the communications interface <b>420</b> and the storage medium <b>430</b>, to execute methods according to embodiments described herein. The computer program <b>1420</b><i>c </i>and/or computer program product <b>1410</b><i>c </i>may thus provide means for performing any actions of the service-providing NF <b>400</b> as herein disclosed.</p><p id="p-0114" num="0109">In the example of <figref idref="DRAWINGS">FIG. <b>14</b></figref>, the computer program product <b>1410</b><i>a</i>, <b>1410</b><i>b</i>, <b>1410</b><i>c </i>is illustrated as an optical disc, such as a CD (compact disc) or a DVD (digital versatile disc) or a Blu-Ray disc. The computer program product <b>1410</b><i>a</i>, <b>1410</b><i>b</i>, <b>1410</b><i>c </i>could also be embodied as a memory, such as a random access memory (RAM), a read-only memory (ROM), an erasable programmable read-only memory (EPROM), or an electrically erasable programmable read-only memory (EEPROM) and more particularly as a non-volatile storage medium of a device in an external memory such as a USB (Universal Serial Bus) memory or a Flash memory, such as a compact Flash memory. Thus, while the computer program <b>1420</b><i>a</i>, <b>1420</b><i>b</i>, <b>1420</b><i>c </i>is here schematically shown as a track on the depicted optical disk, the computer program <b>1420</b><i>a</i>, <b>1420</b><i>b</i>, <b>1420</b><i>c </i>can be stored in any way which is suitable for the computer program product <b>1410</b><i>a</i>, <b>1410</b><i>b</i>, <b>1410</b><i>c. </i></p><p id="p-0115" num="0110">The inventive concept has mainly been described above with reference to a few embodiments. However, as is readily appreciated by a person skilled in the art, other embodiments than the ones disclosed above are equally possible within the scope of the inventive concept, as defined by the appended patent claims.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-01-23" num="01-23"><claim-text><b>1</b>-<b>23</b>. (canceled)</claim-text></claim><claim id="CLM-00024" num="00024"><claim-text><b>24</b>. A method for enabling discovery of a service-providing Network Function (NF) in a 3GPP communication network, the method being performed by a Network Repository Function, the method comprising:<claim-text>registering locality information of service-providing NFs according to locality attribute of each service-providing NF, wherein each locality attribute comprises structured values of location information of its service-providing NF;</claim-text><claim-text>obtaining a request from a service-requesting NF for one of the service-providing NFs, the request specifying a preferred locality of the requested service-providing NF, the preferred locality indicating, in terms of structured values of location information, geographical location where the service-requesting NF is deployed;</claim-text><claim-text>identifying, out of the service-providing NFs, that service-providing NF which has a locality attribute that best matches the preferred locality, whereby the service-providing NF closest to the geographical location where the service-requesting NF is deployed is identified; and</claim-text><claim-text>providing a response to the service-requesting NF, wherein the response comprises the locality attribute of the identified service-providing NF, thereby enabling discovery of the service-providing NF.</claim-text></claim-text></claim><claim id="CLM-00025" num="00025"><claim-text><b>25</b>. The method of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein the preferred locality does not exactly match any of the locality attributes.</claim-text></claim><claim id="CLM-00026" num="00026"><claim-text><b>26</b>. The method of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein the locality attribute of the service-providing NFs is registered upon at least one of a service registration of the service-providing NFs and a service update of the service-providing NFs.</claim-text></claim><claim id="CLM-00027" num="00027"><claim-text><b>27</b>. The method of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein the structured values of the location information are structured from most detailed location information to least detailed location information.</claim-text></claim><claim id="CLM-00028" num="00028"><claim-text><b>28</b>. The method according to <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein the locality attribute that best matches the preferred locality is identified by having as detailed location information as possible in common with the structured values of location information of the service-requesting NF.</claim-text></claim><claim id="CLM-00029" num="00029"><claim-text><b>29</b>. The method of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein the structured values of the location information are specified in terms of two or more of: sub data center, data center, district, city, province, area, state, region, country, continent.</claim-text></claim><claim id="CLM-00030" num="00030"><claim-text><b>30</b>. The method of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein the structured values of the location information are encoded using a Domain Name System (DNS) syntax composed of labels separated by dots.</claim-text></claim><claim id="CLM-00031" num="00031"><claim-text><b>31</b>. The method of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein the structured values of the location information are encoded using a Lightweight Directory Access Protocol (LDAP) Data Interchange Format (LDIF) structure.</claim-text></claim><claim id="CLM-00032" num="00032"><claim-text><b>32</b>. The method of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein the response comprises an array of at least one NF profile object, wherein each NF profile object comprises at least a locality attribute of one identified service-providing NF.</claim-text></claim><claim id="CLM-00033" num="00033"><claim-text><b>33</b>. The method of <claim-ref idref="CLM-00032">claim 32</claim-ref>, wherein one priority value for each NF profile object is indicated in the array of the at least one NF profile object.</claim-text></claim><claim id="CLM-00034" num="00034"><claim-text><b>34</b>. The method of <claim-ref idref="CLM-00033">claim 33</claim-ref>, wherein the priority value for each NF profile object is proportional to a cost, such as geographical distance, between the one identified service-providing NF of that NF profile object and the service-requesting NF.</claim-text></claim><claim id="CLM-00035" num="00035"><claim-text><b>35</b>. The method of <claim-ref idref="CLM-00034">claim 34</claim-ref>, wherein the service-providing NF is identified based on using a weighted graph reflecting the cost between the service-providing NFs and the service-requesting NF.</claim-text></claim><claim id="CLM-00036" num="00036"><claim-text><b>36</b>. The method of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein a priority value is assigned to each of the service-providing NFs based on live data received from the 3GPP communication network, the live data pertaining to at least one of network latency and network throughput between the service-requesting NF and the service-providing NFs.</claim-text></claim><claim id="CLM-00037" num="00037"><claim-text><b>37</b>. A method for discovery of a service-providing Network Function (NF) in a 3GPP communication network, the method being performed by a service-requesting NF, the method comprising:<claim-text>providing a request to a Network Repository Function for a service-providing NF, the request specifying a preferred locality of the requested service-providing NF, the preferred locality indicating, in terms of structured values of location information, geographical location where the service-requesting NF is deployed; and</claim-text><claim-text>obtaining a response from the Network Repository Function, wherein the response comprises a locality attribute of a service-providing NF as identified, the service-providing NF having a locality attribute that best matches the preferred locality, whereby the service-providing NF closest to the geographical location where the service-requesting NF is deployed is identified, the service-requesting NF thereby discovering the service-providing NF.</claim-text></claim-text></claim><claim id="CLM-00038" num="00038"><claim-text><b>38</b>. A Network Repository Function for enabling discovery of a service-providing Network Function (NF) in a 3GPP communication network, the Network Repository Function comprising processing circuitry, the processing circuitry being configured to cause the Network Repository Function to:<claim-text>register locality information of service-providing NFs according to locality attribute of each service-providing NF, wherein each locality attribute comprises structured values of location information of its service-providing NF;</claim-text><claim-text>obtain a request from a service-requesting NF for one of the service-providing NFs, the request specifying a preferred locality of the requested service-providing NF, the preferred locality indicating, in terms of structured values of location information, geographical location where the service-requesting NF is deployed;</claim-text><claim-text>identify, out of the service-providing NFs, that service-providing NF which has a locality attribute that best matches the preferred locality, whereby the service-providing NF closest to the geographical location where the service-requesting NF is deployed is identified; and</claim-text><claim-text>provide a response to the service-requesting NF, wherein the response comprises the locality attribute of the identified service-providing NF, thereby enabling discovery of the service-providing NF.</claim-text></claim-text></claim><claim id="CLM-00039" num="00039"><claim-text><b>39</b>. A service-requesting Network Function (NF) for discovery of a service-providing NF in a 3GPP communication network, the service-requesting NF comprising processing circuitry, the processing circuitry being configured to cause the service-requesting NF to:<claim-text>provide a request to a Network Repository Function for a service-providing NF, the request specifying a preferred locality of the requested service-providing NF, the preferred locality indicating, in terms of structured values of location information, geographical location where the service-requesting NF is deployed;</claim-text><claim-text>obtain a response from the Network Repository Function, wherein the response comprises a locality attribute of a service-providing NF as identified, the service-providing NF having a locality attribute that best matches the preferred locality, whereby the service-providing NF closest to the geographical location where the service-requesting NF is deployed is identified, the service-requesting NF thereby discovering the service-providing NF.</claim-text></claim-text></claim></claims></us-patent-application>