<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230007158A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230007158</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17940836</doc-number><date>20220908</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>JP</country><doc-number>2020-125148</doc-number><date>20200722</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>5</main-group><subgroup>235</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>H</section><class>04</class><subclass>N</subclass><main-group>17</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>J</subclass><main-group>5</main-group><subgroup>10</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>5</main-group><subgroup>2352</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>5</main-group><subgroup>2351</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>H</section><class>04</class><subclass>N</subclass><main-group>17</main-group><subgroup>002</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>J</subclass><main-group>5</main-group><subgroup>10</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>01</class><subclass>J</subclass><main-group>2005</main-group><subgroup>0077</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">IMAGE PROCESSING APPARATUS, IMAGE PROCESSING METHOD, AND COMPUTER READABLE MEDIUM</invention-title><us-related-documents><continuation><relation><parent-doc><document-id><country>US</country><doc-number>PCT/JP2021/008946</doc-number><date>20210308</date></document-id><parent-status>PENDING</parent-status></parent-doc><child-doc><document-id><country>US</country><doc-number>17940836</doc-number></document-id></child-doc></relation></continuation></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>JVCKENWOOD Corporation</orgname><address><city>Yokohama-shi</city><country>JP</country></address></addressbook><residence><country>JP</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>HAYASHI</last-name><first-name>Keita</first-name><address><city>Yokohama-shi</city><country>JP</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>YAMAMOTO</last-name><first-name>Hirofumi</first-name><address><city>Yokohama-shi</city><country>JP</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>ISHIWATA</last-name><first-name>Tadashi</first-name><address><city>Yokohama-shi</city><country>JP</country></address></addressbook></inventor><inventor sequence="03" designation="us-only"><addressbook><last-name>NAKAAKI</last-name><first-name>Yasufumi</first-name><address><city>Yokohama-shi</city><country>JP</country></address></addressbook></inventor><inventor sequence="04" designation="us-only"><addressbook><last-name>TSUCHIYA</last-name><first-name>Keiji</first-name><address><city>Yokohama-shi</city><country>JP</country></address></addressbook></inventor><inventor sequence="05" designation="us-only"><addressbook><last-name>TAKAHASHI</last-name><first-name>Jun</first-name><address><city>Yokohama-shi</city><country>JP</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">In an image processing apparatus, a first correction unit corrects imaging data acquired from an infrared imaging device, based on a first correction table, and outputs first corrected data. A second correction unit generates a second correction table for the imaging data in a state in which a shutter is closed, and outputs second corrected data based on the second correction table. A saturated region detection unit detects a saturated region in the imaging data. A shutter control unit performs closing control for the shutter, based on a result of detection of the saturated region. An abnormal pixel detection unit detects whether or not the imaging data acquired in the state in which the shutter is closed includes an abnormal pixel. A selection unit selects and outputs either the first corrected data or the second corrected data in accordance with a result of detection by the abnormal pixel detection unit.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="79.59mm" wi="158.75mm" file="US20230007158A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="232.33mm" wi="134.11mm" orientation="landscape" file="US20230007158A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="232.66mm" wi="155.87mm" file="US20230007158A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="127.08mm" wi="145.71mm" file="US20230007158A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="218.69mm" wi="89.83mm" file="US20230007158A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="148.51mm" wi="90.42mm" file="US20230007158A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="234.78mm" wi="140.21mm" orientation="landscape" file="US20230007158A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="234.87mm" wi="156.63mm" file="US20230007158A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATION</heading><p id="p-0002" num="0001">The present application is based upon and claims the benefit of priority from Japanese Patent Application No. 2020-125148, filed on Jul. 22, 2020, the disclosure of which is incorporated herein in its entirety by reference.</p><heading id="h-0002" level="1">BACKGROUND</heading><p id="p-0003" num="0002">The present invention relates to an image processing apparatus, an image processing method, and a non-transitory computer readable medium.</p><p id="p-0004" num="0003">A large number of object detection systems using infrared cameras that detect the heat of an object have been developed. Further, it is expected that such an object detection system will be used, for example, to improve the safety of an automobile. Meanwhile, because of the characteristics of the infrared camera that detects the heat of an object, an abnormality may occur in a microbolometer used as an imaging device when an image of sunlight is captured. Therefore, there is a demand for a technology to reduce the effects of sunlight.</p><p id="p-0005" num="0004">For example, in the far-infrared imaging apparatus disclosed in Japanese Unexamined Patent Application Publication No. 2009-005120, it is determined whether or not the quantity of far-infrared rays detected using far-infrared ray detection pixels is equal to or greater than a first quantity, and a shutter is closed when there is a far-infrared ray detection pixel in which the quantity of far-infrared rays detected is equal to or greater than the first quantity. Meanwhile, after the shutter is closed, it is determined for each far-infrared ray detection pixel whether or not the quantity of far-infrared rays detected is less than a second quantity that is smaller than or equal to the first quantity, and the shutter is opened when the quantity of far-infrared rays detected for each of all the far-infrared ray detection pixels is less than the second quantity.</p><heading id="h-0003" level="1">SUMMARY</heading><p id="p-0006" num="0005">The above-described infrared imaging apparatus is used with a reduced dynamic range in order to improve the resolution for object detection. In such a case, a detection signal is saturated even in a temperature range in which an abnormality does not occur in the microbolometer. Therefore, the infrared imaging apparatus may close the shutter more than necessary to protect the microbolometer. The object detection function cannot be used during the period when the shutter is closed. Incidentally, the microbolometer performs calibration (imaging data correction) in order to prevent the accuracy of temperature detection from being degraded. One of typical methods of calibration adjusts the output of the microbolometer in the state in which a mechanical shutter, or a blackbody, is closed (what is called mechanical shutter correction). The mechanical shutter correction includes a process of periodically or intermittently closing the shutter. Therefore, while the shutter is closed, the temperature of an object cannot be detected. Another method of calibration uses no shutter and adjusts output by a preset algorithm (what is called shutterless correction). The shutterless correction is not required to close the shutter for calibration. However, when sunlight enters the microbolometer, the output corresponding to a part having received sunlight becomes an abnormal value. When an abnormal value occurs in the microbolometer, the remediation requires a long time. Therefore, the part outputting an abnormal value cannot correctly detect the temperature of an object. The image processing apparatus and the like that use the microbolometer have a problem as described above.</p><p id="p-0007" num="0006">The present disclosure has been made in order to solve the above-described problem, and an object thereof is to provide an image processing apparatus and the like that reduce image quality degradation and reduce interruption of the sensor function.</p><p id="p-0008" num="0007">An image processing apparatus according to the present embodiment includes a first correction unit, a second correction unit, a saturated region detection unit, a shutter control unit, an abnormal pixel detection unit, and a selection unit. The first correction unit corrects imaging data acquired from an infrared imaging device that captures a thermal image outside of a mobile body, based on a preset first correction table, and outputs first corrected data having been corrected. The second correction unit generates a second correction table for the imaging data in a state in which a shutter is closed, and outputs second corrected data having been corrected based on the generated second correction table. The saturated region detection unit detects that a saturated region is present in the imaging data. The shutter control unit periodically or intermittently performs closing control for the shutter for calibrating the second correction table, in order to protect the infrared imaging device based on a result of detection of the saturated region. The abnormal pixel detection unit detects whether or not the imaging data acquired in the state in which the shutter is closed includes an abnormal pixel pertaining to a pixel having a luminance value exceeding a preset threshold, in the first corrected data. The selection unit selects and outputs either the first corrected data or the second corrected data in accordance with a result of detection by the abnormal pixel detection unit.</p><p id="p-0009" num="0008">An image processing method according to the present embodiment includes a first correction step, a second correction step, a saturated region detection step, a shutter control step, an abnormal pixel detection step, and a selection step. The first correction step corrects imaging data acquired from an infrared imaging device that captures a thermal image outside of a mobile body, based on a preset first correction table, and outputs first corrected data having been corrected. The second correction step generates a second correction table for the imaging data in a state in which a shutter is closed, and outputs second corrected data having been corrected based on the generated second correction table. The saturated region detection step detects that a saturated region is present in the imaging data. The shutter control step periodically performs closing control for the shutter for calibrating the second correction table, in order to protect the infrared imaging device based on a result of detection of the saturated region. The abnormal pixel detection step detects whether or not the imaging data acquired in the state in which the shutter is closed includes an abnormal pixel pertaining to a pixel having a luminance value exceeding a preset threshold, in the first corrected data. The selection step selects and outputs either the first corrected data or the second corrected data in accordance with a result of detection in the abnormal pixel detection step.</p><p id="p-0010" num="0009">A program according to the present embodiment causes a computer to execute the following image processing method. The image processing method according to the present embodiment includes a first correction step, a second correction step, a saturated region detection step, a shutter control step, an abnormal pixel detection step, and a selection step. The first correction step corrects imaging data acquired from an infrared imaging device that captures a thermal image outside of a mobile body, based on a preset first correction table, and outputs first corrected data having been corrected. The second correction step generates a second correction table for the imaging data in a state in which a shutter is closed, and outputs second corrected data having been corrected based on the generated second correction table. The saturated region detection step detects that a saturated region is present in the imaging data. The shutter control step periodically performs closing control for the shutter for calibrating the second correction table, in order to protect the infrared imaging device based on a result of detection of the saturated region. The abnormal pixel detection step detects whether or not the imaging data acquired in the state in which the shutter is closed includes an abnormal pixel pertaining to a pixel having a luminance value exceeding a preset threshold, in the first corrected data. The selection step selects and outputs either the first corrected data or the second corrected data in accordance with a result of detection in the abnormal pixel detection step.</p><p id="p-0011" num="0010">According to the present embodiment, it is possible to provide an image processing apparatus and the like that reduce the image quality degradation and reduce interruption of the sensor function.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram of an image processing apparatus according to a first embodiment.</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a flowchart showing an example of the processes of the image processing apparatus according to the first embodiment.</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>3</b></figref> shows an example of first correction reference data that a first correction unit has.</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>4</b></figref> shows a first example of processes of the image processing apparatus.</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>5</b></figref> shows a second example of processes of the image processing apparatus.</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>6</b></figref> is a block diagram of an image processing apparatus according to a second embodiment.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>7</b></figref> is a flowchart showing an example of the processes of the image processing apparatus according to the second embodiment.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0005" level="1">DETAILED DESCRIPTION</heading><p id="p-0019" num="0018">The present invention will be described hereinafter through embodiments of the present invention. However, the following embodiments are not intended to limit the scope of the invention according to the claims. Further, all the components described in the embodiments are not necessarily indispensable as means for solving the problem. For the clarification of the description, the following descriptions and the drawings are partially omitted and simplified as appropriate. Note that the same elements are denoted by the same reference symbols throughout the drawings, and redundant descriptions are omitted as necessary.</p><heading id="h-0006" level="1">First Embodiment</heading><p id="p-0020" num="0019">Embodiments of the present invention will be described hereinafter with reference to the drawings. <figref idref="DRAWINGS">FIG. <b>1</b></figref> is a block diagram of an image processing apparatus according to a first embodiment. An image processing apparatus <b>100</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref> is a component of a thermal image display system <b>10</b> that captures a thermal image outside of an automobile and displays it on a monitor. The thermal image display system <b>10</b> mainly includes the image processing apparatus <b>100</b>, a microbolometer <b>900</b>, a shutter <b>901</b>, and a monitor <b>902</b>.</p><p id="p-0021" num="0020">The image processing apparatus <b>100</b> will be described below. The image processing apparatus <b>100</b> includes an arithmetic unit such as a Central Processing Unit (CPU) or a Micro Controller Unit (MCU). Further, the image processing apparatus <b>100</b> includes, in addition to the aforementioned arithmetic unit, at least a non-volatile or a volatile memory such as a flash memory or a Dynamic Random Access Memory (DRAM), and a control board comprising other electric circuits. In the image processing apparatus <b>100</b>, programs are installed in the aforementioned arithmetic unit and the like, and the following functions are implemented by a combination of software and hardware.</p><p id="p-0022" num="0021">The image processing apparatus <b>100</b> acquires imaging data of a thermal image captured by the microbolometer <b>900</b>, and performs preset processing on the acquired imaging data. The image processing apparatus <b>100</b> outputs the imaging data on which it has performed the preset processing to the monitor <b>902</b>. The image processing apparatus <b>100</b> mainly includes a defective pixel correction unit <b>110</b>, a pixel non-uniformity correction unit <b>120</b>, an Auto-Gain-Control (AGC) processing unit <b>130</b>, a saturated region detection unit <b>140</b>, and a shutter control unit <b>150</b>. The image processing apparatus <b>100</b> may include a recognition processing unit that recognizes a person or the like based on a thermal image captured by the microbolometer <b>900</b>.</p><p id="p-0023" num="0022">The defective pixel correction unit <b>110</b> receives imaging data from the microbolometer <b>900</b> and corrects data having defective pixels included in the imaging data. For example, the defective pixel correction unit <b>110</b> detects the coordinates of the defective pixels in a state in which the shutter is closed, and stores the detected coordinates of the defective pixels. Further, the defective pixel correction unit <b>110</b> corrects the stored data of the defective pixels by generating interpolation data from data of the adjacent pixels. The defective pixel correction unit <b>110</b> supplies the corrected imaging data to each of the pixel non-uniformity correction unit <b>120</b> and the saturated region detection unit <b>140</b>.</p><p id="p-0024" num="0023">The pixel non-uniformity correction unit <b>120</b> corrects the pixel non-uniform state in the imaging data received from the defective pixel correction unit <b>110</b>, and supplies the corrected imaging data to the AGC processing unit <b>130</b>. The pixel non-uniformity correction unit <b>120</b> mainly includes a first correction unit <b>121</b>, a second correction unit <b>122</b>, an abnormal pixel detection unit <b>123</b> and a selection unit <b>124</b>.</p><p id="p-0025" num="0024">The first correction unit <b>121</b> corrects the imaging data received from the defective pixel correction unit <b>110</b>, and supplies first corrected data that is corrected imaging data to the abnormal pixel detection unit <b>123</b> and the selection unit <b>124</b>. The correction performed by the first correction unit <b>121</b> is what is called shutterless correction. That is, the first correction unit <b>121</b> generates the first corrected data by correcting the imaging data, based on a preset first correction table and a gain correction table. A specific example of the shutterless correction will be described later.</p><p id="p-0026" num="0025">The second correction unit generates a second correction table for the imaging data in the state in which the shutter <b>901</b> is closed, and supplies the selection unit <b>124</b> with second corrected data that is imaging data corrected in accordance with the generated second correction table and the preset gain correction table. The correction performed by the second correction unit <b>122</b> is what is called mechanical shutter correction.</p><p id="p-0027" num="0026">The above-described gain correction table is a correction table preset to correct the gain for the imaging data. The gain correction table is generated by, for example, two point correction, linear interpolation, least-squares method, nonlinear interpolation, etc.</p><p id="p-0028" num="0027">To achieve the above-described functions, the second correction unit <b>122</b> monitors a condition for calibrating the second correction table. The calibration condition is preset, and is for a case in which the temperature at the vicinity of the microbolometer exceeds a predetermined range, for example. Another example of the correction condition is for a case in which a preset period elapses after the latest mechanical shutter correction. The output of the microbolometer may be drifted as time elapses, and the detection accuracy may be reduced. Therefore, when the condition for performing the mechanical shutter correction is satisfied, the second correction unit <b>122</b> issues an instruction that the shutter is to be closed, to the shutter control unit <b>150</b>.</p><p id="p-0029" num="0028">When the second correction unit <b>122</b> receives the imaging data in the state in which the shutter is closed, it updates the second correction table, based on the luminance value of the imaging data in the state in which the shutter is closed. The second correction unit <b>122</b> then corrects the imaging data using the calibrated second correction table and the gain correction table. Note that, for example, the second correction table is calibrated in accordance with the imaging data and the gain correction table.</p><p id="p-0030" num="0029">The abnormal pixel detection unit <b>123</b> receives the first corrected data in a state in which the shutter <b>901</b> is closed, and detects whether or not the received first corrected data includes an abnormal pixel pertaining to a pixel having a luminance value exceeding a preset threshold. The abnormal pixel detection unit <b>123</b> supplies the selection unit <b>124</b> with a signal about a result of detection.</p><p id="p-0031" num="0030">Here, the abnormal pixel is, for example, a pixel indicating a luminance value exceeding a preset threshold in imaging data in the state in which the shutter <b>901</b> is closed. The luminance value exceeding the preset threshold is a value equal to or greater than 100 in a case in which the luminance value is indicated in 16384-gradation levels from 0 to 16383, for example. The imaging data in the state in which the shutter <b>901</b> is closed has been acquired by capturing the shutter, which is a blackbody. Accordingly, when there is no abnormality, the differences between the luminance values of adjacent pixels in the first corrected data have values of zero or close to zero. However, when sunlight enters the microbolometer, pixel data on pixels receiving the sunlight come into an abnormal state. The differences between the luminance values of the pixels in the abnormal state and the luminance values of the pixels in a not abnormal state do not have a value of zero or close to zero. In this case, the pixel data on pixels receiving the sunlight has values acquired by offsetting a predetermined luminance value.</p><p id="p-0032" num="0031">A case in which a state of pixel data is changed from a normal state to an abnormal state will be described below. When the microbolometer <b>900</b> captures an image of the sun, the luminance value of each of the pixels in the region in which an image of the sun is captured reaches the upper limit and becomes saturated. In general, the microbolometer <b>900</b> is designed so that an upper limit of the dynamic range is, for example, 200 degrees. In this case, even when the dynamic range is set to 200 degrees, which is the upper limit, the pixels in which an image of the sun is captured are saturated. At this time, a state of the imaging device that has captured an image of the sun is changed from a normal state to an abnormal state in which it cannot correctly output a signal. Further, it is known that it takes a certain amount of time for the imaging device in an abnormal state to return to a normal state even after it is protected from sunlight by closing the shutter.</p><p id="p-0033" num="0032">The preset threshold that is set in the abnormal pixel detection unit <b>123</b> may be set so that the above-described pixel indicating the predetermined luminance value is equal to or greater by 5% than the average value of the entire image, for example. The abnormal pixel detection unit <b>123</b> generates a signal indicating whether to include any abnormal pixel or not, as the signal about the result of detection, in the condition set as described above.</p><p id="p-0034" num="0033">Note that the abnormal pixel detection unit <b>123</b> receives information about an opened/closed state of the shutter <b>901</b>, from the shutter control unit <b>150</b>. Therefore, the abnormal pixel detection unit <b>123</b> can recognize whether the shutter <b>901</b> is in an opened state or a closed state for each imaging data item supplied from the first correction unit <b>121</b>. Note that the imaging data may include information indicating whether the data has been generated in the opened state of the shutter <b>901</b> or in the closed state of the shutter <b>901</b>. In this case, the abnormal pixel detection unit <b>123</b> can detect the opened/closed state of the shutter <b>901</b> from the information included in the imaging data, for each imaging data item received from the first correction unit <b>121</b>.</p><p id="p-0035" num="0034">The selection unit <b>124</b> receives the imaging data having been subjected to the shutterless correction, from the first correction unit <b>121</b>, and receives the imaging data having been subjected to the mechanical shutter correction, from the second correction unit <b>122</b>. Furthermore, the selection unit <b>124</b> receives a signal about a result of detection of the abnormal pixel, from the abnormal pixel detection unit <b>123</b>. The selection unit <b>124</b> selects either the first corrected data or the second corrected data in accordance with the result of detection received from the abnormal pixel detection unit <b>123</b>, and outputs the selected imaging data to the AGC processing unit <b>130</b>.</p><p id="p-0036" num="0035">The selection unit <b>124</b> may select the first corrected data or the second corrected data in accordance with whether or not the number of abnormal pixels included in the first corrected data in the imaging data captured in the state in which the shutter <b>901</b> is closed exceeds a threshold or not. In this case, the selection unit <b>124</b> may select the first corrected data or the second corrected data in accordance with whether or not the abnormal pixels are adjacent to each other and the number of abnormal pixels adjacent to each other exceeds the threshold.</p><p id="p-0037" num="0036">According to the above-described configuration, when abnormal pixels with reference to the preset condition are detected in the first corrected data in the state in which the shutter <b>901</b> is closed, the selection unit <b>124</b> selects the second corrected data. On the other hand, when no abnormal pixel with reference to the preset condition is detected in the first corrected data in the state in which the shutter <b>901</b> is closed, the selection unit <b>124</b> selects the first corrected data.</p><p id="p-0038" num="0037">The AGC processing unit <b>130</b> receives the imaging data from the pixel non-uniformity correction unit <b>120</b> and adjusts the contrast of the imaging data. The AGC processing unit <b>130</b> adjusts the contrast of the imaging data, to thereby generate an image which it is easy for a user to recognize when the thermal image is displayed on the monitor <b>902</b>. Further, by adjusting the contrast of the imaging data, when the object recognition processing is performed on the thermal image, the AGC processing unit <b>130</b> can output a thermal image that is suitable for recognition processing. The AGC processing unit <b>130</b> uses, for example, a histogram equalization method such as contrast limitation adaptive histogram equalization for the imaging data.</p><p id="p-0039" num="0038">The saturated region detection unit <b>140</b> receives imaging data from the defective pixel correction unit <b>110</b> and detects a saturated region from the received imaging data. The saturated region is a region in which a saturated pixel or a pixel substantially saturated is present. The saturated pixel refers to a pixel in a state in which the value of pixel data reaches an upper limit. For example, when a luminance level of each pixel of imaging data is expressed by 14 bits from 0 to 16383, a pixel of the coordinate in which a luminance level is 16383 is referred to as a saturated pixel.</p><p id="p-0040" num="0039">For example, when the saturated region detection unit <b>140</b> detects that four or more adjacent pixels are saturated pixels, it determines that a saturated region is present. Alternatively, for example, when a luminance value of each of nine or more adjacent pixels is 98% or more of the upper limit of the luminance value, the saturated region detection unit <b>140</b> determines that a saturated region is present. When the saturated region detection unit <b>140</b> detects that a saturated region is present in the received imaging data, it supplies a signal indicating a result of the detection of the saturated region to the shutter control unit <b>150</b>.</p><p id="p-0041" num="0040">The shutter control unit <b>150</b> performs closing control for the shutter or opening control for the shutter in accordance with a result of detection of the saturated region. For example, when the saturated region detection unit <b>140</b> detects the saturated region, the shutter control unit <b>150</b> closes the shutter to protect the infrared imaging device. More specifically, the shutter control unit <b>150</b> is connected to the saturated region detection unit <b>140</b> and receives an instruction that the shutter <b>901</b> is to be closed from the saturated region detection unit <b>140</b>. When the shutter control unit <b>150</b> receives the instruction that the shutter <b>901</b> is to be closed from the saturated region detection unit <b>140</b>, it closes the shutter <b>901</b> in accordance with this instruction.</p><p id="p-0042" num="0041">When the shutter control unit <b>150</b> receives the instruction that the shutter <b>901</b> is to be closed from the pixel non-uniformity correction unit <b>120</b>, it closes the shutter <b>901</b> in accordance with such an instruction. When the shutter control unit <b>150</b> receives the instruction that the shutter <b>901</b> is to be opened from the pixel non-uniformity correction unit <b>120</b>, it opens the shutter <b>901</b> in accordance with such an instruction. The shutter control unit <b>150</b> supplies the pixel non-uniformity correction unit <b>120</b> with a signal about the shutter-opened/closed state.</p><p id="p-0043" num="0042">Further, when the selection unit <b>124</b> selects the first corrected data and the shutter control unit <b>150</b> receives the signal indicating the closing control for the shutter <b>901</b>, it performs closing control for the shutter <b>901</b>. Further alternatively, when the selection unit <b>124</b> selects the second corrected data and the shutter control unit <b>150</b> receives the signal indicating the closing control for the shutter <b>901</b>, it prevents closing control for the shutter <b>901</b>.</p><p id="p-0044" num="0043">The image processing apparatus <b>100</b> has been described above. Next, an overview of each component connected to the image processing apparatus <b>100</b> will be described.</p><p id="p-0045" num="0044">The microbolometer <b>900</b> is an embodiment of an infrared imaging device. The microbolometer <b>900</b> is composed of infrared detection elements arranged in a matrix. The infrared detection elements detect far-infrared rays. Further, the microbolometer <b>900</b> performs photoelectric conversion of the detected far-infrared rays to generate imaging data, and supplies the generated imaging data to the defective pixel correction unit <b>110</b> of the image processing apparatus <b>100</b>.</p><p id="p-0046" num="0045">The microbolometer <b>900</b> is mounted on a mobile body so that it captures a thermal image outside of the mobile body. When the mobile body is an automobile, for example, the microbolometer <b>900</b> is installed therein so as to face in the direction to the front of the automobile so that it can capture an image of the traveling direction of the automobile. However, it may instead be installed in the automobile so as to face in other directions.</p><p id="p-0047" num="0046">The shutter <b>901</b> allows external light to enter the microbolometer <b>900</b> or prevents external light from entering it. These operations performed by the shutter <b>901</b> are controlled by the shutter control unit <b>150</b>. When the shutter <b>901</b> is open, the shutter <b>901</b> allows external light to pass through it, and thus causes the microbolometer <b>900</b> to receive the external light. When the shutter <b>901</b> is closed, the shutter <b>901</b> blocks external light to protect the microbolometer <b>900</b> from the external light. Further, the shutter <b>901</b> has a function of calibrating the second correction table in the microbolometer <b>900</b>.</p><p id="p-0048" num="0047">The monitor <b>902</b> is a display apparatus installed so that it can present information to a user, and includes, for example, a liquid crystal panel or an organic Electro Luminescence (EL) panel. The monitor <b>902</b> is connected to the AGC processing unit <b>130</b> of the image processing apparatus <b>100</b>, receives imaging data from the AGC processing unit <b>130</b>, and displays the received imaging data. The monitor <b>902</b> may display the imaging data including an image showing a recognized person.</p><p id="p-0049" num="0048">Next, referring to <figref idref="DRAWINGS">FIG. <b>2</b></figref>, processes executed by the image processing apparatus <b>100</b> will be described. <figref idref="DRAWINGS">FIG. <b>2</b></figref> is a flowchart showing an example of the processes of the image processing apparatus according to the first embodiment. The flowchart shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref> is started when the image processing apparatus <b>100</b> receives imaging data from the microbolometer <b>900</b>.</p><p id="p-0050" num="0049">First, when the image processing apparatus <b>100</b> receives imaging data from the microbolometer <b>900</b>, the saturated region detection unit <b>140</b> starts detection of a saturated region (Step S<b>10</b>). Next, the image processing apparatus <b>100</b> determines whether or not a saturated region has been detected in the imaging data (Step S<b>11</b>).</p><p id="p-0051" num="0050">When the image processing apparatus <b>100</b> determines that a saturated region has been detected in the imaging data (Step S<b>11</b>: Yes), it closes the shutter <b>901</b> (Step S<b>12</b>). The image processing apparatus <b>100</b> then advances the process to Step S<b>16</b>. When the image processing apparatus <b>100</b> does not determine that a saturated region has been detected in the imaging data (Step S<b>11</b>: NO), it advances the process to Step S<b>13</b>.</p><p id="p-0052" num="0051">In Step S<b>13</b>, the image processing apparatus <b>100</b> determines whether or not the pixel non-uniformity correction unit <b>120</b> is outputting the second corrected data (data on mechanical shutter correction) (Step S<b>13</b>). When it is determined that the pixel non-uniformity correction unit <b>120</b> is outputting the second corrected data (Step S<b>13</b>: YES), the image processing apparatus <b>100</b> advances the process to Step S<b>14</b>. When the pixel non-uniformity correction unit <b>120</b> is outputting the first corrected data, the image processing apparatus <b>100</b> does not determine that the pixel non-uniformity correction unit <b>120</b> is outputting the second corrected data (Step S<b>13</b>: NO). In this case, the image processing apparatus <b>100</b> returns the process to Step S<b>11</b>.</p><p id="p-0053" num="0052">In Step S<b>14</b>, the second correction unit <b>122</b> of the image processing apparatus <b>100</b> determines whether calibration is required or not (Step S<b>14</b>). When the condition for calibrating the second correction table is satisfied, the second correction unit <b>122</b> determines that the calibration is required (Step S<b>14</b>: YES). In this case, the second correction unit <b>122</b> supplies the shutter control unit <b>150</b> with a signal for instruction to close the shutter <b>901</b>. The shutter control unit <b>150</b> then closes the shutter <b>901</b> (Step S<b>15</b>). Further, the image processing apparatus <b>100</b> advances the process to Step S<b>16</b>. On the other hand, when the condition for performing mechanical shutter correction is not satisfied, the second correction unit <b>122</b> does not determine that calibration is required (Step S<b>14</b>: NO). In this case, the image processing apparatus <b>100</b> returns the process to Step S<b>11</b>.</p><p id="p-0054" num="0053">In Step S<b>16</b>, the image processing apparatus <b>100</b> determines whether abnormal pixels have been detected in the first corrected data (imaging data having subjected to shutterless correction) or not (Step S<b>16</b>). More specifically, the selection unit <b>124</b> of the image processing apparatus <b>100</b> determines whether or not the signal received from the abnormal pixel detection unit <b>123</b> indicates that abnormal pixels have been detected. When the image processing apparatus <b>100</b> determines that abnormal pixels have been detected in the first corrected data (Step S<b>16</b>: Yes), it calibrates the second correction table (Step S<b>17</b>). The image processing apparatus <b>100</b> then advances the process to Step S<b>18</b>. On the other hand, when the image processing apparatus <b>100</b> does not determine that abnormal pixels have been detected in the first corrected data (Step S<b>16</b>: NO), it advances the process to Step S<b>20</b>.</p><p id="p-0055" num="0054">The image processing apparatus <b>100</b> having advanced the process to Step S<b>18</b> is set so as not to output the first corrected data including the abnormal pixels but output the second corrected data (imaging data having been subjected to mechanical shutter correction). That is, the selection unit <b>124</b> selects the second corrected data, and outputs the selected second corrected data to the AGC processing unit <b>130</b> (Step S<b>18</b>). The image processing apparatus <b>100</b> then advances the process to Step S<b>19</b>.</p><p id="p-0056" num="0055">The image processing apparatus <b>100</b> having advanced the process to Step S<b>20</b> is set to output the first corrected data including no abnormal pixel. That is, the selection unit <b>124</b> selects the first corrected data, and outputs the selected first corrected data to the AGC processing unit <b>130</b> (Step S<b>20</b>). The image processing apparatus <b>100</b> then advances the process to Step S<b>19</b>.</p><p id="p-0057" num="0056">In Step S<b>19</b>, the shutter control unit <b>150</b> of the image processing apparatus <b>100</b> receives the instruction from the pixel non-uniformity correction unit <b>120</b> and opens the shutter (Step S<b>19</b>). The image processing apparatus <b>100</b> then returns the process to Step S<b>11</b>. The image processing apparatus <b>100</b> having returned the process to Step S<b>11</b> repeats the above-described processes.</p><p id="p-0058" num="0057">Next, referring to <figref idref="DRAWINGS">FIG. <b>3</b></figref>, an example of the shutterless correction performed by the first correction unit <b>121</b> will be described. <figref idref="DRAWINGS">FIG. <b>3</b></figref> shows an example of first correction reference data that the first correction unit <b>121</b> has. In a graph shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the ordinate axis indicates the luminance value of the microbolometer, and the abscissa axis indicates the ambient temperature corresponding to the luminance value of the microbolometer. In the graph of <figref idref="DRAWINGS">FIG. <b>3</b></figref>, three pixel lines are plotted. These three lines indicate the relationships between output pixel values corresponding to the ambient temperatures of the microbolometer. The line indicated by a solid line indicates the relationship between the average luminance value in the captured image by the microbolometer and the ambient temperature. The lines respectively indicated by an alternate long and short dash line and a broken line indicate the relationship between the luminance value for a certain pixel by the microbolometer and the ambient temperature.</p><p id="p-0059" num="0058">In the graph shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, for example, when the temperature RT is T<b>1</b>, the image processing apparatus <b>100</b> saves, as a correction table <b>1</b>, an offset value for each pixel calculated with reference to an average luminance value B<b>1</b>. Further, when the temperature RT is T<b>2</b>, the image processing apparatus <b>100</b> saves, as a correction table <b>2</b>, an offset value for each pixel calculated with reference to a luminance value B<b>2</b>. Further, when the temperature RT is T<b>3</b>, the image processing apparatus <b>100</b> saves, as a correction table <b>3</b>, an offset value for each pixel calculated with reference to a luminance value B<b>3</b>. Data items between the correction tables <b>1</b> and <b>2</b> and between the correction tables <b>2</b> and <b>3</b> are interpolated by an interpolation process, such as linear approximation or spline approximation. The first correction unit <b>121</b> monitors the temperature RT in the vicinity of the microbolometer, and sets an optimal correction table depending on the temperature RT. Accordingly, the first correction unit <b>121</b> can correct the imaging data without closing the shutter.</p><p id="p-0060" num="0059">Note that the above-described relationship between the luminance value and the ambient temperature is inapplicable to cases in which the microbolometer receives sunlight. When the microbolometer receives sunlight, the luminance value at the pixel having received sunlight indicates an abnormal value. In this case, the imaging data cannot appropriately be corrected based on the above-described correction table. The image processing apparatus <b>100</b> considers the characteristics of such shutterless correction, and when abnormal pixels are included, this apparatus outputs the imaging data through mechanical shutter correction instead of imaging data through shutterless correction.</p><p id="p-0061" num="0060">Note that in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, for the sake of facilitating understanding, the three lines are indicated. In actuality, there are lines as many as the number of pixels of the microbolometer. The lines shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> are straight lines. Alternatively, the lines of characteristics of pixels may be lines corresponding to polygonal lines or curved lines. The above-described correction tables may include finer correction tables or be a smaller number of tables. The graph shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref> is an example for illustrating the principle of the first correction unit.</p><p id="p-0062" num="0061">Next, the processes of the image processing apparatus <b>100</b> will be described with a specific example. <figref idref="DRAWINGS">FIG. <b>4</b></figref> shows a first example of processes of the image processing apparatus. <figref idref="DRAWINGS">FIG. <b>4</b></figref> includes, from the top, a thermal image A<b>11</b>, a thermal image A<b>12</b> and a thermal image A<b>13</b>. The thermal image A<b>11</b> is an example of an image included in imaging data received by the image processing apparatus <b>100</b> from the microbolometer <b>900</b>. The thermal image A<b>11</b> is an image captured in the traveling direction of a vehicle mounted with the thermal image display system <b>10</b>. The thermal image A<b>11</b> includes an image of another vehicle D<b>11</b>. The other vehicle D<b>11</b> includes a muffler D<b>12</b>. The thermal image A<b>11</b> includes, in addition to the other vehicle D<b>11</b>, an image of the sun D<b>13</b> at the top left of the image.</p><p id="p-0063" num="0062">In the thermal image A<b>11</b>, since an electromagnetic wave radiated by an object is detected, a part of the thermal image A<b>11</b> where heat is high is brightly displayed. Therefore, in the thermal image A<b>11</b>, the other vehicle D<b>11</b> is displayed relatively brighter than a background image. Further, in the other vehicle D<b>11</b>, the color of the muffler D<b>12</b> having a particularly high temperature is displayed in white. Since the sun D<b>13</b> has a high temperature, the color of it is displayed in white. The luminances of the muffler D<b>12</b> and the sun D<b>13</b> displayed in white in the thermal image A<b>11</b> are in a saturated state. Since the thermal image A<b>11</b> includes a saturated region, the image processing apparatus <b>100</b> shuts the shutter <b>901</b>.</p><p id="p-0064" num="0063">The thermal image A<b>12</b> shown below the thermal image A<b>11</b> is a thermal image pertaining to imaging data acquired in the state in which the shutter <b>901</b> is closed. The thermal image A<b>12</b> includes an abnormal pixel group D<b>23</b>. The abnormal pixel group D<b>23</b> has been caused by imaging the sun D<b>13</b> indicated in the thermal image A<b>11</b>. Since the abnormal pixel group D<b>23</b> is subjected to correction based on the preset first correction table, this group is not corrected in the first corrected data either. Therefore, the image processing apparatus <b>100</b> selects output of the second corrected data, for the thermal image A<b>12</b> including the abnormal pixel group D<b>23</b>.</p><p id="p-0065" num="0064">The thermal image A<b>13</b> indicated below the thermal image A<b>12</b> is in a state in which the thermal image A<b>12</b> has been corrected by the second correction unit <b>122</b>. That is, the thermal image A<b>13</b> pertains to the second corrected data concerning the imaging data that includes abnormal pixels. The second correction table is a generated correction table concerning the imaging data including abnormal pixels. Accordingly, the thermal image A<b>13</b> includes a corrected pixel group D<b>33</b>. The corrected pixel group D<b>33</b> is changed from white to dark gray by second correction.</p><p id="p-0066" num="0065">As described above, when the imaging data includes abnormal pixels, the image processing apparatus <b>100</b> selects and outputs the second corrected data. Accordingly, the image processing apparatus <b>100</b> can reduce image quality degradation due to abnormal pixels.</p><p id="p-0067" num="0066">Next, referring to <figref idref="DRAWINGS">FIG. <b>5</b></figref>, another example of processes executed by the image processing apparatus <b>100</b> will be described. <figref idref="DRAWINGS">FIG. <b>5</b></figref> shows a second example of processes of the image processing apparatus. <figref idref="DRAWINGS">FIG. <b>5</b></figref> includes, from the top, a thermal image A<b>14</b> and a thermal image A<b>15</b>. The thermal image A<b>14</b> is an example of an image included in imaging data received by the image processing apparatus <b>100</b> from the microbolometer <b>900</b>. The thermal image A<b>14</b> is an image captured in the traveling direction of a vehicle mounted with the thermal image display system <b>10</b>. The thermal image A<b>14</b> includes an image of another vehicle D<b>11</b>. The other vehicle D<b>11</b> includes a muffler D<b>12</b>. Note that the thermal image A<b>14</b> is different from the thermal image A<b>11</b> shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref> in that the thermal image A<b>14</b> includes no image of the sun.</p><p id="p-0068" num="0067">In the thermal image A<b>14</b>, the color of the muffler D<b>12</b> in the other vehicle D<b>11</b> that has a particularly high temperature is displayed in white. That is, the luminance of the muffler D<b>12</b> displayed in white in the thermal image A<b>14</b> is in the saturated state. Since the thermal image A<b>14</b> includes a saturated region, the image processing apparatus <b>100</b> shuts the shutter <b>901</b>.</p><p id="p-0069" num="0068">The thermal image A<b>15</b> indicated below the thermal image A<b>14</b> is a thermal image pertaining to imaging data acquired in the state in which the shutter <b>901</b> is closed. The thermal image A<b>15</b> includes no abnormal pixel group. Therefore, the image processing apparatus <b>100</b> selects output of the first corrected data, for the thermal image A<b>14</b>.</p><p id="p-0070" num="0069">As described above, when the imaging data includes no abnormal pixel, the image processing apparatus <b>100</b> selects and outputs the first corrected data. While the image processing apparatus <b>100</b> outputs the first corrected data, it does not update the second correction table pertaining to the second corrected data in the second correction unit. In other words, while the image processing apparatus <b>100</b> outputs the first corrected data, it does not perform the operation of closing the shutter <b>901</b> as an operation for updating the second corrected data. The image processing apparatus <b>100</b> can thus reduce interruption of the sensor function.</p><p id="p-0071" num="0070">The first embodiment has thus been described above. The image processing apparatus <b>100</b> according to the first embodiment executes the first correction and the second correction in parallel, and outputs the first corrected data when no abnormal pixel is included, and outputs the second corrected data when abnormal pixels are included. While the image processing apparatus <b>100</b> outputs the first corrected data, it does not perform the operation of closing the shutter <b>901</b> for updating the second corrected table. That is, according to the first embodiment, it is possible to provide the image processing apparatus and the like that reduce image quality degradation and reduce interruption of the sensor function.</p><heading id="h-0007" level="1">Second Embodiment</heading><p id="p-0072" num="0071">Next, a second embodiment will be described. An image processing apparatus according to a second embodiment is different from the image processing apparatus of the first embodiment in that the apparatus of the second embodiment controls the dynamic range of the microbolometer. <figref idref="DRAWINGS">FIG. <b>6</b></figref> is a block diagram of an image processing apparatus according to the second embodiment.</p><p id="p-0073" num="0072">A thermal image display system <b>10</b> shown in <figref idref="DRAWINGS">FIG. <b>6</b></figref> includes an image processing apparatus <b>200</b> instead of the image processing apparatus <b>100</b>. The image processing apparatus <b>200</b> is different from the image processing apparatus <b>100</b> in that the image processing apparatus <b>200</b> mainly includes a dynamic range control unit <b>170</b>.</p><p id="p-0074" num="0073">The dynamic range control unit <b>170</b>, in cooperation with the saturated region detection unit <b>140</b>, sets the dynamic range of the microbolometer to a first temperature range or a second temperature range in which the temperature on at least the upper limit side is higher than that of the first temperature range in accordance with the result of the detection of the saturated region. The dynamic range control unit <b>170</b> is connected to the saturated region detection unit <b>140</b> and receives a signal indicating that a saturated region has been detected. Further, the dynamic range control unit <b>170</b> is connected to the microbolometer <b>900</b> and supplies a signal for instructing that the dynamic range is to be set. Note that the dynamic range in this embodiment may also be referred as a &#x201c;scene dynamic range&#x201d;.</p><p id="p-0075" num="0074">More specifically, for example, when the dynamic range is set to the first temperature range and the saturated region detection unit <b>140</b> detects a saturated region, the dynamic range control unit <b>170</b> changes the setting of the dynamic range from the first temperature range to the second temperature range. Further, for example, when the dynamic range is set to the second temperature range and the saturated region detection unit <b>140</b> does not detect a saturated region, the dynamic range control unit <b>170</b> changes the setting of the dynamic range from the second temperature range to the first temperature range.</p><p id="p-0076" num="0075">Note that when the dynamic range control unit <b>170</b> performs processing for setting the dynamic range to the first temperature range and the second temperature range, the dynamic range control unit <b>170</b>, for example, changes the setting of an integration time of the microbolometer <b>900</b>. The microbolometer <b>900</b> changes the exposure time by changing the setting of the integration time. When the integration time becomes relatively short, the dynamic range of a signal output from the microbolometer <b>900</b> becomes relatively wide. That is, when the dynamic range is changed from the first temperature range to the second temperature range, the dynamic range control unit <b>170</b> sends an instruction to the microbolometer <b>900</b> to reduce the integration time.</p><p id="p-0077" num="0076">Note that the instruction about the dynamic range may be an instruction about the setting of gain instead of the setting of the integration time. In a case in which the gain is set, when the dynamic range is changed from the first temperature range to the second temperature range, the dynamic range control unit <b>170</b> sends an instruction to the microbolometer <b>900</b> to reduce the gain.</p><p id="p-0078" num="0077">Further, the saturated region detection unit <b>140</b> in this embodiment acquires information about the setting of the dynamic range from the dynamic range control unit <b>170</b>. The information about the setting of the dynamic range includes information indicating whether the dynamic range set in the microbolometer <b>900</b> is set to the first temperature range or the second temperature range. The first temperature range is set so that, for example, a temperature range detected by the microbolometer is 10 to 50 degrees. The second temperature range is a range in which the upper limit is set higher than that of the first temperature range, and is set so that, for example, a temperature range detected by the microbolometer is 10 to 200 degrees. When the dynamic range is set to the second temperature range and the saturated region detection unit <b>140</b> detects the above-described saturated region in the acquired imaging data, the saturated region detection unit <b>140</b> supplies a signal for instructing that the shutter is to be closed to the shutter control unit <b>150</b>.</p><p id="p-0079" num="0078">Next, referring to <figref idref="DRAWINGS">FIG. <b>7</b></figref>, processes performed by the image processing apparatus <b>200</b> will be described. <figref idref="DRAWINGS">FIG. <b>7</b></figref> is a flowchart showing an example of the processes of the image processing apparatus according to the second embodiment. The flowchart shown in <figref idref="DRAWINGS">FIG. <b>7</b></figref> is different from the flowchart according to the first embodiment in the processes after Step S<b>11</b> and before Step S<b>16</b>. Hereinafter, the points different from those of the flowchart according to the first embodiment will be mainly described. Note that for explanatory convenience, in the following description, the first temperature range set by the dynamic range control unit <b>170</b> is referred to as DR<b>1</b>, and the second temperature range is referred to as DR<b>2</b>.</p><p id="p-0080" num="0079">If the saturated region is detected in Step S<b>11</b> (Step S<b>11</b>: YES), the image processing apparatus <b>200</b> allows the dynamic range control unit <b>170</b> to change the setting of the dynamic range from the first temperature range (DR<b>1</b>) to the second temperature range (DR<b>2</b>) (Step S<b>21</b>). The saturated region detection unit <b>140</b> of the image processing apparatus <b>200</b> determines whether or not to detect a saturated region in the imaging data with the dynamic range having been changed to DR<b>2</b> (Step S<b>22</b>).</p><p id="p-0081" num="0080">If it is determined that a saturated region is detected in imaging data with DR<b>2</b> (Step S<b>22</b>: YES), the image processing apparatus <b>200</b> closes the shutter <b>901</b> (Step S<b>24</b>), further changes the setting of the dynamic range from DR<b>2</b> to DR<b>1</b> (Step S<b>25</b>) and advances the process to Step S<b>16</b>. On the other hand, if it is not determined that a saturated region has been detected in the imaging data with DR<b>2</b> (Step S<b>22</b>: NO), the image processing apparatus <b>100</b> changes the setting of the dynamic range from DR<b>2</b> to DR<b>1</b> (Step S<b>23</b>) and further advances the process to Step S<b>13</b>. The processes thereafter are similar to those of the flowchart according to the first embodiment.</p><p id="p-0082" num="0081">The second embodiment has thus been described. According to the above-described configuration, when the setting of the dynamic range is the first temperature range, the image processing apparatus <b>200</b> does not perform control of shutting the shutter, and changes the setting of the dynamic range from the first temperature range to the second temperature range. When a saturated region is detected in the imaging data acquired from the microbolometer set to the second temperature range, the image processing apparatus <b>200</b> performs control of closing the shutter <b>901</b>. Therefore, the image processing apparatus <b>200</b> can prevent the operation of closing the shutter when a saturated region is detected. Therefore, the image processing apparatus <b>200</b> can reduce interruption of the sensor function. Consequently, according to the second embodiment, it is possible to provide the image processing apparatus and the like that reduce image quality degradation and reduce interruption of the sensor function.</p><p id="p-0083" num="0082">Note that the above-described program can be stored and provided to a computer using any type of non-transitory computer readable media. The non-transitory computer readable media includes any type of tangible storage media. Examples of the non-transitory computer readable media include magnetic storage media (such as flexible disks, magnetic tapes, hard disk drives, etc.), optical magnetic storage media (e.g., magneto-optical disks), CD-ROM (Read Only Memory), CD-R, CD-R/W, and semiconductor memories (such as mask ROM, PROM (Programmable ROM), EPROM (Erasable PROM), flash ROM, RAM (Random Access Memory), etc.). The program may be provided to a computer using any type of transitory computer readable media. Examples of the transitory computer readable media include electric signals, optical signals, and electromagnetic waves. The transitory computer readable media can provide the program to a computer via a wired communication line such as an electric wire and an optical fiber, or a wireless communication line.</p><p id="p-0084" num="0083">Note that the present invention is not limited to the above-described embodiments and may be changed as appropriate without departing from the spirit of the present invention. For example, the image processing apparatus can be applied not only to an automobile but also to a mobile body such as a motorcycle, a ship, an airplane, a mobile robot, and a drone.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-claim-statement>What is claimed is:</us-claim-statement><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. An image processing apparatus comprising:<claim-text>a first correction unit configured to correct imaging data acquired from an infrared imaging device that captures a thermal image outside of a mobile body, based on a preset first correction table, and output first corrected data having been corrected;</claim-text><claim-text>a second correction unit configured to generate a second correction table for the imaging data in a state in which a shutter is closed, and output second corrected data having been corrected based on the generated second correction table;</claim-text><claim-text>a saturated region detection unit configured to detect that a saturated region is present in the imaging data;</claim-text><claim-text>a shutter control unit configured to perform closing control for the shutter for protecting the infrared imaging device based on a result of detection of the saturated region;</claim-text><claim-text>an abnormal pixel detection unit configured to detect whether or not the imaging data acquired in the state in which the shutter is closed includes an abnormal pixel that is included in the first corrected data and pertains to a pixel having a luminance value exceeding a preset threshold; and</claim-text><claim-text>a selection unit configured to select and output either the first corrected data or the second corrected data in accordance with a result of detection by the abnormal pixel detection unit.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The image processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the selection unit selects the first corrected data or the second corrected data in accordance with whether or not the luminance value of the abnormal pixel included in the first corrected data concerning the imaging data captured in the state in which the shutter is closed exceeds a threshold.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The image processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein<claim-text>the second correction unit supplies the shutter control unit with a signal for instruction in the closing control for the shutter, based on a preset calibration condition, and</claim-text><claim-text>when the selection unit selects the first corrected data and the shutter control unit receives the signal for instruction in the closing control for the shutter, the shutter control unit performs the closing control for the shutter, and when the selection unit selects the second corrected data and the shutter control unit receives the signal for instruction in the closing control for the shutter, the shutter control unit prevents the closing control of the shutter.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. An image processing method comprising:<claim-text>a first correction step of correcting imaging data acquired from an infrared imaging device that captures a thermal image outside of a mobile body, based on a preset first correction table, and outputting first corrected data having been corrected;</claim-text><claim-text>a second correction step of generating a second correction table for the imaging data in a state in which a shutter is closed, and outputting second corrected data having been corrected based on the generated second correction table;</claim-text><claim-text>a saturated region detection step of detecting that a saturated region is present in the imaging data;</claim-text><claim-text>a shutter control step of performing closing control for the shutter for protecting the infrared imaging device based on a result of detection of the saturated region;</claim-text><claim-text>an abnormal pixel detection step of detecting whether or not the imaging data acquired in the state in which the shutter is closed includes an abnormal pixel that is a pixel having a luminance value exceeding a preset threshold; and</claim-text><claim-text>a selection step of selecting and outputting either the first corrected data or the second corrected data in accordance with a result of detection in the abnormal pixel detection step.</claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. A non-transitory computer readable medium storing a program causing a computer to execute an image processing method comprising:<claim-text>a first correction step of correcting imaging data acquired from an infrared imaging device that captures a thermal image outside of a mobile body, based on a preset first correction table, and outputting first corrected data having been corrected;</claim-text><claim-text>a second correction step of generating a second correction table for the imaging data in a state in which a shutter is closed, and outputting second corrected data having been corrected based on the generated second correction table;</claim-text><claim-text>a saturated region detection step of detecting that a saturated region is present in the imaging data;</claim-text><claim-text>a shutter control step of performing closing control for the shutter for protecting the infrared imaging device based on a result of detection of the saturated region;</claim-text><claim-text>an abnormal pixel detection step of detecting whether or not the imaging data acquired in the state in which the shutter is closed includes an abnormal pixel that is a pixel having a luminance value exceeding a preset threshold; and</claim-text><claim-text>a selection step of selecting and outputting either the first corrected data or the second corrected data in accordance with a result of detection in the abnormal pixel detection step.</claim-text></claim-text></claim></claims></us-patent-application>