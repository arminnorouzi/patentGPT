<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230004465A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230004465</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17783826</doc-number><date>20201117</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><priority-claims><priority-claim sequence="01" kind="national"><country>CN</country><doc-number>201911267233.7</doc-number><date>20191211</date></priority-claim></priority-claims><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>F</subclass><main-group>11</main-group><subgroup>14</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>F</subclass><main-group>16</main-group><subgroup>27</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>F</subclass><main-group>16</main-group><subgroup>23</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>F</subclass><main-group>11</main-group><subgroup>1469</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20190101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>F</subclass><main-group>16</main-group><subgroup>27</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>F</subclass><main-group>11</main-group><subgroup>1464</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20190101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>F</subclass><main-group>16</main-group><subgroup>2365</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>F</subclass><main-group>2201</main-group><subgroup>84</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e61">DISTRIBUTED DATABASE SYSTEM AND DATA DISASTER BACKUP DRILLING METHOD</invention-title><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>ZTE CORPORATION</orgname><address><city>Shenzhen</city><country>CN</country></address></addressbook><residence><country>CN</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>ZHANG</last-name><first-name>Peng</first-name><address><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>YAN</last-name><first-name>Ke</first-name><address><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>DING</last-name><first-name>Yan</first-name><address><city>Shenzhen</city><country>CN</country></address></addressbook></inventor><inventor sequence="03" designation="us-only"><addressbook><last-name>LIU</last-name><first-name>Zhiwen</first-name><address><city>Shenzhen</city><country>CN</country></address></addressbook></inventor></inventors></us-parties><pct-or-regional-filing-data><document-id><country>WO</country><doc-number>PCT/CN2020/129428</doc-number><date>20201117</date></document-id><us-371c12-date><date>20220609</date></us-371c12-date></pct-or-regional-filing-data></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">A distributed database system, a data disaster backup exercise method and a non-transitory computer-readable storage medium are disclosed. The distributed database system may include a local computer room (<b>110</b>) and an offsite computer room (<b>120</b>), where the local computer room (<b>110</b>) includes a local management node (<b>111</b>) and a local database cluster (<b>112</b>), the offsite computer room (<b>120</b>) includes an offsite management node (<b>121</b>), an offsite exercise database cluster (<b>123</b>) and an offsite synchronization database cluster (<b>122</b>); where the local database cluster (<b>112</b>) and the offsite synchronization database cluster (<b>122</b>) are both connected with the local management node (<b>111</b>); the offsite exercise database cluster (<b>123</b>) is configured for: establishing a first connection with the offsite management node (<b>121</b>); and receiving a test service sent by a service layer.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="219.96mm" wi="142.66mm" file="US20230004465A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="111.00mm" wi="158.75mm" file="US20230004465A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="236.64mm" wi="151.81mm" orientation="landscape" file="US20230004465A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="75.78mm" wi="148.51mm" file="US20230004465A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="239.35mm" wi="144.70mm" file="US20230004465A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="108.29mm" wi="88.14mm" file="US20230004465A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATION</heading><p id="p-0002" num="0001">This application is a national stage filing under 35 U.S.C. &#xa7; 371 of international application number PCT/CN2020/129428, filed on Nov. 17, 2020, which claims priority to Chinese patent application No. 201911267233.7 filed on Dec. 11, 2019. The contents of these applications are incorporated herein by reference in their entirety.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">TECHNICAL FIELD</heading><p id="p-0003" num="0002">The present disclosure relates to the technical field of databases, and in particular to a distributed database system and a data disaster backup exercise method.</p><heading id="h-0003" level="1">BACKGROUND</heading><p id="p-0004" num="0003">For a long time, the financial-grade distributed database adopts a multi-site and multi-center networking architecture to ensure the stability and reliability of its service and the high availability of its components. When a local computer room and a computer room in the same region fail or are abnormal at the same time, the service will be required to migrate to an offsite location. For example, the master computer room of a bank financial institution is located in location A, and the standby computer room is located in location B. Under normal circumstances, the computer room in location B synchronizes service data of the computer room in location A to back up the service data of the master computer room. In case of any failure or abnormality in the computer room in location A, it is required that the computer room in location B can take over the service of the master computer room in location A smoothly. Under the disaster backup environment, the operation capability and service processing capability of the offsite computer room are the necessary factors to ensure the stable service of the database. The simulation exercise of the offsite computer room is to verify the operation capability and service processing capability of the offsite computer room in the disaster backup environment. At present, in terms of disaster backup exercises, the industry lacks systematic, universal and convenient disaster backup exercise schemes.</p><heading id="h-0004" level="1">SUMMARY</heading><p id="p-0005" num="0004">The following is an overview of the subject matter described in detail herein. This summary is not intended to limit the scope of protection of the appended claims.</p><p id="p-0006" num="0005">In accordance with an aspect of the present disclosure, an embodiment provides a distributed database, a data disaster backup exercise method and device, and a non-transitory computer-readable storage medium, which can test the operation capability and service processing capability of an offsite computer room in a simulated disaster backup environment, thus achieving the purpose of data disaster backup simulation exercise.</p><p id="p-0007" num="0006">In accordance with another aspect of the present disclosure, an embodiment provides a distributed database system, which may includes a local management node, a local database cluster, an offsite management node, an offsite exercise database cluster and an offsite synchronization database cluster, where: the local database cluster and the offsite synchronization database cluster are both connected with the local management node; and the offsite exercise database cluster is configured to: establish a first connection with the offsite management node; and receive a test service sent by a service layer, where the test service is configured to perform a simulation exercise on the offsite management node and the offsite exercise database cluster.</p><p id="p-0008" num="0007">In accordance with yet another aspect of the present disclosure, an embodiment provides a data disaster backup exercise method, which may include: establishing, by an offsite management node, a first connection with an offsite exercise database cluster to receive through the offsite exercise database cluster a test service sent by a service layer to perform a simulation exercise.</p><p id="p-0009" num="0008">In accordance with yet another aspect of the present disclosure, an embodiment provides a data disaster backup exercise method, which may include: establishing, by an offsite exercise database cluster, a first connection with an offsite management node; and receiving, by the offsite exercise database cluster, a test service sent by a service layer, where the test service is configured to perform a simulation exercise on the offsite management node and the offsite exercise database cluster.</p><p id="p-0010" num="0009">In accordance with yet another aspect of the present disclosure, an embodiment provides a device, which may include: a memory configured to store a program; and a processor configured to execute the program stored in the memory, where when the processor executes the program stored in the memory, the processor is configured to execute either of the data disaster backup exercise methods described above.</p><p id="p-0011" num="0010">In accordance with yet another aspect of the present disclosure, an embodiment provides a non-transitory computer-readable storage medium storing computer-executable instructions that are configured to execute either of the data disaster backup exercise methods described above.</p><p id="p-0012" num="0011">Additional features and advantages of the present disclosure will be set forth in the subsequent description, and in part will become apparent from the description, or may be learned by practice of the present disclosure. The purposes and other advantages of the present disclosure can be realized and obtained by structures specified in the description, the claims and the accompanying drawings.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading><p id="p-0013" num="0012">The accompanying drawings are used to provide a further understanding of the technical schemes of the present disclosure and constitute a part of the description. The accompanying drawings are used to explain the technical schemes of the present disclosure together with the embodiments of the present disclosure, and do not constitute a restriction on the technical schemes of the present disclosure.</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>1</b></figref> is a schematic diagram of the architecture of a distributed database system provided by an embodiment of the present disclosure;</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>2</b></figref> is a schematic diagram of the architecture of another distributed database system provided by an embodiment of the present disclosure;</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>3</b></figref> is a flowchart of a data disaster backup exercise method provided by an embodiment of the present disclosure;</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>4</b></figref> is a flowchart of another data disaster backup exercise method provided by an embodiment of the present disclosure; and</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>5</b></figref> is a schematic diagram of the structure of a device provided by an embodiment of the present disclosure.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0006" level="1">DETAILED DESCRIPTION</heading><p id="p-0019" num="0018">In order to make the objectives, technical schemes and advantages of the present disclosure more apparent, the present disclosure is further described in detail in conjunction with the accompanying drawings and embodiments. It should be understood that the specific embodiments described here are only intended to explain the present disclosure and are not intended to limit the present disclosure.</p><p id="p-0020" num="0019">It should be known that, in the description of the embodiments of the present disclosure, &#x201c;a plurality of (or multiple)&#x201d; means two or more; &#x201c;greater than&#x201d;, &#x201c;less than&#x201d;, &#x201c;over&#x201d;, etc. are to be understood to exclude the given figure; and &#x201c;above&#x201d;, &#x201c;below&#x201d;, &#x201c;within&#x201d;, etc. are understood to include the given figure. If &#x201c;first&#x201d; and &#x201c;second&#x201d;, etc. are referred to, it is only for the purpose of distinguishing technical features, and shall not be understood as indicating or implying relative importance or implying the number of the indicated technical features or implying the sequence of the indicated technical features.</p><p id="p-0021" num="0020">The embodiments of the present disclosure provide a distributed database, a data disaster backup exercise method and device, and a non-transitory computer-readable storage medium, which can test the operation capability and service processing capability of an offsite computer room in a simulated disaster backup environment, thus achieving the purpose of data disaster backup simulation exercise.</p><p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. <b>1</b></figref> illustrates a schematic diagram of the architecture of a distributed database system provided by an embodiment of the present disclosure. As shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the distributed database system <b>100</b> includes a local management node <b>111</b>, local database clusters <b>112</b>, an offsite management node <b>121</b>, an offsite exercise database cluster <b>123</b>, and offsite synchronization database clusters <b>122</b>, where the local management node <b>111</b> and the local database clusters <b>112</b> are located in the local computer room <b>110</b>, and the offsite management node <b>121</b>, the offsite exercise database cluster <b>123</b>, and the offsite synchronization database clusters <b>122</b> are located in the offsite computer room <b>120</b>.</p><p id="p-0023" num="0022">It should be understood that the distributed database system <b>100</b> according to the embodiment of the present disclosure may be provided with multiple database clusters in the local computer room <b>110</b> and the offsite computer room <b>120</b>, respectively. In an implementation, as shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref>, both the local computer room <b>110</b> and the offsite computer room <b>120</b> adopt a one-master-two-standby architecture, that is, the local computer room <b>110</b> and the offsite computer room <b>120</b> each include three database clusters, one of which serves as a master base to process services from the service layer, and the other two database clusters serve as slave bases to synchronously store service data to ensure data security.</p><p id="p-0024" num="0023">It should also be understood that each database cluster includes multiple databases. In practical applications, each database may be used to concurrently execute a different process decomposed from a transaction, thus improving the computational efficiency or storage capability of the entire system.</p><p id="p-0025" num="0024">The local management node <b>111</b> and the offsite management node <b>121</b> are responsible for managing the database clusters to which they belong. The management here mainly includes meta data management, transaction management, and operation and maintenance management.</p><p id="p-0026" num="0025">In an embodiment of the present disclosure, the local database clusters <b>112</b> and the offsite synchronization database clusters <b>122</b> are all connected with the local management node <b>111</b>, and the offsite synchronization database clusters <b>122</b> replicate the service data of the local database clusters <b>112</b> under the management process of the local management node <b>111</b> to achieve the synchronization of the data of the local database clusters <b>112</b> by the offsite synchronization database clusters <b>122</b>.</p><p id="p-0027" num="0026">In an exercise situation, the offsite exercise database cluster <b>123</b> of the embodiment of the present disclosure establishes a first connection with the offsite management node <b>121</b>, and receives a test service sent by a service layer, where the test service may be configured to perform a simulation exercise on the offsite management node and the offsite exercise database cluster. In a non-exercise situation, it establishes a second connection with the local management node <b>111</b>, and replicates the service data of the local database clusters <b>112</b> under the management process of the local management node <b>111</b> to achieve synchronization of the data of the local database clusters <b>112</b> together with the offsite synchronization database clusters <b>122</b>.</p><p id="p-0028" num="0027">In an implementation, under normal circumstances, the offsite exercise database cluster <b>123</b> and the offsite synchronization database clusters <b>122</b> are all connected with the local management node <b>111</b> to synchronize the data of the local database clusters <b>112</b>. Upon an exercise task being triggered, the second connection between the offsite exercise database cluster <b>123</b> and the local management node <b>111</b> is disconnected, forming a network isolation from the local computer room <b>110</b>, and constructing an isolated island environment, thus achieving the purpose of simulating the disaster backup environment. Upon the second connection between the offsite exercise database cluster <b>123</b> and the local management node <b>111</b> being disconnected, the offsite exercise database cluster <b>123</b> establishes the first connection with the offsite management node <b>121</b> to receive the test service sent by the service layer to perform a simulation exercise.</p><p id="p-0029" num="0028">Alternatively, in the schematic diagram of the architecture of another distributed database system <b>100</b> as shown in <figref idref="DRAWINGS">FIG. <b>2</b></figref>, the local management node <b>111</b> is configured with a local meta data service (MDS) component <b>113</b>, a local Cloudera Manager (CM) component <b>114</b>, and a local Global Transaction Manager (GTM) component <b>115</b>. The offsite management node <b>121</b> is configured with an offsite MDS component <b>124</b>, an offsite CM component <b>125</b> and an offsite GTM component <b>126</b>. The local database cluster <b>112</b> is configured with a local Data Base Agent (DB Agent) <b>116</b>, and the offsite synchronization database cluster <b>122</b> and the offsite exercise database cluster <b>123</b> are respectively configured with an offsite DB Agent component <b>127</b>.</p><p id="p-0030" num="0029">The MDS components are responsible for storing a series of meta data in the database. The CM components are configured to manage the database clusters to which they belong, including the master-slave switchover operation of the database. The GTM components are responsible for managing the transactions of database clusters and ensuring the consistency of distributed data. The DB Agent components are database monitoring agents, which are connected with the management nodes and are responsible for executing the cluster management process of the management nodes.</p><p id="p-0031" num="0030">According to the technical scheme of the embodiment of the present disclosure, the offsite exercise database cluster <b>123</b> and the offsite synchronization database clusters <b>122</b> are deployed in the offsite computer room <b>120</b>. The offsite exercise database cluster <b>123</b> is configured to receive a test service sent by a service layer under the simulated disaster backup environment. Through this test service, a simulation exercise is performed on the offsite management node <b>121</b> and the offsite exercise database cluster <b>123</b> to test the operation capability and service processing capability of the offsite computer room <b>120</b> in the simulated environment. During the simulation exercise, the offsite synchronization database clusters <b>122</b> still synchronize the data of the local computer room <b>110</b> normally to ensure the data security. The exercise scheme proposed by the embodiment of the present disclosure has universality and can be applied to all multi-site and multi-center environments, and the reliability and high availability of the offsite computer room can be systematically evaluated by adopting this exercise scheme.</p><p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates a flowchart of a data disaster backup exercise method provided by an embodiment of the present disclosure. The method may be applied to the distributed database <b>100</b> shown in <figref idref="DRAWINGS">FIG. <b>1</b></figref> and <figref idref="DRAWINGS">FIG. <b>2</b></figref>. As shown in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the method includes, but is not limited to, the following steps.</p><p id="p-0033" num="0032">At step S<b>201</b>, an offsite management node establishes a first connection with an offsite exercise database cluster.</p><p id="p-0034" num="0033">In an embodiment of the present disclosure, upon an exercise task being triggered, the offsite management node establishes the first connection with the offsite exercise database cluster to achieve the purpose of simulating the disaster backup environment.</p><p id="p-0035" num="0034">At step S<b>202</b>, the offsite exercise database cluster receives a test service sent by a service layer.</p><p id="p-0036" num="0035">In an implementation, the test service may be manually triggered by the administrator, and sent to the offsite exercise database cluster through the service layer, and the offsite exercise database cluster executes this test service under the management process of the offsite management node, thereby implementing the simulation exercise of the offsite management node and the offsite exercise database cluster.</p><p id="p-0037" num="0036">The result of the simulation exercise may evaluate the operation capability and service processing capability of the offsite computer room by checking whether the snapshots at any time during the exercise meet strong consistency.</p><p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrates a flowchart of another data disaster backup exercise method provided by an embodiment of the present disclosure. As shown in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, the method includes, but is not limited to, the following steps.</p><p id="p-0039" num="0038">At step S<b>301</b>, an offsite management node establishes a first connection with an offsite exercise database cluster.</p><p id="p-0040" num="0039">In an embodiment of the present disclosure, in a non-exercise situation, the offsite exercise database cluster establishes a second connection with the local management node, and replicates the service data of the local database cluster under the management process of the local management node to synchronize the data of the local database cluster together with the offsite synchronization database cluster.</p><p id="p-0041" num="0040">Upon an exercise task being triggered, the second connection between the offsite exercise database cluster and the local management node is disconnected, forming a network isolation from the local computer room. In this case, the offsite management node and the offsite exercise database cluster establish the first connection with each other, constructing an isolated island environment, thus achieving the purpose of simulating the disaster backup environment.</p><p id="p-0042" num="0041">In an implementation, in response to the second connection between the offsite exercise database cluster and the local management node being disconnected, the offsite management node may establish the first connection with the offsite exercise database cluster by modifying the DNS configuration.</p><p id="p-0043" num="0042">It should be understood that, when performing an exercise through the offsite exercise database cluster, it should be ensured that the master base of the offsite computer room does not exist in the offsite exercise database cluster, so as not to affect the normal service processing.</p><p id="p-0044" num="0043">In response to the master base not existing in the offsite exercise database cluster, the offsite management node may directly execute step S<b>301</b> to establish the first connection with the offsite exercise database cluster.</p><p id="p-0045" num="0044">In response to the master base existing in the offsite exercise database cluster, a new master base should be selected from the offsite synchronization database cluster, and a master-slave switchover operation should be performed between the master base existing in the offsite exercise database cluster and the new master base selected from the offsite synchronization database cluster, and after the switchover succeeds, the offsite management node executes step S<b>301</b> to establish the first connection with the offsite exercise database cluster.</p><p id="p-0046" num="0045">The following is a description of an implementation of the master-slave switchover operation.</p><p id="p-0047" num="0046">The offsite MDS component parses and transparently transmits a master-base switchover message to the offsite CM component for processing. After receiving the master-base switchover message transparently transmitted by the offsite MDS component, in order to prevent the original master base or other local slave bases from connecting to the new master base and generating a rollback operation, the offsite CM component should check the binary log (binlog) information to ensure that the Global Transaction ID (GTID) value of the selected new master base is the same as the GTID value of the original master base before performing the switchover, and after the switchover succeeds, the offsite CM component returns a switchover success message to the offsite MDS component to notify the offsite MDS component to modify the meta data.</p><p id="p-0048" num="0047">At step S<b>302</b>, the offsite management node backs up the offsite meta data.</p><p id="p-0049" num="0048">The offsite management node backs up the offsite meta data, so that, after the exercise is completed, the backed up offsite meta data can be restored to the environment before the exercise.</p><p id="p-0050" num="0049">In some embodiments, the offsite management node backs up the offsite meta data, which may be implemented through the offsite MDS component, and backs up the meta data of the offsite management node to the offsite MDS component.</p><p id="p-0051" num="0050">At step S<b>303</b>, the offsite management node clears the meta data of a non-offsite exercise database cluster and updates the meta data of the offsite exercise database cluster.</p><p id="p-0052" num="0051">For example, the meta data of the non-offsite exercise database cluster may be deleted by calling the meta data clearing script, and the master-slave information of the meta data of the offsite exercise database cluster may be modified. In some examples, step S<b>303</b> may be implemented by the offsite MDS component under the offsite management node.</p><p id="p-0053" num="0052">At step S<b>304</b>, the offsite management node sends backup notification information to the offsite exercise database cluster.</p><p id="p-0054" num="0053">After establishing the first connection with the offsite exercise database cluster, the offsite management node sends the backup notification information to the offsite exercise database cluster to notify the offsite exercise database cluster to back up the service data.</p><p id="p-0055" num="0054">At step S<b>305</b>, the offsite exercise database cluster receives the backup notification information sent by the offsite management node, and performs data backup in response to the backup notification information.</p><p id="p-0056" num="0055">After receiving the backup notification information sent by the offsite management node, the offsite exercise database cluster backs up the data stored in the offsite exercise database cluster in response to the backup notification information.</p><p id="p-0057" num="0056">In some examples, the backup of the service data stored in the offsite exercise database cluster in step S<b>305</b> may be implemented by the offsite DB Agent component.</p><p id="p-0058" num="0057">At step S<b>306</b>, the offsite management node sends a consistency rollback instruction to the offsite exercise database cluster to cause databases of the offsite exercise database cluster to execute a rollback operation.</p><p id="p-0059" num="0058">According to the characteristics of distributed data transaction processing, a complete transaction is divided into multiple operations that are assigned to multiple databases for processing. Taking the transaction of transferring money from person one to person two as an example, an operation of deducting person one's account balance may be performed by database A and an operation of increasing person two's account balance may be performed by database B. The results of processing this transaction by database A and database B may be successful, failed or uncertain. Supposing that database A and database B receive an exercise task in the process of processing this transaction, and, at this time, one database has successfully processed this transaction, while the other database has failed or is still in the process of processing and it is thus uncertain whether the operation will be successful or not, if the exercise is to be performed immediately at this moment, the result of the exercise may be deviated due to inconsistent data.</p><p id="p-0060" num="0059">Alternatively, in order to ensure the data consistency in the offsite exercise database cluster during the exercise, before the exercise, the offsite management node may send a consistency rollback instruction to the offsite exercise database cluster to cause databases of the offsite database cluster to perform a rollback operation so that the databases of the offsite exercise database cluster satisfy the requirement of data consistency.</p><p id="p-0061" num="0060">At step S<b>307</b>, the offsite exercise database cluster receives the consistency rollback instruction sent by the offsite management node; and databases of the offsite exercise database cluster execute a rollback operation in response to the consistency rollback instruction.</p><p id="p-0062" num="0061">In an implementation, in a distributed database system, each transaction has a GTID assigned by the GTM component, so the consistency moment of the databases can be acquired by checking the GTIDs of the executed transactions recorded in the database logs. In response to the consistency moment being acquired, the databases of the offsite exercise database cluster execute together, in response to the consistency rollback instruction, an operation of rolling back to the consistency moment, thus achieving the purpose of ensuring the data consistency of the databases during the exercise.</p><p id="p-0063" num="0062">At step S<b>308</b>, the offsite exercise database cluster receives a test service sent by a service layer.</p><p id="p-0064" num="0063">The test service may be manually triggered by the administrator, and sent to the offsite exercise database cluster through the service layer, and the offsite exercise database cluster executes this test service under the management process of the offsite management node, thereby implementing the simulation exercise of the offsite management node and the offsite exercise database cluster.</p><p id="p-0065" num="0064">The result of the simulation exercise may evaluate the operation capability and service processing capability of the offsite computer room by checking whether the snapshots at any time during the exercise meet strong consistency.</p><p id="p-0066" num="0065">In an implementation, the offsite exercise database cluster receives the test service sent by the offsite management node and processes the test service to achieve the purpose of simulation exercise. The result of the simulation exercise may evaluate the operation capability and service processing capability of the offsite computer room by checking whether the snapshots at any time during the exercise meet strong consistency.</p><p id="p-0067" num="0066">At step S<b>309</b>, after the exercise is completed, the offsite management node restores the backed up offsite meta data.</p><p id="p-0068" num="0067">The offsite management node restores the backed up offsite meta data, so that the data of the offsite management node can be restored to the moment of the last backup before the exercise starts.</p><p id="p-0069" num="0068">At step S<b>310</b>, the offsite management node sends restoration notification information to the offsite exercise database cluster.</p><p id="p-0070" num="0069">The offsite management node sends the restoration notification information to the offsite exercise database cluster to notify the offsite exercise database cluster to restore to the environment before the exercise.</p><p id="p-0071" num="0070">At step S<b>311</b>, the offsite exercise database cluster receives the restoration notification information sent by the offsite management node; and restores the backed up data in response to the restoration notification information, and reestablishes the second connection with the local management node.</p><p id="p-0072" num="0071">After receiving the restoration notification information sent by the offsite management node, the offsite exercise database cluster restores the data backed up before the exercise, reestablishes the second connection with the local management node, and restores the master-standby database relationship with the offsite synchronization database cluster, thus restoring to the environment before the exercise.</p><p id="p-0073" num="0072">It should be understood that the various embodiments of the methods provided by the embodiments of the present disclosure may be arbitrarily combined to achieve different technical effects.</p><p id="p-0074" num="0073">Based on the technical schemes provided by the embodiments of the present disclosure, the disaster backup environment can be conveniently simulated, and the construction of the disaster backup environment and the restoration of the environment before the exercise can both be done by scripts by one click. It is also possible to intuitively evaluate the service processing capability of the offsite computer room and the running state of the components in the disaster backup environment. At the same time, the normal service of the offsite synchronization database cluster and the simulated service of the offsite exercise database cluster are performed in parallel during the simulation exercise and do not affect each other. The exercise scheme proposed by the research of the present disclosure has universality and can be applied to all multi-site and multi-center environments. By adopting this exercise scheme, the reliability and high availability of distributed databases can be systematically verified.</p><p id="p-0075" num="0074"><figref idref="DRAWINGS">FIG. <b>5</b></figref> illustrates a device <b>400</b> provided by an embodiment of the present disclosure. As shown in <figref idref="DRAWINGS">FIG. <b>5</b></figref>, the device <b>400</b> includes, but is not limited to: a memory <b>420</b> configured to store a program; and a processor <b>410</b> configured to execute the program stored in the memory <b>420</b>, where when the processor <b>410</b> executes the program stored in the memory <b>420</b>, the processor <b>410</b> is configured to execute the data disaster backup exercise methods described above.</p><p id="p-0076" num="0075">The processor <b>410</b> and the memory <b>420</b> may be connected by a bus or other means.</p><p id="p-0077" num="0076">As a non-transitory computer-readable storage medium, the memory <b>420</b> may be used to store a non-transitory software program and a non-transitory computer-executable program, such as the data disaster backup exercise methods described in the embodiments of the present disclosure. The processor <b>410</b> executes the non-transitory software program and instructions stored in the memory <b>420</b>, thereby implementing the above data disaster backup exercise methods.</p><p id="p-0078" num="0077">The memory <b>420</b> may include a program storage area and a data storage area, where the program storage area may store the operating system and an application program required by at least one function; and the data storage area may store and execute the above data disaster backup exercise methods. In addition, the memory <b>420</b> may include a high-speed random access memory, and may also include a non-transitory memory, such as at least one magnetic disk memory device, a flash memory device, or other non-transitory solid-state memory devices. In some implementations, the memory <b>420</b> may optionally include memories remotely located with respect to the processor <b>410</b>, and these remote memories may be connected to the device via a network. Examples of the above network include, but are not limited to, the Internet, an intranet, a local area network, a mobile communication network, and a combination thereof.</p><p id="p-0079" num="0078">The non-transitory software program and instructions required to implement the above data disaster backup exercise methods are stored in the memory <b>420</b>, and when executed by one or more processors <b>410</b>, the above data disaster backup exercise methods are executed, for example, method step S<b>201</b> described in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, method steps S<b>201</b> and S<b>202</b> described in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, method steps S<b>301</b> to S<b>303</b>, S<b>304</b>, S<b>306</b>, S<b>309</b> and S<b>310</b> described in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, and method steps S<b>301</b>, S<b>305</b>, S<b>307</b>, S<b>308</b> and S<b>311</b> described in <figref idref="DRAWINGS">FIG. <b>4</b></figref>.</p><p id="p-0080" num="0079">The embodiments of the present disclosure further provide a non-transitory computer-readable storage medium storing computer-executable instructions that are configured to execute the data disaster backup exercise methods described above.</p><p id="p-0081" num="0080">In an embodiment, the non-transitory computer-readable storage medium stores computer-executable instructions that are executed by one or more control processors <b>410</b>, for example, by one processor <b>410</b> in the above device <b>400</b>, to cause the above one or more processors <b>410</b> to execute the above data disaster backup exercise methods, for example, to execute method step S<b>201</b> described in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, method steps S<b>201</b> and S<b>202</b> described in <figref idref="DRAWINGS">FIG. <b>3</b></figref>, method steps S<b>301</b> to S<b>303</b>, S<b>304</b>, S<b>306</b>, S<b>309</b> and S<b>310</b> described in <figref idref="DRAWINGS">FIG. <b>4</b></figref>, and method steps S<b>301</b>, S<b>305</b>, S<b>307</b>, S<b>308</b> and S<b>311</b> described in <figref idref="DRAWINGS">FIG. <b>4</b></figref>.</p><p id="p-0082" num="0081">The device embodiments described above are merely schematic, where the units illustrated as separate components may or may not be physically separated, i.e., may be located in one place or may also be distributed to multiple network units. Some or all of the modules can be selected according to actual needs to achieve the purpose of this embodiment.</p><p id="p-0083" num="0082">According to the technical scheme of the embodiments of the present disclosure, an offsite exercise database cluster and an offsite synchronization database cluster are deployed in an offsite computer room, where the offsite exercise database cluster is configured to receive a test service sent by a service layer in a simulated disaster backup environment. Through this test service, a simulation exercise can be performed on an offsite management node and the offsite exercise database cluster, so as to test the operation capability and service processing capability of the offsite computer room in the simulated disaster backup environment. During the simulation exercise, the offsite synchronization database cluster still synchronizes the data of the local computer room normally to ensure the data security. The exercise scheme proposed by the present disclosure has universality and can be applied to all multi-site and multi-center environments, and the reliability and high availability of the offsite computer room can be systematically evaluated by adopting this exercise scheme.</p><p id="p-0084" num="0083">It can be understood by those having ordinary skills in the art that all or some of the steps of the methods and systems disclosed above can be implemented as software, firmware, hardware, and appropriate combinations thereof. Some or all of the physical components may be implemented as software executed by a processor, such as a central processing unit, a digital signal processor or a microprocessor, or as hardware, or as an integrated circuit, such as an application specific integrated circuit. Such software can be distributed on computer-readable media, which can include computer storage media (or non-transitory media) and communication media (or transitory media). As well known to those having ordinary skills in the art, the term computer storage medium includes volatile and nonvolatile, removable and non-removable media implemented in any method or technology for storing information, such as computer-readable instructions, data structures, program modules or other data. A computer storage medium includes but is not limited to RAM, ROM, EEPROM, flash memory or other memory technologies, CD-ROM, digital versatile disk (DVD) or other optical disk storage, cassettes, magnetic tapes, magnetic disk storage or other magnetic storage devices, or any other medium that can be configured to store desired information and can be accessed by a computer. Furthermore, it is well known to those having ordinary skills in the art that communication media typically contain computer-readable instructions, data structures, program modules or other data in a modulated data signal such as a carrier wave or other transmission mechanism, and can include any information delivery media.</p><p id="p-0085" num="0084">The above is a detailed description of several embodiments of the present disclosure, but the present disclosure is not limited to the above embodiments. Those having ordinary skills in the art can also make various equivalent modifications or replacements without departing from the principles of the present disclosure, and these equivalent modifications or replacements are all included in the scope defined by the appended claims of the present disclosure.</p><?detailed-description description="Detailed Description" end="tail"?></description><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A distributed database system, comprising:<claim-text>a local management node;</claim-text><claim-text>a local database cluster connected with the local management node;</claim-text><claim-text>an offsite management node;</claim-text><claim-text>an offsite exercise database cluster configured to establish a first connection with the offsite management node, and receive a test service sent by a service layer, wherein the test service is configured to perform a simulation exercise on the offsite management node and the offsite exercise database cluster; and</claim-text><claim-text>an offsite synchronization database cluster connected with the local management node.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the offsite exercise database cluster is further configured to:<claim-text>establish a second connection with the local management node in a non-exercise situation.</claim-text></claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the offsite exercise database cluster is further configured to:<claim-text>receive, when establishing the first connection with the offsite management node, backup notification information sent by the offsite management node; and</claim-text><claim-text>back up offsite exercise database cluster data in response to the backup notification information.</claim-text></claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The system of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the offsite exercise database cluster is further configured to:<claim-text>receive restoration notification information sent by the offsite management node after the exercise is completed; and</claim-text><claim-text>restore the backed up offsite exercise database cluster data in response to the restoration notification information.</claim-text></claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the offsite exercise database cluster is further configured to:<claim-text>receive a consistency rollback instruction sent by the offsite management node; and</claim-text><claim-text>execute, by databases of the offsite exercise database cluster, a rollback operation in response to the consistency rollback instruction.</claim-text></claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. A data disaster backup exercise method, comprising:<claim-text>establishing, by an offsite management node, a first connection with an offsite exercise database cluster to receive through the offsite exercise database cluster a test service sent by a service layer to perform a simulation exercise.</claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein establishing, by the offsite management node, the first connection with the offsite exercise database cluster comprises:<claim-text>establishing, by the offsite management node, the first connection with the offsite exercise database cluster in response to a second connection between the offsite exercise database cluster and the local management node being disconnected.</claim-text></claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein establishing, by the offsite management node, the first connection with the offsite exercise database cluster comprises one of:<claim-text>in response to a master base existing in the offsite exercise database cluster, selecting a new master base from the offsite synchronization database cluster,performing a switchover operation between the master base and the new master base, and establishing, by the offsite management node, the first connection with the offsite exercise database cluster after the switchover succeeds; and</claim-text><claim-text>in response to the master base not existing in the offsite exercise database cluster, establishing, by the offsite management node, the first connection with the offsite exercise database cluster.</claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, further comprising:<claim-text>backing up, by the offsite management node, offsite meta data in response to the offsite management node establishing the first connection with the offsite exercise database cluster; and</claim-text><claim-text>after the exercise is completed, restoring, by the offsite management node, the backed up offsite meta data, and sending restoration notification information to the offsite exercise database cluster.</claim-text></claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising:<claim-text>in response to the offsite management node completing backup of the offsite meta data, clearing, by the management node, meta data of a non-offsite exercise database cluster, and updating meta data of the offsite exercise database cluster.</claim-text></claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, further comprising:<claim-text>in response to the offsite management node establishing the first connection with the offsite exercise database cluster, sending, by the offsite management node, backup notification information to the offsite exercise database cluster.</claim-text></claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, further comprising:<claim-text>in response to the offsite management node establishing the first connection with the offsite exercise database cluster, sending, by the offsite management node, a consistency rollback instruction to the offsite exercise database cluster to cause databases of the offsite exercise database cluster to execute a rollback operation.</claim-text></claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. A data disaster backup exercise method, comprising:<claim-text>establishing, by an offsite exercise database cluster, a first connection with an offsite management node; and</claim-text><claim-text>receiving, by the offsite exercise database cluster, a test service sent by a service layer, wherein the test service is configured to perform a simulation exercise on the offsite management node and the offsite exercise database cluster.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, further comprising:<claim-text>establishing, by the offsite exercise database cluster, a second connection with the local management node in a non-exercise situation.</claim-text></claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, further comprising:<claim-text>in response to the offsite exercise database cluster establishing the first connection with the offsite management node, receiving, by the offsite exercise database cluster, backup notification information sent by the offsite management node; and</claim-text><claim-text>backing up, by the offsite exercise database cluster, offsite exercise database cluster data in response to the backup notification information.</claim-text></claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising:<claim-text>receiving, by the offsite exercise database cluster, restoration notification information sent by the offsite management node after the exercise is completed; and</claim-text><claim-text>restoring, by the offsite exercise database cluster, the backed up offsite exercise database cluster data in response to the restoration notification information.</claim-text></claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, further comprising:<claim-text>receiving, by the offsite exercise database cluster, a consistency rollback instruction sent by the offsite management node; and</claim-text><claim-text>executing, by databases of the offsite exercise database cluster, a rollback operation in response to the consistency rollback instruction.</claim-text></claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. A device, comprising:<claim-text>a memory configured to store a program; and</claim-text><claim-text>a processor configured to execute the program stored in the memory, wherein when the processor executes the program stored in the memory, the processor is configured to execute a data disaster backup exercise method, comprising:</claim-text><claim-text>establishing, by an offsite management node, a first connection with an offsite exercise database cluster to receive through the offsite exercise database cluster a test service sent by a service layer to perform a simulation exercise; or</claim-text><claim-text>establishing, by an offsite exercise database cluster, a first connection with an offsite management node; and receiving, by the offsite exercise database cluster, a test service sent by a service layer, wherein the test service is configured to perform a simulation exercise on the offsite management node and the offsite exercise database cluster.</claim-text></claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. A non-transitory computer-readable storage medium storing computer-executable instructions that are configured to execute<claim-text>the method of <claim-ref idref="CLM-00006">claim 6</claim-ref>.</claim-text></claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. The method of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein establishing, by the offsite management node, the first connection with the offsite exercise database cluster comprises one of:<claim-text>in response to a master base existing in the offsite exercise database cluster, selecting a new master base from the offsite synchronization database cluster, performing a switchover operation between the master base and the new master base, and establishing, by the offsite management node, the first connection with the offsite exercise database cluster after the switchover succeeds; and</claim-text><claim-text>in response to the master base not existing in the offsite exercise database cluster, establishing, by the offsite management node, the first connection with the offsite exercise database cluster.</claim-text></claim-text></claim><claim id="CLM-00021" num="00021"><claim-text><b>21</b>. A non-transitory computer-readable storage medium storing computer-executable instructions that are configured to execute the method of <claim-ref idref="CLM-00013">claim 13</claim-ref>.</claim-text></claim></claims></us-patent-application>