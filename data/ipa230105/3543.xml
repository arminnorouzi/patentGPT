<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE us-patent-application SYSTEM "us-patent-application-v46-2022-02-17.dtd" [ ]><us-patent-application lang="EN" dtd-version="v4.6 2022-02-17" file="US20230003544A1-20230105.XML" status="PRODUCTION" id="us-patent-application" country="US" date-produced="20221221" date-publ="20230105"><us-bibliographic-data-application lang="EN" country="US"><publication-reference><document-id><country>US</country><doc-number>20230003544</doc-number><kind>A1</kind><date>20230105</date></document-id></publication-reference><application-reference appl-type="utility"><document-id><country>US</country><doc-number>17838997</doc-number><date>20220613</date></document-id></application-reference><us-application-series-code>17</us-application-series-code><classifications-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>01</class><subclass>C</subclass><main-group>21</main-group><subgroup>00</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr><classification-ipcr><ipc-version-indicator><date>20060101</date></ipc-version-indicator><classification-level>A</classification-level><section>G</section><class>06</class><subclass>T</subclass><main-group>11</main-group><subgroup>00</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source></classification-ipcr></classifications-ipcr><classifications-cpc><main-cpc><classification-cpc><cpc-version-indicator><date>20200801</date></cpc-version-indicator><section>G</section><class>01</class><subclass>C</subclass><main-group>21</main-group><subgroup>38</subgroup><symbol-position>F</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></main-cpc><further-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>T</subclass><main-group>11</main-group><subgroup>001</subgroup><symbol-position>L</symbol-position><classification-value>I</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc><classification-cpc><cpc-version-indicator><date>20130101</date></cpc-version-indicator><section>G</section><class>06</class><subclass>T</subclass><main-group>2210</main-group><subgroup>32</subgroup><symbol-position>L</symbol-position><classification-value>A</classification-value><action-date><date>20230105</date></action-date><generating-office><country>US</country></generating-office><classification-status>B</classification-status><classification-data-source>H</classification-data-source><scheme-origination-code>C</scheme-origination-code></classification-cpc></further-cpc></classifications-cpc><invention-title id="d2e43">Embedding a Magnetic Map into an Image File</invention-title><us-related-documents><us-provisional-application><document-id><country>US</country><doc-number>63210411</doc-number><date>20210614</date></document-id></us-provisional-application></us-related-documents><us-parties><us-applicants><us-applicant sequence="00" app-type="applicant" designation="us-only" applicant-authority-category="assignee"><addressbook><orgname>Astra Navigation, Inc.</orgname><address><city>Escondido</city><state>CA</state><country>US</country></address></addressbook><residence><country>US</country></residence></us-applicant></us-applicants><inventors><inventor sequence="00" designation="us-only"><addressbook><last-name>TOUTOV</last-name><first-name>Alexandre</first-name><address><city>Inverary</city><country>CA</country></address></addressbook></inventor><inventor sequence="01" designation="us-only"><addressbook><last-name>MUKHINA</last-name><first-name>Maryna</first-name><address><city>Kyiv</city><country>UA</country></address></addressbook></inventor><inventor sequence="02" designation="us-only"><addressbook><last-name>ILNYTSKA</last-name><first-name>Svitlana</first-name><address><city>Kyiv</city><country>UA</country></address></addressbook></inventor></inventors></us-parties></us-bibliographic-data-application><abstract id="abstract"><p id="p-0001" num="0000">In one embodiment, a method includes accessing a magnetic map of an area that includes magnetic-field values for locations in the area. The method also includes accessing an image file that includes pixels that correspond to the locations and include components. The image file also includes a first matrix with elements that each include color values. The components of the pixels include links to elements in the first matrix. The method also includes embedding portions of the magnetic map into the image file by generating a second matrix for the image file including elements that represent the magnetic-field values and, for the locations in the area, writing to the components of the pixels corresponding to the locations links to elements of the second matrix. The method also includes communicating the image file, with the portions of the magnetic map embedded in it, to computing devices for navigation or localization.</p></abstract><drawings id="DRAWINGS"><figure id="Fig-EMI-D00000" num="00000"><img id="EMI-D00000" he="185.25mm" wi="69.93mm" file="US20230003544A1-20230105-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00001" num="00001"><img id="EMI-D00001" he="224.79mm" wi="185.67mm" orientation="landscape" file="US20230003544A1-20230105-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00002" num="00002"><img id="EMI-D00002" he="224.03mm" wi="73.24mm" orientation="landscape" file="US20230003544A1-20230105-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00003" num="00003"><img id="EMI-D00003" he="228.60mm" wi="144.95mm" orientation="landscape" file="US20230003544A1-20230105-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00004" num="00004"><img id="EMI-D00004" he="205.82mm" wi="169.50mm" orientation="landscape" file="US20230003544A1-20230105-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00005" num="00005"><img id="EMI-D00005" he="198.63mm" wi="168.32mm" orientation="landscape" file="US20230003544A1-20230105-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00006" num="00006"><img id="EMI-D00006" he="207.35mm" wi="171.87mm" orientation="landscape" file="US20230003544A1-20230105-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00007" num="00007"><img id="EMI-D00007" he="214.04mm" wi="71.97mm" file="US20230003544A1-20230105-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00008" num="00008"><img id="EMI-D00008" he="206.50mm" wi="98.81mm" orientation="landscape" file="US20230003544A1-20230105-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00009" num="00009"><img id="EMI-D00009" he="226.91mm" wi="170.86mm" orientation="landscape" file="US20230003544A1-20230105-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00010" num="00010"><img id="EMI-D00010" he="193.38mm" wi="163.91mm" file="US20230003544A1-20230105-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00011" num="00011"><img id="EMI-D00011" he="197.53mm" wi="171.37mm" orientation="landscape" file="US20230003544A1-20230105-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00012" num="00012"><img id="EMI-D00012" he="194.39mm" wi="170.94mm" orientation="landscape" file="US20230003544A1-20230105-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00013" num="00013"><img id="EMI-D00013" he="198.46mm" wi="171.53mm" orientation="landscape" file="US20230003544A1-20230105-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00014" num="00014"><img id="EMI-D00014" he="198.29mm" wi="171.53mm" orientation="landscape" file="US20230003544A1-20230105-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00015" num="00015"><img id="EMI-D00015" he="231.48mm" wi="172.21mm" orientation="landscape" file="US20230003544A1-20230105-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00016" num="00016"><img id="EMI-D00016" he="196.09mm" wi="171.70mm" orientation="landscape" file="US20230003544A1-20230105-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00017" num="00017"><img id="EMI-D00017" he="196.09mm" wi="171.87mm" orientation="landscape" file="US20230003544A1-20230105-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00018" num="00018"><img id="EMI-D00018" he="188.81mm" wi="171.79mm" orientation="landscape" file="US20230003544A1-20230105-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00019" num="00019"><img id="EMI-D00019" he="191.77mm" wi="170.35mm" orientation="landscape" file="US20230003544A1-20230105-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00020" num="00020"><img id="EMI-D00020" he="199.98mm" wi="166.45mm" orientation="landscape" file="US20230003544A1-20230105-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00021" num="00021"><img id="EMI-D00021" he="185.84mm" wi="168.57mm" orientation="landscape" file="US20230003544A1-20230105-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00022" num="00022"><img id="EMI-D00022" he="202.44mm" wi="171.62mm" orientation="landscape" file="US20230003544A1-20230105-D00022.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00023" num="00023"><img id="EMI-D00023" he="190.75mm" wi="170.43mm" orientation="landscape" file="US20230003544A1-20230105-D00023.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00024" num="00024"><img id="EMI-D00024" he="197.19mm" wi="171.53mm" orientation="landscape" file="US20230003544A1-20230105-D00024.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00025" num="00025"><img id="EMI-D00025" he="187.71mm" wi="166.20mm" orientation="landscape" file="US20230003544A1-20230105-D00025.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00026" num="00026"><img id="EMI-D00026" he="187.45mm" wi="169.25mm" orientation="landscape" file="US20230003544A1-20230105-D00026.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00027" num="00027"><img id="EMI-D00027" he="181.27mm" wi="171.20mm" orientation="landscape" file="US20230003544A1-20230105-D00027.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00028" num="00028"><img id="EMI-D00028" he="197.53mm" wi="169.42mm" orientation="landscape" file="US20230003544A1-20230105-D00028.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00029" num="00029"><img id="EMI-D00029" he="237.15mm" wi="163.91mm" file="US20230003544A1-20230105-D00029.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00030" num="00030"><img id="EMI-D00030" he="192.28mm" wi="169.59mm" orientation="landscape" file="US20230003544A1-20230105-D00030.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00031" num="00031"><img id="EMI-D00031" he="194.56mm" wi="169.76mm" orientation="landscape" file="US20230003544A1-20230105-D00031.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00032" num="00032"><img id="EMI-D00032" he="201.51mm" wi="157.31mm" orientation="landscape" file="US20230003544A1-20230105-D00032.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00033" num="00033"><img id="EMI-D00033" he="211.07mm" wi="171.11mm" orientation="landscape" file="US20230003544A1-20230105-D00033.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00034" num="00034"><img id="EMI-D00034" he="213.87mm" wi="170.43mm" orientation="landscape" file="US20230003544A1-20230105-D00034.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00035" num="00035"><img id="EMI-D00035" he="203.88mm" wi="170.35mm" orientation="landscape" file="US20230003544A1-20230105-D00035.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00036" num="00036"><img id="EMI-D00036" he="223.35mm" wi="171.37mm" file="US20230003544A1-20230105-D00036.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00037" num="00037"><img id="EMI-D00037" he="217.93mm" wi="169.42mm" orientation="landscape" file="US20230003544A1-20230105-D00037.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00038" num="00038"><img id="EMI-D00038" he="198.63mm" wi="169.59mm" orientation="landscape" file="US20230003544A1-20230105-D00038.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00039" num="00039"><img id="EMI-D00039" he="221.32mm" wi="167.98mm" orientation="landscape" file="US20230003544A1-20230105-D00039.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00040" num="00040"><img id="EMI-D00040" he="237.83mm" wi="139.78mm" file="US20230003544A1-20230105-D00040.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00041" num="00041"><img id="EMI-D00041" he="210.90mm" wi="168.57mm" orientation="landscape" file="US20230003544A1-20230105-D00041.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00042" num="00042"><img id="EMI-D00042" he="182.29mm" wi="166.45mm" orientation="landscape" file="US20230003544A1-20230105-D00042.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00043" num="00043"><img id="EMI-D00043" he="192.36mm" wi="167.98mm" orientation="landscape" file="US20230003544A1-20230105-D00043.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00044" num="00044"><img id="EMI-D00044" he="220.98mm" wi="159.34mm" orientation="landscape" file="US20230003544A1-20230105-D00044.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00045" num="00045"><img id="EMI-D00045" he="195.07mm" wi="156.46mm" orientation="landscape" file="US20230003544A1-20230105-D00045.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00046" num="00046"><img id="EMI-D00046" he="203.79mm" wi="170.26mm" orientation="landscape" file="US20230003544A1-20230105-D00046.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00047" num="00047"><img id="EMI-D00047" he="199.31mm" wi="169.59mm" orientation="landscape" file="US20230003544A1-20230105-D00047.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00048" num="00048"><img id="EMI-D00048" he="145.37mm" wi="168.99mm" orientation="landscape" file="US20230003544A1-20230105-D00048.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00049" num="00049"><img id="EMI-D00049" he="231.48mm" wi="162.81mm" orientation="landscape" file="US20230003544A1-20230105-D00049.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00050" num="00050"><img id="EMI-D00050" he="228.60mm" wi="151.05mm" orientation="landscape" file="US20230003544A1-20230105-D00050.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00051" num="00051"><img id="EMI-D00051" he="230.38mm" wi="161.88mm" orientation="landscape" file="US20230003544A1-20230105-D00051.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00052" num="00052"><img id="EMI-D00052" he="232.16mm" wi="156.13mm" orientation="landscape" file="US20230003544A1-20230105-D00052.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00053" num="00053"><img id="EMI-D00053" he="232.16mm" wi="157.82mm" orientation="landscape" file="US20230003544A1-20230105-D00053.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00054" num="00054"><img id="EMI-D00054" he="232.16mm" wi="157.31mm" orientation="landscape" file="US20230003544A1-20230105-D00054.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00055" num="00055"><img id="EMI-D00055" he="232.33mm" wi="156.63mm" orientation="landscape" file="US20230003544A1-20230105-D00055.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00056" num="00056"><img id="EMI-D00056" he="232.49mm" wi="156.63mm" orientation="landscape" file="US20230003544A1-20230105-D00056.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00057" num="00057"><img id="EMI-D00057" he="227.84mm" wi="158.07mm" orientation="landscape" file="US20230003544A1-20230105-D00057.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00058" num="00058"><img id="EMI-D00058" he="227.75mm" wi="151.72mm" orientation="landscape" file="US20230003544A1-20230105-D00058.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00059" num="00059"><img id="EMI-D00059" he="227.75mm" wi="145.63mm" orientation="landscape" file="US20230003544A1-20230105-D00059.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00060" num="00060"><img id="EMI-D00060" he="192.19mm" wi="173.48mm" orientation="landscape" file="US20230003544A1-20230105-D00060.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00061" num="00061"><img id="EMI-D00061" he="169.50mm" wi="171.62mm" orientation="landscape" file="US20230003544A1-20230105-D00061.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00062" num="00062"><img id="EMI-D00062" he="149.44mm" wi="171.03mm" orientation="landscape" file="US20230003544A1-20230105-D00062.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00063" num="00063"><img id="EMI-D00063" he="144.53mm" wi="171.03mm" orientation="landscape" file="US20230003544A1-20230105-D00063.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00064" num="00064"><img id="EMI-D00064" he="134.87mm" wi="170.69mm" orientation="landscape" file="US20230003544A1-20230105-D00064.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure><figure id="Fig-EMI-D00065" num="00065"><img id="EMI-D00065" he="182.96mm" wi="118.53mm" file="US20230003544A1-20230105-D00065.TIF" alt="embedded image" img-content="drawing" img-format="tif"/></figure></drawings><description id="description"><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="lead"?><heading id="h-0001" level="1">PRIORITY</heading><p id="p-0002" num="0001">This application claims the benefit under 35 U.S.C. &#xa7; 119(e) of U.S. Provisional Patent Application No. 63/210,411, filed 14 Jun. 2021, which is incorporated herein by reference in its entirety for all purposes.</p><?cross-reference-to-related-applications description="Cross Reference To Related Applications" end="tail"?><?summary-of-invention description="Summary of Invention" end="lead"?><heading id="h-0002" level="1">TECHNICAL FIELD</heading><p id="p-0003" num="0002">This disclosure generally relates to magnetic mapping and navigation.</p><heading id="h-0003" level="1">BACKGROUND</heading><p id="p-0004" num="0003">Navigation systems come in a variety of different architectures for use in different applications, including personal, commercial, and military. Many such systems operate on the premise of a Global Navigation Satellite System (GNSS). GNSS is a general term used to describe a network of satellites that can be used to produce position, navigation, and time (PNT) data sets. The Global Positioning System (GPS) is a widely used form of GNSS. Regional implementations of such systems are also used to generate more regionally specific PNT data. For example, Galileo can be used in Europe; GLONASS can be used in Russia; and the BeiDou Navigation Satellite System (BDS) can be used in China.</p><p id="p-0005" num="0004">GNSSs can have failure points. For example, some GNSSs lose reliability when operating inside buildings or in areas where network communication to the device is intermittent. Some GNSSs lose reliability when operating in dense city environments where large buildings interfere with communication signals. Some GNSSs lose reliability when operated in areas such as caves, tunnels, and mountains that impede location devices' reception of signals from GNSS satellites. Moreover, some GNSSs are susceptible to malicious attacks by electronic interference or physical intervention that degrade their reliability.</p><heading id="h-0004" level="1">BRIEF SUMMARY</heading><p id="p-0006" num="0005">In particular embodiments, it is possible to use a magnetic map (e.g. a map of the global magnetic field (GMF)) of a particular area to localize and navigate within that area. Data received from magnetic-measurement devices (e.g. magnetometers) are used for building magnetic maps and later localizing or navigating over the corresponding areas. In particular embodiments, an image of the area for which a magnetic map is built may be used to visualize the current location of the magnetic-measurement device (which may be the current location of the user of that device). In particular embodiments, GeoTIFF-formatted image files may be used for this purpose, as their metadata may include global coordinates of each pixel in the image. In particular embodiments, the data of the magnetic map of the area presented in the image is added to the image data (e.g. embedded in the image) without distorting the original image information. Many currently used navigation systems (e.g. WAZE) use GeoTIFF-formatted images for display purposes. In particular embodiments, a magnetic map of an area embedded in an image of the area allows for storing and transmitting magnetic-map data in these navigating systems using existing data-transfer protocols (e.g. with no substantial modifications to the transmission protocols being necessary). In particular embodiments, adding navigation by magnetic field to existing systems creates an additional independent source of navigational data, making these navigation systems more robust and accurate. In particular embodiments, magnetic maps are embedded in other types of image files (e.g. TIFF, PNG, SVG, JPG, etc.). In particular embodiments, magnetic-map data can be embedded in an image as a separate colormap. This may allow presenting magnetic-map data as an image (e.g. a heat map) on its own. In particular embodiments, data received from a magnetic-measurement device in real time can be presented as an image (e.g. a thin strip of pixels). In particular embodiments, navigation over a magnetic map can be done by comparing images. Particular embodiments require specially formatted data constituting an image file and, therefore, require the use of a computing device (e.g. including a processor and a storage unit). Moreover, particular embodiments require a specific colorization of embedded information that can be performed only by image-manipulation software executed by a computing device.</p><p id="p-0007" num="0006">Although this disclosure describes or illustrates particular embodiments as providing particular advantages or features, particular embodiments may provide none, some, or all of these advantages or features.</p><?summary-of-invention description="Summary of Invention" end="tail"?><?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?><description-of-drawings><heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading><p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. <b>1</b></figref> illustrates an example image from an example image file.</p><p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. <b>2</b></figref> provides an example visualization of an example range of magnetic-field strengths.</p><p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. <b>3</b></figref> provides an example visualization of an EMAG2v3 source GeoTIFF file.</p><p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. <b>4</b></figref> provides an example visualization of an example horizontal component of an example magnetic field in an example area.</p><p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. <b>5</b></figref> provides an example visualization of an example vertical component of an example magnetic field in an example area.</p><p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. <b>6</b></figref> provides an example visualization of an example total value of an example magnetic field in an example area.</p><p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. <b>7</b></figref> illustrates example components of an example magnetic field.</p><p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. <b>8</b></figref> illustrates an example MXYZ pseudocolor model.</p><p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. <b>9</b></figref> provides an example visualization of an example trajectory.</p><p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. <b>10</b></figref> provides an example visualization of an example colorbar.</p><p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. <b>11</b></figref> illustrates an example zoomed-in portion of the visualization in <figref idref="DRAWINGS">FIG. <b>9</b></figref>.</p><p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. <b>12</b></figref> illustrates example total magnitude of GMF along the route in <figref idref="DRAWINGS">FIG. <b>9</b></figref>.</p><p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. <b>13</b></figref> illustrates an example distribution of errors in restoring example GMF magnitude.</p><p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. <b>14</b></figref> illustrates another example distribution of errors in restoring example GMF magnitude.</p><p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. <b>15</b></figref> illustrates example distributions among example quantization levels in example components of an example magnetic profile.</p><p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. <b>16</b></figref> illustrates another example distribution of errors in restoring example GMF magnitude.</p><p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. <b>17</b></figref> illustrates another example distribution of errors in restoring example GMF magnitude.</p><p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. <b>18</b></figref> illustrates another example distribution of errors in restoring example GMF magnitude.</p><p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. <b>19</b></figref> illustrates another example distribution of errors in restoring example GMF magnitude.</p><p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. <b>20</b></figref> provides an example visualization of the total value of an example magnetic field in an example area.</p><p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. <b>21</b></figref> illustrates another example distribution of errors in restoring example GMF magnitude.</p><p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. <b>22</b></figref> illustrates an example colorization of GMF data for a sample patch.</p><p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. <b>23</b></figref> illustrates another example distribution of errors in restoring example GMF magnitude.</p><p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. <b>24</b></figref> illustrates another example distribution of errors in restoring example GMF magnitude.</p><p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. <b>25</b></figref> illustrates another example distribution of errors in restoring example GMF magnitude.</p><p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. <b>26</b></figref> illustrates example colorization of GMF data for a specific patch.</p><p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. <b>27</b></figref> illustrates another example distribution of errors in restoring example GMF magnitude.</p><p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. <b>28</b></figref> illustrates example colorization of GMF data for a specific patch.</p><p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. <b>29</b></figref> illustrates an example method for processing raw magnetic readings and patching them together to create a magnetic map that may be embedded into files that contain georeferencing information.</p><p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. <b>30</b></figref> provides an example visualization of GMF data for a specific patch in an ENU frame with north being positive.</p><p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. <b>31</b></figref> provides an example visualization of GMF data for a specific patch in an ENU frame with north being negative.</p><p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. <b>32</b></figref> illustrates an example map tile.</p><p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. <b>33</b></figref> illustrates an example visualization of a vertical component of regular GMF for the map tile illustrated in <figref idref="DRAWINGS">FIG. <b>32</b></figref>.</p><p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. <b>34</b></figref> illustrates an example visualization of a horizontal component of regular GMF for the map tile illustrated in <figref idref="DRAWINGS">FIG. <b>32</b></figref>.</p><p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. <b>35</b></figref> provides an example visualization of a magnetic field in a sample area.</p><p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. <b>36</b></figref> illustrates example repeating measurements in an example point and degrees of trust over a set of samples in <figref idref="DRAWINGS">FIG. <b>35</b></figref>.</p><p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. <b>37</b></figref> illustrates an example distribution of GMF at an example point in <figref idref="DRAWINGS">FIG. <b>36</b></figref>.</p><p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. <b>38</b></figref> illustrates another example distribution of GMF at another example point in <figref idref="DRAWINGS">FIG. <b>36</b></figref>.</p><p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. <b>39</b></figref> illustrates the points in <figref idref="DRAWINGS">FIG. <b>37</b></figref> and <figref idref="DRAWINGS">FIG. <b>38</b></figref> in the magnetic map of <figref idref="DRAWINGS">FIG. <b>35</b></figref>.</p><p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. <b>40</b></figref> illustrates an example method for embedding one or more magnetic maps into one or more image files.</p><p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. <b>41</b></figref> provides an example visualization of a GeoTIFF image with overlaid magnetic data.</p><p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. <b>42</b></figref> illustrates an example colorization of QRGB after example quantization and normalization.</p><p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. <b>43</b></figref> illustrates an example colorization (in grayscale) of an example magnetic map.</p><p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. <b>44</b></figref> illustrates an example zoomed-in portion of the map in <figref idref="DRAWINGS">FIG. <b>43</b></figref>.</p><p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. <b>45</b></figref> illustrates example similarity between a current (e.g. being measured) magnetic profile and a candidate (e.g. selected from a map) magnetic profile using a sample GMF map.</p><p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. <b>46</b></figref> illustrates an example magnetic-map fragment.</p><p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. <b>47</b></figref> illustrates example interpolation of the magnetic-map fragment in <figref idref="DRAWINGS">FIG. <b>46</b></figref>.</p><p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. <b>48</b></figref> illustrates example quantization of the magnetic-map fragment in <figref idref="DRAWINGS">FIG. <b>47</b></figref>.</p><p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. <b>49</b></figref> illustrates numerical values for a sample quantized map fragment.</p><p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. <b>50</b></figref> illustrates an example magnetic-profile strip.</p><p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. <b>51</b></figref> illustrates example results of magnetic-profile matching using NCC criterion.</p><p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. <b>52</b></figref> illustrates example results of magnetic-profile matching using MSD criterion.</p><p id="p-0060" num="0059"><figref idref="DRAWINGS">FIG. <b>53</b></figref> illustrates example results of magnetic-profile matching using MAD criterion.</p><p id="p-0061" num="0060"><figref idref="DRAWINGS">FIG. <b>54</b></figref> illustrates example results of magnetic-profile matching with noisy magnetic profiles (e.g. with added noise) using NCC criterion.</p><p id="p-0062" num="0061"><figref idref="DRAWINGS">FIG. <b>55</b></figref> illustrates example results of magnetic-profile matching with noisy magnetic profiles (e.g. with added noise) using MSD criterion.</p><p id="p-0063" num="0062"><figref idref="DRAWINGS">FIG. <b>56</b></figref> illustrates example results of magnetic-profile matching with noisy magnetic profiles (e.g. with added noise) using MAD criterion.</p><p id="p-0064" num="0063"><figref idref="DRAWINGS">FIG. <b>57</b></figref> illustrates example results of magnetic-gradient-profile matching using NCC criterion.</p><p id="p-0065" num="0064"><figref idref="DRAWINGS">FIG. <b>58</b></figref> illustrates example results of magnetic-gradient-profile matching using MSD criterion.</p><p id="p-0066" num="0065"><figref idref="DRAWINGS">FIG. <b>59</b></figref> illustrates example results of magnetic-gradient-profile matching using MAD criterion.</p><p id="p-0067" num="0066"><figref idref="DRAWINGS">FIG. <b>60</b></figref> illustrates an example magnetic-map fragment.</p><p id="p-0068" num="0067"><figref idref="DRAWINGS">FIG. <b>61</b></figref> illustrates example interpolation of the magnetic-map fragment in <figref idref="DRAWINGS">FIG. <b>60</b></figref>.</p><p id="p-0069" num="0068"><figref idref="DRAWINGS">FIG. <b>62</b></figref> illustrates an example transformation of the magnetic-map fragment in <figref idref="DRAWINGS">FIG. <b>61</b></figref>.</p><p id="p-0070" num="0069"><figref idref="DRAWINGS">FIG. <b>63</b></figref> illustrates the transformation in <figref idref="DRAWINGS">FIG. <b>61</b></figref> with decreased quantization.</p><p id="p-0071" num="0070"><figref idref="DRAWINGS">FIG. <b>64</b></figref> illustrates example binary segmentation of the magnetic-map fragment in <figref idref="DRAWINGS">FIG. <b>63</b></figref>.</p><p id="p-0072" num="0071"><figref idref="DRAWINGS">FIG. <b>65</b></figref> illustrates an example computer system.</p></description-of-drawings><?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?><?detailed-description description="Detailed Description" end="lead"?><heading id="h-0006" level="1">DESCRIPTION OF EXAMPLE EMBODIMENTS</heading><p id="p-0073" num="0072">In particular embodiments, one or more portions of one or more magnetic maps are embedded in one or more image files that may, but need not necessarily, contain georeferencing information. A Geographic Tagged Image File Format (GeoTIFF) file is an example of an image file containing georeferencing information. Other examples include, but are not limited to, American Standard Code for Information Interchange (ASCII); GeoTIFF; Portable Network Graphics (PNG); Keyhole Markup Language (KMZ); Extensible Markup Language (XML); or Textfile (TXT). Although particular image files containing particular georeferencing information are disclosed and illustrated herein, this disclosure contemplates any suitable image files containing any suitable georeferencing information, including information about indoor or outdoor locations. Particular embodiments use a particular order of steps or a particular coordinate system to embed portions of magnetic maps into image files. In particular embodiments, data about a magnetic field (such as for example one or more portions of a magnetic map) may be specified in one or more of following file formats: ASCII; GeoTIFF; PNG; KMZ; XML; or TXT. Although data about a magnetic field are described as being specified in particular file formats herein, this disclosure contemplates any suitable data about any suitable magnetic field being specified in any suitable file format. In particular embodiments, which format is used may be determined by ease of reading and visualizing data for the user or by requirements for data accuracy when navigating or localizing. Herein reference to an image file may encompass the image represented in the image file, and vice versa, where appropriate.</p><p id="p-0074" num="0073">In particular embodiments, a magnetic map includes data representing values of a magnetic field (such as, for example, the geomagnetic field (GMF)) at points in two-dimensional (2D) or three-dimensional (3D) space. Examples of global magnetic maps include, but are not limited to, Earth Magnetic Anomaly Grid with Two-Arc-Minute Resolution (EMAG2), World Digital Magnetic Anomaly Map (WDMAM), Enhanced Magnetic Model (EMM), and the World Magnetic Model (WMM). Although particular magnetic maps are described or illustrated herein, this disclosure contemplates any suitable magnetic maps. Moreover, although global magnetic maps are described or illustrated herein, this disclosure contemplates any suitable magnetic maps encompassing any suitable area, one or more portions of which may be indoor or outdoor. In addition, one or more portions of the area may be under the ground or on the ground of a celestial body (such as Earth); underwater or on the surface of a body of water or other liquid; in the atmosphere of a celestial body (such as Earth); in outer space; or elsewhere. As an example, a magnetic map may include values of a magnetic field at points in, on, or near a structure, such as a house, office building, hospital, retail or wholesale store, warehouse, manufacturing facility, depot, hangar, garage, tunnel, bunker, underground mine, watercraft, aircraft, spacecraft, or other suitable structure. As another example, a magnetic map may include values of a magnetic field at points in, on, or near an outside area, such as a sidewalk, road, bridge, runway, lot, surface mine, waterway, field, pasture, forest, park, or other suitable outside area. In particular embodiments, magnetic maps may be created or used as disclosed in U.S. Patent Application Publication No. US 2022/0026235, U.S. Patent Application Publication No. US 2022/0026217, and U.S. Patent Application Publication No. US 2022/0026212, each of which is incorporated herein by reference in its entirety for all purposes.</p><p id="p-0075" num="0074">As described above, in particular embodiments, one or more portions of one or more magnetic maps may be embedded in one or more GeoTIFF files. GeoTIFF is a metadata standard that enables georeferencing information to be embedded in a Tagged Image File Format (TIFF) file. In particular embodiments, georeferencing information may include information used to establish spatial references, such as, for example, map projections, coordinate systems, ellipsoids, or geodetic datums or systems. Although particular georeferencing information is described herein, this disclosure contemplates any suitable georeferencing information. In particular embodiments, GeoTIFF is compliant with TIFF 6.0 and software capable of reading and interpreting TIFF files can read and interpret GeoTIFF files. Particular embodiments may use a world file (which may be a plain-text sidecar file), such as a TFW file, as an alternative to in-line metadata for geospatial metadata. The world file may reside in the same folder as the TIFF file. In particular embodiments, the TFW file format is used by Geographic Information Systems (GISs) to georeference raster map images. A TFW file may describe a location, scale, and rotation of a raster on a map stored as a TIFF image. A TFW file may be used for saving the world location of an aerial satellite photograph and may use a format similar to Joint Photographic Experts Group (JPEG) World (JPW) files. Although particular GeoTIFF files are described herein, this disclosure contemplates any suitable GeoTIFF files or any other suitable files containing georeferencing information.</p><p id="p-0076" num="0075">In particular embodiments, in addition or as an alternative to one or more portions of one or more magnetic maps being embedded in one or more GeoTIFF files, one or more portions of one or more magnetic maps may be embedded in one or more Cloud Optimized GeoTIFF (COG) files. COG is a standard based on GeoTIFF that facilitates the use of GeoTIFF files hosted on Hypertext Transfer Protocol (HTTP) servers by enabling the use of partial data in a GeoTIFF file without the entire file being downloaded. In particular embodiments, COG works with HTTP range requests and specifies a particular layout of data and metadata in a GeoTIFF file, which enables a client to predict what range of bytes to download. Herein, reference to a COG file may encompass a GeoTIFF file, and vice versa, where appropriate. Herein, reference to a single file may encompass multiple files, and vice versa, where appropriate. Herein, reference to a file format (e.g. GeoTIFF or COG) may encompass a file having that file format (e.g. a GeoTIFF file or a COG file). In particular embodiments, COG files may be read by and written to by Open Source Geospatial Foundation (OSGeo) software, Geospatial Data Abstraction Library (GDAL) software, Quantum GIS (QGIS) software, GeoTrellis software, or other suitable geographic software tools.</p><p id="p-0077" num="0076">In particular embodiments, a GeoTIFF file contains image data in full color palette, like red-green-blue (RGB), and is originally unindexed. In particular embodiments, magnetic values are added in the form of indexed data to the visual data of the ground surface. Indexed color is a technique to manage a digital image's colors to save computer memory and file storage, while speeding up display refresh and file transfers. It may be a form of vector quantization compression. When an image is encoded in this way, color information is not directly carried by the image pixel data but is stored in a separate piece of data called a color lookup table (CLUT), or palette, which is an array of color specifications. Every element in the array represents a color, indexed by its position within the array. Each image pixel does not contain the full specification of its color, but only its index into the palette. This technique is sometimes referred as pseudo color or indirect color, as colors are addressed indirectly.</p><p id="p-0078" num="0077">In particular embodiments, indexed color saves a significant amount of memory, storage space, and transmission time. Using true color, each pixel needs 24 bits, or 3 bytes. A typical 640&#xd7;480 Video Graphics Array (VGA) resolution true color uncompressed image needs 640&#xd7;480&#xd7;3=921,600 bytes (900 KB). Limiting the image colors to 256, every pixel needs only 8 bits, or 1 byte each, so the example image now needs only 640&#xd7;480&#xd7;1=307,200 bytes (300 KB), plus 256&#xd7;3=768 additional bytes to store the palette map (assuming RGB), approximately one third of the original size. Smaller palettes (4-bit 16 colors, 2-bit 4 colors) can pack the pixels even more (to one sixth or one twelfth), at the cost of color accuracy. Most image file formats that support indexed color images also support some compression scheme, enhancing their ability to store the images in smaller files. Colorized and artistic effects can be achieved by altering the color palette of indexed color images, for example to produce colorized sepia tone images. Due to the separate nature of the associated palette element of the indexed color images, they may be used to remap grayscale images into pseudo color ones through the use of pseudo color palettes.</p><p id="p-0079" num="0078">In particular embodiments, arbitrary gradient color scales, usually 256 shades, with no relationship to real colors of a given image, are employed to artificially colorize a grayscale image to reveal details or to map the pixel level values to amounts of some physical magnitude (potential, temperature, altitude, etc.). There are many pseudo color palettes, some of them standardized, used mainly in scientific applications, such as, for example, astronomy and radioastronomy, satellite land imaging, thermography, study of materials, tomography, and magnetic resonance imaging in medicine.</p><p id="p-0080" num="0079">In particular embodiments, indexed color images depend on their own color palettes. Typically, raw image data or colormap tables cannot reliably be exchanged between different image files without intermediate mapping. Also, if the original color palette for a given indexed image is lost, restoring it can be difficult. In particular embodiments, this may be used as an advantage, since in such a way it is possible to secure the data of a magnetic map. In particular embodiments, the use of an indexed color palette for representing magnetic-field values reduces the amount of memory for storing the map and helps to protect the map, since it may be difficult to use the map data without knowing which color (or field value) corresponds to which index in the palette. In particular embodiments, a colormap is a matrix of values that define the colors for graphics objects such as surface, image, and patch objects. A software application, such as for example MATLAB, may draw the objects by mapping data values to colors in the colormap. A colormap may be any length and may be three columns wide. Each row in the matrix may define one color using an RGB triplet. An RGB triplet is a three-element row vector whose elements specify the intensities of the red, green, and blue components of the color. Typically, the intensities are double or single values in the range [0, 1]. A value of 0 indicates no color and a value of 1 indicates full intensity.</p><p id="p-0081" num="0080">TIFF files, including GeoTIFF, can be compressed. In particular embodiments, example compression schemes for compressing TIFF files include Deflate, LZW, PackBits, CCITT Group 3 fax, CCITT Group 4 fax, and JPEG. Although particular compression schemes are disclosed and illustrated herein, this disclosure contemplates any suitable compression schemes.</p><p id="p-0082" num="0081">In particular embodiments, GeoTIFF and TIFF formats are used in georeferenced satellite images with incorporated data about coordinate system, type of transformation, geoid, etc. Using associated tags, information about pseudo color palettes can also be included for mapping GMF data in the same way as for indexed images. The values of the GMF in this palette are quantized by level and assigned to the combination (e.g. as in three-colored RGB manner or smaller if the informativity of map is not high). Although particular embodiments are described and illustrated with reference to the GMF, this disclosure contemplates any suitable magnetic field(s). Similarly, although GMF data and values of the GMF are described and illustrated herein, this disclosure contemplates any suitable data representing any suitable magnetic field(s) and any suitable values of any suitable magnetic field(s). Herein, where appropriate, reference to GMF data encompasses any suitable data about any suitable magnetic field(s), which may, but need not, include the earth's magnetic field. Herein, where appropriate, reference to GMF values encompasses any suitable mags, which may, but need not, include values of the earth's magnetic field. Herein, where appropriate, reference to GMF encompasses any suitable magnetic field(s), which may, but need not, include the earth's magnetic field. TIFF formats can be opened and edited in MATLAB and by other free software like LibTIFF. Its variant COG is supported by Google. LibTIFF is a library for reading and writing TIFF files. The set also contains command line tools for processing TIFFs. It is distributed in source code and can be found as binary builds for a variety of platforms.</p><p id="p-0083" num="0082">In particular embodiments, differences in size and resolution between a GeoTIFF image and a GMF map tile (1&#xb0; latitude&#xd7;1&#xb0; longitude) being embedded in it are dealt with as follows. Although particular geographic coordinate systems are described and illustrated herein, this disclosure contemplates any suitable geographic or other coordinate systems. <figref idref="DRAWINGS">FIG. <b>1</b></figref> illustrates an example image from an example image file. In the example of <figref idref="DRAWINGS">FIG. <b>1</b></figref>, the image is an aerial view of part of the city of Boston and the file is a TIFF file. Its corresponding geo tag, R, may be as follows:</p><p id="p-0084" num="0083">R=<ul id="ul0001" list-style="none">    <li id="ul0001-0001" num="0000">    <ul id="ul0002" list-style="none">        <li id="ul0002-0001" num="0084">MapCellsReference with properties:        <ul id="ul0003" list-style="none">            <li id="ul0003-0001" num="0085">XWorldLimits: [764317.995579396 779019.409746063]</li>            <li id="ul0003-0002" num="0086">YWorldLimits: [2951122.28480912 2960574.36564245]            <ul id="ul0004" list-style="none">                <li id="ul0004-0001" num="0087">RasterSize: [2881 4481]&#x2014;number of pixels</li>            </ul>            </li>        </ul>        </li>        <li id="ul0002-0002" num="0088">RasterInterpretation: &#x2018;cells&#x2019;        <ul id="ul0005" list-style="none">            <li id="ul0005-0001" num="0089">ColumnsStartFrom: &#x2018;north&#x2019;&#x2014;direction of X axis            <ul id="ul0006" list-style="none">                <li id="ul0006-0001" num="0090">RowsStartFrom: &#x2018;west&#x2019;&#x2014;direction of Y axis</li>            </ul>            </li>            <li id="ul0005-0002" num="0091">CellExtentInWorldX: 3.28083333333333&#x2014;pixel size in meters by X axis (may be also in longitude)</li>            <li id="ul0005-0003" num="0092">CellExtentInWorldY: 3.28083333333333&#x2014;pixel size in meters by Y axis (may be also in latitude)</li>        </ul>        </li>        <li id="ul0002-0003" num="0093">RasterExtentInWorldX: 14701.4141666667&#x2014;width of raster (here in meters, may be also in degrees of longitude)</li>        <li id="ul0002-0004" num="0094">RasterExtentInWorldY: 9452.08083333332&#x2014;height of raster (here in meters, may be also in degrees of latitude)        <ul id="ul0007" list-style="none">            <li id="ul0007-0001" num="0095">XIntrinsicLimits: [0.5 4481.5]</li>            <li id="ul0007-0002" num="0096">YIntrinsicLimits: [0.5 2881.5]</li>            <li id="ul0007-0003" num="0097">TransformationType: &#x2018;rectilinear&#x2019;</li>        </ul>        </li>        <li id="ul0002-0005" num="0098">CoordinateSystemType: &#x2018;planar&#x2019;</li>    </ul>    </li></ul></p><p id="p-0085" num="0099">In particular embodiments, the GMF map and the image are not initially connected to each other. There is a database of images of the earth's surface in the GeoTIFF format and, separately, magnetic-field data is obtained and a GMF map is generated. After processing, the magnetic data is added to the existing images. That is, an image is taken, its resolution is determined, the corresponding fragment(s) from the map tile(s) are selected, and the dimensions are reduced to fit the image. A GMF map tile may, for example, be 1&#xb0; latitude&#xd7;1&#xb0; longitude, or approximately 108 kilometers by 108 kilometers. If the resolution of a GMF map is a one meter by one meter cell, then for the GeoTIFF file in <figref idref="DRAWINGS">FIG. <b>1</b></figref> the corresponding GMF map tile is separated and adjusted to the original size of the image. However, the resolution of the GeoTIFF file is 3.28 meters per element of array (per pixel). Therefore, if, in the GMF map the tile resolution is one meter per array element, then the existing resolution of the image is kept intact and data from the GMF map is adjusted accordingly to fit the image.</p><p id="p-0086" num="0100">In particular embodiments, a grid of the total magnetic intensity is made using a minimum curvature algorithm to create a two-dimensional grid equally scaled in both directions. The algorithm produces a smooth grid by iteratively solving a set of difference equations minimizing the total second horizontal derivative while attempting to honor the input data. The size and resolution of GeoTIFF files can be used in this process. The size of GeoTIFF images is likely to be smaller than 1&#xb0; latitude&#xd7;1&#xb0; longitude, therefore the original GMF map tile is adjusted to it, with no loss of data in particular embodiments. However, if the resolution of the GeoTIFF image is smaller than the GMF map, then adjusting the data to the image will, in particular embodiments, cause magnetic information to be lost. To address this, the GMF map is not compressed, but is rather roughened. The example below demonstrates how it happens for the one-dimensional case. In this demonstration, one pixel in the GeoTIFF file has resolution of 3 meters, while one cell of GMF map has resolution of one meter and contains data in micro Tesla (&#x3bc;T).</p><p id="p-0087" num="0101">GMF Map Cells (Data in &#x3bc;T), One Cell is One Meter</p><p id="p-0088" num="0000"><tables id="TABLE-US-00001" num="00001"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="7"><colspec colname="offset" colwidth="14pt" align="left"/><colspec colname="1" colwidth="21pt" align="center"/><colspec colname="2" colwidth="49pt" align="center"/><colspec colname="3" colwidth="21pt" align="center"/><colspec colname="4" colwidth="49pt" align="center"/><colspec colname="5" colwidth="21pt" align="center"/><colspec colname="6" colwidth="42pt" align="center"/><thead><row><entry/><entry namest="offset" nameend="6" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry/><entry>53</entry><entry>58</entry><entry>51</entry><entry>48</entry><entry>45</entry><entry>47</entry></row><row><entry/><entry namest="offset" nameend="6" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0089" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>(53+58+51)/3=54<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0090" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>(48+45+47)/3=46.7<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0091" num="0102">GMF Values Adjusted to GeoTIFF with Resolution &#x2dc;3 Meter Per One Cell</p><p id="p-0092" num="0000"><tables id="TABLE-US-00002" num="00002"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="offset" colwidth="56pt" align="left"/><colspec colname="1" colwidth="21pt" align="center"/><colspec colname="2" colwidth="140pt" align="center"/><thead><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry/><entry>54</entry><entry>46.7</entry></row><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row></tbody></tgroup></table></tables><br/>In this example, an average is taken across three data values and the result is placed in one cell instead of having a separate cell for each original value. This example can be extended to a two-dimensional case as follows. If cells of GMF map have resolution one meter by one meter, and cells in the GeoTIFF file (for example, boston.tiff) have larger resolution, for example three meters by three meters, extra data may be averaged. The example given below shows fitting of GMF map resolution to the GeoTIFF file resolution. In this two-dimensional example, each GMF map cell (with data inside given in &#x3bc;T) is one square meter (1&#xd7;1 meter), while one pixel in GeoTIFF file corresponds to nine square meters (3&#xd7;3 meters). To match those data properly, data in GMF cells have to be averaged as shown in the table below.</p><p id="p-0093" num="0103">GMF Map Cells (Data in &#x3bc;T), 1 Cell is 1&#xd7;1 m<sup>2</sup></p><p id="p-0094" num="0000"><tables id="TABLE-US-00003" num="00003"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="7"><colspec colname="offset" colwidth="14pt" align="left"/><colspec colname="1" colwidth="21pt" align="center"/><colspec colname="2" colwidth="49pt" align="center"/><colspec colname="3" colwidth="21pt" align="center"/><colspec colname="4" colwidth="49pt" align="center"/><colspec colname="5" colwidth="21pt" align="center"/><colspec colname="6" colwidth="42pt" align="center"/><thead><row><entry/><entry namest="offset" nameend="6" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry/><entry>53</entry><entry>58</entry><entry>51</entry><entry>48</entry><entry>45</entry><entry>47</entry></row><row><entry/><entry>43</entry><entry>50</entry><entry>45</entry><entry>48</entry><entry>50</entry><entry>30</entry></row><row><entry/><entry>56</entry><entry>49</entry><entry>48</entry><entry>47</entry><entry>48</entry><entry>39</entry></row><row><entry/><entry namest="offset" nameend="6" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0095" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>(53+58+51+43+50+45+56+49+48)/9=50.3333<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0096" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>(48+45+47+48+50+30+47+48+39)/9=44.6667<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0097" num="0104">GMF Values Adjusted to GeoTIFF with Resolution 3&#xd7;3 m<sup>2 </sup>Per 1 Cell</p><p id="p-0098" num="0000"><tables id="TABLE-US-00004" num="00004"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="offset" colwidth="49pt" align="left"/><colspec colname="1" colwidth="35pt" align="center"/><colspec colname="2" colwidth="133pt" align="center"/><thead><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry/><entry>50.3333</entry><entry>44.6667</entry></row><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0099" num="0000"><tables id="TABLE-US-00005" num="00005"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="2"><colspec colname="1" colwidth="105pt" align="left"/><colspec colname="2" colwidth="112pt" align="left"/><thead><row><entry namest="1" nameend="2" align="center" rowsep="1"/></row><row><entry>Input:</entry><entry>Output:</entry></row><row><entry namest="1" nameend="2" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry/></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="1" colwidth="84pt" align="left"/><colspec colname="2" colwidth="21pt" align="left"/><colspec colname="3" colwidth="112pt" align="left"/><tbody valign="top"><row><entry>M<sub>E</sub>, M<sub>N</sub>, M<sub>U </sub>from one</entry><entry>&#x2192;</entry><entry>Patch_size_geotiff_adjusted -</entry></row><row><entry>(several) Patch_ID</entry><entry/><entry>new patch is created of the size</entry></row><row><entry>GeoTJFF resolution</entry><entry/><entry>equal to size of GeoTIFF and</entry></row><row><entry>CellExtentInWorldX,</entry><entry/><entry>with each element to be either</entry></row><row><entry>CellExtentInWorldY</entry><entry/><entry>containing [M<sub>E</sub>, M<sub>N</sub>, M<sub>U</sub>]</entry></row><row><entry>and size RasterSize</entry><entry/><entry>averaged for given resolution</entry></row><row><entry/><entry/><entry>if they were present in original</entry></row><row><entry/><entry/><entry>Patch_ID or NaN if the GMF data</entry></row><row><entry/><entry/><entry>for the given point was absent</entry></row><row><entry namest="1" nameend="3" align="center" rowsep="1"/></row></tbody></tgroup></table></tables><br/>In particular embodiments, a new patch is created according to the size of the GeoTIFF file and the converted GMF data obtained from the first step is then added to this newly created patch.</p><p id="p-0100" num="0105">In particular embodiments, if data are absent and there are areas for which magnetic data are unavailable (e.g. because magnetic readings have not yet been taken), then the absent data may be left as absent. This may be preferable in particular embodiments, but then the GeoTIFF image colored by GMF may appear patched with holes (places where the absent data is NaN or colored in black per the color palette). This may appear confusing to the user. Alternatively, the absent data may be taken from Earth Magnetic Anomaly Grid with Two-Arc-Minute Resolution (EMAG2), or any other suitable GMF map, and embedded into the GeoTIFF, possibly with special marking(s), for example, in the color palette or in one or more geo tag(s). In particular embodiments, this may present difficulties as it may be necessary to mark in some way the data that are absent and to be filled in from a global map. New data, for example, may be coming later and may need to be incorporated in an already existing GeoTIFF image. Particular embodiments may address this similar to processes in which, for the initially absent data filled from EMAG, later some specific number(s) may be added in a recurrent update algorithm.</p><p id="p-0101" num="0106">In particular embodiments, the following ranges of GMF and resolution are taken into account when selecting a color palette. Consider the base EMAG2v3 Source GeoTIFFs available at https://www.ngdc.noaa.gov/geomag/emag2.html. In particular embodiments, the GeoTIFF format can be used in Environmental Systems Research Institute (ESRI) ArcGIS or any other suitable GIS application. In these GeoTIFFs, values (nT) are stored as 32-bit floating point and the no data value is 99999. The minimal and maximal values of GMF in (nT) are as follows:<ul id="ul0008" list-style="none">    <li id="ul0008-0001" num="0000">    <ul id="ul0009" list-style="none">        <li id="ul0009-0001" num="0107">min=&#x2212;3.3810e+03 max=8.6326e+03</li>        <li id="ul0009-0002" num="0108">min=&#x2212;3381 nT max=8632 nT<br/><figref idref="DRAWINGS">FIG. <b>2</b></figref> illustrates an example visualization of these values in grayscale. Although grayscale is described and illustrated herein, this disclosure contemplates any suitable color scheme, including full color. Herein, reference to color encompasses grayscale, and vice versa, where appropriate. <figref idref="DRAWINGS">FIG. <b>3</b></figref> illustrates an example visualization, in grayscale, of an EMAG2v3 source GeoTIFF file. In the example of <figref idref="DRAWINGS">FIG. <b>3</b></figref>, the x axis ranges from 0&#xb0; to 360&#xb0; and the y axis ranges from &#x2212;90&#xb0; to +90&#xb0;. Its corresponding geo tag, R, may be as follows:</li>    </ul>    </li></ul></p><p id="p-0102" num="0109">R=<ul id="ul0010" list-style="none">    <li id="ul0010-0001" num="0000">    <ul id="ul0011" list-style="none">        <li id="ul0011-0001" num="0110">MapCellsReference with properties:        <ul id="ul0012" list-style="none">            <li id="ul0012-0001" num="0111">XWorldLimits: [&#x2212;0.0166666666675 359.983333351332]</li>            <li id="ul0012-0002" num="0112">YWorldLimits: [&#x2212;89.9833333378325 89.9833333378325]            <ul id="ul0013" list-style="none">                <li id="ul0013-0001" num="0113">RasterSize: [5399 10800]</li>            </ul>            </li>            <li id="ul0012-0003" num="0114">RasterInterpretation: &#x2018;cells&#x2019;            <ul id="ul0014" list-style="none">                <li id="ul0014-0001" num="0115">ColumnsStartFrom: &#x2018;north&#x2019;                <ul id="ul0015" list-style="none">                    <li id="ul0015-0001" num="0116">RowsStartFrom: &#x2018;west&#x2019;</li>                </ul>                </li>            </ul>            </li>            <li id="ul0012-0004" num="0117">CellExtentInWorldX: 0.033333333335 (in degrees of longitude)</li>            <li id="ul0012-0005" num="0118">CellExtentInWorldY: 0.033333333335 (in degrees of latitude)</li>            <li id="ul0012-0006" num="0119">RasterExtentInWorldX: 360.000000018</li>            <li id="ul0012-0007" num="0120">RasterExtentInWorldY: 179.966666675665            <ul id="ul0016" list-style="none">                <li id="ul0016-0001" num="0121">XIntrinsicLimits: [0.5 10800.5]</li>                <li id="ul0016-0002" num="0122">YIntrinsicLimits: [0.5 5399.5]</li>                <li id="ul0016-0003" num="0123">TransformationType: &#x2018;rectilinear&#x2019;</li>            </ul>            </li>            <li id="ul0012-0008" num="0124">CoordinateSystemType: &#x2018;planar&#x2019;</li>        </ul>        </li>    </ul>    </li></ul></p><p id="p-0103" num="0125">Generally, the total value of GMF consists of two components: regular and anomalous.</p><p id="p-0104" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>F=F</i><sub>regular</sub><i>+F</i><sub>anomalous </sub><?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0105" num="0000">The regular component can be calculated for any point of the ground surface for given location and time. For calculation it is possible to use World Magnetic Model (WMM) WMM2020 or International Geomagnetic Reference Field (IGRF). The total value of GMF is measured by magnetometers.</p><p id="p-0106" num="0126">EMAG2 is a map of magnetic anomalies and contains negative values. In particular embodiments, an anomaly is a total value of magnetic field minus a regular component determined, for example, by the International Geomagnetic Reference Field (IGRF) or World Magnetic Model (WMM). The World Magnetic Model (WMM) and the International Geomagnetic Reference Field (IGRF) are estimated from the most recent data and may be of comparable quality. The differences between IGRF and WMM are within expected model inaccuracy. The WMM is a predictive-only model and is valid for the current epoch (2020.0 to 2025.0). The IGRF is retrospectively updated and the latest update, IGRF-12 is valid for the years 1900.0-2020.0. While IGRF is produced by the voluntary research of the scientific community under the banner of the International Association of Geomagnetism and Aeronomy (IAGA), the WMM is produced by NCEI and the British Geological Survey (BGS) for the US and UK defense agencies with guaranteed quality, user support, and updates. For the U.S. Department of Defense, the U.K. Ministry of Defence, the North Atlantic Treaty Organization (NATO), the International Hydrographic Organization (IHO) and the Federal Aviation Administration (FAA) the standard is WMM. For other users, the choice between WMM and IGRF may be arbitrary. Both of these models contain a standard mathematical description of the large-scale structure of the Earth's main magnetic field and its secular variation. When measurements are obtained (e.g. from mobile devices), these measurements contain the total field and therefore should be pre-processed to get them in the form of anomalies. In particular embodiments, this can be done using already implemented software modules (functions) of IGRF or WMM in MATLAB, python, C (or any other appropriate programming language).</p><p id="p-0107" num="0127">In particular embodiments, the earth's magnetic field and its secular variation can be calculated using either the WMM or IRGF. The range of change in values of total GMF may be approximately 25,000 nT to 65,000 nT near the earth surface. The results of calculation of the regular component of the total GMF together with horizontal and vertical components using WMM are presented in the examples of <figref idref="DRAWINGS">FIGS. <b>4</b>-<b>6</b></figref>. Official WMM 2020 report (for a model for 2020-2025 years) contains all necessary formulas, coefficients, and test values to validate a model (https://www.ngdc.noaa.gov/geomag/WMM/data/WMM2020/WMM2020_Report.pdf). The following provides information about IGRF model and its limitations (https://www.ngdc.noaa.gov/IAGA/vmod/igrfhw.html).</p><p id="p-0108" num="0128">The earth's magnetic field crudely resembles that of a central dipole. On the earth's surface the field varies from being horizontal and of magnitude about 30,000 nT near the equator to vertical and about 60,000 nT near the poles. The root mean square (RMS) magnitude of the vector over the surface is about 45,000 nT. The internal geomagnetic field also varies in time, on a time-scale of months and longer, in an as yet unpredictable manner. This so-called secular variation (SV) has a complicated spatial pattern, with a global RMS magnitude of about 80 nT/year. Consequently, a numerical model of the geomagnetic field may have coefficients that vary with time. <figref idref="DRAWINGS">FIG. <b>4</b></figref> illustrates an example horizontal component of an example regular magnetic field. <figref idref="DRAWINGS">FIG. <b>5</b></figref> illustrates an example vertical component of an example regular magnetic field. <figref idref="DRAWINGS">FIG. <b>6</b></figref> illustrates an example total value of an example regular magnetic field. In particular embodiments, the range for indexed color GeoTIFF images are selected depending on the ranges of EMAG2 minimum of &#x2212;3381 nT and maximum of 8632 nT. The resolution may be selected depending on the assumed accuracy of used sensors (magnetometers). Assuming an accuracy of approximately 1 &#x3bc;T, the range may be &#x2212;0.000003381 T and 0.000008632 T. This is a rather small variation, and in particular embodiments the range can be divided into 13 quantized levels: &#x2212;3, &#x2212;2, &#x2212;1, 0, 1, 2, 3, 4, 5, 6, 7, 8, and 9. For example, a particular sensor (e.g. magnetometer embedded in a mobile phone) may have an accuracy of 0.0625 &#x3bc;T.</p><p id="p-0109" num="0129">In particular embodiments, a magnetic field is a vector quantity, having at each point in space a strength and a direction. To describe a magnetic field, three quantities may be used. These may be as follows:<ul id="ul0017" list-style="none">    <li id="ul0017-0001" num="0000">    <ul id="ul0018" list-style="none">        <li id="ul0018-0001" num="0130">three orthogonal strength components (X, Y, and Z);</li>        <li id="ul0018-0002" num="0131">the total field strength and two angles (F, D, I); or</li>        <li id="ul0018-0003" num="0132">two strength components and an angle (H, Z, D)<br/>The relationships among these elements can be seen in the example of <figref idref="DRAWINGS">FIG. <b>7</b></figref>. These elements may be described as follows:</li>    </ul>    </li></ul></p><heading id="h-0007" level="1">Magnetic Components</heading><p id="p-0110" num="0133"></p><p id="p-0111" num="0000"><tables id="TABLE-US-00006" num="00006"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="2"><colspec colname="1" colwidth="42pt" align="left"/><colspec colname="2" colwidth="175pt" align="left"/><thead><row><entry namest="1" nameend="2" align="center" rowsep="1"/></row><row><entry>Component</entry><entry>Description</entry></row><row><entry namest="1" nameend="2" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry>F</entry><entry>the total intensity of the magnetic field vector</entry></row><row><entry>H</entry><entry>the horizontal intensity of the magnetic field vector</entry></row><row><entry>Z</entry><entry>the vertical component of the magnetic field vector;</entry></row><row><entry/><entry>by convention Z is positive downward</entry></row><row><entry>X</entry><entry>the north component of the magnetic field; X is positive</entry></row><row><entry/><entry>northward</entry></row><row><entry>Y</entry><entry>the east component of the magnetic field; Y is positive</entry></row><row><entry/><entry>eastward</entry></row><row><entry>D</entry><entry>magnetic declination, defined as the angle between</entry></row><row><entry/><entry>true north (geographic north) and the magnetic north</entry></row><row><entry/><entry>(the horizontal component of the field). D is positive</entry></row><row><entry/><entry>eastward of true North.</entry></row><row><entry>I</entry><entry>magnetic inclination, defined as the angle measured from</entry></row><row><entry/><entry>the horizontal plane to the magnetic field vector; downward</entry></row><row><entry/><entry>is positive</entry></row><row><entry namest="1" nameend="2" align="center" rowsep="1"/></row></tbody></tgroup></table></tables><br/>D and I may be measured in degrees, and all other elements may be measured in nanotesla. The seven elements are related through the following expressions:<ul id="ul0019" list-style="none">    <li id="ul0019-0001" num="0000">    <ul id="ul0020" list-style="none">        <li id="ul0020-0001" num="0134">Declination (D)</li>    </ul>    </li></ul></p><p id="p-0112" num="0000"><maths id="MATH-US-00001" num="00001"><math overflow="scroll"> <mrow>  <mi>D</mi>  <mo>=</mo>  <mrow>   <mo>(</mo>   <mfrac>    <mi>Y</mi>    <mi>X</mi>   </mfrac>   <mo>)</mo>  </mrow> </mrow></math></maths><ul id="ul0021" list-style="none">    <li id="ul0021-0001" num="0000">    <ul id="ul0022" list-style="none">        <li id="ul0022-0001" num="0135">Inclination (I)</li>    </ul>    </li></ul></p><p id="p-0113" num="0000"><maths id="MATH-US-00002" num="00002"><math overflow="scroll"> <mrow>  <mrow>   <mi>I</mi>   <mo>=</mo>   <mrow>    <mo>(</mo>    <mfrac>     <mi>Z</mi>     <mi>H</mi>    </mfrac>    <mo>)</mo>   </mrow>  </mrow>  <mo>;</mo>  <mrow>   <mrow>    <mi>cos</mi>    <mo>&#x2062;</mo>    <mrow>     <mi>cos</mi>     <mo>&#x2061;</mo>     <mo>(</mo>     <mi>I</mi>     <mo>)</mo>    </mrow>   </mrow>   <mo>=</mo>   <mfrac>    <mi>H</mi>    <mi>F</mi>   </mfrac>  </mrow> </mrow></math></maths><ul id="ul0023" list-style="none">    <li id="ul0023-0001" num="0000">    <ul id="ul0024" list-style="none">        <li id="ul0024-0001" num="0136">Horizontal (H)</li>    </ul>    </li></ul></p><p id="p-0114" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>H</i>=&#x221a;{square root over (<i>X</i><sup>2</sup><i>+Y</i><sup>2</sup>)}; <i>H=F</i>&#xb7;cos cos(<i>I</i>)<?in-line-formulae description="In-line Formulae" end="tail"?><ul id="ul0025" list-style="none">    <li id="ul0025-0001" num="0000">    <ul id="ul0026" list-style="none">        <li id="ul0026-0001" num="0137">North (X)</li>    </ul>    </li></ul></p><p id="p-0115" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>X=H</i>&#xb7;cos cos(<i>D</i>)<?in-line-formulae description="In-line Formulae" end="tail"?><ul id="ul0027" list-style="none">    <li id="ul0027-0001" num="0000">    <ul id="ul0028" list-style="none">        <li id="ul0028-0001" num="0138">East (Y)</li>    </ul>    </li></ul></p><p id="p-0116" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Y=H</i>&#xb7;sin sin(<i>D</i>)<?in-line-formulae description="In-line Formulae" end="tail"?><ul id="ul0029" list-style="none">    <li id="ul0029-0001" num="0000">    <ul id="ul0030" list-style="none">        <li id="ul0030-0001" num="0139">Down (Z)</li>    </ul>    </li></ul></p><p id="p-0117" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Z</i>=&#x221a;{square root over (<i>F</i><sup>2</sup><i>&#x2212;X</i><sup>2</sup><i>&#x2212;Y</i><sup>2</sup>)}<?in-line-formulae description="In-line Formulae" end="tail"?><ul id="ul0031" list-style="none">    <li id="ul0031-0001" num="0000">    <ul id="ul0032" list-style="none">        <li id="ul0032-0001" num="0140">Intensity (F)</li>    </ul>    </li></ul></p><p id="p-0118" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>=&#x221a;{square root over (<i>X</i><sup>2</sup><i>+Y</i><sup>2</sup><i>+Z</i><sup>2</sup>)}<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0119" num="0000">In particular embodiments, a magnetic map includes data representing one or more values for one or more of these elements at points in a 2D or 3D space.</p><p id="p-0120" num="0141">If a GeoTIFF image with true color (e.g. full RGB of 65,536 colors) is converted into an indexed image (e.g. with a specified palette containing both visual and magnetic data), then particular reductions in quality may occur. In MATLAB or another similar programming environment, RGB images can be converted into indexed images by setting the colormap. Converting a GeoTIFF file of the image in <figref idref="DRAWINGS">FIG. <b>1</b></figref> into a colormap with only 32 colors may produce the following results:</p><p id="p-0121" num="0000"><tables id="TABLE-US-00007" num="00007"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="1" colwidth="84pt" align="left"/><colspec colname="2" colwidth="63pt" align="center"/><colspec colname="3" colwidth="70pt" align="center"/><thead><row><entry namest="1" nameend="3" align="center" rowsep="1"/></row><row><entry>FieldName</entry><entry>RGB Information</entry><entry>Indexed Information</entry></row><row><entry namest="1" nameend="3" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry/></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="1" colwidth="84pt" align="left"/><colspec colname="2" colwidth="63pt" align="char" char="."/><colspec colname="3" colwidth="70pt" align="char" char="."/><tbody valign="top"><row><entry>FileSize</entry><entry>38729900</entry><entry>13767766</entry></row><row><entry>ColorType</entry><entry>truecolor</entry><entry>indexed</entry></row><row><entry>BitDepth</entry><entry>24</entry><entry>8</entry></row><row><entry>BitsPerSample</entry><entry>8</entry><entry>8</entry></row><row><entry>Photometricinterpretation</entry><entry>RGB</entry><entry>Palette</entry></row><row><entry namest="1" nameend="3" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0122" num="0142">For navigation (and visualization of mapping information), it may be sufficient to have a smaller color palette to leave room for GMF data. In particular embodiments, RGB GeoTIFF images are rewritten into indexed images, creating a new pseudo palette of colors containing in one part the color information and in another part magnetic data (which may be quantized). In particular embodiments, GMF data is incorporated into a GeoTIFF file via a transparency channel. In particular embodiments, a multi-layered GeoTIFF is created where the layers will be for the same palette or for different palettes. It may be preferable in particular embodiments to incorporate GMF data into a GeoTIFF file via a transparency channel.</p><p id="p-0123" num="0143">In particular embodiments, in the RGB model, a color is described as a combination of the three primary colors of light (red, green, and blue) in particular concentrations. For each of the three components, 0 represents minimum intensity, and 2{circumflex over (&#x2003;)}(BitsPerSample)&#x2212;1 represents maximum intensity. Thus, an RGB value of (0,0,0) represents black, and (255,255,255) represents white, assuming 8-bit components. For PlanarConfiguration=1, the components are stored in the indicated order: first Red, then Green, then Blue. For PlanarConfiguration=2, the StripOffsets for the component planes are stored in the indicated order: first the Red component plane StripOffsets, then the Green plane StripOffsets, then the Blue plane StripOffsets. In particular embodiments, in the palette-color model, a color is described with a single component. The value of the component is used as an index into the red, green, and blue curves in the ColorMap field to retrieve an RGB triplet that defines the color. When PhotometricInterpretation=3 is used, ColorMap must be present and SamplesPerPixel must be 1. In particular embodiments, this means that the image is used to define an irregularly shaped region of another image in the same TIFF file. SamplesPerPixel and BitsPerSample must be 1. PackBits compression is recommended in particular embodiments. The 1-bits define the interior of the region, and the 0-bits define the exterior of the region. A reader application can use a transparency mask to determine which parts of the image to display. Main image pixels that correspond to 1-bits in the transparency mask are imaged to the screen or printer, but main image pixels that correspond to 0-bits in the transparency mask are not displayed or printed.</p><p id="p-0124" num="0144">In particular embodiments, TIFF readers may process multiple images (subfiles) per TIFF file, although they are not required to do anything with images after the first one. TIFF writers may be required to write a long word of 0 after the last Image File Directory (IFD) (to signal that this is the last IFD), as described in a TIFF format specification. If multiple subfiles are written, the first one must be the full-resolution image. Subsequent images, such as reduced-resolution images, may be in any order in the TIFF file. If a reader wants to use such images, it must scan the corresponding IFD's before deciding how to proceed. Some TIFF files may have more components per pixel than may be expected. A Baseline TIFF reader must skip over them, using the values of the SamplesPerPixel and BitsPerSample fields. For example, it is possible that the data will have a PhotometricInterpretation of RGB but have four SamplesPerPixel. In particular embodiments, extra components specify that each pixel has m extra components whose interpretation is defined by one of the values listed below. When this field is used, the SamplesPerPixel field has a value greater than the PhotometricInterpretation field suggests. For example, full-color RGB data normally has SamplesPerPixel=3. If SamplesPerPixel is greater than three, then the ExtraSamples field describes the meaning of the extra samples. If SamplesPerPixel is, say, five then ExtraSamples will contain two values, one for each extra sample. ExtraSamples is typically used to include non-color information, such as opacity, in an image. Possible values for each item in the field's value are as follows:<ul id="ul0033" list-style="none">    <li id="ul0033-0001" num="0000">    <ul id="ul0034" list-style="none">        <li id="ul0034-0001" num="0145">0=Unspecified data</li>        <li id="ul0034-0002" num="0146">1=Associated alpha data (with pre-multiplied color)</li>        <li id="ul0034-0003" num="0147">2=Unassociated alpha data</li>    </ul>    </li></ul></p><p id="p-0125" num="0148">Associated alpha data is opacity information. Unassociated alpha data is transparency information that logically exists independent of an image. It is commonly called a soft matte. Including both unassociated and associated alpha is undefined because associated alpha specifies that color components are pre-multiplied by the alpha component, while unassociated alpha specifies the opposite. By convention, extra components that are present must be stored as the &#x201c;last components&#x201d; in each pixel. For example, if SamplesPerPixel is 4 and there is 1 extra component, then it is located in the last component location (SamplesPerPixel-1) in each pixel. Components designated as &#x201c;extra&#x201d; are just like other components in a pixel. In particular, the size of such components is defined by the value of the BitsPerSample field. With the introduction of this field, TIFF readers must not assume a particular SamplesPerPixel value based on the value of the PhotometricInterpretation field. For example, if the file is an RGB file, SamplesPerPixel may be greater than 3. The default is no extra samples. This field may be present if there are extra samples.</p><p id="p-0126" num="0149">As an example, in particular embodiments, when embedding a magnetic map into a GeoTIFF or other suitable image, there may be a default map image in TIFF format based on GNSS data. This file may have, for example, three samples per pixel. The geomagnetic data is added as an extra component via appropriate programming environment (MATLAB could be used as one option) in the form of the alpha channel. After applying appropriate code, the new TIFF file may (in this example) have four samples per pixel, including the newly added GMF data. This modified TIFF file may be used to extract embedded GMF data for localization, navigation or any other purposes.</p><p id="p-0127" num="0150">As an example only, and not by way of limitation, particular embodiments incorporate GMF data into a GeoTIFF file via a transparency channel, where alpha channel is the transparency channel.</p><p id="p-0128" num="0151">There are three components of magnetic-field strength Mx, My, Mz. The magnitude of magnetic field, M, may be defined as follows:</p><p id="p-0129" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>M</i>=&#x221a;{square root over (<i>M</i><sub>x</sub><sup>2</sup><i>+M</i><sub>y</sub><sup>2</sup><i>+M</i><sub>z</sub><sup>2</sup>)}<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0130" num="0000">For different combinations of Mx, My, and Mz, the magnitude may be the same. As for color representation in an RGB model, different components of a triad may produce different final colors. If the same approach is used, then the final colorization of the GMF map may be different for the same values of total magnetic field, which may be undesirable. Consider the following example, illustrated in <figref idref="DRAWINGS">FIG. <b>8</b></figref>. If the total magnitude of GMF at a given point is equal to one, then there will be a variety of options of distribution between the XYZ components, which may result in different pseudo coloring. For visualization, the layer representation of XYZ components can be used to make distinctions between different distribution of GMF components.</p><p id="p-0131" num="0152">In particular embodiments, a patch is a data set that includes GMF values for a particular area. For example, Patch_ID1 may include GMF data for area 1, Patch_ID2 may include GMF data for area 2, etc. The number of patches may be related to the number of patches needed to fill the map tile. Patch_ID may contain three components of GMF (Mx, My, Mz) and the total magnitude.</p><p id="p-0132" num="0153">In particular embodiments, additional tags are added to the original GeoTIFF file. This additional information may be used to be able to restore the original GMF data after embedding. The MXYZ pseudo colormap may be analogue to a colormap in indexed images, and, in particular embodiments, a quantization method is needed for navigation if a three-components magnetic field is used. For an MXYZ map, it can be assumed that the data of the three components of GMF are obtained in a prescribed coordinate system orientation, for example, east, north, up (ENU) coordinates (or they may be converted to this orientation by quaternions or Direction Cosine Matrix (DCM) from a mobile sensor unit). An MXYZ pseudo colormap can be determined from quantization of already present GMF data. In particular embodiments, such as this example, the colormap will be different each time for different patches. In addition, or as an alternative, the MXYZ pseudo colormap can be prescribed, depending on the max and min possible values of the XYZ components of the magnetic field. Particular embodiments may use the modified quantization algorithm or use one of the following algorithms already available in MATLAB, Python, or other appropriate programming environments:<ul id="ul0035" list-style="none">    <li id="ul0035-0001" num="0000">    <ul id="ul0036" list-style="none">        <li id="ul0036-0001" num="0154">Uniform Quantization&#x2014;Uniform quantization cuts the RGB color cube into smaller cubes of length tol. For example, if you specify a tol of 0.1, the edges of the cubes are one-tenth the length of the RGB cube. The total number of small cubes is:</li>    </ul>    </li></ul></p><p id="p-0133" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>n</i>=(floor(1/tol)+1){circumflex over (&#x2003;)}3<?in-line-formulae description="In-line Formulae" end="tail"?><ul id="ul0037" list-style="none">    <li id="ul0037-0001" num="0000">    <ul id="ul0038" list-style="none">        <li id="ul0038-0001" num="0000">&#x2003;Each cube represents a single color in the output image. Therefore, the maximum length of the colormap is n. rgb2ind command removes any colors that don't appear in the input image, so the actual colormap can be much smaller than n. This may be advantageous from the point of view of universality, as it may provide the prescribed pseudo colormap for all regions with different levels of GMF.</li>        <li id="ul0038-0002" num="0155">Minimum Variance Quantization&#x2014;Minimum variance quantization cuts the RGB color cube into smaller boxes (not necessarily cubes) of different sizes, depending on how the colors are distributed in the image. If the input image actually uses fewer colors than the number specified, the output colormap is also smaller. This may be advantageous for visualization of detailed GMF in local region, as minimal variation in the field may have distinctive color differences. This may also be advantageous for protecting the data from unauthorized use since the extracting the GMF data for navigation is only possible if knowing/having tags for a specific GeoTIFF.</li>        <li id="ul0038-0003" num="0156">Inverse Colormap&#x2014;The inverse colormap algorithm quantizes the specified colormap into 32 distinct levels per color component. Then, for each pixel in the input image, the closest color in the quantized colormap is found. This is similar to Uniform Quantization, but here the length of the colormap will be the same, even if for the given GeoTIFF one or several pseudo color range are absent in the GMF data.</li>    </ul>    </li></ul></p><p id="p-0134" num="0157">In particular embodiments, the following example algorithm may be used. Although this disclosure describes and illustrates particular steps of this method as occurring in a particular order, this disclosure contemplates any suitable steps of this method occurring in any suitable order. Moreover, although this disclosure describes and illustrates this example algorithm including particular steps, this disclosure contemplates any suitable algorithm including any suitable steps, which may include all, some, or none of the following steps, where appropriate. Furthermore, although this disclosure describes and illustrates particular components, devices, or systems carrying out particular steps of this algorithm, this disclosure contemplates any suitable combination of any suitable components, devices, or systems carrying out any suitable steps of the algorithm. In a first step, the XYZ components of GMF (from Patch_ID) given in the body-fixed coordinate system should be converted into XYZ components in ENU frames (or the frame used in the GeoTIFF referencing). In particular embodiments, conversion of XYZ components of GMF from the body-fixed to ENU frame are done before those data are put into Patch_ID (at least leveling). One cell of Patch_ID may contain several measurements, and each of them could be done with different orientation in space.</p><p id="p-0135" num="0158">The file boston.tiff (shown in the example of <figref idref="DRAWINGS">FIG. <b>1</b></figref>) has an orientation of axis as west and north.</p><p id="p-0136" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>input <i>Mx,My,Mz</i>==&#x3e;output <i>M</i><sub>E</sub><i>,M</i><sub>N</sub><i>,M</i><sub>U </sub><?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0137" num="0000">In a second step, data about XYZ components to fill the selected GeoTIFF file may be extracted from Patch_ID (or it may include several patches). These data are magnetic data, collected and pre-processed: XYZ components in ENU system (or vertical Z and horizontal H components+declination D). There may be variations however. The GeoTIFF file may have a resolution other than Patch_ID. It is determined by one or more tags from the following data fields:<ul id="ul0039" list-style="none">    <li id="ul0039-0001" num="0000">    <ul id="ul0040" list-style="none">        <li id="ul0040-0001" num="0159">CellExtentInWorldX</li>        <li id="ul0040-0002" num="0160">CellExtentInWorldY</li>    </ul>    </li></ul></p><p id="p-0138" num="0161">In a third step, the XYZ components of GMF in the Patch_size_geotiff_adjusted are quantized.</p><p id="p-0139" num="0000"><tables id="TABLE-US-00008" num="00008"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="offset" colwidth="21pt" align="left"/><colspec colname="1" colwidth="98pt" align="left"/><colspec colname="2" colwidth="98pt" align="left"/><thead><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row><row><entry/><entry>Input:</entry><entry>Output:</entry></row><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry/></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="4"><colspec colname="offset" colwidth="21pt" align="left"/><colspec colname="1" colwidth="63pt" align="left"/><colspec colname="2" colwidth="35pt" align="left"/><colspec colname="3" colwidth="98pt" align="left"/><tbody valign="top"><row><entry/><entry>M<sub>E</sub>, M<sub>N</sub>, M<sub>U</sub></entry><entry>&#x2192;</entry><entry>MXYZ pseudo colormap</entry></row><row><entry/><entry namest="offset" nameend="3" align="center" rowsep="1"/></row></tbody></tgroup></table></tables><br/>Either prescribed length or varying length is used, depending on the selected quantization method. In particular embodiments, this output is eventually processed to generate a map for navigation and visualization.</p><p id="p-0140" num="0162">In a fourth step, the GeoTIFF file is modified by adding the alpha channel. In particular embodiments, the MXYZ pseudo colormap obtained in the third step is added to the GeoTIFF file in the form of the alpha channel as an additional component. The value in the alpha channel (fourth sample in pixel) may be a link to a specific value of GMF contained in the MXYZ pseudo colormap.</p><p id="p-0141" num="0000"><tables id="TABLE-US-00009" num="00009"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="2"><colspec colname="1" colwidth="119pt" align="left"/><colspec colname="2" colwidth="98pt" align="left"/><thead><row><entry namest="1" nameend="2" align="center" rowsep="1"/></row><row><entry>Input:</entry><entry>Output:</entry></row><row><entry namest="1" nameend="2" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry/></row></tbody></tgroup><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="1" colwidth="98pt" align="left"/><colspec colname="2" colwidth="21pt" align="left"/><colspec colname="3" colwidth="98pt" align="left"/><tbody valign="top"><row><entry>MXYZ pseudo colormap,</entry><entry>&#x2192;</entry><entry>new GeoTIFF file with alpha</entry></row><row><entry>Patch_size_geotiff_adjusted</entry><entry/><entry>channel</entry></row><row><entry namest="1" nameend="3" align="center" rowsep="1"/></row></tbody></tgroup></table></tables><br/>In particular embodiments, the maximum range of transparency is from zero (e.g. full transparency) to 255 (e.g. black color). In particular embodiments, the MXYZ pseudo colormap may be adjusted to 256 length (there may be only variation in maximum and minimum limits of GMF associated with 1 and 255 values of alpha) and zero value of alpha may be saved for NaN values in Patch_size_geotiff_adjusted in order not to be not shown in the image.</p><p id="p-0142" num="0163">In a fifth step, an additional tag containing information about the quantization method and MXYZ pseudo colormap is created. This additional information is added to restore the original GMF data after embedding in particular embodiments. In particular embodiments, the tag is created together with the GeoTIFF file. In particular embodiments, the additional information may be in the form of a TXT file. The tag is a part of metadata associated with the GeoTIFF file. There is a number of required tags, but this file format allows creation of user-defined tags specific to a particular application.</p><p id="p-0143" num="0164">As an example of creating an MXYZ colormap from a magnetic profile, each component (XYZ) is quantized into a given number of levels, depending on its maximal and minimal values. The corresponding quantized value is assumed to be one of the basic colors (RGB). Each entry in the magnetic profile or patch_ID is then associated with the combination of XYZ-RGB that is then written in the color palette (e.g. &#x2018;coded&#x2019; via color palette). In the GeoTIFF file instead of all three components of GMF the only one number (integer number) is stored as a link to the MXYZ colormap. In this case, it is possible that the pixel with the same value of total magnitude of GMF may have different color as a result of different combination of XYZ (RGB) components. For visualization, particular embodiments can switch between this 3D colorization and the visualization via alpha channel by total magnitude of GMF. The reading from an example from Coronado island may be taken as an example of magnetic profile to be colorized:</p><p id="p-0144" num="0000"><tables id="TABLE-US-00010" num="00010"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="2"><colspec colname="offset" colwidth="14pt" align="left"/><colspec colname="1" colwidth="203pt" align="left"/><thead><row><entry/><entry namest="offset" nameend="1" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry/><entry>%assigning the components of GMF</entry></row><row><entry/><entry>X=ds.calMagX<sub>&#x2014;&#x2014;</sub>T_;</entry></row><row><entry/><entry>Y=ds.calMagY<sub>&#x2014;&#x2014;</sub>T_;</entry></row><row><entry/><entry>Z=ds.calMagZ<sub>&#x2014;&#x2014;</sub>T ;</entry></row><row><entry/><entry>%assigning the latitude and longitude</entry></row><row><entry/><entry>latitude=ds.Lat_;</entry></row><row><entry/><entry>longitude=ds.Long_;</entry></row><row><entry/><entry>%calculating the total magnitude of GMF &#x2212; actual one</entry></row><row><entry/><entry>totGMF=sqrt(X.{circumflex over (&#x2009;)}2+Y.{circumflex over (&#x2009;)}2+Z.{circumflex over (&#x2009;)}2);</entry></row><row><entry/><entry>%assigning the level 255 to non-transparent value</entry></row><row><entry/><entry>totGMFmax=max(totGMF);</entry></row><row><entry/><entry>totGMFmin=min(totGMF);</entry></row><row><entry/><entry>delta=totGMFmax&#x2212;totGMFmin;</entry></row><row><entry/><entry>QLevel_GMF=delta/255;</entry></row><row><entry/><entry>QGMF=round((totGMF&#x2212;totGMFmin)/QLevel_GMF);</entry></row><row><entry/><entry>%adding fixed positive shift to avoid negative values: shift=1000</entry></row><row><entry/><entry>X=1000+X;</entry></row><row><entry/><entry>Y=1000+Y;</entry></row><row><entry/><entry>Z=1000+Z;</entry></row><row><entry/><entry>%calculation of min and max values in XYZ components of GMF</entry></row><row><entry/><entry>Xmin=min(X);</entry></row><row><entry/><entry>Xmax=max(X);</entry></row><row><entry/><entry>Ymin=min(Y);</entry></row><row><entry/><entry>Ymax=max(Y);</entry></row><row><entry/><entry>Zmin=min(Z);</entry></row><row><entry/><entry>Zmax=max(Z);</entry></row><row><entry/><entry>%calculation of range in XYZ components of GMF</entry></row><row><entry/><entry>deltaX=Xmax&#x2212;Xmin;</entry></row><row><entry/><entry>deltaY=Ymax&#x2212;Ymin;</entry></row><row><entry/><entry>deltaZ=Zmax&#x2212;Zmin;</entry></row><row><entry/><entry namest="offset" nameend="1" align="center" rowsep="1"/></row></tbody></tgroup></table></tables><br/>In particular embodiments, each component of GMF is quantized into eight levels (from zero to seven) and the ranges in maximal and minimal values in XYZ are divided into seven sets. The total possible size for color palette is 2<sup>3</sup>*2<sup>3</sup>*2<sup>3</sup>=512.</p><p id="p-0145" num="0000"><tables id="TABLE-US-00011" num="00011"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="1"><colspec colname="1" colwidth="217pt" align="left"/><thead><row><entry namest="1" nameend="1" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry>%quantization level in each XYZ components</entry></row><row><entry>QLevelX=deltaX/7;</entry></row><row><entry>QLevelY=deltaY/7;</entry></row><row><entry>QLevelZ=deltaZ/7;</entry></row><row><entry>%quantization</entry></row><row><entry>QX=round((X&#x2212;Xmin)/QLevelX);</entry></row><row><entry>QY=round((Y&#x2212;Y min)/QLevelY);</entry></row><row><entry>QZ=round((Z&#x2212;Zmin)/QLevelZ);</entry></row><row><entry>%colormap contains three components of RGB with length 8 bit</entry></row><row><entry>%MATLAB representation requires range of RGB components in [0, 1]</entry></row><row><entry>%that's why XYZ components are also converted in this range</entry></row><row><entry>QX_RGB=QX/7;</entry></row><row><entry>QY_RGB=QY/7;</entry></row><row><entry>QZ_RGB=QZ/7;</entry></row><row><entry>%forming the color palette</entry></row><row><entry>QXYZ=round([QX_RGB QY_RGB QZ_RGB],2);</entry></row><row><entry>%eliminating the repeating entries</entry></row><row><entry>MXYZ_colormap = unique(QXYZ(:,[1 2 3]), &#x2018;rows');</entry></row><row><entry>%replacing the XYZ by single value from MXYZ colormap</entry></row><row><entry>[tf, index]=ismember(QXYZ,MXYZ_colormap,&#x2019;rows');</entry></row><row><entry>%Variable &#x2018;index&#x2019; has the same number of rows as QXYZ</entry></row><row><entry>%rename it in magnetic profile</entry></row><row><entry>magnetic_profile=index;</entry></row><row><entry>%plotting the colorized 3D magnetic profile</entry></row><row><entry>figure,geoscatter(latitude,longitude,30,MXYZ_colormap(index,:))</entry></row><row><entry>%plotting the colorized total magnitude of GMF along the track</entry></row><row><entry>figure,geoscatter(latitude,longitude,30,QGMF)</entry></row><row><entry>h=colorbar</entry></row><row><entry namest="1" nameend="1" align="center" rowsep="1"/></row></tbody></tgroup></table></tables><br/>The resulting color palette may contain contains 94 entries. In cases of higher accuracy, the length of representation for each component can be increased to 16 Qlevels. In this case, the total length of the MXYZ palette will be 2<sup>4</sup>*2<sup>4</sup>*2<sup>4</sup>=4096. But, for the same example, the presentation may include 264 entries.</p><p id="p-0146" num="0165">In particular embodiments, with this approach (when taking the specific region or specific magnetic profile to be visualized and added to GeoTIFF), the length of the MXYZ palette will be varied and not fixed. Moreover, to decode the palette data it may be advantageous to know ranges of XYZ components: Xmin, Xmax, Ymin, Ymax, Zmin, Zmax, and number of quantization levels together with quantization method. <figref idref="DRAWINGS">FIG. <b>9</b></figref> illustrates an example visualization of an example trajectory. The result is a colorized 3D magnetic profile, which may be displayed graphically to a user. In particular embodiments, more data may be displayed and more colorization may be added to the map. The colorbar (from a 264 length MXYZ colormap) may be displayed as illustrated (in grayscale) in the example of <figref idref="DRAWINGS">FIG. <b>10</b></figref>.</p><p id="p-0147" num="0166">Herein, where appropriate, a trajectory is a curve that a magnetic-measurement device describes through a 2D or 3D space as it makes and records magnetic measurements. The magnetic-measurement device may make and record one or more magnetic measurements at each of one or more points along the trajectory. The points may be defined using any suitable 2D or 3D coordinate system, such as, for example, the Geographic Coordinate System (GCS), which identifies positions on the Earth in degrees of latitude and longitude; the Earth-Centered Earth-Fixed (ECEF) coordinate system; the Military Grid Reference System (MGRS); the Universal Transverse Mercator (UTM) grid system; or the Universal Polar Stereographic (UPS) grid system; or any other suitable coordinate system. The magnetic-measurement device may make and record one or more magnetic measurements along the trajectory and record one or more locations for those magnetic measurements (e.g. the locations where they were made). The magnetic-measurement device may also record one or more timestamps for those magnetic measurements, e.g., indicating when they were made. The magnetic-measurement device may also record one or more characteristics of the magnetic-measurement device for those magnetic measurements, such as, for example, a device identifier of the magnetic-measurement device; a device type of the magnetic-measurement device (e.g. automobile, mobile phone, drone, etc.); a sensor type (e.g. magnetometer type) of the sensor(s) that made the magnetic measurements; one or more headings of the magnetic-measurement device when the magnetic measurements were made; one or more orientations of the magnetic-measurement device when the magnetic measurements were made; or any other suitable characteristics of the magnetic-measurement device. Such trajectory data (e.g. magnetic measurements, locations, timestamps, and device characteristics), in any suitable combination, may be used to create or update a magnetic map. For example, a magnetic-measurement device may generate trajectory data for a trajectory, temporarily store the trajectory data, and then communicate the trajectory data to a server for incorporation into a magnetic map encompassing the trajectory, along with other trajectories from other magnetic-measurement devices. Although particular combinations of particular trajectory data are described or illustrated herein, this disclosure contemplates any suitable combinations of any suitable trajectory data. Herein, reference to a trajectory may encompass trajectory data, and vice versa, where appropriate.</p><p id="p-0148" num="0167"><figref idref="DRAWINGS">FIG. <b>11</b></figref> illustrates an example zoomed-in portion of the visualization illustrated in the example of <figref idref="DRAWINGS">FIG. <b>9</b></figref>. <figref idref="DRAWINGS">FIG. <b>12</b></figref> illustrates example total magnitude of GMF along the route in the example of <figref idref="DRAWINGS">FIG. <b>9</b></figref>. Here, the value of total magnitude of GMF is taken directly from actual values of XYZ components from magnetic profiles. When there is a need to restore the values of the GMF back from the MXYZ colormap, the corresponding quantized values of XYZ are used. In this case, errors in restoring these values compared to the original values of the GMF prior to the described embedding process. For color palette size from the original example (264), the error in restoring GMF magnitude is determined as follows:</p><p id="p-0149" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>X</i>_restored=<i>MXYZ</i>_colormap(index,1)*15<i>*Q</i>Level<i>X+X</i>min&#x2212;1000;<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0150" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Y</i>_restored=<i>MXYZ</i>_colormap(index,2)*15<i>*Q</i>Level<i>Y+Y</i>min&#x2212;1000;<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0151" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Z</i>_restored=<i>MXYZ</i>_colormap(index,3)*15<i>*Q</i>Level<i>Z+Z</i>min&#x2212;1000;<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0152" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>GMF_restored=sqrt(<i>X</i>_restored.{circumflex over (&#x2003;)}2+<i>Y</i>_restored.{circumflex over (&#x2003;)}2+<i>Z</i>_restored.{circumflex over (&#x2003;)}2);<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0153" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>deltaGMF=GMF_restored-totGMF;<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0154" num="0000">As illustrated in the example of <figref idref="DRAWINGS">FIG. <b>13</b></figref>, the maximal deviation may be as follows:<ul id="ul0041" list-style="none">    <li id="ul0041-0001" num="0000">    <ul id="ul0042" list-style="none">        <li id="ul0042-0001" num="0168">max(deltaGMF)</li>        <li id="ul0042-0002" num="0169">ans=</li>        <li id="ul0042-0003" num="0170">2.3504<br/>As illustrated in the example of <figref idref="DRAWINGS">FIG. <b>14</b></figref>, in the case of smaller size of MXYZ colormap (<b>94</b>), the maximal deviation may be as follows:</li>        <li id="ul0042-0004" num="0171">max(deltaGMF)</li>        <li id="ul0042-0005" num="0172">ans=</li>        <li id="ul0042-0006" num="0173">5.0521</li>    </ul>    </li></ul></p><p id="p-0155" num="0174">In particular embodiments, the quantization level 16 in each GMF component is enough to code the GMF data in visual form by pseudo coloring. The maximal length of color palette in this case will be 4096, but actual length in each case will be different depending on the variation of XYZ components in the given patch. To restore the original data, it may be advantageous to have the access to MXYZ colormap, to know the quantization level in X, Y, and Z and to know their minimal values. Thus, the magnetic data embedded in GeoTIFF in the form of MXYZ color palette via alpha channel may be protected from unauthorized access. Below, different quantization levels and restoring error associated with each level are discussed. At the time of embedding, the system may determine the best or optimal quantization level with the least restoration error using machine learning or by going through each at that time and selecting the one with the least error. The quantization may be done based on the expected value of restoring error, and each time the QLevel may be different.</p><p id="p-0156" num="0175">Above, it was assumed that the size of the MXYZ color palette is fixed. In particular embodiments, it is set to be equal to 4096, or 2<sup>4 </sup>quantization levels (QLevels) in each XYZ component (RGB channels). Particular embodiments may vary minimum and maximum levels in each XYZ component and fill the whole palette uniformly. <figref idref="DRAWINGS">FIG. <b>15</b></figref> illustrates example distribution among 16 example Qlevels in each of the X, Y, and Z components for an example magnetic profile. This distribution is non-uniform. There is missing data between approximately five to 10 QLevels in all three components. In the Z-component, the data is absent, but in the X and Y components, there is a small variation in ranges five to 10.</p><p id="p-0157" num="0176">In particular embodiments, the number of Qlevels is 16. Values of QLevels, total size of MXYZ color palette and error of restoring total magnitude of GMF are as follows and as illustrated in the example of <figref idref="DRAWINGS">FIG. <b>16</b></figref>:</p><p id="p-0158" num="0000"><tables id="TABLE-US-00012" num="00012"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="5"><colspec colname="1" colwidth="49pt" align="center"/><colspec colname="2" colwidth="28pt" align="center"/><colspec colname="3" colwidth="49pt" align="center"/><colspec colname="4" colwidth="35pt" align="center"/><colspec colname="5" colwidth="56pt" align="center"/><thead><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row><row><entry/><entry/><entry/><entry>MXYZ</entry><entry>Error of</entry></row><row><entry>X</entry><entry>Y</entry><entry>Z</entry><entry>colormap</entry><entry>restoring</entry></row><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry>3.2841</entry><entry>3.1429</entry><entry>2.8184</entry><entry>264</entry><entry>2.3504</entry></row><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0159" num="0177">In particular embodiments, the number of Qlevels in each X, Y, and Z component is 32. The length of the MXYZ colormap will increase, as illustrated in the example of <figref idref="DRAWINGS">FIG. <b>17</b></figref>. Values of QLevels and total size of MXYZ color palette in this case are as follows:</p><p id="p-0160" num="0000"><tables id="TABLE-US-00013" num="00013"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="5"><colspec colname="1" colwidth="49pt" align="center"/><colspec colname="2" colwidth="28pt" align="center"/><colspec colname="3" colwidth="49pt" align="center"/><colspec colname="4" colwidth="35pt" align="center"/><colspec colname="5" colwidth="56pt" align="center"/><thead><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row><row><entry/><entry/><entry/><entry>MXYZ</entry><entry>Error of</entry></row><row><entry>X</entry><entry>Y</entry><entry>Z</entry><entry>colormap</entry><entry>restoring</entry></row><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry>1.5891</entry><entry>1.5208</entry><entry>1.3637</entry><entry>762</entry><entry>1.2989</entry></row><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0161" num="0178">In particular embodiments, the number of Qlevels in each X, Y, and Z component is 64, as illustrated in the example of <figref idref="DRAWINGS">FIG. <b>18</b></figref>. Values of QLevels and total size of MXYZ color palette in this case are as follows:</p><p id="p-0162" num="0000"><tables id="TABLE-US-00014" num="00014"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="5"><colspec colname="1" colwidth="49pt" align="center"/><colspec colname="2" colwidth="35pt" align="center"/><colspec colname="3" colwidth="42pt" align="center"/><colspec colname="4" colwidth="35pt" align="center"/><colspec colname="5" colwidth="56pt" align="center"/><thead><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row><row><entry/><entry/><entry/><entry>MXYZ</entry><entry>Error of</entry></row><row><entry>X</entry><entry>Y</entry><entry>Z</entry><entry>colormap</entry><entry>restoring</entry></row><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry>0.7819</entry><entry>0.7483</entry><entry>0.671</entry><entry>2585</entry><entry>0.7621</entry></row><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0163" num="0179">In particular embodiments, the number of Qlevels in each X, Y, and Z component is 128, as illustrated in the example of <figref idref="DRAWINGS">FIG. <b>19</b></figref>. Values of QLevels and total size of MXYZ color palette in this case are as follows:</p><p id="p-0164" num="0000"><tables id="TABLE-US-00015" num="00015"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="5"><colspec colname="1" colwidth="49pt" align="center"/><colspec colname="2" colwidth="28pt" align="center"/><colspec colname="3" colwidth="49pt" align="center"/><colspec colname="4" colwidth="35pt" align="center"/><colspec colname="5" colwidth="56pt" align="center"/><thead><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row><row><entry/><entry/><entry/><entry>MXYZ</entry><entry>Error of</entry></row><row><entry>X</entry><entry>Y</entry><entry>Z</entry><entry>colormap</entry><entry>restoring</entry></row><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry>0.3879</entry><entry>0.3712</entry><entry>0.3329</entry><entry>5520</entry><entry>0.5466</entry></row><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0165" num="0180">In particular embodiments, increasing the number of QLevels uniformly separated among XYZ components of GMF does not substantially provide the corresponding increase in the accuracy of restoring the image. First, in particular embodiments, the data for each separate XYZ component are patched together. The results are four patches (patch_ID_calibr, patch_ID_Mx, patch_ID_My, and patch_ID_Mz) and array trajectory_calibr containing eight columns (i, j&#x2014;indexes of array, total GMF, Mx, My, Mz, latitude, and longitude). <figref idref="DRAWINGS">FIG. <b>20</b></figref> illustrates total GMF scattered along the trajectory specified by latitude and longitude. Second, the number of QLevels=31 is selected with uniform distribution and the quantization error is checked, as illustrated in the example of <figref idref="DRAWINGS">FIG. <b>21</b></figref>.</p><p id="p-0166" num="0000"><tables id="TABLE-US-00016" num="00016"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="5"><colspec colname="1" colwidth="49pt" align="center"/><colspec colname="2" colwidth="28pt" align="center"/><colspec colname="3" colwidth="49pt" align="center"/><colspec colname="4" colwidth="35pt" align="center"/><colspec colname="5" colwidth="56pt" align="center"/><thead><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row><row><entry/><entry/><entry/><entry>MXYZ</entry><entry/></row><row><entry/><entry/><entry/><entry>Colormap</entry><entry>QError</entry></row><row><entry>QX</entry><entry>QY</entry><entry>QZ</entry><entry>(length)</entry><entry>(abs. value)</entry></row><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry>1.6002</entry><entry>3.6339</entry><entry>1.4073</entry><entry>1141</entry><entry>18.6199</entry></row><row><entry namest="1" nameend="5" align="center" rowsep="1"/></row></tbody></tgroup></table></tables><br/>The example of QError distribution in the example of <figref idref="DRAWINGS">FIG. <b>21</b></figref> shows there is significant non-uniform behavior of error. In particular embodiments, this is due to the non-equal values of QLevels in XYZ (see QY in the table above). The range of change in the Y component of GMF is twice as large as in the X and Z components, as follows:</p><p id="p-0167" num="0000"><tables id="TABLE-US-00017" num="00017"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="3"><colspec colname="offset" colwidth="49pt" align="left"/><colspec colname="1" colwidth="35pt" align="left"/><colspec colname="2" colwidth="133pt" align="char"/><thead><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry/><entry>deltaX</entry><entry>49.6068</entry></row><row><entry/><entry>deltaY</entry><entry>112.6503</entry></row><row><entry/><entry>deltaZ</entry><entry>43.6254</entry></row><row><entry/><entry namest="offset" nameend="2" align="center" rowsep="1"/></row></tbody></tgroup></table></tables><br/><figref idref="DRAWINGS">FIG. <b>22</b></figref> is an example visualization of example GMF data for an example patch with 31 Qlevels in each channel with uniform quantization. Third, the data are quantized with a variable number of QLevels in each channel. In particular embodiments, QLevels are selected in such a way as to get change in each component of approximately 1 &#x3bc;T. As can be seen in the example of <figref idref="DRAWINGS">FIG. <b>23</b></figref>, non-Gaussian behavior of the quantized error distribution is still present compared with the previous results (i.e. the accuracy is not improved when quantization levels are increased). And, as it can be seen in the chart below, the quantization error is even increasing.</p><p id="p-0168" num="0000"><tables id="TABLE-US-00018" num="00018"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="8"><colspec colname="1" colwidth="28pt" align="center"/><colspec colname="2" colwidth="21pt" align="center"/><colspec colname="3" colwidth="28pt" align="center"/><colspec colname="4" colwidth="21pt" align="center"/><colspec colname="5" colwidth="28pt" align="center"/><colspec colname="6" colwidth="14pt" align="center"/><colspec colname="7" colwidth="35pt" align="center"/><colspec colname="8" colwidth="42pt" align="center"/><thead><row><entry namest="1" nameend="8" align="center" rowsep="1"/></row><row><entry/><entry/><entry/><entry/><entry/><entry/><entry>MXYZ</entry><entry/></row><row><entry/><entry/><entry/><entry/><entry/><entry/><entry>Colormap</entry><entry>QError</entry></row><row><entry>QX</entry><entry>NX</entry><entry>QY</entry><entry>NY</entry><entry>QZ</entry><entry>NZ</entry><entry>(length)</entry><entry>(abs. value)</entry></row><row><entry namest="1" nameend="8" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry>1.0124</entry><entry>49</entry><entry>1.0058</entry><entry>112</entry><entry>1.0145</entry><entry>43</entry><entry>1614</entry><entry>19.2510</entry></row><row><entry namest="1" nameend="8" align="center" rowsep="1"/></row></tbody></tgroup></table></tables><br/>Fourth, a source of the problem is identified. Returning to the file where there is patching of several trajectories into a map and checking the code:</p><p id="p-0169" num="0000"><tables id="TABLE-US-00019" num="00019"><table frame="none" colsep="0" rowsep="0" pgwide="1"><tgroup align="left" colsep="0" rowsep="0" cols="1"><colspec colname="1" colwidth="280pt" align="left"/><thead><row><entry namest="1" nameend="1" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry>for m=2:length(lon_value all)</entry></row><row><entry>i=round((A&#x2212;lat_value_all(m))/10e&#x2212;6);</entry></row><row><entry>j=round((lon_value_all(m)&#x2212;D)/10e&#x2212;6);</entry></row><row><entry>patch_ID_calibr(i,j)=patch_ID_calibr(i,j)+patch_K_calibr(i,j)*(totM_calibr_value_all(m)</entry></row><row><entry>&#x2212;patch_ID_calibr(i,j));</entry></row><row><entry>patch_ID_Mx(i,j)=patch_ID_Mx(i,j)+patch_K_calibr(i,j)*(Mx(m)&#x2212;patch_ID_Mx(i,j));</entry></row><row><entry>patch_ID_My(i,j)=patch_ID_My(i,j)+patch_K_calibr(i,j)*(My(m)&#x2212;patch_ID_My(i,j));</entry></row><row><entry>patch_ID_Mz(i,j)=patch_ID_Mz(i,j)+patch_K_calibr(i,j)*(Mz(m)&#x2212;patch_ID_Mz(i,j));</entry></row><row><entry>patch_N_calibr(i,j)= patch_N_calibr(i,j)+1;</entry></row><row><entry>patch_K_calibr(i,j)=1/(patch_N_calibr(i,j)+1);</entry></row><row><entry>if (i==trajectory_calibr(kk,1))&#x26;&#x26;(j==trajectory_calibr(kk,2))</entry></row><row><entry>trajectory_calibr(kk,3)= patch_ID_calibr(i,j);</entry></row><row><entry>&#x2003;trajectory_calibr(kk,4)= patch_ID_Mx(i,j);</entry></row><row><entry>trajectory_calibr(kk,5)= patch_ID_My(i,j);</entry></row><row><entry>&#x2003;trajectory_calibr(kk,6)= patch_ID_Mz(i,j);</entry></row><row><entry>&#x2003;trajectory_calibr(kk,7)= lat_value_all(m);</entry></row><row><entry>trajectory_calibr(kk,8)= lon_value_all(m);</entry></row><row><entry>else</entry></row><row><entry>kk=kk+1;</entry></row><row><entry>trajectory_calibr(kk,1)=i;</entry></row><row><entry>trajectory_calibr(kk,2)=j;</entry></row><row><entry>&#x2003;trajectory_calibr(kk,3)= patch_ID_calibr(i,j);</entry></row><row><entry>&#x2003;trajectory_calibr(kk,4)= patch_ID_Mx(i,j);</entry></row><row><entry>trajectory_calibr(kk,5)= patch_ID_My(i,j);</entry></row><row><entry>&#x2003;trajectory_calibr(kk,6)= patch_ID_Mz(i,j);</entry></row><row><entry>trajectory_calibr(kk,7)= lat_value_all(m);</entry></row><row><entry>trajectory_calibr(kk,8)= lon_value_all(m);</entry></row><row><entry>end</entry></row><row><entry>end</entry></row><row><entry namest="1" nameend="1" align="center" rowsep="1"/></row></tbody></tgroup></table></tables><br/>As can be seen in the example of <figref idref="DRAWINGS">FIG. <b>24</b></figref>, the error follows the quantization error. This means that the problem is in the procedure of patching and not in the quantization itself. If it is assumed that the data of three components XYZ is more reliable (and not the written data about total GMF in patch_ID_calibr), then the results will be as illustrated in the example of <figref idref="DRAWINGS">FIG. <b>25</b></figref>. The chart below demonstrates that the quantization error decreased significantly.</p><p id="p-0170" num="0000"><tables id="TABLE-US-00020" num="00020"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="8"><colspec colname="1" colwidth="28pt" align="center"/><colspec colname="2" colwidth="21pt" align="center"/><colspec colname="3" colwidth="28pt" align="center"/><colspec colname="4" colwidth="21pt" align="center"/><colspec colname="5" colwidth="28pt" align="center"/><colspec colname="6" colwidth="14pt" align="center"/><colspec colname="7" colwidth="35pt" align="center"/><colspec colname="8" colwidth="42pt" align="center"/><thead><row><entry namest="1" nameend="8" align="center" rowsep="1"/></row><row><entry/><entry/><entry/><entry/><entry/><entry/><entry>MXYZ</entry><entry/></row><row><entry/><entry/><entry/><entry/><entry/><entry/><entry>Colormap</entry><entry>QError</entry></row><row><entry>QX</entry><entry>NX</entry><entry>QY</entry><entry>NY</entry><entry>QZ</entry><entry>NZ</entry><entry>(length)</entry><entry>(abs. value)</entry></row><row><entry namest="1" nameend="8" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry>1.0124</entry><entry>49</entry><entry>1.0058</entry><entry>112</entry><entry>1.0145</entry><entry>43</entry><entry>1614</entry><entry>1.0523</entry></row><row><entry namest="1" nameend="8" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0171" num="0181"><figref idref="DRAWINGS">FIG. <b>26</b></figref> illustrates colorization of a sample GMF data for a patch with different number of Qlevels in each channel with uniform quantization. In particular embodiments, the QLevels can be further decreased to reduce variation in each component to below 1.0 &#x3bc;T. <figref idref="DRAWINGS">FIG. <b>27</b></figref> illustrates distribution of quantization errors in restoring GMF magnitude. As we can see from the figure, error distribution has a Gaussian normal form. The chart below illustrates the decreased error value for the selected Qlevels for each channel.</p><p id="p-0172" num="0000"><tables id="TABLE-US-00021" num="00021"><table frame="none" colsep="0" rowsep="0"><tgroup align="left" colsep="0" rowsep="0" cols="8"><colspec colname="1" colwidth="28pt" align="center"/><colspec colname="2" colwidth="21pt" align="center"/><colspec colname="3" colwidth="28pt" align="center"/><colspec colname="4" colwidth="21pt" align="center"/><colspec colname="5" colwidth="28pt" align="center"/><colspec colname="6" colwidth="14pt" align="center"/><colspec colname="7" colwidth="35pt" align="center"/><colspec colname="8" colwidth="42pt" align="center"/><thead><row><entry namest="1" nameend="8" align="center" rowsep="1"/></row><row><entry/><entry/><entry/><entry/><entry/><entry/><entry>MXYZ</entry><entry/></row><row><entry/><entry/><entry/><entry/><entry/><entry/><entry>Colormap</entry><entry>QError</entry></row><row><entry>QX</entry><entry>NX</entry><entry>QY</entry><entry>NY</entry><entry>QZ</entry><entry>NZ</entry><entry>(length)</entry><entry>(abs. value)</entry></row><row><entry namest="1" nameend="8" align="center" rowsep="1"/></row></thead><tbody valign="top"><row><entry>0.5062</entry><entry>98</entry><entry>0.5029</entry><entry>224</entry><entry>0.5073</entry><entry>86</entry><entry>1900</entry><entry>0.7716</entry></row><row><entry namest="1" nameend="8" align="center" rowsep="1"/></row></tbody></tgroup></table></tables></p><p id="p-0173" num="0182"><figref idref="DRAWINGS">FIG. <b>28</b></figref> illustrates colorization of GMF data for a patch with different number of Qlevels in each channel with uniform quantization.</p><p id="p-0174" num="0183">In particular embodiments, in the case of missing the step of converting the raw readings of the XYZ components from a body-fixed frame into an ENU frame, there may be significant differences between the magnitude of GMF calculated from raw readings of XYZ components (which may be designated as rawGMF) and magnitude of GMF calculated from patched together readings of XYZ components (which may be designated as patchedGMF). For a trajectory, the XYZ components are assigned and then rawGMF is calculated as follows:</p><p id="p-0175" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>rawGMF=&#x221a;{square root over (<i>X</i><sup>2</sup><i>+Y</i><sup>2</sup><i>+Z</i><sup>2</sup>)}&#x2003;&#x2003;(1)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0176" num="0000">Then rawGMF is patched together by data-fusion algorithm that takes into account a degree of trust to any new measurements j in the same point i.</p><p id="p-0177" num="0000"><maths id="MATH-US-00003" num="00003"><math overflow="scroll"> <mtable>  <mtr>   <mtd>    <mrow>     <mrow>      <mrow>       <mi>r</mi>       <mo>&#x2062;</mo>       <mi>a</mi>       <mo>&#x2062;</mo>       <mi>w</mi>       <mo>&#x2062;</mo>       <mi>G</mi>       <mo>&#x2062;</mo>       <mi>M</mi>       <mo>&#x2062;</mo>       <msub>        <mi>F</mi>        <mi>i</mi>       </msub>      </mrow>      <mo>=</mo>      <mrow>       <mrow>        <mi>r</mi>        <mo>&#x2062;</mo>        <mi>a</mi>        <mo>&#x2062;</mo>        <mi>w</mi>        <mo>&#x2062;</mo>        <mi>G</mi>        <mo>&#x2062;</mo>        <mi>M</mi>        <mo>&#x2062;</mo>        <msub>         <mi>F</mi>         <mi>i</mi>        </msub>       </mrow>       <mo>+</mo>       <mrow>        <msub>         <mi>k</mi>         <mi>i</mi>        </msub>        <mo>(</mo>        <mrow>         <mrow>          <mi>r</mi>          <mo>&#x2062;</mo>          <mi>a</mi>          <mo>&#x2062;</mo>          <mi>w</mi>          <mo>&#x2062;</mo>          <mi>G</mi>          <mo>&#x2062;</mo>          <mi>M</mi>          <mo>&#x2062;</mo>          <mrow>           <msub>            <mi>F</mi>            <mi>j</mi>           </msub>           <mo>(</mo>           <mi>j</mi>           <mo>)</mo>          </mrow>         </mrow>         <mo>-</mo>         <mrow>          <mi>r</mi>          <mo>&#x2062;</mo>          <mi>a</mi>          <mo>&#x2062;</mo>          <mi>w</mi>          <mo>&#x2062;</mo>          <mi>G</mi>          <mo>&#x2062;</mo>          <mi>M</mi>          <mo>&#x2062;</mo>          <msub>           <mi>F</mi>           <mi>i</mi>          </msub>         </mrow>        </mrow>        <mo>)</mo>       </mrow>      </mrow>     </mrow>     <mo>;</mo>    </mrow>   </mtd>   <mtd>    <mrow>     <mo>(</mo>     <mn>2</mn>     <mo>)</mo>    </mrow>   </mtd>  </mtr> </mtable></math></maths><maths id="MATH-US-00003-2" num="00003.2"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mi>k</mi>    <mi>i</mi>   </msub>   <mo>=</mo>   <mfrac>    <mn>1</mn>    <mrow>     <mi>N</mi>     <mo>+</mo>     <mn>1</mn>    </mrow>   </mfrac>  </mrow>  <mo>,</mo> </mrow></math></maths></p><p id="p-0178" num="0000">where k is a fusion coefficient and N is the number of repeating measurements at point i.</p><p id="p-0179" num="0184">In particular embodiments, to use three components of GMF in mapping (embedding GeoTIFF) and navigation, XYZ components of GMF may be converted from a body-fixed frame into a reference frame (e.g. ENU) and then patched into a map. In particular embodiments, averaging by separate components with different orientation of a device (e.g. a mobile phone) in the same point will provide errors in total GMF (approximately 33 &#x3bc;T in the above experiment). When horizontal and vertical components of GMF are used, raw XYZ data may have to be at least leveled. When total magnetic field is used for patching, preliminary conversion from body to reference frame (e.g. ENU) may be unnecessary.</p><p id="p-0180" num="0185">To realize the representation of GMF in the form of total magnitude, inclination, and declination, it may be beneficial to represent the XYZ components (initially measured by magnetometers) in the reference coordinate system. That is, from a device (e.g. a mobile phone) XYZ components (in body-fixed coordinate system) the data may be converted into the ENU frame. Another conversion may then ne performed to represent this in FDI form (F total, Declination, and Inclination). Then the data may be quantized for representation in a GeoTIFF in colormap. It may be advantageous to have the total value of GMF magnitude F directly incorporated into colormap. If navigation by all three components of GMF is desired, then the XYZ components may be restored in the ENU frame, since the sensors of a device (e.g. a mobile phone) provide the measurements in XYZ. If we have representation of GMF directly in the form of XYZ components, then the following conversions may be used: XYZ components (in body-fixed coordinate system) into an ENU frame and then into quantized representation in GeoTIFF in colormap.</p><p id="p-0181" num="0186"><figref idref="DRAWINGS">FIG. <b>29</b></figref> illustrates an example method <b>2900</b> for processing raw magnetic readings and patching them together to create a magnetic map (such as, e.g., a GMF map) that may be embedded into files that contain georeferencing information (such as, e.g., GeoTIFF files). Although this disclosure describes and illustrates a particular method for processing raw magnetic readings and patching them together to create a magnetic map, this disclosure contemplates any suitable method for processing raw magnetic readings and patching them together to create a magnetic map, which may include any suitable steps (which may where appropriate include all, some, or none of the particular steps described or illustrated herein) occurring in any suitable order. Moreover, although this disclosure describes and illustrates particular components, devices, or systems carrying out particular steps of a particular method for processing raw magnetic readings and patching them together to create a magnetic map, this disclosure contemplates any suitable combination of any suitable components, devices, or systems carrying out any suitable steps of any suitable method for processing raw magnetic readings and patching them together to create a magnetic map.</p><p id="p-0182" num="0187">Method <b>2900</b> begins at step <b>2902</b>, where data are accumulated at one or more servers. One or more magnetic readings from one or more users are accumulated on one or more servers and saved into one or more corresponding folders. The filename (or name) of a file containing a set of magnetic readings may indicate a corresponding map tile for the magnetic readings (e.g. &#x201c;N50E30&#x201d; corresponds to a 1&#xb0;&#xd7;1&#xb0; map tile at northern latitude 50&#xb0; and eastern longitude 30&#xb0;). In particular embodiments, output of step <b>2902</b> includes recording files from magnetic-navigation devices accumulated at regional servers.</p><p id="p-0183" num="0188">At step <b>2904</b>, the data are pre-processed and parsed. In particular embodiments, output of step <b>2904</b> includes magnetic profiles presented in a particular, pre-defined format after parsing and pre-processing. The statistical pre-processing is performed before map construction and may include the following tasks:<ul id="ul0043" list-style="none">    <li id="ul0043-0001" num="0000">    <ul id="ul0044" list-style="none">        <li id="ul0044-0001" num="0189">Checking whether the data are valid, with satisfied localization, and can be used for map construction directly, or the data contain outliers or other artefacts.</li>        <li id="ul0044-0002" num="0190">If the data include outliers, then removing them.</li>        <li id="ul0044-0003" num="0191">If the data include artefacts (e.g. drops or jumps (e.g. bounds or leaps)), then making corresponding corrections.</li>        <li id="ul0044-0004" num="0192">Smoothing the remaining data with a filter (e.g. median, moving average, etc.).<br/>After the data are parsed, the following values may be obtained:</li>        <li id="ul0044-0005" num="0193">Timestamp&#x2014;contains year, month, day, hours, minutes and seconds of each samples in the made recordings.        <ul id="ul0045" list-style="none">            <li id="ul0045-0001" num="0194">Example: 18 Oct. 2020 07:51:18.239</li>        </ul>        </li>        <li id="ul0044-0006" num="0195">Three components of acceleration in body frame (Roll-Pitch-Yaw) normalized to acceleration of gravity force g (unitless)        <ul id="ul0046" list-style="none">            <li id="ul0046-0001" num="0196">Example: accelUserX_g_, accelUserY_g_, accelUserZ_g_</li>        </ul>        </li>        <li id="ul0044-0007" num="0197">Three components of angular velocities in body frame (Roll-Pitch-Yaw) obtained from gyroscopes (in rad/sec)        <ul id="ul0047" list-style="none">            <li id="ul0047-0001" num="0198">Example: gyroX_rad_s, gyroY_rad_s, gyroZ_rad_s_</li>        </ul>        </li>        <li id="ul0044-0008" num="0199">Attitude angles in body frame&#x2014;Roll, Pitch, Yaw (in rad)        <ul id="ul0048" list-style="none">            <li id="ul0048-0001" num="0200">Example: Roll_rads_, Pitch_rads_, Yaw_rads_</li>        </ul>        </li>        <li id="ul0044-0009" num="0201">Coordinates in Latitude-Longitude-Height (LLH) frame if GNSS mode is available. Latitude and longitude may be given in degrees and height may be given in meters.        <ul id="ul0049" list-style="none">            <li id="ul0049-0001" num="0202">Example: Lat, Long, Altitude_m_</li>        </ul>        </li>        <li id="ul0044-0010" num="0203">Ground speed (in m/sec) if GNSS mode is available        <ul id="ul0050" list-style="none">            <li id="ul0050-0001" num="0204">Example: Speed_m_s_</li>        </ul>        </li>        <li id="ul0044-0011" num="0205">Course (in degrees) if GNSS mode is available        <ul id="ul0051" list-style="none">            <li id="ul0051-0001" num="0206">Example: course_</li>        </ul>        </li>        <li id="ul0044-0012" num="0207">Horizontal and vertical accuracy of GNSS localization if available (in meters)        <ul id="ul0052" list-style="none">            <li id="ul0052-0001" num="0208">Example: HorizontalAccuracy_m_, VerticalAccuracy_m_</li>        </ul>        </li>        <li id="ul0044-0013" num="0209">Magnetic heading (in degrees) from magnetometers        <ul id="ul0053" list-style="none">            <li id="ul0053-0001" num="0210">Example: TrueHeading_</li>        </ul>        </li>        <li id="ul0044-0014" num="0211">Three components of total magnetic field (in &#x3bc;T) in roll-pitch-yaw (RPY) frame        <ul id="ul0054" list-style="none">            <li id="ul0054-0001" num="0212">Example: calMagX_T_, calMagY_T_, calMagZ_T_</li>        </ul>        </li>        <li id="ul0044-0015" num="0213">Quaternions (internally calculated)        <ul id="ul0055" list-style="none">            <li id="ul0055-0001" num="0214">Example: qX, qY, qZ, qW<br/>Although coordinates are described above as being in LLH, this disclosure contemplates coordinates of any suitable positioning system. For example, in addition or as an alternative to using the GCS to determine or indicate a position, particular embodiments may use dead reckoning. In such embodiments, latitude and longitude coordinates may be substantially disregarded and measurements determined by dead reckoning may be entered in an appropriate format (e.g. the dimensions of an indoor area in meters) instead. This may be advantageous in situations when reliable satellite positioning (e.g., with GPS) is unavailable.</li>        </ul>        </li>    </ul>    </li></ul></p><p id="p-0184" num="0215">At step <b>2906</b>, LLH is converted to ENU (East-North-Up). In particular embodiments, output of step <b>2906</b> includes parsed coordinates within the specific map tile that they are related to. If the reference latitude of tile 1&#xb0;&#xd7;1&#xb0; is taken at the bottom left corner for patch creation, then northern direction is positive. Coordinates of bottom left corner of patch are lat0=50; lon0=30. <figref idref="DRAWINGS">FIG. <b>30</b></figref> visualizes trajectories for Babiy Yar district in Kyiv, Ukraine, in ENU with north being positive. If the reference latitude of tile 1&#xb0;&#xd7;1&#xb0; is taken at the upper left corner, then northern direction is negative and more convenient for further conversion into patch coordinate system. Coordinates of upper left corner of patch are lat0=5 I; lon0=30. <figref idref="DRAWINGS">FIG. <b>31</b></figref> visualizes trajectories for Babiy Yar district in ENU with north being negative. For further consideration, a positive direction of north may be selected. Output for step <b>2906</b> may include coordinates xEast, yNorth, zUp of all points in the magnetic trajectories. In particular embodiments, as an alternative to ENU, coordinates from step <b>2904</b> may be converted to a grid frame. A top left corner of the map may be chosen as a coordinate origin, and the map may (but need not) be oriented relative to true north. To take into account a correction for a true orientation of the map, a map angle (e.g. an angle between true north and a vertical axis of the grid frame of the map) may be introduced.</p><p id="p-0185" num="0216">At step <b>2908</b>, a patch is created. Here, to allocate memory for map, an empty sparse matrix may be used. In particular embodiments, a patch is an array and its size corresponds to the size of a map tile (in meters), with each element containing either a GMF value (if it is already measured) or being empty. The array size of corresponding patch is N by M elements where each element (cell) is 1 meter by 1 meter. The size is determined from previous step where the converted coordinates of bottom left and upper right corners were obtained in ENU in metric units. Output of this step is empty sparse matrix patch_ID. Here the map tile is 1 degree by 1 degree with ENU frame oriented as illustrated by way of example in <figref idref="DRAWINGS">FIG. <b>32</b></figref>. A map tile may also be referred to as a patched area, and vice versa, where appropriate. Output for step <b>2908</b> may include a matrix for patching together magnetic data. In particular embodiments, a magnetic map may be represented by a regular matrix instead of a sparse matrix. In such embodiments, an additional coordinate transformation (e.g. as in step <b>2910</b> below) may be unnecessary and (e.g. at step <b>2912</b> below) a coordinate transformation from RPY may be directly performed into a grid frame.</p><p id="p-0186" num="0217">At step <b>2910</b>, the ENU frame is converted to patch/array coordinates. The conversion may be done by rounding xEast and yNorth coordinates and reversing the y axis in order to avoid the mirrored image of trajectories. Output of step <b>2910</b> may include coordinates of magnetic trajectories in the patch in terms of its rows and columns I and J.</p><p id="p-0187" num="0218">At step <b>2912</b>, GMF components are converted from the RPY (body-fixed) frame to the ENU frame. This conversion may be required in order to align three components of GMF in the horizon and then calculate the horizontal and vertical components of total GMF. It may be done using the quaternions. Output of step <b>2912</b> may include a total value of GMF and vertical and horizontal components of total GMF, M_total, MZ_total, and MH_total. The error between the raw value of GMF magnitude calculated from not-converted components and the GMF magnitude in ENU calculated respectively from XYZ components converted into ENU may be kept at or below 0.01 &#x3bc;T for kinematic data.</p><p id="p-0188" num="0219">At step <b>2914</b>, the regular components of GMF are calculated from the WMM for the first day of each month of the magnetic survey. Differences in vertical and horizontal components of regular GMF for bottom left and upper right corners of map tile &#x2018;N50E30&#x2019; are &#x2dc;0.6 &#x3bc;T and 0.5 &#x3bc;T respectively.</p><p id="p-0189" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Z</i>0=1.0<i>e+</i>04*4.6537 (in nT)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0190" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>H</i>0=1.9687<i>e+</i>04 (in nT)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0191" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Z</i>_nm=1.0<i>e+</i>04*4.7141 (in nT)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0192" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>H</i>_nm=1.9148<i>e+</i>04 (in nT)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0193" num="0000">For the selected region (park Babiy Yar), the variation in the regular components of GMF are calculated for the whole region and will be updated each month. <figref idref="DRAWINGS">FIG. <b>33</b></figref> and <figref idref="DRAWINGS">FIG. <b>34</b></figref> provide example visualizations of the vertical and horizontal components of regular GMF. Output of step <b>2914</b> may include vertical and horizontal components of regular GMF, MZ_reg, MH_reg.</p><p id="p-0194" num="0220">At step <b>2916</b>, the vertical and horizontal components of anomalous GMF and total GMF are merged into a patch. In particular embodiments, patching is done based on averaging (e.g. non-optimal recurrent filtering). For a single point of space (e.g. a map cell), the measurement equation is separately considered. A series of measurements z=z1, z2, . . . zN done at this point by different users and in different moments of time are considered to be independent of each other and distorted by Gaussian noise with known (e.g. approximated) mean and variance. Also, the possible variation of GMF values over time may, in particular embodiments, be assumed to be small (even if it is not due to diurnal variation, which may be substantially eliminated through pre-processing). The state vector X in this case includes three components of GMF (e.g. total, vertical anomalous, and horizontal anomalous). Measurement vector Z contains readings from different sensors over the definite time (discrete sample) interval i=1, N. In particular embodiments, for simplicity, the state vector and correspondingly the measurement vector may be truncated to only the total value of GMF. In particular embodiments, the continuity of recordings is not necessarily kept. If we have only one type of sensor (or several sensors which are unknown from the point of view of their accuracy characteristics), then in particular embodiments it is possible to use a non-optimal averaging by using recurrent filtering. Recurrent methods of data processing allow an estimate of the parameter to be obtained after each reading is obtained. To explain the recurrent (sequential) method of obtaining estimates, it may be assumed that there are N measurements of the parameter x, e.g.:</p><p id="p-0195" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>z</i><sub>i</sub><i>=x+v</i><sub>Z</sub><sub><sub2>i</sub2></sub><i>; i=</i>1,<i>N </i><?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0196" num="0000">where x is estimated parameter (Btotal) and v<sub>Z</sub><sub><sub2>i </sub2></sub>is the error of i-th reading.</p><p id="p-0197" num="0221">As a result of estimating the measured parameter x<sub>m </sub>when having m observations</p><p id="p-0198" num="0000"><maths id="MATH-US-00004" num="00004"><math overflow="scroll"> <mrow>  <msub>   <mover>    <mi>x</mi>    <mo>^</mo>   </mover>   <mi>m</mi>  </msub>  <mo>=</mo>  <mrow>   <mfrac>    <mn>1</mn>    <mi>m</mi>   </mfrac>   <mo>&#x2062;</mo>   <mrow>    <munderover>     <mo>&#x2211;</mo>     <mrow>      <mi>i</mi>      <mo>=</mo>      <mn>1</mn>     </mrow>     <mi>m</mi>    </munderover>    <mtext> </mtext>    <mrow>     <msub>      <mi>z</mi>      <mi>i</mi>     </msub>     <mo>.</mo>    </mrow>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0199" num="0000">When new measurement is coming on (i+1)-th step of data processing, then the estimate value {circumflex over (x)}<sub>m+1 </sub>will be as follows:</p><p id="p-0200" num="0000"><maths id="MATH-US-00005" num="00005"><math overflow="scroll"> <mtable>  <mtr>   <mtd>    <mrow>     <mrow>      <msub>       <mover>        <mi>x</mi>        <mo>^</mo>       </mover>       <mrow>        <mi>m</mi>        <mo>+</mo>        <mn>1</mn>       </mrow>      </msub>      <mo>=</mo>      <mrow>       <mfrac>        <mrow>         <mrow>          <mo>(</mo>          <mrow>           <munderover>            <mo>&#x2211;</mo>            <mrow>             <mi>i</mi>             <mo>=</mo>             <mn>1</mn>            </mrow>            <mi>m</mi>           </munderover>           <mtext> </mtext>           <msub>            <mi>z</mi>            <mi>i</mi>           </msub>          </mrow>          <mo>)</mo>         </mrow>         <mo>+</mo>         <msub>          <mi>z</mi>          <mrow>           <mi>m</mi>           <mo>+</mo>           <mn>1</mn>          </mrow>         </msub>        </mrow>        <mrow>         <mi>m</mi>         <mo>+</mo>         <mn>1</mn>        </mrow>       </mfrac>       <mo>=</mo>       <mrow>        <mrow>         <mfrac>          <mi>m</mi>          <mrow>           <mi>m</mi>           <mo>+</mo>           <mn>1</mn>          </mrow>         </mfrac>         <mo>&#x2062;</mo>         <mrow>          <mo>(</mo>          <mrow>           <mfrac>            <mn>1</mn>            <mi>m</mi>           </mfrac>           <mo>&#x2062;</mo>           <mrow>            <munderover>             <mo>&#x2211;</mo>             <mrow>              <mi>i</mi>              <mo>=</mo>              <mn>1</mn>             </mrow>             <mi>m</mi>            </munderover>            <mtext> </mtext>            <msub>             <mi>z</mi>             <mi>i</mi>            </msub>           </mrow>          </mrow>          <mo>)</mo>         </mrow>        </mrow>        <mo>+</mo>        <mrow>         <mfrac>          <mn>1</mn>          <mrow>           <mi>m</mi>           <mo>+</mo>           <mn>1</mn>          </mrow>         </mfrac>         <mo>&#x2062;</mo>         <msub>          <mi>z</mi>          <mrow>           <mi>m</mi>           <mo>+</mo>           <mn>1</mn>          </mrow>         </msub>        </mrow>       </mrow>      </mrow>     </mrow>     <mo>,</mo>    </mrow>   </mtd>   <mtd>    <mrow>     <mo>(</mo>     <mn>1</mn>     <mo>)</mo>    </mrow>   </mtd>  </mtr> </mtable></math></maths><maths id="MATH-US-00005-2" num="00005.2"><math overflow="scroll"> <mi>or</mi></math></maths><maths id="MATH-US-00005-3" num="00005.3"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mover>     <mi>x</mi>     <mo>^</mo>    </mover>    <mrow>     <mi>m</mi>     <mo>+</mo>     <mn>1</mn>    </mrow>   </msub>   <mo>=</mo>   <mrow>    <mrow>     <mfrac>      <mi>m</mi>      <mrow>       <mi>m</mi>       <mo>+</mo>       <mn>1</mn>      </mrow>     </mfrac>     <mo>&#x2062;</mo>     <msub>      <mover>       <mi>x</mi>       <mo>^</mo>      </mover>      <mi>m</mi>     </msub>    </mrow>    <mo>+</mo>    <mrow>     <mfrac>      <mn>1</mn>      <mrow>       <mi>m</mi>       <mo>+</mo>       <mn>1</mn>      </mrow>     </mfrac>     <mo>&#x2062;</mo>     <msub>      <mi>z</mi>      <mrow>       <mi>m</mi>       <mo>+</mo>       <mn>1</mn>      </mrow>     </msub>    </mrow>   </mrow>  </mrow>  <mo>,</mo> </mrow></math></maths></p><p id="p-0201" num="0000">where z<sub>m+1 </sub>is the last (m+1)-th observation.</p><p id="p-0202" num="0222">Adding and subtracting the value {circumflex over (x)}<sub>m </sub>from the right part of equation (1) results in the following:</p><p id="p-0203" num="0000"><maths id="MATH-US-00006" num="00006"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mover>     <mi>x</mi>     <mo>^</mo>    </mover>    <mrow>     <mi>m</mi>     <mo>+</mo>     <mn>1</mn>    </mrow>   </msub>   <mo>=</mo>   <mrow>    <mrow>     <msub>      <mover>       <mi>x</mi>       <mo>^</mo>      </mover>      <mi>m</mi>     </msub>     <mo>+</mo>     <mrow>      <mrow>       <mo>(</mo>       <mrow>        <mfrac>         <mi>m</mi>         <mrow>          <mi>m</mi>          <mo>+</mo>          <mn>1</mn>         </mrow>        </mfrac>        <mo>-</mo>        <mn>1</mn>       </mrow>       <mo>)</mo>      </mrow>      <mo>&#x2062;</mo>      <msub>       <mover>        <mi>x</mi>        <mo>^</mo>       </mover>       <mi>m</mi>      </msub>     </mrow>     <mo>+</mo>     <mrow>      <mfrac>       <mn>1</mn>       <mrow>        <mi>m</mi>        <mo>+</mo>        <mn>1</mn>       </mrow>      </mfrac>      <mo>&#x2062;</mo>      <msub>       <mi>z</mi>       <mrow>        <mi>m</mi>        <mo>+</mo>        <mn>1</mn>       </mrow>      </msub>     </mrow>    </mrow>    <mo>=</mo>    <mrow>     <msub>      <mover>       <mi>x</mi>       <mo>^</mo>      </mover>      <mi>m</mi>     </msub>     <mo>-</mo>     <mrow>      <mfrac>       <mn>1</mn>       <mrow>        <mi>m</mi>        <mo>+</mo>        <mn>1</mn>       </mrow>      </mfrac>      <mo>&#x2062;</mo>      <msub>       <mover>        <mi>x</mi>        <mo>^</mo>       </mover>       <mi>m</mi>      </msub>     </mrow>     <mo>+</mo>     <mrow>      <mfrac>       <mn>1</mn>       <mrow>        <mi>m</mi>        <mo>+</mo>        <mn>1</mn>       </mrow>      </mfrac>      <mo>&#x2062;</mo>      <msub>       <mi>z</mi>       <mrow>        <mi>m</mi>        <mo>+</mo>        <mn>1</mn>       </mrow>      </msub>     </mrow>    </mrow>   </mrow>  </mrow>  <mo>,</mo> </mrow></math></maths></p><p id="p-0204" num="0000">It is then possible to write:</p><p id="p-0205" num="0000"><maths id="MATH-US-00007" num="00007"><math overflow="scroll"> <mrow>  <mrow>   <msub>    <mover>     <mi>x</mi>     <mo>^</mo>    </mover>    <mrow>     <mi>m</mi>     <mo>+</mo>     <mn>1</mn>    </mrow>   </msub>   <mo>=</mo>   <mrow>    <msub>     <mover>      <mi>x</mi>      <mo>^</mo>     </mover>     <mi>m</mi>    </msub>    <mo>+</mo>    <mrow>     <mfrac>      <mn>1</mn>      <mrow>       <mi>m</mi>       <mo>+</mo>       <mn>1</mn>      </mrow>     </mfrac>     <mo>&#x2062;</mo>     <mrow>      <mo>(</mo>      <mrow>       <msub>        <mi>z</mi>        <mrow>         <mi>m</mi>         <mo>+</mo>         <mn>1</mn>        </mrow>       </msub>       <mo>-</mo>       <msub>        <mover>         <mi>x</mi>         <mo>^</mo>        </mover>        <mi>m</mi>       </msub>      </mrow>      <mo>)</mo>     </mrow>    </mrow>   </mrow>  </mrow>  <mo>,</mo> </mrow></math></maths></p><p id="p-0206" num="0000">or, by designating</p><p id="p-0207" num="0000"><maths id="MATH-US-00008" num="00008"><math overflow="scroll"> <mrow>  <mrow>   <mfrac>    <mn>1</mn>    <mrow>     <mi>m</mi>     <mo>+</mo>     <mn>1</mn>    </mrow>   </mfrac>   <mo>=</mo>   <mi>k</mi>  </mrow>  <mo>,</mo> </mrow></math></maths><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>{circumflex over (x)}</i><sub>m+1</sub><i>={circumflex over (x)}</i><sub>m</sub><i>+k</i>(<i>z</i><sub>m+1</sub><i>&#x2212;{circumflex over (x)}</i><sub>m</sub>),&#x2003;&#x2003;(2)<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0208" num="0223">The estimate {circumflex over (x)}<sub>m+1 </sub>can be obtained from the previous estimate {circumflex over (x)}<sub>m </sub>by adding it to the difference between the new observation z<sub>m+1 </sub>and the previous estimate multiplied by the weighting factor k. In this case, it is no longer necessary to store in observations obtained in the previous measurement steps, as all previous information is combined in the a priori estimate {circumflex over (x)}<sub>m</sub>.</p><p id="p-0209" num="0224">Recurrent algorithm (2) connects the current value of the estimate {circumflex over (x)}<sub>m+1 </sub>to its previous value {circumflex over (x)}<sub>m</sub>. The difference (z<sub>m+1</sub>&#x2212;{circumflex over (x)}<sub>m</sub>) becomes an indicator of the trust to the information obtained during z<sub>m+1 </sub>observation. Indeed, if this difference is close to zero, then the newly coming observation z<sub>m+1 </sub>does not carry any new information compared to a priori, and in this case {circumflex over (x)}<sub>m+1</sub>&#x2245;{circumflex over (x)}<sub>m</sub>. On the contrary, with a large difference (z<sub>m+1</sub>&#x2212;{circumflex over (x)}<sub>m</sub>) taking into account the weighting factor k, there will a significant refinement of the estimate {circumflex over (x)}<sub>m </sub>obtained on the previous step of the calculations. But the ratio</p><p id="p-0210" num="0000"><maths id="MATH-US-00009" num="00009"><math overflow="scroll"> <mrow>  <mi>k</mi>  <mo>=</mo>  <mfrac>   <mn>1</mn>   <mrow>    <mi>m</mi>    <mo>+</mo>    <mn>1</mn>   </mrow>  </mfrac> </mrow></math></maths></p><p id="p-0211" num="0000">is obtained without using the criterion of optimality, so the estimate {circumflex over (x)}<sub>m+1 </sub>is also not optimal, which reduces the value of this method of information processing.</p><p id="p-0212" num="0225">The map patch is associated with several layers (copies of patches of the same dimension), which correspondingly contain the anomalous vertical and horizontal components, the number of measurements N and weighting coefficient k. Each time when new recordings are coming, they are parsed and averaged according to (2) with updating the associated layers. Of course, after definite number of repeating measurements the values of N and k become saturated, which means that any new measurement cannot significantly change the estimate. In such case, the new layer (called &#x201c;steady 1&#x201d;) is created to preserve the initial estimate and the process of averaging starts again with empty values in corresponding cells. After a certain number of iterations, the layers with trusted estimates &#x201c;steady 1,&#x201d; &#x201c;steady 2,&#x201d; and so on will be obtained and then it is possible to use the optimal filtering.</p><p id="p-0213" num="0226">In particular embodiments, when a number of GMF readings (measurement files) exceeds a pre-defined value P (50 in an example case) the following situation may result. A number of repeating measurements in the same point in average is about 100 (in this example), which actually means that the same point was not covered 100 times with independent measurements but the number of measurements was gained due to high update rate of magnetometers (10 Hz) and lower frequency of GNSS update (1 Hz). The walking speed of a pedestrian is about 0.5 m/s, which means at least 10 measurements will be associated with two consecutive cells in the map. <figref idref="DRAWINGS">FIG. <b>35</b></figref> illustrates an example magnetic field in an example area. <figref idref="DRAWINGS">FIG. <b>36</b></figref> illustrates example repeating measurements in the same point and degrees of trust over a set of samples in <figref idref="DRAWINGS">FIG. <b>35</b></figref>. To analyze the distribution of errors (mostly due to errors in localization), consider the point where the number of readings was high enough to assume the statistically representative sampling: maxN=1126, point_58707_32047. <figref idref="DRAWINGS">FIG. <b>37</b></figref> illustrates example distribution of GMF at that point. As it can be seen, there is a significant deviation of magnetic field, but the number of points with GMF value in the range from 40 to 50 &#x3bc;T is small and does not exceed 100 measurements. Consider the final estimate of GMF at this point: patch_ID(58707,32047)=52.1459. As can be seen, with the large number of measurements, this small outlier at the beginning was filtered. Other points with large number of measurements may be checked: e.g. N=1016, point_58638_32079. <figref idref="DRAWINGS">FIG. <b>38</b></figref> illustrates example distribution of GMF at that point. In this case, the values differ slightly. A final estimate of GMF at this point may be as follows: patch_ID(58638,32079)=49.9574. <figref idref="DRAWINGS">FIG. <b>39</b></figref> illustrates these example points on the magnetic map illustrated in the example of <figref idref="DRAWINGS">FIG. <b>35</b></figref>. Output of step <b>2916</b> may include filled sparse matrix patch_ID and its several layers, patch_MZ_anom, patch_MH_anom, patch_N, patch_K (copies of patch of the same dimension), which correspondingly contain the anomalous vertical and horizontal components, the numbers of measurements N and weighting coefficients k for each point in a patch. All these patches may be saved in a data file, e.g., FZH.mat (or other appropriate formats).</p><p id="p-0214" num="0227"><figref idref="DRAWINGS">FIG. <b>40</b></figref> illustrates an example method <b>4000</b> for embedding one or more magnetic maps (e.g. generated as described above) into one or more image files (such as, e.g., GeoTIFF files). Moreover, although files with georeferencing information are described and illustrated herein, this disclosure contemplates files without georeferencing information (e.g. TIFF, PNG, etc.), where appropriate, as an alternative to files that contain georeferencing information. This may be the case with indoor applications, where reliable satellite positioning (e.g., with GPS) may be unavailable. Although this disclosure describes and illustrates a particular method for embedding one or more magnetic maps into one or more files that contain georeferencing information, this disclosure contemplates any suitable method for embedding one or more magnetic maps into one or more files that contain georeferencing information, which may include any suitable steps (which may where appropriate include all, some, or none of the particular steps described or illustrated herein) occurring in any suitable order. Moreover, although this disclosure describes and illustrates particular components, devices, or systems carrying out particular steps of a particular method for embedding one or more magnetic maps into one or more files that contain georeferencing information, this disclosure contemplates any suitable combination of any suitable components, devices, or systems carrying out any suitable steps of any suitable method for embedding one or more magnetic maps into one or more files that contain georeferencing information.</p><p id="p-0215" num="0228">The magnetic map generated by example method <b>2900</b> and a GeoTIFF image of the mapped region may be used. Although a GeoTIFF image is disclosed and illustrated, this disclosure contemplates any image file that contains georeferencing information. The GeoTIFF image may be taken from a full global basemap including high-resolution satellite imagery provided by ENVIRONMENTAL SYSTEMS RESEARCH INSTITUTE (Esri) and have the same resolution as the magnetic map being embedded (e.g. one-meter-by-one-meter resolution for each pixel). <figref idref="DRAWINGS">FIG. <b>41</b></figref> visualizes the GeoTIFF image of Babiy Yar district with overlaid values of total magnetic field in micro Teslas along measured trajectories.</p><p id="p-0216" num="0229">Method <b>4000</b> begins at step <b>4002</b>, where the patch data are loaded and assigned. File FZH.mat (from the example above) contains filled matrixpatch_ID and its several layers patch_MZ_anom, patch_MH_anom, patch_N, patch_K for anomalous vertical and horizontal components, the numbers of measurements N and weighting coefficients k for each point in the patch. The corresponding components for red, green and blue pseudo color channels with corresponding marking of all variables are assigned as follows:<ul id="ul0056" list-style="none">    <li id="ul0056-0001" num="0000">    <ul id="ul0057" list-style="none">        <li id="ul0057-0001" num="0230">Total value of GMF&#x2014;to pseudo red channel</li>        <li id="ul0057-0002" num="0231">Anomalous horizontal component&#x2014;to pseudo green channel</li>        <li id="ul0057-0003" num="0232">Anomalous vertical component&#x2014;to pseudo blue channel<br/>Output of step <b>4002</b> may include pseudo red, green, and blue components or renamed total value of GMF and vertical and horizontal components of anomalous GMF.</li>    </ul>    </li></ul></p><p id="p-0217" num="0233">At step <b>4004</b>, the QErrors limitations (accuracy of map quantization) are set. These quantization errors may be selected based on the required accuracy of map reproducing in pseudo colorization. If the user sensor does not provide the accuracy of measurement greater than, e.g., 0.5 &#x3bc;T, then the magnetic map with higher accuracy may not be required. For further consideration, minimal QErrors are set for all three channels to be equal to 0.5 &#x3bc;T. As an example, this is enough for most mobile phones, since the accuracy of magnetic-field measurement does not exceed 1 &#x3bc;T. Output of step <b>4004</b> may include quantization levels for each pseudo RGB color channels: QErrorRmin=0.5; QErrorGmin=0.5; QErrorBmin=0.5.</p><p id="p-0218" num="0234">At step <b>4006</b>, minimum and maximum values are calculated in pseudo RGB components of GMF. Before calculating the extreme limits of pseudo RGB components, the fixed positive shift may be added to avoid negative values: e.g., shift=1000. Output of step <b>4006</b> may include minimal and maximal values of total value of GMF (pseudo red channel) Rmin and Rmax; minimal and maximal values of vertical component of anomalous GMF (pseudo green channel) Gmin and Gmax; minimal and maximal values of horizontal component of anomalous GMF (pseudo blue channel) Bmin and Bmax.</p><p id="p-0219" num="0235">At step <b>4008</b>, a range in pseudo RGB components of GMF is calculated. The difference may be calculated between maximal and minimal values in each RGB channel obtained on the previous step. Output of step <b>4008</b> may include ranges in pseudo color channels: deltaR, deltaG, deltaB. At step <b>4010</b>, the number of quantization levels in each pseudo RGB components may be calculated. This calculation may be performed as follows. The ranges in each pseudo color channel deltaR, deltaG, deltaB obtained at step <b>4006</b> may be divided by the minimal QerrorsRmin, QerrorGmin, and QErrorBmin selected at step <b>4004</b>. The results may be rounded, because the number of quantization levels should be integers. Output of step <b>4008</b> may include the number of quantization levels in each pseudo RGB channel: NR, NG, NB.</p><p id="p-0220" num="0236">At step <b>4012</b>, QLevels in each pseudo RGB component may be calculated. Quantization levels are the smallest amount in change of value to be assigned to the next integer sample. This calculation may be performed as follows. The ranges in each pseudo color channel deltaR, deltaG, deltaB obtained at step <b>4008</b> are divided by the number of quantization level in each pseudo RGB channel: NR; NG; NB calculated at step <b>4010</b>. Output of step <b>4012</b> may include quantization levels in each pseudo RGB channel: QLevelR, QLevelG, and QLevelB.</p><p id="p-0221" num="0237">At step <b>4014</b>, pseudo RGB components of GMF are quantized, e.g., according to the following formulas:</p><p id="p-0222" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>QR</i>=round((<i>R&#x2212;R</i>min)/<i>Q</i>Level<i>R</i>);<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0223" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>QG</i>=round((<i>G&#x2212;G</i>min)/<i>Q</i>Level<i>G</i>);<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0224" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>QB</i>=round((<i>B&#x2212;B</i>min)/<i>Q</i>Level<i>B</i>);<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0225" num="0000">Output of step <b>4014</b> may include quantified values of each pseudo RGB color channel: QR, QG, QB.</p><p id="p-0226" num="0238">At step <b>4016</b>, pseudo RGB components are unified to the range from 0 to 1 (or amount of color component in percent value). Pseudo RGB components may also be normalized to be within this range [0, 1]. The following formulas may be used:</p><p id="p-0227" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>QR</i>_RGB=<i>QR/NR; </i><?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0228" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>QG</i>_RGB=<i>QG/NG; </i><?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0229" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>QB</i>_RGB=<i>QB/NB; </i><?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0230" num="0000">Output of step <b>4016</b> may include normalized (to 1) values of each pseudo RGB color channel QR_RGB, QG_RGB, and QB_RGB from step <b>4014</b>.</p><p id="p-0231" num="0239">At step <b>4018</b>, an indexed pseudo RGB color palette is generated. First, the normalized to unit (1) values of each pseudo RGB color channel QR_RGB, QG_RGB, QB_RGB are combined into array QRGB of dimension n-by-3, where n is a number of data entries in file FZH.mat.</p><p id="p-0232" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?><i>Q</i>RGB=round([<i>QR</i>_RGB <i>QG</i>_RGB <i>QB</i>_RGB],2).<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0233" num="0000">Repeated entries may be eliminated from this array and the pseudo RGB colormap may be generated:</p><p id="p-0234" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>RGB_colormap=unique(<i>Q</i>RGB(:,[1 2 3]),&#x2018;rows&#x2019;);<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0235" num="0000">In this example, the size may be decreased from 54727-by-3 to 5108-by-3 in the variable RGB_colormap. The pseudo RGB colormap contains unique combinations of Red (total GMF), Green (vertical anomalous component of GMF) and Blue (horizontal anomalous component of GMF). For the data in a patch we replace the pseudo RGB values by single value:</p><p id="p-0236" num="0000"><br/><?in-line-formulae description="In-line Formulae" end="lead"?>[<i>tf</i>,index]=ismember(<i>Q</i>RGB,RGB_colormap,&#x2018;rows&#x2019;);<?in-line-formulae description="In-line Formulae" end="tail"?></p><p id="p-0237" num="0000">Variable &#x2018;index&#x2019; has the same number of rows as QRGB, we rename it into &#x2018;magnetic profile&#x2019; for visualization (magnetic_profile=index). An output of step <b>4018</b> is a pseudo RGB colormap. At step <b>4020</b>, the patch is colorized. Output of step <b>402</b> may include magnetic data embedded in GeoTIFF via an alpha channel.</p><p id="p-0238" num="0240"><figref idref="DRAWINGS">FIG. <b>42</b></figref> is an example visualization of QRGB after quantization and normalization to one. These links (numbers) may be embedded into GeoTIFF via an alpha channel (e.g. as 4-th sample) for each pixel (if the magnetic data for the given pixel is present in the magnetic map). <figref idref="DRAWINGS">FIG. <b>43</b></figref> illustrates example colorization (in grayscale) of the corresponding magnetic map within the satellite image of Babiy Yar district. <figref idref="DRAWINGS">FIG. <b>44</b></figref> illustrates an example zoomed-in portion of the example of <figref idref="DRAWINGS">FIG. <b>43</b></figref>.</p><p id="p-0239" num="0241">In particular embodiments, components of the magnetic field can be used for magnetic-aided navigation. A regular component of GMF varies with time while the anomalous component tends to be more stable. Thus, the navigation may be performed by anomalous component as follows. For poor initial localization, when the regular component of the field cannot be extracted from the model WMM or IGRF (because these models require user coordinates as input), the user can navigate by total intensity of GMF. After the stable navigation solution is obtained, and coordinates are determined, the user can switch to the navigation by anomalous components as advanced (precise) mode. Magnetic maps for navigation may have the following components:<ul id="ul0058" list-style="none">    <li id="ul0058-0001" num="0000">    <ul id="ul0059" list-style="none">        <li id="ul0059-0001" num="0242">Total value of GMF&#x2014;to pseudo red channel</li>        <li id="ul0059-0002" num="0243">Anomalous horizontal component&#x2014;to pseudo green channel</li>        <li id="ul0059-0003" num="0244">Anomalous vertical component&#x2014;to pseudo blue channel<br/>All three components may then be indexed, and the link to pseudo color palette in the GeoTIFF file may be added for each pixel via an alpha channel (also known as a transparency channel).</li>    </ul>    </li></ul></p><p id="p-0240" num="0245">In particular embodiments, after a magnetic map is embedded in a particular GeoTIFF file, this file may be used for navigation by using various techniques. This way magnetic data (maps) can be transmitted (embedded with GeoTIFF tiles) inside existing satellite-based navigation systems (most of them use GeoTIFF files for display purposes) and, as a result, an independent source of navigational data (magnetic) can be added to the existing system and used for navigation. After embedding magnetic data into a GeoTIFF, the corresponding image (based on our newly created pseudo colormap) may be used to navigate using a variety of available image-processing techniques. Particular embodiments represent current magnetic readings visually and compare them to the image-map for navigation.</p><p id="p-0241" num="0246">In particular embodiments, gradient representation is a difference in GMF values between two adjacent points in space (e.g. of map cells). Considering a given profile and finding all the potential matches (e.g. candidate profiles) from the map, the difference in GMF value is taken between the corresponding samples, as shown in the example of <figref idref="DRAWINGS">FIG. <b>45</b></figref>.</p><p id="p-0242" num="0000"><maths id="MATH-US-00010" num="00010"><math overflow="scroll"> <mrow>  <mrow>   <mrow>    <mi>&#x394;</mi>    <mo>&#x2062;</mo>    <mrow>     <mi>f</mi>     <mo>&#x2061;</mo>     <mo>(</mo>     <mi>r</mi>     <mo>)</mo>    </mrow>   </mrow>   <mo>=</mo>   <mfrac>    <mrow>     <mrow>      <mi>f</mi>      <mo>&#x2061;</mo>      <mo>(</mo>      <mi>r</mi>      <mo>)</mo>     </mrow>     <mo>-</mo>     <mrow>      <mi>f</mi>      <mo>&#x2061;</mo>      <mo>(</mo>      <mrow>       <mi>r</mi>       <mo>-</mo>       <mrow>        <mi>&#x394;</mi>        <mo>&#x2062;</mo>        <mi>r</mi>       </mrow>      </mrow>      <mo>)</mo>     </mrow>    </mrow>    <mrow>     <mi>&#x394;</mi>     <mo>&#x2062;</mo>     <mi>r</mi>    </mrow>   </mfrac>  </mrow>  <mo>,</mo> </mrow></math></maths></p><p id="p-0243" num="0000">where f(r) is the GMF value in the given point, &#x394;r is the distance between the adjacent points.</p><p id="p-0244" num="0247">In particular embodiments, map visualization is based on quantization of the GMF values (either total magnitude or XYZ components separately) to represent them in grayscale form (in case of quantization of total magnitude of GMF) or in pseudo colored form. <figref idref="DRAWINGS">FIG. <b>46</b></figref> illustrates an example GMF map fragment from Babiy Yar park. Not all cells are filled, so the map fragment may be completed by interpolation. After interpolation, the map fragment of <figref idref="DRAWINGS">FIG. <b>46</b></figref> may look as shown in the example of <figref idref="DRAWINGS">FIG. <b>47</b></figref>. Quantization may be performed for a standard grayscale range from 0 to 255. After quantization, the map fragment of <figref idref="DRAWINGS">FIG. <b>47</b></figref> may look as show in the example of <figref idref="DRAWINGS">FIG. <b>48</b></figref>. In the example of <figref idref="DRAWINGS">FIG. <b>48</b></figref>, the minimal and maximal values of GMF were taken from the whole map (these values may change in the future based on any potential modifications of the map data). The maximal and minimal values of GMF are as follows:<ul id="ul0060" list-style="none">    <li id="ul0060-0001" num="0000">    <ul id="ul0061" list-style="none">        <li id="ul0061-0001" num="0248">maxGMF=72.5401</li>        <li id="ul0061-0002" num="0249">minGMF=18.1808<br/>Resolution of quantized level is as follows: QLevelGMF=0.2132.</li>    </ul>    </li></ul></p><p id="p-0245" num="0250">Taking into account the sensitivity and accuracy characteristics of magnetic sensors (e.g. magnetometer built into a mobile phone), the resolution of map is &#x2dc;0.2 &#x3bc;T is enough for localization and navigation purposes in particular embodiments. If profile matching is performed similar to image matching (that is, thinking of a current magnetic profile as an image strip), then the magnetic profile and the selected candidate profile may be as shown in the example of <figref idref="DRAWINGS">FIG. <b>49</b></figref>, which visualizes numerical values of a quantized map fragment. In <figref idref="DRAWINGS">FIG. <b>49</b></figref>, the upper, lighter section designates the current magnetic profile and the lower, darker section is related to a candidate profile.</p><p id="p-0246" num="0251">In particular embodiments, the mean square difference (MSD) is calculated as following:</p><p id="p-0247" num="0000"><maths id="MATH-US-00011" num="00011"><math overflow="scroll"> <mrow>  <mrow>   <mrow>    <mi>M</mi>    <mo>&#x2062;</mo>    <mi>S</mi>    <mo>&#x2062;</mo>    <mi>D</mi>   </mrow>   <mo>=</mo>   <mrow>    <mfrac>     <mn>1</mn>     <mi>N</mi>    </mfrac>    <mo>&#x2062;</mo>    <mrow>     <munderover>      <mo>&#x2211;</mo>      <mrow>       <mi>i</mi>       <mo>=</mo>       <mn>1</mn>      </mrow>      <mi>N</mi>     </munderover>     <mtext> </mtext>     <msup>      <mrow>       <mo>(</mo>       <mrow>        <msub>         <mi>f</mi>         <mi>i</mi>        </msub>        <mo>-</mo>        <msub>         <mi>C</mi>         <mi>i</mi>        </msub>       </mrow>       <mo>)</mo>      </mrow>      <mn>2</mn>     </msup>    </mrow>   </mrow>  </mrow>  <mo>,</mo> </mrow></math></maths></p><p id="p-0248" num="0000">where f<sub>i </sub>are values of current magnetic profile, C<sub>i </sub>are values of candidate profile from a map. If the magnetic profiles are represented as image strip by size M&#xd7;N, then they are converted by lexicographic ordering into MN&#xd7;1 vectors. In this case, the formula for MSD will be as follows:</p><p id="p-0249" num="0000"><maths id="MATH-US-00012" num="00012"><math overflow="scroll"> <mrow>  <mrow>   <mrow>    <mi>M</mi>    <mo>&#x2062;</mo>    <mi>S</mi>    <mo>&#x2062;</mo>    <mi>D</mi>   </mrow>   <mo>=</mo>   <mrow>    <mfrac>     <mn>1</mn>     <mrow>      <mi>M</mi>      <mo>&#x2062;</mo>      <mi>N</mi>     </mrow>    </mfrac>    <mo>&#x2062;</mo>    <mrow>     <munderover>      <mo>&#x2211;</mo>      <mrow>       <mi>i</mi>       <mo>=</mo>       <mn>1</mn>      </mrow>      <mrow>       <mi>M</mi>       <mo>&#x2062;</mo>       <mi>N</mi>      </mrow>     </munderover>     <mtext> </mtext>     <msup>      <mrow>       <mo>(</mo>       <mrow>        <msub>         <mi>f</mi>         <mi>i</mi>        </msub>        <mo>-</mo>        <msub>         <mi>C</mi>         <mi>i</mi>        </msub>       </mrow>       <mo>)</mo>      </mrow>      <mn>2</mn>     </msup>    </mrow>   </mrow>  </mrow>  <mo>,</mo> </mrow></math></maths></p><p id="p-0250" num="0000">MSD returns a squared sum of Euclidean distances between two profiles. If MSD returns zero, two profiles are the same, which means a match. But as for practical applications the problem is in the fact that there is no maximum value of MSD. The larger the MSD is, the smaller the corresponding correlation.</p><p id="p-0251" num="0252">In particular embodiments, mean absolute difference (MAD) is calculated as follows:</p><p id="p-0252" num="0000"><maths id="MATH-US-00013" num="00013"><math overflow="scroll"> <mrow>  <mrow>   <mi>M</mi>   <mo>&#x2062;</mo>   <mi>A</mi>   <mo>&#x2062;</mo>   <mi>D</mi>  </mrow>  <mo>=</mo>  <mrow>   <mfrac>    <mn>1</mn>    <mi>N</mi>   </mfrac>   <mo>&#x2062;</mo>   <mrow>    <munderover>     <mo>&#x2211;</mo>     <mrow>      <mi>i</mi>      <mo>=</mo>      <mn>1</mn>     </mrow>     <mi>N</mi>    </munderover>    <mtext> </mtext>    <mrow>     <mrow>      <semantics definitionURL="">       <mo>&#x2758;</mo>       <annotation encoding="Mathematica">"\[LeftBracketingBar]"</annotation>      </semantics>      <mrow>       <msub>        <mi>f</mi>        <mi>i</mi>       </msub>       <mo>-</mo>       <msub>        <mi>C</mi>        <mi>i</mi>       </msub>      </mrow>      <semantics definitionURL="">       <mo>&#x2758;</mo>       <annotation encoding="Mathematica">"\[RightBracketingBar]"</annotation>      </semantics>     </mrow>     <mo>.</mo>    </mrow>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0253" num="0000">For magnetic profile strips, the formula is as follows:</p><p id="p-0254" num="0000"><maths id="MATH-US-00014" num="00014"><math overflow="scroll"> <mrow>  <mrow>   <mrow>    <mi>M</mi>    <mo>&#x2062;</mo>    <mi>A</mi>    <mo>&#x2062;</mo>    <mi>D</mi>   </mrow>   <mo>=</mo>   <mrow>    <mfrac>     <mn>1</mn>     <mi>MN</mi>    </mfrac>    <mo>&#x2062;</mo>    <mrow>     <munderover>      <mo>&#x2211;</mo>      <mrow>       <mi>i</mi>       <mo>=</mo>       <mn>1</mn>      </mrow>      <mi>MN</mi>     </munderover>     <mtext> </mtext>     <mrow>      <semantics definitionURL="">       <mo>&#x2758;</mo>       <annotation encoding="Mathematica">"\[LeftBracketingBar]"</annotation>      </semantics>      <mrow>       <msub>        <mi>f</mi>        <mi>i</mi>       </msub>       <mo>-</mo>       <msub>        <mi>C</mi>        <mi>i</mi>       </msub>      </mrow>      <semantics definitionURL="">       <mo>&#x2758;</mo>       <annotation encoding="Mathematica">"\[RightBracketingBar]"</annotation>      </semantics>     </mrow>    </mrow>   </mrow>  </mrow>  <mo>,</mo> </mrow></math></maths></p><p id="p-0255" num="0000">MAD returns a sum of absolute differences between two profiles. The characteristic of MAD is similar to that of MSD. If MAD is near zero, this implies two profiles have high correlation. In contrast, if MAD has a larger value, the correlation level is low. Like MSD, MAD also has no limitation to its maximal value.</p><p id="p-0256" num="0253">In particular embodiments, normalized cross correlation (NCC) is calculated as follows:</p><p id="p-0257" num="0000"><maths id="MATH-US-00015" num="00015"><math overflow="scroll"> <mrow>  <mrow>   <mi>N</mi>   <mo>&#x2062;</mo>   <mi>C</mi>   <mo>&#x2062;</mo>   <mi>C</mi>  </mrow>  <mo>=</mo>  <mfrac>   <mrow>    <munderover>     <mo>&#x2211;</mo>     <mrow>      <mi>i</mi>      <mo>=</mo>      <mn>1</mn>     </mrow>     <mi>N</mi>    </munderover>    <mtext> </mtext>    <mrow>     <msub>      <mi>f</mi>      <mi>i</mi>     </msub>     <mo>&#xb7;</mo>     <msub>      <mi>C</mi>      <mi>i</mi>     </msub>    </mrow>   </mrow>   <msqrt>    <mrow>     <munderover>      <mo>&#x2211;</mo>      <mrow>       <mi>i</mi>       <mo>=</mo>       <mn>1</mn>      </mrow>      <mi>N</mi>     </munderover>     <mtext> </mtext>     <mrow>      <msubsup>       <mi>f</mi>       <mi>i</mi>       <mn>2</mn>      </msubsup>      <mo>&#xb7;</mo>      <mrow>       <munderover>        <mo>&#x2211;</mo>        <mrow>         <mi>i</mi>         <mo>=</mo>         <mn>1</mn>        </mrow>        <mi>N</mi>       </munderover>       <mtext> </mtext>       <msubsup>        <mi>C</mi>        <mi>i</mi>        <mn>2</mn>       </msubsup>      </mrow>     </mrow>    </mrow>   </msqrt>  </mfrac> </mrow></math></maths></p><p id="p-0258" num="0000">In case of image strips, the formula becomes:</p><p id="p-0259" num="0000"><maths id="MATH-US-00016" num="00016"><math overflow="scroll"> <mrow>  <mrow>   <mi>N</mi>   <mo>&#x2062;</mo>   <mi>C</mi>   <mo>&#x2062;</mo>   <mi>C</mi>  </mrow>  <mo>=</mo>  <mfrac>   <mrow>    <munderover>     <mo>&#x2211;</mo>     <mrow>      <mi>i</mi>      <mo>=</mo>      <mn>1</mn>     </mrow>     <mi>MN</mi>    </munderover>    <mtext> </mtext>    <mrow>     <msub>      <mi>f</mi>      <mi>i</mi>     </msub>     <mo>&#xb7;</mo>     <msub>      <mi>C</mi>      <mi>i</mi>     </msub>    </mrow>   </mrow>   <msqrt>    <mrow>     <munderover>      <mo>&#x2211;</mo>      <mrow>       <mi>i</mi>       <mo>=</mo>       <mn>1</mn>      </mrow>      <mi>MN</mi>     </munderover>     <mtext> </mtext>     <mrow>      <msubsup>       <mi>f</mi>       <mi>i</mi>       <mn>2</mn>      </msubsup>      <mo>&#xb7;</mo>      <mrow>       <munderover>        <mo>&#x2211;</mo>        <mrow>         <mi>i</mi>         <mo>=</mo>         <mn>1</mn>        </mrow>        <mi>MN</mi>       </munderover>       <mtext> </mtext>       <msubsup>        <mi>C</mi>        <mi>i</mi>        <mn>2</mn>       </msubsup>      </mrow>     </mrow>    </mrow>   </msqrt>  </mfrac> </mrow></math></maths></p><p id="p-0260" num="0000">NCC returns a normalized value between 0 and 1. A sum of a product is normalized by squared sums of each profile. The value 1 indicates the best match. This measure is known to be more robust to pixel-wise white noise in comparison to MSD and MAD. On the other hand, NCC is not invariant under the constant shift in a field value. To provide this invariance, we utilize Zero-mean Cross-Correlation,</p><p id="p-0261" num="0000"><maths id="MATH-US-00017" num="00017"><math overflow="scroll"> <mrow>  <mrow>   <mi>ZNCC</mi>   <mo>=</mo>   <mfrac>    <mrow>     <munderover>      <mo>&#x2211;</mo>      <mrow>       <mi>i</mi>       <mo>=</mo>       <mn>1</mn>      </mrow>      <mi>MN</mi>     </munderover>     <mtext> </mtext>     <mrow>      <mrow>       <mo>(</mo>       <mrow>        <msub>         <mi>f</mi>         <mi>i</mi>        </msub>        <mo>-</mo>        <mover>         <mi>f</mi>         <mo>_</mo>        </mover>       </mrow>       <mo>)</mo>      </mrow>      <mo>&#xb7;</mo>      <mrow>       <mo>(</mo>       <mrow>        <msub>         <mi>C</mi>         <mi>i</mi>        </msub>        <mo>-</mo>        <mover>         <mi>C</mi>         <mo>_</mo>        </mover>       </mrow>       <mo>)</mo>      </mrow>     </mrow>    </mrow>    <msqrt>     <mrow>      <munderover>       <mo>&#x2211;</mo>       <mrow>        <mi>i</mi>        <mo>=</mo>        <mn>1</mn>       </mrow>       <mi>MN</mi>      </munderover>      <mtext> </mtext>      <mrow>       <msup>        <mrow>         <mo>(</mo>         <mrow>          <msub>           <mi>f</mi>           <mi>i</mi>          </msub>          <mo>-</mo>          <mi>f</mi>         </mrow>         <mo>)</mo>        </mrow>        <mn>2</mn>       </msup>       <mo>&#xb7;</mo>       <mrow>        <munderover>         <mo>&#x2211;</mo>         <mrow>          <mi>i</mi>          <mo>=</mo>          <mn>1</mn>         </mrow>         <mi>MN</mi>        </munderover>        <mtext> </mtext>        <msup>         <mrow>          <mo>(</mo>          <mrow>           <msub>            <mi>C</mi>            <mi>i</mi>           </msub>           <mo>-</mo>           <mover>            <mi>C</mi>            <mo>_</mo>           </mover>          </mrow>          <mo>)</mo>         </mrow>         <mn>2</mn>        </msup>       </mrow>      </mrow>     </mrow>    </msqrt>   </mfrac>  </mrow>  <mo>,</mo> </mrow></math></maths></p><p id="p-0262" num="0000">where <o ostyle="single">f</o>, <o ostyle="single">C</o> are the mean values of the current and candidate magnetic profiles. Note that, in tracking, only the positive correlation is of interest, thus max(0, ZNCC) may be used as a similarity measure. The sensitivity of NCC and ZNCC is smaller in comparison to MSD and MAD, especially for long profiles, where N tends to infinity. However, when finding matches rather than finding the discrepancies, the NCC (or ZNCC) may provide more accurate results.</p><p id="p-0263" num="0254">In particular embodiments, the same approach is applied to the part of the image (instead of just a single magnetic profile) over the visualized GMF map. Consider the example magnetic profile strip (3&#xd7;7) illustrated in <figref idref="DRAWINGS">FIG. <b>50</b></figref>. NCC, MSD, and MAD are calculated by sliding along the map by changing the left upper corner. The results are illustrated in <figref idref="DRAWINGS">FIG. <b>51</b></figref>, <figref idref="DRAWINGS">FIG. <b>52</b></figref>, and <figref idref="DRAWINGS">FIG. <b>53</b></figref>. Noise is added to the magnetic gradient strip and the performance of each of these error metrics checked, as illustrated in <figref idref="DRAWINGS">FIG. <b>54</b></figref>, <figref idref="DRAWINGS">FIG. <b>55</b></figref>, and <figref idref="DRAWINGS">FIG. <b>56</b></figref>. For MAD (in <figref idref="DRAWINGS">FIG. <b>56</b></figref>), an incorrect best matching is selected. The visualization of the map is pre-processed via a gradient operator, such as a Prewitt operator, which represents the image as gradient values in magnitude and direction. The results are presented in <figref idref="DRAWINGS">FIG. <b>57</b></figref>, <figref idref="DRAWINGS">FIG. <b>58</b></figref>, and <figref idref="DRAWINGS">FIG. <b>59</b></figref>. <figref idref="DRAWINGS">FIG. <b>57</b></figref> demonstrates calculating a best match as a maximal value of the NCC metrics, and such maximal element is marked. In <figref idref="DRAWINGS">FIG. <b>58</b></figref> and <figref idref="DRAWINGS">FIG. <b>59</b></figref>, we are searching for the minimal elements of MSD and MAD metrics, the resulting values are marked and they correspond to the initial position.</p><p id="p-0264" num="0255">In particular embodiments, all three error metrics perform better for gradient representation (for gradient magnitude). The gradient in direction may be used to speed up the search for larger maps, especially when there is significant uncertainty in initial position. Three-component representation (colorization, gradient, and visual representation) of a magnetic map may, in particular embodiments, provide one or more, or none, of the following benefits:<ul id="ul0062" list-style="none">    <li id="ul0062-0001" num="0000">    <ul id="ul0063" list-style="none">        <li id="ul0063-0001" num="0256">It may facilitate the use of well known image-processing techniques to determine the information content of the map (e.g. map informativity).</li>        <li id="ul0063-0002" num="0257">It may facilitate detection of magnetic-map features using image-processing techniques. Magnetic-map features may include, e.g., points, contours, and areas. These features (e.g., anomalies) may be used, e.g., for validation of data from potentially unreliable sources (e.g., crowdsourcing) in updating the magnetic map.</li>        <li id="ul0063-0003" num="0258">It may facilitate more detailed analysis and detection of more anomalies by, e.g., increasing the richness of the information content of the magnetic map.</li>        <li id="ul0063-0004" num="0259">The sequence of measurements (using gradiometers for example) may also be represented as part of an image, which may facilitate the matching of the magnetic profile with an existing map (e.g., as may be done in image processing based on feature matching).</li>    </ul>    </li></ul></p><p id="p-0265" num="0260">Particular embodiments may improve mapping quality by GMF colorization and visualization. Representation of GMF data by a magnetic map according to particular embodiments herein may facilitate use of well known methods of image processing. Particular embodiments estimate map informativity by one or more of the following parameters:<ul id="ul0064" list-style="none">    <li id="ul0064-0001" num="0000">    <ul id="ul0065" list-style="none">        <li id="ul0065-0001" num="0261">directly by the size of colormap N<sub>CM</sub>;</li>        <li id="ul0065-0002" num="0262">by number N<sub>SA </sub>of segmented areas within a map tile; or</li>        <li id="ul0065-0003" num="0263">by number N<sub>ME </sub>of magnetic anomalies (e.g. edges).<br/>In particular embodiments, an edge is an area with a rapid change in image (map) intensity or where the GMF value is spatially localized. Assume that the GMF data varies from GMFmin to GMFmax for a selected map tile of size M by N (in meters or any other units). In particular embodiments, a standard parameter for informativity estimation is variance and is calculated as follows:</li>    </ul>    </li></ul></p><p id="p-0266" num="0000"><maths id="MATH-US-00018" num="00018"><math overflow="scroll"> <mrow>  <mrow>   <msup>    <mi>&#x3c3;</mi>    <mn>2</mn>   </msup>   <mo>=</mo>   <mrow>    <mfrac>     <mn>1</mn>     <mi>N</mi>    </mfrac>    <mo>&#x2062;</mo>    <mrow>     <munderover>      <mo>&#x2211;</mo>      <mrow>       <mi>i</mi>       <mo>=</mo>       <mn>1</mn>      </mrow>      <mi>N</mi>     </munderover>     <mtext> </mtext>     <msup>      <mrow>       <mo>(</mo>       <mrow>        <mi>X</mi>        <mo>-</mo>        <mi>&#x3bc;</mi>       </mrow>       <mo>)</mo>      </mrow>      <mn>2</mn>     </msup>    </mrow>   </mrow>  </mrow>  <mo>,</mo> </mrow></math></maths></p><p id="p-0267" num="0000">where N is the number of data samples X and &#x3bc; is the mean value. However, in particular embodiments, the variance may not indicate whether the map tile is good or bad from the point of view of reliability of navigation. The greater the variance, the better and more reliable navigation will be, but there is no clear threshold between &#x201c;completely unreliable&#x201d; and &#x201c;reliable to some degree&#x201d; or between &#x201c;reliable to some degree&#x201d; and &#x201c;completely reliable.&#x201d; It may be advantageous to have some characteristic expressed as a percentage to understand a difference between &#x201c;reliable&#x201d; and &#x201c;not reliable.&#x201d; In particular embodiments, reliability (e.g. informativity) of a map tile may have no relation to a quality of mapping as a process. The informativity in this case may be a property of GMF itself, since, if the magnetic field for some area has no variation (e.g. stable because of lack of anomaly sources), then magnetic-aided navigation in this area may be useless without another geophysical field.</p><p id="p-0268" num="0264">In particular embodiments, informativity of GMF (e.g. by its total component) may be calculated as follows. Assume that the ranges of possible change of total value of GMF are from 0 &#x3bc;T to 150 &#x3bc;T (e.g. in the presence of large metallic constructions or magnets). If it is also assumed that the step in GMF detection in 0.5 &#x3bc;T and this step is used for calculating quantization and pseudo colorization, then the size N<sub>CM </sub>of a colormap may be calculated as follows (e.g., in assumption, that the variation in total GMF is continuous by all its range):</p><p id="p-0269" num="0000"><maths id="MATH-US-00019" num="00019"><math overflow="scroll"> <mrow>  <msub>   <mi>N</mi>   <mi>CM</mi>  </msub>  <mo>=</mo>  <mrow>   <mfrac>    <mrow>     <msub>      <mi>GMF</mi>      <mi>max</mi>     </msub>     <mo>-</mo>     <msub>      <mi>GMF</mi>      <mi>min</mi>     </msub>    </mrow>    <mn>0.5</mn>   </mfrac>   <mo>=</mo>   <mrow>    <mfrac>     <mrow>      <mn>150</mn>      <mo>-</mo>      <mn>0</mn>     </mrow>     <mn>0.5</mn>    </mfrac>    <mo>=</mo>    <mn>300</mn>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0270" num="0000">For a mapped area of Babiy Yar with size in 101 m by 101 m, as illustrated in the example of <figref idref="DRAWINGS">FIG. <b>60</b></figref>, the range of total GMF intensity varies from 34.1488 &#x3bc;T to 57.6683 &#x3bc;T. The number of quantization levels for pseudo colorization of GMF in the selected map tile may be calculated as follows:</p><p id="p-0271" num="0000"><maths id="MATH-US-00020" num="00020"><math overflow="scroll"> <mrow>  <msub>   <mi>N</mi>   <mrow>    <mi>map</mi>    <mo>&#x2062;</mo>    <mtext>   </mtext>    <mi>tile</mi>   </mrow>  </msub>  <mo>=</mo>  <mrow>   <mfrac>    <mrow>     <mn>57.6683</mn>     <mo>-</mo>     <mn>34.1488</mn>    </mrow>    <mn>0.5</mn>   </mfrac>   <mo>=</mo>   <mn>47.0389</mn>  </mrow> </mrow></math></maths></p><p id="p-0272" num="0000">By rounding the calculated value, the number of quantization levels is equal to 47. Since, in this example, only the total component of GMF is considered, the number of quantization levels determines the size of colormap N<sub>map tile</sub>. This value may be corrected depending on number of unique GMF entries in the selected map tile. In the given example, it is shorter and contains only 44 unique entries. And the relative informativity of the selected map tile can be calculated as follows:</p><p id="p-0273" num="0000"><maths id="MATH-US-00021" num="00021"><math overflow="scroll"> <mrow>  <mrow>   <mrow>    <mfrac>     <msub>      <mi>N</mi>      <mrow>       <mi>map</mi>       <mo>&#x2062;</mo>       <mtext>   </mtext>       <mi>tile</mi>      </mrow>     </msub>     <msub>      <mi>N</mi>      <mi>CM</mi>     </msub>    </mfrac>    <mo>&#xb7;</mo>    <mn>100</mn>   </mrow>   <mo>&#x2062;</mo>   <mi>%</mi>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mrow>     <mfrac>      <mn>44</mn>      <mn>300</mn>     </mfrac>     <mo>&#xb7;</mo>     <mn>100</mn>    </mrow>    <mo>&#x2062;</mo>    <mi>%</mi>   </mrow>   <mo>=</mo>   <mrow>    <mn>14.7</mn>    <mi>%</mi>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0274" num="0000">In particular embodiments, such informativity may be used rarely because, as a rule, the approximate position of an object may be known to at least some degree. Because of this, relative informativity may be used. The informativity of an &#x201c;area of initial uncertainty&#x201d; may be defined to be the area where the search is started.</p><p id="p-0275" num="0265">In this example, the a priori information about the position of the object being somewhere in Babiy Yar park is known. In this case, the informativity S is determined by minimal and maximal values of total GMF in the whole patch as follows:</p><p id="p-0276" num="0000"><maths id="MATH-US-00022" num="00022"><math overflow="scroll"> <mrow>  <msub>   <mi>N</mi>   <mi>CM</mi>  </msub>  <mo>=</mo>  <mrow>   <mfrac>    <mrow>     <mn>72.5401</mn>     <mo>-</mo>     <mn>18.1808</mn>    </mrow>    <mn>0.5</mn>   </mfrac>   <mo>=</mo>   <mn>108.7186</mn>  </mrow> </mrow></math></maths></p><p id="p-0277" num="0000">or, after rounding, 109. By deleting the repeating entries in the colormap, 93 unique entries are obtained. Now the relative informativity of selected map tile increases:</p><p id="p-0278" num="0000"><maths id="MATH-US-00023" num="00023"><math overflow="scroll"> <mrow>  <mrow>   <mrow>    <mfrac>     <msub>      <mi>N</mi>      <mrow>       <mi>map</mi>       <mo>&#x2062;</mo>       <mtext>   </mtext>       <mi>tile</mi>      </mrow>     </msub>     <msub>      <mi>N</mi>      <mi>CM</mi>     </msub>    </mfrac>    <mo>&#xb7;</mo>    <mn>100</mn>   </mrow>   <mo>&#x2062;</mo>   <mi>%</mi>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mrow>     <mfrac>      <mn>44</mn>      <mn>93</mn>     </mfrac>     <mo>&#xb7;</mo>     <mn>100</mn>    </mrow>    <mo>&#x2062;</mo>    <mi>%</mi>   </mrow>   <mo>=</mo>   <mrow>    <mn>47.31</mn>    <mi>%</mi>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0279" num="0000">Increasing the step in quantization (which may be associated with increasing the accuracy of measurement) may not change informativity (e.g. defined as proposed) much. It may be considered substantially invariant to a hardware change (e.g. a change in type of magnetic sensor). If the accuracy of the sensor is significantly increased and mapping accuracy is changed from 0.5 &#x3bc;T (from an earlier example) to 0.05 &#x3bc;T (by a factor of 10), the previously determined characteristics may change as follows:</p><p id="p-0280" num="0000"><maths id="MATH-US-00024" num="00024"><math overflow="scroll"> <mtable>  <mtr>   <mtd>    <mrow>     <msub>      <mi>N</mi>      <mi>CM</mi>     </msub>     <mo>=</mo>     <mrow>      <mfrac>       <mrow>        <mn>72.5401</mn>        <mo>-</mo>        <mn>18.1808</mn>       </mrow>       <mn>0.05</mn>      </mfrac>      <mo>=</mo>      <mn>1087.186</mn>     </mrow>    </mrow>   </mtd>  </mtr>  <mtr>   <mtd>    <mrow>     <msub>      <mi>N</mi>      <mrow>       <mi>map</mi>       <mo>&#x2062;</mo>       <mtext>   </mtext>       <mi>tile</mi>      </mrow>     </msub>     <mo>=</mo>     <mrow>      <mfrac>       <mrow>        <mn>57.6683</mn>        <mo>-</mo>        <mn>34.1488</mn>       </mrow>       <mn>0.05</mn>      </mfrac>      <mo>=</mo>      <mn>470.389</mn>     </mrow>    </mrow>   </mtd>  </mtr> </mtable></math></maths></p><p id="p-0281" num="0000">By eliminating the repeating entries in a corresponding colormap slightly different values may be obtained: N<sub>CM</sub>=642; N<sub>map tile</sub>=341.</p><p id="p-0282" num="0000"><maths id="MATH-US-00025" num="00025"><math overflow="scroll"> <mrow>  <mrow>   <mrow>    <mfrac>     <msub>      <mi>N</mi>      <mrow>       <mi>map</mi>       <mo>&#x2062;</mo>       <mtext>   </mtext>       <mi>tile</mi>      </mrow>     </msub>     <msub>      <mi>N</mi>      <mi>CM</mi>     </msub>    </mfrac>    <mo>&#xb7;</mo>    <mn>100</mn>   </mrow>   <mo>&#x2062;</mo>   <mi>%</mi>  </mrow>  <mo>=</mo>  <mrow>   <mrow>    <mrow>     <mfrac>      <mn>341</mn>      <mn>642</mn>     </mfrac>     <mo>&#xb7;</mo>     <mn>100</mn>    </mrow>    <mo>&#x2062;</mo>    <mi>%</mi>   </mrow>   <mo>=</mo>   <mrow>    <mn>53.12</mn>    <mi>%</mi>   </mrow>  </mrow> </mrow></math></maths></p><p id="p-0283" num="0000">Another proposed characteristic of map informativity is number N<sub>SA </sub>of segmented areas in a map tile. To make it invariant, the same principle may be used. The number N<sub>SA </sub>of segmented areas for the area of initial uncertainty and its ratio to the number N<sub>map tile </sub>of segmented area within the selected map tile may be determined:</p><p id="p-0284" num="0000"><maths id="MATH-US-00026" num="00026"><math overflow="scroll"> <mrow>  <mrow>   <mfrac>    <msub>     <mi>N</mi>     <mrow>      <mi>map</mi>      <mo>&#x2062;</mo>      <mtext>   </mtext>      <mi>tile</mi>     </mrow>    </msub>    <msub>     <mi>N</mi>     <mi>SA</mi>    </msub>   </mfrac>   <mo>&#xb7;</mo>   <mn>100</mn>  </mrow>  <mo>&#x2062;</mo>  <mi>%</mi> </mrow></math></maths></p><p id="p-0285" num="0000">In particular embodiments, in digital image processing and computer vision, image segmentation may be the process of partitioning a digital image into multiple segments (e.g. sets of pixels (which may be referred to as image objects)). Image segmentation may be used to locate objects and boundaries (e.g. lines, curves, etc.) in images. For pseudo colorized magnetic maps, particular embodiments search for magnetic anomalies (e.g. by edge detection) or for areas with stable field intensities (e.g. segmented areas).</p><p id="p-0286" num="0266">In particular embodiments, the result of image segmentation is a set of segments that collectively cover an image or a set of contours extracted from the image (e.g. edge detection). Each of the pixels in a region is similar with respect to some characteristic or computed property, such as color, intensity, or texture. Adjacent regions are substantially different with respect to the same characteristic(s). Particular embodiments deal with GMF data, and below there is an example for GMF intensity being pseudo colorized and segmented.</p><p id="p-0287" num="0267">A question arising for segmentation is the number of thresholds (similar to quantization levels) and their values. Segmentation can be considered also as roughing the 2D data. Therefore, the number of thresholds may be selected to be at least twice less than the number of quantization levels for the same map tile. <figref idref="DRAWINGS">FIG. <b>61</b></figref> illustrates an example map fragment of size 101 meter by 101 meter that has been interpolated to fill empty (not yet measured) values. Then it may be processed as an image by one of the segmentation techniques. As a result, nine separate areas with similar intensities can be seen, that is, N<sub>map tile</sub>=9. This is illustrated in the example of <figref idref="DRAWINGS">FIG. <b>62</b></figref>. If the quantization depth is decreased, then the number of segmented areas will increase, as shown in the example of <figref idref="DRAWINGS">FIG. <b>63</b></figref>. Now N<sub>map tile</sub>=17. Using a simple variant of segmentation, binarization may produce the example binary segmented map fragment illustrated in <figref idref="DRAWINGS">FIG. <b>64</b></figref>. Here, the number of segmented areas is equal to 7, N<sub>map tile</sub>=7. Any suitable image-segmentation method can be applied to the magnetic map and the value of</p><p id="p-0288" num="0000"><maths id="MATH-US-00027" num="00027"><math overflow="scroll"> <mrow>  <mrow>   <mfrac>    <msub>     <mi>N</mi>     <mrow>      <mi>map</mi>      <mo>&#x2062;</mo>      <mtext>   </mtext>      <mi>tile</mi>     </mrow>    </msub>    <msub>     <mi>N</mi>     <mi>SA</mi>    </msub>   </mfrac>   <mo>&#xb7;</mo>   <mn>100</mn>  </mrow>  <mo>&#x2062;</mo>  <mi>%</mi> </mrow></math></maths></p><p id="p-0289" num="0000">can be obtained. To calculate the segmented areas for the whole mapped region of Babiy Yar, the missed values may be interpolated or the map may be completed by making additional measurements.</p><p id="p-0290" num="0268"><figref idref="DRAWINGS">FIG. <b>65</b></figref> illustrates an example computer system <b>6500</b>. In articular embodiments, one or more computer systems <b>6500</b> perform one or more steps of one or more methods described or illustrated herein. In particular embodiments, one or more computer systems <b>6500</b> provide functionality described or illustrated herein. In particular embodiments, software running on one or more computer systems <b>6500</b> performs one or more steps of one or more methods described or illustrated herein or provides functionality described or illustrated herein. Particular embodiments include one or more portions of one or more computer systems <b>6500</b>. Herein, reference to a computer system may encompass a computing device, and vice versa, where appropriate. Moreover, reference to a computer system may encompass one or more computer systems, where appropriate.</p><p id="p-0291" num="0269">This disclosure contemplates any suitable number of computer systems <b>6500</b>. This disclosure contemplates computer system <b>6500</b> taking any suitable physical form. As example and not by way of limitation, computer system <b>6500</b> may be an embedded computer system, a system-on-chip (SOC), a single-board computer system (SBC) (such as, for example, a computer-on-module (COM) or system-on-module (SOM)), a desktop computer system, a laptop or notebook computer system, an interactive kiosk, a mainframe, a mesh of computer systems, a mobile telephone, a personal digital assistant (PDA), a server, a tablet computer system, or a combination of two or more of these. Where appropriate, computer system <b>6500</b> may include one or more computer systems <b>6500</b>; be unitary or distributed; span multiple locations; span multiple machines; span multiple data centers; or reside in a cloud, which may include one or more cloud components in one or more networks. Where appropriate, one or more computer systems <b>6500</b> may perform without substantial spatial or temporal limitation one or more steps of one or more methods described or illustrated herein. As an example and not by way of limitation, one or more computer systems <b>6500</b> may perform in real time or in batch mode one or more steps of one or more methods described or illustrated herein. One or more computer systems <b>6500</b> may perform at different times or at different locations one or more steps of one or more methods described or illustrated herein, where appropriate.</p><p id="p-0292" num="0270">In particular embodiments, computer system <b>6500</b> includes a processor <b>6502</b>, memory <b>6504</b>, storage <b>6506</b>, an input/output (I/O) interface <b>6508</b>, a communication interface <b>6510</b>, and a bus <b>6512</b>. Although this disclosure describes and illustrates a particular computer system having a particular number of particular components in a particular arrangement, this disclosure contemplates any suitable computer system having any suitable number of any suitable components in any suitable arrangement.</p><p id="p-0293" num="0271">In particular embodiments, processor <b>6502</b> includes hardware for executing instructions, such as those making up a computer program. As an example and not by way of limitation, to execute instructions, processor <b>6502</b> may retrieve (or fetch) the instructions from an internal register, an internal cache, memory <b>6504</b>, or storage <b>6506</b>; decode and execute them; and then write one or more results to an internal register, an internal cache, memory <b>6504</b>, or storage <b>6506</b>. In particular embodiments, processor <b>6502</b> may include one or more internal caches for data, instructions, or addresses. This disclosure contemplates processor <b>6502</b> including any suitable number of any suitable internal caches, where appropriate. As an example and not by way of limitation, processor <b>6502</b> may include one or more instruction caches, one or more data caches, and one or more translation lookaside buffers (TLBs). Instructions in the instruction caches may be copies of instructions in memory <b>6504</b> or storage <b>6506</b>, and the instruction caches may speed up retrieval of those instructions by processor <b>6502</b>. Data in the data caches may be copies of data in memory <b>6504</b> or storage <b>6506</b> for instructions executing at processor <b>6502</b> to operate on; the results of previous instructions executed at processor <b>6502</b> for access by subsequent instructions executing at processor <b>6502</b> or for writing to memory <b>6504</b> or storage <b>6506</b>; or other suitable data. The data caches may speed up read or write operations by processor <b>6502</b>. The TLBs may speed up virtual-address translation for processor <b>6502</b>. In particular embodiments, processor <b>6502</b> may include one or more internal registers for data, instructions, or addresses. This disclosure contemplates processor <b>6502</b> including any suitable number of any suitable internal registers, where appropriate. Where appropriate, processor <b>6502</b> may include one or more ALUs; be a multi-core processor; or include one or more processors <b>6502</b>. Although this disclosure describes and illustrates a particular processor, this disclosure contemplates any suitable processor.</p><p id="p-0294" num="0272">In particular embodiments, memory <b>6504</b> includes main memory for storing instructions for processor <b>6502</b> to execute or data for processor <b>6502</b> to operate on. As an example and not by way of limitation, computer system <b>6500</b> may load instructions from storage <b>6506</b> or another source (such as, for example, another computer system <b>6500</b>) to memory <b>6504</b>. Processor <b>6502</b> may then load the instructions from memory <b>6504</b> to an internal register or internal cache. To execute the instructions, processor <b>6502</b> may retrieve the instructions from the internal register or internal cache and decode them. During or after execution of the instructions, processor <b>6502</b> may write one or more results (which may be intermediate or final results) to the internal register or internal cache. Processor <b>6502</b> may then write one or more of those results to memory <b>6504</b>. In particular embodiments, processor <b>6502</b> executes only instructions in one or more internal registers or internal caches or in memory <b>6504</b> (as opposed to storage <b>6506</b> or elsewhere) and operates only on data in one or more internal registers or internal caches or in memory <b>6504</b> (as opposed to storage <b>6506</b> or elsewhere). One or more memory buses (which may each include an address bus and a data bus) may couple processor <b>6502</b> to memory <b>6504</b>. Bus <b>6512</b> may include one or more memory buses, as described below. In particular embodiments, one or more memory management units (MMUs) reside between processor <b>6502</b> and memory <b>6504</b> and facilitate accesses to memory <b>6504</b> requested by processor <b>6502</b>. In particular embodiments, memory <b>6504</b> includes random access memory (RAM). This RAM may be volatile memory, where appropriate. Where appropriate, this RAM may be dynamic RAM (DRAM) or static RAM (SRAM). Moreover, where appropriate, this RAM may be single-ported or multi-ported RAM. This disclosure contemplates any suitable RAM. Memory <b>6504</b> may include one or more memories <b>6504</b>, where appropriate. Although this disclosure describes and illustrates particular memory, this disclosure contemplates any suitable memory.</p><p id="p-0295" num="0273">In particular embodiments, storage <b>6506</b> includes mass storage for data or instructions. As an example and not by way of limitation, storage <b>6506</b> may include a hard disk drive (HDD), a floppy disk drive, flash memory, an optical disc, a magneto-optical disc, magnetic tape, or a Universal Serial Bus (USB) drive or a combination of two or more of these. Storage <b>6506</b> may include removable or non-removable (or fixed) media, where appropriate. Storage <b>6506</b> may be internal or external to computer system <b>6500</b>, where appropriate. In particular embodiments, storage <b>6506</b> is non-volatile, solid-state memory. In particular embodiments, storage <b>6506</b> includes read-only memory (ROM). Where appropriate, this ROM may be mask-programmed ROM, programmable ROM (PROM), erasable PROM (EPROM), electrically erasable PROM (EEPROM), electrically alterable ROM (EAROM), or flash memory or a combination of two or more of these. This disclosure contemplates mass storage <b>6506</b> taking any suitable physical form. Storage <b>6506</b> may include one or more storage control units facilitating communication between processor <b>6502</b> and storage <b>6506</b>, where appropriate. Where appropriate, storage <b>6506</b> may include one or more storages <b>6506</b>. Although this disclosure describes and illustrates particular storage, this disclosure contemplates any suitable storage.</p><p id="p-0296" num="0274">In particular embodiments, I/O interface <b>6508</b> includes hardware, software, or both, providing one or more interfaces for communication between computer system <b>6500</b> and one or more I/O devices. Computer system <b>6500</b> may include one or more of these I/O devices, where appropriate. One or more of these I/O devices may enable communication between a person and computer system <b>6500</b>. As an example and not by way of limitation, an I/O device may include a keyboard, keypad, microphone, monitor, mouse, printer, scanner, speaker, still camera, stylus, tablet, touch screen, trackball, video camera, another suitable I/O device or a combination of two or more of these. An I/O device may include one or more sensors. This disclosure contemplates any suitable I/O devices and any suitable I/O interfaces <b>6508</b> for them. Where appropriate, I/O interface <b>6508</b> may include one or more device or software drivers enabling processor <b>6502</b> to drive one or more of these I/O devices. I/O interface <b>6508</b> may include one or more I/O interfaces <b>6508</b>, where appropriate. Although this disclosure describes and illustrates a particular I/O interface, this disclosure contemplates any suitable I/O interface.</p><p id="p-0297" num="0275">In particular embodiments, communication interface <b>6510</b> includes hardware, software, or both providing one or more interfaces for communication (such as, for example, packet-based communication) between computer system <b>6500</b> and one or more other computer systems <b>6500</b> or one or more networks. As an example and not by way of limitation, communication interface <b>6510</b> may include a network interface controller (NIC) or network adapter for communicating with an Ethernet or other wire-based network or a wireless NIC (WNIC) or wireless adapter for communicating with a wireless network, such as a WI-FI network. This disclosure contemplates any suitable network and any suitable communication interface <b>6510</b> for it. As an example and not by way of limitation, computer system <b>6500</b> may communicate with an ad hoc network, a personal area network (PAN), a local area network (LAN), a wide area network (WAN), a metropolitan area network (MAN), or one or more portions of the Internet or a combination of two or more of these. One or more portions of one or more of these networks may be wired or wireless. As an example, computer system <b>6500</b> may communicate with a wireless PAN (WPAN) (such as, for example, a BLUETOOTH WPAN), a WI-FI network, a WI-MAX network, a cellular telephone network (such as, for example, a Global System for Mobile Communications (GSM) network), or other suitable wireless network or a combination of two or more of these. Computer system <b>6500</b> may include any suitable communication interface <b>6510</b> for any of these networks, where appropriate. Communication interface <b>6510</b> may include one or more communication interfaces <b>6510</b>, where appropriate. Although this disclosure describes and illustrates a particular communication interface, this disclosure contemplates any suitable communication interface.</p><p id="p-0298" num="0276">In particular embodiments, bus <b>6512</b> includes hardware, software, or both coupling components of computer system <b>6500</b> to each other. As an example and not by way of limitation, bus <b>6512</b> may include an Accelerated Graphics Port (AGP) or other graphics bus, an Enhanced Industry Standard Architecture (EISA) bus, a front-side bus (FSB), a HYPERTRANSPORT (HT) interconnect, an Industry Standard Architecture (ISA) bus, an INFINIBAND interconnect, a low-pin-count (LPC) bus, a memory bus, a Micro Channel Architecture (MCA) bus, a Peripheral Component Interconnect (PCI) bus, a PCI-Express (PCIe) bus, a serial advanced technology attachment (SATA) bus, a Video Electronics Standards Association local (VLB) bus, or another suitable bus or a combination of two or more of these. Bus <b>6512</b> may include one or more buses <b>6512</b>, where appropriate. Although this disclosure describes and illustrates a particular bus, this disclosure contemplates any suitable bus or interconnect.</p><p id="p-0299" num="0277">Herein, a computer-readable non-transitory storage medium or media may include one or more semiconductor-based or other integrated circuits (ICs) (such, as for example, field-programmable gate arrays (FPGAs) or application-specific ICs (ASICs)), hard disk drives (HDDs), hybrid hard drives (HHDs), optical discs, optical disc drives (ODDS), magneto-optical discs, magneto-optical drives, floppy diskettes, floppy disk drives (FDDs), magnetic tapes, solid-state drives (SSDs), RAM-drives, SECURE DIGITAL cards or drives, any other suitable computer-readable non-transitory storage media, or any suitable combination of two or more of these, where appropriate. A computer-readable non-transitory storage medium may be volatile, non-volatile, or a combination of volatile and non-volatile, where appropriate.</p><p id="p-0300" num="0278">Herein, &#x201c;or&#x201d; is inclusive and not exclusive, unless expressly indicated otherwise or indicated otherwise by context. Therefore, herein, &#x201c;A or B&#x201d; means &#x201c;A, B, or both,&#x201d; unless expressly indicated otherwise or indicated otherwise by context. Moreover, &#x201c;and&#x201d; is both joint and several, unless expressly indicated otherwise or indicated otherwise by context. Therefore, herein, &#x201c;A and B&#x201d; means &#x201c;A and B, jointly or severally,&#x201d; unless expressly indicated otherwise or indicated otherwise by context.</p><p id="p-0301" num="0279">The scope of this disclosure encompasses all changes, substitutions, variations, alterations, and modifications to the example embodiments described or illustrated herein that a person having ordinary skill in the art would comprehend. The scope of this disclosure is not limited to the example embodiments described or illustrated herein. The embodiments disclosed herein are only examples, and the scope of this disclosure is not limited to them. Moreover, although this disclosure describes and illustrates respective embodiments herein as including particular components, elements, feature, functions, operations, or steps, any of these embodiments may include any combination or permutation of any of the components, elements, features, functions, operations, or steps described or illustrated anywhere herein that a person having ordinary skill in the art would comprehend. Particular embodiments may include all, some, or none of the components, elements, features, functions, operations, or steps of the embodiments disclosed herein. Furthermore, reference in the appended claims to an apparatus or system or a component of an apparatus or system being adapted to, arranged to, capable of, configured to, enabled to, operable to, or operative to perform a particular function encompasses that apparatus, system, component, whether or not it or that particular function is activated, turned on, or unlocked, as long as that apparatus, system, or component is so adapted, arranged, capable, configured, enabled, operable, or operative. Additionally, although this disclosure describes or illustrates particular embodiments as providing particular advantages, particular embodiments may provide none, some, or all of these advantages.</p><?detailed-description description="Detailed Description" end="tail"?></description><us-math idrefs="MATH-US-00001" nb-file="US20230003544A1-20230105-M00001.NB"><img id="EMI-M00001" he="5.67mm" wi="76.20mm" file="US20230003544A1-20230105-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00002" nb-file="US20230003544A1-20230105-M00002.NB"><img id="EMI-M00002" he="5.67mm" wi="76.20mm" file="US20230003544A1-20230105-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00003 MATH-US-00003-2" nb-file="US20230003544A1-20230105-M00003.NB"><img id="EMI-M00003" he="9.91mm" wi="76.20mm" file="US20230003544A1-20230105-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00004" nb-file="US20230003544A1-20230105-M00004.NB"><img id="EMI-M00004" he="7.79mm" wi="76.20mm" file="US20230003544A1-20230105-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00005 MATH-US-00005-2 MATH-US-00005-3" nb-file="US20230003544A1-20230105-M00005.NB"><img id="EMI-M00005" he="22.94mm" wi="76.20mm" file="US20230003544A1-20230105-M00005.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00006" nb-file="US20230003544A1-20230105-M00006.NB"><img id="EMI-M00006" he="5.67mm" wi="76.20mm" file="US20230003544A1-20230105-M00006.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00007" nb-file="US20230003544A1-20230105-M00007.NB"><img id="EMI-M00007" he="5.67mm" wi="76.20mm" file="US20230003544A1-20230105-M00007.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00008" nb-file="US20230003544A1-20230105-M00008.NB"><img id="EMI-M00008" he="5.67mm" wi="76.20mm" file="US20230003544A1-20230105-M00008.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00009" nb-file="US20230003544A1-20230105-M00009.NB"><img id="EMI-M00009" he="5.67mm" wi="76.20mm" file="US20230003544A1-20230105-M00009.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00010" nb-file="US20230003544A1-20230105-M00010.NB"><img id="EMI-M00010" he="5.67mm" wi="76.20mm" file="US20230003544A1-20230105-M00010.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00011" nb-file="US20230003544A1-20230105-M00011.NB"><img id="EMI-M00011" he="8.13mm" wi="76.20mm" file="US20230003544A1-20230105-M00011.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00012" nb-file="US20230003544A1-20230105-M00012.NB"><img id="EMI-M00012" he="8.13mm" wi="76.20mm" file="US20230003544A1-20230105-M00012.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00013" nb-file="US20230003544A1-20230105-M00013.NB"><img id="EMI-M00013" he="8.13mm" wi="76.20mm" file="US20230003544A1-20230105-M00013.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00014" nb-file="US20230003544A1-20230105-M00014.NB"><img id="EMI-M00014" he="8.13mm" wi="76.20mm" file="US20230003544A1-20230105-M00014.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00015" nb-file="US20230003544A1-20230105-M00015.NB"><img id="EMI-M00015" he="17.95mm" wi="76.20mm" file="US20230003544A1-20230105-M00015.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00016" nb-file="US20230003544A1-20230105-M00016.NB"><img id="EMI-M00016" he="17.95mm" wi="76.20mm" file="US20230003544A1-20230105-M00016.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00017" nb-file="US20230003544A1-20230105-M00017.NB"><img id="EMI-M00017" he="17.95mm" wi="76.20mm" file="US20230003544A1-20230105-M00017.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00018" nb-file="US20230003544A1-20230105-M00018.NB"><img id="EMI-M00018" he="8.13mm" wi="76.20mm" file="US20230003544A1-20230105-M00018.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00019" nb-file="US20230003544A1-20230105-M00019.NB"><img id="EMI-M00019" he="5.67mm" wi="76.20mm" file="US20230003544A1-20230105-M00019.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00020" nb-file="US20230003544A1-20230105-M00020.NB"><img id="EMI-M00020" he="5.67mm" wi="76.20mm" file="US20230003544A1-20230105-M00020.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00021" nb-file="US20230003544A1-20230105-M00021.NB"><img id="EMI-M00021" he="6.01mm" wi="76.20mm" file="US20230003544A1-20230105-M00021.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00022" nb-file="US20230003544A1-20230105-M00022.NB"><img id="EMI-M00022" he="5.67mm" wi="76.20mm" file="US20230003544A1-20230105-M00022.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00023" nb-file="US20230003544A1-20230105-M00023.NB"><img id="EMI-M00023" he="6.01mm" wi="76.20mm" file="US20230003544A1-20230105-M00023.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00024" nb-file="US20230003544A1-20230105-M00024.NB"><img id="EMI-M00024" he="11.60mm" wi="76.20mm" file="US20230003544A1-20230105-M00024.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00025" nb-file="US20230003544A1-20230105-M00025.NB"><img id="EMI-M00025" he="6.01mm" wi="76.20mm" file="US20230003544A1-20230105-M00025.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00026" nb-file="US20230003544A1-20230105-M00026.NB"><img id="EMI-M00026" he="6.01mm" wi="76.20mm" file="US20230003544A1-20230105-M00026.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><us-math idrefs="MATH-US-00027" nb-file="US20230003544A1-20230105-M00027.NB"><img id="EMI-M00027" he="6.01mm" wi="76.20mm" file="US20230003544A1-20230105-M00027.TIF" alt="embedded image " img-content="math" img-format="tif"/></us-math><claims id="claims"><claim id="CLM-00001" num="00001"><claim-text><b>1</b>. A method comprising:<claim-text>by a first computing device, accessing a magnetic map of an area, wherein the magnetic map comprises a plurality of magnetic-field values for a plurality of locations in the area;</claim-text><claim-text>by the first computing device, accessing an image file, wherein:<claim-text>the image file comprises;<claim-text>a plurality of pixels that each correspond to one of the locations and comprise a plurality of components; and</claim-text><claim-text>a first matrix comprising a plurality of first elements that each comprise one or more color values; and</claim-text></claim-text><claim-text>each of one or more of the components of each of one or more of the pixels comprises a link to one of the first elements in the first matrix;</claim-text></claim-text><claim-text>by the first computing device, embedding one or more portions of the magnetic map into the image file by:<claim-text>generating a second matrix for the image file comprising a plurality of second elements that each represent one or more of the magnetic-field values; and</claim-text><claim-text>for each of one or more locations in the area, writing to one of the components of the pixel corresponding to the location a link to one of the second elements of the second matrix; and</claim-text></claim-text><claim-text>by the first computing device, communicating the image file, with the portions of the magnetic map embedded in it, to one or more second computing devices for navigation or localization using the magnetic map.</claim-text></claim-text></claim><claim id="CLM-00002" num="00002"><claim-text><b>2</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein navigation or localization using the magnetic map comprises generating a visualization of one or more portions of the magnetic map to be presented to a user on a display.</claim-text></claim><claim id="CLM-00003" num="00003"><claim-text><b>3</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the image file is a georeferenced image file.</claim-text></claim><claim id="CLM-00004" num="00004"><claim-text><b>4</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the image file is one or more Geographic Tagged Image File Format (GeoTIFF) files or one or more Cloud Optimized GeoTIFF (COG) files.</claim-text></claim><claim id="CLM-00005" num="00005"><claim-text><b>5</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the image file is one or ore Tagged Image File Format (TIFF) files.</claim-text></claim><claim id="CLM-00006" num="00006"><claim-text><b>6</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein each of one or more of the elements of the second matrix comprises:<claim-text>a first quantized value of a total strength of a magnetic field;</claim-text><claim-text>a second quantized value of a declination of the magnetic field;</claim-text><claim-text>a third quantized value of an inclination of the magnetic field; and</claim-text><claim-text>a quantization error.</claim-text></claim-text></claim><claim id="CLM-00007" num="00007"><claim-text><b>7</b>. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein one or more portions of the area are indoors.</claim-text></claim><claim id="CLM-00008" num="00008"><claim-text><b>8</b>. One or more computer-readable non-transitory storage media embodying software that is operable when executed to:<claim-text>access a magnetic map of an area, wherein the magnetic map comprises a plurality of magnetic-field values for a plurality of locations in the area;</claim-text><claim-text>access an image file, wherein:<claim-text>the image file comprises;<claim-text>a plurality of pixels that each correspond to one of the locations and comprise a plurality of components; and</claim-text><claim-text>a first matrix comprising a plurality of first elements that each comprise one or more color values; and</claim-text></claim-text><claim-text>each of one or more of the components of each of one or more of the pixels comprises a link to one of the first elements in the first matrix;</claim-text></claim-text><claim-text>embed one or more portions of the magnetic map into the image file by:<claim-text>generating a second matrix for the image file comprising a plurality of second elements that each represent one or more of the magnetic-field values; and</claim-text><claim-text>for each of one or more locations in the area, writing to one of the components of the pixel corresponding to the location a link to one of the second elements of the second matrix; and</claim-text></claim-text><claim-text>communicate the image file, with the portions of the magnetic map embedded in it, to one or more second computing devices for navigation or localization using the magnetic map.</claim-text></claim-text></claim><claim id="CLM-00009" num="00009"><claim-text><b>9</b>. The media of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein navigation or localization using the magnetic map comprises generating a visualization of one or more portions of the magnetic map to be presented to a user on a display.</claim-text></claim><claim id="CLM-00010" num="00010"><claim-text><b>10</b>. The media of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the image file is a georeferenced image file.</claim-text></claim><claim id="CLM-00011" num="00011"><claim-text><b>11</b>. The media of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the image file is one or more Geographic Tagged Image File Format (GeoTIFF) files or one or more Cloud Optimized GeoTIFF (COG) files.</claim-text></claim><claim id="CLM-00012" num="00012"><claim-text><b>12</b>. The media of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the image file is one or ore Tagged Image File Format (TIFF) files.</claim-text></claim><claim id="CLM-00013" num="00013"><claim-text><b>13</b>. The media of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein each of one or more of the elements of the second matrix comprises:<claim-text>a first quantized value of a total strength of a magnetic field;</claim-text><claim-text>a second quantized value of a declination of the magnetic field;</claim-text><claim-text>a third quantized value of an inclination of the magnetic field; and</claim-text><claim-text>a quantization error.</claim-text></claim-text></claim><claim id="CLM-00014" num="00014"><claim-text><b>14</b>. The media of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein one or more portions of the area are indoors.</claim-text></claim><claim id="CLM-00015" num="00015"><claim-text><b>15</b>. A system comprising:<claim-text>one or more processors; and</claim-text><claim-text>one or more computer-readable non-transitory storage media coupled to one or more of the processors and comprising instructions operable when executed by one or more of the processors to cause the system to:<claim-text>access a magnetic map of an area, wherein the magnetic map comprises a plurality of magnetic-field values for a plurality of locations in the area;</claim-text><claim-text>access an image file, wherein:<claim-text>the image file comprises;<claim-text>a plurality of pixels that each correspond to one of the locations and comprise a plurality of components; and</claim-text><claim-text>a first matrix comprising a plurality of first elements that each comprise one or more color values; and</claim-text></claim-text><claim-text>each of one or more of the components of each of one or more of the pixels comprises a link to one of the first elements in the first matrix;</claim-text></claim-text><claim-text>embed one or more portions of the magnetic map into the image file by:<claim-text>generating a second matrix for the image file comprising a plurality of second elements that each represent one or more of the magnetic-field values; and</claim-text><claim-text>for each of one or more locations in the area, writing to one of the components of the pixel corresponding to the location a link to one of the second elements of the second matrix; and</claim-text></claim-text><claim-text>communicate the image file, with the portions of the magnetic map embedded in it, to one or more second computing devices for navigation or localization using the magnetic map.</claim-text></claim-text></claim-text></claim><claim id="CLM-00016" num="00016"><claim-text><b>16</b>. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein navigation or localization using the magnetic map comprises generating a visualization of one or more portions of the magnetic map to be presented to a user on a display.</claim-text></claim><claim id="CLM-00017" num="00017"><claim-text><b>17</b>. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the image file is a georeferenced image file.</claim-text></claim><claim id="CLM-00018" num="00018"><claim-text><b>18</b>. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the image file is one or more Geographic Tagged Image File Format (GeoTIFF) files or one or more Cloud Optimized GeoTIFF (COG) files.</claim-text></claim><claim id="CLM-00019" num="00019"><claim-text><b>19</b>. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the image file is one or ore Tagged Image File Format (TIFF) files.</claim-text></claim><claim id="CLM-00020" num="00020"><claim-text><b>20</b>. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein each of one or more of the elements of the second matrix comprises:<claim-text>a first quantized value of a total strength of a magnetic field;</claim-text><claim-text>a second quantized value of a declination of the magnetic field;</claim-text><claim-text>a third quantized value of an inclination of the magnetic field; and</claim-text><claim-text>a quantization error.</claim-text></claim-text></claim><claim id="CLM-00021" num="00021"><claim-text><b>21</b>. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein one or more portions of the area are indoors.</claim-text></claim></claims></us-patent-application>